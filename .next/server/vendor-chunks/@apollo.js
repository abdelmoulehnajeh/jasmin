"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@apollo";
exports.ids = ["vendor-chunks/@apollo"];
exports.modules = {

/***/ "(rsc)/./node_modules/@apollo/protobufjs/minimal.js":
/*!****************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/minimal.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// minimal library entry point.\n\n\nmodule.exports = __webpack_require__(/*! ./src/index-minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/src/index-minimal.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL21pbmltYWwuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRWE7QUFDYiwrSEFBK0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vcHJvdG9idWZqcy9taW5pbWFsLmpzPzJjMjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbWluaW1hbCBsaWJyYXJ5IGVudHJ5IHBvaW50LlxuXG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vc3JjL2luZGV4LW1pbmltYWxcIik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/minimal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/index-minimal.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/index-minimal.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar protobuf = exports;\n\n/**\n * Build type, one of `\"full\"`, `\"light\"` or `\"minimal\"`.\n * @name build\n * @type {string}\n * @const\n */\nprotobuf.build = \"minimal\";\n\n// Serialization\nprotobuf.Writer       = __webpack_require__(/*! ./writer */ \"(rsc)/./node_modules/@apollo/protobufjs/src/writer.js\");\nprotobuf.BufferWriter = __webpack_require__(/*! ./writer_buffer */ \"(rsc)/./node_modules/@apollo/protobufjs/src/writer_buffer.js\");\nprotobuf.Reader       = __webpack_require__(/*! ./reader */ \"(rsc)/./node_modules/@apollo/protobufjs/src/reader.js\");\nprotobuf.BufferReader = __webpack_require__(/*! ./reader_buffer */ \"(rsc)/./node_modules/@apollo/protobufjs/src/reader_buffer.js\");\n\n// Utility\nprotobuf.util         = __webpack_require__(/*! ./util/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js\");\nprotobuf.rpc          = __webpack_require__(/*! ./rpc */ \"(rsc)/./node_modules/@apollo/protobufjs/src/rpc.js\");\nprotobuf.roots        = __webpack_require__(/*! ./roots */ \"(rsc)/./node_modules/@apollo/protobufjs/src/roots.js\");\nprotobuf.configure    = configure;\n\n/* istanbul ignore next */\n/**\n * Reconfigures the library according to the environment.\n * @returns {undefined}\n */\nfunction configure() {\n    protobuf.Reader._configure(protobuf.BufferReader);\n    protobuf.util._configure();\n}\n\n// Set up buffer utility according to the environment\nprotobuf.Writer._configure(protobuf.BufferWriter);\nconfigure();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9pbmRleC1taW5pbWFsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixtQkFBTyxDQUFDLHVFQUFVO0FBQzFDLHdCQUF3QixtQkFBTyxDQUFDLHFGQUFpQjtBQUNqRCx3QkFBd0IsbUJBQU8sQ0FBQyx1RUFBVTtBQUMxQyx3QkFBd0IsbUJBQU8sQ0FBQyxxRkFBaUI7O0FBRWpEO0FBQ0Esd0JBQXdCLG1CQUFPLENBQUMsbUZBQWdCO0FBQ2hELHdCQUF3QixtQkFBTyxDQUFDLGlFQUFPO0FBQ3ZDLHdCQUF3QixtQkFBTyxDQUFDLHFFQUFTO0FBQ3pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9pbmRleC1taW5pbWFsLmpzPzE1ZTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcHJvdG9idWYgPSBleHBvcnRzO1xuXG4vKipcbiAqIEJ1aWxkIHR5cGUsIG9uZSBvZiBgXCJmdWxsXCJgLCBgXCJsaWdodFwiYCBvciBgXCJtaW5pbWFsXCJgLlxuICogQG5hbWUgYnVpbGRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAY29uc3RcbiAqL1xucHJvdG9idWYuYnVpbGQgPSBcIm1pbmltYWxcIjtcblxuLy8gU2VyaWFsaXphdGlvblxucHJvdG9idWYuV3JpdGVyICAgICAgID0gcmVxdWlyZShcIi4vd3JpdGVyXCIpO1xucHJvdG9idWYuQnVmZmVyV3JpdGVyID0gcmVxdWlyZShcIi4vd3JpdGVyX2J1ZmZlclwiKTtcbnByb3RvYnVmLlJlYWRlciAgICAgICA9IHJlcXVpcmUoXCIuL3JlYWRlclwiKTtcbnByb3RvYnVmLkJ1ZmZlclJlYWRlciA9IHJlcXVpcmUoXCIuL3JlYWRlcl9idWZmZXJcIik7XG5cbi8vIFV0aWxpdHlcbnByb3RvYnVmLnV0aWwgICAgICAgICA9IHJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKTtcbnByb3RvYnVmLnJwYyAgICAgICAgICA9IHJlcXVpcmUoXCIuL3JwY1wiKTtcbnByb3RvYnVmLnJvb3RzICAgICAgICA9IHJlcXVpcmUoXCIuL3Jvb3RzXCIpO1xucHJvdG9idWYuY29uZmlndXJlICAgID0gY29uZmlndXJlO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuLyoqXG4gKiBSZWNvbmZpZ3VyZXMgdGhlIGxpYnJhcnkgYWNjb3JkaW5nIHRvIHRoZSBlbnZpcm9ubWVudC5cbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cbmZ1bmN0aW9uIGNvbmZpZ3VyZSgpIHtcbiAgICBwcm90b2J1Zi5SZWFkZXIuX2NvbmZpZ3VyZShwcm90b2J1Zi5CdWZmZXJSZWFkZXIpO1xuICAgIHByb3RvYnVmLnV0aWwuX2NvbmZpZ3VyZSgpO1xufVxuXG4vLyBTZXQgdXAgYnVmZmVyIHV0aWxpdHkgYWNjb3JkaW5nIHRvIHRoZSBlbnZpcm9ubWVudFxucHJvdG9idWYuV3JpdGVyLl9jb25maWd1cmUocHJvdG9idWYuQnVmZmVyV3JpdGVyKTtcbmNvbmZpZ3VyZSgpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/index-minimal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/reader.js":
/*!*******************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/reader.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nmodule.exports = Reader;\n\nvar util      = __webpack_require__(/*! ./util/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js\");\n\nvar BufferReader; // cyclic\n\nvar LongBits  = util.LongBits,\n    utf8      = util.utf8;\n\n/* istanbul ignore next */\nfunction indexOutOfRange(reader, writeLength) {\n    return RangeError(\"index out of range: \" + reader.pos + \" + \" + (writeLength || 1) + \" > \" + reader.len);\n}\n\n/**\n * Constructs a new reader instance using the specified buffer.\n * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n * @param {Uint8Array} buffer Buffer to read from\n */\nfunction Reader(buffer) {\n\n    /**\n     * Read buffer.\n     * @type {Uint8Array}\n     */\n    this.buf = buffer;\n\n    /**\n     * Read buffer position.\n     * @type {number}\n     */\n    this.pos = 0;\n\n    /**\n     * Read buffer length.\n     * @type {number}\n     */\n    this.len = buffer.length;\n}\n\nvar create_array = typeof Uint8Array !== \"undefined\"\n    ? function create_typed_array(buffer) {\n        if (buffer instanceof Uint8Array || Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    }\n    /* istanbul ignore next */\n    : function create_array(buffer) {\n        if (Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    };\n\n/**\n * Creates a new reader using the specified buffer.\n * @function\n * @param {Uint8Array|Buffer} buffer Buffer to read from\n * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}\n * @throws {Error} If `buffer` is not a valid buffer\n */\nReader.create = util.Buffer\n    ? function create_buffer_setup(buffer) {\n        return (Reader.create = function create_buffer(buffer) {\n            return util.Buffer.isBuffer(buffer)\n                ? new BufferReader(buffer)\n                /* istanbul ignore next */\n                : create_array(buffer);\n        })(buffer);\n    }\n    /* istanbul ignore next */\n    : create_array;\n\nReader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;\n\n/**\n * Reads a varint as an unsigned 32 bit value.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.uint32 = (function read_uint32_setup() {\n    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)\n    return function read_uint32() {\n        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;\n\n        /* istanbul ignore if */\n        if ((this.pos += 5) > this.len) {\n            this.pos = this.len;\n            throw indexOutOfRange(this, 10);\n        }\n        return value;\n    };\n})();\n\n/**\n * Reads a varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.int32 = function read_int32() {\n    return this.uint32() | 0;\n};\n\n/**\n * Reads a zig-zag encoded varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.sint32 = function read_sint32() {\n    var value = this.uint32();\n    return value >>> 1 ^ -(value & 1) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readLongVarint() {\n    // tends to deopt with local vars for octet etc.\n    var bits = new LongBits(0, 0);\n    var i = 0;\n    if (this.len - this.pos > 4) { // fast route (lo)\n        for (; i < 4; ++i) {\n            // 1st..4th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 5th\n        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;\n        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;\n        if (this.buf[this.pos++] < 128)\n            return bits;\n        i = 0;\n    } else {\n        for (; i < 3; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 1st..3th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 4th\n        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;\n        return bits;\n    }\n    if (this.len - this.pos > 4) { // fast route (hi)\n        for (; i < 5; ++i) {\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    } else {\n        for (; i < 5; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    }\n    /* istanbul ignore next */\n    throw Error(\"invalid varint encoding\");\n}\n\n/* eslint-enable no-invalid-this */\n\n/*\n * Reads a varint as a signed 64 bit value.\n * @name Reader#int64\n * @function\n * @returns {Long} Value read\n */\n\n/*\n * Reads a varint as an unsigned 64 bit value.\n * @name Reader#uint64\n * @function\n * @returns {Long} Value read\n */\n\n/*\n * Reads a zig-zag encoded varint as a signed 64 bit value.\n * @name Reader#sint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as a boolean.\n * @returns {boolean} Value read\n */\nReader.prototype.bool = function read_bool() {\n    return this.uint32() !== 0;\n};\n\nfunction readFixed32_end(buf, end) { // note that this uses `end`, not `pos`\n    return (buf[end - 4]\n          | buf[end - 3] << 8\n          | buf[end - 2] << 16\n          | buf[end - 1] << 24) >>> 0;\n}\n\n/**\n * Reads fixed 32 bits as an unsigned 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.fixed32 = function read_fixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4);\n};\n\n/**\n * Reads fixed 32 bits as a signed 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.sfixed32 = function read_sfixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readFixed64(/* this: Reader */) {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 8);\n\n    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));\n}\n\n/* eslint-enable no-invalid-this */\n\n/*\n * Reads fixed 64 bits.\n * @name Reader#fixed64\n * @function\n * @returns {Long} Value read\n */\n\n/*\n * Reads zig-zag encoded fixed 64 bits.\n * @name Reader#sfixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a float (32 bit) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.float = function read_float() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readFloatLE(this.buf, this.pos);\n    this.pos += 4;\n    return value;\n};\n\n/**\n * Reads a double (64 bit float) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.double = function read_double() {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readDoubleLE(this.buf, this.pos);\n    this.pos += 8;\n    return value;\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @returns {Uint8Array} Value read\n */\nReader.prototype.bytes = function read_bytes() {\n    var length = this.uint32(),\n        start  = this.pos,\n        end    = this.pos + length;\n\n    /* istanbul ignore if */\n    if (end > this.len)\n        throw indexOutOfRange(this, length);\n\n    this.pos += length;\n    if (Array.isArray(this.buf)) // plain array\n        return this.buf.slice(start, end);\n    return start === end // fix for IE 10/Win8 and others' subarray returning array of size 1\n        ? new this.buf.constructor(0)\n        : this._slice.call(this.buf, start, end);\n};\n\n/**\n * Reads a string preceeded by its byte length as a varint.\n * @returns {string} Value read\n */\nReader.prototype.string = function read_string() {\n    var bytes = this.bytes();\n    return utf8.read(bytes, 0, bytes.length);\n};\n\n/**\n * Skips the specified number of bytes if specified, otherwise skips a varint.\n * @param {number} [length] Length if known, otherwise a varint is assumed\n * @returns {Reader} `this`\n */\nReader.prototype.skip = function skip(length) {\n    if (typeof length === \"number\") {\n        /* istanbul ignore if */\n        if (this.pos + length > this.len)\n            throw indexOutOfRange(this, length);\n        this.pos += length;\n    } else {\n        do {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n        } while (this.buf[this.pos++] & 128);\n    }\n    return this;\n};\n\n/**\n * Skips the next element of the specified wire type.\n * @param {number} wireType Wire type received\n * @returns {Reader} `this`\n */\nReader.prototype.skipType = function(wireType) {\n    switch (wireType) {\n        case 0:\n            this.skip();\n            break;\n        case 1:\n            this.skip(8);\n            break;\n        case 2:\n            this.skip(this.uint32());\n            break;\n        case 3:\n            while ((wireType = this.uint32() & 7) !== 4) {\n                this.skipType(wireType);\n            }\n            break;\n        case 5:\n            this.skip(4);\n            break;\n\n        /* istanbul ignore next */\n        default:\n            throw Error(\"invalid wire type \" + wireType + \" at offset \" + this.pos);\n    }\n    return this;\n};\n\nReader._configure = function(BufferReader_) {\n    BufferReader = BufferReader_;\n\n    var fn = util.Long ? \"toLong\" : /* istanbul ignore next */ \"toNumber\";\n    util.merge(Reader.prototype, {\n\n        int64: function read_int64() {\n            return readLongVarint.call(this)[fn](false);\n        },\n\n        uint64: function read_uint64() {\n            return readLongVarint.call(this)[fn](true);\n        },\n\n        sint64: function read_sint64() {\n            return readLongVarint.call(this).zzDecode()[fn](false);\n        },\n\n        fixed64: function read_fixed64() {\n            return readFixed64.call(this)[fn](true);\n        },\n\n        sfixed64: function read_sfixed64() {\n            return readFixed64.call(this)[fn](false);\n        }\n\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9yZWFkZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjs7QUFFQSxnQkFBZ0IsbUJBQU8sQ0FBQyxtRkFBZ0I7O0FBRXhDLGtCQUFrQjs7QUFFbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbUJBQW1CO0FBQzlCLGFBQWEscUJBQXFCLEdBQUcsb0JBQW9CLHNDQUFzQztBQUMvRixZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQSxrRUFBa0U7QUFDbEUsa0VBQWtFO0FBQ2xFLGtFQUFrRTtBQUNsRSxrRUFBa0U7QUFDbEUsa0VBQWtFOztBQUVsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxNQUFNO0FBQ25COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxNQUFNO0FBQ25COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxNQUFNO0FBQ25COztBQUVBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsTUFBTTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsTUFBTTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFlBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTCIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9yZWFkZXIuanM/ZTYzZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gUmVhZGVyO1xuXG52YXIgdXRpbCAgICAgID0gcmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpO1xuXG52YXIgQnVmZmVyUmVhZGVyOyAvLyBjeWNsaWNcblxudmFyIExvbmdCaXRzICA9IHV0aWwuTG9uZ0JpdHMsXG4gICAgdXRmOCAgICAgID0gdXRpbC51dGY4O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gaW5kZXhPdXRPZlJhbmdlKHJlYWRlciwgd3JpdGVMZW5ndGgpIHtcbiAgICByZXR1cm4gUmFuZ2VFcnJvcihcImluZGV4IG91dCBvZiByYW5nZTogXCIgKyByZWFkZXIucG9zICsgXCIgKyBcIiArICh3cml0ZUxlbmd0aCB8fCAxKSArIFwiID4gXCIgKyByZWFkZXIubGVuKTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHJlYWRlciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIGJ1ZmZlci5cbiAqIEBjbGFzc2Rlc2MgV2lyZSBmb3JtYXQgcmVhZGVyIHVzaW5nIGBVaW50OEFycmF5YCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBgQXJyYXlgLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBCdWZmZXIgdG8gcmVhZCBmcm9tXG4gKi9cbmZ1bmN0aW9uIFJlYWRlcihidWZmZXIpIHtcblxuICAgIC8qKlxuICAgICAqIFJlYWQgYnVmZmVyLlxuICAgICAqIEB0eXBlIHtVaW50OEFycmF5fVxuICAgICAqL1xuICAgIHRoaXMuYnVmID0gYnVmZmVyO1xuXG4gICAgLyoqXG4gICAgICogUmVhZCBidWZmZXIgcG9zaXRpb24uXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBvcyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBSZWFkIGJ1ZmZlciBsZW5ndGguXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxlbiA9IGJ1ZmZlci5sZW5ndGg7XG59XG5cbnZhciBjcmVhdGVfYXJyYXkgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gXCJ1bmRlZmluZWRcIlxuICAgID8gZnVuY3Rpb24gY3JlYXRlX3R5cGVkX2FycmF5KGJ1ZmZlcikge1xuICAgICAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBBcnJheS5pc0FycmF5KGJ1ZmZlcikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRlcihidWZmZXIpO1xuICAgICAgICB0aHJvdyBFcnJvcihcImlsbGVnYWwgYnVmZmVyXCIpO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIDogZnVuY3Rpb24gY3JlYXRlX2FycmF5KGJ1ZmZlcikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShidWZmZXIpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkZXIoYnVmZmVyKTtcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGJ1ZmZlclwiKTtcbiAgICB9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcmVhZGVyIHVzaW5nIHRoZSBzcGVjaWZpZWQgYnVmZmVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl8QnVmZmVyfSBidWZmZXIgQnVmZmVyIHRvIHJlYWQgZnJvbVxuICogQHJldHVybnMge1JlYWRlcnxCdWZmZXJSZWFkZXJ9IEEge0BsaW5rIEJ1ZmZlclJlYWRlcn0gaWYgYGJ1ZmZlcmAgaXMgYSBCdWZmZXIsIG90aGVyd2lzZSBhIHtAbGluayBSZWFkZXJ9XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYGJ1ZmZlcmAgaXMgbm90IGEgdmFsaWQgYnVmZmVyXG4gKi9cblJlYWRlci5jcmVhdGUgPSB1dGlsLkJ1ZmZlclxuICAgID8gZnVuY3Rpb24gY3JlYXRlX2J1ZmZlcl9zZXR1cChidWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIChSZWFkZXIuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlX2J1ZmZlcihidWZmZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsLkJ1ZmZlci5pc0J1ZmZlcihidWZmZXIpXG4gICAgICAgICAgICAgICAgPyBuZXcgQnVmZmVyUmVhZGVyKGJ1ZmZlcilcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAgICAgICAgIDogY3JlYXRlX2FycmF5KGJ1ZmZlcik7XG4gICAgICAgIH0pKGJ1ZmZlcik7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgOiBjcmVhdGVfYXJyYXk7XG5cblJlYWRlci5wcm90b3R5cGUuX3NsaWNlID0gdXRpbC5BcnJheS5wcm90b3R5cGUuc3ViYXJyYXkgfHwgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gdXRpbC5BcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbi8qKlxuICogUmVhZHMgYSB2YXJpbnQgYXMgYW4gdW5zaWduZWQgMzIgYml0IHZhbHVlLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUudWludDMyID0gKGZ1bmN0aW9uIHJlYWRfdWludDMyX3NldHVwKCkge1xuICAgIHZhciB2YWx1ZSA9IDQyOTQ5NjcyOTU7IC8vIG9wdGltaXplciB0eXBlLWhpbnQsIHRlbmRzIHRvIGRlb3B0IG90aGVyd2lzZSAoPyEpXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlYWRfdWludDMyKCkge1xuICAgICAgICB2YWx1ZSA9ICggICAgICAgICB0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcgICAgICAgKSA+Pj4gMDsgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KSByZXR1cm4gdmFsdWU7XG4gICAgICAgIHZhbHVlID0gKHZhbHVlIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgIDcpID4+PiAwOyBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCAxNCkgPj4+IDA7IGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOCkgcmV0dXJuIHZhbHVlO1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IDIxKSA+Pj4gMDsgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KSByZXR1cm4gdmFsdWU7XG4gICAgICAgIHZhbHVlID0gKHZhbHVlIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmICAxNSkgPDwgMjgpID4+PiAwOyBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpIHJldHVybiB2YWx1ZTtcblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCh0aGlzLnBvcyArPSA1KSA+IHRoaXMubGVuKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IHRoaXMubGVuO1xuICAgICAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbn0pKCk7XG5cbi8qKlxuICogUmVhZHMgYSB2YXJpbnQgYXMgYSBzaWduZWQgMzIgYml0IHZhbHVlLlxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLmludDMyID0gZnVuY3Rpb24gcmVhZF9pbnQzMigpIHtcbiAgICByZXR1cm4gdGhpcy51aW50MzIoKSB8IDA7XG59O1xuXG4vKipcbiAqIFJlYWRzIGEgemlnLXphZyBlbmNvZGVkIHZhcmludCBhcyBhIHNpZ25lZCAzMiBiaXQgdmFsdWUuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuc2ludDMyID0gZnVuY3Rpb24gcmVhZF9zaW50MzIoKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy51aW50MzIoKTtcbiAgICByZXR1cm4gdmFsdWUgPj4+IDEgXiAtKHZhbHVlICYgMSkgfCAwO1xufTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8taW52YWxpZC10aGlzICovXG5cbmZ1bmN0aW9uIHJlYWRMb25nVmFyaW50KCkge1xuICAgIC8vIHRlbmRzIHRvIGRlb3B0IHdpdGggbG9jYWwgdmFycyBmb3Igb2N0ZXQgZXRjLlxuICAgIHZhciBiaXRzID0gbmV3IExvbmdCaXRzKDAsIDApO1xuICAgIHZhciBpID0gMDtcbiAgICBpZiAodGhpcy5sZW4gLSB0aGlzLnBvcyA+IDQpIHsgLy8gZmFzdCByb3V0ZSAobG8pXG4gICAgICAgIGZvciAoOyBpIDwgNDsgKytpKSB7XG4gICAgICAgICAgICAvLyAxc3QuLjR0aFxuICAgICAgICAgICAgYml0cy5sbyA9IChiaXRzLmxvIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgaSAqIDcpID4+PiAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxuICAgICAgICAgICAgICAgIHJldHVybiBiaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8vIDV0aFxuICAgICAgICBiaXRzLmxvID0gKGJpdHMubG8gfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCAyOCkgPj4+IDA7XG4gICAgICAgIGJpdHMuaGkgPSAoYml0cy5oaSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpID4+ICA0KSA+Pj4gMDtcbiAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxuICAgICAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgICAgIGkgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoOyBpIDwgMzsgKytpKSB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmxlbilcbiAgICAgICAgICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcyk7XG4gICAgICAgICAgICAvLyAxc3QuLjN0aFxuICAgICAgICAgICAgYml0cy5sbyA9IChiaXRzLmxvIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgaSAqIDcpID4+PiAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxuICAgICAgICAgICAgICAgIHJldHVybiBiaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8vIDR0aFxuICAgICAgICBiaXRzLmxvID0gKGJpdHMubG8gfCAodGhpcy5idWZbdGhpcy5wb3MrK10gJiAxMjcpIDw8IGkgKiA3KSA+Pj4gMDtcbiAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgfVxuICAgIGlmICh0aGlzLmxlbiAtIHRoaXMucG9zID4gNCkgeyAvLyBmYXN0IHJvdXRlIChoaSlcbiAgICAgICAgZm9yICg7IGkgPCA1OyArK2kpIHtcbiAgICAgICAgICAgIC8vIDZ0aC4uMTB0aFxuICAgICAgICAgICAgYml0cy5oaSA9IChiaXRzLmhpIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgaSAqIDcgKyAzKSA+Pj4gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOClcbiAgICAgICAgICAgICAgICByZXR1cm4gYml0cztcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoOyBpIDwgNTsgKytpKSB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmxlbilcbiAgICAgICAgICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcyk7XG4gICAgICAgICAgICAvLyA2dGguLjEwdGhcbiAgICAgICAgICAgIGJpdHMuaGkgPSAoYml0cy5oaSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IGkgKiA3ICsgMykgPj4+IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICB0aHJvdyBFcnJvcihcImludmFsaWQgdmFyaW50IGVuY29kaW5nXCIpO1xufVxuXG4vKiBlc2xpbnQtZW5hYmxlIG5vLWludmFsaWQtdGhpcyAqL1xuXG4vKlxuICogUmVhZHMgYSB2YXJpbnQgYXMgYSBzaWduZWQgNjQgYml0IHZhbHVlLlxuICogQG5hbWUgUmVhZGVyI2ludDY0XG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtMb25nfSBWYWx1ZSByZWFkXG4gKi9cblxuLypcbiAqIFJlYWRzIGEgdmFyaW50IGFzIGFuIHVuc2lnbmVkIDY0IGJpdCB2YWx1ZS5cbiAqIEBuYW1lIFJlYWRlciN1aW50NjRcbiAqIEBmdW5jdGlvblxuICogQHJldHVybnMge0xvbmd9IFZhbHVlIHJlYWRcbiAqL1xuXG4vKlxuICogUmVhZHMgYSB6aWctemFnIGVuY29kZWQgdmFyaW50IGFzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZS5cbiAqIEBuYW1lIFJlYWRlciNzaW50NjRcbiAqIEBmdW5jdGlvblxuICogQHJldHVybnMge0xvbmd9IFZhbHVlIHJlYWRcbiAqL1xuXG4vKipcbiAqIFJlYWRzIGEgdmFyaW50IGFzIGEgYm9vbGVhbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuYm9vbCA9IGZ1bmN0aW9uIHJlYWRfYm9vbCgpIHtcbiAgICByZXR1cm4gdGhpcy51aW50MzIoKSAhPT0gMDtcbn07XG5cbmZ1bmN0aW9uIHJlYWRGaXhlZDMyX2VuZChidWYsIGVuZCkgeyAvLyBub3RlIHRoYXQgdGhpcyB1c2VzIGBlbmRgLCBub3QgYHBvc2BcbiAgICByZXR1cm4gKGJ1ZltlbmQgLSA0XVxuICAgICAgICAgIHwgYnVmW2VuZCAtIDNdIDw8IDhcbiAgICAgICAgICB8IGJ1ZltlbmQgLSAyXSA8PCAxNlxuICAgICAgICAgIHwgYnVmW2VuZCAtIDFdIDw8IDI0KSA+Pj4gMDtcbn1cblxuLyoqXG4gKiBSZWFkcyBmaXhlZCAzMiBiaXRzIGFzIGFuIHVuc2lnbmVkIDMyIGJpdCBpbnRlZ2VyLlxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLmZpeGVkMzIgPSBmdW5jdGlvbiByZWFkX2ZpeGVkMzIoKSB7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAodGhpcy5wb3MgKyA0ID4gdGhpcy5sZW4pXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCA0KTtcblxuICAgIHJldHVybiByZWFkRml4ZWQzMl9lbmQodGhpcy5idWYsIHRoaXMucG9zICs9IDQpO1xufTtcblxuLyoqXG4gKiBSZWFkcyBmaXhlZCAzMiBiaXRzIGFzIGEgc2lnbmVkIDMyIGJpdCBpbnRlZ2VyLlxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLnNmaXhlZDMyID0gZnVuY3Rpb24gcmVhZF9zZml4ZWQzMigpIHtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0aGlzLnBvcyArIDQgPiB0aGlzLmxlbilcbiAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDQpO1xuXG4gICAgcmV0dXJuIHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCkgfCAwO1xufTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8taW52YWxpZC10aGlzICovXG5cbmZ1bmN0aW9uIHJlYWRGaXhlZDY0KC8qIHRoaXM6IFJlYWRlciAqLykge1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHRoaXMucG9zICsgOCA+IHRoaXMubGVuKVxuICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgOCk7XG5cbiAgICByZXR1cm4gbmV3IExvbmdCaXRzKHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCksIHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCkpO1xufVxuXG4vKiBlc2xpbnQtZW5hYmxlIG5vLWludmFsaWQtdGhpcyAqL1xuXG4vKlxuICogUmVhZHMgZml4ZWQgNjQgYml0cy5cbiAqIEBuYW1lIFJlYWRlciNmaXhlZDY0XG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtMb25nfSBWYWx1ZSByZWFkXG4gKi9cblxuLypcbiAqIFJlYWRzIHppZy16YWcgZW5jb2RlZCBmaXhlZCA2NCBiaXRzLlxuICogQG5hbWUgUmVhZGVyI3NmaXhlZDY0XG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtMb25nfSBWYWx1ZSByZWFkXG4gKi9cblxuLyoqXG4gKiBSZWFkcyBhIGZsb2F0ICgzMiBiaXQpIGFzIGEgbnVtYmVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuZmxvYXQgPSBmdW5jdGlvbiByZWFkX2Zsb2F0KCkge1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHRoaXMucG9zICsgNCA+IHRoaXMubGVuKVxuICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgNCk7XG5cbiAgICB2YXIgdmFsdWUgPSB1dGlsLmZsb2F0LnJlYWRGbG9hdExFKHRoaXMuYnVmLCB0aGlzLnBvcyk7XG4gICAgdGhpcy5wb3MgKz0gNDtcbiAgICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFJlYWRzIGEgZG91YmxlICg2NCBiaXQgZmxvYXQpIGFzIGEgbnVtYmVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuZG91YmxlID0gZnVuY3Rpb24gcmVhZF9kb3VibGUoKSB7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAodGhpcy5wb3MgKyA4ID4gdGhpcy5sZW4pXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCA0KTtcblxuICAgIHZhciB2YWx1ZSA9IHV0aWwuZmxvYXQucmVhZERvdWJsZUxFKHRoaXMuYnVmLCB0aGlzLnBvcyk7XG4gICAgdGhpcy5wb3MgKz0gODtcbiAgICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFJlYWRzIGEgc2VxdWVuY2Ugb2YgYnl0ZXMgcHJlY2VlZGVkIGJ5IGl0cyBsZW5ndGggYXMgYSB2YXJpbnQuXG4gKiBAcmV0dXJucyB7VWludDhBcnJheX0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLmJ5dGVzID0gZnVuY3Rpb24gcmVhZF9ieXRlcygpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy51aW50MzIoKSxcbiAgICAgICAgc3RhcnQgID0gdGhpcy5wb3MsXG4gICAgICAgIGVuZCAgICA9IHRoaXMucG9zICsgbGVuZ3RoO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGVuZCA+IHRoaXMubGVuKVxuICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgbGVuZ3RoKTtcblxuICAgIHRoaXMucG9zICs9IGxlbmd0aDtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmJ1ZikpIC8vIHBsYWluIGFycmF5XG4gICAgICAgIHJldHVybiB0aGlzLmJ1Zi5zbGljZShzdGFydCwgZW5kKTtcbiAgICByZXR1cm4gc3RhcnQgPT09IGVuZCAvLyBmaXggZm9yIElFIDEwL1dpbjggYW5kIG90aGVycycgc3ViYXJyYXkgcmV0dXJuaW5nIGFycmF5IG9mIHNpemUgMVxuICAgICAgICA/IG5ldyB0aGlzLmJ1Zi5jb25zdHJ1Y3RvcigwKVxuICAgICAgICA6IHRoaXMuX3NsaWNlLmNhbGwodGhpcy5idWYsIHN0YXJ0LCBlbmQpO1xufTtcblxuLyoqXG4gKiBSZWFkcyBhIHN0cmluZyBwcmVjZWVkZWQgYnkgaXRzIGJ5dGUgbGVuZ3RoIGFzIGEgdmFyaW50LlxuICogQHJldHVybnMge3N0cmluZ30gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLnN0cmluZyA9IGZ1bmN0aW9uIHJlYWRfc3RyaW5nKCkge1xuICAgIHZhciBieXRlcyA9IHRoaXMuYnl0ZXMoKTtcbiAgICByZXR1cm4gdXRmOC5yZWFkKGJ5dGVzLCAwLCBieXRlcy5sZW5ndGgpO1xufTtcblxuLyoqXG4gKiBTa2lwcyB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBieXRlcyBpZiBzcGVjaWZpZWQsIG90aGVyd2lzZSBza2lwcyBhIHZhcmludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBMZW5ndGggaWYga25vd24sIG90aGVyd2lzZSBhIHZhcmludCBpcyBhc3N1bWVkXG4gKiBAcmV0dXJucyB7UmVhZGVyfSBgdGhpc2BcbiAqL1xuUmVhZGVyLnByb3RvdHlwZS5za2lwID0gZnVuY3Rpb24gc2tpcChsZW5ndGgpIHtcbiAgICBpZiAodHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMucG9zICsgbGVuZ3RoID4gdGhpcy5sZW4pXG4gICAgICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgbGVuZ3RoKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gbGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMubGVuKVxuICAgICAgICAgICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzKTtcbiAgICAgICAgfSB3aGlsZSAodGhpcy5idWZbdGhpcy5wb3MrK10gJiAxMjgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2tpcHMgdGhlIG5leHQgZWxlbWVudCBvZiB0aGUgc3BlY2lmaWVkIHdpcmUgdHlwZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB3aXJlVHlwZSBXaXJlIHR5cGUgcmVjZWl2ZWRcbiAqIEByZXR1cm5zIHtSZWFkZXJ9IGB0aGlzYFxuICovXG5SZWFkZXIucHJvdG90eXBlLnNraXBUeXBlID0gZnVuY3Rpb24od2lyZVR5cGUpIHtcbiAgICBzd2l0Y2ggKHdpcmVUeXBlKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRoaXMuc2tpcCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuc2tpcCg4KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLnNraXAodGhpcy51aW50MzIoKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgd2hpbGUgKCh3aXJlVHlwZSA9IHRoaXMudWludDMyKCkgJiA3KSAhPT0gNCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2tpcFR5cGUod2lyZVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHRoaXMuc2tpcCg0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImludmFsaWQgd2lyZSB0eXBlIFwiICsgd2lyZVR5cGUgKyBcIiBhdCBvZmZzZXQgXCIgKyB0aGlzLnBvcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuUmVhZGVyLl9jb25maWd1cmUgPSBmdW5jdGlvbihCdWZmZXJSZWFkZXJfKSB7XG4gICAgQnVmZmVyUmVhZGVyID0gQnVmZmVyUmVhZGVyXztcblxuICAgIHZhciBmbiA9IHV0aWwuTG9uZyA/IFwidG9Mb25nXCIgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBcInRvTnVtYmVyXCI7XG4gICAgdXRpbC5tZXJnZShSZWFkZXIucHJvdG90eXBlLCB7XG5cbiAgICAgICAgaW50NjQ6IGZ1bmN0aW9uIHJlYWRfaW50NjQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZExvbmdWYXJpbnQuY2FsbCh0aGlzKVtmbl0oZmFsc2UpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVpbnQ2NDogZnVuY3Rpb24gcmVhZF91aW50NjQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZExvbmdWYXJpbnQuY2FsbCh0aGlzKVtmbl0odHJ1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2ludDY0OiBmdW5jdGlvbiByZWFkX3NpbnQ2NCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFkTG9uZ1ZhcmludC5jYWxsKHRoaXMpLnp6RGVjb2RlKClbZm5dKGZhbHNlKTtcbiAgICAgICAgfSxcblxuICAgICAgICBmaXhlZDY0OiBmdW5jdGlvbiByZWFkX2ZpeGVkNjQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZEZpeGVkNjQuY2FsbCh0aGlzKVtmbl0odHJ1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2ZpeGVkNjQ6IGZ1bmN0aW9uIHJlYWRfc2ZpeGVkNjQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZEZpeGVkNjQuY2FsbCh0aGlzKVtmbl0oZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICB9KTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/reader.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/reader_buffer.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/reader_buffer.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nmodule.exports = BufferReader;\n\n// extends Reader\nvar Reader = __webpack_require__(/*! ./reader */ \"(rsc)/./node_modules/@apollo/protobufjs/src/reader.js\");\n(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;\n\nvar util = __webpack_require__(/*! ./util/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js\");\n\n/**\n * Constructs a new buffer reader instance.\n * @classdesc Wire format reader using node buffers.\n * @extends Reader\n * @constructor\n * @param {Buffer} buffer Buffer to read from\n */\nfunction BufferReader(buffer) {\n    Reader.call(this, buffer);\n\n    /**\n     * Read buffer.\n     * @name BufferReader#buf\n     * @type {Buffer}\n     */\n}\n\n/* istanbul ignore else */\nif (util.Buffer)\n    BufferReader.prototype._slice = util.Buffer.prototype.slice;\n\n/**\n * @override\n */\nBufferReader.prototype.string = function read_string_buffer() {\n    var len = this.uint32(); // modifies pos\n    return this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len));\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @name BufferReader#bytes\n * @function\n * @returns {Buffer} Value read\n */\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9yZWFkZXJfYnVmZmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7O0FBRUE7QUFDQSxhQUFhLG1CQUFPLENBQUMsdUVBQVU7QUFDL0I7O0FBRUEsV0FBVyxtQkFBTyxDQUFDLG1GQUFnQjs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vcHJvdG9idWZqcy9zcmMvcmVhZGVyX2J1ZmZlci5qcz82NTViIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBCdWZmZXJSZWFkZXI7XG5cbi8vIGV4dGVuZHMgUmVhZGVyXG52YXIgUmVhZGVyID0gcmVxdWlyZShcIi4vcmVhZGVyXCIpO1xuKEJ1ZmZlclJlYWRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlYWRlci5wcm90b3R5cGUpKS5jb25zdHJ1Y3RvciA9IEJ1ZmZlclJlYWRlcjtcblxudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsL21pbmltYWxcIik7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyBidWZmZXIgcmVhZGVyIGluc3RhbmNlLlxuICogQGNsYXNzZGVzYyBXaXJlIGZvcm1hdCByZWFkZXIgdXNpbmcgbm9kZSBidWZmZXJzLlxuICogQGV4dGVuZHMgUmVhZGVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QnVmZmVyfSBidWZmZXIgQnVmZmVyIHRvIHJlYWQgZnJvbVxuICovXG5mdW5jdGlvbiBCdWZmZXJSZWFkZXIoYnVmZmVyKSB7XG4gICAgUmVhZGVyLmNhbGwodGhpcywgYnVmZmVyKTtcblxuICAgIC8qKlxuICAgICAqIFJlYWQgYnVmZmVyLlxuICAgICAqIEBuYW1lIEJ1ZmZlclJlYWRlciNidWZcbiAgICAgKiBAdHlwZSB7QnVmZmVyfVxuICAgICAqL1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuaWYgKHV0aWwuQnVmZmVyKVxuICAgIEJ1ZmZlclJlYWRlci5wcm90b3R5cGUuX3NsaWNlID0gdXRpbC5CdWZmZXIucHJvdG90eXBlLnNsaWNlO1xuXG4vKipcbiAqIEBvdmVycmlkZVxuICovXG5CdWZmZXJSZWFkZXIucHJvdG90eXBlLnN0cmluZyA9IGZ1bmN0aW9uIHJlYWRfc3RyaW5nX2J1ZmZlcigpIHtcbiAgICB2YXIgbGVuID0gdGhpcy51aW50MzIoKTsgLy8gbW9kaWZpZXMgcG9zXG4gICAgcmV0dXJuIHRoaXMuYnVmLnV0ZjhTbGljZSh0aGlzLnBvcywgdGhpcy5wb3MgPSBNYXRoLm1pbih0aGlzLnBvcyArIGxlbiwgdGhpcy5sZW4pKTtcbn07XG5cbi8qKlxuICogUmVhZHMgYSBzZXF1ZW5jZSBvZiBieXRlcyBwcmVjZWVkZWQgYnkgaXRzIGxlbmd0aCBhcyBhIHZhcmludC5cbiAqIEBuYW1lIEJ1ZmZlclJlYWRlciNieXRlc1xuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVmZmVyfSBWYWx1ZSByZWFkXG4gKi9cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/reader_buffer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/roots.js":
/*!******************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/roots.js ***!
  \******************************************************/
/***/ ((module) => {

eval("\nmodule.exports = {};\n\n/**\n * Named roots.\n * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).\n * Can also be used manually to make roots available accross modules.\n * @name roots\n * @type {Object.<string,Root>}\n * @example\n * // pbjs -r myroot -o compiled.js ...\n *\n * // in another module:\n * require(\"./compiled.js\");\n *\n * // in any subsequent module:\n * var root = protobuf.roots[\"myroot\"];\n */\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9yb290cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3Byb3RvYnVmanMvc3JjL3Jvb3RzLmpzPzBiNWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vKipcbiAqIE5hbWVkIHJvb3RzLlxuICogVGhpcyBpcyB3aGVyZSBwYmpzIHN0b3JlcyBnZW5lcmF0ZWQgc3RydWN0dXJlcyAodGhlIG9wdGlvbiBgLXIsIC0tcm9vdGAgc3BlY2lmaWVzIGEgbmFtZSkuXG4gKiBDYW4gYWxzbyBiZSB1c2VkIG1hbnVhbGx5IHRvIG1ha2Ugcm9vdHMgYXZhaWxhYmxlIGFjY3Jvc3MgbW9kdWxlcy5cbiAqIEBuYW1lIHJvb3RzXG4gKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsUm9vdD59XG4gKiBAZXhhbXBsZVxuICogLy8gcGJqcyAtciBteXJvb3QgLW8gY29tcGlsZWQuanMgLi4uXG4gKlxuICogLy8gaW4gYW5vdGhlciBtb2R1bGU6XG4gKiByZXF1aXJlKFwiLi9jb21waWxlZC5qc1wiKTtcbiAqXG4gKiAvLyBpbiBhbnkgc3Vic2VxdWVudCBtb2R1bGU6XG4gKiB2YXIgcm9vdCA9IHByb3RvYnVmLnJvb3RzW1wibXlyb290XCJdO1xuICovXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/roots.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/rpc.js":
/*!****************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/rpc.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\n/**\n * Streaming RPC helpers.\n * @namespace\n */\nvar rpc = exports;\n\n/**\n * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.\n * @typedef RPCImpl\n * @type {function}\n * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called\n * @param {Uint8Array} requestData Request data\n * @param {RPCImplCallback} callback Callback function\n * @returns {undefined}\n * @example\n * function rpcImpl(method, requestData, callback) {\n *     if (protobuf.util.lcFirst(method.name) !== \"myMethod\") // compatible with static code\n *         throw Error(\"no such method\");\n *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {\n *         callback(err, responseData);\n *     });\n * }\n */\n\n/**\n * Node-style callback as used by {@link RPCImpl}.\n * @typedef RPCImplCallback\n * @type {function}\n * @param {Error|null} error Error, if any, otherwise `null`\n * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error\n * @returns {undefined}\n */\n\nrpc.Service = __webpack_require__(/*! ./rpc/service */ \"(rsc)/./node_modules/@apollo/protobufjs/src/rpc/service.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9ycGMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlDQUFpQyxzQkFBc0I7QUFDdkQ7QUFDQSxVQUFVO0FBQ1YsV0FBVyxtQ0FBbUMsWUFBWSxJQUFJO0FBQzlELFdBQVcsWUFBWTtBQUN2QixXQUFXLGlCQUFpQjtBQUM1QixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsY0FBYztBQUNqRDtBQUNBLFVBQVU7QUFDVixXQUFXLFlBQVk7QUFDdkIsV0FBVyxpQkFBaUI7QUFDNUIsYUFBYTtBQUNiOztBQUVBLGNBQWMsbUJBQU8sQ0FBQyxpRkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9ycGMuanM/MmU5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBTdHJlYW1pbmcgUlBDIGhlbHBlcnMuXG4gKiBAbmFtZXNwYWNlXG4gKi9cbnZhciBycGMgPSBleHBvcnRzO1xuXG4vKipcbiAqIFJQQyBpbXBsZW1lbnRhdGlvbiBwYXNzZWQgdG8ge0BsaW5rIFNlcnZpY2UjY3JlYXRlfSBwZXJmb3JtaW5nIGEgc2VydmljZSByZXF1ZXN0IG9uIG5ldHdvcmsgbGV2ZWwsIGkuZS4gYnkgdXRpbGl6aW5nIGh0dHAgcmVxdWVzdHMgb3Igd2Vic29ja2V0cy5cbiAqIEB0eXBlZGVmIFJQQ0ltcGxcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7TWV0aG9kfHJwYy5TZXJ2aWNlTWV0aG9kPE1lc3NhZ2U8e30+LE1lc3NhZ2U8e30+Pn0gbWV0aG9kIFJlZmxlY3RlZCBvciBzdGF0aWMgbWV0aG9kIGJlaW5nIGNhbGxlZFxuICogQHBhcmFtIHtVaW50OEFycmF5fSByZXF1ZXN0RGF0YSBSZXF1ZXN0IGRhdGFcbiAqIEBwYXJhbSB7UlBDSW1wbENhbGxiYWNrfSBjYWxsYmFjayBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqIEBleGFtcGxlXG4gKiBmdW5jdGlvbiBycGNJbXBsKG1ldGhvZCwgcmVxdWVzdERhdGEsIGNhbGxiYWNrKSB7XG4gKiAgICAgaWYgKHByb3RvYnVmLnV0aWwubGNGaXJzdChtZXRob2QubmFtZSkgIT09IFwibXlNZXRob2RcIikgLy8gY29tcGF0aWJsZSB3aXRoIHN0YXRpYyBjb2RlXG4gKiAgICAgICAgIHRocm93IEVycm9yKFwibm8gc3VjaCBtZXRob2RcIik7XG4gKiAgICAgYXN5bmNocm9ub3VzbHlPYnRhaW5BUmVzcG9uc2UocmVxdWVzdERhdGEsIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2VEYXRhKSB7XG4gKiAgICAgICAgIGNhbGxiYWNrKGVyciwgcmVzcG9uc2VEYXRhKTtcbiAqICAgICB9KTtcbiAqIH1cbiAqL1xuXG4vKipcbiAqIE5vZGUtc3R5bGUgY2FsbGJhY2sgYXMgdXNlZCBieSB7QGxpbmsgUlBDSW1wbH0uXG4gKiBAdHlwZWRlZiBSUENJbXBsQ2FsbGJhY2tcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7RXJyb3J8bnVsbH0gZXJyb3IgRXJyb3IsIGlmIGFueSwgb3RoZXJ3aXNlIGBudWxsYFxuICogQHBhcmFtIHtVaW50OEFycmF5fG51bGx9IFtyZXNwb25zZV0gUmVzcG9uc2UgZGF0YSBvciBgbnVsbGAgdG8gc2lnbmFsIGVuZCBvZiBzdHJlYW0sIGlmIHRoZXJlIGhhc24ndCBiZWVuIGFuIGVycm9yXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5cbnJwYy5TZXJ2aWNlID0gcmVxdWlyZShcIi4vcnBjL3NlcnZpY2VcIik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/rpc.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/rpc/service.js":
/*!************************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/rpc/service.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nmodule.exports = Service;\n\nvar util = __webpack_require__(/*! ../util/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js\");\n\n// Extends EventEmitter\n(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;\n\n/**\n * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.\n *\n * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.\n * @typedef rpc.ServiceMethodCallback\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {Error|null} error Error, if any\n * @param {TRes} [response] Response message\n * @returns {undefined}\n */\n\n/**\n * A service method part of a {@link rpc.Service} as created by {@link Service.create}.\n * @typedef rpc.ServiceMethod\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message\n * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`\n */\n\n/**\n * Constructs a new RPC service instance.\n * @classdesc An RPC service as returned by {@link Service#create}.\n * @exports rpc.Service\n * @extends util.EventEmitter\n * @constructor\n * @param {RPCImpl} rpcImpl RPC implementation\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\n */\nfunction Service(rpcImpl, requestDelimited, responseDelimited) {\n\n    if (typeof rpcImpl !== \"function\")\n        throw TypeError(\"rpcImpl must be a function\");\n\n    util.EventEmitter.call(this);\n\n    /**\n     * RPC implementation. Becomes `null` once the service is ended.\n     * @type {RPCImpl|null}\n     */\n    this.rpcImpl = rpcImpl;\n\n    /**\n     * Whether requests are length-delimited.\n     * @type {boolean}\n     */\n    this.requestDelimited = Boolean(requestDelimited);\n\n    /**\n     * Whether responses are length-delimited.\n     * @type {boolean}\n     */\n    this.responseDelimited = Boolean(responseDelimited);\n}\n\n/**\n * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.\n * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method\n * @param {Constructor<TReq>} requestCtor Request constructor\n * @param {Constructor<TRes>} responseCtor Response constructor\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback\n * @returns {undefined}\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n */\nService.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {\n\n    if (!request)\n        throw TypeError(\"request must be specified\");\n\n    var self = this;\n    if (!callback)\n        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);\n\n    if (!self.rpcImpl) {\n        setTimeout(function() { callback(Error(\"already ended\")); }, 0);\n        return undefined;\n    }\n\n    try {\n        return self.rpcImpl(\n            method,\n            requestCtor[self.requestDelimited ? \"encodeDelimited\" : \"encode\"](request).finish(),\n            function rpcCallback(err, response) {\n\n                if (err) {\n                    self.emit(\"error\", err, method);\n                    return callback(err);\n                }\n\n                if (response === null) {\n                    self.end(/* endedByRPC */ true);\n                    return undefined;\n                }\n\n                if (!(response instanceof responseCtor)) {\n                    try {\n                        response = responseCtor[self.responseDelimited ? \"decodeDelimited\" : \"decode\"](response);\n                    } catch (err) {\n                        self.emit(\"error\", err, method);\n                        return callback(err);\n                    }\n                }\n\n                self.emit(\"data\", response, method);\n                return callback(null, response);\n            }\n        );\n    } catch (err) {\n        self.emit(\"error\", err, method);\n        setTimeout(function() { callback(err); }, 0);\n        return undefined;\n    }\n};\n\n/**\n * Ends this service and emits the `end` event.\n * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.\n * @returns {rpc.Service} `this`\n */\nService.prototype.end = function end(endedByRPC) {\n    if (this.rpcImpl) {\n        if (!endedByRPC) // signal end to rpcImpl\n            this.rpcImpl(null, null, null);\n        this.rpcImpl = null;\n        this.emit(\"end\").off();\n    }\n    return this;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy9ycGMvc2VydmljZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiOztBQUVBLFdBQVcsbUJBQU8sQ0FBQyxvRkFBaUI7O0FBRXBDO0FBQ0E7O0FBRUE7QUFDQSx5Q0FBeUMsc0NBQXNDO0FBQy9FO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0EsVUFBVTtBQUNWLFdBQVcsWUFBWTtBQUN2QixXQUFXLE1BQU07QUFDakIsYUFBYTtBQUNiOztBQUVBO0FBQ0EsK0JBQStCLG1CQUFtQixlQUFlLHFCQUFxQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsV0FBVyx1QkFBdUI7QUFDbEMsV0FBVyxpQ0FBaUM7QUFDNUMsYUFBYSx3QkFBd0I7QUFDckM7O0FBRUE7QUFDQTtBQUNBLDZDQUE2QyxxQkFBcUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixXQUFXLFNBQVM7QUFDcEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsa0NBQWtDO0FBQ3JFLFdBQVcscUNBQXFDO0FBQ2hELFdBQVcsbUJBQW1CO0FBQzlCLFdBQVcsbUJBQW1CO0FBQzlCLFdBQVcsdUJBQXVCO0FBQ2xDLFdBQVcsaUNBQWlDO0FBQzVDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQyxtQ0FBbUM7QUFDbkU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGdDQUFnQyxnQkFBZ0I7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3Byb3RvYnVmanMvc3JjL3JwYy9zZXJ2aWNlLmpzP2M1NDIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IFNlcnZpY2U7XG5cbnZhciB1dGlsID0gcmVxdWlyZShcIi4uL3V0aWwvbWluaW1hbFwiKTtcblxuLy8gRXh0ZW5kcyBFdmVudEVtaXR0ZXJcbihTZXJ2aWNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodXRpbC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKSkuY29uc3RydWN0b3IgPSBTZXJ2aWNlO1xuXG4vKipcbiAqIEEgc2VydmljZSBtZXRob2QgY2FsbGJhY2sgYXMgdXNlZCBieSB7QGxpbmsgcnBjLlNlcnZpY2VNZXRob2R8U2VydmljZU1ldGhvZH0uXG4gKlxuICogRGlmZmVycyBmcm9tIHtAbGluayBSUENJbXBsQ2FsbGJhY2t9IGluIHRoYXQgaXQgaXMgYW4gYWN0dWFsIGNhbGxiYWNrIG9mIGEgc2VydmljZSBtZXRob2Qgd2hpY2ggbWF5IG5vdCByZXR1cm4gYHJlc3BvbnNlID0gbnVsbGAuXG4gKiBAdHlwZWRlZiBycGMuU2VydmljZU1ldGhvZENhbGxiYWNrXG4gKiBAdGVtcGxhdGUgVFJlcyBleHRlbmRzIE1lc3NhZ2U8VFJlcz5cbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7RXJyb3J8bnVsbH0gZXJyb3IgRXJyb3IsIGlmIGFueVxuICogQHBhcmFtIHtUUmVzfSBbcmVzcG9uc2VdIFJlc3BvbnNlIG1lc3NhZ2VcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cblxuLyoqXG4gKiBBIHNlcnZpY2UgbWV0aG9kIHBhcnQgb2YgYSB7QGxpbmsgcnBjLlNlcnZpY2V9IGFzIGNyZWF0ZWQgYnkge0BsaW5rIFNlcnZpY2UuY3JlYXRlfS5cbiAqIEB0eXBlZGVmIHJwYy5TZXJ2aWNlTWV0aG9kXG4gKiBAdGVtcGxhdGUgVFJlcSBleHRlbmRzIE1lc3NhZ2U8VFJlcT5cbiAqIEB0ZW1wbGF0ZSBUUmVzIGV4dGVuZHMgTWVzc2FnZTxUUmVzPlxuICogQHR5cGUge2Z1bmN0aW9ufVxuICogQHBhcmFtIHtUUmVxfFByb3BlcnRpZXM8VFJlcT59IHJlcXVlc3QgUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdFxuICogQHBhcmFtIHtycGMuU2VydmljZU1ldGhvZENhbGxiYWNrPFRSZXM+fSBbY2FsbGJhY2tdIE5vZGUtc3R5bGUgY2FsbGJhY2sgY2FsbGVkIHdpdGggdGhlIGVycm9yLCBpZiBhbnksIGFuZCB0aGUgcmVzcG9uc2UgbWVzc2FnZVxuICogQHJldHVybnMge1Byb21pc2U8TWVzc2FnZTxUUmVzPj59IFByb21pc2UgaWYgYGNhbGxiYWNrYCBoYXMgYmVlbiBvbWl0dGVkLCBvdGhlcndpc2UgYHVuZGVmaW5lZGBcbiAqL1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgUlBDIHNlcnZpY2UgaW5zdGFuY2UuXG4gKiBAY2xhc3NkZXNjIEFuIFJQQyBzZXJ2aWNlIGFzIHJldHVybmVkIGJ5IHtAbGluayBTZXJ2aWNlI2NyZWF0ZX0uXG4gKiBAZXhwb3J0cyBycGMuU2VydmljZVxuICogQGV4dGVuZHMgdXRpbC5FdmVudEVtaXR0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtSUENJbXBsfSBycGNJbXBsIFJQQyBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIHtib29sZWFufSBbcmVxdWVzdERlbGltaXRlZD1mYWxzZV0gV2hldGhlciByZXF1ZXN0cyBhcmUgbGVuZ3RoLWRlbGltaXRlZFxuICogQHBhcmFtIHtib29sZWFufSBbcmVzcG9uc2VEZWxpbWl0ZWQ9ZmFsc2VdIFdoZXRoZXIgcmVzcG9uc2VzIGFyZSBsZW5ndGgtZGVsaW1pdGVkXG4gKi9cbmZ1bmN0aW9uIFNlcnZpY2UocnBjSW1wbCwgcmVxdWVzdERlbGltaXRlZCwgcmVzcG9uc2VEZWxpbWl0ZWQpIHtcblxuICAgIGlmICh0eXBlb2YgcnBjSW1wbCAhPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCJycGNJbXBsIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcblxuICAgIHV0aWwuRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBSUEMgaW1wbGVtZW50YXRpb24uIEJlY29tZXMgYG51bGxgIG9uY2UgdGhlIHNlcnZpY2UgaXMgZW5kZWQuXG4gICAgICogQHR5cGUge1JQQ0ltcGx8bnVsbH1cbiAgICAgKi9cbiAgICB0aGlzLnJwY0ltcGwgPSBycGNJbXBsO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciByZXF1ZXN0cyBhcmUgbGVuZ3RoLWRlbGltaXRlZC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcXVlc3REZWxpbWl0ZWQgPSBCb29sZWFuKHJlcXVlc3REZWxpbWl0ZWQpO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciByZXNwb25zZXMgYXJlIGxlbmd0aC1kZWxpbWl0ZWQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZXNwb25zZURlbGltaXRlZCA9IEJvb2xlYW4ocmVzcG9uc2VEZWxpbWl0ZWQpO1xufVxuXG4vKipcbiAqIENhbGxzIGEgc2VydmljZSBtZXRob2QgdGhyb3VnaCB7QGxpbmsgcnBjLlNlcnZpY2UjcnBjSW1wbHxycGNJbXBsfS5cbiAqIEBwYXJhbSB7TWV0aG9kfHJwYy5TZXJ2aWNlTWV0aG9kPFRSZXEsVFJlcz59IG1ldGhvZCBSZWZsZWN0ZWQgb3Igc3RhdGljIG1ldGhvZFxuICogQHBhcmFtIHtDb25zdHJ1Y3RvcjxUUmVxPn0gcmVxdWVzdEN0b3IgUmVxdWVzdCBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtDb25zdHJ1Y3RvcjxUUmVzPn0gcmVzcG9uc2VDdG9yIFJlc3BvbnNlIGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1RSZXF8UHJvcGVydGllczxUUmVxPn0gcmVxdWVzdCBSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0XG4gKiBAcGFyYW0ge3JwYy5TZXJ2aWNlTWV0aG9kQ2FsbGJhY2s8VFJlcz59IGNhbGxiYWNrIFNlcnZpY2UgY2FsbGJhY2tcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKiBAdGVtcGxhdGUgVFJlcSBleHRlbmRzIE1lc3NhZ2U8VFJlcT5cbiAqIEB0ZW1wbGF0ZSBUUmVzIGV4dGVuZHMgTWVzc2FnZTxUUmVzPlxuICovXG5TZXJ2aWNlLnByb3RvdHlwZS5ycGNDYWxsID0gZnVuY3Rpb24gcnBjQ2FsbChtZXRob2QsIHJlcXVlc3RDdG9yLCByZXNwb25zZUN0b3IsIHJlcXVlc3QsIGNhbGxiYWNrKSB7XG5cbiAgICBpZiAoIXJlcXVlc3QpXG4gICAgICAgIHRocm93IFR5cGVFcnJvcihcInJlcXVlc3QgbXVzdCBiZSBzcGVjaWZpZWRcIik7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKCFjYWxsYmFjaylcbiAgICAgICAgcmV0dXJuIHV0aWwuYXNQcm9taXNlKHJwY0NhbGwsIHNlbGYsIG1ldGhvZCwgcmVxdWVzdEN0b3IsIHJlc3BvbnNlQ3RvciwgcmVxdWVzdCk7XG5cbiAgICBpZiAoIXNlbGYucnBjSW1wbCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjYWxsYmFjayhFcnJvcihcImFscmVhZHkgZW5kZWRcIikpOyB9LCAwKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gc2VsZi5ycGNJbXBsKFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgcmVxdWVzdEN0b3Jbc2VsZi5yZXF1ZXN0RGVsaW1pdGVkID8gXCJlbmNvZGVEZWxpbWl0ZWRcIiA6IFwiZW5jb2RlXCJdKHJlcXVlc3QpLmZpbmlzaCgpLFxuICAgICAgICAgICAgZnVuY3Rpb24gcnBjQ2FsbGJhY2soZXJyLCByZXNwb25zZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCBlcnIsIG1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmVuZCgvKiBlbmRlZEJ5UlBDICovIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlIGluc3RhbmNlb2YgcmVzcG9uc2VDdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByZXNwb25zZUN0b3Jbc2VsZi5yZXNwb25zZURlbGltaXRlZCA/IFwiZGVjb2RlRGVsaW1pdGVkXCIgOiBcImRlY29kZVwiXShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwgZXJyLCBtZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzZWxmLmVtaXQoXCJkYXRhXCIsIHJlc3BvbnNlLCBtZXRob2QpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIGVyciwgbWV0aG9kKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soZXJyKTsgfSwgMCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufTtcblxuLyoqXG4gKiBFbmRzIHRoaXMgc2VydmljZSBhbmQgZW1pdHMgdGhlIGBlbmRgIGV2ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbZW5kZWRCeVJQQz1mYWxzZV0gV2hldGhlciB0aGUgc2VydmljZSBoYXMgYmVlbiBlbmRlZCBieSB0aGUgUlBDIGltcGxlbWVudGF0aW9uLlxuICogQHJldHVybnMge3JwYy5TZXJ2aWNlfSBgdGhpc2BcbiAqL1xuU2VydmljZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gZW5kKGVuZGVkQnlSUEMpIHtcbiAgICBpZiAodGhpcy5ycGNJbXBsKSB7XG4gICAgICAgIGlmICghZW5kZWRCeVJQQykgLy8gc2lnbmFsIGVuZCB0byBycGNJbXBsXG4gICAgICAgICAgICB0aGlzLnJwY0ltcGwobnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHRoaXMucnBjSW1wbCA9IG51bGw7XG4gICAgICAgIHRoaXMuZW1pdChcImVuZFwiKS5vZmYoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/rpc/service.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/util/longbits.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/util/longbits.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nmodule.exports = LongBits;\n\nvar util = __webpack_require__(/*! ../util/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js\");\n\n/**\n * Constructs new long bits.\n * @classdesc Helper class for working with the low and high bits of a 64 bit value.\n * @memberof util\n * @constructor\n * @param {number} lo Low 32 bits, unsigned\n * @param {number} hi High 32 bits, unsigned\n */\nfunction LongBits(lo, hi) {\n\n    // note that the casts below are theoretically unnecessary as of today, but older statically\n    // generated converter code might still call the ctor with signed 32bits. kept for compat.\n\n    /**\n     * Low bits.\n     * @type {number}\n     */\n    this.lo = lo >>> 0;\n\n    /**\n     * High bits.\n     * @type {number}\n     */\n    this.hi = hi >>> 0;\n}\n\n/**\n * Zero bits.\n * @memberof util.LongBits\n * @type {util.LongBits}\n */\nvar zero = LongBits.zero = new LongBits(0, 0);\n\nzero.toNumber = function() { return 0; };\nzero.zzEncode = zero.zzDecode = function() { return this; };\nzero.length = function() { return 1; };\n\n/**\n * Zero hash.\n * @memberof util.LongBits\n * @type {string}\n */\nvar zeroHash = LongBits.zeroHash = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\n\n/**\n * Constructs new long bits from the specified number.\n * @param {number} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.fromNumber = function fromNumber(value) {\n    if (value === 0)\n        return zero;\n    var sign = value < 0;\n    if (sign)\n        value = -value;\n    var lo = value >>> 0,\n        hi = (value - lo) / 4294967296 >>> 0;\n    if (sign) {\n        hi = ~hi >>> 0;\n        lo = ~lo >>> 0;\n        if (++lo > 4294967295) {\n            lo = 0;\n            if (++hi > 4294967295)\n                hi = 0;\n        }\n    }\n    return new LongBits(lo, hi);\n};\n\n/**\n * Constructs new long bits from a number, long or string.\n * @param {number|string} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.from = function from(value) {\n    if (typeof value === \"number\")\n        return LongBits.fromNumber(value);\n    if (util.isString(value)) {\n        /* istanbul ignore else */\n        if (util.Long)\n            value = util.Long.fromString(value);\n        else\n            return LongBits.fromNumber(parseInt(value, 10));\n    }\n    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;\n};\n\n/**\n * Converts this long bits to a possibly unsafe JavaScript number.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {number} Possibly unsafe number\n */\nLongBits.prototype.toNumber = function toNumber(unsigned) {\n    if (!unsigned && this.hi >>> 31) {\n        var lo = ~this.lo + 1 >>> 0,\n            hi = ~this.hi     >>> 0;\n        if (!lo)\n            hi = hi + 1 >>> 0;\n        return -(lo + hi * 4294967296);\n    }\n    return this.lo + this.hi * 4294967296;\n};\n\n/*\n * Converts this long bits to a long.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long} Long\n */\nLongBits.prototype.toLong = function toLong(unsigned) {\n    return util.Long\n        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))\n        /* istanbul ignore next */\n        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };\n};\n\nvar charCodeAt = String.prototype.charCodeAt;\n\n/**\n * Constructs new long bits from the specified 8 characters long hash.\n * @param {string} hash Hash\n * @returns {util.LongBits} Bits\n */\nLongBits.fromHash = function fromHash(hash) {\n    if (hash === zeroHash)\n        return zero;\n    return new LongBits(\n        ( charCodeAt.call(hash, 0)\n        | charCodeAt.call(hash, 1) << 8\n        | charCodeAt.call(hash, 2) << 16\n        | charCodeAt.call(hash, 3) << 24) >>> 0\n    ,\n        ( charCodeAt.call(hash, 4)\n        | charCodeAt.call(hash, 5) << 8\n        | charCodeAt.call(hash, 6) << 16\n        | charCodeAt.call(hash, 7) << 24) >>> 0\n    );\n};\n\n/**\n * Converts this long bits to a 8 characters long hash.\n * @returns {string} Hash\n */\nLongBits.prototype.toHash = function toHash() {\n    return String.fromCharCode(\n        this.lo        & 255,\n        this.lo >>> 8  & 255,\n        this.lo >>> 16 & 255,\n        this.lo >>> 24      ,\n        this.hi        & 255,\n        this.hi >>> 8  & 255,\n        this.hi >>> 16 & 255,\n        this.hi >>> 24\n    );\n};\n\n/**\n * Zig-zag encodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzEncode = function zzEncode() {\n    var mask =   this.hi >> 31;\n    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;\n    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Zig-zag decodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzDecode = function zzDecode() {\n    var mask = -(this.lo & 1);\n    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;\n    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Calculates the length of this longbits when encoded as a varint.\n * @returns {number} Length\n */\nLongBits.prototype.length = function length() {\n    var part0 =  this.lo,\n        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,\n        part2 =  this.hi >>> 24;\n    return part2 === 0\n         ? part1 === 0\n           ? part0 < 16384\n             ? part0 < 128 ? 1 : 2\n             : part0 < 2097152 ? 3 : 4\n           : part1 < 16384\n             ? part1 < 128 ? 5 : 6\n             : part1 < 2097152 ? 7 : 8\n         : part2 < 128 ? 9 : 10;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy91dGlsL2xvbmdiaXRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7O0FBRUEsV0FBVyxtQkFBTyxDQUFDLG9GQUFpQjs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQSw2QkFBNkI7QUFDN0IsNkNBQTZDO0FBQzdDLDJCQUEyQjs7QUFFM0I7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLGVBQWU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCLGFBQWEsZUFBZTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLGVBQWU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vcHJvdG9idWZqcy9zcmMvdXRpbC9sb25nYml0cy5qcz9jZjMwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBMb25nQml0cztcblxudmFyIHV0aWwgPSByZXF1aXJlKFwiLi4vdXRpbC9taW5pbWFsXCIpO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgbmV3IGxvbmcgYml0cy5cbiAqIEBjbGFzc2Rlc2MgSGVscGVyIGNsYXNzIGZvciB3b3JraW5nIHdpdGggdGhlIGxvdyBhbmQgaGlnaCBiaXRzIG9mIGEgNjQgYml0IHZhbHVlLlxuICogQG1lbWJlcm9mIHV0aWxcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtudW1iZXJ9IGxvIExvdyAzMiBiaXRzLCB1bnNpZ25lZFxuICogQHBhcmFtIHtudW1iZXJ9IGhpIEhpZ2ggMzIgYml0cywgdW5zaWduZWRcbiAqL1xuZnVuY3Rpb24gTG9uZ0JpdHMobG8sIGhpKSB7XG5cbiAgICAvLyBub3RlIHRoYXQgdGhlIGNhc3RzIGJlbG93IGFyZSB0aGVvcmV0aWNhbGx5IHVubmVjZXNzYXJ5IGFzIG9mIHRvZGF5LCBidXQgb2xkZXIgc3RhdGljYWxseVxuICAgIC8vIGdlbmVyYXRlZCBjb252ZXJ0ZXIgY29kZSBtaWdodCBzdGlsbCBjYWxsIHRoZSBjdG9yIHdpdGggc2lnbmVkIDMyYml0cy4ga2VwdCBmb3IgY29tcGF0LlxuXG4gICAgLyoqXG4gICAgICogTG93IGJpdHMuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxvID0gbG8gPj4+IDA7XG5cbiAgICAvKipcbiAgICAgKiBIaWdoIGJpdHMuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmhpID0gaGkgPj4+IDA7XG59XG5cbi8qKlxuICogWmVybyBiaXRzLlxuICogQG1lbWJlcm9mIHV0aWwuTG9uZ0JpdHNcbiAqIEB0eXBlIHt1dGlsLkxvbmdCaXRzfVxuICovXG52YXIgemVybyA9IExvbmdCaXRzLnplcm8gPSBuZXcgTG9uZ0JpdHMoMCwgMCk7XG5cbnplcm8udG9OdW1iZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG56ZXJvLnp6RW5jb2RlID0gemVyby56ekRlY29kZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfTtcbnplcm8ubGVuZ3RoID0gZnVuY3Rpb24oKSB7IHJldHVybiAxOyB9O1xuXG4vKipcbiAqIFplcm8gaGFzaC5cbiAqIEBtZW1iZXJvZiB1dGlsLkxvbmdCaXRzXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgemVyb0hhc2ggPSBMb25nQml0cy56ZXJvSGFzaCA9IFwiXFwwXFwwXFwwXFwwXFwwXFwwXFwwXFwwXCI7XG5cbi8qKlxuICogQ29uc3RydWN0cyBuZXcgbG9uZyBiaXRzIGZyb20gdGhlIHNwZWNpZmllZCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWVcbiAqIEByZXR1cm5zIHt1dGlsLkxvbmdCaXRzfSBJbnN0YW5jZVxuICovXG5Mb25nQml0cy5mcm9tTnVtYmVyID0gZnVuY3Rpb24gZnJvbU51bWJlcih2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gMClcbiAgICAgICAgcmV0dXJuIHplcm87XG4gICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDA7XG4gICAgaWYgKHNpZ24pXG4gICAgICAgIHZhbHVlID0gLXZhbHVlO1xuICAgIHZhciBsbyA9IHZhbHVlID4+PiAwLFxuICAgICAgICBoaSA9ICh2YWx1ZSAtIGxvKSAvIDQyOTQ5NjcyOTYgPj4+IDA7XG4gICAgaWYgKHNpZ24pIHtcbiAgICAgICAgaGkgPSB+aGkgPj4+IDA7XG4gICAgICAgIGxvID0gfmxvID4+PiAwO1xuICAgICAgICBpZiAoKytsbyA+IDQyOTQ5NjcyOTUpIHtcbiAgICAgICAgICAgIGxvID0gMDtcbiAgICAgICAgICAgIGlmICgrK2hpID4gNDI5NDk2NzI5NSlcbiAgICAgICAgICAgICAgICBoaSA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMb25nQml0cyhsbywgaGkpO1xufTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIG5ldyBsb25nIGJpdHMgZnJvbSBhIG51bWJlciwgbG9uZyBvciBzdHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHZhbHVlIFZhbHVlXG4gKiBAcmV0dXJucyB7dXRpbC5Mb25nQml0c30gSW5zdGFuY2VcbiAqL1xuTG9uZ0JpdHMuZnJvbSA9IGZ1bmN0aW9uIGZyb20odmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKVxuICAgICAgICByZXR1cm4gTG9uZ0JpdHMuZnJvbU51bWJlcih2YWx1ZSk7XG4gICAgaWYgKHV0aWwuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgIGlmICh1dGlsLkxvbmcpXG4gICAgICAgICAgICB2YWx1ZSA9IHV0aWwuTG9uZy5mcm9tU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIExvbmdCaXRzLmZyb21OdW1iZXIocGFyc2VJbnQodmFsdWUsIDEwKSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZS5sb3cgfHwgdmFsdWUuaGlnaCA/IG5ldyBMb25nQml0cyh2YWx1ZS5sb3cgPj4+IDAsIHZhbHVlLmhpZ2ggPj4+IDApIDogemVybztcbn07XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBsb25nIGJpdHMgdG8gYSBwb3NzaWJseSB1bnNhZmUgSmF2YVNjcmlwdCBudW1iZXIuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt1bnNpZ25lZD1mYWxzZV0gV2hldGhlciB1bnNpZ25lZCBvciBub3RcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFBvc3NpYmx5IHVuc2FmZSBudW1iZXJcbiAqL1xuTG9uZ0JpdHMucHJvdG90eXBlLnRvTnVtYmVyID0gZnVuY3Rpb24gdG9OdW1iZXIodW5zaWduZWQpIHtcbiAgICBpZiAoIXVuc2lnbmVkICYmIHRoaXMuaGkgPj4+IDMxKSB7XG4gICAgICAgIHZhciBsbyA9IH50aGlzLmxvICsgMSA+Pj4gMCxcbiAgICAgICAgICAgIGhpID0gfnRoaXMuaGkgICAgID4+PiAwO1xuICAgICAgICBpZiAoIWxvKVxuICAgICAgICAgICAgaGkgPSBoaSArIDEgPj4+IDA7XG4gICAgICAgIHJldHVybiAtKGxvICsgaGkgKiA0Mjk0OTY3Mjk2KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubG8gKyB0aGlzLmhpICogNDI5NDk2NzI5Njtcbn07XG5cbi8qXG4gKiBDb252ZXJ0cyB0aGlzIGxvbmcgYml0cyB0byBhIGxvbmcuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt1bnNpZ25lZD1mYWxzZV0gV2hldGhlciB1bnNpZ25lZCBvciBub3RcbiAqIEByZXR1cm5zIHtMb25nfSBMb25nXG4gKi9cbkxvbmdCaXRzLnByb3RvdHlwZS50b0xvbmcgPSBmdW5jdGlvbiB0b0xvbmcodW5zaWduZWQpIHtcbiAgICByZXR1cm4gdXRpbC5Mb25nXG4gICAgICAgID8gbmV3IHV0aWwuTG9uZyh0aGlzLmxvIHwgMCwgdGhpcy5oaSB8IDAsIEJvb2xlYW4odW5zaWduZWQpKVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICA6IHsgbG93OiB0aGlzLmxvIHwgMCwgaGlnaDogdGhpcy5oaSB8IDAsIHVuc2lnbmVkOiBCb29sZWFuKHVuc2lnbmVkKSB9O1xufTtcblxudmFyIGNoYXJDb2RlQXQgPSBTdHJpbmcucHJvdG90eXBlLmNoYXJDb2RlQXQ7XG5cbi8qKlxuICogQ29uc3RydWN0cyBuZXcgbG9uZyBiaXRzIGZyb20gdGhlIHNwZWNpZmllZCA4IGNoYXJhY3RlcnMgbG9uZyBoYXNoLlxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggSGFzaFxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IEJpdHNcbiAqL1xuTG9uZ0JpdHMuZnJvbUhhc2ggPSBmdW5jdGlvbiBmcm9tSGFzaChoYXNoKSB7XG4gICAgaWYgKGhhc2ggPT09IHplcm9IYXNoKVxuICAgICAgICByZXR1cm4gemVybztcbiAgICByZXR1cm4gbmV3IExvbmdCaXRzKFxuICAgICAgICAoIGNoYXJDb2RlQXQuY2FsbChoYXNoLCAwKVxuICAgICAgICB8IGNoYXJDb2RlQXQuY2FsbChoYXNoLCAxKSA8PCA4XG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDIpIDw8IDE2XG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDMpIDw8IDI0KSA+Pj4gMFxuICAgICxcbiAgICAgICAgKCBjaGFyQ29kZUF0LmNhbGwoaGFzaCwgNClcbiAgICAgICAgfCBjaGFyQ29kZUF0LmNhbGwoaGFzaCwgNSkgPDwgOFxuICAgICAgICB8IGNoYXJDb2RlQXQuY2FsbChoYXNoLCA2KSA8PCAxNlxuICAgICAgICB8IGNoYXJDb2RlQXQuY2FsbChoYXNoLCA3KSA8PCAyNCkgPj4+IDBcbiAgICApO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGxvbmcgYml0cyB0byBhIDggY2hhcmFjdGVycyBsb25nIGhhc2guXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBIYXNoXG4gKi9cbkxvbmdCaXRzLnByb3RvdHlwZS50b0hhc2ggPSBmdW5jdGlvbiB0b0hhc2goKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAgIHRoaXMubG8gICAgICAgICYgMjU1LFxuICAgICAgICB0aGlzLmxvID4+PiA4ICAmIDI1NSxcbiAgICAgICAgdGhpcy5sbyA+Pj4gMTYgJiAyNTUsXG4gICAgICAgIHRoaXMubG8gPj4+IDI0ICAgICAgLFxuICAgICAgICB0aGlzLmhpICAgICAgICAmIDI1NSxcbiAgICAgICAgdGhpcy5oaSA+Pj4gOCAgJiAyNTUsXG4gICAgICAgIHRoaXMuaGkgPj4+IDE2ICYgMjU1LFxuICAgICAgICB0aGlzLmhpID4+PiAyNFxuICAgICk7XG59O1xuXG4vKipcbiAqIFppZy16YWcgZW5jb2RlcyB0aGlzIGxvbmcgYml0cy5cbiAqIEByZXR1cm5zIHt1dGlsLkxvbmdCaXRzfSBgdGhpc2BcbiAqL1xuTG9uZ0JpdHMucHJvdG90eXBlLnp6RW5jb2RlID0gZnVuY3Rpb24genpFbmNvZGUoKSB7XG4gICAgdmFyIG1hc2sgPSAgIHRoaXMuaGkgPj4gMzE7XG4gICAgdGhpcy5oaSAgPSAoKHRoaXMuaGkgPDwgMSB8IHRoaXMubG8gPj4+IDMxKSBeIG1hc2spID4+PiAwO1xuICAgIHRoaXMubG8gID0gKCB0aGlzLmxvIDw8IDEgICAgICAgICAgICAgICAgICAgXiBtYXNrKSA+Pj4gMDtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogWmlnLXphZyBkZWNvZGVzIHRoaXMgbG9uZyBiaXRzLlxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IGB0aGlzYFxuICovXG5Mb25nQml0cy5wcm90b3R5cGUuenpEZWNvZGUgPSBmdW5jdGlvbiB6ekRlY29kZSgpIHtcbiAgICB2YXIgbWFzayA9IC0odGhpcy5sbyAmIDEpO1xuICAgIHRoaXMubG8gID0gKCh0aGlzLmxvID4+PiAxIHwgdGhpcy5oaSA8PCAzMSkgXiBtYXNrKSA+Pj4gMDtcbiAgICB0aGlzLmhpICA9ICggdGhpcy5oaSA+Pj4gMSAgICAgICAgICAgICAgICAgIF4gbWFzaykgPj4+IDA7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiB0aGlzIGxvbmdiaXRzIHdoZW4gZW5jb2RlZCBhcyBhIHZhcmludC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IExlbmd0aFxuICovXG5Mb25nQml0cy5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gbGVuZ3RoKCkge1xuICAgIHZhciBwYXJ0MCA9ICB0aGlzLmxvLFxuICAgICAgICBwYXJ0MSA9ICh0aGlzLmxvID4+PiAyOCB8IHRoaXMuaGkgPDwgNCkgPj4+IDAsXG4gICAgICAgIHBhcnQyID0gIHRoaXMuaGkgPj4+IDI0O1xuICAgIHJldHVybiBwYXJ0MiA9PT0gMFxuICAgICAgICAgPyBwYXJ0MSA9PT0gMFxuICAgICAgICAgICA/IHBhcnQwIDwgMTYzODRcbiAgICAgICAgICAgICA/IHBhcnQwIDwgMTI4ID8gMSA6IDJcbiAgICAgICAgICAgICA6IHBhcnQwIDwgMjA5NzE1MiA/IDMgOiA0XG4gICAgICAgICAgIDogcGFydDEgPCAxNjM4NFxuICAgICAgICAgICAgID8gcGFydDEgPCAxMjggPyA1IDogNlxuICAgICAgICAgICAgIDogcGFydDEgPCAyMDk3MTUyID8gNyA6IDhcbiAgICAgICAgIDogcGFydDIgPCAxMjggPyA5IDogMTA7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/util/longbits.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js":
/*!*************************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/util/minimal.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar util = exports;\n\n// used to return a Promise where callback is omitted\nutil.asPromise = __webpack_require__(/*! @protobufjs/aspromise */ \"(rsc)/./node_modules/@protobufjs/aspromise/index.js\");\n\n// converts to / from base64 encoded strings\nutil.base64 = __webpack_require__(/*! @protobufjs/base64 */ \"(rsc)/./node_modules/@protobufjs/base64/index.js\");\n\n// base class of rpc.Service\nutil.EventEmitter = __webpack_require__(/*! @protobufjs/eventemitter */ \"(rsc)/./node_modules/@protobufjs/eventemitter/index.js\");\n\n// float handling accross browsers\nutil.float = __webpack_require__(/*! @protobufjs/float */ \"(rsc)/./node_modules/@protobufjs/float/index.js\");\n\n// requires modules optionally and hides the call from bundlers\nutil.inquire = __webpack_require__(/*! @protobufjs/inquire */ \"(rsc)/./node_modules/@protobufjs/inquire/index.js\");\n\n// converts to / from utf8 encoded strings\nutil.utf8 = __webpack_require__(/*! @protobufjs/utf8 */ \"(rsc)/./node_modules/@protobufjs/utf8/index.js\");\n\n// provides a node-like buffer pool in the browser\nutil.pool = __webpack_require__(/*! @protobufjs/pool */ \"(rsc)/./node_modules/@protobufjs/pool/index.js\");\n\n// utility to work with the low and high bits of a 64 bit value\nutil.LongBits = __webpack_require__(/*! ./longbits */ \"(rsc)/./node_modules/@apollo/protobufjs/src/util/longbits.js\");\n\n// global object reference\nutil.global = typeof window !== \"undefined\" && window\n           || typeof global !== \"undefined\" && global\n           || typeof self   !== \"undefined\" && self\n           || this; // eslint-disable-line no-invalid-this\n\n/**\n * An immuable empty array.\n * @memberof util\n * @type {Array.<*>}\n * @const\n */\nutil.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes\n\n/**\n * An immutable empty object.\n * @type {Object}\n * @const\n */\nutil.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes\n\n/**\n * Whether running within node or not.\n * @memberof util\n * @type {boolean}\n * @const\n */\nutil.isNode = Boolean(util.global.process && util.global.process.versions && util.global.process.versions.node);\n\n/**\n * Tests if the specified value is an integer.\n * @function\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is an integer\n */\nutil.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {\n    return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n};\n\n/**\n * Tests if the specified value is a string.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a string\n */\nutil.isString = function isString(value) {\n    return typeof value === \"string\" || value instanceof String;\n};\n\n/**\n * Tests if the specified value is a non-null object.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a non-null object\n */\nutil.isObject = function isObject(value) {\n    return value && typeof value === \"object\";\n};\n\n/**\n * Checks if a property on a message is considered to be present.\n * This is an alias of {@link util.isSet}.\n * @function\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isset =\n\n/**\n * Checks if a property on a message is considered to be present.\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isSet = function isSet(obj, prop) {\n    var value = obj[prop];\n    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins\n        return typeof value !== \"object\" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;\n    return false;\n};\n\n/**\n * Any compatible Buffer instance.\n * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.\n * @interface Buffer\n * @extends Uint8Array\n */\n\n/**\n * Node's Buffer class if available.\n * @type {Constructor<Buffer>}\n */\nutil.Buffer = (function() {\n    try {\n        var Buffer = util.inquire(\"buffer\").Buffer;\n        // refuse to use non-node buffers if not explicitly assigned (perf reasons):\n        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;\n    } catch (e) {\n        /* istanbul ignore next */\n        return null;\n    }\n})();\n\n// Internal alias of or polyfull for Buffer.from.\nutil._Buffer_from = null;\n\n// Internal alias of or polyfill for Buffer.allocUnsafe.\nutil._Buffer_allocUnsafe = null;\n\n/**\n * Creates a new buffer of whatever type supported by the environment.\n * @param {number|number[]} [sizeOrArray=0] Buffer size or number array\n * @returns {Uint8Array|Buffer} Buffer\n */\nutil.newBuffer = function newBuffer(sizeOrArray) {\n    /* istanbul ignore next */\n    return typeof sizeOrArray === \"number\"\n        ? util.Buffer\n            ? util._Buffer_allocUnsafe(sizeOrArray)\n            : new util.Array(sizeOrArray)\n        : util.Buffer\n            ? util._Buffer_from(sizeOrArray)\n            : typeof Uint8Array === \"undefined\"\n                ? sizeOrArray\n                : new Uint8Array(sizeOrArray);\n};\n\n/**\n * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.\n * @type {Constructor<Uint8Array>}\n */\nutil.Array = typeof Uint8Array !== \"undefined\" ? Uint8Array /* istanbul ignore next */ : Array;\n\n/*\n * Long.js's Long class if available and $ENABLE_LONG is set. This lets us leave it on\n * for this package's tests but have it be off in actual usage-reporting-protobuf use.\n * (We leave it on for some mode where there is no `process` that is used by tests.)\n */\nutil.Long = (typeof process === 'undefined' || process.env.ENABLE_LONG) ? (/* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long\n         || /* istanbul ignore next */ util.global.Long\n         || util.inquire(\"long\")) : undefined;\n\n/**\n * Regular expression used to verify 2 bit (`bool`) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key2Re = /^true|false|0|1$/;\n\n/**\n * Regular expression used to verify 32 bit (`int32` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key32Re = /^-?(?:0|[1-9][0-9]*)$/;\n\n/**\n * Regular expression used to verify 64 bit (`int64` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key64Re = /^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;\n\n/*\n * Converts a number or long to an 8 characters long hash string.\n * @param {Long|number} value Value to convert\n * @returns {string} Hash\n */\nutil.longToHash = function longToHash(value) {\n    return value\n        ? util.LongBits.from(value).toHash()\n        : util.LongBits.zeroHash;\n};\n\n/*\n * Converts an 8 characters long hash string to a long or number.\n * @param {string} hash Hash\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long|number} Original value\n */\nutil.longFromHash = function longFromHash(hash, unsigned) {\n    var bits = util.LongBits.fromHash(hash);\n    if (util.Long)\n        return util.Long.fromBits(bits.lo, bits.hi, unsigned);\n    return bits.toNumber(Boolean(unsigned));\n};\n\n/**\n * Merges the properties of the source object into the destination object.\n * @memberof util\n * @param {Object.<string,*>} dst Destination object\n * @param {Object.<string,*>} src Source object\n * @param {boolean} [ifNotSet=false] Merges only if the key is not already set\n * @returns {Object.<string,*>} Destination object\n */\nfunction merge(dst, src, ifNotSet) { // used by converters\n    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)\n        if (dst[keys[i]] === undefined || !ifNotSet)\n            dst[keys[i]] = src[keys[i]];\n    return dst;\n}\n\nutil.merge = merge;\n\n/**\n * Converts the first character of a string to lower case.\n * @param {string} str String to convert\n * @returns {string} Converted string\n */\nutil.lcFirst = function lcFirst(str) {\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\n\n/**\n * Creates a custom error constructor.\n * @memberof util\n * @param {string} name Error name\n * @returns {Constructor<Error>} Custom error constructor\n */\nfunction newError(name) {\n\n    function CustomError(message, properties) {\n\n        if (!(this instanceof CustomError))\n            return new CustomError(message, properties);\n\n        // Error.call(this, message);\n        // ^ just returns a new error instance because the ctor can be called as a function\n\n        Object.defineProperty(this, \"message\", { get: function() { return message; } });\n\n        /* istanbul ignore next */\n        if (Error.captureStackTrace) // node\n            Error.captureStackTrace(this, CustomError);\n        else\n            Object.defineProperty(this, \"stack\", { value: (new Error()).stack || \"\" });\n\n        if (properties)\n            merge(this, properties);\n    }\n\n    (CustomError.prototype = Object.create(Error.prototype)).constructor = CustomError;\n\n    Object.defineProperty(CustomError.prototype, \"name\", { get: function() { return name; } });\n\n    CustomError.prototype.toString = function toString() {\n        return this.name + \": \" + this.message;\n    };\n\n    return CustomError;\n}\n\nutil.newError = newError;\n\n/**\n * Constructs a new protocol error.\n * @classdesc Error subclass indicating a protocol specifc error.\n * @memberof util\n * @extends Error\n * @template T extends Message<T>\n * @constructor\n * @param {string} message Error message\n * @param {Object.<string,*>} [properties] Additional properties\n * @example\n * try {\n *     MyMessage.decode(someBuffer); // throws if required fields are missing\n * } catch (e) {\n *     if (e instanceof ProtocolError && e.instance)\n *         console.log(\"decoded so far: \" + JSON.stringify(e.instance));\n * }\n */\nutil.ProtocolError = newError(\"ProtocolError\");\n\n/**\n * So far decoded message instance.\n * @name util.ProtocolError#instance\n * @type {Message<T>}\n */\n\n/**\n * A OneOf getter as returned by {@link util.oneOfGetter}.\n * @typedef OneOfGetter\n * @type {function}\n * @returns {string|undefined} Set field name, if any\n */\n\n/**\n * Builds a getter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfGetter} Unbound getter\n */\nutil.oneOfGetter = function getOneOf(fieldNames) {\n    var fieldMap = {};\n    for (var i = 0; i < fieldNames.length; ++i)\n        fieldMap[fieldNames[i]] = 1;\n\n    /**\n     * @returns {string|undefined} Set field name, if any\n     * @this Object\n     * @ignore\n     */\n    return function() { // eslint-disable-line consistent-return\n        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)\n            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)\n                return keys[i];\n    };\n};\n\n/**\n * A OneOf setter as returned by {@link util.oneOfSetter}.\n * @typedef OneOfSetter\n * @type {function}\n * @param {string|undefined} value Field name\n * @returns {undefined}\n */\n\n/**\n * Builds a setter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfSetter} Unbound setter\n */\nutil.oneOfSetter = function setOneOf(fieldNames) {\n\n    /**\n     * @param {string} name Field name\n     * @returns {undefined}\n     * @this Object\n     * @ignore\n     */\n    return function(name) {\n        for (var i = 0; i < fieldNames.length; ++i)\n            if (fieldNames[i] !== name)\n                delete this[fieldNames[i]];\n    };\n};\n\n/**\n * Default conversion options used for {@link Message#toJSON} implementations.\n *\n * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:\n *\n * - Longs become strings\n * - Enums become string keys\n * - Bytes become base64 encoded strings\n * - (Sub-)Messages become plain objects\n * - Maps become plain objects with all string keys\n * - Repeated fields become arrays\n * - NaN and Infinity for float and double fields become strings\n *\n * @type {IConversionOptions}\n * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json\n */\nutil.toJSONOptions = {\n    longs: String,\n    enums: String,\n    bytes: String,\n    json: true\n};\n\n// Sets up buffer utility according to the environment (called in index-minimal)\nutil._configure = function() {\n    var Buffer = util.Buffer;\n    /* istanbul ignore if */\n    if (!Buffer) {\n        util._Buffer_from = util._Buffer_allocUnsafe = null;\n        return;\n    }\n    // because node 4.x buffers are incompatible & immutable\n    // see: https://github.com/dcodeIO/protobuf.js/pull/665\n    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||\n        /* istanbul ignore next */\n        function Buffer_from(value, encoding) {\n            return new Buffer(value, encoding);\n        };\n    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||\n        /* istanbul ignore next */\n        function Buffer_allocUnsafe(size) {\n            return new Buffer(size);\n        };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy91dGlsL21pbmltYWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjs7QUFFQTtBQUNBLGlCQUFpQixtQkFBTyxDQUFDLGtGQUF1Qjs7QUFFaEQ7QUFDQSxjQUFjLG1CQUFPLENBQUMsNEVBQW9COztBQUUxQztBQUNBLG9CQUFvQixtQkFBTyxDQUFDLHdGQUEwQjs7QUFFdEQ7QUFDQSxhQUFhLG1CQUFPLENBQUMsMEVBQW1COztBQUV4QztBQUNBLGVBQWUsbUJBQU8sQ0FBQyw4RUFBcUI7O0FBRTVDO0FBQ0EsWUFBWSxtQkFBTyxDQUFDLHdFQUFrQjs7QUFFdEM7QUFDQSxZQUFZLG1CQUFPLENBQUMsd0VBQWtCOztBQUV0QztBQUNBLGdCQUFnQixtQkFBTyxDQUFDLGdGQUFZOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjs7QUFFcEI7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxxRkFBcUY7O0FBRXJGO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLG1EQUFtRCxtQ0FBbUM7O0FBRXRGO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2QsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZCxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFB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Q0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy91dGlsL21pbmltYWwuanM/ZDhmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gZXhwb3J0cztcblxuLy8gdXNlZCB0byByZXR1cm4gYSBQcm9taXNlIHdoZXJlIGNhbGxiYWNrIGlzIG9taXR0ZWRcbnV0aWwuYXNQcm9taXNlID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL2FzcHJvbWlzZVwiKTtcblxuLy8gY29udmVydHMgdG8gLyBmcm9tIGJhc2U2NCBlbmNvZGVkIHN0cmluZ3NcbnV0aWwuYmFzZTY0ID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL2Jhc2U2NFwiKTtcblxuLy8gYmFzZSBjbGFzcyBvZiBycGMuU2VydmljZVxudXRpbC5FdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiQHByb3RvYnVmanMvZXZlbnRlbWl0dGVyXCIpO1xuXG4vLyBmbG9hdCBoYW5kbGluZyBhY2Nyb3NzIGJyb3dzZXJzXG51dGlsLmZsb2F0ID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL2Zsb2F0XCIpO1xuXG4vLyByZXF1aXJlcyBtb2R1bGVzIG9wdGlvbmFsbHkgYW5kIGhpZGVzIHRoZSBjYWxsIGZyb20gYnVuZGxlcnNcbnV0aWwuaW5xdWlyZSA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy9pbnF1aXJlXCIpO1xuXG4vLyBjb252ZXJ0cyB0byAvIGZyb20gdXRmOCBlbmNvZGVkIHN0cmluZ3NcbnV0aWwudXRmOCA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy91dGY4XCIpO1xuXG4vLyBwcm92aWRlcyBhIG5vZGUtbGlrZSBidWZmZXIgcG9vbCBpbiB0aGUgYnJvd3NlclxudXRpbC5wb29sID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL3Bvb2xcIik7XG5cbi8vIHV0aWxpdHkgdG8gd29yayB3aXRoIHRoZSBsb3cgYW5kIGhpZ2ggYml0cyBvZiBhIDY0IGJpdCB2YWx1ZVxudXRpbC5Mb25nQml0cyA9IHJlcXVpcmUoXCIuL2xvbmdiaXRzXCIpO1xuXG4vLyBnbG9iYWwgb2JqZWN0IHJlZmVyZW5jZVxudXRpbC5nbG9iYWwgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvd1xuICAgICAgICAgICB8fCB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbFxuICAgICAgICAgICB8fCB0eXBlb2Ygc2VsZiAgICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGZcbiAgICAgICAgICAgfHwgdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1pbnZhbGlkLXRoaXNcblxuLyoqXG4gKiBBbiBpbW11YWJsZSBlbXB0eSBhcnJheS5cbiAqIEBtZW1iZXJvZiB1dGlsXG4gKiBAdHlwZSB7QXJyYXkuPCo+fVxuICogQGNvbnN0XG4gKi9cbnV0aWwuZW1wdHlBcnJheSA9IE9iamVjdC5mcmVlemUgPyBPYmplY3QuZnJlZXplKFtdKSA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIFtdOyAvLyB1c2VkIG9uIHByb3RvdHlwZXNcblxuLyoqXG4gKiBBbiBpbW11dGFibGUgZW1wdHkgb2JqZWN0LlxuICogQHR5cGUge09iamVjdH1cbiAqIEBjb25zdFxuICovXG51dGlsLmVtcHR5T2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSA/IE9iamVjdC5mcmVlemUoe30pIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8ge307IC8vIHVzZWQgb24gcHJvdG90eXBlc1xuXG4vKipcbiAqIFdoZXRoZXIgcnVubmluZyB3aXRoaW4gbm9kZSBvciBub3QuXG4gKiBAbWVtYmVyb2YgdXRpbFxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAY29uc3RcbiAqL1xudXRpbC5pc05vZGUgPSBCb29sZWFuKHV0aWwuZ2xvYmFsLnByb2Nlc3MgJiYgdXRpbC5nbG9iYWwucHJvY2Vzcy52ZXJzaW9ucyAmJiB1dGlsLmdsb2JhbC5wcm9jZXNzLnZlcnNpb25zLm5vZGUpO1xuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgYW4gaW50ZWdlci5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhbiBpbnRlZ2VyXG4gKi9cbnV0aWwuaXNJbnRlZ2VyID0gTnVtYmVyLmlzSW50ZWdlciB8fCAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiBpc0ludGVnZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmIGlzRmluaXRlKHZhbHVlKSAmJiBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWU7XG59O1xuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgYSBzdHJpbmcuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nXG4gKi9cbnV0aWwuaXNTdHJpbmcgPSBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XG59O1xuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgYSBub24tbnVsbCBvYmplY3QuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGEgbm9uLW51bGwgb2JqZWN0XG4gKi9cbnV0aWwuaXNPYmplY3QgPSBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCI7XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIHByb3BlcnR5IG9uIGEgbWVzc2FnZSBpcyBjb25zaWRlcmVkIHRvIGJlIHByZXNlbnQuXG4gKiBUaGlzIGlzIGFuIGFsaWFzIG9mIHtAbGluayB1dGlsLmlzU2V0fS5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBQbGFpbiBvYmplY3Qgb3IgbWVzc2FnZSBpbnN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3AgUHJvcGVydHkgbmFtZVxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBjb25zaWRlcmVkIHRvIGJlIHByZXNlbnQsIG90aGVyd2lzZSBgZmFsc2VgXG4gKi9cbnV0aWwuaXNzZXQgPVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHByb3BlcnR5IG9uIGEgbWVzc2FnZSBpcyBjb25zaWRlcmVkIHRvIGJlIHByZXNlbnQuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFBsYWluIG9iamVjdCBvciBtZXNzYWdlIGluc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSBuYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIGNvbnNpZGVyZWQgdG8gYmUgcHJlc2VudCwgb3RoZXJ3aXNlIGBmYWxzZWBcbiAqL1xudXRpbC5pc1NldCA9IGZ1bmN0aW9uIGlzU2V0KG9iaiwgcHJvcCkge1xuICAgIHZhciB2YWx1ZSA9IG9ialtwcm9wXTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiBvYmouaGFzT3duUHJvcGVydHkocHJvcCkpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxLCBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5sZW5ndGggOiBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoKSA+IDA7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBBbnkgY29tcGF0aWJsZSBCdWZmZXIgaW5zdGFuY2UuXG4gKiBUaGlzIGlzIGEgbWluaW1hbCBzdGFuZC1hbG9uZSBkZWZpbml0aW9uIG9mIGEgQnVmZmVyIGluc3RhbmNlLiBUaGUgYWN0dWFsIHR5cGUgaXMgdGhhdCBleHBvcnRlZCBieSBub2RlJ3MgdHlwaW5ncy5cbiAqIEBpbnRlcmZhY2UgQnVmZmVyXG4gKiBAZXh0ZW5kcyBVaW50OEFycmF5XG4gKi9cblxuLyoqXG4gKiBOb2RlJ3MgQnVmZmVyIGNsYXNzIGlmIGF2YWlsYWJsZS5cbiAqIEB0eXBlIHtDb25zdHJ1Y3RvcjxCdWZmZXI+fVxuICovXG51dGlsLkJ1ZmZlciA9IChmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgQnVmZmVyID0gdXRpbC5pbnF1aXJlKFwiYnVmZmVyXCIpLkJ1ZmZlcjtcbiAgICAgICAgLy8gcmVmdXNlIHRvIHVzZSBub24tbm9kZSBidWZmZXJzIGlmIG5vdCBleHBsaWNpdGx5IGFzc2lnbmVkIChwZXJmIHJlYXNvbnMpOlxuICAgICAgICByZXR1cm4gQnVmZmVyLnByb3RvdHlwZS51dGY4V3JpdGUgPyBCdWZmZXIgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBudWxsO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufSkoKTtcblxuLy8gSW50ZXJuYWwgYWxpYXMgb2Ygb3IgcG9seWZ1bGwgZm9yIEJ1ZmZlci5mcm9tLlxudXRpbC5fQnVmZmVyX2Zyb20gPSBudWxsO1xuXG4vLyBJbnRlcm5hbCBhbGlhcyBvZiBvciBwb2x5ZmlsbCBmb3IgQnVmZmVyLmFsbG9jVW5zYWZlLlxudXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlID0gbnVsbDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGJ1ZmZlciBvZiB3aGF0ZXZlciB0eXBlIHN1cHBvcnRlZCBieSB0aGUgZW52aXJvbm1lbnQuXG4gKiBAcGFyYW0ge251bWJlcnxudW1iZXJbXX0gW3NpemVPckFycmF5PTBdIEJ1ZmZlciBzaXplIG9yIG51bWJlciBhcnJheVxuICogQHJldHVybnMge1VpbnQ4QXJyYXl8QnVmZmVyfSBCdWZmZXJcbiAqL1xudXRpbC5uZXdCdWZmZXIgPSBmdW5jdGlvbiBuZXdCdWZmZXIoc2l6ZU9yQXJyYXkpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJldHVybiB0eXBlb2Ygc2l6ZU9yQXJyYXkgPT09IFwibnVtYmVyXCJcbiAgICAgICAgPyB1dGlsLkJ1ZmZlclxuICAgICAgICAgICAgPyB1dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmUoc2l6ZU9yQXJyYXkpXG4gICAgICAgICAgICA6IG5ldyB1dGlsLkFycmF5KHNpemVPckFycmF5KVxuICAgICAgICA6IHV0aWwuQnVmZmVyXG4gICAgICAgICAgICA/IHV0aWwuX0J1ZmZlcl9mcm9tKHNpemVPckFycmF5KVxuICAgICAgICAgICAgOiB0eXBlb2YgVWludDhBcnJheSA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgICAgID8gc2l6ZU9yQXJyYXlcbiAgICAgICAgICAgICAgICA6IG5ldyBVaW50OEFycmF5KHNpemVPckFycmF5KTtcbn07XG5cbi8qKlxuICogQXJyYXkgaW1wbGVtZW50YXRpb24gdXNlZCBpbiB0aGUgYnJvd3Nlci4gYFVpbnQ4QXJyYXlgIGlmIHN1cHBvcnRlZCwgb3RoZXJ3aXNlIGBBcnJheWAuXG4gKiBAdHlwZSB7Q29uc3RydWN0b3I8VWludDhBcnJheT59XG4gKi9cbnV0aWwuQXJyYXkgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gXCJ1bmRlZmluZWRcIiA/IFVpbnQ4QXJyYXkgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gOiBBcnJheTtcblxuLypcbiAqIExvbmcuanMncyBMb25nIGNsYXNzIGlmIGF2YWlsYWJsZSBhbmQgJEVOQUJMRV9MT05HIGlzIHNldC4gVGhpcyBsZXRzIHVzIGxlYXZlIGl0IG9uXG4gKiBmb3IgdGhpcyBwYWNrYWdlJ3MgdGVzdHMgYnV0IGhhdmUgaXQgYmUgb2ZmIGluIGFjdHVhbCB1c2FnZS1yZXBvcnRpbmctcHJvdG9idWYgdXNlLlxuICogKFdlIGxlYXZlIGl0IG9uIGZvciBzb21lIG1vZGUgd2hlcmUgdGhlcmUgaXMgbm8gYHByb2Nlc3NgIHRoYXQgaXMgdXNlZCBieSB0ZXN0cy4pXG4gKi9cbnV0aWwuTG9uZyA9ICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgcHJvY2Vzcy5lbnYuRU5BQkxFX0xPTkcpID8gKC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHV0aWwuZ2xvYmFsLmRjb2RlSU8gJiYgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gdXRpbC5nbG9iYWwuZGNvZGVJTy5Mb25nXG4gICAgICAgICB8fCAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB1dGlsLmdsb2JhbC5Mb25nXG4gICAgICAgICB8fCB1dGlsLmlucXVpcmUoXCJsb25nXCIpKSA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byB2ZXJpZnkgMiBiaXQgKGBib29sYCkgbWFwIGtleXMuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQGNvbnN0XG4gKi9cbnV0aWwua2V5MlJlID0gL150cnVlfGZhbHNlfDB8MSQvO1xuXG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHZlcmlmeSAzMiBiaXQgKGBpbnQzMmAgZXRjLikgbWFwIGtleXMuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQGNvbnN0XG4gKi9cbnV0aWwua2V5MzJSZSA9IC9eLT8oPzowfFsxLTldWzAtOV0qKSQvO1xuXG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHZlcmlmeSA2NCBiaXQgKGBpbnQ2NGAgZXRjLikgbWFwIGtleXMuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQGNvbnN0XG4gKi9cbnV0aWwua2V5NjRSZSA9IC9eKD86W1xcXFx4MDAtXFxcXHhmZl17OH18LT8oPzowfFsxLTldWzAtOV0qKSkkLztcblxuLypcbiAqIENvbnZlcnRzIGEgbnVtYmVyIG9yIGxvbmcgdG8gYW4gOCBjaGFyYWN0ZXJzIGxvbmcgaGFzaCBzdHJpbmcuXG4gKiBAcGFyYW0ge0xvbmd8bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7c3RyaW5nfSBIYXNoXG4gKi9cbnV0aWwubG9uZ1RvSGFzaCA9IGZ1bmN0aW9uIGxvbmdUb0hhc2godmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgPyB1dGlsLkxvbmdCaXRzLmZyb20odmFsdWUpLnRvSGFzaCgpXG4gICAgICAgIDogdXRpbC5Mb25nQml0cy56ZXJvSGFzaDtcbn07XG5cbi8qXG4gKiBDb252ZXJ0cyBhbiA4IGNoYXJhY3RlcnMgbG9uZyBoYXNoIHN0cmluZyB0byBhIGxvbmcgb3IgbnVtYmVyLlxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggSGFzaFxuICogQHBhcmFtIHtib29sZWFufSBbdW5zaWduZWQ9ZmFsc2VdIFdoZXRoZXIgdW5zaWduZWQgb3Igbm90XG4gKiBAcmV0dXJucyB7TG9uZ3xudW1iZXJ9IE9yaWdpbmFsIHZhbHVlXG4gKi9cbnV0aWwubG9uZ0Zyb21IYXNoID0gZnVuY3Rpb24gbG9uZ0Zyb21IYXNoKGhhc2gsIHVuc2lnbmVkKSB7XG4gICAgdmFyIGJpdHMgPSB1dGlsLkxvbmdCaXRzLmZyb21IYXNoKGhhc2gpO1xuICAgIGlmICh1dGlsLkxvbmcpXG4gICAgICAgIHJldHVybiB1dGlsLkxvbmcuZnJvbUJpdHMoYml0cy5sbywgYml0cy5oaSwgdW5zaWduZWQpO1xuICAgIHJldHVybiBiaXRzLnRvTnVtYmVyKEJvb2xlYW4odW5zaWduZWQpKTtcbn07XG5cbi8qKlxuICogTWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBzb3VyY2Ugb2JqZWN0IGludG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBtZW1iZXJvZiB1dGlsXG4gKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBkc3QgRGVzdGluYXRpb24gb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBzcmMgU291cmNlIG9iamVjdFxuICogQHBhcmFtIHtib29sZWFufSBbaWZOb3RTZXQ9ZmFsc2VdIE1lcmdlcyBvbmx5IGlmIHRoZSBrZXkgaXMgbm90IGFscmVhZHkgc2V0XG4gKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IERlc3RpbmF0aW9uIG9iamVjdFxuICovXG5mdW5jdGlvbiBtZXJnZShkc3QsIHNyYywgaWZOb3RTZXQpIHsgLy8gdXNlZCBieSBjb252ZXJ0ZXJzXG4gICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNyYyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgaWYgKGRzdFtrZXlzW2ldXSA9PT0gdW5kZWZpbmVkIHx8ICFpZk5vdFNldClcbiAgICAgICAgICAgIGRzdFtrZXlzW2ldXSA9IHNyY1trZXlzW2ldXTtcbiAgICByZXR1cm4gZHN0O1xufVxuXG51dGlsLm1lcmdlID0gbWVyZ2U7XG5cbi8qKlxuICogQ29udmVydHMgdGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHN0cmluZyB0byBsb3dlciBjYXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBTdHJpbmcgdG8gY29udmVydFxuICogQHJldHVybnMge3N0cmluZ30gQ29udmVydGVkIHN0cmluZ1xuICovXG51dGlsLmxjRmlyc3QgPSBmdW5jdGlvbiBsY0ZpcnN0KHN0cikge1xuICAgIHJldHVybiBzdHIuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBzdHIuc3Vic3RyaW5nKDEpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgY3VzdG9tIGVycm9yIGNvbnN0cnVjdG9yLlxuICogQG1lbWJlcm9mIHV0aWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEVycm9yIG5hbWVcbiAqIEByZXR1cm5zIHtDb25zdHJ1Y3RvcjxFcnJvcj59IEN1c3RvbSBlcnJvciBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBuZXdFcnJvcihuYW1lKSB7XG5cbiAgICBmdW5jdGlvbiBDdXN0b21FcnJvcihtZXNzYWdlLCBwcm9wZXJ0aWVzKSB7XG5cbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRXJyb3IobWVzc2FnZSwgcHJvcGVydGllcyk7XG5cbiAgICAgICAgLy8gRXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcbiAgICAgICAgLy8gXiBqdXN0IHJldHVybnMgYSBuZXcgZXJyb3IgaW5zdGFuY2UgYmVjYXVzZSB0aGUgY3RvciBjYW4gYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb25cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXNzYWdlXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1lc3NhZ2U7IH0gfSk7XG5cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSAvLyBub2RlXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBDdXN0b21FcnJvcik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YWNrXCIsIHsgdmFsdWU6IChuZXcgRXJyb3IoKSkuc3RhY2sgfHwgXCJcIiB9KTtcblxuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIG1lcmdlKHRoaXMsIHByb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIChDdXN0b21FcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yID0gQ3VzdG9tRXJyb3I7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ3VzdG9tRXJyb3IucHJvdG90eXBlLCBcIm5hbWVcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmFtZTsgfSB9KTtcblxuICAgIEN1c3RvbUVycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lICsgXCI6IFwiICsgdGhpcy5tZXNzYWdlO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ3VzdG9tRXJyb3I7XG59XG5cbnV0aWwubmV3RXJyb3IgPSBuZXdFcnJvcjtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHByb3RvY29sIGVycm9yLlxuICogQGNsYXNzZGVzYyBFcnJvciBzdWJjbGFzcyBpbmRpY2F0aW5nIGEgcHJvdG9jb2wgc3BlY2lmYyBlcnJvci5cbiAqIEBtZW1iZXJvZiB1dGlsXG4gKiBAZXh0ZW5kcyBFcnJvclxuICogQHRlbXBsYXRlIFQgZXh0ZW5kcyBNZXNzYWdlPFQ+XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIEVycm9yIG1lc3NhZ2VcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IFtwcm9wZXJ0aWVzXSBBZGRpdGlvbmFsIHByb3BlcnRpZXNcbiAqIEBleGFtcGxlXG4gKiB0cnkge1xuICogICAgIE15TWVzc2FnZS5kZWNvZGUoc29tZUJ1ZmZlcik7IC8vIHRocm93cyBpZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAqIH0gY2F0Y2ggKGUpIHtcbiAqICAgICBpZiAoZSBpbnN0YW5jZW9mIFByb3RvY29sRXJyb3IgJiYgZS5pbnN0YW5jZSlcbiAqICAgICAgICAgY29uc29sZS5sb2coXCJkZWNvZGVkIHNvIGZhcjogXCIgKyBKU09OLnN0cmluZ2lmeShlLmluc3RhbmNlKSk7XG4gKiB9XG4gKi9cbnV0aWwuUHJvdG9jb2xFcnJvciA9IG5ld0Vycm9yKFwiUHJvdG9jb2xFcnJvclwiKTtcblxuLyoqXG4gKiBTbyBmYXIgZGVjb2RlZCBtZXNzYWdlIGluc3RhbmNlLlxuICogQG5hbWUgdXRpbC5Qcm90b2NvbEVycm9yI2luc3RhbmNlXG4gKiBAdHlwZSB7TWVzc2FnZTxUPn1cbiAqL1xuXG4vKipcbiAqIEEgT25lT2YgZ2V0dGVyIGFzIHJldHVybmVkIGJ5IHtAbGluayB1dGlsLm9uZU9mR2V0dGVyfS5cbiAqIEB0eXBlZGVmIE9uZU9mR2V0dGVyXG4gKiBAdHlwZSB7ZnVuY3Rpb259XG4gKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gU2V0IGZpZWxkIG5hbWUsIGlmIGFueVxuICovXG5cbi8qKlxuICogQnVpbGRzIGEgZ2V0dGVyIGZvciBhIG9uZW9mJ3MgcHJlc2VudCBmaWVsZCBuYW1lLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gZmllbGROYW1lcyBGaWVsZCBuYW1lc1xuICogQHJldHVybnMge09uZU9mR2V0dGVyfSBVbmJvdW5kIGdldHRlclxuICovXG51dGlsLm9uZU9mR2V0dGVyID0gZnVuY3Rpb24gZ2V0T25lT2YoZmllbGROYW1lcykge1xuICAgIHZhciBmaWVsZE1hcCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGROYW1lcy5sZW5ndGg7ICsraSlcbiAgICAgICAgZmllbGRNYXBbZmllbGROYW1lc1tpXV0gPSAxO1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IFNldCBmaWVsZCBuYW1lLCBpZiBhbnlcbiAgICAgKiBAdGhpcyBPYmplY3RcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKSwgaSA9IGtleXMubGVuZ3RoIC0gMTsgaSA+IC0xOyAtLWkpXG4gICAgICAgICAgICBpZiAoZmllbGRNYXBba2V5c1tpXV0gPT09IDEgJiYgdGhpc1trZXlzW2ldXSAhPT0gdW5kZWZpbmVkICYmIHRoaXNba2V5c1tpXV0gIT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleXNbaV07XG4gICAgfTtcbn07XG5cbi8qKlxuICogQSBPbmVPZiBzZXR0ZXIgYXMgcmV0dXJuZWQgYnkge0BsaW5rIHV0aWwub25lT2ZTZXR0ZXJ9LlxuICogQHR5cGVkZWYgT25lT2ZTZXR0ZXJcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gdmFsdWUgRmllbGQgbmFtZVxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqL1xuXG4vKipcbiAqIEJ1aWxkcyBhIHNldHRlciBmb3IgYSBvbmVvZidzIHByZXNlbnQgZmllbGQgbmFtZS5cbiAqIEBwYXJhbSB7c3RyaW5nW119IGZpZWxkTmFtZXMgRmllbGQgbmFtZXNcbiAqIEByZXR1cm5zIHtPbmVPZlNldHRlcn0gVW5ib3VuZCBzZXR0ZXJcbiAqL1xudXRpbC5vbmVPZlNldHRlciA9IGZ1bmN0aW9uIHNldE9uZU9mKGZpZWxkTmFtZXMpIHtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEZpZWxkIG5hbWVcbiAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgICAqIEB0aGlzIE9iamVjdFxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkTmFtZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lc1tpXSAhPT0gbmFtZSlcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1tmaWVsZE5hbWVzW2ldXTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IGNvbnZlcnNpb24gb3B0aW9ucyB1c2VkIGZvciB7QGxpbmsgTWVzc2FnZSN0b0pTT059IGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiBUaGVzZSBvcHRpb25zIGFyZSBjbG9zZSB0byBwcm90bzMncyBKU09OIG1hcHBpbmcgd2l0aCB0aGUgZXhjZXB0aW9uIHRoYXQgaW50ZXJuYWwgdHlwZXMgbGlrZSBBbnkgYXJlIGhhbmRsZWQganVzdCBsaWtlIG1lc3NhZ2VzLiBNb3JlIHByZWNpc2VseTpcbiAqXG4gKiAtIExvbmdzIGJlY29tZSBzdHJpbmdzXG4gKiAtIEVudW1zIGJlY29tZSBzdHJpbmcga2V5c1xuICogLSBCeXRlcyBiZWNvbWUgYmFzZTY0IGVuY29kZWQgc3RyaW5nc1xuICogLSAoU3ViLSlNZXNzYWdlcyBiZWNvbWUgcGxhaW4gb2JqZWN0c1xuICogLSBNYXBzIGJlY29tZSBwbGFpbiBvYmplY3RzIHdpdGggYWxsIHN0cmluZyBrZXlzXG4gKiAtIFJlcGVhdGVkIGZpZWxkcyBiZWNvbWUgYXJyYXlzXG4gKiAtIE5hTiBhbmQgSW5maW5pdHkgZm9yIGZsb2F0IGFuZCBkb3VibGUgZmllbGRzIGJlY29tZSBzdHJpbmdzXG4gKlxuICogQHR5cGUge0lDb252ZXJzaW9uT3B0aW9uc31cbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9kb2NzL3Byb3RvMz9obD1lbiNqc29uXG4gKi9cbnV0aWwudG9KU09OT3B0aW9ucyA9IHtcbiAgICBsb25nczogU3RyaW5nLFxuICAgIGVudW1zOiBTdHJpbmcsXG4gICAgYnl0ZXM6IFN0cmluZyxcbiAgICBqc29uOiB0cnVlXG59O1xuXG4vLyBTZXRzIHVwIGJ1ZmZlciB1dGlsaXR5IGFjY29yZGluZyB0byB0aGUgZW52aXJvbm1lbnQgKGNhbGxlZCBpbiBpbmRleC1taW5pbWFsKVxudXRpbC5fY29uZmlndXJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIEJ1ZmZlciA9IHV0aWwuQnVmZmVyO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghQnVmZmVyKSB7XG4gICAgICAgIHV0aWwuX0J1ZmZlcl9mcm9tID0gdXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBiZWNhdXNlIG5vZGUgNC54IGJ1ZmZlcnMgYXJlIGluY29tcGF0aWJsZSAmIGltbXV0YWJsZVxuICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Rjb2RlSU8vcHJvdG9idWYuanMvcHVsbC82NjVcbiAgICB1dGlsLl9CdWZmZXJfZnJvbSA9IEJ1ZmZlci5mcm9tICE9PSBVaW50OEFycmF5LmZyb20gJiYgQnVmZmVyLmZyb20gfHxcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgZnVuY3Rpb24gQnVmZmVyX2Zyb20odmFsdWUsIGVuY29kaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcih2YWx1ZSwgZW5jb2RpbmcpO1xuICAgICAgICB9O1xuICAgIHV0aWwuX0J1ZmZlcl9hbGxvY1Vuc2FmZSA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSB8fFxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBmdW5jdGlvbiBCdWZmZXJfYWxsb2NVbnNhZmUoc2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXIoc2l6ZSk7XG4gICAgICAgIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/writer.js":
/*!*******************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/writer.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nmodule.exports = Writer;\n\nvar util      = __webpack_require__(/*! ./util/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js\");\n\nvar BufferWriter; // cyclic\n\nvar LongBits  = util.LongBits,\n    base64    = util.base64,\n    utf8      = util.utf8;\n\n/**\n * Constructs a new writer operation instance.\n * @classdesc Scheduled writer operation.\n * @constructor\n * @param {function(*, Uint8Array, number)} fn Function to call\n * @param {number} len Value byte length\n * @param {*} val Value to write\n * @ignore\n */\nfunction Op(fn, len, val) {\n\n    /**\n     * Function to call.\n     * @type {function(Uint8Array, number, *)}\n     */\n    this.fn = fn;\n\n    /**\n     * Value byte length.\n     * @type {number}\n     */\n    this.len = len;\n\n    /**\n     * Next operation.\n     * @type {Writer.Op|undefined}\n     */\n    this.next = undefined;\n\n    /**\n     * Value to write.\n     * @type {*}\n     */\n    this.val = val; // type varies\n}\n\n/* istanbul ignore next */\nfunction noop() {} // eslint-disable-line no-empty-function\n\n/**\n * Constructs a new writer state instance.\n * @classdesc Copied writer state.\n * @memberof Writer\n * @constructor\n * @param {Writer} writer Writer to copy state from\n * @ignore\n */\nfunction State(writer) {\n\n    /**\n     * Current head.\n     * @type {Writer.Op}\n     */\n    this.head = writer.head;\n\n    /**\n     * Current tail.\n     * @type {Writer.Op}\n     */\n    this.tail = writer.tail;\n\n    /**\n     * Current buffer length.\n     * @type {number}\n     */\n    this.len = writer.len;\n\n    /**\n     * Next state.\n     * @type {State|null}\n     */\n    this.next = writer.states;\n}\n\n/**\n * Constructs a new writer instance.\n * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n */\nfunction Writer() {\n\n    /**\n     * Current length.\n     * @type {number}\n     */\n    this.len = 0;\n\n    /**\n     * Operations head.\n     * @type {Object}\n     */\n    this.head = new Op(noop, 0, 0);\n\n    /**\n     * Operations tail\n     * @type {Object}\n     */\n    this.tail = this.head;\n\n    /**\n     * Linked forked states.\n     * @type {Object|null}\n     */\n    this.states = null;\n\n    // When a value is written, the writer calculates its byte length and puts it into a linked\n    // list of operations to perform when finish() is called. This both allows us to allocate\n    // buffers of the exact required size and reduces the amount of work we have to do compared\n    // to first calculating over objects and then encoding over objects. In our case, the encoding\n    // part is just a linked list walk calling operations with already prepared values.\n}\n\n/**\n * Creates a new writer.\n * @function\n * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}\n */\nWriter.create = util.Buffer\n    ? function create_buffer_setup() {\n        return (Writer.create = function create_buffer() {\n            return new BufferWriter();\n        })();\n    }\n    /* istanbul ignore next */\n    : function create_array() {\n        return new Writer();\n    };\n\n/**\n * Allocates a buffer of the specified size.\n * @param {number} size Buffer size\n * @returns {Uint8Array} Buffer\n */\nWriter.alloc = function alloc(size) {\n    return new util.Array(size);\n};\n\n// Use Uint8Array buffer pool in the browser, just like node does with buffers\n/* istanbul ignore else */\nif (util.Array !== Array)\n    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);\n\n/**\n * Pushes a new operation to the queue.\n * @param {function(Uint8Array, number, *)} fn Function to call\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @returns {Writer} `this`\n * @private\n */\nWriter.prototype._push = function push(fn, len, val) {\n    this.tail = this.tail.next = new Op(fn, len, val);\n    this.len += len;\n    return this;\n};\n\nfunction writeByte(val, buf, pos) {\n    buf[pos] = val & 255;\n}\n\nfunction writeVarint32(val, buf, pos) {\n    while (val > 127) {\n        buf[pos++] = val & 127 | 128;\n        val >>>= 7;\n    }\n    buf[pos] = val;\n}\n\n/**\n * Constructs a new varint writer operation instance.\n * @classdesc Scheduled varint writer operation.\n * @extends Op\n * @constructor\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @ignore\n */\nfunction VarintOp(len, val) {\n    this.len = len;\n    this.next = undefined;\n    this.val = val;\n}\n\nVarintOp.prototype = Object.create(Op.prototype);\nVarintOp.prototype.fn = writeVarint32;\n\n/**\n * Writes an unsigned 32 bit value as a varint.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.uint32 = function write_uint32(value) {\n    // here, the call to this.push has been inlined and a varint specific Op subclass is used.\n    // uint32 is by far the most frequently used operation and benefits significantly from this.\n    this.len += (this.tail = this.tail.next = new VarintOp(\n        (value = value >>> 0)\n                < 128       ? 1\n        : value < 16384     ? 2\n        : value < 2097152   ? 3\n        : value < 268435456 ? 4\n        :                     5,\n    value)).len;\n    return this;\n};\n\n/**\n * Writes a signed 32 bit value as a varint.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.int32 = function write_int32(value) {\n    return value < 0\n        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec\n        : this.uint32(value);\n};\n\n/**\n * Writes a 32 bit value as a varint, zig-zag encoded.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sint32 = function write_sint32(value) {\n    return this.uint32((value << 1 ^ value >> 31) >>> 0);\n};\n\nfunction writeVarint64(val, buf, pos) {\n    while (val.hi) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;\n        val.hi >>>= 7;\n    }\n    while (val.lo > 127) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = val.lo >>> 7;\n    }\n    buf[pos++] = val.lo;\n}\n\n/**\n * Writes an unsigned 64 bit value as a varint.\n * @param {number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.uint64 = function write_uint64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a signed 64 bit value as a varint.\n * @function\n * @param {number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.int64 = Writer.prototype.uint64;\n\n/**\n * Writes a signed 64 bit value as a varint, zig-zag encoded.\n * @param {number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sint64 = function write_sint64(value) {\n    var bits = LongBits.from(value).zzEncode();\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a boolish value as a varint.\n * @param {boolean} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bool = function write_bool(value) {\n    return this._push(writeByte, 1, value ? 1 : 0);\n};\n\nfunction writeFixed32(val, buf, pos) {\n    buf[pos    ] =  val         & 255;\n    buf[pos + 1] =  val >>> 8   & 255;\n    buf[pos + 2] =  val >>> 16  & 255;\n    buf[pos + 3] =  val >>> 24;\n}\n\n/**\n * Writes an unsigned 32 bit value as fixed 32 bits.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.fixed32 = function write_fixed32(value) {\n    return this._push(writeFixed32, 4, value >>> 0);\n};\n\n/**\n * Writes a signed 32 bit value as fixed 32 bits.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sfixed32 = Writer.prototype.fixed32;\n\n/**\n * Writes an unsigned 64 bit value as fixed 64 bits.\n * @param {number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.fixed64 = function write_fixed64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);\n};\n\n/**\n * Writes a signed 64 bit value as fixed 64 bits.\n * @function\n * @param {number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sfixed64 = Writer.prototype.fixed64;\n\n/**\n * Writes a float (32 bit).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.float = function write_float(value) {\n    return this._push(util.float.writeFloatLE, 4, value);\n};\n\n/**\n * Writes a double (64 bit float).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.double = function write_double(value) {\n    return this._push(util.float.writeDoubleLE, 8, value);\n};\n\nvar writeBytes = util.Array.prototype.set\n    ? function writeBytes_set(val, buf, pos) {\n        buf.set(val, pos); // also works for plain array values\n    }\n    /* istanbul ignore next */\n    : function writeBytes_for(val, buf, pos) {\n        for (var i = 0; i < val.length; ++i)\n            buf[pos + i] = val[i];\n    };\n\n/**\n * Writes a sequence of bytes.\n * @param {Uint8Array|string} value Buffer or base64 encoded string to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bytes = function write_bytes(value) {\n    var len = value.length >>> 0;\n    if (!len)\n        return this._push(writeByte, 1, 0);\n    if (util.isString(value)) {\n        var buf = Writer.alloc(len = base64.length(value));\n        base64.decode(value, buf, 0);\n        value = buf;\n    }\n    return this.uint32(len)._push(writeBytes, len, value);\n};\n\n/**\n * Writes a string.\n * @param {string} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.string = function write_string(value) {\n    var len = utf8.length(value);\n    return len\n        ? this.uint32(len)._push(utf8.write, len, value)\n        : this._push(writeByte, 1, 0);\n};\n\n/**\n * Forks this writer's state by pushing it to a stack.\n * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.\n * @returns {Writer} `this`\n */\nWriter.prototype.fork = function fork() {\n    this.states = new State(this);\n    this.head = this.tail = new Op(noop, 0, 0);\n    this.len = 0;\n    return this;\n};\n\n/**\n * Resets this instance to the last state.\n * @returns {Writer} `this`\n */\nWriter.prototype.reset = function reset() {\n    if (this.states) {\n        this.head   = this.states.head;\n        this.tail   = this.states.tail;\n        this.len    = this.states.len;\n        this.states = this.states.next;\n    } else {\n        this.head = this.tail = new Op(noop, 0, 0);\n        this.len  = 0;\n    }\n    return this;\n};\n\n/**\n * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.\n * @returns {Writer} `this`\n */\nWriter.prototype.ldelim = function ldelim() {\n    var head = this.head,\n        tail = this.tail,\n        len  = this.len;\n    this.reset().uint32(len);\n    if (len) {\n        this.tail.next = head.next; // skip noop\n        this.tail = tail;\n        this.len += len;\n    }\n    return this;\n};\n\n/**\n * Finishes the write operation.\n * @returns {Uint8Array} Finished buffer\n */\nWriter.prototype.finish = function finish() {\n    var head = this.head.next, // skip noop\n        buf  = this.constructor.alloc(this.len),\n        pos  = 0;\n    while (head) {\n        head.fn(head.val, buf, pos);\n        pos += head.len;\n        head = head.next;\n    }\n    // this.head = this.tail = null;\n    return buf;\n};\n\nWriter._configure = function(BufferWriter_) {\n    BufferWriter = BufferWriter_;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy93cml0ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjs7QUFFQSxnQkFBZ0IsbUJBQU8sQ0FBQyxtRkFBZ0I7O0FBRXhDLGtCQUFrQjs7QUFFbEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQ0FBaUM7QUFDNUMsV0FBVyxRQUFRO0FBQ25CLFdBQVcsR0FBRztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0Esb0JBQW9CO0FBQ3BCOztBQUVBO0FBQ0EsbUJBQW1COztBQUVuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHFCQUFxQixHQUFHLG9CQUFvQix5Q0FBeUM7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFlBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3Byb3RvYnVmanMvc3JjL3dyaXRlci5qcz8wYjg5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBXcml0ZXI7XG5cbnZhciB1dGlsICAgICAgPSByZXF1aXJlKFwiLi91dGlsL21pbmltYWxcIik7XG5cbnZhciBCdWZmZXJXcml0ZXI7IC8vIGN5Y2xpY1xuXG52YXIgTG9uZ0JpdHMgID0gdXRpbC5Mb25nQml0cyxcbiAgICBiYXNlNjQgICAgPSB1dGlsLmJhc2U2NCxcbiAgICB1dGY4ICAgICAgPSB1dGlsLnV0Zjg7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyB3cml0ZXIgb3BlcmF0aW9uIGluc3RhbmNlLlxuICogQGNsYXNzZGVzYyBTY2hlZHVsZWQgd3JpdGVyIG9wZXJhdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtmdW5jdGlvbigqLCBVaW50OEFycmF5LCBudW1iZXIpfSBmbiBGdW5jdGlvbiB0byBjYWxsXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuIFZhbHVlIGJ5dGUgbGVuZ3RoXG4gKiBAcGFyYW0geyp9IHZhbCBWYWx1ZSB0byB3cml0ZVxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBPcChmbiwgbGVuLCB2YWwpIHtcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGNhbGwuXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKFVpbnQ4QXJyYXksIG51bWJlciwgKil9XG4gICAgICovXG4gICAgdGhpcy5mbiA9IGZuO1xuXG4gICAgLyoqXG4gICAgICogVmFsdWUgYnl0ZSBsZW5ndGguXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxlbiA9IGxlbjtcblxuICAgIC8qKlxuICAgICAqIE5leHQgb3BlcmF0aW9uLlxuICAgICAqIEB0eXBlIHtXcml0ZXIuT3B8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubmV4dCA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIFZhbHVlIHRvIHdyaXRlLlxuICAgICAqIEB0eXBlIHsqfVxuICAgICAqL1xuICAgIHRoaXMudmFsID0gdmFsOyAvLyB0eXBlIHZhcmllc1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gbm9vcCgpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZW1wdHktZnVuY3Rpb25cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHdyaXRlciBzdGF0ZSBpbnN0YW5jZS5cbiAqIEBjbGFzc2Rlc2MgQ29waWVkIHdyaXRlciBzdGF0ZS5cbiAqIEBtZW1iZXJvZiBXcml0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtXcml0ZXJ9IHdyaXRlciBXcml0ZXIgdG8gY29weSBzdGF0ZSBmcm9tXG4gKiBAaWdub3JlXG4gKi9cbmZ1bmN0aW9uIFN0YXRlKHdyaXRlcikge1xuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCBoZWFkLlxuICAgICAqIEB0eXBlIHtXcml0ZXIuT3B9XG4gICAgICovXG4gICAgdGhpcy5oZWFkID0gd3JpdGVyLmhlYWQ7XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IHRhaWwuXG4gICAgICogQHR5cGUge1dyaXRlci5PcH1cbiAgICAgKi9cbiAgICB0aGlzLnRhaWwgPSB3cml0ZXIudGFpbDtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgYnVmZmVyIGxlbmd0aC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubGVuID0gd3JpdGVyLmxlbjtcblxuICAgIC8qKlxuICAgICAqIE5leHQgc3RhdGUuXG4gICAgICogQHR5cGUge1N0YXRlfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5uZXh0ID0gd3JpdGVyLnN0YXRlcztcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHdyaXRlciBpbnN0YW5jZS5cbiAqIEBjbGFzc2Rlc2MgV2lyZSBmb3JtYXQgd3JpdGVyIHVzaW5nIGBVaW50OEFycmF5YCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBgQXJyYXlgLlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFdyaXRlcigpIHtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgbGVuZ3RoLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sZW4gPSAwO1xuXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9ucyBoZWFkLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgdGhpcy5oZWFkID0gbmV3IE9wKG5vb3AsIDAsIDApO1xuXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9ucyB0YWlsXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLnRhaWwgPSB0aGlzLmhlYWQ7XG5cbiAgICAvKipcbiAgICAgKiBMaW5rZWQgZm9ya2VkIHN0YXRlcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fG51bGx9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZXMgPSBudWxsO1xuXG4gICAgLy8gV2hlbiBhIHZhbHVlIGlzIHdyaXR0ZW4sIHRoZSB3cml0ZXIgY2FsY3VsYXRlcyBpdHMgYnl0ZSBsZW5ndGggYW5kIHB1dHMgaXQgaW50byBhIGxpbmtlZFxuICAgIC8vIGxpc3Qgb2Ygb3BlcmF0aW9ucyB0byBwZXJmb3JtIHdoZW4gZmluaXNoKCkgaXMgY2FsbGVkLiBUaGlzIGJvdGggYWxsb3dzIHVzIHRvIGFsbG9jYXRlXG4gICAgLy8gYnVmZmVycyBvZiB0aGUgZXhhY3QgcmVxdWlyZWQgc2l6ZSBhbmQgcmVkdWNlcyB0aGUgYW1vdW50IG9mIHdvcmsgd2UgaGF2ZSB0byBkbyBjb21wYXJlZFxuICAgIC8vIHRvIGZpcnN0IGNhbGN1bGF0aW5nIG92ZXIgb2JqZWN0cyBhbmQgdGhlbiBlbmNvZGluZyBvdmVyIG9iamVjdHMuIEluIG91ciBjYXNlLCB0aGUgZW5jb2RpbmdcbiAgICAvLyBwYXJ0IGlzIGp1c3QgYSBsaW5rZWQgbGlzdCB3YWxrIGNhbGxpbmcgb3BlcmF0aW9ucyB3aXRoIGFscmVhZHkgcHJlcGFyZWQgdmFsdWVzLlxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgd3JpdGVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVmZmVyV3JpdGVyfFdyaXRlcn0gQSB7QGxpbmsgQnVmZmVyV3JpdGVyfSB3aGVuIEJ1ZmZlcnMgYXJlIHN1cHBvcnRlZCwgb3RoZXJ3aXNlIGEge0BsaW5rIFdyaXRlcn1cbiAqL1xuV3JpdGVyLmNyZWF0ZSA9IHV0aWwuQnVmZmVyXG4gICAgPyBmdW5jdGlvbiBjcmVhdGVfYnVmZmVyX3NldHVwKCkge1xuICAgICAgICByZXR1cm4gKFdyaXRlci5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGVfYnVmZmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJXcml0ZXIoKTtcbiAgICAgICAgfSkoKTtcbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICA6IGZ1bmN0aW9uIGNyZWF0ZV9hcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXcml0ZXIoKTtcbiAgICB9O1xuXG4vKipcbiAqIEFsbG9jYXRlcyBhIGJ1ZmZlciBvZiB0aGUgc3BlY2lmaWVkIHNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBCdWZmZXIgc2l6ZVxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEJ1ZmZlclxuICovXG5Xcml0ZXIuYWxsb2MgPSBmdW5jdGlvbiBhbGxvYyhzaXplKSB7XG4gICAgcmV0dXJuIG5ldyB1dGlsLkFycmF5KHNpemUpO1xufTtcblxuLy8gVXNlIFVpbnQ4QXJyYXkgYnVmZmVyIHBvb2wgaW4gdGhlIGJyb3dzZXIsIGp1c3QgbGlrZSBub2RlIGRvZXMgd2l0aCBidWZmZXJzXG4vKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuaWYgKHV0aWwuQXJyYXkgIT09IEFycmF5KVxuICAgIFdyaXRlci5hbGxvYyA9IHV0aWwucG9vbChXcml0ZXIuYWxsb2MsIHV0aWwuQXJyYXkucHJvdG90eXBlLnN1YmFycmF5KTtcblxuLyoqXG4gKiBQdXNoZXMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVWludDhBcnJheSwgbnVtYmVyLCAqKX0gZm4gRnVuY3Rpb24gdG8gY2FsbFxuICogQHBhcmFtIHtudW1iZXJ9IGxlbiBWYWx1ZSBieXRlIGxlbmd0aFxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAcHJpdmF0ZVxuICovXG5Xcml0ZXIucHJvdG90eXBlLl9wdXNoID0gZnVuY3Rpb24gcHVzaChmbiwgbGVuLCB2YWwpIHtcbiAgICB0aGlzLnRhaWwgPSB0aGlzLnRhaWwubmV4dCA9IG5ldyBPcChmbiwgbGVuLCB2YWwpO1xuICAgIHRoaXMubGVuICs9IGxlbjtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIHdyaXRlQnl0ZSh2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgYnVmW3Bvc10gPSB2YWwgJiAyNTU7XG59XG5cbmZ1bmN0aW9uIHdyaXRlVmFyaW50MzIodmFsLCBidWYsIHBvcykge1xuICAgIHdoaWxlICh2YWwgPiAxMjcpIHtcbiAgICAgICAgYnVmW3BvcysrXSA9IHZhbCAmIDEyNyB8IDEyODtcbiAgICAgICAgdmFsID4+Pj0gNztcbiAgICB9XG4gICAgYnVmW3Bvc10gPSB2YWw7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyB2YXJpbnQgd3JpdGVyIG9wZXJhdGlvbiBpbnN0YW5jZS5cbiAqIEBjbGFzc2Rlc2MgU2NoZWR1bGVkIHZhcmludCB3cml0ZXIgb3BlcmF0aW9uLlxuICogQGV4dGVuZHMgT3BcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtudW1iZXJ9IGxlbiBWYWx1ZSBieXRlIGxlbmd0aFxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBWYXJpbnRPcChsZW4sIHZhbCkge1xuICAgIHRoaXMubGVuID0gbGVuO1xuICAgIHRoaXMubmV4dCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnZhbCA9IHZhbDtcbn1cblxuVmFyaW50T3AucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPcC5wcm90b3R5cGUpO1xuVmFyaW50T3AucHJvdG90eXBlLmZuID0gd3JpdGVWYXJpbnQzMjtcblxuLyoqXG4gKiBXcml0ZXMgYW4gdW5zaWduZWQgMzIgYml0IHZhbHVlIGFzIGEgdmFyaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS51aW50MzIgPSBmdW5jdGlvbiB3cml0ZV91aW50MzIodmFsdWUpIHtcbiAgICAvLyBoZXJlLCB0aGUgY2FsbCB0byB0aGlzLnB1c2ggaGFzIGJlZW4gaW5saW5lZCBhbmQgYSB2YXJpbnQgc3BlY2lmaWMgT3Agc3ViY2xhc3MgaXMgdXNlZC5cbiAgICAvLyB1aW50MzIgaXMgYnkgZmFyIHRoZSBtb3N0IGZyZXF1ZW50bHkgdXNlZCBvcGVyYXRpb24gYW5kIGJlbmVmaXRzIHNpZ25pZmljYW50bHkgZnJvbSB0aGlzLlxuICAgIHRoaXMubGVuICs9ICh0aGlzLnRhaWwgPSB0aGlzLnRhaWwubmV4dCA9IG5ldyBWYXJpbnRPcChcbiAgICAgICAgKHZhbHVlID0gdmFsdWUgPj4+IDApXG4gICAgICAgICAgICAgICAgPCAxMjggICAgICAgPyAxXG4gICAgICAgIDogdmFsdWUgPCAxNjM4NCAgICAgPyAyXG4gICAgICAgIDogdmFsdWUgPCAyMDk3MTUyICAgPyAzXG4gICAgICAgIDogdmFsdWUgPCAyNjg0MzU0NTYgPyA0XG4gICAgICAgIDogICAgICAgICAgICAgICAgICAgICA1LFxuICAgIHZhbHVlKSkubGVuO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBzaWduZWQgMzIgYml0IHZhbHVlIGFzIGEgdmFyaW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmludDMyID0gZnVuY3Rpb24gd3JpdGVfaW50MzIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPCAwXG4gICAgICAgID8gdGhpcy5fcHVzaCh3cml0ZVZhcmludDY0LCAxMCwgTG9uZ0JpdHMuZnJvbU51bWJlcih2YWx1ZSkpIC8vIDEwIGJ5dGVzIHBlciBzcGVjXG4gICAgICAgIDogdGhpcy51aW50MzIodmFsdWUpO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSAzMiBiaXQgdmFsdWUgYXMgYSB2YXJpbnQsIHppZy16YWcgZW5jb2RlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuc2ludDMyID0gZnVuY3Rpb24gd3JpdGVfc2ludDMyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMudWludDMyKCh2YWx1ZSA8PCAxIF4gdmFsdWUgPj4gMzEpID4+PiAwKTtcbn07XG5cbmZ1bmN0aW9uIHdyaXRlVmFyaW50NjQodmFsLCBidWYsIHBvcykge1xuICAgIHdoaWxlICh2YWwuaGkpIHtcbiAgICAgICAgYnVmW3BvcysrXSA9IHZhbC5sbyAmIDEyNyB8IDEyODtcbiAgICAgICAgdmFsLmxvID0gKHZhbC5sbyA+Pj4gNyB8IHZhbC5oaSA8PCAyNSkgPj4+IDA7XG4gICAgICAgIHZhbC5oaSA+Pj49IDc7XG4gICAgfVxuICAgIHdoaWxlICh2YWwubG8gPiAxMjcpIHtcbiAgICAgICAgYnVmW3BvcysrXSA9IHZhbC5sbyAmIDEyNyB8IDEyODtcbiAgICAgICAgdmFsLmxvID0gdmFsLmxvID4+PiA3O1xuICAgIH1cbiAgICBidWZbcG9zKytdID0gdmFsLmxvO1xufVxuXG4vKipcbiAqIFdyaXRlcyBhbiB1bnNpZ25lZCA2NCBiaXQgdmFsdWUgYXMgYSB2YXJpbnQuXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgYHZhbHVlYCBpcyBhIHN0cmluZyBhbmQgbm8gbG9uZyBsaWJyYXJ5IGlzIHByZXNlbnQuXG4gKi9cbldyaXRlci5wcm90b3R5cGUudWludDY0ID0gZnVuY3Rpb24gd3JpdGVfdWludDY0KHZhbHVlKSB7XG4gICAgdmFyIGJpdHMgPSBMb25nQml0cy5mcm9tKHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh3cml0ZVZhcmludDY0LCBiaXRzLmxlbmd0aCgpLCBiaXRzKTtcbn07XG5cbi8qKlxuICogV3JpdGVzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBhIHZhcmludC5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxuICovXG5Xcml0ZXIucHJvdG90eXBlLmludDY0ID0gV3JpdGVyLnByb3RvdHlwZS51aW50NjQ7XG5cbi8qKlxuICogV3JpdGVzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBhIHZhcmludCwgemlnLXphZyBlbmNvZGVkLlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxuICovXG5Xcml0ZXIucHJvdG90eXBlLnNpbnQ2NCA9IGZ1bmN0aW9uIHdyaXRlX3NpbnQ2NCh2YWx1ZSkge1xuICAgIHZhciBiaXRzID0gTG9uZ0JpdHMuZnJvbSh2YWx1ZSkuenpFbmNvZGUoKTtcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh3cml0ZVZhcmludDY0LCBiaXRzLmxlbmd0aCgpLCBiaXRzKTtcbn07XG5cbi8qKlxuICogV3JpdGVzIGEgYm9vbGlzaCB2YWx1ZSBhcyBhIHZhcmludC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmJvb2wgPSBmdW5jdGlvbiB3cml0ZV9ib29sKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVCeXRlLCAxLCB2YWx1ZSA/IDEgOiAwKTtcbn07XG5cbmZ1bmN0aW9uIHdyaXRlRml4ZWQzMih2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgYnVmW3BvcyAgICBdID0gIHZhbCAgICAgICAgICYgMjU1O1xuICAgIGJ1Zltwb3MgKyAxXSA9ICB2YWwgPj4+IDggICAmIDI1NTtcbiAgICBidWZbcG9zICsgMl0gPSAgdmFsID4+PiAxNiAgJiAyNTU7XG4gICAgYnVmW3BvcyArIDNdID0gIHZhbCA+Pj4gMjQ7XG59XG5cbi8qKlxuICogV3JpdGVzIGFuIHVuc2lnbmVkIDMyIGJpdCB2YWx1ZSBhcyBmaXhlZCAzMiBiaXRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5maXhlZDMyID0gZnVuY3Rpb24gd3JpdGVfZml4ZWQzMih2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9wdXNoKHdyaXRlRml4ZWQzMiwgNCwgdmFsdWUgPj4+IDApO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBzaWduZWQgMzIgYml0IHZhbHVlIGFzIGZpeGVkIDMyIGJpdHMuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuc2ZpeGVkMzIgPSBXcml0ZXIucHJvdG90eXBlLmZpeGVkMzI7XG5cbi8qKlxuICogV3JpdGVzIGFuIHVuc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBmaXhlZCA2NCBiaXRzLlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxuICovXG5Xcml0ZXIucHJvdG90eXBlLmZpeGVkNjQgPSBmdW5jdGlvbiB3cml0ZV9maXhlZDY0KHZhbHVlKSB7XG4gICAgdmFyIGJpdHMgPSBMb25nQml0cy5mcm9tKHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh3cml0ZUZpeGVkMzIsIDQsIGJpdHMubG8pLl9wdXNoKHdyaXRlRml4ZWQzMiwgNCwgYml0cy5oaSk7XG59O1xuXG4vKipcbiAqIFdyaXRlcyBhIHNpZ25lZCA2NCBiaXQgdmFsdWUgYXMgZml4ZWQgNjQgYml0cy5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxuICovXG5Xcml0ZXIucHJvdG90eXBlLnNmaXhlZDY0ID0gV3JpdGVyLnByb3RvdHlwZS5maXhlZDY0O1xuXG4vKipcbiAqIFdyaXRlcyBhIGZsb2F0ICgzMiBiaXQpLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmZsb2F0ID0gZnVuY3Rpb24gd3JpdGVfZmxvYXQodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh1dGlsLmZsb2F0LndyaXRlRmxvYXRMRSwgNCwgdmFsdWUpO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBkb3VibGUgKDY0IGJpdCBmbG9hdCkuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuZG91YmxlID0gZnVuY3Rpb24gd3JpdGVfZG91YmxlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3B1c2godXRpbC5mbG9hdC53cml0ZURvdWJsZUxFLCA4LCB2YWx1ZSk7XG59O1xuXG52YXIgd3JpdGVCeXRlcyA9IHV0aWwuQXJyYXkucHJvdG90eXBlLnNldFxuICAgID8gZnVuY3Rpb24gd3JpdGVCeXRlc19zZXQodmFsLCBidWYsIHBvcykge1xuICAgICAgICBidWYuc2V0KHZhbCwgcG9zKTsgLy8gYWxzbyB3b3JrcyBmb3IgcGxhaW4gYXJyYXkgdmFsdWVzXG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgOiBmdW5jdGlvbiB3cml0ZUJ5dGVzX2Zvcih2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgYnVmW3BvcyArIGldID0gdmFsW2ldO1xuICAgIH07XG5cbi8qKlxuICogV3JpdGVzIGEgc2VxdWVuY2Ugb2YgYnl0ZXMuXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl8c3RyaW5nfSB2YWx1ZSBCdWZmZXIgb3IgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5ieXRlcyA9IGZ1bmN0aW9uIHdyaXRlX2J5dGVzKHZhbHVlKSB7XG4gICAgdmFyIGxlbiA9IHZhbHVlLmxlbmd0aCA+Pj4gMDtcbiAgICBpZiAoIWxlbilcbiAgICAgICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVCeXRlLCAxLCAwKTtcbiAgICBpZiAodXRpbC5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIGJ1ZiA9IFdyaXRlci5hbGxvYyhsZW4gPSBiYXNlNjQubGVuZ3RoKHZhbHVlKSk7XG4gICAgICAgIGJhc2U2NC5kZWNvZGUodmFsdWUsIGJ1ZiwgMCk7XG4gICAgICAgIHZhbHVlID0gYnVmO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy51aW50MzIobGVuKS5fcHVzaCh3cml0ZUJ5dGVzLCBsZW4sIHZhbHVlKTtcbn07XG5cbi8qKlxuICogV3JpdGVzIGEgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5zdHJpbmcgPSBmdW5jdGlvbiB3cml0ZV9zdHJpbmcodmFsdWUpIHtcbiAgICB2YXIgbGVuID0gdXRmOC5sZW5ndGgodmFsdWUpO1xuICAgIHJldHVybiBsZW5cbiAgICAgICAgPyB0aGlzLnVpbnQzMihsZW4pLl9wdXNoKHV0Zjgud3JpdGUsIGxlbiwgdmFsdWUpXG4gICAgICAgIDogdGhpcy5fcHVzaCh3cml0ZUJ5dGUsIDEsIDApO1xufTtcblxuLyoqXG4gKiBGb3JrcyB0aGlzIHdyaXRlcidzIHN0YXRlIGJ5IHB1c2hpbmcgaXQgdG8gYSBzdGFjay5cbiAqIENhbGxpbmcge0BsaW5rIFdyaXRlciNyZXNldHxyZXNldH0gb3Ige0BsaW5rIFdyaXRlciNsZGVsaW18bGRlbGltfSByZXNldHMgdGhlIHdyaXRlciB0byB0aGUgcHJldmlvdXMgc3RhdGUuXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5mb3JrID0gZnVuY3Rpb24gZm9yaygpIHtcbiAgICB0aGlzLnN0YXRlcyA9IG5ldyBTdGF0ZSh0aGlzKTtcbiAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBuZXcgT3Aobm9vcCwgMCwgMCk7XG4gICAgdGhpcy5sZW4gPSAwO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXNldHMgdGhpcyBpbnN0YW5jZSB0byB0aGUgbGFzdCBzdGF0ZS5cbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGVzKSB7XG4gICAgICAgIHRoaXMuaGVhZCAgID0gdGhpcy5zdGF0ZXMuaGVhZDtcbiAgICAgICAgdGhpcy50YWlsICAgPSB0aGlzLnN0YXRlcy50YWlsO1xuICAgICAgICB0aGlzLmxlbiAgICA9IHRoaXMuc3RhdGVzLmxlbjtcbiAgICAgICAgdGhpcy5zdGF0ZXMgPSB0aGlzLnN0YXRlcy5uZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG5ldyBPcChub29wLCAwLCAwKTtcbiAgICAgICAgdGhpcy5sZW4gID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlc2V0cyB0byB0aGUgbGFzdCBzdGF0ZSBhbmQgYXBwZW5kcyB0aGUgZm9yayBzdGF0ZSdzIGN1cnJlbnQgd3JpdGUgbGVuZ3RoIGFzIGEgdmFyaW50IGZvbGxvd2VkIGJ5IGl0cyBvcGVyYXRpb25zLlxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUubGRlbGltID0gZnVuY3Rpb24gbGRlbGltKCkge1xuICAgIHZhciBoZWFkID0gdGhpcy5oZWFkLFxuICAgICAgICB0YWlsID0gdGhpcy50YWlsLFxuICAgICAgICBsZW4gID0gdGhpcy5sZW47XG4gICAgdGhpcy5yZXNldCgpLnVpbnQzMihsZW4pO1xuICAgIGlmIChsZW4pIHtcbiAgICAgICAgdGhpcy50YWlsLm5leHQgPSBoZWFkLm5leHQ7IC8vIHNraXAgbm9vcFxuICAgICAgICB0aGlzLnRhaWwgPSB0YWlsO1xuICAgICAgICB0aGlzLmxlbiArPSBsZW47XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBGaW5pc2hlcyB0aGUgd3JpdGUgb3BlcmF0aW9uLlxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEZpbmlzaGVkIGJ1ZmZlclxuICovXG5Xcml0ZXIucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uIGZpbmlzaCgpIHtcbiAgICB2YXIgaGVhZCA9IHRoaXMuaGVhZC5uZXh0LCAvLyBza2lwIG5vb3BcbiAgICAgICAgYnVmICA9IHRoaXMuY29uc3RydWN0b3IuYWxsb2ModGhpcy5sZW4pLFxuICAgICAgICBwb3MgID0gMDtcbiAgICB3aGlsZSAoaGVhZCkge1xuICAgICAgICBoZWFkLmZuKGhlYWQudmFsLCBidWYsIHBvcyk7XG4gICAgICAgIHBvcyArPSBoZWFkLmxlbjtcbiAgICAgICAgaGVhZCA9IGhlYWQubmV4dDtcbiAgICB9XG4gICAgLy8gdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICByZXR1cm4gYnVmO1xufTtcblxuV3JpdGVyLl9jb25maWd1cmUgPSBmdW5jdGlvbihCdWZmZXJXcml0ZXJfKSB7XG4gICAgQnVmZmVyV3JpdGVyID0gQnVmZmVyV3JpdGVyXztcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/writer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/protobufjs/src/writer_buffer.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/protobufjs/src/writer_buffer.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nmodule.exports = BufferWriter;\n\n// extends Writer\nvar Writer = __webpack_require__(/*! ./writer */ \"(rsc)/./node_modules/@apollo/protobufjs/src/writer.js\");\n(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;\n\nvar util = __webpack_require__(/*! ./util/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/src/util/minimal.js\");\n\nvar Buffer = util.Buffer;\n\n/**\n * Constructs a new buffer writer instance.\n * @classdesc Wire format writer using node buffers.\n * @extends Writer\n * @constructor\n */\nfunction BufferWriter() {\n    Writer.call(this);\n}\n\n/**\n * Allocates a buffer of the specified size.\n * @param {number} size Buffer size\n * @returns {Buffer} Buffer\n */\nBufferWriter.alloc = function alloc_buffer(size) {\n    return (BufferWriter.alloc = util._Buffer_allocUnsafe)(size);\n};\n\nvar writeBytesBuffer = Buffer && Buffer.prototype instanceof Uint8Array && Buffer.prototype.set.name === \"set\"\n    ? function writeBytesBuffer_set(val, buf, pos) {\n        buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)\n                           // also works for plain array values\n    }\n    /* istanbul ignore next */\n    : function writeBytesBuffer_copy(val, buf, pos) {\n        if (val.copy) // Buffer values\n            val.copy(buf, pos, 0, val.length);\n        else for (var i = 0; i < val.length;) // plain array values\n            buf[pos++] = val[i++];\n    };\n\n/**\n * @override\n */\nBufferWriter.prototype.bytes = function write_bytes_buffer(value) {\n    if (util.isString(value))\n        value = util._Buffer_from(value, \"base64\");\n    var len = value.length >>> 0;\n    this.uint32(len);\n    if (len)\n        this._push(writeBytesBuffer, len, value);\n    return this;\n};\n\nfunction writeStringBuffer(val, buf, pos) {\n    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)\n        util.utf8.write(val, buf, pos);\n    else\n        buf.utf8Write(val, pos);\n}\n\n/**\n * @override\n */\nBufferWriter.prototype.string = function write_string_buffer(value) {\n    var len = Buffer.byteLength(value);\n    this.uint32(len);\n    if (len)\n        this._push(writeStringBuffer, len, value);\n    return this;\n};\n\n\n/**\n * Finishes the write operation.\n * @name BufferWriter#finish\n * @function\n * @returns {Buffer} Finished buffer\n */\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy93cml0ZXJfYnVmZmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7O0FBRUE7QUFDQSxhQUFhLG1CQUFPLENBQUMsdUVBQVU7QUFDL0I7O0FBRUEsV0FBVyxtQkFBTyxDQUFDLG1GQUFnQjs7QUFFbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGVBQWU7QUFDNUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9wcm90b2J1ZmpzL3NyYy93cml0ZXJfYnVmZmVyLmpzP2Y0ZmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IEJ1ZmZlcldyaXRlcjtcblxuLy8gZXh0ZW5kcyBXcml0ZXJcbnZhciBXcml0ZXIgPSByZXF1aXJlKFwiLi93cml0ZXJcIik7XG4oQnVmZmVyV3JpdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoV3JpdGVyLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yID0gQnVmZmVyV3JpdGVyO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKTtcblxudmFyIEJ1ZmZlciA9IHV0aWwuQnVmZmVyO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgYnVmZmVyIHdyaXRlciBpbnN0YW5jZS5cbiAqIEBjbGFzc2Rlc2MgV2lyZSBmb3JtYXQgd3JpdGVyIHVzaW5nIG5vZGUgYnVmZmVycy5cbiAqIEBleHRlbmRzIFdyaXRlclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEJ1ZmZlcldyaXRlcigpIHtcbiAgICBXcml0ZXIuY2FsbCh0aGlzKTtcbn1cblxuLyoqXG4gKiBBbGxvY2F0ZXMgYSBidWZmZXIgb2YgdGhlIHNwZWNpZmllZCBzaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQnVmZmVyIHNpemVcbiAqIEByZXR1cm5zIHtCdWZmZXJ9IEJ1ZmZlclxuICovXG5CdWZmZXJXcml0ZXIuYWxsb2MgPSBmdW5jdGlvbiBhbGxvY19idWZmZXIoc2l6ZSkge1xuICAgIHJldHVybiAoQnVmZmVyV3JpdGVyLmFsbG9jID0gdXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlKShzaXplKTtcbn07XG5cbnZhciB3cml0ZUJ5dGVzQnVmZmVyID0gQnVmZmVyICYmIEJ1ZmZlci5wcm90b3R5cGUgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIEJ1ZmZlci5wcm90b3R5cGUuc2V0Lm5hbWUgPT09IFwic2V0XCJcbiAgICA/IGZ1bmN0aW9uIHdyaXRlQnl0ZXNCdWZmZXJfc2V0KHZhbCwgYnVmLCBwb3MpIHtcbiAgICAgICAgYnVmLnNldCh2YWwsIHBvcyk7IC8vIGZhc3RlciB0aGFuIGNvcHkgKHJlcXVpcmVzIG5vZGUgPj0gNCB3aGVyZSBCdWZmZXJzIGV4dGVuZCBVaW50OEFycmF5IGFuZCBzZXQgaXMgcHJvcGVybHkgaW5oZXJpdGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxzbyB3b3JrcyBmb3IgcGxhaW4gYXJyYXkgdmFsdWVzXG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgOiBmdW5jdGlvbiB3cml0ZUJ5dGVzQnVmZmVyX2NvcHkodmFsLCBidWYsIHBvcykge1xuICAgICAgICBpZiAodmFsLmNvcHkpIC8vIEJ1ZmZlciB2YWx1ZXNcbiAgICAgICAgICAgIHZhbC5jb3B5KGJ1ZiwgcG9zLCAwLCB2YWwubGVuZ3RoKTtcbiAgICAgICAgZWxzZSBmb3IgKHZhciBpID0gMDsgaSA8IHZhbC5sZW5ndGg7KSAvLyBwbGFpbiBhcnJheSB2YWx1ZXNcbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSB2YWxbaSsrXTtcbiAgICB9O1xuXG4vKipcbiAqIEBvdmVycmlkZVxuICovXG5CdWZmZXJXcml0ZXIucHJvdG90eXBlLmJ5dGVzID0gZnVuY3Rpb24gd3JpdGVfYnl0ZXNfYnVmZmVyKHZhbHVlKSB7XG4gICAgaWYgKHV0aWwuaXNTdHJpbmcodmFsdWUpKVxuICAgICAgICB2YWx1ZSA9IHV0aWwuX0J1ZmZlcl9mcm9tKHZhbHVlLCBcImJhc2U2NFwiKTtcbiAgICB2YXIgbGVuID0gdmFsdWUubGVuZ3RoID4+PiAwO1xuICAgIHRoaXMudWludDMyKGxlbik7XG4gICAgaWYgKGxlbilcbiAgICAgICAgdGhpcy5fcHVzaCh3cml0ZUJ5dGVzQnVmZmVyLCBsZW4sIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIHdyaXRlU3RyaW5nQnVmZmVyKHZhbCwgYnVmLCBwb3MpIHtcbiAgICBpZiAodmFsLmxlbmd0aCA8IDQwKSAvLyBwbGFpbiBqcyBpcyBmYXN0ZXIgZm9yIHNob3J0IHN0cmluZ3MgKHByb2JhYmx5IGR1ZSB0byByZWR1bmRhbnQgYXNzZXJ0aW9ucylcbiAgICAgICAgdXRpbC51dGY4LndyaXRlKHZhbCwgYnVmLCBwb3MpO1xuICAgIGVsc2VcbiAgICAgICAgYnVmLnV0ZjhXcml0ZSh2YWwsIHBvcyk7XG59XG5cbi8qKlxuICogQG92ZXJyaWRlXG4gKi9cbkJ1ZmZlcldyaXRlci5wcm90b3R5cGUuc3RyaW5nID0gZnVuY3Rpb24gd3JpdGVfc3RyaW5nX2J1ZmZlcih2YWx1ZSkge1xuICAgIHZhciBsZW4gPSBCdWZmZXIuYnl0ZUxlbmd0aCh2YWx1ZSk7XG4gICAgdGhpcy51aW50MzIobGVuKTtcbiAgICBpZiAobGVuKVxuICAgICAgICB0aGlzLl9wdXNoKHdyaXRlU3RyaW5nQnVmZmVyLCBsZW4sIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cblxuLyoqXG4gKiBGaW5pc2hlcyB0aGUgd3JpdGUgb3BlcmF0aW9uLlxuICogQG5hbWUgQnVmZmVyV3JpdGVyI2ZpbmlzaFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVmZmVyfSBGaW5pc2hlZCBidWZmZXJcbiAqL1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/protobufjs/src/writer_buffer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@apollo/utils.createhash/dist/index.js ***!
  \*************************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createHash = void 0;\nconst utils_isnodelike_1 = __webpack_require__(/*! @apollo/utils.isnodelike */ \"(rsc)/./node_modules/@apollo/utils.isnodelike/dist/index.js\");\nfunction createHash(kind) {\n    if (utils_isnodelike_1.isNodeLike && module.require) {\n        return __webpack_require__(/*! crypto */ \"crypto\").createHash(kind);\n    }\n    return __webpack_require__(/*! sha.js */ \"(rsc)/./node_modules/sha.js/index.js\")(kind);\n}\nexports.createHash = createHash;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5jcmVhdGVoYXNoL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IjtBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFrQjtBQUNsQiwyQkFBMkIsbUJBQU8sQ0FBQyw2RkFBMEI7QUFDN0Q7QUFDQTtBQUNBLGVBQWUsbUJBQWMsQ0FBQyxzQkFBUTtBQUN0QztBQUNBLFdBQVcsbUJBQU8sQ0FBQyxvREFBUTtBQUMzQjtBQUNBLGtCQUFrQjtBQUNsQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5jcmVhdGVoYXNoL2Rpc3QvaW5kZXguanM/ZDFmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JlYXRlSGFzaCA9IHZvaWQgMDtcbmNvbnN0IHV0aWxzX2lzbm9kZWxpa2VfMSA9IHJlcXVpcmUoXCJAYXBvbGxvL3V0aWxzLmlzbm9kZWxpa2VcIik7XG5mdW5jdGlvbiBjcmVhdGVIYXNoKGtpbmQpIHtcbiAgICBpZiAodXRpbHNfaXNub2RlbGlrZV8xLmlzTm9kZUxpa2UgJiYgbW9kdWxlLnJlcXVpcmUpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZS5yZXF1aXJlKFwiY3J5cHRvXCIpLmNyZWF0ZUhhc2goa2luZCk7XG4gICAgfVxuICAgIHJldHVybiByZXF1aXJlKFwic2hhLmpzXCIpKGtpbmQpO1xufVxuZXhwb3J0cy5jcmVhdGVIYXNoID0gY3JlYXRlSGFzaDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.dropunuseddefinitions/dist/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@apollo/utils.dropunuseddefinitions/dist/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.dropUnusedDefinitions = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nfunction dropUnusedDefinitions(ast, operationName) {\n    const separated = (0, graphql_1.separateOperations)(ast)[operationName];\n    if (!separated) {\n        return ast;\n    }\n    return separated;\n}\nexports.dropUnusedDefinitions = dropUnusedDefinitions;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5kcm9wdW51c2VkZGVmaW5pdGlvbnMvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw2QkFBNkI7QUFDN0Isa0JBQWtCLG1CQUFPLENBQUMsdURBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vdXRpbHMuZHJvcHVudXNlZGRlZmluaXRpb25zL2Rpc3QvaW5kZXguanM/MzJkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZHJvcFVudXNlZERlZmluaXRpb25zID0gdm9pZCAwO1xuY29uc3QgZ3JhcGhxbF8xID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5mdW5jdGlvbiBkcm9wVW51c2VkRGVmaW5pdGlvbnMoYXN0LCBvcGVyYXRpb25OYW1lKSB7XG4gICAgY29uc3Qgc2VwYXJhdGVkID0gKDAsIGdyYXBocWxfMS5zZXBhcmF0ZU9wZXJhdGlvbnMpKGFzdClbb3BlcmF0aW9uTmFtZV07XG4gICAgaWYgKCFzZXBhcmF0ZWQpIHtcbiAgICAgICAgcmV0dXJuIGFzdDtcbiAgICB9XG4gICAgcmV0dXJuIHNlcGFyYXRlZDtcbn1cbmV4cG9ydHMuZHJvcFVudXNlZERlZmluaXRpb25zID0gZHJvcFVudXNlZERlZmluaXRpb25zO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.dropunuseddefinitions/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.isnodelike/dist/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@apollo/utils.isnodelike/dist/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.isNodeLike = void 0;\nexports.isNodeLike = typeof process === \"object\" &&\n    process &&\n    process.release &&\n    process.versions &&\n    typeof process.versions.node === \"string\";\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5pc25vZGVsaWtlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3V0aWxzLmlzbm9kZWxpa2UvZGlzdC9pbmRleC5qcz9hMmJlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc05vZGVMaWtlID0gdm9pZCAwO1xuZXhwb3J0cy5pc05vZGVMaWtlID0gdHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiZcbiAgICBwcm9jZXNzICYmXG4gICAgcHJvY2Vzcy5yZWxlYXNlICYmXG4gICAgcHJvY2Vzcy52ZXJzaW9ucyAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgPT09IFwic3RyaW5nXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.isnodelike/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/ErrorsAreMissesCache.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@apollo/utils.keyvaluecache/dist/ErrorsAreMissesCache.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ErrorsAreMissesCache = void 0;\nclass ErrorsAreMissesCache {\n    constructor(cache, logger) {\n        this.cache = cache;\n        this.logger = logger;\n    }\n    async get(key) {\n        try {\n            return await this.cache.get(key);\n        }\n        catch (e) {\n            if (this.logger) {\n                if (e instanceof Error) {\n                    this.logger.error(e.message);\n                }\n                else {\n                    this.logger.error(e);\n                }\n            }\n            return undefined;\n        }\n    }\n    async set(key, value, opts) {\n        return this.cache.set(key, value, opts);\n    }\n    async delete(key) {\n        return this.cache.delete(key);\n    }\n}\nexports.ErrorsAreMissesCache = ErrorsAreMissesCache;\n//# sourceMappingURL=ErrorsAreMissesCache.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5rZXl2YWx1ZWNhY2hlL2Rpc3QvRXJyb3JzQXJlTWlzc2VzQ2FjaGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3V0aWxzLmtleXZhbHVlY2FjaGUvZGlzdC9FcnJvcnNBcmVNaXNzZXNDYWNoZS5qcz8zMjIwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FcnJvcnNBcmVNaXNzZXNDYWNoZSA9IHZvaWQgMDtcbmNsYXNzIEVycm9yc0FyZU1pc3Nlc0NhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihjYWNoZSwgbG9nZ2VyKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgfVxuICAgIGFzeW5jIGdldChrZXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhY2hlLmdldChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sb2dnZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNldChrZXksIHZhbHVlLCBvcHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlLCBvcHRzKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICB9XG59XG5leHBvcnRzLkVycm9yc0FyZU1pc3Nlc0NhY2hlID0gRXJyb3JzQXJlTWlzc2VzQ2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FcnJvcnNBcmVNaXNzZXNDYWNoZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/ErrorsAreMissesCache.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/InMemoryLRUCache.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@apollo/utils.keyvaluecache/dist/InMemoryLRUCache.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.InMemoryLRUCache = void 0;\nconst lru_cache_1 = __importDefault(__webpack_require__(/*! lru-cache */ \"(rsc)/./node_modules/lru-cache/index.js\"));\nclass InMemoryLRUCache {\n    constructor(lruCacheOpts) {\n        this.cache = new lru_cache_1.default({\n            sizeCalculation: InMemoryLRUCache.sizeCalculation,\n            maxSize: Math.pow(2, 20) * 30,\n            ...lruCacheOpts,\n        });\n    }\n    static sizeCalculation(item) {\n        if (typeof item === \"string\") {\n            return item.length;\n        }\n        if (typeof item === \"object\") {\n            return Buffer.byteLength(JSON.stringify(item), \"utf8\");\n        }\n        return 1;\n    }\n    async set(key, value, options) {\n        if (options === null || options === void 0 ? void 0 : options.ttl) {\n            this.cache.set(key, value, { ttl: options.ttl * 1000 });\n        }\n        else {\n            this.cache.set(key, value);\n        }\n    }\n    async get(key) {\n        return this.cache.get(key);\n    }\n    async delete(key) {\n        return this.cache.delete(key);\n    }\n    clear() {\n        this.cache.clear();\n    }\n    keys() {\n        return [...this.cache.keys()];\n    }\n}\nexports.InMemoryLRUCache = InMemoryLRUCache;\n//# sourceMappingURL=InMemoryLRUCache.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5rZXl2YWx1ZWNhY2hlL2Rpc3QvSW5NZW1vcnlMUlVDYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHdCQUF3QjtBQUN4QixvQ0FBb0MsbUJBQU8sQ0FBQywwREFBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHlCQUF5QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vdXRpbHMua2V5dmFsdWVjYWNoZS9kaXN0L0luTWVtb3J5TFJVQ2FjaGUuanM/ZDQ1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSW5NZW1vcnlMUlVDYWNoZSA9IHZvaWQgMDtcbmNvbnN0IGxydV9jYWNoZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJscnUtY2FjaGVcIikpO1xuY2xhc3MgSW5NZW1vcnlMUlVDYWNoZSB7XG4gICAgY29uc3RydWN0b3IobHJ1Q2FjaGVPcHRzKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgbHJ1X2NhY2hlXzEuZGVmYXVsdCh7XG4gICAgICAgICAgICBzaXplQ2FsY3VsYXRpb246IEluTWVtb3J5TFJVQ2FjaGUuc2l6ZUNhbGN1bGF0aW9uLFxuICAgICAgICAgICAgbWF4U2l6ZTogTWF0aC5wb3coMiwgMjApICogMzAsXG4gICAgICAgICAgICAuLi5scnVDYWNoZU9wdHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgc2l6ZUNhbGN1bGF0aW9uKGl0ZW0pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gQnVmZmVyLmJ5dGVMZW5ndGgoSlNPTi5zdHJpbmdpZnkoaXRlbSksIFwidXRmOFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgYXN5bmMgc2V0KGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy50dGwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUsIHsgdHRsOiBvcHRpb25zLnR0bCAqIDEwMDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXQoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICAgIH1cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gWy4uLnRoaXMuY2FjaGUua2V5cygpXTtcbiAgICB9XG59XG5leHBvcnRzLkluTWVtb3J5TFJVQ2FjaGUgPSBJbk1lbW9yeUxSVUNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5NZW1vcnlMUlVDYWNoZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/InMemoryLRUCache.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/PrefixingKeyValueCache.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@apollo/utils.keyvaluecache/dist/PrefixingKeyValueCache.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nvar _a;\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PrefixingKeyValueCache = void 0;\nconst prefixesAreUnnecessaryForIsolationSymbol = Symbol(\"prefixesAreUnnecessaryForIsolation\");\nclass PrefixingKeyValueCache {\n    constructor(wrapped, prefix) {\n        this.wrapped = wrapped;\n        if (PrefixingKeyValueCache.prefixesAreUnnecessaryForIsolation(wrapped)) {\n            this.prefix = \"\";\n            this[prefixesAreUnnecessaryForIsolationSymbol] = true;\n        }\n        else {\n            this.prefix = prefix;\n        }\n    }\n    get(key) {\n        return this.wrapped.get(this.prefix + key);\n    }\n    set(key, value, options) {\n        return this.wrapped.set(this.prefix + key, value, options);\n    }\n    delete(key) {\n        return this.wrapped.delete(this.prefix + key);\n    }\n    static prefixesAreUnnecessaryForIsolation(c) {\n        return prefixesAreUnnecessaryForIsolationSymbol in c;\n    }\n    static cacheDangerouslyDoesNotNeedPrefixesForIsolation(c) {\n        return new PrefixesAreUnnecessaryForIsolationCache(c);\n    }\n}\nexports.PrefixingKeyValueCache = PrefixingKeyValueCache;\nclass PrefixesAreUnnecessaryForIsolationCache {\n    constructor(wrapped) {\n        this.wrapped = wrapped;\n        this[_a] = true;\n    }\n    get(key) {\n        return this.wrapped.get(key);\n    }\n    set(key, value, options) {\n        return this.wrapped.set(key, value, options);\n    }\n    delete(key) {\n        return this.wrapped.delete(key);\n    }\n}\n_a = prefixesAreUnnecessaryForIsolationSymbol;\n//# sourceMappingURL=PrefixingKeyValueCache.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5rZXl2YWx1ZWNhY2hlL2Rpc3QvUHJlZml4aW5nS2V5VmFsdWVDYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3V0aWxzLmtleXZhbHVlY2FjaGUvZGlzdC9QcmVmaXhpbmdLZXlWYWx1ZUNhY2hlLmpzPzhlNzciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX2E7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlByZWZpeGluZ0tleVZhbHVlQ2FjaGUgPSB2b2lkIDA7XG5jb25zdCBwcmVmaXhlc0FyZVVubmVjZXNzYXJ5Rm9ySXNvbGF0aW9uU3ltYm9sID0gU3ltYm9sKFwicHJlZml4ZXNBcmVVbm5lY2Vzc2FyeUZvcklzb2xhdGlvblwiKTtcbmNsYXNzIFByZWZpeGluZ0tleVZhbHVlQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKHdyYXBwZWQsIHByZWZpeCkge1xuICAgICAgICB0aGlzLndyYXBwZWQgPSB3cmFwcGVkO1xuICAgICAgICBpZiAoUHJlZml4aW5nS2V5VmFsdWVDYWNoZS5wcmVmaXhlc0FyZVVubmVjZXNzYXJ5Rm9ySXNvbGF0aW9uKHdyYXBwZWQpKSB7XG4gICAgICAgICAgICB0aGlzLnByZWZpeCA9IFwiXCI7XG4gICAgICAgICAgICB0aGlzW3ByZWZpeGVzQXJlVW5uZWNlc3NhcnlGb3JJc29sYXRpb25TeW1ib2xdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJlZml4ID0gcHJlZml4O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlZC5nZXQodGhpcy5wcmVmaXggKyBrZXkpO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVkLnNldCh0aGlzLnByZWZpeCArIGtleSwgdmFsdWUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBkZWxldGUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZWQuZGVsZXRlKHRoaXMucHJlZml4ICsga2V5KTtcbiAgICB9XG4gICAgc3RhdGljIHByZWZpeGVzQXJlVW5uZWNlc3NhcnlGb3JJc29sYXRpb24oYykge1xuICAgICAgICByZXR1cm4gcHJlZml4ZXNBcmVVbm5lY2Vzc2FyeUZvcklzb2xhdGlvblN5bWJvbCBpbiBjO1xuICAgIH1cbiAgICBzdGF0aWMgY2FjaGVEYW5nZXJvdXNseURvZXNOb3ROZWVkUHJlZml4ZXNGb3JJc29sYXRpb24oYykge1xuICAgICAgICByZXR1cm4gbmV3IFByZWZpeGVzQXJlVW5uZWNlc3NhcnlGb3JJc29sYXRpb25DYWNoZShjKTtcbiAgICB9XG59XG5leHBvcnRzLlByZWZpeGluZ0tleVZhbHVlQ2FjaGUgPSBQcmVmaXhpbmdLZXlWYWx1ZUNhY2hlO1xuY2xhc3MgUHJlZml4ZXNBcmVVbm5lY2Vzc2FyeUZvcklzb2xhdGlvbkNhY2hlIHtcbiAgICBjb25zdHJ1Y3Rvcih3cmFwcGVkKSB7XG4gICAgICAgIHRoaXMud3JhcHBlZCA9IHdyYXBwZWQ7XG4gICAgICAgIHRoaXNbX2FdID0gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVkLmdldChrZXkpO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVkLnNldChrZXksIHZhbHVlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZGVsZXRlKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVkLmRlbGV0ZShrZXkpO1xuICAgIH1cbn1cbl9hID0gcHJlZml4ZXNBcmVVbm5lY2Vzc2FyeUZvcklzb2xhdGlvblN5bWJvbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByZWZpeGluZ0tleVZhbHVlQ2FjaGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/PrefixingKeyValueCache.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@apollo/utils.keyvaluecache/dist/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ErrorsAreMissesCache = exports.InMemoryLRUCache = exports.PrefixingKeyValueCache = void 0;\nvar PrefixingKeyValueCache_1 = __webpack_require__(/*! ./PrefixingKeyValueCache */ \"(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/PrefixingKeyValueCache.js\");\nObject.defineProperty(exports, \"PrefixingKeyValueCache\", ({ enumerable: true, get: function () { return PrefixingKeyValueCache_1.PrefixingKeyValueCache; } }));\nvar InMemoryLRUCache_1 = __webpack_require__(/*! ./InMemoryLRUCache */ \"(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/InMemoryLRUCache.js\");\nObject.defineProperty(exports, \"InMemoryLRUCache\", ({ enumerable: true, get: function () { return InMemoryLRUCache_1.InMemoryLRUCache; } }));\nvar ErrorsAreMissesCache_1 = __webpack_require__(/*! ./ErrorsAreMissesCache */ \"(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/ErrorsAreMissesCache.js\");\nObject.defineProperty(exports, \"ErrorsAreMissesCache\", ({ enumerable: true, get: function () { return ErrorsAreMissesCache_1.ErrorsAreMissesCache; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5rZXl2YWx1ZWNhY2hlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsNEJBQTRCLEdBQUcsd0JBQXdCLEdBQUcsOEJBQThCO0FBQ3hGLCtCQUErQixtQkFBTyxDQUFDLGlIQUEwQjtBQUNqRSwwREFBeUQsRUFBRSxxQ0FBcUMsMkRBQTJELEVBQUM7QUFDNUoseUJBQXlCLG1CQUFPLENBQUMscUdBQW9CO0FBQ3JELG9EQUFtRCxFQUFFLHFDQUFxQywrQ0FBK0MsRUFBQztBQUMxSSw2QkFBNkIsbUJBQU8sQ0FBQyw2R0FBd0I7QUFDN0Qsd0RBQXVELEVBQUUscUNBQXFDLHVEQUF1RCxFQUFDO0FBQ3RKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3V0aWxzLmtleXZhbHVlY2FjaGUvZGlzdC9pbmRleC5qcz8yODYyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FcnJvcnNBcmVNaXNzZXNDYWNoZSA9IGV4cG9ydHMuSW5NZW1vcnlMUlVDYWNoZSA9IGV4cG9ydHMuUHJlZml4aW5nS2V5VmFsdWVDYWNoZSA9IHZvaWQgMDtcbnZhciBQcmVmaXhpbmdLZXlWYWx1ZUNhY2hlXzEgPSByZXF1aXJlKFwiLi9QcmVmaXhpbmdLZXlWYWx1ZUNhY2hlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUHJlZml4aW5nS2V5VmFsdWVDYWNoZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJlZml4aW5nS2V5VmFsdWVDYWNoZV8xLlByZWZpeGluZ0tleVZhbHVlQ2FjaGU7IH0gfSk7XG52YXIgSW5NZW1vcnlMUlVDYWNoZV8xID0gcmVxdWlyZShcIi4vSW5NZW1vcnlMUlVDYWNoZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkluTWVtb3J5TFJVQ2FjaGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEluTWVtb3J5TFJVQ2FjaGVfMS5Jbk1lbW9yeUxSVUNhY2hlOyB9IH0pO1xudmFyIEVycm9yc0FyZU1pc3Nlc0NhY2hlXzEgPSByZXF1aXJlKFwiLi9FcnJvcnNBcmVNaXNzZXNDYWNoZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkVycm9yc0FyZU1pc3Nlc0NhY2hlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBFcnJvcnNBcmVNaXNzZXNDYWNoZV8xLkVycm9yc0FyZU1pc3Nlc0NhY2hlOyB9IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.printwithreducedwhitespace/dist/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/utils.printwithreducedwhitespace/dist/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.printWithReducedWhitespace = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nfunction printWithReducedWhitespace(ast) {\n    const sanitizedAST = (0, graphql_1.visit)(ast, {\n        StringValue(node) {\n            return {\n                ...node,\n                value: Buffer.from(node.value, \"utf8\").toString(\"hex\"),\n                block: false,\n            };\n        },\n    });\n    const withWhitespace = (0, graphql_1.print)(sanitizedAST);\n    const minimizedButStillHex = withWhitespace\n        .replace(/\\s+/g, \" \")\n        .replace(/([^_a-zA-Z0-9]) /g, (_, c) => c)\n        .replace(/ ([^_a-zA-Z0-9])/g, (_, c) => c);\n    return minimizedButStillHex.replace(/\"([a-f0-9]+)\"/g, (_, hex) => JSON.stringify(Buffer.from(hex, \"hex\").toString(\"utf8\")));\n}\nexports.printWithReducedWhitespace = printWithReducedWhitespace;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5wcmludHdpdGhyZWR1Y2Vkd2hpdGVzcGFjZS9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtDQUFrQztBQUNsQyxrQkFBa0IsbUJBQU8sQ0FBQyx1REFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5wcmludHdpdGhyZWR1Y2Vkd2hpdGVzcGFjZS9kaXN0L2luZGV4LmpzPzc2NDMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnByaW50V2l0aFJlZHVjZWRXaGl0ZXNwYWNlID0gdm9pZCAwO1xuY29uc3QgZ3JhcGhxbF8xID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5mdW5jdGlvbiBwcmludFdpdGhSZWR1Y2VkV2hpdGVzcGFjZShhc3QpIHtcbiAgICBjb25zdCBzYW5pdGl6ZWRBU1QgPSAoMCwgZ3JhcGhxbF8xLnZpc2l0KShhc3QsIHtcbiAgICAgICAgU3RyaW5nVmFsdWUobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBCdWZmZXIuZnJvbShub2RlLnZhbHVlLCBcInV0ZjhcIikudG9TdHJpbmcoXCJoZXhcIiksXG4gICAgICAgICAgICAgICAgYmxvY2s6IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCB3aXRoV2hpdGVzcGFjZSA9ICgwLCBncmFwaHFsXzEucHJpbnQpKHNhbml0aXplZEFTVCk7XG4gICAgY29uc3QgbWluaW1pemVkQnV0U3RpbGxIZXggPSB3aXRoV2hpdGVzcGFjZVxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAgICAgLnJlcGxhY2UoLyhbXl9hLXpBLVowLTldKSAvZywgKF8sIGMpID0+IGMpXG4gICAgICAgIC5yZXBsYWNlKC8gKFteX2EtekEtWjAtOV0pL2csIChfLCBjKSA9PiBjKTtcbiAgICByZXR1cm4gbWluaW1pemVkQnV0U3RpbGxIZXgucmVwbGFjZSgvXCIoW2EtZjAtOV0rKVwiL2csIChfLCBoZXgpID0+IEpTT04uc3RyaW5naWZ5KEJ1ZmZlci5mcm9tKGhleCwgXCJoZXhcIikudG9TdHJpbmcoXCJ1dGY4XCIpKSk7XG59XG5leHBvcnRzLnByaW50V2l0aFJlZHVjZWRXaGl0ZXNwYWNlID0gcHJpbnRXaXRoUmVkdWNlZFdoaXRlc3BhY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.printwithreducedwhitespace/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.removealiases/dist/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@apollo/utils.removealiases/dist/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.removeAliases = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nfunction removeAliases(ast) {\n    return (0, graphql_1.visit)(ast, {\n        Field(node) {\n            const { alias, ...rest } = node;\n            return rest;\n        },\n    });\n}\nexports.removeAliases = removeAliases;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5yZW1vdmVhbGlhc2VzL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QscUJBQXFCO0FBQ3JCLGtCQUFrQixtQkFBTyxDQUFDLHVEQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EscUJBQXFCO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3V0aWxzLnJlbW92ZWFsaWFzZXMvZGlzdC9pbmRleC5qcz8xYzc1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5yZW1vdmVBbGlhc2VzID0gdm9pZCAwO1xuY29uc3QgZ3JhcGhxbF8xID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5mdW5jdGlvbiByZW1vdmVBbGlhc2VzKGFzdCkge1xuICAgIHJldHVybiAoMCwgZ3JhcGhxbF8xLnZpc2l0KShhc3QsIHtcbiAgICAgICAgRmllbGQobm9kZSkge1xuICAgICAgICAgICAgY29uc3QgeyBhbGlhcywgLi4ucmVzdCB9ID0gbm9kZTtcbiAgICAgICAgICAgIHJldHVybiByZXN0O1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0cy5yZW1vdmVBbGlhc2VzID0gcmVtb3ZlQWxpYXNlcztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.removealiases/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.sortast/dist/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@apollo/utils.sortast/dist/index.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.sortAST = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst lodash_sortby_1 = __importDefault(__webpack_require__(/*! lodash.sortby */ \"(rsc)/./node_modules/lodash.sortby/index.js\"));\nfunction sortAST(ast) {\n    return (0, graphql_1.visit)(ast, {\n        Document(node) {\n            return {\n                ...node,\n                definitions: (0, lodash_sortby_1.default)(node.definitions, \"kind\", \"name.value\"),\n            };\n        },\n        OperationDefinition(node) {\n            return sortVariableDefinitions(node);\n        },\n        SelectionSet(node) {\n            return {\n                ...node,\n                selections: (0, lodash_sortby_1.default)(node.selections, \"kind\", \"name.value\"),\n            };\n        },\n        Field(node) {\n            return sortArguments(node);\n        },\n        FragmentSpread(node) {\n            return sortDirectives(node);\n        },\n        InlineFragment(node) {\n            return sortDirectives(node);\n        },\n        FragmentDefinition(node) {\n            return sortDirectives(sortVariableDefinitions(node));\n        },\n        Directive(node) {\n            return sortArguments(node);\n        },\n    });\n}\nexports.sortAST = sortAST;\nfunction sortDirectives(node) {\n    return \"directives\" in node\n        ? { ...node, directives: (0, lodash_sortby_1.default)(node.directives, \"name.value\") }\n        : node;\n}\nfunction sortArguments(node) {\n    return \"arguments\" in node\n        ? { ...node, arguments: (0, lodash_sortby_1.default)(node.arguments, \"name.value\") }\n        : node;\n}\nfunction sortVariableDefinitions(node) {\n    return \"variableDefinitions\" in node\n        ? {\n            ...node,\n            variableDefinitions: (0, lodash_sortby_1.default)(node.variableDefinitions, \"variable.name.value\"),\n        }\n        : node;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5zb3J0YXN0L2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxlQUFlO0FBQ2Ysa0JBQWtCLG1CQUFPLENBQUMsdURBQVM7QUFDbkMsd0NBQXdDLG1CQUFPLENBQUMsa0VBQWU7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3V0aWxzLnNvcnRhc3QvZGlzdC9pbmRleC5qcz9hN2FmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5zb3J0QVNUID0gdm9pZCAwO1xuY29uc3QgZ3JhcGhxbF8xID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5jb25zdCBsb2Rhc2hfc29ydGJ5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImxvZGFzaC5zb3J0YnlcIikpO1xuZnVuY3Rpb24gc29ydEFTVChhc3QpIHtcbiAgICByZXR1cm4gKDAsIGdyYXBocWxfMS52aXNpdCkoYXN0LCB7XG4gICAgICAgIERvY3VtZW50KG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4ubm9kZSxcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uczogKDAsIGxvZGFzaF9zb3J0YnlfMS5kZWZhdWx0KShub2RlLmRlZmluaXRpb25zLCBcImtpbmRcIiwgXCJuYW1lLnZhbHVlXCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgT3BlcmF0aW9uRGVmaW5pdGlvbihub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gc29ydFZhcmlhYmxlRGVmaW5pdGlvbnMobm9kZSk7XG4gICAgICAgIH0sXG4gICAgICAgIFNlbGVjdGlvblNldChub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLm5vZGUsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uczogKDAsIGxvZGFzaF9zb3J0YnlfMS5kZWZhdWx0KShub2RlLnNlbGVjdGlvbnMsIFwia2luZFwiLCBcIm5hbWUudmFsdWVcIiksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBGaWVsZChub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gc29ydEFyZ3VtZW50cyhub2RlKTtcbiAgICAgICAgfSxcbiAgICAgICAgRnJhZ21lbnRTcHJlYWQobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNvcnREaXJlY3RpdmVzKG5vZGUpO1xuICAgICAgICB9LFxuICAgICAgICBJbmxpbmVGcmFnbWVudChub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gc29ydERpcmVjdGl2ZXMobm9kZSk7XG4gICAgICAgIH0sXG4gICAgICAgIEZyYWdtZW50RGVmaW5pdGlvbihub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gc29ydERpcmVjdGl2ZXMoc29ydFZhcmlhYmxlRGVmaW5pdGlvbnMobm9kZSkpO1xuICAgICAgICB9LFxuICAgICAgICBEaXJlY3RpdmUobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNvcnRBcmd1bWVudHMobm9kZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnRzLnNvcnRBU1QgPSBzb3J0QVNUO1xuZnVuY3Rpb24gc29ydERpcmVjdGl2ZXMobm9kZSkge1xuICAgIHJldHVybiBcImRpcmVjdGl2ZXNcIiBpbiBub2RlXG4gICAgICAgID8geyAuLi5ub2RlLCBkaXJlY3RpdmVzOiAoMCwgbG9kYXNoX3NvcnRieV8xLmRlZmF1bHQpKG5vZGUuZGlyZWN0aXZlcywgXCJuYW1lLnZhbHVlXCIpIH1cbiAgICAgICAgOiBub2RlO1xufVxuZnVuY3Rpb24gc29ydEFyZ3VtZW50cyhub2RlKSB7XG4gICAgcmV0dXJuIFwiYXJndW1lbnRzXCIgaW4gbm9kZVxuICAgICAgICA/IHsgLi4ubm9kZSwgYXJndW1lbnRzOiAoMCwgbG9kYXNoX3NvcnRieV8xLmRlZmF1bHQpKG5vZGUuYXJndW1lbnRzLCBcIm5hbWUudmFsdWVcIikgfVxuICAgICAgICA6IG5vZGU7XG59XG5mdW5jdGlvbiBzb3J0VmFyaWFibGVEZWZpbml0aW9ucyhub2RlKSB7XG4gICAgcmV0dXJuIFwidmFyaWFibGVEZWZpbml0aW9uc1wiIGluIG5vZGVcbiAgICAgICAgPyB7XG4gICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgdmFyaWFibGVEZWZpbml0aW9uczogKDAsIGxvZGFzaF9zb3J0YnlfMS5kZWZhdWx0KShub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMsIFwidmFyaWFibGUubmFtZS52YWx1ZVwiKSxcbiAgICAgICAgfVxuICAgICAgICA6IG5vZGU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.sortast/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.stripsensitiveliterals/dist/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@apollo/utils.stripsensitiveliterals/dist/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.stripSensitiveLiterals = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nfunction stripSensitiveLiterals(ast, options = {\n    hideListAndObjectLiterals: false,\n}) {\n    const listAndObjectVisitorIfEnabled = options.hideListAndObjectLiterals\n        ? {\n            ListValue(node) {\n                return { ...node, values: [] };\n            },\n            ObjectValue(node) {\n                return { ...node, fields: [] };\n            },\n        }\n        : {};\n    return (0, graphql_1.visit)(ast, {\n        IntValue(node) {\n            return { ...node, value: \"0\" };\n        },\n        FloatValue(node) {\n            return { ...node, value: \"0\" };\n        },\n        StringValue(node) {\n            return { ...node, value: \"\", block: false };\n        },\n        ...listAndObjectVisitorIfEnabled,\n    });\n}\nexports.stripSensitiveLiterals = stripSensitiveLiterals;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy5zdHJpcHNlbnNpdGl2ZWxpdGVyYWxzL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsOEJBQThCO0FBQzlCLGtCQUFrQixtQkFBTyxDQUFDLHVEQUFTO0FBQ25DO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLGFBQWE7QUFDYjtBQUNBLHlCQUF5QjtBQUN6QixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSw4QkFBOEI7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vdXRpbHMuc3RyaXBzZW5zaXRpdmVsaXRlcmFscy9kaXN0L2luZGV4LmpzP2NkNjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnN0cmlwU2Vuc2l0aXZlTGl0ZXJhbHMgPSB2b2lkIDA7XG5jb25zdCBncmFwaHFsXzEgPSByZXF1aXJlKFwiZ3JhcGhxbFwiKTtcbmZ1bmN0aW9uIHN0cmlwU2Vuc2l0aXZlTGl0ZXJhbHMoYXN0LCBvcHRpb25zID0ge1xuICAgIGhpZGVMaXN0QW5kT2JqZWN0TGl0ZXJhbHM6IGZhbHNlLFxufSkge1xuICAgIGNvbnN0IGxpc3RBbmRPYmplY3RWaXNpdG9ySWZFbmFibGVkID0gb3B0aW9ucy5oaWRlTGlzdEFuZE9iamVjdExpdGVyYWxzXG4gICAgICAgID8ge1xuICAgICAgICAgICAgTGlzdFZhbHVlKG5vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5ub2RlLCB2YWx1ZXM6IFtdIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgT2JqZWN0VmFsdWUobm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm5vZGUsIGZpZWxkczogW10gfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgICAgOiB7fTtcbiAgICByZXR1cm4gKDAsIGdyYXBocWxfMS52aXNpdCkoYXN0LCB7XG4gICAgICAgIEludFZhbHVlKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLm5vZGUsIHZhbHVlOiBcIjBcIiB9O1xuICAgICAgICB9LFxuICAgICAgICBGbG9hdFZhbHVlKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLm5vZGUsIHZhbHVlOiBcIjBcIiB9O1xuICAgICAgICB9LFxuICAgICAgICBTdHJpbmdWYWx1ZShub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5ub2RlLCB2YWx1ZTogXCJcIiwgYmxvY2s6IGZhbHNlIH07XG4gICAgICAgIH0sXG4gICAgICAgIC4uLmxpc3RBbmRPYmplY3RWaXNpdG9ySWZFbmFibGVkLFxuICAgIH0pO1xufVxuZXhwb3J0cy5zdHJpcFNlbnNpdGl2ZUxpdGVyYWxzID0gc3RyaXBTZW5zaXRpdmVMaXRlcmFscztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.stripsensitiveliterals/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.usagereporting/dist/calculateReferencedFieldsByType.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@apollo/utils.usagereporting/dist/calculateReferencedFieldsByType.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.calculateReferencedFieldsByType = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst usage_reporting_protobuf_1 = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js\");\nfunction calculateReferencedFieldsByType({ document, schema, resolvedOperationName, }) {\n    const documentSeparatedByOperation = (0, graphql_1.separateOperations)(document);\n    const filteredDocument = documentSeparatedByOperation[resolvedOperationName !== null && resolvedOperationName !== void 0 ? resolvedOperationName : \"\"];\n    if (!filteredDocument) {\n        throw Error(`shouldn't happen: operation '${resolvedOperationName !== null && resolvedOperationName !== void 0 ? resolvedOperationName : \"\"}' not found`);\n    }\n    const typeInfo = new graphql_1.TypeInfo(schema);\n    const interfaces = new Set();\n    const referencedFieldSetByType = Object.create(null);\n    (0, graphql_1.visit)(filteredDocument, (0, graphql_1.visitWithTypeInfo)(typeInfo, {\n        Field(field) {\n            const fieldName = field.name.value;\n            const parentType = typeInfo.getParentType();\n            if (!parentType) {\n                throw Error(`shouldn't happen: missing parent type for field ${fieldName}`);\n            }\n            const parentTypeName = parentType.name;\n            if (!referencedFieldSetByType[parentTypeName]) {\n                referencedFieldSetByType[parentTypeName] = new Set();\n                if ((0, graphql_1.isInterfaceType)(parentType)) {\n                    interfaces.add(parentTypeName);\n                }\n            }\n            referencedFieldSetByType[parentTypeName].add(fieldName);\n        },\n    }));\n    const referencedFieldsByType = Object.create(null);\n    for (const [typeName, fieldNames] of Object.entries(referencedFieldSetByType)) {\n        referencedFieldsByType[typeName] = new usage_reporting_protobuf_1.ReferencedFieldsForType({\n            fieldNames: [...fieldNames],\n            isInterface: interfaces.has(typeName),\n        });\n    }\n    return referencedFieldsByType;\n}\nexports.calculateReferencedFieldsByType = calculateReferencedFieldsByType;\n//# sourceMappingURL=calculateReferencedFieldsByType.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy51c2FnZXJlcG9ydGluZy9kaXN0L2NhbGN1bGF0ZVJlZmVyZW5jZWRGaWVsZHNCeVR5cGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUNBQXVDO0FBQ3ZDLGtCQUFrQixtQkFBTyxDQUFDLHVEQUFTO0FBQ25DLG1DQUFtQyxtQkFBTyxDQUFDLHlIQUFrQztBQUM3RSwyQ0FBMkMsMENBQTBDO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxnR0FBZ0c7QUFDcEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLFVBQVU7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy51c2FnZXJlcG9ydGluZy9kaXN0L2NhbGN1bGF0ZVJlZmVyZW5jZWRGaWVsZHNCeVR5cGUuanM/MTdlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY2FsY3VsYXRlUmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IHZvaWQgMDtcbmNvbnN0IGdyYXBocWxfMSA9IHJlcXVpcmUoXCJncmFwaHFsXCIpO1xuY29uc3QgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEgPSByZXF1aXJlKFwiQGFwb2xsby91c2FnZS1yZXBvcnRpbmctcHJvdG9idWZcIik7XG5mdW5jdGlvbiBjYWxjdWxhdGVSZWZlcmVuY2VkRmllbGRzQnlUeXBlKHsgZG9jdW1lbnQsIHNjaGVtYSwgcmVzb2x2ZWRPcGVyYXRpb25OYW1lLCB9KSB7XG4gICAgY29uc3QgZG9jdW1lbnRTZXBhcmF0ZWRCeU9wZXJhdGlvbiA9ICgwLCBncmFwaHFsXzEuc2VwYXJhdGVPcGVyYXRpb25zKShkb2N1bWVudCk7XG4gICAgY29uc3QgZmlsdGVyZWREb2N1bWVudCA9IGRvY3VtZW50U2VwYXJhdGVkQnlPcGVyYXRpb25bcmVzb2x2ZWRPcGVyYXRpb25OYW1lICE9PSBudWxsICYmIHJlc29sdmVkT3BlcmF0aW9uTmFtZSAhPT0gdm9pZCAwID8gcmVzb2x2ZWRPcGVyYXRpb25OYW1lIDogXCJcIl07XG4gICAgaWYgKCFmaWx0ZXJlZERvY3VtZW50KSB7XG4gICAgICAgIHRocm93IEVycm9yKGBzaG91bGRuJ3QgaGFwcGVuOiBvcGVyYXRpb24gJyR7cmVzb2x2ZWRPcGVyYXRpb25OYW1lICE9PSBudWxsICYmIHJlc29sdmVkT3BlcmF0aW9uTmFtZSAhPT0gdm9pZCAwID8gcmVzb2x2ZWRPcGVyYXRpb25OYW1lIDogXCJcIn0nIG5vdCBmb3VuZGApO1xuICAgIH1cbiAgICBjb25zdCB0eXBlSW5mbyA9IG5ldyBncmFwaHFsXzEuVHlwZUluZm8oc2NoZW1hKTtcbiAgICBjb25zdCBpbnRlcmZhY2VzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IHJlZmVyZW5jZWRGaWVsZFNldEJ5VHlwZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgKDAsIGdyYXBocWxfMS52aXNpdCkoZmlsdGVyZWREb2N1bWVudCwgKDAsIGdyYXBocWxfMS52aXNpdFdpdGhUeXBlSW5mbykodHlwZUluZm8sIHtcbiAgICAgICAgRmllbGQoZmllbGQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkLm5hbWUudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRUeXBlID0gdHlwZUluZm8uZ2V0UGFyZW50VHlwZSgpO1xuICAgICAgICAgICAgaWYgKCFwYXJlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYHNob3VsZG4ndCBoYXBwZW46IG1pc3NpbmcgcGFyZW50IHR5cGUgZm9yIGZpZWxkICR7ZmllbGROYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGFyZW50VHlwZU5hbWUgPSBwYXJlbnRUeXBlLm5hbWU7XG4gICAgICAgICAgICBpZiAoIXJlZmVyZW5jZWRGaWVsZFNldEJ5VHlwZVtwYXJlbnRUeXBlTmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VkRmllbGRTZXRCeVR5cGVbcGFyZW50VHlwZU5hbWVdID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIGlmICgoMCwgZ3JhcGhxbF8xLmlzSW50ZXJmYWNlVHlwZSkocGFyZW50VHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJmYWNlcy5hZGQocGFyZW50VHlwZU5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlZmVyZW5jZWRGaWVsZFNldEJ5VHlwZVtwYXJlbnRUeXBlTmFtZV0uYWRkKGZpZWxkTmFtZSk7XG4gICAgICAgIH0sXG4gICAgfSkpO1xuICAgIGNvbnN0IHJlZmVyZW5jZWRGaWVsZHNCeVR5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvciAoY29uc3QgW3R5cGVOYW1lLCBmaWVsZE5hbWVzXSBvZiBPYmplY3QuZW50cmllcyhyZWZlcmVuY2VkRmllbGRTZXRCeVR5cGUpKSB7XG4gICAgICAgIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGVbdHlwZU5hbWVdID0gbmV3IHVzYWdlX3JlcG9ydGluZ19wcm90b2J1Zl8xLlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlKHtcbiAgICAgICAgICAgIGZpZWxkTmFtZXM6IFsuLi5maWVsZE5hbWVzXSxcbiAgICAgICAgICAgIGlzSW50ZXJmYWNlOiBpbnRlcmZhY2VzLmhhcyh0eXBlTmFtZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVmZXJlbmNlZEZpZWxkc0J5VHlwZTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlUmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IGNhbGN1bGF0ZVJlZmVyZW5jZWRGaWVsZHNCeVR5cGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxjdWxhdGVSZWZlcmVuY2VkRmllbGRzQnlUeXBlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.usagereporting/dist/calculateReferencedFieldsByType.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.usagereporting/dist/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@apollo/utils.usagereporting/dist/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.usageReportingSignature = exports.calculateReferencedFieldsByType = void 0;\nvar calculateReferencedFieldsByType_1 = __webpack_require__(/*! ./calculateReferencedFieldsByType */ \"(rsc)/./node_modules/@apollo/utils.usagereporting/dist/calculateReferencedFieldsByType.js\");\nObject.defineProperty(exports, \"calculateReferencedFieldsByType\", ({ enumerable: true, get: function () { return calculateReferencedFieldsByType_1.calculateReferencedFieldsByType; } }));\nvar signature_1 = __webpack_require__(/*! ./signature */ \"(rsc)/./node_modules/@apollo/utils.usagereporting/dist/signature.js\");\nObject.defineProperty(exports, \"usageReportingSignature\", ({ enumerable: true, get: function () { return signature_1.usageReportingSignature; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy51c2FnZXJlcG9ydGluZy9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELCtCQUErQixHQUFHLHVDQUF1QztBQUN6RSx3Q0FBd0MsbUJBQU8sQ0FBQyxvSUFBbUM7QUFDbkYsbUVBQWtFLEVBQUUscUNBQXFDLDZFQUE2RSxFQUFDO0FBQ3ZMLGtCQUFrQixtQkFBTyxDQUFDLHdGQUFhO0FBQ3ZDLDJEQUEwRCxFQUFFLHFDQUFxQywrQ0FBK0MsRUFBQztBQUNqSiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy51c2FnZXJlcG9ydGluZy9kaXN0L2luZGV4LmpzP2I3N2YiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVzYWdlUmVwb3J0aW5nU2lnbmF0dXJlID0gZXhwb3J0cy5jYWxjdWxhdGVSZWZlcmVuY2VkRmllbGRzQnlUeXBlID0gdm9pZCAwO1xudmFyIGNhbGN1bGF0ZVJlZmVyZW5jZWRGaWVsZHNCeVR5cGVfMSA9IHJlcXVpcmUoXCIuL2NhbGN1bGF0ZVJlZmVyZW5jZWRGaWVsZHNCeVR5cGVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjYWxjdWxhdGVSZWZlcmVuY2VkRmllbGRzQnlUeXBlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjYWxjdWxhdGVSZWZlcmVuY2VkRmllbGRzQnlUeXBlXzEuY2FsY3VsYXRlUmVmZXJlbmNlZEZpZWxkc0J5VHlwZTsgfSB9KTtcbnZhciBzaWduYXR1cmVfMSA9IHJlcXVpcmUoXCIuL3NpZ25hdHVyZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInVzYWdlUmVwb3J0aW5nU2lnbmF0dXJlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzaWduYXR1cmVfMS51c2FnZVJlcG9ydGluZ1NpZ25hdHVyZTsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.usagereporting/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/utils.usagereporting/dist/signature.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@apollo/utils.usagereporting/dist/signature.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.usageReportingSignature = void 0;\nconst utils_dropunuseddefinitions_1 = __webpack_require__(/*! @apollo/utils.dropunuseddefinitions */ \"(rsc)/./node_modules/@apollo/utils.dropunuseddefinitions/dist/index.js\");\nconst utils_stripsensitiveliterals_1 = __webpack_require__(/*! @apollo/utils.stripsensitiveliterals */ \"(rsc)/./node_modules/@apollo/utils.stripsensitiveliterals/dist/index.js\");\nconst utils_printwithreducedwhitespace_1 = __webpack_require__(/*! @apollo/utils.printwithreducedwhitespace */ \"(rsc)/./node_modules/@apollo/utils.printwithreducedwhitespace/dist/index.js\");\nconst utils_removealiases_1 = __webpack_require__(/*! @apollo/utils.removealiases */ \"(rsc)/./node_modules/@apollo/utils.removealiases/dist/index.js\");\nconst utils_sortast_1 = __webpack_require__(/*! @apollo/utils.sortast */ \"(rsc)/./node_modules/@apollo/utils.sortast/dist/index.js\");\nfunction usageReportingSignature(ast, operationName) {\n    return (0, utils_printwithreducedwhitespace_1.printWithReducedWhitespace)((0, utils_sortast_1.sortAST)((0, utils_removealiases_1.removeAliases)((0, utils_stripsensitiveliterals_1.stripSensitiveLiterals)((0, utils_dropunuseddefinitions_1.dropUnusedDefinitions)(ast, operationName), {\n        hideListAndObjectLiterals: true,\n    }))));\n}\nexports.usageReportingSignature = usageReportingSignature;\n//# sourceMappingURL=signature.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91dGlscy51c2FnZXJlcG9ydGluZy9kaXN0L3NpZ25hdHVyZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCwrQkFBK0I7QUFDL0Isc0NBQXNDLG1CQUFPLENBQUMsbUhBQXFDO0FBQ25GLHVDQUF1QyxtQkFBTyxDQUFDLHFIQUFzQztBQUNyRiwyQ0FBMkMsbUJBQU8sQ0FBQyw2SEFBMEM7QUFDN0YsOEJBQThCLG1CQUFPLENBQUMsbUdBQTZCO0FBQ25FLHdCQUF3QixtQkFBTyxDQUFDLHVGQUF1QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwrQkFBK0I7QUFDL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vdXRpbHMudXNhZ2VyZXBvcnRpbmcvZGlzdC9zaWduYXR1cmUuanM/YWY3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudXNhZ2VSZXBvcnRpbmdTaWduYXR1cmUgPSB2b2lkIDA7XG5jb25zdCB1dGlsc19kcm9wdW51c2VkZGVmaW5pdGlvbnNfMSA9IHJlcXVpcmUoXCJAYXBvbGxvL3V0aWxzLmRyb3B1bnVzZWRkZWZpbml0aW9uc1wiKTtcbmNvbnN0IHV0aWxzX3N0cmlwc2Vuc2l0aXZlbGl0ZXJhbHNfMSA9IHJlcXVpcmUoXCJAYXBvbGxvL3V0aWxzLnN0cmlwc2Vuc2l0aXZlbGl0ZXJhbHNcIik7XG5jb25zdCB1dGlsc19wcmludHdpdGhyZWR1Y2Vkd2hpdGVzcGFjZV8xID0gcmVxdWlyZShcIkBhcG9sbG8vdXRpbHMucHJpbnR3aXRocmVkdWNlZHdoaXRlc3BhY2VcIik7XG5jb25zdCB1dGlsc19yZW1vdmVhbGlhc2VzXzEgPSByZXF1aXJlKFwiQGFwb2xsby91dGlscy5yZW1vdmVhbGlhc2VzXCIpO1xuY29uc3QgdXRpbHNfc29ydGFzdF8xID0gcmVxdWlyZShcIkBhcG9sbG8vdXRpbHMuc29ydGFzdFwiKTtcbmZ1bmN0aW9uIHVzYWdlUmVwb3J0aW5nU2lnbmF0dXJlKGFzdCwgb3BlcmF0aW9uTmFtZSkge1xuICAgIHJldHVybiAoMCwgdXRpbHNfcHJpbnR3aXRocmVkdWNlZHdoaXRlc3BhY2VfMS5wcmludFdpdGhSZWR1Y2VkV2hpdGVzcGFjZSkoKDAsIHV0aWxzX3NvcnRhc3RfMS5zb3J0QVNUKSgoMCwgdXRpbHNfcmVtb3ZlYWxpYXNlc18xLnJlbW92ZUFsaWFzZXMpKCgwLCB1dGlsc19zdHJpcHNlbnNpdGl2ZWxpdGVyYWxzXzEuc3RyaXBTZW5zaXRpdmVMaXRlcmFscykoKDAsIHV0aWxzX2Ryb3B1bnVzZWRkZWZpbml0aW9uc18xLmRyb3BVbnVzZWREZWZpbml0aW9ucykoYXN0LCBvcGVyYXRpb25OYW1lKSwge1xuICAgICAgICBoaWRlTGlzdEFuZE9iamVjdExpdGVyYWxzOiB0cnVlLFxuICAgIH0pKSkpO1xufVxuZXhwb3J0cy51c2FnZVJlcG9ydGluZ1NpZ25hdHVyZSA9IHVzYWdlUmVwb3J0aW5nU2lnbmF0dXJlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2lnbmF0dXJlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/utils.usagereporting/dist/signature.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/ApolloServer.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/ApolloServer.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.chooseContentTypeForSingleResultResponse = exports.MEDIA_TYPES = exports.isImplicitlyInstallablePlugin = exports.internalExecuteOperation = exports.ApolloServer = void 0;\nconst utils_isnodelike_1 = __webpack_require__(/*! @apollo/utils.isnodelike */ \"(rsc)/./node_modules/@apollo/utils.isnodelike/dist/index.js\");\nconst utils_keyvaluecache_1 = __webpack_require__(/*! @apollo/utils.keyvaluecache */ \"(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/index.js\");\nconst schema_1 = __webpack_require__(/*! @graphql-tools/schema */ \"(rsc)/./node_modules/@graphql-tools/schema/cjs/index.js\");\nconst resolvable_js_1 = __importDefault(__webpack_require__(/*! ./utils/resolvable.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/resolvable.js\"));\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"(rsc)/./node_modules/loglevel/lib/loglevel.js\"));\nconst negotiator_1 = __importDefault(__webpack_require__(/*! negotiator */ \"(rsc)/./node_modules/negotiator/index.js\"));\nconst cachePolicy_js_1 = __webpack_require__(/*! ./cachePolicy.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/cachePolicy.js\");\nconst determineApolloConfig_js_1 = __webpack_require__(/*! ./determineApolloConfig.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/determineApolloConfig.js\");\nconst errorNormalize_js_1 = __webpack_require__(/*! ./errorNormalize.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/errorNormalize.js\");\nconst index_js_1 = __webpack_require__(/*! ./errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/errors/index.js\");\nconst httpBatching_js_1 = __webpack_require__(/*! ./httpBatching.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/httpBatching.js\");\nconst internalPlugin_js_1 = __webpack_require__(/*! ./internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalPlugin.js\");\nconst preventCsrf_js_1 = __webpack_require__(/*! ./preventCsrf.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/preventCsrf.js\");\nconst requestPipeline_js_1 = __webpack_require__(/*! ./requestPipeline.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/requestPipeline.js\");\nconst runHttpQuery_js_1 = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/runHttpQuery.js\");\nconst HeaderMap_js_1 = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js\");\nconst UnreachableCaseError_js_1 = __webpack_require__(/*! ./utils/UnreachableCaseError.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/UnreachableCaseError.js\");\nconst computeCoreSchemaHash_js_1 = __webpack_require__(/*! ./utils/computeCoreSchemaHash.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/computeCoreSchemaHash.js\");\nconst isDefined_js_1 = __webpack_require__(/*! ./utils/isDefined.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/isDefined.js\");\nconst schemaManager_js_1 = __webpack_require__(/*! ./utils/schemaManager.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/schemaManager.js\");\nconst index_js_2 = __webpack_require__(/*! ./validationRules/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/index.js\");\nfunction defaultLogger() {\n    const loglevelLogger = loglevel_1.default.getLogger('apollo-server');\n    loglevelLogger.setLevel(loglevel_1.default.levels.INFO);\n    return loglevelLogger;\n}\nclass ApolloServer {\n    constructor(config) {\n        const nodeEnv = config.nodeEnv ?? \"development\" ?? '';\n        this.logger = config.logger ?? defaultLogger();\n        const apolloConfig = (0, determineApolloConfig_js_1.determineApolloConfig)(config.apollo, this.logger);\n        const isDev = nodeEnv !== 'production';\n        if (config.cache &&\n            config.cache !== 'bounded' &&\n            utils_keyvaluecache_1.PrefixingKeyValueCache.prefixesAreUnnecessaryForIsolation(config.cache)) {\n            throw new Error('You cannot pass a cache returned from ' +\n                '`PrefixingKeyValueCache.cacheDangerouslyDoesNotNeedPrefixesForIsolation`' +\n                'to `new ApolloServer({ cache })`, because Apollo Server may use it for ' +\n                'multiple features whose cache keys must be distinct from each other.');\n        }\n        const state = config.gateway\n            ?\n                {\n                    phase: 'initialized',\n                    schemaManager: new schemaManager_js_1.SchemaManager({\n                        gateway: config.gateway,\n                        apolloConfig,\n                        schemaDerivedDataProvider: (schema) => ApolloServer.generateSchemaDerivedData(schema, config.documentStore),\n                        logger: this.logger,\n                    }),\n                }\n            :\n                {\n                    phase: 'initialized',\n                    schemaManager: new schemaManager_js_1.SchemaManager({\n                        apiSchema: ApolloServer.constructSchema(config),\n                        schemaDerivedDataProvider: (schema) => ApolloServer.generateSchemaDerivedData(schema, config.documentStore),\n                        logger: this.logger,\n                    }),\n                };\n        const introspectionEnabled = config.introspection ?? isDev;\n        const hideSchemaDetailsFromClientErrors = config.hideSchemaDetailsFromClientErrors ?? false;\n        this.cache =\n            config.cache === undefined || config.cache === 'bounded'\n                ? new utils_keyvaluecache_1.InMemoryLRUCache()\n                : config.cache;\n        const maxRecursiveSelectionsRule = config.maxRecursiveSelections === true\n            ? [(0, index_js_2.createMaxRecursiveSelectionsRule)(index_js_2.DEFAULT_MAX_RECURSIVE_SELECTIONS)]\n            : typeof config.maxRecursiveSelections === 'number'\n                ? [(0, index_js_2.createMaxRecursiveSelectionsRule)(config.maxRecursiveSelections)]\n                : [];\n        const validationRules = [\n            ...(introspectionEnabled ? [] : [index_js_2.NoIntrospection]),\n            ...maxRecursiveSelectionsRule,\n        ];\n        let laterValidationRules;\n        if (maxRecursiveSelectionsRule.length > 0) {\n            laterValidationRules = config.validationRules;\n        }\n        else {\n            validationRules.push(...(config.validationRules ?? []));\n        }\n        this.internals = {\n            formatError: config.formatError,\n            rootValue: config.rootValue,\n            validationRules,\n            laterValidationRules,\n            hideSchemaDetailsFromClientErrors,\n            dangerouslyDisableValidation: config.dangerouslyDisableValidation ?? false,\n            fieldResolver: config.fieldResolver,\n            includeStacktraceInErrorResponses: config.includeStacktraceInErrorResponses ??\n                (nodeEnv !== 'production' && nodeEnv !== 'test'),\n            persistedQueries: config.persistedQueries === false\n                ? undefined\n                : {\n                    ...config.persistedQueries,\n                    cache: new utils_keyvaluecache_1.PrefixingKeyValueCache(config.persistedQueries?.cache ?? this.cache, requestPipeline_js_1.APQ_CACHE_PREFIX),\n                },\n            nodeEnv,\n            allowBatchedHttpRequests: config.allowBatchedHttpRequests ?? false,\n            apolloConfig,\n            plugins: config.plugins ?? [],\n            parseOptions: config.parseOptions ?? {},\n            state,\n            stopOnTerminationSignals: config.stopOnTerminationSignals,\n            gatewayExecutor: null,\n            csrfPreventionRequestHeaders: config.csrfPrevention === true || config.csrfPrevention === undefined\n                ? preventCsrf_js_1.recommendedCsrfPreventionRequestHeaders\n                : config.csrfPrevention === false\n                    ? null\n                    : (config.csrfPrevention.requestHeaders ??\n                        preventCsrf_js_1.recommendedCsrfPreventionRequestHeaders),\n            status400ForVariableCoercionErrors: config.status400ForVariableCoercionErrors ?? false,\n            __testing_incrementalExecutionResults: config.__testing_incrementalExecutionResults,\n            stringifyResult: config.stringifyResult ?? runHttpQuery_js_1.prettyJSONStringify,\n        };\n    }\n    async start() {\n        return await this._start(false);\n    }\n    startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests() {\n        this._start(true).catch((e) => this.logStartupError(e));\n    }\n    async _start(startedInBackground) {\n        if (this.internals.state.phase !== 'initialized') {\n            throw new Error(`You should only call 'start()' or ` +\n                `'startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests()' ` +\n                `once on your ApolloServer.`);\n        }\n        const schemaManager = this.internals.state.schemaManager;\n        const barrier = (0, resolvable_js_1.default)();\n        this.internals.state = {\n            phase: 'starting',\n            barrier,\n            schemaManager,\n            startedInBackground,\n        };\n        try {\n            await this.addDefaultPlugins();\n            const toDispose = [];\n            const executor = await schemaManager.start();\n            if (executor) {\n                this.internals.gatewayExecutor = executor;\n            }\n            toDispose.push(async () => {\n                await schemaManager.stop();\n            });\n            const schemaDerivedData = schemaManager.getSchemaDerivedData();\n            const service = {\n                logger: this.logger,\n                cache: this.cache,\n                schema: schemaDerivedData.schema,\n                apollo: this.internals.apolloConfig,\n                startedInBackground,\n            };\n            const taggedServerListeners = (await Promise.all(this.internals.plugins.map(async (plugin) => ({\n                serverListener: plugin.serverWillStart && (await plugin.serverWillStart(service)),\n                installedImplicitly: isImplicitlyInstallablePlugin(plugin) &&\n                    plugin.__internal_installed_implicitly__,\n            })))).filter((maybeTaggedServerListener) => typeof maybeTaggedServerListener.serverListener === 'object');\n            taggedServerListeners.forEach(({ serverListener: { schemaDidLoadOrUpdate } }) => {\n                if (schemaDidLoadOrUpdate) {\n                    schemaManager.onSchemaLoadOrUpdate(schemaDidLoadOrUpdate);\n                }\n            });\n            const serverWillStops = taggedServerListeners\n                .map((l) => l.serverListener.serverWillStop)\n                .filter(isDefined_js_1.isDefined);\n            if (serverWillStops.length) {\n                toDispose.push(async () => {\n                    await Promise.all(serverWillStops.map((serverWillStop) => serverWillStop()));\n                });\n            }\n            const drainServerCallbacks = taggedServerListeners\n                .map((l) => l.serverListener.drainServer)\n                .filter(isDefined_js_1.isDefined);\n            const drainServers = drainServerCallbacks.length\n                ? async () => {\n                    await Promise.all(drainServerCallbacks.map((drainServer) => drainServer()));\n                }\n                : null;\n            let taggedServerListenersWithRenderLandingPage = taggedServerListeners.filter((l) => l.serverListener.renderLandingPage);\n            if (taggedServerListenersWithRenderLandingPage.length > 1) {\n                taggedServerListenersWithRenderLandingPage =\n                    taggedServerListenersWithRenderLandingPage.filter((l) => !l.installedImplicitly);\n            }\n            let landingPage = null;\n            if (taggedServerListenersWithRenderLandingPage.length > 1) {\n                throw Error('Only one plugin can implement renderLandingPage.');\n            }\n            else if (taggedServerListenersWithRenderLandingPage.length) {\n                landingPage =\n                    await taggedServerListenersWithRenderLandingPage[0].serverListener\n                        .renderLandingPage();\n            }\n            const toDisposeLast = this.maybeRegisterTerminationSignalHandlers(['SIGINT', 'SIGTERM'], startedInBackground);\n            this.internals.state = {\n                phase: 'started',\n                schemaManager,\n                drainServers,\n                landingPage,\n                toDispose,\n                toDisposeLast,\n            };\n        }\n        catch (maybeError) {\n            const error = (0, errorNormalize_js_1.ensureError)(maybeError);\n            try {\n                await Promise.all(this.internals.plugins.map(async (plugin) => plugin.startupDidFail?.({ error })));\n            }\n            catch (pluginError) {\n                this.logger.error(`startupDidFail hook threw: ${pluginError}`);\n            }\n            this.internals.state = {\n                phase: 'failed to start',\n                error,\n            };\n            throw error;\n        }\n        finally {\n            barrier.resolve();\n        }\n    }\n    maybeRegisterTerminationSignalHandlers(signals, startedInBackground) {\n        const toDisposeLast = [];\n        if (this.internals.stopOnTerminationSignals === false ||\n            (this.internals.stopOnTerminationSignals === undefined &&\n                !(utils_isnodelike_1.isNodeLike &&\n                    this.internals.nodeEnv !== 'test' &&\n                    !startedInBackground))) {\n            return toDisposeLast;\n        }\n        let receivedSignal = false;\n        const signalHandler = async (signal) => {\n            if (receivedSignal) {\n                return;\n            }\n            receivedSignal = true;\n            try {\n                await this.stop();\n            }\n            catch (e) {\n                this.logger.error(`stop() threw during ${signal} shutdown`);\n                this.logger.error(e);\n                process.exit(1);\n            }\n            process.kill(process.pid, signal);\n        };\n        signals.forEach((signal) => {\n            process.on(signal, signalHandler);\n            toDisposeLast.push(async () => {\n                process.removeListener(signal, signalHandler);\n            });\n        });\n        return toDisposeLast;\n    }\n    async _ensureStarted() {\n        while (true) {\n            switch (this.internals.state.phase) {\n                case 'initialized':\n                    throw new Error('You need to call `server.start()` before using your Apollo Server.');\n                case 'starting':\n                    await this.internals.state.barrier;\n                    break;\n                case 'failed to start':\n                    this.logStartupError(this.internals.state.error);\n                    throw new Error('This data graph is missing a valid configuration. More details may be available in the server logs.');\n                case 'started':\n                case 'draining':\n                    return this.internals.state;\n                case 'stopping':\n                case 'stopped':\n                    this.logger.warn('A GraphQL operation was received during server shutdown. The ' +\n                        'operation will fail. Consider draining the HTTP server on shutdown; ' +\n                        'see https://go.apollo.dev/s/drain for details.');\n                    throw new Error(`Cannot execute GraphQL operations ${this.internals.state.phase === 'stopping'\n                        ? 'while the server is stopping'\n                        : 'after the server has stopped'}.'`);\n                default:\n                    throw new UnreachableCaseError_js_1.UnreachableCaseError(this.internals.state);\n            }\n        }\n    }\n    assertStarted(expressionForError) {\n        if (this.internals.state.phase !== 'started' &&\n            this.internals.state.phase !== 'draining' &&\n            !(this.internals.state.phase === 'starting' &&\n                this.internals.state.startedInBackground)) {\n            throw new Error('You must `await server.start()` before calling `' +\n                expressionForError +\n                '`');\n        }\n    }\n    logStartupError(err) {\n        this.logger.error('An error occurred during Apollo Server startup. All GraphQL requests ' +\n            'will now fail. The startup error was: ' +\n            (err?.message || err));\n    }\n    static constructSchema(config) {\n        if (config.schema) {\n            return config.schema;\n        }\n        const { typeDefs, resolvers } = config;\n        const augmentedTypeDefs = Array.isArray(typeDefs) ? typeDefs : [typeDefs];\n        return (0, schema_1.makeExecutableSchema)({\n            typeDefs: augmentedTypeDefs,\n            resolvers,\n        });\n    }\n    static generateSchemaDerivedData(schema, providedDocumentStore) {\n        (0, graphql_1.assertValidSchema)(schema);\n        return {\n            schema,\n            documentStore: providedDocumentStore === undefined\n                ? new utils_keyvaluecache_1.InMemoryLRUCache()\n                : providedDocumentStore,\n            documentStoreKeyPrefix: providedDocumentStore\n                ? `${(0, computeCoreSchemaHash_js_1.computeCoreSchemaHash)((0, graphql_1.printSchema)(schema))}:`\n                : '',\n        };\n    }\n    async stop() {\n        switch (this.internals.state.phase) {\n            case 'initialized':\n            case 'starting':\n            case 'failed to start':\n                throw Error('apolloServer.stop() should only be called after `await apolloServer.start()` has succeeded');\n            case 'stopped':\n                if (this.internals.state.stopError) {\n                    throw this.internals.state.stopError;\n                }\n                return;\n            case 'stopping':\n            case 'draining': {\n                await this.internals.state.barrier;\n                const state = this.internals.state;\n                if (state.phase !== 'stopped') {\n                    throw Error(`Surprising post-stopping state ${state.phase}`);\n                }\n                if (state.stopError) {\n                    throw state.stopError;\n                }\n                return;\n            }\n            case 'started':\n                break;\n            default:\n                throw new UnreachableCaseError_js_1.UnreachableCaseError(this.internals.state);\n        }\n        const barrier = (0, resolvable_js_1.default)();\n        const { schemaManager, drainServers, landingPage, toDispose, toDisposeLast, } = this.internals.state;\n        this.internals.state = {\n            phase: 'draining',\n            barrier,\n            schemaManager,\n            landingPage,\n        };\n        try {\n            await drainServers?.();\n            this.internals.state = { phase: 'stopping', barrier };\n            await Promise.all([...toDispose].map((dispose) => dispose()));\n            await Promise.all([...toDisposeLast].map((dispose) => dispose()));\n        }\n        catch (stopError) {\n            this.internals.state = {\n                phase: 'stopped',\n                stopError: stopError,\n            };\n            barrier.resolve();\n            throw stopError;\n        }\n        this.internals.state = { phase: 'stopped', stopError: null };\n    }\n    async addDefaultPlugins() {\n        const { plugins, apolloConfig, nodeEnv, hideSchemaDetailsFromClientErrors, } = this.internals;\n        const isDev = nodeEnv !== 'production';\n        const alreadyHavePluginWithInternalId = (id) => plugins.some((p) => (0, internalPlugin_js_1.pluginIsInternal)(p) && p.__internal_plugin_id__ === id);\n        const pluginsByInternalID = new Map();\n        for (const p of plugins) {\n            if ((0, internalPlugin_js_1.pluginIsInternal)(p)) {\n                const id = p.__internal_plugin_id__;\n                if (!pluginsByInternalID.has(id)) {\n                    pluginsByInternalID.set(id, {\n                        sawDisabled: false,\n                        sawNonDisabled: false,\n                    });\n                }\n                const seen = pluginsByInternalID.get(id);\n                if (p.__is_disabled_plugin__) {\n                    seen.sawDisabled = true;\n                }\n                else {\n                    seen.sawNonDisabled = true;\n                }\n                if (seen.sawDisabled && seen.sawNonDisabled) {\n                    throw new Error(`You have tried to install both ApolloServerPlugin${id} and ` +\n                        `ApolloServerPlugin${id}Disabled in your server. Please choose ` +\n                        `whether or not you want to disable the feature and install the ` +\n                        `appropriate plugin for your use case.`);\n                }\n            }\n        }\n        {\n            if (!alreadyHavePluginWithInternalId('CacheControl')) {\n                const { ApolloServerPluginCacheControl } = await Promise.resolve().then(() => __importStar(__webpack_require__(/*! ./plugin/cacheControl/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/cacheControl/index.js\")));\n                plugins.push(ApolloServerPluginCacheControl());\n            }\n        }\n        {\n            const alreadyHavePlugin = alreadyHavePluginWithInternalId('UsageReporting');\n            if (!alreadyHavePlugin && apolloConfig.key) {\n                if (apolloConfig.graphRef) {\n                    const { ApolloServerPluginUsageReporting } = await Promise.resolve().then(() => __importStar(__webpack_require__(/*! ./plugin/usageReporting/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/index.js\")));\n                    plugins.unshift(ApolloServerPluginUsageReporting({\n                        __onlyIfSchemaIsNotSubgraph: true,\n                    }));\n                }\n                else {\n                    this.logger.warn('You have specified an Apollo key but have not specified a graph ref; usage ' +\n                        'reporting is disabled. To enable usage reporting, set the `APOLLO_GRAPH_REF` ' +\n                        'environment variable to `your-graph-id@your-graph-variant`. To disable this ' +\n                        'warning, install `ApolloServerPluginUsageReportingDisabled`.');\n                }\n            }\n        }\n        {\n            const alreadyHavePlugin = alreadyHavePluginWithInternalId('SchemaReporting');\n            const enabledViaEnvVar = process.env.APOLLO_SCHEMA_REPORTING === 'true';\n            if (!alreadyHavePlugin && enabledViaEnvVar) {\n                if (apolloConfig.key) {\n                    const { ApolloServerPluginSchemaReporting } = await Promise.resolve().then(() => __importStar(__webpack_require__(/*! ./plugin/schemaReporting/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaReporting/index.js\")));\n                    plugins.push(ApolloServerPluginSchemaReporting());\n                }\n                else {\n                    throw new Error(\"You've enabled schema reporting by setting the APOLLO_SCHEMA_REPORTING \" +\n                        'environment variable to true, but you also need to provide your ' +\n                        'Apollo API key, via the APOLLO_KEY environment ' +\n                        'variable or via `new ApolloServer({apollo: {key})');\n                }\n            }\n        }\n        {\n            const alreadyHavePlugin = alreadyHavePluginWithInternalId('InlineTrace');\n            if (!alreadyHavePlugin) {\n                const { ApolloServerPluginInlineTrace } = await Promise.resolve().then(() => __importStar(__webpack_require__(/*! ./plugin/inlineTrace/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/inlineTrace/index.js\")));\n                plugins.push(ApolloServerPluginInlineTrace({ __onlyIfSchemaIsSubgraph: true }));\n            }\n        }\n        const alreadyHavePlugin = alreadyHavePluginWithInternalId('LandingPageDisabled');\n        if (!alreadyHavePlugin) {\n            const { ApolloServerPluginLandingPageLocalDefault, ApolloServerPluginLandingPageProductionDefault, } = await Promise.resolve().then(() => __importStar(__webpack_require__(/*! ./plugin/landingPage/default/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/landingPage/default/index.js\")));\n            const plugin = isDev\n                ? ApolloServerPluginLandingPageLocalDefault()\n                : ApolloServerPluginLandingPageProductionDefault();\n            if (!isImplicitlyInstallablePlugin(plugin)) {\n                throw Error('default landing page plugin should be implicitly installable?');\n            }\n            plugin.__internal_installed_implicitly__ = true;\n            plugins.push(plugin);\n        }\n        {\n            const alreadyHavePlugin = alreadyHavePluginWithInternalId('DisableSuggestions');\n            if (hideSchemaDetailsFromClientErrors && !alreadyHavePlugin) {\n                const { ApolloServerPluginDisableSuggestions } = await Promise.resolve().then(() => __importStar(__webpack_require__(/*! ./plugin/disableSuggestions/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/disableSuggestions/index.js\")));\n                plugins.push(ApolloServerPluginDisableSuggestions());\n            }\n        }\n    }\n    addPlugin(plugin) {\n        if (this.internals.state.phase !== 'initialized') {\n            throw new Error(\"Can't add plugins after the server has started\");\n        }\n        this.internals.plugins.push(plugin);\n    }\n    async executeHTTPGraphQLRequest({ httpGraphQLRequest, context, }) {\n        try {\n            let runningServerState;\n            try {\n                runningServerState = await this._ensureStarted();\n            }\n            catch (error) {\n                return await this.errorResponse(error, httpGraphQLRequest);\n            }\n            if (runningServerState.landingPage &&\n                this.prefersHTML(httpGraphQLRequest)) {\n                let renderedHtml;\n                if (typeof runningServerState.landingPage.html === 'string') {\n                    renderedHtml = runningServerState.landingPage.html;\n                }\n                else {\n                    try {\n                        renderedHtml = await runningServerState.landingPage.html();\n                    }\n                    catch (maybeError) {\n                        const error = (0, errorNormalize_js_1.ensureError)(maybeError);\n                        this.logger.error(`Landing page \\`html\\` function threw: ${error}`);\n                        return await this.errorResponse(error, httpGraphQLRequest);\n                    }\n                }\n                return {\n                    headers: new HeaderMap_js_1.HeaderMap([['content-type', 'text/html']]),\n                    body: {\n                        kind: 'complete',\n                        string: renderedHtml,\n                    },\n                };\n            }\n            if (this.internals.csrfPreventionRequestHeaders) {\n                (0, preventCsrf_js_1.preventCsrf)(httpGraphQLRequest.headers, this.internals.csrfPreventionRequestHeaders);\n            }\n            let contextValue;\n            try {\n                contextValue = await context();\n            }\n            catch (maybeError) {\n                const error = (0, errorNormalize_js_1.ensureError)(maybeError);\n                try {\n                    await Promise.all(this.internals.plugins.map(async (plugin) => plugin.contextCreationDidFail?.({\n                        error,\n                    })));\n                }\n                catch (pluginError) {\n                    this.logger.error(`contextCreationDidFail hook threw: ${pluginError}`);\n                }\n                return await this.errorResponse((0, errorNormalize_js_1.ensureGraphQLError)(error, 'Context creation failed: '), httpGraphQLRequest);\n            }\n            return await (0, httpBatching_js_1.runPotentiallyBatchedHttpQuery)(this, httpGraphQLRequest, contextValue, runningServerState.schemaManager.getSchemaDerivedData(), this.internals);\n        }\n        catch (maybeError_) {\n            const maybeError = maybeError_;\n            if (maybeError instanceof graphql_1.GraphQLError &&\n                maybeError.extensions.code === index_js_1.ApolloServerErrorCode.BAD_REQUEST) {\n                try {\n                    await Promise.all(this.internals.plugins.map(async (plugin) => plugin.invalidRequestWasReceived?.({ error: maybeError })));\n                }\n                catch (pluginError) {\n                    this.logger.error(`invalidRequestWasReceived hook threw: ${pluginError}`);\n                }\n            }\n            return await this.errorResponse(maybeError, httpGraphQLRequest);\n        }\n    }\n    async errorResponse(error, requestHead) {\n        const { formattedErrors, httpFromErrors } = (0, errorNormalize_js_1.normalizeAndFormatErrors)([error], {\n            includeStacktraceInErrorResponses: this.internals.includeStacktraceInErrorResponses,\n            formatError: this.internals.formatError,\n        });\n        return {\n            status: httpFromErrors.status ?? 500,\n            headers: new HeaderMap_js_1.HeaderMap([\n                ...httpFromErrors.headers,\n                [\n                    'content-type',\n                    chooseContentTypeForSingleResultResponse(requestHead) ??\n                        exports.MEDIA_TYPES.APPLICATION_JSON,\n                ],\n            ]),\n            body: {\n                kind: 'complete',\n                string: await this.internals.stringifyResult({\n                    errors: formattedErrors,\n                }),\n            },\n        };\n    }\n    prefersHTML(request) {\n        const acceptHeader = request.headers.get('accept');\n        return (request.method === 'GET' &&\n            !!acceptHeader &&\n            new negotiator_1.default({\n                headers: { accept: acceptHeader },\n            }).mediaType([\n                exports.MEDIA_TYPES.APPLICATION_JSON,\n                exports.MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON,\n                exports.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL,\n                exports.MEDIA_TYPES.MULTIPART_MIXED_NO_DEFER_SPEC,\n                exports.MEDIA_TYPES.TEXT_HTML,\n            ]) === exports.MEDIA_TYPES.TEXT_HTML);\n    }\n    async executeOperation(request, options = {}) {\n        if (this.internals.state.phase === 'initialized') {\n            await this.start();\n        }\n        const schemaDerivedData = (await this._ensureStarted()).schemaManager.getSchemaDerivedData();\n        const graphQLRequest = {\n            ...request,\n            query: request.query && typeof request.query !== 'string'\n                ? (0, graphql_1.print)(request.query)\n                : request.query,\n        };\n        const response = await internalExecuteOperation({\n            server: this,\n            graphQLRequest,\n            internals: this.internals,\n            schemaDerivedData,\n            sharedResponseHTTPGraphQLHead: null,\n        }, options);\n        return response;\n    }\n}\nexports.ApolloServer = ApolloServer;\nasync function internalExecuteOperation({ server, graphQLRequest, internals, schemaDerivedData, sharedResponseHTTPGraphQLHead, }, options) {\n    const requestContext = {\n        logger: server.logger,\n        cache: server.cache,\n        schema: schemaDerivedData.schema,\n        request: graphQLRequest,\n        response: {\n            http: sharedResponseHTTPGraphQLHead ?? (0, runHttpQuery_js_1.newHTTPGraphQLHead)(),\n        },\n        contextValue: cloneObject(options?.contextValue ?? {}),\n        metrics: {},\n        overallCachePolicy: (0, cachePolicy_js_1.newCachePolicy)(),\n        requestIsBatched: sharedResponseHTTPGraphQLHead !== null,\n    };\n    try {\n        return await (0, requestPipeline_js_1.processGraphQLRequest)(schemaDerivedData, server, internals, requestContext);\n    }\n    catch (maybeError) {\n        const error = (0, errorNormalize_js_1.ensureError)(maybeError);\n        await Promise.all(internals.plugins.map(async (plugin) => plugin.unexpectedErrorProcessingRequest?.({\n            requestContext,\n            error,\n        })));\n        server.logger.error(`Unexpected error processing request: ${error}`);\n        throw new Error('Internal server error');\n    }\n}\nexports.internalExecuteOperation = internalExecuteOperation;\nfunction isImplicitlyInstallablePlugin(p) {\n    return '__internal_installed_implicitly__' in p;\n}\nexports.isImplicitlyInstallablePlugin = isImplicitlyInstallablePlugin;\nexports.MEDIA_TYPES = {\n    APPLICATION_JSON: 'application/json; charset=utf-8',\n    APPLICATION_JSON_GRAPHQL_CALLBACK: 'application/json; callbackSpec=1.0; charset=utf-8',\n    APPLICATION_GRAPHQL_RESPONSE_JSON: 'application/graphql-response+json; charset=utf-8',\n    MULTIPART_MIXED_NO_DEFER_SPEC: 'multipart/mixed',\n    MULTIPART_MIXED_EXPERIMENTAL: 'multipart/mixed; deferSpec=20220824',\n    TEXT_HTML: 'text/html',\n};\nfunction chooseContentTypeForSingleResultResponse(head) {\n    const acceptHeader = head.headers.get('accept');\n    if (!acceptHeader) {\n        return exports.MEDIA_TYPES.APPLICATION_JSON;\n    }\n    else {\n        const preferred = new negotiator_1.default({\n            headers: { accept: head.headers.get('accept') },\n        }).mediaType([\n            exports.MEDIA_TYPES.APPLICATION_JSON,\n            exports.MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON,\n            exports.MEDIA_TYPES.APPLICATION_JSON_GRAPHQL_CALLBACK,\n        ]);\n        if (preferred) {\n            return preferred;\n        }\n        else {\n            return null;\n        }\n    }\n}\nexports.chooseContentTypeForSingleResultResponse = chooseContentTypeForSingleResultResponse;\nfunction cloneObject(object) {\n    return Object.assign(Object.create(Object.getPrototypeOf(object)), object);\n}\n//# sourceMappingURL=ApolloServer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvQXBvbGxvU2VydmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9DQUFvQztBQUNuRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSwwQ0FBMEMsNEJBQTRCO0FBQ3RFLENBQUM7QUFDRDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGdEQUFnRCxHQUFHLG1CQUFtQixHQUFHLHFDQUFxQyxHQUFHLGdDQUFnQyxHQUFHLG9CQUFvQjtBQUN4SywyQkFBMkIsbUJBQU8sQ0FBQyw2RkFBMEI7QUFDN0QsOEJBQThCLG1CQUFPLENBQUMsbUdBQTZCO0FBQ25FLGlCQUFpQixtQkFBTyxDQUFDLHNGQUF1QjtBQUNoRCx3Q0FBd0MsbUJBQU8sQ0FBQywrRkFBdUI7QUFDdkUsa0JBQWtCLG1CQUFPLENBQUMsdURBQVM7QUFDbkMsbUNBQW1DLG1CQUFPLENBQUMsK0RBQVU7QUFDckQscUNBQXFDLG1CQUFPLENBQUMsNERBQVk7QUFDekQseUJBQXlCLG1CQUFPLENBQUMscUZBQWtCO0FBQ25ELG1DQUFtQyxtQkFBTyxDQUFDLHlHQUE0QjtBQUN2RSw0QkFBNEIsbUJBQU8sQ0FBQywyRkFBcUI7QUFDekQsbUJBQW1CLG1CQUFPLENBQUMsdUZBQW1CO0FBQzlDLDBCQUEwQixtQkFBTyxDQUFDLHVGQUFtQjtBQUNyRCw0QkFBNEIsbUJBQU8sQ0FBQywyRkFBcUI7QUFDekQseUJBQXlCLG1CQUFPLENBQUMscUZBQWtCO0FBQ25ELDZCQUE2QixtQkFBTyxDQUFDLDZGQUFzQjtBQUMzRCwwQkFBMEIsbUJBQU8sQ0FBQyx1RkFBbUI7QUFDckQsdUJBQXVCLG1CQUFPLENBQUMsNkZBQXNCO0FB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O0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzQkFBc0I7QUFDakQsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQiwwQ0FBMEMsc0ZBQXNGO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDZEQUE2RDtBQUM3RCxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxvRUFBb0UsTUFBTTtBQUMxRTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLG1CQUFtQjtBQUNuQix5Q0FBeUM7QUFDekMsMERBQTBELGtCQUFrQjtBQUM1RSwyRUFBMkU7QUFDM0U7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9DQUFvQztBQUMzRCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9BcG9sbG9TZXJ2ZXIuanM/OGQwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jaG9vc2VDb250ZW50VHlwZUZvclNpbmdsZVJlc3VsdFJlc3BvbnNlID0gZXhwb3J0cy5NRURJQV9UWVBFUyA9IGV4cG9ydHMuaXNJbXBsaWNpdGx5SW5zdGFsbGFibGVQbHVnaW4gPSBleHBvcnRzLmludGVybmFsRXhlY3V0ZU9wZXJhdGlvbiA9IGV4cG9ydHMuQXBvbGxvU2VydmVyID0gdm9pZCAwO1xuY29uc3QgdXRpbHNfaXNub2RlbGlrZV8xID0gcmVxdWlyZShcIkBhcG9sbG8vdXRpbHMuaXNub2RlbGlrZVwiKTtcbmNvbnN0IHV0aWxzX2tleXZhbHVlY2FjaGVfMSA9IHJlcXVpcmUoXCJAYXBvbGxvL3V0aWxzLmtleXZhbHVlY2FjaGVcIik7XG5jb25zdCBzY2hlbWFfMSA9IHJlcXVpcmUoXCJAZ3JhcGhxbC10b29scy9zY2hlbWFcIik7XG5jb25zdCByZXNvbHZhYmxlX2pzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvcmVzb2x2YWJsZS5qc1wiKSk7XG5jb25zdCBncmFwaHFsXzEgPSByZXF1aXJlKFwiZ3JhcGhxbFwiKTtcbmNvbnN0IGxvZ2xldmVsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImxvZ2xldmVsXCIpKTtcbmNvbnN0IG5lZ290aWF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibmVnb3RpYXRvclwiKSk7XG5jb25zdCBjYWNoZVBvbGljeV9qc18xID0gcmVxdWlyZShcIi4vY2FjaGVQb2xpY3kuanNcIik7XG5jb25zdCBkZXRlcm1pbmVBcG9sbG9Db25maWdfanNfMSA9IHJlcXVpcmUoXCIuL2RldGVybWluZUFwb2xsb0NvbmZpZy5qc1wiKTtcbmNvbnN0IGVycm9yTm9ybWFsaXplX2pzXzEgPSByZXF1aXJlKFwiLi9lcnJvck5vcm1hbGl6ZS5qc1wiKTtcbmNvbnN0IGluZGV4X2pzXzEgPSByZXF1aXJlKFwiLi9lcnJvcnMvaW5kZXguanNcIik7XG5jb25zdCBodHRwQmF0Y2hpbmdfanNfMSA9IHJlcXVpcmUoXCIuL2h0dHBCYXRjaGluZy5qc1wiKTtcbmNvbnN0IGludGVybmFsUGx1Z2luX2pzXzEgPSByZXF1aXJlKFwiLi9pbnRlcm5hbFBsdWdpbi5qc1wiKTtcbmNvbnN0IHByZXZlbnRDc3JmX2pzXzEgPSByZXF1aXJlKFwiLi9wcmV2ZW50Q3NyZi5qc1wiKTtcbmNvbnN0IHJlcXVlc3RQaXBlbGluZV9qc18xID0gcmVxdWlyZShcIi4vcmVxdWVzdFBpcGVsaW5lLmpzXCIpO1xuY29uc3QgcnVuSHR0cFF1ZXJ5X2pzXzEgPSByZXF1aXJlKFwiLi9ydW5IdHRwUXVlcnkuanNcIik7XG5jb25zdCBIZWFkZXJNYXBfanNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL0hlYWRlck1hcC5qc1wiKTtcbmNvbnN0IFVucmVhY2hhYmxlQ2FzZUVycm9yX2pzXzEgPSByZXF1aXJlKFwiLi91dGlscy9VbnJlYWNoYWJsZUNhc2VFcnJvci5qc1wiKTtcbmNvbnN0IGNvbXB1dGVDb3JlU2NoZW1hSGFzaF9qc18xID0gcmVxdWlyZShcIi4vdXRpbHMvY29tcHV0ZUNvcmVTY2hlbWFIYXNoLmpzXCIpO1xuY29uc3QgaXNEZWZpbmVkX2pzXzEgPSByZXF1aXJlKFwiLi91dGlscy9pc0RlZmluZWQuanNcIik7XG5jb25zdCBzY2hlbWFNYW5hZ2VyX2pzXzEgPSByZXF1aXJlKFwiLi91dGlscy9zY2hlbWFNYW5hZ2VyLmpzXCIpO1xuY29uc3QgaW5kZXhfanNfMiA9IHJlcXVpcmUoXCIuL3ZhbGlkYXRpb25SdWxlcy9pbmRleC5qc1wiKTtcbmZ1bmN0aW9uIGRlZmF1bHRMb2dnZXIoKSB7XG4gICAgY29uc3QgbG9nbGV2ZWxMb2dnZXIgPSBsb2dsZXZlbF8xLmRlZmF1bHQuZ2V0TG9nZ2VyKCdhcG9sbG8tc2VydmVyJyk7XG4gICAgbG9nbGV2ZWxMb2dnZXIuc2V0TGV2ZWwobG9nbGV2ZWxfMS5kZWZhdWx0LmxldmVscy5JTkZPKTtcbiAgICByZXR1cm4gbG9nbGV2ZWxMb2dnZXI7XG59XG5jbGFzcyBBcG9sbG9TZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBjb25zdCBub2RlRW52ID0gY29uZmlnLm5vZGVFbnYgPz8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPz8gJyc7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gY29uZmlnLmxvZ2dlciA/PyBkZWZhdWx0TG9nZ2VyKCk7XG4gICAgICAgIGNvbnN0IGFwb2xsb0NvbmZpZyA9ICgwLCBkZXRlcm1pbmVBcG9sbG9Db25maWdfanNfMS5kZXRlcm1pbmVBcG9sbG9Db25maWcpKGNvbmZpZy5hcG9sbG8sIHRoaXMubG9nZ2VyKTtcbiAgICAgICAgY29uc3QgaXNEZXYgPSBub2RlRW52ICE9PSAncHJvZHVjdGlvbic7XG4gICAgICAgIGlmIChjb25maWcuY2FjaGUgJiZcbiAgICAgICAgICAgIGNvbmZpZy5jYWNoZSAhPT0gJ2JvdW5kZWQnICYmXG4gICAgICAgICAgICB1dGlsc19rZXl2YWx1ZWNhY2hlXzEuUHJlZml4aW5nS2V5VmFsdWVDYWNoZS5wcmVmaXhlc0FyZVVubmVjZXNzYXJ5Rm9ySXNvbGF0aW9uKGNvbmZpZy5jYWNoZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGNhbm5vdCBwYXNzIGEgY2FjaGUgcmV0dXJuZWQgZnJvbSAnICtcbiAgICAgICAgICAgICAgICAnYFByZWZpeGluZ0tleVZhbHVlQ2FjaGUuY2FjaGVEYW5nZXJvdXNseURvZXNOb3ROZWVkUHJlZml4ZXNGb3JJc29sYXRpb25gJyArXG4gICAgICAgICAgICAgICAgJ3RvIGBuZXcgQXBvbGxvU2VydmVyKHsgY2FjaGUgfSlgLCBiZWNhdXNlIEFwb2xsbyBTZXJ2ZXIgbWF5IHVzZSBpdCBmb3IgJyArXG4gICAgICAgICAgICAgICAgJ211bHRpcGxlIGZlYXR1cmVzIHdob3NlIGNhY2hlIGtleXMgbXVzdCBiZSBkaXN0aW5jdCBmcm9tIGVhY2ggb3RoZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBjb25maWcuZ2F0ZXdheVxuICAgICAgICAgICAgP1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGhhc2U6ICdpbml0aWFsaXplZCcsXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYU1hbmFnZXI6IG5ldyBzY2hlbWFNYW5hZ2VyX2pzXzEuU2NoZW1hTWFuYWdlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYXRld2F5OiBjb25maWcuZ2F0ZXdheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwb2xsb0NvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYURlcml2ZWREYXRhUHJvdmlkZXI6IChzY2hlbWEpID0+IEFwb2xsb1NlcnZlci5nZW5lcmF0ZVNjaGVtYURlcml2ZWREYXRhKHNjaGVtYSwgY29uZmlnLmRvY3VtZW50U3RvcmUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyOiB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGhhc2U6ICdpbml0aWFsaXplZCcsXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYU1hbmFnZXI6IG5ldyBzY2hlbWFNYW5hZ2VyX2pzXzEuU2NoZW1hTWFuYWdlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlTY2hlbWE6IEFwb2xsb1NlcnZlci5jb25zdHJ1Y3RTY2hlbWEoY29uZmlnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYURlcml2ZWREYXRhUHJvdmlkZXI6IChzY2hlbWEpID0+IEFwb2xsb1NlcnZlci5nZW5lcmF0ZVNjaGVtYURlcml2ZWREYXRhKHNjaGVtYSwgY29uZmlnLmRvY3VtZW50U3RvcmUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyOiB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaW50cm9zcGVjdGlvbkVuYWJsZWQgPSBjb25maWcuaW50cm9zcGVjdGlvbiA/PyBpc0RldjtcbiAgICAgICAgY29uc3QgaGlkZVNjaGVtYURldGFpbHNGcm9tQ2xpZW50RXJyb3JzID0gY29uZmlnLmhpZGVTY2hlbWFEZXRhaWxzRnJvbUNsaWVudEVycm9ycyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy5jYWNoZSA9XG4gICAgICAgICAgICBjb25maWcuY2FjaGUgPT09IHVuZGVmaW5lZCB8fCBjb25maWcuY2FjaGUgPT09ICdib3VuZGVkJ1xuICAgICAgICAgICAgICAgID8gbmV3IHV0aWxzX2tleXZhbHVlY2FjaGVfMS5Jbk1lbW9yeUxSVUNhY2hlKClcbiAgICAgICAgICAgICAgICA6IGNvbmZpZy5jYWNoZTtcbiAgICAgICAgY29uc3QgbWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUgPSBjb25maWcubWF4UmVjdXJzaXZlU2VsZWN0aW9ucyA9PT0gdHJ1ZVxuICAgICAgICAgICAgPyBbKDAsIGluZGV4X2pzXzIuY3JlYXRlTWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUpKGluZGV4X2pzXzIuREVGQVVMVF9NQVhfUkVDVVJTSVZFX1NFTEVDVElPTlMpXVxuICAgICAgICAgICAgOiB0eXBlb2YgY29uZmlnLm1heFJlY3Vyc2l2ZVNlbGVjdGlvbnMgPT09ICdudW1iZXInXG4gICAgICAgICAgICAgICAgPyBbKDAsIGluZGV4X2pzXzIuY3JlYXRlTWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUpKGNvbmZpZy5tYXhSZWN1cnNpdmVTZWxlY3Rpb25zKV1cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uUnVsZXMgPSBbXG4gICAgICAgICAgICAuLi4oaW50cm9zcGVjdGlvbkVuYWJsZWQgPyBbXSA6IFtpbmRleF9qc18yLk5vSW50cm9zcGVjdGlvbl0pLFxuICAgICAgICAgICAgLi4ubWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUsXG4gICAgICAgIF07XG4gICAgICAgIGxldCBsYXRlclZhbGlkYXRpb25SdWxlcztcbiAgICAgICAgaWYgKG1heFJlY3Vyc2l2ZVNlbGVjdGlvbnNSdWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxhdGVyVmFsaWRhdGlvblJ1bGVzID0gY29uZmlnLnZhbGlkYXRpb25SdWxlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb25SdWxlcy5wdXNoKC4uLihjb25maWcudmFsaWRhdGlvblJ1bGVzID8/IFtdKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnRlcm5hbHMgPSB7XG4gICAgICAgICAgICBmb3JtYXRFcnJvcjogY29uZmlnLmZvcm1hdEVycm9yLFxuICAgICAgICAgICAgcm9vdFZhbHVlOiBjb25maWcucm9vdFZhbHVlLFxuICAgICAgICAgICAgdmFsaWRhdGlvblJ1bGVzLFxuICAgICAgICAgICAgbGF0ZXJWYWxpZGF0aW9uUnVsZXMsXG4gICAgICAgICAgICBoaWRlU2NoZW1hRGV0YWlsc0Zyb21DbGllbnRFcnJvcnMsXG4gICAgICAgICAgICBkYW5nZXJvdXNseURpc2FibGVWYWxpZGF0aW9uOiBjb25maWcuZGFuZ2Vyb3VzbHlEaXNhYmxlVmFsaWRhdGlvbiA/PyBmYWxzZSxcbiAgICAgICAgICAgIGZpZWxkUmVzb2x2ZXI6IGNvbmZpZy5maWVsZFJlc29sdmVyLFxuICAgICAgICAgICAgaW5jbHVkZVN0YWNrdHJhY2VJbkVycm9yUmVzcG9uc2VzOiBjb25maWcuaW5jbHVkZVN0YWNrdHJhY2VJbkVycm9yUmVzcG9uc2VzID8/XG4gICAgICAgICAgICAgICAgKG5vZGVFbnYgIT09ICdwcm9kdWN0aW9uJyAmJiBub2RlRW52ICE9PSAndGVzdCcpLFxuICAgICAgICAgICAgcGVyc2lzdGVkUXVlcmllczogY29uZmlnLnBlcnNpc3RlZFF1ZXJpZXMgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLnBlcnNpc3RlZFF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiBuZXcgdXRpbHNfa2V5dmFsdWVjYWNoZV8xLlByZWZpeGluZ0tleVZhbHVlQ2FjaGUoY29uZmlnLnBlcnNpc3RlZFF1ZXJpZXM/LmNhY2hlID8/IHRoaXMuY2FjaGUsIHJlcXVlc3RQaXBlbGluZV9qc18xLkFQUV9DQUNIRV9QUkVGSVgpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBub2RlRW52LFxuICAgICAgICAgICAgYWxsb3dCYXRjaGVkSHR0cFJlcXVlc3RzOiBjb25maWcuYWxsb3dCYXRjaGVkSHR0cFJlcXVlc3RzID8/IGZhbHNlLFxuICAgICAgICAgICAgYXBvbGxvQ29uZmlnLFxuICAgICAgICAgICAgcGx1Z2luczogY29uZmlnLnBsdWdpbnMgPz8gW10sXG4gICAgICAgICAgICBwYXJzZU9wdGlvbnM6IGNvbmZpZy5wYXJzZU9wdGlvbnMgPz8ge30sXG4gICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIHN0b3BPblRlcm1pbmF0aW9uU2lnbmFsczogY29uZmlnLnN0b3BPblRlcm1pbmF0aW9uU2lnbmFscyxcbiAgICAgICAgICAgIGdhdGV3YXlFeGVjdXRvcjogbnVsbCxcbiAgICAgICAgICAgIGNzcmZQcmV2ZW50aW9uUmVxdWVzdEhlYWRlcnM6IGNvbmZpZy5jc3JmUHJldmVudGlvbiA9PT0gdHJ1ZSB8fCBjb25maWcuY3NyZlByZXZlbnRpb24gPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gcHJldmVudENzcmZfanNfMS5yZWNvbW1lbmRlZENzcmZQcmV2ZW50aW9uUmVxdWVzdEhlYWRlcnNcbiAgICAgICAgICAgICAgICA6IGNvbmZpZy5jc3JmUHJldmVudGlvbiA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgIDogKGNvbmZpZy5jc3JmUHJldmVudGlvbi5yZXF1ZXN0SGVhZGVycyA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudENzcmZfanNfMS5yZWNvbW1lbmRlZENzcmZQcmV2ZW50aW9uUmVxdWVzdEhlYWRlcnMpLFxuICAgICAgICAgICAgc3RhdHVzNDAwRm9yVmFyaWFibGVDb2VyY2lvbkVycm9yczogY29uZmlnLnN0YXR1czQwMEZvclZhcmlhYmxlQ29lcmNpb25FcnJvcnMgPz8gZmFsc2UsXG4gICAgICAgICAgICBfX3Rlc3RpbmdfaW5jcmVtZW50YWxFeGVjdXRpb25SZXN1bHRzOiBjb25maWcuX190ZXN0aW5nX2luY3JlbWVudGFsRXhlY3V0aW9uUmVzdWx0cyxcbiAgICAgICAgICAgIHN0cmluZ2lmeVJlc3VsdDogY29uZmlnLnN0cmluZ2lmeVJlc3VsdCA/PyBydW5IdHRwUXVlcnlfanNfMS5wcmV0dHlKU09OU3RyaW5naWZ5LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0KGZhbHNlKTtcbiAgICB9XG4gICAgc3RhcnRJbkJhY2tncm91bmRIYW5kbGluZ1N0YXJ0dXBFcnJvcnNCeUxvZ2dpbmdBbmRGYWlsaW5nQWxsUmVxdWVzdHMoKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0KHRydWUpLmNhdGNoKChlKSA9PiB0aGlzLmxvZ1N0YXJ0dXBFcnJvcihlKSk7XG4gICAgfVxuICAgIGFzeW5jIF9zdGFydChzdGFydGVkSW5CYWNrZ3JvdW5kKSB7XG4gICAgICAgIGlmICh0aGlzLmludGVybmFscy5zdGF0ZS5waGFzZSAhPT0gJ2luaXRpYWxpemVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBZb3Ugc2hvdWxkIG9ubHkgY2FsbCAnc3RhcnQoKScgb3IgYCArXG4gICAgICAgICAgICAgICAgYCdzdGFydEluQmFja2dyb3VuZEhhbmRsaW5nU3RhcnR1cEVycm9yc0J5TG9nZ2luZ0FuZEZhaWxpbmdBbGxSZXF1ZXN0cygpJyBgICtcbiAgICAgICAgICAgICAgICBgb25jZSBvbiB5b3VyIEFwb2xsb1NlcnZlci5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2hlbWFNYW5hZ2VyID0gdGhpcy5pbnRlcm5hbHMuc3RhdGUuc2NoZW1hTWFuYWdlcjtcbiAgICAgICAgY29uc3QgYmFycmllciA9ICgwLCByZXNvbHZhYmxlX2pzXzEuZGVmYXVsdCkoKTtcbiAgICAgICAgdGhpcy5pbnRlcm5hbHMuc3RhdGUgPSB7XG4gICAgICAgICAgICBwaGFzZTogJ3N0YXJ0aW5nJyxcbiAgICAgICAgICAgIGJhcnJpZXIsXG4gICAgICAgICAgICBzY2hlbWFNYW5hZ2VyLFxuICAgICAgICAgICAgc3RhcnRlZEluQmFja2dyb3VuZCxcbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkRGVmYXVsdFBsdWdpbnMoKTtcbiAgICAgICAgICAgIGNvbnN0IHRvRGlzcG9zZSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgZXhlY3V0b3IgPSBhd2FpdCBzY2hlbWFNYW5hZ2VyLnN0YXJ0KCk7XG4gICAgICAgICAgICBpZiAoZXhlY3V0b3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVybmFscy5nYXRld2F5RXhlY3V0b3IgPSBleGVjdXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvRGlzcG9zZS5wdXNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzY2hlbWFNYW5hZ2VyLnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2NoZW1hRGVyaXZlZERhdGEgPSBzY2hlbWFNYW5hZ2VyLmdldFNjaGVtYURlcml2ZWREYXRhKCk7XG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0ge1xuICAgICAgICAgICAgICAgIGxvZ2dlcjogdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgY2FjaGU6IHRoaXMuY2FjaGUsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiBzY2hlbWFEZXJpdmVkRGF0YS5zY2hlbWEsXG4gICAgICAgICAgICAgICAgYXBvbGxvOiB0aGlzLmludGVybmFscy5hcG9sbG9Db25maWcsXG4gICAgICAgICAgICAgICAgc3RhcnRlZEluQmFja2dyb3VuZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCB0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnMgPSAoYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5pbnRlcm5hbHMucGx1Z2lucy5tYXAoYXN5bmMgKHBsdWdpbikgPT4gKHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJMaXN0ZW5lcjogcGx1Z2luLnNlcnZlcldpbGxTdGFydCAmJiAoYXdhaXQgcGx1Z2luLnNlcnZlcldpbGxTdGFydChzZXJ2aWNlKSksXG4gICAgICAgICAgICAgICAgaW5zdGFsbGVkSW1wbGljaXRseTogaXNJbXBsaWNpdGx5SW5zdGFsbGFibGVQbHVnaW4ocGx1Z2luKSAmJlxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uX19pbnRlcm5hbF9pbnN0YWxsZWRfaW1wbGljaXRseV9fLFxuICAgICAgICAgICAgfSkpKSkuZmlsdGVyKChtYXliZVRhZ2dlZFNlcnZlckxpc3RlbmVyKSA9PiB0eXBlb2YgbWF5YmVUYWdnZWRTZXJ2ZXJMaXN0ZW5lci5zZXJ2ZXJMaXN0ZW5lciA9PT0gJ29iamVjdCcpO1xuICAgICAgICAgICAgdGFnZ2VkU2VydmVyTGlzdGVuZXJzLmZvckVhY2goKHsgc2VydmVyTGlzdGVuZXI6IHsgc2NoZW1hRGlkTG9hZE9yVXBkYXRlIH0gfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzY2hlbWFEaWRMb2FkT3JVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hTWFuYWdlci5vblNjaGVtYUxvYWRPclVwZGF0ZShzY2hlbWFEaWRMb2FkT3JVcGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyV2lsbFN0b3BzID0gdGFnZ2VkU2VydmVyTGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgLm1hcCgobCkgPT4gbC5zZXJ2ZXJMaXN0ZW5lci5zZXJ2ZXJXaWxsU3RvcClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGlzRGVmaW5lZF9qc18xLmlzRGVmaW5lZCk7XG4gICAgICAgICAgICBpZiAoc2VydmVyV2lsbFN0b3BzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRvRGlzcG9zZS5wdXNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoc2VydmVyV2lsbFN0b3BzLm1hcCgoc2VydmVyV2lsbFN0b3ApID0+IHNlcnZlcldpbGxTdG9wKCkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRyYWluU2VydmVyQ2FsbGJhY2tzID0gdGFnZ2VkU2VydmVyTGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgLm1hcCgobCkgPT4gbC5zZXJ2ZXJMaXN0ZW5lci5kcmFpblNlcnZlcilcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGlzRGVmaW5lZF9qc18xLmlzRGVmaW5lZCk7XG4gICAgICAgICAgICBjb25zdCBkcmFpblNlcnZlcnMgPSBkcmFpblNlcnZlckNhbGxiYWNrcy5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZHJhaW5TZXJ2ZXJDYWxsYmFja3MubWFwKChkcmFpblNlcnZlcikgPT4gZHJhaW5TZXJ2ZXIoKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBsZXQgdGFnZ2VkU2VydmVyTGlzdGVuZXJzV2l0aFJlbmRlckxhbmRpbmdQYWdlID0gdGFnZ2VkU2VydmVyTGlzdGVuZXJzLmZpbHRlcigobCkgPT4gbC5zZXJ2ZXJMaXN0ZW5lci5yZW5kZXJMYW5kaW5nUGFnZSk7XG4gICAgICAgICAgICBpZiAodGFnZ2VkU2VydmVyTGlzdGVuZXJzV2l0aFJlbmRlckxhbmRpbmdQYWdlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnNXaXRoUmVuZGVyTGFuZGluZ1BhZ2UgPVxuICAgICAgICAgICAgICAgICAgICB0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnNXaXRoUmVuZGVyTGFuZGluZ1BhZ2UuZmlsdGVyKChsKSA9PiAhbC5pbnN0YWxsZWRJbXBsaWNpdGx5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBsYW5kaW5nUGFnZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGFnZ2VkU2VydmVyTGlzdGVuZXJzV2l0aFJlbmRlckxhbmRpbmdQYWdlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignT25seSBvbmUgcGx1Z2luIGNhbiBpbXBsZW1lbnQgcmVuZGVyTGFuZGluZ1BhZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnNXaXRoUmVuZGVyTGFuZGluZ1BhZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGFuZGluZ1BhZ2UgPVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnNXaXRoUmVuZGVyTGFuZGluZ1BhZ2VbMF0uc2VydmVyTGlzdGVuZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW5kZXJMYW5kaW5nUGFnZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdG9EaXNwb3NlTGFzdCA9IHRoaXMubWF5YmVSZWdpc3RlclRlcm1pbmF0aW9uU2lnbmFsSGFuZGxlcnMoWydTSUdJTlQnLCAnU0lHVEVSTSddLCBzdGFydGVkSW5CYWNrZ3JvdW5kKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxzLnN0YXRlID0ge1xuICAgICAgICAgICAgICAgIHBoYXNlOiAnc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgc2NoZW1hTWFuYWdlcixcbiAgICAgICAgICAgICAgICBkcmFpblNlcnZlcnMsXG4gICAgICAgICAgICAgICAgbGFuZGluZ1BhZ2UsXG4gICAgICAgICAgICAgICAgdG9EaXNwb3NlLFxuICAgICAgICAgICAgICAgIHRvRGlzcG9zZUxhc3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChtYXliZUVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9ICgwLCBlcnJvck5vcm1hbGl6ZV9qc18xLmVuc3VyZUVycm9yKShtYXliZUVycm9yKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5pbnRlcm5hbHMucGx1Z2lucy5tYXAoYXN5bmMgKHBsdWdpbikgPT4gcGx1Z2luLnN0YXJ0dXBEaWRGYWlsPy4oeyBlcnJvciB9KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKHBsdWdpbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYHN0YXJ0dXBEaWRGYWlsIGhvb2sgdGhyZXc6ICR7cGx1Z2luRXJyb3J9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmludGVybmFscy5zdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBwaGFzZTogJ2ZhaWxlZCB0byBzdGFydCcsXG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBiYXJyaWVyLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXliZVJlZ2lzdGVyVGVybWluYXRpb25TaWduYWxIYW5kbGVycyhzaWduYWxzLCBzdGFydGVkSW5CYWNrZ3JvdW5kKSB7XG4gICAgICAgIGNvbnN0IHRvRGlzcG9zZUxhc3QgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxzLnN0b3BPblRlcm1pbmF0aW9uU2lnbmFscyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICh0aGlzLmludGVybmFscy5zdG9wT25UZXJtaW5hdGlvblNpZ25hbHMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICEodXRpbHNfaXNub2RlbGlrZV8xLmlzTm9kZUxpa2UgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcm5hbHMubm9kZUVudiAhPT0gJ3Rlc3QnICYmXG4gICAgICAgICAgICAgICAgICAgICFzdGFydGVkSW5CYWNrZ3JvdW5kKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0b0Rpc3Bvc2VMYXN0O1xuICAgICAgICB9XG4gICAgICAgIGxldCByZWNlaXZlZFNpZ25hbCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBzaWduYWxIYW5kbGVyID0gYXN5bmMgKHNpZ25hbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlY2VpdmVkU2lnbmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVjZWl2ZWRTaWduYWwgPSB0cnVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYHN0b3AoKSB0aHJldyBkdXJpbmcgJHtzaWduYWx9IHNodXRkb3duYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvY2Vzcy5raWxsKHByb2Nlc3MucGlkLCBzaWduYWwpO1xuICAgICAgICB9O1xuICAgICAgICBzaWduYWxzLmZvckVhY2goKHNpZ25hbCkgPT4ge1xuICAgICAgICAgICAgcHJvY2Vzcy5vbihzaWduYWwsIHNpZ25hbEhhbmRsZXIpO1xuICAgICAgICAgICAgdG9EaXNwb3NlTGFzdC5wdXNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLnJlbW92ZUxpc3RlbmVyKHNpZ25hbCwgc2lnbmFsSGFuZGxlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0b0Rpc3Bvc2VMYXN0O1xuICAgIH1cbiAgICBhc3luYyBfZW5zdXJlU3RhcnRlZCgpIHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5pbnRlcm5hbHMuc3RhdGUucGhhc2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdpbml0aWFsaXplZCc6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdG8gY2FsbCBgc2VydmVyLnN0YXJ0KClgIGJlZm9yZSB1c2luZyB5b3VyIEFwb2xsbyBTZXJ2ZXIuJyk7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RhcnRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmludGVybmFscy5zdGF0ZS5iYXJyaWVyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmYWlsZWQgdG8gc3RhcnQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1N0YXJ0dXBFcnJvcih0aGlzLmludGVybmFscy5zdGF0ZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBkYXRhIGdyYXBoIGlzIG1pc3NpbmcgYSB2YWxpZCBjb25maWd1cmF0aW9uLiBNb3JlIGRldGFpbHMgbWF5IGJlIGF2YWlsYWJsZSBpbiB0aGUgc2VydmVyIGxvZ3MuJyk7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RhcnRlZCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZHJhaW5pbmcnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbHMuc3RhdGU7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RvcHBpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0b3BwZWQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdBIEdyYXBoUUwgb3BlcmF0aW9uIHdhcyByZWNlaXZlZCBkdXJpbmcgc2VydmVyIHNodXRkb3duLiBUaGUgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3BlcmF0aW9uIHdpbGwgZmFpbC4gQ29uc2lkZXIgZHJhaW5pbmcgdGhlIEhUVFAgc2VydmVyIG9uIHNodXRkb3duOyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdzZWUgaHR0cHM6Ly9nby5hcG9sbG8uZGV2L3MvZHJhaW4gZm9yIGRldGFpbHMuJyk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGV4ZWN1dGUgR3JhcGhRTCBvcGVyYXRpb25zICR7dGhpcy5pbnRlcm5hbHMuc3RhdGUucGhhc2UgPT09ICdzdG9wcGluZydcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ3doaWxlIHRoZSBzZXJ2ZXIgaXMgc3RvcHBpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdhZnRlciB0aGUgc2VydmVyIGhhcyBzdG9wcGVkJ30uJ2ApO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnJlYWNoYWJsZUNhc2VFcnJvcl9qc18xLlVucmVhY2hhYmxlQ2FzZUVycm9yKHRoaXMuaW50ZXJuYWxzLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3NlcnRTdGFydGVkKGV4cHJlc3Npb25Gb3JFcnJvcikge1xuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbHMuc3RhdGUucGhhc2UgIT09ICdzdGFydGVkJyAmJlxuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbHMuc3RhdGUucGhhc2UgIT09ICdkcmFpbmluZycgJiZcbiAgICAgICAgICAgICEodGhpcy5pbnRlcm5hbHMuc3RhdGUucGhhc2UgPT09ICdzdGFydGluZycgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmludGVybmFscy5zdGF0ZS5zdGFydGVkSW5CYWNrZ3JvdW5kKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBgYXdhaXQgc2VydmVyLnN0YXJ0KClgIGJlZm9yZSBjYWxsaW5nIGAnICtcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRm9yRXJyb3IgK1xuICAgICAgICAgICAgICAgICdgJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9nU3RhcnR1cEVycm9yKGVycikge1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcignQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIEFwb2xsbyBTZXJ2ZXIgc3RhcnR1cC4gQWxsIEdyYXBoUUwgcmVxdWVzdHMgJyArXG4gICAgICAgICAgICAnd2lsbCBub3cgZmFpbC4gVGhlIHN0YXJ0dXAgZXJyb3Igd2FzOiAnICtcbiAgICAgICAgICAgIChlcnI/Lm1lc3NhZ2UgfHwgZXJyKSk7XG4gICAgfVxuICAgIHN0YXRpYyBjb25zdHJ1Y3RTY2hlbWEoY29uZmlnKSB7XG4gICAgICAgIGlmIChjb25maWcuc2NoZW1hKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnLnNjaGVtYTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGVEZWZzLCByZXNvbHZlcnMgfSA9IGNvbmZpZztcbiAgICAgICAgY29uc3QgYXVnbWVudGVkVHlwZURlZnMgPSBBcnJheS5pc0FycmF5KHR5cGVEZWZzKSA/IHR5cGVEZWZzIDogW3R5cGVEZWZzXTtcbiAgICAgICAgcmV0dXJuICgwLCBzY2hlbWFfMS5tYWtlRXhlY3V0YWJsZVNjaGVtYSkoe1xuICAgICAgICAgICAgdHlwZURlZnM6IGF1Z21lbnRlZFR5cGVEZWZzLFxuICAgICAgICAgICAgcmVzb2x2ZXJzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdlbmVyYXRlU2NoZW1hRGVyaXZlZERhdGEoc2NoZW1hLCBwcm92aWRlZERvY3VtZW50U3RvcmUpIHtcbiAgICAgICAgKDAsIGdyYXBocWxfMS5hc3NlcnRWYWxpZFNjaGVtYSkoc2NoZW1hKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNjaGVtYSxcbiAgICAgICAgICAgIGRvY3VtZW50U3RvcmU6IHByb3ZpZGVkRG9jdW1lbnRTdG9yZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBuZXcgdXRpbHNfa2V5dmFsdWVjYWNoZV8xLkluTWVtb3J5TFJVQ2FjaGUoKVxuICAgICAgICAgICAgICAgIDogcHJvdmlkZWREb2N1bWVudFN0b3JlLFxuICAgICAgICAgICAgZG9jdW1lbnRTdG9yZUtleVByZWZpeDogcHJvdmlkZWREb2N1bWVudFN0b3JlXG4gICAgICAgICAgICAgICAgPyBgJHsoMCwgY29tcHV0ZUNvcmVTY2hlbWFIYXNoX2pzXzEuY29tcHV0ZUNvcmVTY2hlbWFIYXNoKSgoMCwgZ3JhcGhxbF8xLnByaW50U2NoZW1hKShzY2hlbWEpKX06YFxuICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5pbnRlcm5hbHMuc3RhdGUucGhhc2UpIHtcbiAgICAgICAgICAgIGNhc2UgJ2luaXRpYWxpemVkJzpcbiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0aW5nJzpcbiAgICAgICAgICAgIGNhc2UgJ2ZhaWxlZCB0byBzdGFydCc6XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2Fwb2xsb1NlcnZlci5zdG9wKCkgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGFmdGVyIGBhd2FpdCBhcG9sbG9TZXJ2ZXIuc3RhcnQoKWAgaGFzIHN1Y2NlZWRlZCcpO1xuICAgICAgICAgICAgY2FzZSAnc3RvcHBlZCc6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxzLnN0YXRlLnN0b3BFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmludGVybmFscy5zdGF0ZS5zdG9wRXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgJ3N0b3BwaW5nJzpcbiAgICAgICAgICAgIGNhc2UgJ2RyYWluaW5nJzoge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaW50ZXJuYWxzLnN0YXRlLmJhcnJpZXI7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmludGVybmFscy5zdGF0ZTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUucGhhc2UgIT09ICdzdG9wcGVkJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU3VycHJpc2luZyBwb3N0LXN0b3BwaW5nIHN0YXRlICR7c3RhdGUucGhhc2V9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zdG9wRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc3RhdGUuc3RvcEVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdzdGFydGVkJzpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVucmVhY2hhYmxlQ2FzZUVycm9yX2pzXzEuVW5yZWFjaGFibGVDYXNlRXJyb3IodGhpcy5pbnRlcm5hbHMuc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJhcnJpZXIgPSAoMCwgcmVzb2x2YWJsZV9qc18xLmRlZmF1bHQpKCk7XG4gICAgICAgIGNvbnN0IHsgc2NoZW1hTWFuYWdlciwgZHJhaW5TZXJ2ZXJzLCBsYW5kaW5nUGFnZSwgdG9EaXNwb3NlLCB0b0Rpc3Bvc2VMYXN0LCB9ID0gdGhpcy5pbnRlcm5hbHMuc3RhdGU7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxzLnN0YXRlID0ge1xuICAgICAgICAgICAgcGhhc2U6ICdkcmFpbmluZycsXG4gICAgICAgICAgICBiYXJyaWVyLFxuICAgICAgICAgICAgc2NoZW1hTWFuYWdlcixcbiAgICAgICAgICAgIGxhbmRpbmdQYWdlLFxuICAgICAgICB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZHJhaW5TZXJ2ZXJzPy4oKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxzLnN0YXRlID0geyBwaGFzZTogJ3N0b3BwaW5nJywgYmFycmllciB9O1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoWy4uLnRvRGlzcG9zZV0ubWFwKChkaXNwb3NlKSA9PiBkaXNwb3NlKCkpKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi50b0Rpc3Bvc2VMYXN0XS5tYXAoKGRpc3Bvc2UpID0+IGRpc3Bvc2UoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChzdG9wRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxzLnN0YXRlID0ge1xuICAgICAgICAgICAgICAgIHBoYXNlOiAnc3RvcHBlZCcsXG4gICAgICAgICAgICAgICAgc3RvcEVycm9yOiBzdG9wRXJyb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmFycmllci5yZXNvbHZlKCk7XG4gICAgICAgICAgICB0aHJvdyBzdG9wRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnRlcm5hbHMuc3RhdGUgPSB7IHBoYXNlOiAnc3RvcHBlZCcsIHN0b3BFcnJvcjogbnVsbCB9O1xuICAgIH1cbiAgICBhc3luYyBhZGREZWZhdWx0UGx1Z2lucygpIHtcbiAgICAgICAgY29uc3QgeyBwbHVnaW5zLCBhcG9sbG9Db25maWcsIG5vZGVFbnYsIGhpZGVTY2hlbWFEZXRhaWxzRnJvbUNsaWVudEVycm9ycywgfSA9IHRoaXMuaW50ZXJuYWxzO1xuICAgICAgICBjb25zdCBpc0RldiA9IG5vZGVFbnYgIT09ICdwcm9kdWN0aW9uJztcbiAgICAgICAgY29uc3QgYWxyZWFkeUhhdmVQbHVnaW5XaXRoSW50ZXJuYWxJZCA9IChpZCkgPT4gcGx1Z2lucy5zb21lKChwKSA9PiAoMCwgaW50ZXJuYWxQbHVnaW5fanNfMS5wbHVnaW5Jc0ludGVybmFsKShwKSAmJiBwLl9faW50ZXJuYWxfcGx1Z2luX2lkX18gPT09IGlkKTtcbiAgICAgICAgY29uc3QgcGx1Z2luc0J5SW50ZXJuYWxJRCA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHBsdWdpbnMpIHtcbiAgICAgICAgICAgIGlmICgoMCwgaW50ZXJuYWxQbHVnaW5fanNfMS5wbHVnaW5Jc0ludGVybmFsKShwKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gcC5fX2ludGVybmFsX3BsdWdpbl9pZF9fO1xuICAgICAgICAgICAgICAgIGlmICghcGx1Z2luc0J5SW50ZXJuYWxJRC5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbnNCeUludGVybmFsSUQuc2V0KGlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXdEaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXdOb25EaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzZWVuID0gcGx1Z2luc0J5SW50ZXJuYWxJRC5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIGlmIChwLl9faXNfZGlzYWJsZWRfcGx1Z2luX18pIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vlbi5zYXdEaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWVuLnNhd05vbkRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlZW4uc2F3RGlzYWJsZWQgJiYgc2Vlbi5zYXdOb25EaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFlvdSBoYXZlIHRyaWVkIHRvIGluc3RhbGwgYm90aCBBcG9sbG9TZXJ2ZXJQbHVnaW4ke2lkfSBhbmQgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgQXBvbGxvU2VydmVyUGx1Z2luJHtpZH1EaXNhYmxlZCBpbiB5b3VyIHNlcnZlci4gUGxlYXNlIGNob29zZSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3aGV0aGVyIG9yIG5vdCB5b3Ugd2FudCB0byBkaXNhYmxlIHRoZSBmZWF0dXJlIGFuZCBpbnN0YWxsIHRoZSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBhcHByb3ByaWF0ZSBwbHVnaW4gZm9yIHlvdXIgdXNlIGNhc2UuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghYWxyZWFkeUhhdmVQbHVnaW5XaXRoSW50ZXJuYWxJZCgnQ2FjaGVDb250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IEFwb2xsb1NlcnZlclBsdWdpbkNhY2hlQ29udHJvbCB9ID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiBfX2ltcG9ydFN0YXIocmVxdWlyZSgnLi9wbHVnaW4vY2FjaGVDb250cm9sL2luZGV4LmpzJykpKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5zLnB1c2goQXBvbGxvU2VydmVyUGx1Z2luQ2FjaGVDb250cm9sKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGFscmVhZHlIYXZlUGx1Z2luID0gYWxyZWFkeUhhdmVQbHVnaW5XaXRoSW50ZXJuYWxJZCgnVXNhZ2VSZXBvcnRpbmcnKTtcbiAgICAgICAgICAgIGlmICghYWxyZWFkeUhhdmVQbHVnaW4gJiYgYXBvbGxvQ29uZmlnLmtleSkge1xuICAgICAgICAgICAgICAgIGlmIChhcG9sbG9Db25maWcuZ3JhcGhSZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZyB9ID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiBfX2ltcG9ydFN0YXIocmVxdWlyZSgnLi9wbHVnaW4vdXNhZ2VSZXBvcnRpbmcvaW5kZXguanMnKSkpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zLnVuc2hpZnQoQXBvbGxvU2VydmVyUGx1Z2luVXNhZ2VSZXBvcnRpbmcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgX19vbmx5SWZTY2hlbWFJc05vdFN1YmdyYXBoOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdZb3UgaGF2ZSBzcGVjaWZpZWQgYW4gQXBvbGxvIGtleSBidXQgaGF2ZSBub3Qgc3BlY2lmaWVkIGEgZ3JhcGggcmVmOyB1c2FnZSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXBvcnRpbmcgaXMgZGlzYWJsZWQuIFRvIGVuYWJsZSB1c2FnZSByZXBvcnRpbmcsIHNldCB0aGUgYEFQT0xMT19HUkFQSF9SRUZgICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2Vudmlyb25tZW50IHZhcmlhYmxlIHRvIGB5b3VyLWdyYXBoLWlkQHlvdXItZ3JhcGgtdmFyaWFudGAuIFRvIGRpc2FibGUgdGhpcyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3YXJuaW5nLCBpbnN0YWxsIGBBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZ0Rpc2FibGVkYC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYWxyZWFkeUhhdmVQbHVnaW4gPSBhbHJlYWR5SGF2ZVBsdWdpbldpdGhJbnRlcm5hbElkKCdTY2hlbWFSZXBvcnRpbmcnKTtcbiAgICAgICAgICAgIGNvbnN0IGVuYWJsZWRWaWFFbnZWYXIgPSBwcm9jZXNzLmVudi5BUE9MTE9fU0NIRU1BX1JFUE9SVElORyA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgaWYgKCFhbHJlYWR5SGF2ZVBsdWdpbiAmJiBlbmFibGVkVmlhRW52VmFyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFwb2xsb0NvbmZpZy5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBBcG9sbG9TZXJ2ZXJQbHVnaW5TY2hlbWFSZXBvcnRpbmcgfSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gX19pbXBvcnRTdGFyKHJlcXVpcmUoJy4vcGx1Z2luL3NjaGVtYVJlcG9ydGluZy9pbmRleC5qcycpKSk7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbnMucHVzaChBcG9sbG9TZXJ2ZXJQbHVnaW5TY2hlbWFSZXBvcnRpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UndmUgZW5hYmxlZCBzY2hlbWEgcmVwb3J0aW5nIGJ5IHNldHRpbmcgdGhlIEFQT0xMT19TQ0hFTUFfUkVQT1JUSU5HIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdlbnZpcm9ubWVudCB2YXJpYWJsZSB0byB0cnVlLCBidXQgeW91IGFsc28gbmVlZCB0byBwcm92aWRlIHlvdXIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnQXBvbGxvIEFQSSBrZXksIHZpYSB0aGUgQVBPTExPX0tFWSBlbnZpcm9ubWVudCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YXJpYWJsZSBvciB2aWEgYG5ldyBBcG9sbG9TZXJ2ZXIoe2Fwb2xsbzoge2tleX0pJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGFscmVhZHlIYXZlUGx1Z2luID0gYWxyZWFkeUhhdmVQbHVnaW5XaXRoSW50ZXJuYWxJZCgnSW5saW5lVHJhY2UnKTtcbiAgICAgICAgICAgIGlmICghYWxyZWFkeUhhdmVQbHVnaW4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IEFwb2xsb1NlcnZlclBsdWdpbklubGluZVRyYWNlIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IF9faW1wb3J0U3RhcihyZXF1aXJlKCcuL3BsdWdpbi9pbmxpbmVUcmFjZS9pbmRleC5qcycpKSk7XG4gICAgICAgICAgICAgICAgcGx1Z2lucy5wdXNoKEFwb2xsb1NlcnZlclBsdWdpbklubGluZVRyYWNlKHsgX19vbmx5SWZTY2hlbWFJc1N1YmdyYXBoOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbHJlYWR5SGF2ZVBsdWdpbiA9IGFscmVhZHlIYXZlUGx1Z2luV2l0aEludGVybmFsSWQoJ0xhbmRpbmdQYWdlRGlzYWJsZWQnKTtcbiAgICAgICAgaWYgKCFhbHJlYWR5SGF2ZVBsdWdpbikge1xuICAgICAgICAgICAgY29uc3QgeyBBcG9sbG9TZXJ2ZXJQbHVnaW5MYW5kaW5nUGFnZUxvY2FsRGVmYXVsdCwgQXBvbGxvU2VydmVyUGx1Z2luTGFuZGluZ1BhZ2VQcm9kdWN0aW9uRGVmYXVsdCwgfSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gX19pbXBvcnRTdGFyKHJlcXVpcmUoJy4vcGx1Z2luL2xhbmRpbmdQYWdlL2RlZmF1bHQvaW5kZXguanMnKSkpO1xuICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gaXNEZXZcbiAgICAgICAgICAgICAgICA/IEFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlTG9jYWxEZWZhdWx0KClcbiAgICAgICAgICAgICAgICA6IEFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlUHJvZHVjdGlvbkRlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICghaXNJbXBsaWNpdGx5SW5zdGFsbGFibGVQbHVnaW4ocGx1Z2luKSkge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdkZWZhdWx0IGxhbmRpbmcgcGFnZSBwbHVnaW4gc2hvdWxkIGJlIGltcGxpY2l0bHkgaW5zdGFsbGFibGU/Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbHVnaW4uX19pbnRlcm5hbF9pbnN0YWxsZWRfaW1wbGljaXRseV9fID0gdHJ1ZTtcbiAgICAgICAgICAgIHBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGFscmVhZHlIYXZlUGx1Z2luID0gYWxyZWFkeUhhdmVQbHVnaW5XaXRoSW50ZXJuYWxJZCgnRGlzYWJsZVN1Z2dlc3Rpb25zJyk7XG4gICAgICAgICAgICBpZiAoaGlkZVNjaGVtYURldGFpbHNGcm9tQ2xpZW50RXJyb3JzICYmICFhbHJlYWR5SGF2ZVBsdWdpbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgQXBvbGxvU2VydmVyUGx1Z2luRGlzYWJsZVN1Z2dlc3Rpb25zIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IF9faW1wb3J0U3RhcihyZXF1aXJlKCcuL3BsdWdpbi9kaXNhYmxlU3VnZ2VzdGlvbnMvaW5kZXguanMnKSkpO1xuICAgICAgICAgICAgICAgIHBsdWdpbnMucHVzaChBcG9sbG9TZXJ2ZXJQbHVnaW5EaXNhYmxlU3VnZ2VzdGlvbnMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkUGx1Z2luKHBsdWdpbikge1xuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbHMuc3RhdGUucGhhc2UgIT09ICdpbml0aWFsaXplZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGFkZCBwbHVnaW5zIGFmdGVyIHRoZSBzZXJ2ZXIgaGFzIHN0YXJ0ZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnRlcm5hbHMucGx1Z2lucy5wdXNoKHBsdWdpbik7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGVIVFRQR3JhcGhRTFJlcXVlc3QoeyBodHRwR3JhcGhRTFJlcXVlc3QsIGNvbnRleHQsIH0pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBydW5uaW5nU2VydmVyU3RhdGU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJ1bm5pbmdTZXJ2ZXJTdGF0ZSA9IGF3YWl0IHRoaXMuX2Vuc3VyZVN0YXJ0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmVycm9yUmVzcG9uc2UoZXJyb3IsIGh0dHBHcmFwaFFMUmVxdWVzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVubmluZ1NlcnZlclN0YXRlLmxhbmRpbmdQYWdlICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wcmVmZXJzSFRNTChodHRwR3JhcGhRTFJlcXVlc3QpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlbmRlcmVkSHRtbDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJ1bm5pbmdTZXJ2ZXJTdGF0ZS5sYW5kaW5nUGFnZS5odG1sID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlZEh0bWwgPSBydW5uaW5nU2VydmVyU3RhdGUubGFuZGluZ1BhZ2UuaHRtbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlZEh0bWwgPSBhd2FpdCBydW5uaW5nU2VydmVyU3RhdGUubGFuZGluZ1BhZ2UuaHRtbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChtYXliZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9ICgwLCBlcnJvck5vcm1hbGl6ZV9qc18xLmVuc3VyZUVycm9yKShtYXliZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBMYW5kaW5nIHBhZ2UgXFxgaHRtbFxcYCBmdW5jdGlvbiB0aHJldzogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmVycm9yUmVzcG9uc2UoZXJyb3IsIGh0dHBHcmFwaFFMUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlck1hcF9qc18xLkhlYWRlck1hcChbWydjb250ZW50LXR5cGUnLCAndGV4dC9odG1sJ11dKSxcbiAgICAgICAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgICAgICAgICAga2luZDogJ2NvbXBsZXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZzogcmVuZGVyZWRIdG1sLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlcm5hbHMuY3NyZlByZXZlbnRpb25SZXF1ZXN0SGVhZGVycykge1xuICAgICAgICAgICAgICAgICgwLCBwcmV2ZW50Q3NyZl9qc18xLnByZXZlbnRDc3JmKShodHRwR3JhcGhRTFJlcXVlc3QuaGVhZGVycywgdGhpcy5pbnRlcm5hbHMuY3NyZlByZXZlbnRpb25SZXF1ZXN0SGVhZGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY29udGV4dFZhbHVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb250ZXh0VmFsdWUgPSBhd2FpdCBjb250ZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAobWF5YmVFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gKDAsIGVycm9yTm9ybWFsaXplX2pzXzEuZW5zdXJlRXJyb3IpKG1heWJlRXJyb3IpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaW50ZXJuYWxzLnBsdWdpbnMubWFwKGFzeW5jIChwbHVnaW4pID0+IHBsdWdpbi5jb250ZXh0Q3JlYXRpb25EaWRGYWlsPy4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChwbHVnaW5FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgY29udGV4dENyZWF0aW9uRGlkRmFpbCBob29rIHRocmV3OiAke3BsdWdpbkVycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5lcnJvclJlc3BvbnNlKCgwLCBlcnJvck5vcm1hbGl6ZV9qc18xLmVuc3VyZUdyYXBoUUxFcnJvcikoZXJyb3IsICdDb250ZXh0IGNyZWF0aW9uIGZhaWxlZDogJyksIGh0dHBHcmFwaFFMUmVxdWVzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgKDAsIGh0dHBCYXRjaGluZ19qc18xLnJ1blBvdGVudGlhbGx5QmF0Y2hlZEh0dHBRdWVyeSkodGhpcywgaHR0cEdyYXBoUUxSZXF1ZXN0LCBjb250ZXh0VmFsdWUsIHJ1bm5pbmdTZXJ2ZXJTdGF0ZS5zY2hlbWFNYW5hZ2VyLmdldFNjaGVtYURlcml2ZWREYXRhKCksIHRoaXMuaW50ZXJuYWxzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAobWF5YmVFcnJvcl8pIHtcbiAgICAgICAgICAgIGNvbnN0IG1heWJlRXJyb3IgPSBtYXliZUVycm9yXztcbiAgICAgICAgICAgIGlmIChtYXliZUVycm9yIGluc3RhbmNlb2YgZ3JhcGhxbF8xLkdyYXBoUUxFcnJvciAmJlxuICAgICAgICAgICAgICAgIG1heWJlRXJyb3IuZXh0ZW5zaW9ucy5jb2RlID09PSBpbmRleF9qc18xLkFwb2xsb1NlcnZlckVycm9yQ29kZS5CQURfUkVRVUVTVCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaW50ZXJuYWxzLnBsdWdpbnMubWFwKGFzeW5jIChwbHVnaW4pID0+IHBsdWdpbi5pbnZhbGlkUmVxdWVzdFdhc1JlY2VpdmVkPy4oeyBlcnJvcjogbWF5YmVFcnJvciB9KSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAocGx1Z2luRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYGludmFsaWRSZXF1ZXN0V2FzUmVjZWl2ZWQgaG9vayB0aHJldzogJHtwbHVnaW5FcnJvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5lcnJvclJlc3BvbnNlKG1heWJlRXJyb3IsIGh0dHBHcmFwaFFMUmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZXJyb3JSZXNwb25zZShlcnJvciwgcmVxdWVzdEhlYWQpIHtcbiAgICAgICAgY29uc3QgeyBmb3JtYXR0ZWRFcnJvcnMsIGh0dHBGcm9tRXJyb3JzIH0gPSAoMCwgZXJyb3JOb3JtYWxpemVfanNfMS5ub3JtYWxpemVBbmRGb3JtYXRFcnJvcnMpKFtlcnJvcl0sIHtcbiAgICAgICAgICAgIGluY2x1ZGVTdGFja3RyYWNlSW5FcnJvclJlc3BvbnNlczogdGhpcy5pbnRlcm5hbHMuaW5jbHVkZVN0YWNrdHJhY2VJbkVycm9yUmVzcG9uc2VzLFxuICAgICAgICAgICAgZm9ybWF0RXJyb3I6IHRoaXMuaW50ZXJuYWxzLmZvcm1hdEVycm9yLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogaHR0cEZyb21FcnJvcnMuc3RhdHVzID8/IDUwMCxcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJNYXBfanNfMS5IZWFkZXJNYXAoW1xuICAgICAgICAgICAgICAgIC4uLmh0dHBGcm9tRXJyb3JzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJyxcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NlQ29udGVudFR5cGVGb3JTaW5nbGVSZXN1bHRSZXNwb25zZShyZXF1ZXN0SGVhZCkgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMuTUVESUFfVFlQRVMuQVBQTElDQVRJT05fSlNPTixcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAga2luZDogJ2NvbXBsZXRlJyxcbiAgICAgICAgICAgICAgICBzdHJpbmc6IGF3YWl0IHRoaXMuaW50ZXJuYWxzLnN0cmluZ2lmeVJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yczogZm9ybWF0dGVkRXJyb3JzLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJlZmVyc0hUTUwocmVxdWVzdCkge1xuICAgICAgICBjb25zdCBhY2NlcHRIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhY2NlcHQnKTtcbiAgICAgICAgcmV0dXJuIChyZXF1ZXN0Lm1ldGhvZCA9PT0gJ0dFVCcgJiZcbiAgICAgICAgICAgICEhYWNjZXB0SGVhZGVyICYmXG4gICAgICAgICAgICBuZXcgbmVnb3RpYXRvcl8xLmRlZmF1bHQoe1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgYWNjZXB0OiBhY2NlcHRIZWFkZXIgfSxcbiAgICAgICAgICAgIH0pLm1lZGlhVHlwZShbXG4gICAgICAgICAgICAgICAgZXhwb3J0cy5NRURJQV9UWVBFUy5BUFBMSUNBVElPTl9KU09OLFxuICAgICAgICAgICAgICAgIGV4cG9ydHMuTUVESUFfVFlQRVMuQVBQTElDQVRJT05fR1JBUEhRTF9SRVNQT05TRV9KU09OLFxuICAgICAgICAgICAgICAgIGV4cG9ydHMuTUVESUFfVFlQRVMuTVVMVElQQVJUX01JWEVEX0VYUEVSSU1FTlRBTCxcbiAgICAgICAgICAgICAgICBleHBvcnRzLk1FRElBX1RZUEVTLk1VTFRJUEFSVF9NSVhFRF9OT19ERUZFUl9TUEVDLFxuICAgICAgICAgICAgICAgIGV4cG9ydHMuTUVESUFfVFlQRVMuVEVYVF9IVE1MLFxuICAgICAgICAgICAgXSkgPT09IGV4cG9ydHMuTUVESUFfVFlQRVMuVEVYVF9IVE1MKTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZU9wZXJhdGlvbihyZXF1ZXN0LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxzLnN0YXRlLnBoYXNlID09PSAnaW5pdGlhbGl6ZWQnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NoZW1hRGVyaXZlZERhdGEgPSAoYXdhaXQgdGhpcy5fZW5zdXJlU3RhcnRlZCgpKS5zY2hlbWFNYW5hZ2VyLmdldFNjaGVtYURlcml2ZWREYXRhKCk7XG4gICAgICAgIGNvbnN0IGdyYXBoUUxSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIHF1ZXJ5OiByZXF1ZXN0LnF1ZXJ5ICYmIHR5cGVvZiByZXF1ZXN0LnF1ZXJ5ICE9PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gKDAsIGdyYXBocWxfMS5wcmludCkocmVxdWVzdC5xdWVyeSlcbiAgICAgICAgICAgICAgICA6IHJlcXVlc3QucXVlcnksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW50ZXJuYWxFeGVjdXRlT3BlcmF0aW9uKHtcbiAgICAgICAgICAgIHNlcnZlcjogdGhpcyxcbiAgICAgICAgICAgIGdyYXBoUUxSZXF1ZXN0LFxuICAgICAgICAgICAgaW50ZXJuYWxzOiB0aGlzLmludGVybmFscyxcbiAgICAgICAgICAgIHNjaGVtYURlcml2ZWREYXRhLFxuICAgICAgICAgICAgc2hhcmVkUmVzcG9uc2VIVFRQR3JhcGhRTEhlYWQ6IG51bGwsXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxufVxuZXhwb3J0cy5BcG9sbG9TZXJ2ZXIgPSBBcG9sbG9TZXJ2ZXI7XG5hc3luYyBmdW5jdGlvbiBpbnRlcm5hbEV4ZWN1dGVPcGVyYXRpb24oeyBzZXJ2ZXIsIGdyYXBoUUxSZXF1ZXN0LCBpbnRlcm5hbHMsIHNjaGVtYURlcml2ZWREYXRhLCBzaGFyZWRSZXNwb25zZUhUVFBHcmFwaFFMSGVhZCwgfSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJlcXVlc3RDb250ZXh0ID0ge1xuICAgICAgICBsb2dnZXI6IHNlcnZlci5sb2dnZXIsXG4gICAgICAgIGNhY2hlOiBzZXJ2ZXIuY2FjaGUsXG4gICAgICAgIHNjaGVtYTogc2NoZW1hRGVyaXZlZERhdGEuc2NoZW1hLFxuICAgICAgICByZXF1ZXN0OiBncmFwaFFMUmVxdWVzdCxcbiAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgIGh0dHA6IHNoYXJlZFJlc3BvbnNlSFRUUEdyYXBoUUxIZWFkID8/ICgwLCBydW5IdHRwUXVlcnlfanNfMS5uZXdIVFRQR3JhcGhRTEhlYWQpKCksXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRleHRWYWx1ZTogY2xvbmVPYmplY3Qob3B0aW9ucz8uY29udGV4dFZhbHVlID8/IHt9KSxcbiAgICAgICAgbWV0cmljczoge30sXG4gICAgICAgIG92ZXJhbGxDYWNoZVBvbGljeTogKDAsIGNhY2hlUG9saWN5X2pzXzEubmV3Q2FjaGVQb2xpY3kpKCksXG4gICAgICAgIHJlcXVlc3RJc0JhdGNoZWQ6IHNoYXJlZFJlc3BvbnNlSFRUUEdyYXBoUUxIZWFkICE9PSBudWxsLFxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0ICgwLCByZXF1ZXN0UGlwZWxpbmVfanNfMS5wcm9jZXNzR3JhcGhRTFJlcXVlc3QpKHNjaGVtYURlcml2ZWREYXRhLCBzZXJ2ZXIsIGludGVybmFscywgcmVxdWVzdENvbnRleHQpO1xuICAgIH1cbiAgICBjYXRjaCAobWF5YmVFcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvciA9ICgwLCBlcnJvck5vcm1hbGl6ZV9qc18xLmVuc3VyZUVycm9yKShtYXliZUVycm9yKTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaW50ZXJuYWxzLnBsdWdpbnMubWFwKGFzeW5jIChwbHVnaW4pID0+IHBsdWdpbi51bmV4cGVjdGVkRXJyb3JQcm9jZXNzaW5nUmVxdWVzdD8uKHtcbiAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgIH0pKSk7XG4gICAgICAgIHNlcnZlci5sb2dnZXIuZXJyb3IoYFVuZXhwZWN0ZWQgZXJyb3IgcHJvY2Vzc2luZyByZXF1ZXN0OiAke2Vycm9yfWApO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIHNlcnZlciBlcnJvcicpO1xuICAgIH1cbn1cbmV4cG9ydHMuaW50ZXJuYWxFeGVjdXRlT3BlcmF0aW9uID0gaW50ZXJuYWxFeGVjdXRlT3BlcmF0aW9uO1xuZnVuY3Rpb24gaXNJbXBsaWNpdGx5SW5zdGFsbGFibGVQbHVnaW4ocCkge1xuICAgIHJldHVybiAnX19pbnRlcm5hbF9pbnN0YWxsZWRfaW1wbGljaXRseV9fJyBpbiBwO1xufVxuZXhwb3J0cy5pc0ltcGxpY2l0bHlJbnN0YWxsYWJsZVBsdWdpbiA9IGlzSW1wbGljaXRseUluc3RhbGxhYmxlUGx1Z2luO1xuZXhwb3J0cy5NRURJQV9UWVBFUyA9IHtcbiAgICBBUFBMSUNBVElPTl9KU09OOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgQVBQTElDQVRJT05fSlNPTl9HUkFQSFFMX0NBTExCQUNLOiAnYXBwbGljYXRpb24vanNvbjsgY2FsbGJhY2tTcGVjPTEuMDsgY2hhcnNldD11dGYtOCcsXG4gICAgQVBQTElDQVRJT05fR1JBUEhRTF9SRVNQT05TRV9KU09OOiAnYXBwbGljYXRpb24vZ3JhcGhxbC1yZXNwb25zZStqc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICBNVUxUSVBBUlRfTUlYRURfTk9fREVGRVJfU1BFQzogJ211bHRpcGFydC9taXhlZCcsXG4gICAgTVVMVElQQVJUX01JWEVEX0VYUEVSSU1FTlRBTDogJ211bHRpcGFydC9taXhlZDsgZGVmZXJTcGVjPTIwMjIwODI0JyxcbiAgICBURVhUX0hUTUw6ICd0ZXh0L2h0bWwnLFxufTtcbmZ1bmN0aW9uIGNob29zZUNvbnRlbnRUeXBlRm9yU2luZ2xlUmVzdWx0UmVzcG9uc2UoaGVhZCkge1xuICAgIGNvbnN0IGFjY2VwdEhlYWRlciA9IGhlYWQuaGVhZGVycy5nZXQoJ2FjY2VwdCcpO1xuICAgIGlmICghYWNjZXB0SGVhZGVyKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk1FRElBX1RZUEVTLkFQUExJQ0FUSU9OX0pTT047XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBwcmVmZXJyZWQgPSBuZXcgbmVnb3RpYXRvcl8xLmRlZmF1bHQoe1xuICAgICAgICAgICAgaGVhZGVyczogeyBhY2NlcHQ6IGhlYWQuaGVhZGVycy5nZXQoJ2FjY2VwdCcpIH0sXG4gICAgICAgIH0pLm1lZGlhVHlwZShbXG4gICAgICAgICAgICBleHBvcnRzLk1FRElBX1RZUEVTLkFQUExJQ0FUSU9OX0pTT04sXG4gICAgICAgICAgICBleHBvcnRzLk1FRElBX1RZUEVTLkFQUExJQ0FUSU9OX0dSQVBIUUxfUkVTUE9OU0VfSlNPTixcbiAgICAgICAgICAgIGV4cG9ydHMuTUVESUFfVFlQRVMuQVBQTElDQVRJT05fSlNPTl9HUkFQSFFMX0NBTExCQUNLLFxuICAgICAgICBdKTtcbiAgICAgICAgaWYgKHByZWZlcnJlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHByZWZlcnJlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5jaG9vc2VDb250ZW50VHlwZUZvclNpbmdsZVJlc3VsdFJlc3BvbnNlID0gY2hvb3NlQ29udGVudFR5cGVGb3JTaW5nbGVSZXN1bHRSZXNwb25zZTtcbmZ1bmN0aW9uIGNsb25lT2JqZWN0KG9iamVjdCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCkpLCBvYmplY3QpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXBvbGxvU2VydmVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/ApolloServer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/cachePolicy.js":
/*!*************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/cachePolicy.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.newCachePolicy = void 0;\nfunction newCachePolicy() {\n    return {\n        maxAge: undefined,\n        scope: undefined,\n        restrict(hint) {\n            if (hint.maxAge !== undefined &&\n                (this.maxAge === undefined || hint.maxAge < this.maxAge)) {\n                this.maxAge = hint.maxAge;\n            }\n            if (hint.scope !== undefined && this.scope !== 'PRIVATE') {\n                this.scope = hint.scope;\n            }\n        },\n        replace(hint) {\n            if (hint.maxAge !== undefined) {\n                this.maxAge = hint.maxAge;\n            }\n            if (hint.scope !== undefined) {\n                this.scope = hint.scope;\n            }\n        },\n        policyIfCacheable() {\n            if (this.maxAge === undefined || this.maxAge === 0) {\n                return null;\n            }\n            return { maxAge: this.maxAge, scope: this.scope ?? 'PUBLIC' };\n        },\n    };\n}\nexports.newCachePolicy = newCachePolicy;\n//# sourceMappingURL=cachePolicy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvY2FjaGVQb2xpY3kuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvY2FjaGVQb2xpY3kuanM/NzllYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubmV3Q2FjaGVQb2xpY3kgPSB2b2lkIDA7XG5mdW5jdGlvbiBuZXdDYWNoZVBvbGljeSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBtYXhBZ2U6IHVuZGVmaW5lZCxcbiAgICAgICAgc2NvcGU6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVzdHJpY3QoaGludCkge1xuICAgICAgICAgICAgaWYgKGhpbnQubWF4QWdlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAodGhpcy5tYXhBZ2UgPT09IHVuZGVmaW5lZCB8fCBoaW50Lm1heEFnZSA8IHRoaXMubWF4QWdlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4QWdlID0gaGludC5tYXhBZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGludC5zY29wZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc2NvcGUgIT09ICdQUklWQVRFJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NvcGUgPSBoaW50LnNjb3BlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXBsYWNlKGhpbnQpIHtcbiAgICAgICAgICAgIGlmIChoaW50Lm1heEFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhBZ2UgPSBoaW50Lm1heEFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoaW50LnNjb3BlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3BlID0gaGludC5zY29wZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcG9saWN5SWZDYWNoZWFibGUoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXhBZ2UgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm1heEFnZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgbWF4QWdlOiB0aGlzLm1heEFnZSwgc2NvcGU6IHRoaXMuc2NvcGUgPz8gJ1BVQkxJQycgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0cy5uZXdDYWNoZVBvbGljeSA9IG5ld0NhY2hlUG9saWN5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGVQb2xpY3kuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/cachePolicy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/determineApolloConfig.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/determineApolloConfig.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.determineApolloConfig = void 0;\nconst utils_createhash_1 = __webpack_require__(/*! @apollo/utils.createhash */ \"(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\");\nfunction determineApolloConfig(input, logger) {\n    const apolloConfig = {};\n    const { APOLLO_KEY, APOLLO_GRAPH_REF, APOLLO_GRAPH_ID, APOLLO_GRAPH_VARIANT, } = process.env;\n    if (input?.key) {\n        apolloConfig.key = input.key.trim();\n    }\n    else if (APOLLO_KEY) {\n        apolloConfig.key = APOLLO_KEY.trim();\n    }\n    if ((input?.key ?? APOLLO_KEY) !== apolloConfig.key) {\n        logger.warn('The provided API key has unexpected leading or trailing whitespace. ' +\n            'Apollo Server will trim the key value before use.');\n    }\n    if (apolloConfig.key) {\n        assertValidHeaderValue(apolloConfig.key);\n    }\n    if (apolloConfig.key) {\n        apolloConfig.keyHash = (0, utils_createhash_1.createHash)('sha512')\n            .update(apolloConfig.key)\n            .digest('hex');\n    }\n    if (input?.graphRef) {\n        apolloConfig.graphRef = input.graphRef;\n    }\n    else if (APOLLO_GRAPH_REF) {\n        apolloConfig.graphRef = APOLLO_GRAPH_REF;\n    }\n    const graphId = input?.graphId ?? APOLLO_GRAPH_ID;\n    const graphVariant = input?.graphVariant ?? APOLLO_GRAPH_VARIANT;\n    if (apolloConfig.graphRef) {\n        if (graphId) {\n            throw new Error('Cannot specify both graph ref and graph ID. Please use ' +\n                '`apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph ID.');\n        }\n        if (graphVariant) {\n            throw new Error('Cannot specify both graph ref and graph variant. Please use ' +\n                '`apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph variant.');\n        }\n    }\n    else if (graphId) {\n        apolloConfig.graphRef = graphVariant\n            ? `${graphId}@${graphVariant}`\n            : graphId;\n    }\n    return apolloConfig;\n}\nexports.determineApolloConfig = determineApolloConfig;\nfunction assertValidHeaderValue(value) {\n    const invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/g;\n    if (invalidHeaderCharRegex.test(value)) {\n        const invalidChars = value.match(invalidHeaderCharRegex);\n        throw new Error(`The API key provided to Apollo Server contains characters which are invalid as HTTP header values. The following characters found in the key are invalid: ${invalidChars.join(', ')}. Valid header values may only contain ASCII visible characters. If you think there is an issue with your key, please contact Apollo support.`);\n    }\n}\n//# sourceMappingURL=determineApolloConfig.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvZGV0ZXJtaW5lQXBvbGxvQ29uZmlnLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDZCQUE2QjtBQUM3QiwyQkFBMkIsbUJBQU8sQ0FBQyw2RkFBMEI7QUFDN0Q7QUFDQTtBQUNBLFlBQVksdUVBQXVFO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUSxHQUFHLGFBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxTEFBcUwsd0JBQXdCO0FBQzdNO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvZGV0ZXJtaW5lQXBvbGxvQ29uZmlnLmpzPzE4M2EiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRldGVybWluZUFwb2xsb0NvbmZpZyA9IHZvaWQgMDtcbmNvbnN0IHV0aWxzX2NyZWF0ZWhhc2hfMSA9IHJlcXVpcmUoXCJAYXBvbGxvL3V0aWxzLmNyZWF0ZWhhc2hcIik7XG5mdW5jdGlvbiBkZXRlcm1pbmVBcG9sbG9Db25maWcoaW5wdXQsIGxvZ2dlcikge1xuICAgIGNvbnN0IGFwb2xsb0NvbmZpZyA9IHt9O1xuICAgIGNvbnN0IHsgQVBPTExPX0tFWSwgQVBPTExPX0dSQVBIX1JFRiwgQVBPTExPX0dSQVBIX0lELCBBUE9MTE9fR1JBUEhfVkFSSUFOVCwgfSA9IHByb2Nlc3MuZW52O1xuICAgIGlmIChpbnB1dD8ua2V5KSB7XG4gICAgICAgIGFwb2xsb0NvbmZpZy5rZXkgPSBpbnB1dC5rZXkudHJpbSgpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBUE9MTE9fS0VZKSB7XG4gICAgICAgIGFwb2xsb0NvbmZpZy5rZXkgPSBBUE9MTE9fS0VZLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKChpbnB1dD8ua2V5ID8/IEFQT0xMT19LRVkpICE9PSBhcG9sbG9Db25maWcua2V5KSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdUaGUgcHJvdmlkZWQgQVBJIGtleSBoYXMgdW5leHBlY3RlZCBsZWFkaW5nIG9yIHRyYWlsaW5nIHdoaXRlc3BhY2UuICcgK1xuICAgICAgICAgICAgJ0Fwb2xsbyBTZXJ2ZXIgd2lsbCB0cmltIHRoZSBrZXkgdmFsdWUgYmVmb3JlIHVzZS4nKTtcbiAgICB9XG4gICAgaWYgKGFwb2xsb0NvbmZpZy5rZXkpIHtcbiAgICAgICAgYXNzZXJ0VmFsaWRIZWFkZXJWYWx1ZShhcG9sbG9Db25maWcua2V5KTtcbiAgICB9XG4gICAgaWYgKGFwb2xsb0NvbmZpZy5rZXkpIHtcbiAgICAgICAgYXBvbGxvQ29uZmlnLmtleUhhc2ggPSAoMCwgdXRpbHNfY3JlYXRlaGFzaF8xLmNyZWF0ZUhhc2gpKCdzaGE1MTInKVxuICAgICAgICAgICAgLnVwZGF0ZShhcG9sbG9Db25maWcua2V5KVxuICAgICAgICAgICAgLmRpZ2VzdCgnaGV4Jyk7XG4gICAgfVxuICAgIGlmIChpbnB1dD8uZ3JhcGhSZWYpIHtcbiAgICAgICAgYXBvbGxvQ29uZmlnLmdyYXBoUmVmID0gaW5wdXQuZ3JhcGhSZWY7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFQT0xMT19HUkFQSF9SRUYpIHtcbiAgICAgICAgYXBvbGxvQ29uZmlnLmdyYXBoUmVmID0gQVBPTExPX0dSQVBIX1JFRjtcbiAgICB9XG4gICAgY29uc3QgZ3JhcGhJZCA9IGlucHV0Py5ncmFwaElkID8/IEFQT0xMT19HUkFQSF9JRDtcbiAgICBjb25zdCBncmFwaFZhcmlhbnQgPSBpbnB1dD8uZ3JhcGhWYXJpYW50ID8/IEFQT0xMT19HUkFQSF9WQVJJQU5UO1xuICAgIGlmIChhcG9sbG9Db25maWcuZ3JhcGhSZWYpIHtcbiAgICAgICAgaWYgKGdyYXBoSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNwZWNpZnkgYm90aCBncmFwaCByZWYgYW5kIGdyYXBoIElELiBQbGVhc2UgdXNlICcgK1xuICAgICAgICAgICAgICAgICdgYXBvbGxvLmdyYXBoUmVmYCBvciBgQVBPTExPX0dSQVBIX1JFRmAgd2l0aG91dCBhbHNvIHNldHRpbmcgdGhlIGdyYXBoIElELicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmFwaFZhcmlhbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNwZWNpZnkgYm90aCBncmFwaCByZWYgYW5kIGdyYXBoIHZhcmlhbnQuIFBsZWFzZSB1c2UgJyArXG4gICAgICAgICAgICAgICAgJ2BhcG9sbG8uZ3JhcGhSZWZgIG9yIGBBUE9MTE9fR1JBUEhfUkVGYCB3aXRob3V0IGFsc28gc2V0dGluZyB0aGUgZ3JhcGggdmFyaWFudC4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChncmFwaElkKSB7XG4gICAgICAgIGFwb2xsb0NvbmZpZy5ncmFwaFJlZiA9IGdyYXBoVmFyaWFudFxuICAgICAgICAgICAgPyBgJHtncmFwaElkfUAke2dyYXBoVmFyaWFudH1gXG4gICAgICAgICAgICA6IGdyYXBoSWQ7XG4gICAgfVxuICAgIHJldHVybiBhcG9sbG9Db25maWc7XG59XG5leHBvcnRzLmRldGVybWluZUFwb2xsb0NvbmZpZyA9IGRldGVybWluZUFwb2xsb0NvbmZpZztcbmZ1bmN0aW9uIGFzc2VydFZhbGlkSGVhZGVyVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBpbnZhbGlkSGVhZGVyQ2hhclJlZ2V4ID0gL1teXFx0XFx4MjAtXFx4N2VcXHg4MC1cXHhmZl0vZztcbiAgICBpZiAoaW52YWxpZEhlYWRlckNoYXJSZWdleC50ZXN0KHZhbHVlKSkge1xuICAgICAgICBjb25zdCBpbnZhbGlkQ2hhcnMgPSB2YWx1ZS5tYXRjaChpbnZhbGlkSGVhZGVyQ2hhclJlZ2V4KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgQVBJIGtleSBwcm92aWRlZCB0byBBcG9sbG8gU2VydmVyIGNvbnRhaW5zIGNoYXJhY3RlcnMgd2hpY2ggYXJlIGludmFsaWQgYXMgSFRUUCBoZWFkZXIgdmFsdWVzLiBUaGUgZm9sbG93aW5nIGNoYXJhY3RlcnMgZm91bmQgaW4gdGhlIGtleSBhcmUgaW52YWxpZDogJHtpbnZhbGlkQ2hhcnMuam9pbignLCAnKX0uIFZhbGlkIGhlYWRlciB2YWx1ZXMgbWF5IG9ubHkgY29udGFpbiBBU0NJSSB2aXNpYmxlIGNoYXJhY3RlcnMuIElmIHlvdSB0aGluayB0aGVyZSBpcyBhbiBpc3N1ZSB3aXRoIHlvdXIga2V5LCBwbGVhc2UgY29udGFjdCBBcG9sbG8gc3VwcG9ydC5gKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZXRlcm1pbmVBcG9sbG9Db25maWcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/determineApolloConfig.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/errorNormalize.js":
/*!****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/errorNormalize.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ensureGraphQLError = exports.ensureError = exports.normalizeAndFormatErrors = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst index_js_1 = __webpack_require__(/*! ./errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/errors/index.js\");\nconst runHttpQuery_js_1 = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/runHttpQuery.js\");\nconst HeaderMap_js_1 = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js\");\nfunction normalizeAndFormatErrors(errors, options = {}) {\n    const formatError = options.formatError ?? ((error) => error);\n    const httpFromErrors = (0, runHttpQuery_js_1.newHTTPGraphQLHead)();\n    return {\n        httpFromErrors,\n        formattedErrors: errors.map((error) => {\n            try {\n                return formatError(enrichError(error), error);\n            }\n            catch (formattingError) {\n                if (options.includeStacktraceInErrorResponses) {\n                    return enrichError(formattingError);\n                }\n                else {\n                    return {\n                        message: 'Internal server error',\n                        extensions: { code: index_js_1.ApolloServerErrorCode.INTERNAL_SERVER_ERROR },\n                    };\n                }\n            }\n        }),\n    };\n    function enrichError(maybeError) {\n        const graphqlError = ensureGraphQLError(maybeError);\n        const extensions = {\n            ...graphqlError.extensions,\n            code: graphqlError.extensions.code ??\n                index_js_1.ApolloServerErrorCode.INTERNAL_SERVER_ERROR,\n        };\n        if (isPartialHTTPGraphQLHead(extensions.http)) {\n            (0, runHttpQuery_js_1.mergeHTTPGraphQLHead)(httpFromErrors, {\n                headers: new HeaderMap_js_1.HeaderMap(),\n                ...extensions.http,\n            });\n            delete extensions.http;\n        }\n        if (options.includeStacktraceInErrorResponses) {\n            extensions.stacktrace = graphqlError.stack?.split('\\n');\n        }\n        return { ...graphqlError.toJSON(), extensions };\n    }\n}\nexports.normalizeAndFormatErrors = normalizeAndFormatErrors;\nfunction ensureError(maybeError) {\n    return maybeError instanceof Error\n        ? maybeError\n        : new graphql_1.GraphQLError('Unexpected error value: ' + String(maybeError));\n}\nexports.ensureError = ensureError;\nfunction ensureGraphQLError(maybeError, messagePrefixIfNotGraphQLError = '') {\n    const error = ensureError(maybeError);\n    return error instanceof graphql_1.GraphQLError\n        ? error\n        : new graphql_1.GraphQLError(messagePrefixIfNotGraphQLError + error.message, {\n            originalError: error,\n        });\n}\nexports.ensureGraphQLError = ensureGraphQLError;\nfunction isPartialHTTPGraphQLHead(x) {\n    return (!!x &&\n        typeof x === 'object' &&\n        (!('status' in x) || typeof x.status === 'number') &&\n        (!('headers' in x) || x.headers instanceof Map));\n}\n//# sourceMappingURL=errorNormalize.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvZXJyb3JOb3JtYWxpemUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsMEJBQTBCLEdBQUcsbUJBQW1CLEdBQUcsZ0NBQWdDO0FBQ25GLGtCQUFrQixtQkFBTyxDQUFDLHVEQUFTO0FBQ25DLG1CQUFtQixtQkFBTyxDQUFDLHVGQUFtQjtBQUM5QywwQkFBMEIsbUJBQU8sQ0FBQyx1RkFBbUI7QUFDckQsdUJBQXVCLG1CQUFPLENBQUMsNkZBQXNCO0FBQ3JELHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsOERBQThEO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9lcnJvck5vcm1hbGl6ZS5qcz9jMTRhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5lbnN1cmVHcmFwaFFMRXJyb3IgPSBleHBvcnRzLmVuc3VyZUVycm9yID0gZXhwb3J0cy5ub3JtYWxpemVBbmRGb3JtYXRFcnJvcnMgPSB2b2lkIDA7XG5jb25zdCBncmFwaHFsXzEgPSByZXF1aXJlKFwiZ3JhcGhxbFwiKTtcbmNvbnN0IGluZGV4X2pzXzEgPSByZXF1aXJlKFwiLi9lcnJvcnMvaW5kZXguanNcIik7XG5jb25zdCBydW5IdHRwUXVlcnlfanNfMSA9IHJlcXVpcmUoXCIuL3J1bkh0dHBRdWVyeS5qc1wiKTtcbmNvbnN0IEhlYWRlck1hcF9qc18xID0gcmVxdWlyZShcIi4vdXRpbHMvSGVhZGVyTWFwLmpzXCIpO1xuZnVuY3Rpb24gbm9ybWFsaXplQW5kRm9ybWF0RXJyb3JzKGVycm9ycywgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZm9ybWF0RXJyb3IgPSBvcHRpb25zLmZvcm1hdEVycm9yID8/ICgoZXJyb3IpID0+IGVycm9yKTtcbiAgICBjb25zdCBodHRwRnJvbUVycm9ycyA9ICgwLCBydW5IdHRwUXVlcnlfanNfMS5uZXdIVFRQR3JhcGhRTEhlYWQpKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaHR0cEZyb21FcnJvcnMsXG4gICAgICAgIGZvcm1hdHRlZEVycm9yczogZXJyb3JzLm1hcCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKGVucmljaEVycm9yKGVycm9yKSwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGZvcm1hdHRpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVTdGFja3RyYWNlSW5FcnJvclJlc3BvbnNlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW5yaWNoRXJyb3IoZm9ybWF0dGluZ0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHsgY29kZTogaW5kZXhfanNfMS5BcG9sbG9TZXJ2ZXJFcnJvckNvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SIH0sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGVucmljaEVycm9yKG1heWJlRXJyb3IpIHtcbiAgICAgICAgY29uc3QgZ3JhcGhxbEVycm9yID0gZW5zdXJlR3JhcGhRTEVycm9yKG1heWJlRXJyb3IpO1xuICAgICAgICBjb25zdCBleHRlbnNpb25zID0ge1xuICAgICAgICAgICAgLi4uZ3JhcGhxbEVycm9yLmV4dGVuc2lvbnMsXG4gICAgICAgICAgICBjb2RlOiBncmFwaHFsRXJyb3IuZXh0ZW5zaW9ucy5jb2RlID8/XG4gICAgICAgICAgICAgICAgaW5kZXhfanNfMS5BcG9sbG9TZXJ2ZXJFcnJvckNvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoaXNQYXJ0aWFsSFRUUEdyYXBoUUxIZWFkKGV4dGVuc2lvbnMuaHR0cCkpIHtcbiAgICAgICAgICAgICgwLCBydW5IdHRwUXVlcnlfanNfMS5tZXJnZUhUVFBHcmFwaFFMSGVhZCkoaHR0cEZyb21FcnJvcnMsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVyTWFwX2pzXzEuSGVhZGVyTWFwKCksXG4gICAgICAgICAgICAgICAgLi4uZXh0ZW5zaW9ucy5odHRwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgZXh0ZW5zaW9ucy5odHRwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVTdGFja3RyYWNlSW5FcnJvclJlc3BvbnNlcykge1xuICAgICAgICAgICAgZXh0ZW5zaW9ucy5zdGFja3RyYWNlID0gZ3JhcGhxbEVycm9yLnN0YWNrPy5zcGxpdCgnXFxuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4uZ3JhcGhxbEVycm9yLnRvSlNPTigpLCBleHRlbnNpb25zIH07XG4gICAgfVxufVxuZXhwb3J0cy5ub3JtYWxpemVBbmRGb3JtYXRFcnJvcnMgPSBub3JtYWxpemVBbmRGb3JtYXRFcnJvcnM7XG5mdW5jdGlvbiBlbnN1cmVFcnJvcihtYXliZUVycm9yKSB7XG4gICAgcmV0dXJuIG1heWJlRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICA/IG1heWJlRXJyb3JcbiAgICAgICAgOiBuZXcgZ3JhcGhxbF8xLkdyYXBoUUxFcnJvcignVW5leHBlY3RlZCBlcnJvciB2YWx1ZTogJyArIFN0cmluZyhtYXliZUVycm9yKSk7XG59XG5leHBvcnRzLmVuc3VyZUVycm9yID0gZW5zdXJlRXJyb3I7XG5mdW5jdGlvbiBlbnN1cmVHcmFwaFFMRXJyb3IobWF5YmVFcnJvciwgbWVzc2FnZVByZWZpeElmTm90R3JhcGhRTEVycm9yID0gJycpIHtcbiAgICBjb25zdCBlcnJvciA9IGVuc3VyZUVycm9yKG1heWJlRXJyb3IpO1xuICAgIHJldHVybiBlcnJvciBpbnN0YW5jZW9mIGdyYXBocWxfMS5HcmFwaFFMRXJyb3JcbiAgICAgICAgPyBlcnJvclxuICAgICAgICA6IG5ldyBncmFwaHFsXzEuR3JhcGhRTEVycm9yKG1lc3NhZ2VQcmVmaXhJZk5vdEdyYXBoUUxFcnJvciArIGVycm9yLm1lc3NhZ2UsIHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yLFxuICAgICAgICB9KTtcbn1cbmV4cG9ydHMuZW5zdXJlR3JhcGhRTEVycm9yID0gZW5zdXJlR3JhcGhRTEVycm9yO1xuZnVuY3Rpb24gaXNQYXJ0aWFsSFRUUEdyYXBoUUxIZWFkKHgpIHtcbiAgICByZXR1cm4gKCEheCAmJlxuICAgICAgICB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgKCEoJ3N0YXR1cycgaW4geCkgfHwgdHlwZW9mIHguc3RhdHVzID09PSAnbnVtYmVyJykgJiZcbiAgICAgICAgKCEoJ2hlYWRlcnMnIGluIHgpIHx8IHguaGVhZGVycyBpbnN0YW5jZW9mIE1hcCkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JOb3JtYWxpemUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/errorNormalize.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/errors/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/errors/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.unwrapResolverError = exports.ApolloServerValidationErrorCode = exports.ApolloServerErrorCode = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nvar ApolloServerErrorCode;\n(function (ApolloServerErrorCode) {\n    ApolloServerErrorCode[\"INTERNAL_SERVER_ERROR\"] = \"INTERNAL_SERVER_ERROR\";\n    ApolloServerErrorCode[\"GRAPHQL_PARSE_FAILED\"] = \"GRAPHQL_PARSE_FAILED\";\n    ApolloServerErrorCode[\"GRAPHQL_VALIDATION_FAILED\"] = \"GRAPHQL_VALIDATION_FAILED\";\n    ApolloServerErrorCode[\"PERSISTED_QUERY_NOT_FOUND\"] = \"PERSISTED_QUERY_NOT_FOUND\";\n    ApolloServerErrorCode[\"PERSISTED_QUERY_NOT_SUPPORTED\"] = \"PERSISTED_QUERY_NOT_SUPPORTED\";\n    ApolloServerErrorCode[\"BAD_USER_INPUT\"] = \"BAD_USER_INPUT\";\n    ApolloServerErrorCode[\"OPERATION_RESOLUTION_FAILURE\"] = \"OPERATION_RESOLUTION_FAILURE\";\n    ApolloServerErrorCode[\"BAD_REQUEST\"] = \"BAD_REQUEST\";\n})(ApolloServerErrorCode || (exports.ApolloServerErrorCode = ApolloServerErrorCode = {}));\nvar ApolloServerValidationErrorCode;\n(function (ApolloServerValidationErrorCode) {\n    ApolloServerValidationErrorCode[\"INTROSPECTION_DISABLED\"] = \"INTROSPECTION_DISABLED\";\n    ApolloServerValidationErrorCode[\"MAX_RECURSIVE_SELECTIONS_EXCEEDED\"] = \"MAX_RECURSIVE_SELECTIONS_EXCEEDED\";\n})(ApolloServerValidationErrorCode || (exports.ApolloServerValidationErrorCode = ApolloServerValidationErrorCode = {}));\nfunction unwrapResolverError(error) {\n    if (error instanceof graphql_1.GraphQLError && error.path && error.originalError) {\n        return error.originalError;\n    }\n    return error;\n}\nexports.unwrapResolverError = unwrapResolverError;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvZXJyb3JzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDJCQUEyQixHQUFHLHVDQUF1QyxHQUFHLDZCQUE2QjtBQUNyRyxrQkFBa0IsbUJBQU8sQ0FBQyx1REFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEJBQTRCLDZCQUE2Qiw2QkFBNkI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNDQUFzQyx1Q0FBdUMsdUNBQXVDO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvZXJyb3JzL2luZGV4LmpzP2JkOTMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVud3JhcFJlc29sdmVyRXJyb3IgPSBleHBvcnRzLkFwb2xsb1NlcnZlclZhbGlkYXRpb25FcnJvckNvZGUgPSBleHBvcnRzLkFwb2xsb1NlcnZlckVycm9yQ29kZSA9IHZvaWQgMDtcbmNvbnN0IGdyYXBocWxfMSA9IHJlcXVpcmUoXCJncmFwaHFsXCIpO1xudmFyIEFwb2xsb1NlcnZlckVycm9yQ29kZTtcbihmdW5jdGlvbiAoQXBvbGxvU2VydmVyRXJyb3JDb2RlKSB7XG4gICAgQXBvbGxvU2VydmVyRXJyb3JDb2RlW1wiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCJdID0gXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIjtcbiAgICBBcG9sbG9TZXJ2ZXJFcnJvckNvZGVbXCJHUkFQSFFMX1BBUlNFX0ZBSUxFRFwiXSA9IFwiR1JBUEhRTF9QQVJTRV9GQUlMRURcIjtcbiAgICBBcG9sbG9TZXJ2ZXJFcnJvckNvZGVbXCJHUkFQSFFMX1ZBTElEQVRJT05fRkFJTEVEXCJdID0gXCJHUkFQSFFMX1ZBTElEQVRJT05fRkFJTEVEXCI7XG4gICAgQXBvbGxvU2VydmVyRXJyb3JDb2RlW1wiUEVSU0lTVEVEX1FVRVJZX05PVF9GT1VORFwiXSA9IFwiUEVSU0lTVEVEX1FVRVJZX05PVF9GT1VORFwiO1xuICAgIEFwb2xsb1NlcnZlckVycm9yQ29kZVtcIlBFUlNJU1RFRF9RVUVSWV9OT1RfU1VQUE9SVEVEXCJdID0gXCJQRVJTSVNURURfUVVFUllfTk9UX1NVUFBPUlRFRFwiO1xuICAgIEFwb2xsb1NlcnZlckVycm9yQ29kZVtcIkJBRF9VU0VSX0lOUFVUXCJdID0gXCJCQURfVVNFUl9JTlBVVFwiO1xuICAgIEFwb2xsb1NlcnZlckVycm9yQ29kZVtcIk9QRVJBVElPTl9SRVNPTFVUSU9OX0ZBSUxVUkVcIl0gPSBcIk9QRVJBVElPTl9SRVNPTFVUSU9OX0ZBSUxVUkVcIjtcbiAgICBBcG9sbG9TZXJ2ZXJFcnJvckNvZGVbXCJCQURfUkVRVUVTVFwiXSA9IFwiQkFEX1JFUVVFU1RcIjtcbn0pKEFwb2xsb1NlcnZlckVycm9yQ29kZSB8fCAoZXhwb3J0cy5BcG9sbG9TZXJ2ZXJFcnJvckNvZGUgPSBBcG9sbG9TZXJ2ZXJFcnJvckNvZGUgPSB7fSkpO1xudmFyIEFwb2xsb1NlcnZlclZhbGlkYXRpb25FcnJvckNvZGU7XG4oZnVuY3Rpb24gKEFwb2xsb1NlcnZlclZhbGlkYXRpb25FcnJvckNvZGUpIHtcbiAgICBBcG9sbG9TZXJ2ZXJWYWxpZGF0aW9uRXJyb3JDb2RlW1wiSU5UUk9TUEVDVElPTl9ESVNBQkxFRFwiXSA9IFwiSU5UUk9TUEVDVElPTl9ESVNBQkxFRFwiO1xuICAgIEFwb2xsb1NlcnZlclZhbGlkYXRpb25FcnJvckNvZGVbXCJNQVhfUkVDVVJTSVZFX1NFTEVDVElPTlNfRVhDRUVERURcIl0gPSBcIk1BWF9SRUNVUlNJVkVfU0VMRUNUSU9OU19FWENFRURFRFwiO1xufSkoQXBvbGxvU2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZSB8fCAoZXhwb3J0cy5BcG9sbG9TZXJ2ZXJWYWxpZGF0aW9uRXJyb3JDb2RlID0gQXBvbGxvU2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZSA9IHt9KSk7XG5mdW5jdGlvbiB1bndyYXBSZXNvbHZlckVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgZ3JhcGhxbF8xLkdyYXBoUUxFcnJvciAmJiBlcnJvci5wYXRoICYmIGVycm9yLm9yaWdpbmFsRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yLm9yaWdpbmFsRXJyb3I7XG4gICAgfVxuICAgIHJldHVybiBlcnJvcjtcbn1cbmV4cG9ydHMudW53cmFwUmVzb2x2ZXJFcnJvciA9IHVud3JhcFJlc29sdmVyRXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/errors/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/externalTypes/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/externalTypes/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvZXh0ZXJuYWxUeXBlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvZXh0ZXJuYWxUeXBlcy9pbmRleC5qcz8wYjA0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/externalTypes/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/generated/packageVersion.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/generated/packageVersion.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.packageVersion = void 0;\nexports.packageVersion = \"4.12.2\";\n//# sourceMappingURL=packageVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvZ2VuZXJhdGVkL3BhY2thZ2VWZXJzaW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL2dlbmVyYXRlZC9wYWNrYWdlVmVyc2lvbi5qcz9kODQ2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYWNrYWdlVmVyc2lvbiA9IHZvaWQgMDtcbmV4cG9ydHMucGFja2FnZVZlcnNpb24gPSBcIjQuMTIuMlwiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFja2FnZVZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/generated/packageVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/httpBatching.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/httpBatching.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.runPotentiallyBatchedHttpQuery = void 0;\nconst runHttpQuery_js_1 = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/runHttpQuery.js\");\nconst internalErrorClasses_js_1 = __webpack_require__(/*! ./internalErrorClasses.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalErrorClasses.js\");\nasync function runBatchedHttpQuery({ server, batchRequest, body, contextValue, schemaDerivedData, internals, }) {\n    if (body.length === 0) {\n        throw new internalErrorClasses_js_1.BadRequestError('No operations found in request.');\n    }\n    const sharedResponseHTTPGraphQLHead = (0, runHttpQuery_js_1.newHTTPGraphQLHead)();\n    const responseBodies = await Promise.all(body.map(async (bodyPiece) => {\n        const singleRequest = {\n            ...batchRequest,\n            body: bodyPiece,\n        };\n        const response = await (0, runHttpQuery_js_1.runHttpQuery)({\n            server,\n            httpRequest: singleRequest,\n            contextValue,\n            schemaDerivedData,\n            internals,\n            sharedResponseHTTPGraphQLHead,\n        });\n        if (response.body.kind === 'chunked') {\n            throw Error('Incremental delivery is not implemented for batch requests');\n        }\n        return response.body.string;\n    }));\n    return {\n        ...sharedResponseHTTPGraphQLHead,\n        body: { kind: 'complete', string: `[${responseBodies.join(',')}]` },\n    };\n}\nasync function runPotentiallyBatchedHttpQuery(server, httpGraphQLRequest, contextValue, schemaDerivedData, internals) {\n    if (!(httpGraphQLRequest.method === 'POST' &&\n        Array.isArray(httpGraphQLRequest.body))) {\n        return await (0, runHttpQuery_js_1.runHttpQuery)({\n            server,\n            httpRequest: httpGraphQLRequest,\n            contextValue,\n            schemaDerivedData,\n            internals,\n            sharedResponseHTTPGraphQLHead: null,\n        });\n    }\n    if (internals.allowBatchedHttpRequests) {\n        return await runBatchedHttpQuery({\n            server,\n            batchRequest: httpGraphQLRequest,\n            body: httpGraphQLRequest.body,\n            contextValue,\n            schemaDerivedData,\n            internals,\n        });\n    }\n    throw new internalErrorClasses_js_1.BadRequestError('Operation batching disabled.');\n}\nexports.runPotentiallyBatchedHttpQuery = runPotentiallyBatchedHttpQuery;\n//# sourceMappingURL=httpBatching.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvaHR0cEJhdGNoaW5nLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHNDQUFzQztBQUN0QywwQkFBMEIsbUJBQU8sQ0FBQyx1RkFBbUI7QUFDckQsa0NBQWtDLG1CQUFPLENBQUMsdUdBQTJCO0FBQ3JFLHFDQUFxQyx5RUFBeUU7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdCQUFnQiw4QkFBOEIseUJBQXlCLElBQUk7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL2h0dHBCYXRjaGluZy5qcz8zMGQxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5ydW5Qb3RlbnRpYWxseUJhdGNoZWRIdHRwUXVlcnkgPSB2b2lkIDA7XG5jb25zdCBydW5IdHRwUXVlcnlfanNfMSA9IHJlcXVpcmUoXCIuL3J1bkh0dHBRdWVyeS5qc1wiKTtcbmNvbnN0IGludGVybmFsRXJyb3JDbGFzc2VzX2pzXzEgPSByZXF1aXJlKFwiLi9pbnRlcm5hbEVycm9yQ2xhc3Nlcy5qc1wiKTtcbmFzeW5jIGZ1bmN0aW9uIHJ1bkJhdGNoZWRIdHRwUXVlcnkoeyBzZXJ2ZXIsIGJhdGNoUmVxdWVzdCwgYm9keSwgY29udGV4dFZhbHVlLCBzY2hlbWFEZXJpdmVkRGF0YSwgaW50ZXJuYWxzLCB9KSB7XG4gICAgaWYgKGJvZHkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLkJhZFJlcXVlc3RFcnJvcignTm8gb3BlcmF0aW9ucyBmb3VuZCBpbiByZXF1ZXN0LicpO1xuICAgIH1cbiAgICBjb25zdCBzaGFyZWRSZXNwb25zZUhUVFBHcmFwaFFMSGVhZCA9ICgwLCBydW5IdHRwUXVlcnlfanNfMS5uZXdIVFRQR3JhcGhRTEhlYWQpKCk7XG4gICAgY29uc3QgcmVzcG9uc2VCb2RpZXMgPSBhd2FpdCBQcm9taXNlLmFsbChib2R5Lm1hcChhc3luYyAoYm9keVBpZWNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHNpbmdsZVJlcXVlc3QgPSB7XG4gICAgICAgICAgICAuLi5iYXRjaFJlcXVlc3QsXG4gICAgICAgICAgICBib2R5OiBib2R5UGllY2UsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIHJ1bkh0dHBRdWVyeV9qc18xLnJ1bkh0dHBRdWVyeSkoe1xuICAgICAgICAgICAgc2VydmVyLFxuICAgICAgICAgICAgaHR0cFJlcXVlc3Q6IHNpbmdsZVJlcXVlc3QsXG4gICAgICAgICAgICBjb250ZXh0VmFsdWUsXG4gICAgICAgICAgICBzY2hlbWFEZXJpdmVkRGF0YSxcbiAgICAgICAgICAgIGludGVybmFscyxcbiAgICAgICAgICAgIHNoYXJlZFJlc3BvbnNlSFRUUEdyYXBoUUxIZWFkLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmJvZHkua2luZCA9PT0gJ2NodW5rZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignSW5jcmVtZW50YWwgZGVsaXZlcnkgaXMgbm90IGltcGxlbWVudGVkIGZvciBiYXRjaCByZXF1ZXN0cycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZS5ib2R5LnN0cmluZztcbiAgICB9KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc2hhcmVkUmVzcG9uc2VIVFRQR3JhcGhRTEhlYWQsXG4gICAgICAgIGJvZHk6IHsga2luZDogJ2NvbXBsZXRlJywgc3RyaW5nOiBgWyR7cmVzcG9uc2VCb2RpZXMuam9pbignLCcpfV1gIH0sXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1blBvdGVudGlhbGx5QmF0Y2hlZEh0dHBRdWVyeShzZXJ2ZXIsIGh0dHBHcmFwaFFMUmVxdWVzdCwgY29udGV4dFZhbHVlLCBzY2hlbWFEZXJpdmVkRGF0YSwgaW50ZXJuYWxzKSB7XG4gICAgaWYgKCEoaHR0cEdyYXBoUUxSZXF1ZXN0Lm1ldGhvZCA9PT0gJ1BPU1QnICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkoaHR0cEdyYXBoUUxSZXF1ZXN0LmJvZHkpKSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgKDAsIHJ1bkh0dHBRdWVyeV9qc18xLnJ1bkh0dHBRdWVyeSkoe1xuICAgICAgICAgICAgc2VydmVyLFxuICAgICAgICAgICAgaHR0cFJlcXVlc3Q6IGh0dHBHcmFwaFFMUmVxdWVzdCxcbiAgICAgICAgICAgIGNvbnRleHRWYWx1ZSxcbiAgICAgICAgICAgIHNjaGVtYURlcml2ZWREYXRhLFxuICAgICAgICAgICAgaW50ZXJuYWxzLFxuICAgICAgICAgICAgc2hhcmVkUmVzcG9uc2VIVFRQR3JhcGhRTEhlYWQ6IG51bGwsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaW50ZXJuYWxzLmFsbG93QmF0Y2hlZEh0dHBSZXF1ZXN0cykge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVuQmF0Y2hlZEh0dHBRdWVyeSh7XG4gICAgICAgICAgICBzZXJ2ZXIsXG4gICAgICAgICAgICBiYXRjaFJlcXVlc3Q6IGh0dHBHcmFwaFFMUmVxdWVzdCxcbiAgICAgICAgICAgIGJvZHk6IGh0dHBHcmFwaFFMUmVxdWVzdC5ib2R5LFxuICAgICAgICAgICAgY29udGV4dFZhbHVlLFxuICAgICAgICAgICAgc2NoZW1hRGVyaXZlZERhdGEsXG4gICAgICAgICAgICBpbnRlcm5hbHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgaW50ZXJuYWxFcnJvckNsYXNzZXNfanNfMS5CYWRSZXF1ZXN0RXJyb3IoJ09wZXJhdGlvbiBiYXRjaGluZyBkaXNhYmxlZC4nKTtcbn1cbmV4cG9ydHMucnVuUG90ZW50aWFsbHlCYXRjaGVkSHR0cFF1ZXJ5ID0gcnVuUG90ZW50aWFsbHlCYXRjaGVkSHR0cFF1ZXJ5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHR0cEJhdGNoaW5nLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/httpBatching.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/incrementalDeliveryPolyfill.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/incrementalDeliveryPolyfill.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.executeIncrementally = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nlet graphqlExperimentalExecuteIncrementally = undefined;\nasync function tryToLoadGraphQL17() {\n    if (graphqlExperimentalExecuteIncrementally !== undefined) {\n        return;\n    }\n    const graphql = await Promise.resolve().then(() => __importStar(__webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\")));\n    if ('experimentalExecuteIncrementally' in graphql) {\n        graphqlExperimentalExecuteIncrementally = graphql\n            .experimentalExecuteIncrementally;\n    }\n    else {\n        graphqlExperimentalExecuteIncrementally = null;\n    }\n}\nasync function executeIncrementally(args) {\n    await tryToLoadGraphQL17();\n    if (graphqlExperimentalExecuteIncrementally) {\n        return graphqlExperimentalExecuteIncrementally(args);\n    }\n    return (0, graphql_1.execute)(args);\n}\nexports.executeIncrementally = executeIncrementally;\n//# sourceMappingURL=incrementalDeliveryPolyfill.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvaW5jcmVtZW50YWxEZWxpdmVyeVBvbHlmaWxsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9DQUFvQztBQUNuRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSwwQ0FBMEMsNEJBQTRCO0FBQ3RFLENBQUM7QUFDRDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw0QkFBNEI7QUFDNUIsa0JBQWtCLG1CQUFPLENBQUMsdURBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxtQkFBTyxDQUFDLHVEQUFTO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvaW5jcmVtZW50YWxEZWxpdmVyeVBvbHlmaWxsLmpzPzMzOWEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZXhlY3V0ZUluY3JlbWVudGFsbHkgPSB2b2lkIDA7XG5jb25zdCBncmFwaHFsXzEgPSByZXF1aXJlKFwiZ3JhcGhxbFwiKTtcbmxldCBncmFwaHFsRXhwZXJpbWVudGFsRXhlY3V0ZUluY3JlbWVudGFsbHkgPSB1bmRlZmluZWQ7XG5hc3luYyBmdW5jdGlvbiB0cnlUb0xvYWRHcmFwaFFMMTcoKSB7XG4gICAgaWYgKGdyYXBocWxFeHBlcmltZW50YWxFeGVjdXRlSW5jcmVtZW50YWxseSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZ3JhcGhxbCA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gX19pbXBvcnRTdGFyKHJlcXVpcmUoJ2dyYXBocWwnKSkpO1xuICAgIGlmICgnZXhwZXJpbWVudGFsRXhlY3V0ZUluY3JlbWVudGFsbHknIGluIGdyYXBocWwpIHtcbiAgICAgICAgZ3JhcGhxbEV4cGVyaW1lbnRhbEV4ZWN1dGVJbmNyZW1lbnRhbGx5ID0gZ3JhcGhxbFxuICAgICAgICAgICAgLmV4cGVyaW1lbnRhbEV4ZWN1dGVJbmNyZW1lbnRhbGx5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ3JhcGhxbEV4cGVyaW1lbnRhbEV4ZWN1dGVJbmNyZW1lbnRhbGx5ID0gbnVsbDtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBleGVjdXRlSW5jcmVtZW50YWxseShhcmdzKSB7XG4gICAgYXdhaXQgdHJ5VG9Mb2FkR3JhcGhRTDE3KCk7XG4gICAgaWYgKGdyYXBocWxFeHBlcmltZW50YWxFeGVjdXRlSW5jcmVtZW50YWxseSkge1xuICAgICAgICByZXR1cm4gZ3JhcGhxbEV4cGVyaW1lbnRhbEV4ZWN1dGVJbmNyZW1lbnRhbGx5KGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIGdyYXBocWxfMS5leGVjdXRlKShhcmdzKTtcbn1cbmV4cG9ydHMuZXhlY3V0ZUluY3JlbWVudGFsbHkgPSBleGVjdXRlSW5jcmVtZW50YWxseTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluY3JlbWVudGFsRGVsaXZlcnlQb2x5ZmlsbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/incrementalDeliveryPolyfill.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/index.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.HeaderMap = exports.ApolloServer = void 0;\nvar ApolloServer_js_1 = __webpack_require__(/*! ./ApolloServer.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/ApolloServer.js\");\nObject.defineProperty(exports, \"ApolloServer\", ({ enumerable: true, get: function () { return ApolloServer_js_1.ApolloServer; } }));\nvar HeaderMap_js_1 = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js\");\nObject.defineProperty(exports, \"HeaderMap\", ({ enumerable: true, get: function () { return HeaderMap_js_1.HeaderMap; } }));\n__exportStar(__webpack_require__(/*! ./externalTypes/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/externalTypes/index.js\"), exports);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0NBQW9DO0FBQ25EO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsaUJBQWlCLEdBQUcsb0JBQW9CO0FBQ3hDLHdCQUF3QixtQkFBTyxDQUFDLHVGQUFtQjtBQUNuRCxnREFBK0MsRUFBRSxxQ0FBcUMsMENBQTBDLEVBQUM7QUFDakkscUJBQXFCLG1CQUFPLENBQUMsNkZBQXNCO0FBQ25ELDZDQUE0QyxFQUFFLHFDQUFxQyxvQ0FBb0MsRUFBQztBQUN4SCxhQUFhLG1CQUFPLENBQUMscUdBQTBCO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9pbmRleC5qcz80MWFhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkhlYWRlck1hcCA9IGV4cG9ydHMuQXBvbGxvU2VydmVyID0gdm9pZCAwO1xudmFyIEFwb2xsb1NlcnZlcl9qc18xID0gcmVxdWlyZShcIi4vQXBvbGxvU2VydmVyLmpzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQXBvbGxvU2VydmVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBBcG9sbG9TZXJ2ZXJfanNfMS5BcG9sbG9TZXJ2ZXI7IH0gfSk7XG52YXIgSGVhZGVyTWFwX2pzXzEgPSByZXF1aXJlKFwiLi91dGlscy9IZWFkZXJNYXAuanNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJIZWFkZXJNYXBcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEhlYWRlck1hcF9qc18xLkhlYWRlck1hcDsgfSB9KTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9leHRlcm5hbFR5cGVzL2luZGV4LmpzXCIpLCBleHBvcnRzKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/internalErrorClasses.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/internalErrorClasses.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.BadRequestError = exports.OperationResolutionError = exports.UserInputError = exports.PersistedQueryNotSupportedError = exports.PersistedQueryNotFoundError = exports.ValidationError = exports.SyntaxError = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst index_js_1 = __webpack_require__(/*! ./errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/errors/index.js\");\nconst runHttpQuery_js_1 = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/runHttpQuery.js\");\nconst HeaderMap_js_1 = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js\");\nclass GraphQLErrorWithCode extends graphql_1.GraphQLError {\n    constructor(message, code, options) {\n        super(message, {\n            ...options,\n            extensions: { ...options?.extensions, code },\n        });\n        this.name = this.constructor.name;\n    }\n}\nclass SyntaxError extends GraphQLErrorWithCode {\n    constructor(graphqlError) {\n        super(graphqlError.message, index_js_1.ApolloServerErrorCode.GRAPHQL_PARSE_FAILED, {\n            source: graphqlError.source,\n            positions: graphqlError.positions,\n            extensions: { http: (0, runHttpQuery_js_1.newHTTPGraphQLHead)(400), ...graphqlError.extensions },\n            originalError: graphqlError,\n        });\n    }\n}\nexports.SyntaxError = SyntaxError;\nclass ValidationError extends GraphQLErrorWithCode {\n    constructor(graphqlError) {\n        super(graphqlError.message, index_js_1.ApolloServerErrorCode.GRAPHQL_VALIDATION_FAILED, {\n            nodes: graphqlError.nodes,\n            extensions: {\n                http: (0, runHttpQuery_js_1.newHTTPGraphQLHead)(400),\n                ...graphqlError.extensions,\n            },\n            originalError: graphqlError.originalError ?? graphqlError,\n        });\n    }\n}\nexports.ValidationError = ValidationError;\nconst getPersistedQueryErrorHttp = () => ({\n    status: 200,\n    headers: new HeaderMap_js_1.HeaderMap([\n        ['cache-control', 'private, no-cache, must-revalidate'],\n    ]),\n});\nclass PersistedQueryNotFoundError extends GraphQLErrorWithCode {\n    constructor() {\n        super('PersistedQueryNotFound', index_js_1.ApolloServerErrorCode.PERSISTED_QUERY_NOT_FOUND, { extensions: { http: getPersistedQueryErrorHttp() } });\n    }\n}\nexports.PersistedQueryNotFoundError = PersistedQueryNotFoundError;\nclass PersistedQueryNotSupportedError extends GraphQLErrorWithCode {\n    constructor() {\n        super('PersistedQueryNotSupported', index_js_1.ApolloServerErrorCode.PERSISTED_QUERY_NOT_SUPPORTED, { extensions: { http: getPersistedQueryErrorHttp() } });\n    }\n}\nexports.PersistedQueryNotSupportedError = PersistedQueryNotSupportedError;\nclass UserInputError extends GraphQLErrorWithCode {\n    constructor(graphqlError) {\n        super(graphqlError.message, index_js_1.ApolloServerErrorCode.BAD_USER_INPUT, {\n            nodes: graphqlError.nodes,\n            originalError: graphqlError.originalError ?? graphqlError,\n            extensions: graphqlError.extensions,\n        });\n    }\n}\nexports.UserInputError = UserInputError;\nclass OperationResolutionError extends GraphQLErrorWithCode {\n    constructor(graphqlError) {\n        super(graphqlError.message, index_js_1.ApolloServerErrorCode.OPERATION_RESOLUTION_FAILURE, {\n            nodes: graphqlError.nodes,\n            originalError: graphqlError.originalError ?? graphqlError,\n            extensions: {\n                http: (0, runHttpQuery_js_1.newHTTPGraphQLHead)(400),\n                ...graphqlError.extensions,\n            },\n        });\n    }\n}\nexports.OperationResolutionError = OperationResolutionError;\nclass BadRequestError extends GraphQLErrorWithCode {\n    constructor(message, options) {\n        super(message, index_js_1.ApolloServerErrorCode.BAD_REQUEST, {\n            ...options,\n            extensions: { http: (0, runHttpQuery_js_1.newHTTPGraphQLHead)(400), ...options?.extensions },\n        });\n    }\n}\nexports.BadRequestError = BadRequestError;\n//# sourceMappingURL=internalErrorClasses.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvaW50ZXJuYWxFcnJvckNsYXNzZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCLEdBQUcsZ0NBQWdDLEdBQUcsc0JBQXNCLEdBQUcsdUNBQXVDLEdBQUcsbUNBQW1DLEdBQUcsdUJBQXVCLEdBQUcsbUJBQW1CO0FBQ25OLGtCQUFrQixtQkFBTyxDQUFDLHVEQUFTO0FBQ25DLG1CQUFtQixtQkFBTyxDQUFDLHVGQUFtQjtBQUM5QywwQkFBMEIsbUJBQU8sQ0FBQyx1RkFBbUI7QUFDckQsdUJBQXVCLG1CQUFPLENBQUMsNkZBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhCQUE4QjtBQUN4RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrRkFBa0Y7QUFDNUc7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLHNHQUFzRyxjQUFjLHNDQUFzQztBQUMxSjtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQSw4R0FBOEcsY0FBYyxzQ0FBc0M7QUFDbEs7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhFQUE4RTtBQUN4RyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvaW50ZXJuYWxFcnJvckNsYXNzZXMuanM/MGUwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQmFkUmVxdWVzdEVycm9yID0gZXhwb3J0cy5PcGVyYXRpb25SZXNvbHV0aW9uRXJyb3IgPSBleHBvcnRzLlVzZXJJbnB1dEVycm9yID0gZXhwb3J0cy5QZXJzaXN0ZWRRdWVyeU5vdFN1cHBvcnRlZEVycm9yID0gZXhwb3J0cy5QZXJzaXN0ZWRRdWVyeU5vdEZvdW5kRXJyb3IgPSBleHBvcnRzLlZhbGlkYXRpb25FcnJvciA9IGV4cG9ydHMuU3ludGF4RXJyb3IgPSB2b2lkIDA7XG5jb25zdCBncmFwaHFsXzEgPSByZXF1aXJlKFwiZ3JhcGhxbFwiKTtcbmNvbnN0IGluZGV4X2pzXzEgPSByZXF1aXJlKFwiLi9lcnJvcnMvaW5kZXguanNcIik7XG5jb25zdCBydW5IdHRwUXVlcnlfanNfMSA9IHJlcXVpcmUoXCIuL3J1bkh0dHBRdWVyeS5qc1wiKTtcbmNvbnN0IEhlYWRlck1hcF9qc18xID0gcmVxdWlyZShcIi4vdXRpbHMvSGVhZGVyTWFwLmpzXCIpO1xuY2xhc3MgR3JhcGhRTEVycm9yV2l0aENvZGUgZXh0ZW5kcyBncmFwaHFsXzEuR3JhcGhRTEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb2RlLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7IC4uLm9wdGlvbnM/LmV4dGVuc2lvbnMsIGNvZGUgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICB9XG59XG5jbGFzcyBTeW50YXhFcnJvciBleHRlbmRzIEdyYXBoUUxFcnJvcldpdGhDb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihncmFwaHFsRXJyb3IpIHtcbiAgICAgICAgc3VwZXIoZ3JhcGhxbEVycm9yLm1lc3NhZ2UsIGluZGV4X2pzXzEuQXBvbGxvU2VydmVyRXJyb3JDb2RlLkdSQVBIUUxfUEFSU0VfRkFJTEVELCB7XG4gICAgICAgICAgICBzb3VyY2U6IGdyYXBocWxFcnJvci5zb3VyY2UsXG4gICAgICAgICAgICBwb3NpdGlvbnM6IGdyYXBocWxFcnJvci5wb3NpdGlvbnMsXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7IGh0dHA6ICgwLCBydW5IdHRwUXVlcnlfanNfMS5uZXdIVFRQR3JhcGhRTEhlYWQpKDQwMCksIC4uLmdyYXBocWxFcnJvci5leHRlbnNpb25zIH0sXG4gICAgICAgICAgICBvcmlnaW5hbEVycm9yOiBncmFwaHFsRXJyb3IsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuU3ludGF4RXJyb3IgPSBTeW50YXhFcnJvcjtcbmNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEdyYXBoUUxFcnJvcldpdGhDb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihncmFwaHFsRXJyb3IpIHtcbiAgICAgICAgc3VwZXIoZ3JhcGhxbEVycm9yLm1lc3NhZ2UsIGluZGV4X2pzXzEuQXBvbGxvU2VydmVyRXJyb3JDb2RlLkdSQVBIUUxfVkFMSURBVElPTl9GQUlMRUQsIHtcbiAgICAgICAgICAgIG5vZGVzOiBncmFwaHFsRXJyb3Iubm9kZXMsXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cDogKDAsIHJ1bkh0dHBRdWVyeV9qc18xLm5ld0hUVFBHcmFwaFFMSGVhZCkoNDAwKSxcbiAgICAgICAgICAgICAgICAuLi5ncmFwaHFsRXJyb3IuZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmlnaW5hbEVycm9yOiBncmFwaHFsRXJyb3Iub3JpZ2luYWxFcnJvciA/PyBncmFwaHFsRXJyb3IsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuVmFsaWRhdGlvbkVycm9yID0gVmFsaWRhdGlvbkVycm9yO1xuY29uc3QgZ2V0UGVyc2lzdGVkUXVlcnlFcnJvckh0dHAgPSAoKSA9PiAoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJNYXBfanNfMS5IZWFkZXJNYXAoW1xuICAgICAgICBbJ2NhY2hlLWNvbnRyb2wnLCAncHJpdmF0ZSwgbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZSddLFxuICAgIF0pLFxufSk7XG5jbGFzcyBQZXJzaXN0ZWRRdWVyeU5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBHcmFwaFFMRXJyb3JXaXRoQ29kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdQZXJzaXN0ZWRRdWVyeU5vdEZvdW5kJywgaW5kZXhfanNfMS5BcG9sbG9TZXJ2ZXJFcnJvckNvZGUuUEVSU0lTVEVEX1FVRVJZX05PVF9GT1VORCwgeyBleHRlbnNpb25zOiB7IGh0dHA6IGdldFBlcnNpc3RlZFF1ZXJ5RXJyb3JIdHRwKCkgfSB9KTtcbiAgICB9XG59XG5leHBvcnRzLlBlcnNpc3RlZFF1ZXJ5Tm90Rm91bmRFcnJvciA9IFBlcnNpc3RlZFF1ZXJ5Tm90Rm91bmRFcnJvcjtcbmNsYXNzIFBlcnNpc3RlZFF1ZXJ5Tm90U3VwcG9ydGVkRXJyb3IgZXh0ZW5kcyBHcmFwaFFMRXJyb3JXaXRoQ29kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdQZXJzaXN0ZWRRdWVyeU5vdFN1cHBvcnRlZCcsIGluZGV4X2pzXzEuQXBvbGxvU2VydmVyRXJyb3JDb2RlLlBFUlNJU1RFRF9RVUVSWV9OT1RfU1VQUE9SVEVELCB7IGV4dGVuc2lvbnM6IHsgaHR0cDogZ2V0UGVyc2lzdGVkUXVlcnlFcnJvckh0dHAoKSB9IH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuUGVyc2lzdGVkUXVlcnlOb3RTdXBwb3J0ZWRFcnJvciA9IFBlcnNpc3RlZFF1ZXJ5Tm90U3VwcG9ydGVkRXJyb3I7XG5jbGFzcyBVc2VySW5wdXRFcnJvciBleHRlbmRzIEdyYXBoUUxFcnJvcldpdGhDb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihncmFwaHFsRXJyb3IpIHtcbiAgICAgICAgc3VwZXIoZ3JhcGhxbEVycm9yLm1lc3NhZ2UsIGluZGV4X2pzXzEuQXBvbGxvU2VydmVyRXJyb3JDb2RlLkJBRF9VU0VSX0lOUFVULCB7XG4gICAgICAgICAgICBub2RlczogZ3JhcGhxbEVycm9yLm5vZGVzLFxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvcjogZ3JhcGhxbEVycm9yLm9yaWdpbmFsRXJyb3IgPz8gZ3JhcGhxbEVycm9yLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczogZ3JhcGhxbEVycm9yLmV4dGVuc2lvbnMsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuVXNlcklucHV0RXJyb3IgPSBVc2VySW5wdXRFcnJvcjtcbmNsYXNzIE9wZXJhdGlvblJlc29sdXRpb25FcnJvciBleHRlbmRzIEdyYXBoUUxFcnJvcldpdGhDb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihncmFwaHFsRXJyb3IpIHtcbiAgICAgICAgc3VwZXIoZ3JhcGhxbEVycm9yLm1lc3NhZ2UsIGluZGV4X2pzXzEuQXBvbGxvU2VydmVyRXJyb3JDb2RlLk9QRVJBVElPTl9SRVNPTFVUSU9OX0ZBSUxVUkUsIHtcbiAgICAgICAgICAgIG5vZGVzOiBncmFwaHFsRXJyb3Iubm9kZXMsXG4gICAgICAgICAgICBvcmlnaW5hbEVycm9yOiBncmFwaHFsRXJyb3Iub3JpZ2luYWxFcnJvciA/PyBncmFwaHFsRXJyb3IsXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cDogKDAsIHJ1bkh0dHBRdWVyeV9qc18xLm5ld0hUVFBHcmFwaFFMSGVhZCkoNDAwKSxcbiAgICAgICAgICAgICAgICAuLi5ncmFwaHFsRXJyb3IuZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuT3BlcmF0aW9uUmVzb2x1dGlvbkVycm9yID0gT3BlcmF0aW9uUmVzb2x1dGlvbkVycm9yO1xuY2xhc3MgQmFkUmVxdWVzdEVycm9yIGV4dGVuZHMgR3JhcGhRTEVycm9yV2l0aENvZGUge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgaW5kZXhfanNfMS5BcG9sbG9TZXJ2ZXJFcnJvckNvZGUuQkFEX1JFUVVFU1QsIHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7IGh0dHA6ICgwLCBydW5IdHRwUXVlcnlfanNfMS5uZXdIVFRQR3JhcGhRTEhlYWQpKDQwMCksIC4uLm9wdGlvbnM/LmV4dGVuc2lvbnMgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5CYWRSZXF1ZXN0RXJyb3IgPSBCYWRSZXF1ZXN0RXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcm5hbEVycm9yQ2xhc3Nlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/internalErrorClasses.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/internalPlugin.js":
/*!****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/internalPlugin.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.pluginIsInternal = exports.internalPlugin = void 0;\nfunction internalPlugin(p) {\n    return p;\n}\nexports.internalPlugin = internalPlugin;\nfunction pluginIsInternal(plugin) {\n    return '__internal_plugin_id__' in plugin;\n}\nexports.pluginIsInternal = pluginIsInternal;\n//# sourceMappingURL=internalPlugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvaW50ZXJuYWxQbHVnaW4uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsd0JBQXdCLEdBQUcsc0JBQXNCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL2ludGVybmFsUGx1Z2luLmpzPzM0ZTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBsdWdpbklzSW50ZXJuYWwgPSBleHBvcnRzLmludGVybmFsUGx1Z2luID0gdm9pZCAwO1xuZnVuY3Rpb24gaW50ZXJuYWxQbHVnaW4ocCkge1xuICAgIHJldHVybiBwO1xufVxuZXhwb3J0cy5pbnRlcm5hbFBsdWdpbiA9IGludGVybmFsUGx1Z2luO1xuZnVuY3Rpb24gcGx1Z2luSXNJbnRlcm5hbChwbHVnaW4pIHtcbiAgICByZXR1cm4gJ19faW50ZXJuYWxfcGx1Z2luX2lkX18nIGluIHBsdWdpbjtcbn1cbmV4cG9ydHMucGx1Z2luSXNJbnRlcm5hbCA9IHBsdWdpbklzSW50ZXJuYWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcm5hbFBsdWdpbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/internalPlugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/cacheControl/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/cacheControl/index.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ApolloServerPluginCacheControl = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst cachePolicy_js_1 = __webpack_require__(/*! ../../cachePolicy.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/cachePolicy.js\");\nconst internalPlugin_js_1 = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalPlugin.js\");\nconst lru_cache_1 = __importDefault(__webpack_require__(/*! lru-cache */ \"(rsc)/./node_modules/lru-cache/index.js\"));\nfunction ApolloServerPluginCacheControl(options = Object.create(null)) {\n    let typeAnnotationCache;\n    let fieldAnnotationCache;\n    return (0, internalPlugin_js_1.internalPlugin)({\n        __internal_plugin_id__: 'CacheControl',\n        __is_disabled_plugin__: false,\n        async serverWillStart({ schema }) {\n            typeAnnotationCache = new lru_cache_1.default({\n                max: Object.values(schema.getTypeMap()).filter(graphql_1.isCompositeType)\n                    .length,\n            });\n            fieldAnnotationCache = new lru_cache_1.default({\n                max: Object.values(schema.getTypeMap())\n                    .filter(graphql_1.isObjectType)\n                    .flatMap((t) => Object.values(t.getFields())).length +\n                    Object.values(schema.getTypeMap())\n                        .filter(graphql_1.isInterfaceType)\n                        .flatMap((t) => Object.values(t.getFields())).length,\n            });\n            return undefined;\n        },\n        async requestDidStart(requestContext) {\n            function memoizedCacheAnnotationFromType(t) {\n                const existing = typeAnnotationCache.get(t);\n                if (existing) {\n                    return existing;\n                }\n                const annotation = cacheAnnotationFromType(t);\n                typeAnnotationCache.set(t, annotation);\n                return annotation;\n            }\n            function memoizedCacheAnnotationFromField(field) {\n                const existing = fieldAnnotationCache.get(field);\n                if (existing) {\n                    return existing;\n                }\n                const annotation = cacheAnnotationFromField(field);\n                fieldAnnotationCache.set(field, annotation);\n                return annotation;\n            }\n            const defaultMaxAge = options.defaultMaxAge ?? 0;\n            const calculateHttpHeaders = options.calculateHttpHeaders ?? true;\n            const { __testing__cacheHints } = options;\n            return {\n                async executionDidStart() {\n                    if (isRestricted(requestContext.overallCachePolicy)) {\n                        const fakeFieldPolicy = (0, cachePolicy_js_1.newCachePolicy)();\n                        return {\n                            willResolveField({ info }) {\n                                info.cacheControl = {\n                                    setCacheHint: (dynamicHint) => {\n                                        fakeFieldPolicy.replace(dynamicHint);\n                                    },\n                                    cacheHint: fakeFieldPolicy,\n                                    cacheHintFromType: memoizedCacheAnnotationFromType,\n                                };\n                            },\n                        };\n                    }\n                    return {\n                        willResolveField({ info }) {\n                            const fieldPolicy = (0, cachePolicy_js_1.newCachePolicy)();\n                            let inheritMaxAge = false;\n                            const targetType = (0, graphql_1.getNamedType)(info.returnType);\n                            if ((0, graphql_1.isCompositeType)(targetType)) {\n                                const typeAnnotation = memoizedCacheAnnotationFromType(targetType);\n                                fieldPolicy.replace(typeAnnotation);\n                                inheritMaxAge = !!typeAnnotation.inheritMaxAge;\n                            }\n                            const fieldAnnotation = memoizedCacheAnnotationFromField(info.parentType.getFields()[info.fieldName]);\n                            if (fieldAnnotation.inheritMaxAge &&\n                                fieldPolicy.maxAge === undefined) {\n                                inheritMaxAge = true;\n                                if (fieldAnnotation.scope) {\n                                    fieldPolicy.replace({ scope: fieldAnnotation.scope });\n                                }\n                            }\n                            else {\n                                fieldPolicy.replace(fieldAnnotation);\n                            }\n                            info.cacheControl = {\n                                setCacheHint: (dynamicHint) => {\n                                    fieldPolicy.replace(dynamicHint);\n                                },\n                                cacheHint: fieldPolicy,\n                                cacheHintFromType: memoizedCacheAnnotationFromType,\n                            };\n                            return () => {\n                                if (fieldPolicy.maxAge === undefined &&\n                                    (((0, graphql_1.isCompositeType)(targetType) && !inheritMaxAge) ||\n                                        !info.path.prev)) {\n                                    fieldPolicy.restrict({ maxAge: defaultMaxAge });\n                                }\n                                if (__testing__cacheHints && isRestricted(fieldPolicy)) {\n                                    const path = (0, graphql_1.responsePathAsArray)(info.path).join('.');\n                                    if (__testing__cacheHints.has(path)) {\n                                        throw Error(\"shouldn't happen: addHint should only be called once per path\");\n                                    }\n                                    __testing__cacheHints.set(path, {\n                                        maxAge: fieldPolicy.maxAge,\n                                        scope: fieldPolicy.scope,\n                                    });\n                                }\n                                requestContext.overallCachePolicy.restrict(fieldPolicy);\n                            };\n                        },\n                    };\n                },\n                async willSendResponse(requestContext) {\n                    if (!calculateHttpHeaders) {\n                        return;\n                    }\n                    const { response, overallCachePolicy } = requestContext;\n                    const existingCacheControlHeader = parseExistingCacheControlHeader(response.http.headers.get('cache-control'));\n                    if (existingCacheControlHeader.kind === 'unparsable') {\n                        return;\n                    }\n                    const cachePolicy = (0, cachePolicy_js_1.newCachePolicy)();\n                    cachePolicy.replace(overallCachePolicy);\n                    if (existingCacheControlHeader.kind === 'parsable-and-cacheable') {\n                        cachePolicy.restrict(existingCacheControlHeader.hint);\n                    }\n                    const policyIfCacheable = cachePolicy.policyIfCacheable();\n                    if (policyIfCacheable &&\n                        existingCacheControlHeader.kind !== 'uncacheable' &&\n                        response.body.kind === 'single' &&\n                        !response.body.singleResult.errors) {\n                        response.http.headers.set('cache-control', `max-age=${policyIfCacheable.maxAge}, ${policyIfCacheable.scope.toLowerCase()}`);\n                    }\n                    else if (calculateHttpHeaders !== 'if-cacheable') {\n                        response.http.headers.set('cache-control', CACHE_CONTROL_HEADER_UNCACHEABLE);\n                    }\n                },\n            };\n        },\n    });\n}\nexports.ApolloServerPluginCacheControl = ApolloServerPluginCacheControl;\nconst CACHE_CONTROL_HEADER_CACHEABLE_REGEXP = /^max-age=(\\d+), (public|private)$/;\nconst CACHE_CONTROL_HEADER_UNCACHEABLE = 'no-store';\nfunction parseExistingCacheControlHeader(header) {\n    if (!header) {\n        return { kind: 'no-header' };\n    }\n    if (header === CACHE_CONTROL_HEADER_UNCACHEABLE) {\n        return { kind: 'uncacheable' };\n    }\n    const match = CACHE_CONTROL_HEADER_CACHEABLE_REGEXP.exec(header);\n    if (!match) {\n        return { kind: 'unparsable' };\n    }\n    return {\n        kind: 'parsable-and-cacheable',\n        hint: {\n            maxAge: +match[1],\n            scope: match[2] === 'public' ? 'PUBLIC' : 'PRIVATE',\n        },\n    };\n}\nfunction cacheAnnotationFromDirectives(directives) {\n    if (!directives)\n        return undefined;\n    const cacheControlDirective = directives.find((directive) => directive.name.value === 'cacheControl');\n    if (!cacheControlDirective)\n        return undefined;\n    if (!cacheControlDirective.arguments)\n        return undefined;\n    const maxAgeArgument = cacheControlDirective.arguments.find((argument) => argument.name.value === 'maxAge');\n    const scopeArgument = cacheControlDirective.arguments.find((argument) => argument.name.value === 'scope');\n    const inheritMaxAgeArgument = cacheControlDirective.arguments.find((argument) => argument.name.value === 'inheritMaxAge');\n    const scopeString = scopeArgument?.value?.kind === 'EnumValue'\n        ? scopeArgument.value.value\n        : undefined;\n    const scope = scopeString === 'PUBLIC' || scopeString === 'PRIVATE'\n        ? scopeString\n        : undefined;\n    if (inheritMaxAgeArgument?.value?.kind === 'BooleanValue' &&\n        inheritMaxAgeArgument.value.value) {\n        return { inheritMaxAge: true, scope };\n    }\n    return {\n        maxAge: maxAgeArgument?.value?.kind === 'IntValue'\n            ? parseInt(maxAgeArgument.value.value)\n            : undefined,\n        scope,\n    };\n}\nfunction cacheAnnotationFromType(t) {\n    if (t.astNode) {\n        const hint = cacheAnnotationFromDirectives(t.astNode.directives);\n        if (hint) {\n            return hint;\n        }\n    }\n    if (t.extensionASTNodes) {\n        for (const node of t.extensionASTNodes) {\n            const hint = cacheAnnotationFromDirectives(node.directives);\n            if (hint) {\n                return hint;\n            }\n        }\n    }\n    return {};\n}\nfunction cacheAnnotationFromField(field) {\n    if (field.astNode) {\n        const hint = cacheAnnotationFromDirectives(field.astNode.directives);\n        if (hint) {\n            return hint;\n        }\n    }\n    return {};\n}\nfunction isRestricted(hint) {\n    return hint.maxAge !== undefined || hint.scope !== undefined;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL2NhY2hlQ29udHJvbC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHNDQUFzQztBQUN0QyxrQkFBa0IsbUJBQU8sQ0FBQyx1REFBUztBQUNuQyx5QkFBeUIsbUJBQU8sQ0FBQyx5RkFBc0I7QUFDdkQsNEJBQTRCLG1CQUFPLENBQUMsK0ZBQXlCO0FBQzdELG9DQUFvQyxtQkFBTyxDQUFDLDBEQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxRQUFRO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0JBQXdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsTUFBTTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxNQUFNO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELDhCQUE4QjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELHVCQUF1QjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtCQUErQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLHlCQUF5QixJQUFJLHNDQUFzQztBQUNqSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9wbHVnaW4vY2FjaGVDb250cm9sL2luZGV4LmpzPzgzNjMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFwb2xsb1NlcnZlclBsdWdpbkNhY2hlQ29udHJvbCA9IHZvaWQgMDtcbmNvbnN0IGdyYXBocWxfMSA9IHJlcXVpcmUoXCJncmFwaHFsXCIpO1xuY29uc3QgY2FjaGVQb2xpY3lfanNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jYWNoZVBvbGljeS5qc1wiKTtcbmNvbnN0IGludGVybmFsUGx1Z2luX2pzXzEgPSByZXF1aXJlKFwiLi4vLi4vaW50ZXJuYWxQbHVnaW4uanNcIik7XG5jb25zdCBscnVfY2FjaGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibHJ1LWNhY2hlXCIpKTtcbmZ1bmN0aW9uIEFwb2xsb1NlcnZlclBsdWdpbkNhY2hlQ29udHJvbChvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKSkge1xuICAgIGxldCB0eXBlQW5ub3RhdGlvbkNhY2hlO1xuICAgIGxldCBmaWVsZEFubm90YXRpb25DYWNoZTtcbiAgICByZXR1cm4gKDAsIGludGVybmFsUGx1Z2luX2pzXzEuaW50ZXJuYWxQbHVnaW4pKHtcbiAgICAgICAgX19pbnRlcm5hbF9wbHVnaW5faWRfXzogJ0NhY2hlQ29udHJvbCcsXG4gICAgICAgIF9faXNfZGlzYWJsZWRfcGx1Z2luX186IGZhbHNlLFxuICAgICAgICBhc3luYyBzZXJ2ZXJXaWxsU3RhcnQoeyBzY2hlbWEgfSkge1xuICAgICAgICAgICAgdHlwZUFubm90YXRpb25DYWNoZSA9IG5ldyBscnVfY2FjaGVfMS5kZWZhdWx0KHtcbiAgICAgICAgICAgICAgICBtYXg6IE9iamVjdC52YWx1ZXMoc2NoZW1hLmdldFR5cGVNYXAoKSkuZmlsdGVyKGdyYXBocWxfMS5pc0NvbXBvc2l0ZVR5cGUpXG4gICAgICAgICAgICAgICAgICAgIC5sZW5ndGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZpZWxkQW5ub3RhdGlvbkNhY2hlID0gbmV3IGxydV9jYWNoZV8xLmRlZmF1bHQoe1xuICAgICAgICAgICAgICAgIG1heDogT2JqZWN0LnZhbHVlcyhzY2hlbWEuZ2V0VHlwZU1hcCgpKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGdyYXBocWxfMS5pc09iamVjdFR5cGUpXG4gICAgICAgICAgICAgICAgICAgIC5mbGF0TWFwKCh0KSA9PiBPYmplY3QudmFsdWVzKHQuZ2V0RmllbGRzKCkpKS5sZW5ndGggK1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHNjaGVtYS5nZXRUeXBlTWFwKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGdyYXBocWxfMS5pc0ludGVyZmFjZVR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmxhdE1hcCgodCkgPT4gT2JqZWN0LnZhbHVlcyh0LmdldEZpZWxkcygpKSkubGVuZ3RoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyByZXF1ZXN0RGlkU3RhcnQocmVxdWVzdENvbnRleHQpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1lbW9pemVkQ2FjaGVBbm5vdGF0aW9uRnJvbVR5cGUodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdHlwZUFubm90YXRpb25DYWNoZS5nZXQodCk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IGNhY2hlQW5ub3RhdGlvbkZyb21UeXBlKHQpO1xuICAgICAgICAgICAgICAgIHR5cGVBbm5vdGF0aW9uQ2FjaGUuc2V0KHQsIGFubm90YXRpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhbm5vdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gbWVtb2l6ZWRDYWNoZUFubm90YXRpb25Gcm9tRmllbGQoZmllbGQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGZpZWxkQW5ub3RhdGlvbkNhY2hlLmdldChmaWVsZCk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IGNhY2hlQW5ub3RhdGlvbkZyb21GaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgZmllbGRBbm5vdGF0aW9uQ2FjaGUuc2V0KGZpZWxkLCBhbm5vdGF0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ub3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRNYXhBZ2UgPSBvcHRpb25zLmRlZmF1bHRNYXhBZ2UgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IGNhbGN1bGF0ZUh0dHBIZWFkZXJzID0gb3B0aW9ucy5jYWxjdWxhdGVIdHRwSGVhZGVycyA/PyB0cnVlO1xuICAgICAgICAgICAgY29uc3QgeyBfX3Rlc3RpbmdfX2NhY2hlSGludHMgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFzeW5jIGV4ZWN1dGlvbkRpZFN0YXJ0KCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZXN0cmljdGVkKHJlcXVlc3RDb250ZXh0Lm92ZXJhbGxDYWNoZVBvbGljeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZha2VGaWVsZFBvbGljeSA9ICgwLCBjYWNoZVBvbGljeV9qc18xLm5ld0NhY2hlUG9saWN5KSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsUmVzb2x2ZUZpZWxkKHsgaW5mbyB9KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2FjaGVIaW50OiAoZHluYW1pY0hpbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWtlRmllbGRQb2xpY3kucmVwbGFjZShkeW5hbWljSGludCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVIaW50OiBmYWtlRmllbGRQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUhpbnRGcm9tVHlwZTogbWVtb2l6ZWRDYWNoZUFubm90YXRpb25Gcm9tVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lsbFJlc29sdmVGaWVsZCh7IGluZm8gfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkUG9saWN5ID0gKDAsIGNhY2hlUG9saWN5X2pzXzEubmV3Q2FjaGVQb2xpY3kpKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluaGVyaXRNYXhBZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRUeXBlID0gKDAsIGdyYXBocWxfMS5nZXROYW1lZFR5cGUpKGluZm8ucmV0dXJuVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgwLCBncmFwaHFsXzEuaXNDb21wb3NpdGVUeXBlKSh0YXJnZXRUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQW5ub3RhdGlvbiA9IG1lbW9pemVkQ2FjaGVBbm5vdGF0aW9uRnJvbVR5cGUodGFyZ2V0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkUG9saWN5LnJlcGxhY2UodHlwZUFubm90YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0TWF4QWdlID0gISF0eXBlQW5ub3RhdGlvbi5pbmhlcml0TWF4QWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZEFubm90YXRpb24gPSBtZW1vaXplZENhY2hlQW5ub3RhdGlvbkZyb21GaWVsZChpbmZvLnBhcmVudFR5cGUuZ2V0RmllbGRzKClbaW5mby5maWVsZE5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRBbm5vdGF0aW9uLmluaGVyaXRNYXhBZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRQb2xpY3kubWF4QWdlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdE1heEFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZEFubm90YXRpb24uc2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkUG9saWN5LnJlcGxhY2UoeyBzY29wZTogZmllbGRBbm5vdGF0aW9uLnNjb3BlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFBvbGljeS5yZXBsYWNlKGZpZWxkQW5ub3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDYWNoZUhpbnQ6IChkeW5hbWljSGludCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRQb2xpY3kucmVwbGFjZShkeW5hbWljSGludCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlSGludDogZmllbGRQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlSGludEZyb21UeXBlOiBtZW1vaXplZENhY2hlQW5ub3RhdGlvbkZyb21UeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkUG9saWN5Lm1heEFnZSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKCgwLCBncmFwaHFsXzEuaXNDb21wb3NpdGVUeXBlKSh0YXJnZXRUeXBlKSAmJiAhaW5oZXJpdE1heEFnZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaW5mby5wYXRoLnByZXYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFBvbGljeS5yZXN0cmljdCh7IG1heEFnZTogZGVmYXVsdE1heEFnZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX190ZXN0aW5nX19jYWNoZUhpbnRzICYmIGlzUmVzdHJpY3RlZChmaWVsZFBvbGljeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSAoMCwgZ3JhcGhxbF8xLnJlc3BvbnNlUGF0aEFzQXJyYXkpKGluZm8ucGF0aCkuam9pbignLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fdGVzdGluZ19fY2FjaGVIaW50cy5oYXMocGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcInNob3VsZG4ndCBoYXBwZW46IGFkZEhpbnQgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UgcGVyIHBhdGhcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3Rlc3RpbmdfX2NhY2hlSGludHMuc2V0KHBhdGgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBZ2U6IGZpZWxkUG9saWN5Lm1heEFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogZmllbGRQb2xpY3kuc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Q29udGV4dC5vdmVyYWxsQ2FjaGVQb2xpY3kucmVzdHJpY3QoZmllbGRQb2xpY3kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXN5bmMgd2lsbFNlbmRSZXNwb25zZShyZXF1ZXN0Q29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGN1bGF0ZUh0dHBIZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyByZXNwb25zZSwgb3ZlcmFsbENhY2hlUG9saWN5IH0gPSByZXF1ZXN0Q29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDYWNoZUNvbnRyb2xIZWFkZXIgPSBwYXJzZUV4aXN0aW5nQ2FjaGVDb250cm9sSGVhZGVyKHJlc3BvbnNlLmh0dHAuaGVhZGVycy5nZXQoJ2NhY2hlLWNvbnRyb2wnKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0NhY2hlQ29udHJvbEhlYWRlci5raW5kID09PSAndW5wYXJzYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZVBvbGljeSA9ICgwLCBjYWNoZVBvbGljeV9qc18xLm5ld0NhY2hlUG9saWN5KSgpO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVBvbGljeS5yZXBsYWNlKG92ZXJhbGxDYWNoZVBvbGljeSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0NhY2hlQ29udHJvbEhlYWRlci5raW5kID09PSAncGFyc2FibGUtYW5kLWNhY2hlYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlUG9saWN5LnJlc3RyaWN0KGV4aXN0aW5nQ2FjaGVDb250cm9sSGVhZGVyLmhpbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlmQ2FjaGVhYmxlID0gY2FjaGVQb2xpY3kucG9saWN5SWZDYWNoZWFibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeUlmQ2FjaGVhYmxlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0NhY2hlQ29udHJvbEhlYWRlci5raW5kICE9PSAndW5jYWNoZWFibGUnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5ib2R5LmtpbmQgPT09ICdzaW5nbGUnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhcmVzcG9uc2UuYm9keS5zaW5nbGVSZXN1bHQuZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5odHRwLmhlYWRlcnMuc2V0KCdjYWNoZS1jb250cm9sJywgYG1heC1hZ2U9JHtwb2xpY3lJZkNhY2hlYWJsZS5tYXhBZ2V9LCAke3BvbGljeUlmQ2FjaGVhYmxlLnNjb3BlLnRvTG93ZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2FsY3VsYXRlSHR0cEhlYWRlcnMgIT09ICdpZi1jYWNoZWFibGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5odHRwLmhlYWRlcnMuc2V0KCdjYWNoZS1jb250cm9sJywgQ0FDSEVfQ09OVFJPTF9IRUFERVJfVU5DQUNIRUFCTEUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnRzLkFwb2xsb1NlcnZlclBsdWdpbkNhY2hlQ29udHJvbCA9IEFwb2xsb1NlcnZlclBsdWdpbkNhY2hlQ29udHJvbDtcbmNvbnN0IENBQ0hFX0NPTlRST0xfSEVBREVSX0NBQ0hFQUJMRV9SRUdFWFAgPSAvXm1heC1hZ2U9KFxcZCspLCAocHVibGljfHByaXZhdGUpJC87XG5jb25zdCBDQUNIRV9DT05UUk9MX0hFQURFUl9VTkNBQ0hFQUJMRSA9ICduby1zdG9yZSc7XG5mdW5jdGlvbiBwYXJzZUV4aXN0aW5nQ2FjaGVDb250cm9sSGVhZGVyKGhlYWRlcikge1xuICAgIGlmICghaGVhZGVyKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICduby1oZWFkZXInIH07XG4gICAgfVxuICAgIGlmIChoZWFkZXIgPT09IENBQ0hFX0NPTlRST0xfSEVBREVSX1VOQ0FDSEVBQkxFKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICd1bmNhY2hlYWJsZScgfTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2ggPSBDQUNIRV9DT05UUk9MX0hFQURFUl9DQUNIRUFCTEVfUkVHRVhQLmV4ZWMoaGVhZGVyKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICd1bnBhcnNhYmxlJyB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiAncGFyc2FibGUtYW5kLWNhY2hlYWJsZScsXG4gICAgICAgIGhpbnQ6IHtcbiAgICAgICAgICAgIG1heEFnZTogK21hdGNoWzFdLFxuICAgICAgICAgICAgc2NvcGU6IG1hdGNoWzJdID09PSAncHVibGljJyA/ICdQVUJMSUMnIDogJ1BSSVZBVEUnLFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBjYWNoZUFubm90YXRpb25Gcm9tRGlyZWN0aXZlcyhkaXJlY3RpdmVzKSB7XG4gICAgaWYgKCFkaXJlY3RpdmVzKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGNhY2hlQ29udHJvbERpcmVjdGl2ZSA9IGRpcmVjdGl2ZXMuZmluZCgoZGlyZWN0aXZlKSA9PiBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gJ2NhY2hlQ29udHJvbCcpO1xuICAgIGlmICghY2FjaGVDb250cm9sRGlyZWN0aXZlKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICghY2FjaGVDb250cm9sRGlyZWN0aXZlLmFyZ3VtZW50cylcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCBtYXhBZ2VBcmd1bWVudCA9IGNhY2hlQ29udHJvbERpcmVjdGl2ZS5hcmd1bWVudHMuZmluZCgoYXJndW1lbnQpID0+IGFyZ3VtZW50Lm5hbWUudmFsdWUgPT09ICdtYXhBZ2UnKTtcbiAgICBjb25zdCBzY29wZUFyZ3VtZW50ID0gY2FjaGVDb250cm9sRGlyZWN0aXZlLmFyZ3VtZW50cy5maW5kKChhcmd1bWVudCkgPT4gYXJndW1lbnQubmFtZS52YWx1ZSA9PT0gJ3Njb3BlJyk7XG4gICAgY29uc3QgaW5oZXJpdE1heEFnZUFyZ3VtZW50ID0gY2FjaGVDb250cm9sRGlyZWN0aXZlLmFyZ3VtZW50cy5maW5kKChhcmd1bWVudCkgPT4gYXJndW1lbnQubmFtZS52YWx1ZSA9PT0gJ2luaGVyaXRNYXhBZ2UnKTtcbiAgICBjb25zdCBzY29wZVN0cmluZyA9IHNjb3BlQXJndW1lbnQ/LnZhbHVlPy5raW5kID09PSAnRW51bVZhbHVlJ1xuICAgICAgICA/IHNjb3BlQXJndW1lbnQudmFsdWUudmFsdWVcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc2NvcGUgPSBzY29wZVN0cmluZyA9PT0gJ1BVQkxJQycgfHwgc2NvcGVTdHJpbmcgPT09ICdQUklWQVRFJ1xuICAgICAgICA/IHNjb3BlU3RyaW5nXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmIChpbmhlcml0TWF4QWdlQXJndW1lbnQ/LnZhbHVlPy5raW5kID09PSAnQm9vbGVhblZhbHVlJyAmJlxuICAgICAgICBpbmhlcml0TWF4QWdlQXJndW1lbnQudmFsdWUudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHsgaW5oZXJpdE1heEFnZTogdHJ1ZSwgc2NvcGUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWF4QWdlOiBtYXhBZ2VBcmd1bWVudD8udmFsdWU/LmtpbmQgPT09ICdJbnRWYWx1ZSdcbiAgICAgICAgICAgID8gcGFyc2VJbnQobWF4QWdlQXJndW1lbnQudmFsdWUudmFsdWUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgc2NvcGUsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNhY2hlQW5ub3RhdGlvbkZyb21UeXBlKHQpIHtcbiAgICBpZiAodC5hc3ROb2RlKSB7XG4gICAgICAgIGNvbnN0IGhpbnQgPSBjYWNoZUFubm90YXRpb25Gcm9tRGlyZWN0aXZlcyh0LmFzdE5vZGUuZGlyZWN0aXZlcyk7XG4gICAgICAgIGlmIChoaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gaGludDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodC5leHRlbnNpb25BU1ROb2Rlcykge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgdC5leHRlbnNpb25BU1ROb2Rlcykge1xuICAgICAgICAgICAgY29uc3QgaGludCA9IGNhY2hlQW5ub3RhdGlvbkZyb21EaXJlY3RpdmVzKG5vZGUuZGlyZWN0aXZlcyk7XG4gICAgICAgICAgICBpZiAoaGludCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoaW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7fTtcbn1cbmZ1bmN0aW9uIGNhY2hlQW5ub3RhdGlvbkZyb21GaWVsZChmaWVsZCkge1xuICAgIGlmIChmaWVsZC5hc3ROb2RlKSB7XG4gICAgICAgIGNvbnN0IGhpbnQgPSBjYWNoZUFubm90YXRpb25Gcm9tRGlyZWN0aXZlcyhmaWVsZC5hc3ROb2RlLmRpcmVjdGl2ZXMpO1xuICAgICAgICBpZiAoaGludCkge1xuICAgICAgICAgICAgcmV0dXJuIGhpbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHt9O1xufVxuZnVuY3Rpb24gaXNSZXN0cmljdGVkKGhpbnQpIHtcbiAgICByZXR1cm4gaGludC5tYXhBZ2UgIT09IHVuZGVmaW5lZCB8fCBoaW50LnNjb3BlICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/cacheControl/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/disableSuggestions/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/disableSuggestions/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ApolloServerPluginDisableSuggestions = void 0;\nconst internalPlugin_js_1 = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalPlugin.js\");\nfunction ApolloServerPluginDisableSuggestions() {\n    return (0, internalPlugin_js_1.internalPlugin)({\n        __internal_plugin_id__: 'DisableSuggestions',\n        __is_disabled_plugin__: false,\n        async requestDidStart() {\n            return {\n                async validationDidStart() {\n                    return async (validationErrors) => {\n                        validationErrors?.forEach((error) => {\n                            error.message = error.message.replace(/ ?Did you mean(.+?)\\?$/, '');\n                        });\n                    };\n                },\n            };\n        },\n    });\n}\nexports.ApolloServerPluginDisableSuggestions = ApolloServerPluginDisableSuggestions;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL2Rpc2FibGVTdWdnZXN0aW9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw0Q0FBNEM7QUFDNUMsNEJBQTRCLG1CQUFPLENBQUMsK0ZBQXlCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLDRDQUE0QztBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL2Rpc2FibGVTdWdnZXN0aW9ucy9pbmRleC5qcz84ODZmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BcG9sbG9TZXJ2ZXJQbHVnaW5EaXNhYmxlU3VnZ2VzdGlvbnMgPSB2b2lkIDA7XG5jb25zdCBpbnRlcm5hbFBsdWdpbl9qc18xID0gcmVxdWlyZShcIi4uLy4uL2ludGVybmFsUGx1Z2luLmpzXCIpO1xuZnVuY3Rpb24gQXBvbGxvU2VydmVyUGx1Z2luRGlzYWJsZVN1Z2dlc3Rpb25zKCkge1xuICAgIHJldHVybiAoMCwgaW50ZXJuYWxQbHVnaW5fanNfMS5pbnRlcm5hbFBsdWdpbikoe1xuICAgICAgICBfX2ludGVybmFsX3BsdWdpbl9pZF9fOiAnRGlzYWJsZVN1Z2dlc3Rpb25zJyxcbiAgICAgICAgX19pc19kaXNhYmxlZF9wbHVnaW5fXzogZmFsc2UsXG4gICAgICAgIGFzeW5jIHJlcXVlc3REaWRTdGFydCgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXN5bmMgdmFsaWRhdGlvbkRpZFN0YXJ0KCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXN5bmMgKHZhbGlkYXRpb25FcnJvcnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM/LmZvckVhY2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UucmVwbGFjZSgvID9EaWQgeW91IG1lYW4oLis/KVxcPyQvLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmV4cG9ydHMuQXBvbGxvU2VydmVyUGx1Z2luRGlzYWJsZVN1Z2dlc3Rpb25zID0gQXBvbGxvU2VydmVyUGx1Z2luRGlzYWJsZVN1Z2dlc3Rpb25zO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/disableSuggestions/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/inlineTrace/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/inlineTrace/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ApolloServerPluginInlineTrace = void 0;\nconst usage_reporting_protobuf_1 = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js\");\nconst traceTreeBuilder_js_1 = __webpack_require__(/*! ../traceTreeBuilder.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/traceTreeBuilder.js\");\nconst internalPlugin_js_1 = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalPlugin.js\");\nconst schemaIsSubgraph_js_1 = __webpack_require__(/*! ../schemaIsSubgraph.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaIsSubgraph.js\");\nfunction ApolloServerPluginInlineTrace(options = Object.create(null)) {\n    let enabled = options.__onlyIfSchemaIsSubgraph ? null : true;\n    return (0, internalPlugin_js_1.internalPlugin)({\n        __internal_plugin_id__: 'InlineTrace',\n        __is_disabled_plugin__: false,\n        async serverWillStart({ schema, logger }) {\n            if (enabled === null) {\n                enabled = (0, schemaIsSubgraph_js_1.schemaIsSubgraph)(schema);\n                if (enabled) {\n                    logger.info('Enabling inline tracing for this subgraph. To disable, use ' +\n                        'ApolloServerPluginInlineTraceDisabled.');\n                }\n            }\n        },\n        async requestDidStart({ request: { http }, metrics }) {\n            if (!enabled) {\n                return;\n            }\n            const treeBuilder = new traceTreeBuilder_js_1.TraceTreeBuilder({\n                maskedBy: 'ApolloServerPluginInlineTrace',\n                sendErrors: options.includeErrors,\n            });\n            if (http?.headers.get('apollo-federation-include-trace') !== 'ftv1') {\n                return;\n            }\n            if (metrics.captureTraces === false) {\n                return;\n            }\n            metrics.captureTraces = true;\n            treeBuilder.startTiming();\n            return {\n                async executionDidStart() {\n                    return {\n                        willResolveField({ info }) {\n                            return treeBuilder.willResolveField(info);\n                        },\n                    };\n                },\n                async didEncounterErrors({ errors }) {\n                    treeBuilder.didEncounterErrors(errors);\n                },\n                async willSendResponse({ response }) {\n                    treeBuilder.stopTiming();\n                    if (response.body.kind === 'incremental') {\n                        return;\n                    }\n                    if (metrics.queryPlanTrace) {\n                        treeBuilder.trace.queryPlan = metrics.queryPlanTrace;\n                    }\n                    const encodedUint8Array = usage_reporting_protobuf_1.Trace.encode(treeBuilder.trace).finish();\n                    const encodedBuffer = Buffer.from(encodedUint8Array, encodedUint8Array.byteOffset, encodedUint8Array.byteLength);\n                    const extensions = response.body.singleResult.extensions ||\n                        (response.body.singleResult.extensions = Object.create(null));\n                    if (typeof extensions.ftv1 !== 'undefined') {\n                        throw new Error('The `ftv1` extension was already present.');\n                    }\n                    extensions.ftv1 = encodedBuffer.toString('base64');\n                },\n            };\n        },\n    });\n}\nexports.ApolloServerPluginInlineTrace = ApolloServerPluginInlineTrace;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL2lubGluZVRyYWNlL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHFDQUFxQztBQUNyQyxtQ0FBbUMsbUJBQU8sQ0FBQyx5SEFBa0M7QUFDN0UsOEJBQThCLG1CQUFPLENBQUMsdUdBQXdCO0FBQzlELDRCQUE0QixtQkFBTyxDQUFDLCtGQUF5QjtBQUM3RCw4QkFBOEIsbUJBQU8sQ0FBQyx1R0FBd0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxnQkFBZ0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0NBQWdDLFdBQVcsTUFBTSxXQUFXO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLE1BQU07QUFDakQ7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakIsMkNBQTJDLFFBQVE7QUFDbkQ7QUFDQSxpQkFBaUI7QUFDakIseUNBQXlDLFVBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLHFDQUFxQztBQUNyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL2lubGluZVRyYWNlL2luZGV4LmpzP2U1MjkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFwb2xsb1NlcnZlclBsdWdpbklubGluZVRyYWNlID0gdm9pZCAwO1xuY29uc3QgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEgPSByZXF1aXJlKFwiQGFwb2xsby91c2FnZS1yZXBvcnRpbmctcHJvdG9idWZcIik7XG5jb25zdCB0cmFjZVRyZWVCdWlsZGVyX2pzXzEgPSByZXF1aXJlKFwiLi4vdHJhY2VUcmVlQnVpbGRlci5qc1wiKTtcbmNvbnN0IGludGVybmFsUGx1Z2luX2pzXzEgPSByZXF1aXJlKFwiLi4vLi4vaW50ZXJuYWxQbHVnaW4uanNcIik7XG5jb25zdCBzY2hlbWFJc1N1YmdyYXBoX2pzXzEgPSByZXF1aXJlKFwiLi4vc2NoZW1hSXNTdWJncmFwaC5qc1wiKTtcbmZ1bmN0aW9uIEFwb2xsb1NlcnZlclBsdWdpbklubGluZVRyYWNlKG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpKSB7XG4gICAgbGV0IGVuYWJsZWQgPSBvcHRpb25zLl9fb25seUlmU2NoZW1hSXNTdWJncmFwaCA/IG51bGwgOiB0cnVlO1xuICAgIHJldHVybiAoMCwgaW50ZXJuYWxQbHVnaW5fanNfMS5pbnRlcm5hbFBsdWdpbikoe1xuICAgICAgICBfX2ludGVybmFsX3BsdWdpbl9pZF9fOiAnSW5saW5lVHJhY2UnLFxuICAgICAgICBfX2lzX2Rpc2FibGVkX3BsdWdpbl9fOiBmYWxzZSxcbiAgICAgICAgYXN5bmMgc2VydmVyV2lsbFN0YXJ0KHsgc2NoZW1hLCBsb2dnZXIgfSkge1xuICAgICAgICAgICAgaWYgKGVuYWJsZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkID0gKDAsIHNjaGVtYUlzU3ViZ3JhcGhfanNfMS5zY2hlbWFJc1N1YmdyYXBoKShzY2hlbWEpO1xuICAgICAgICAgICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdFbmFibGluZyBpbmxpbmUgdHJhY2luZyBmb3IgdGhpcyBzdWJncmFwaC4gVG8gZGlzYWJsZSwgdXNlICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0Fwb2xsb1NlcnZlclBsdWdpbklubGluZVRyYWNlRGlzYWJsZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyByZXF1ZXN0RGlkU3RhcnQoeyByZXF1ZXN0OiB7IGh0dHAgfSwgbWV0cmljcyB9KSB7XG4gICAgICAgICAgICBpZiAoIWVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0cmVlQnVpbGRlciA9IG5ldyB0cmFjZVRyZWVCdWlsZGVyX2pzXzEuVHJhY2VUcmVlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgbWFza2VkQnk6ICdBcG9sbG9TZXJ2ZXJQbHVnaW5JbmxpbmVUcmFjZScsXG4gICAgICAgICAgICAgICAgc2VuZEVycm9yczogb3B0aW9ucy5pbmNsdWRlRXJyb3JzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaHR0cD8uaGVhZGVycy5nZXQoJ2Fwb2xsby1mZWRlcmF0aW9uLWluY2x1ZGUtdHJhY2UnKSAhPT0gJ2Z0djEnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1ldHJpY3MuY2FwdHVyZVRyYWNlcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXRyaWNzLmNhcHR1cmVUcmFjZXMgPSB0cnVlO1xuICAgICAgICAgICAgdHJlZUJ1aWxkZXIuc3RhcnRUaW1pbmcoKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXN5bmMgZXhlY3V0aW9uRGlkU3RhcnQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWxsUmVzb2x2ZUZpZWxkKHsgaW5mbyB9KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyZWVCdWlsZGVyLndpbGxSZXNvbHZlRmllbGQoaW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXN5bmMgZGlkRW5jb3VudGVyRXJyb3JzKHsgZXJyb3JzIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIuZGlkRW5jb3VudGVyRXJyb3JzKGVycm9ycyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhc3luYyB3aWxsU2VuZFJlc3BvbnNlKHsgcmVzcG9uc2UgfSkge1xuICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci5zdG9wVGltaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5ib2R5LmtpbmQgPT09ICdpbmNyZW1lbnRhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWV0cmljcy5xdWVyeVBsYW5UcmFjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIudHJhY2UucXVlcnlQbGFuID0gbWV0cmljcy5xdWVyeVBsYW5UcmFjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkVWludDhBcnJheSA9IHVzYWdlX3JlcG9ydGluZ19wcm90b2J1Zl8xLlRyYWNlLmVuY29kZSh0cmVlQnVpbGRlci50cmFjZSkuZmluaXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kZWRCdWZmZXIgPSBCdWZmZXIuZnJvbShlbmNvZGVkVWludDhBcnJheSwgZW5jb2RlZFVpbnQ4QXJyYXkuYnl0ZU9mZnNldCwgZW5jb2RlZFVpbnQ4QXJyYXkuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSByZXNwb25zZS5ib2R5LnNpbmdsZVJlc3VsdC5leHRlbnNpb25zIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAocmVzcG9uc2UuYm9keS5zaW5nbGVSZXN1bHQuZXh0ZW5zaW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4dGVuc2lvbnMuZnR2MSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGBmdHYxYCBleHRlbnNpb24gd2FzIGFscmVhZHkgcHJlc2VudC4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zLmZ0djEgPSBlbmNvZGVkQnVmZmVyLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmV4cG9ydHMuQXBvbGxvU2VydmVyUGx1Z2luSW5saW5lVHJhY2UgPSBBcG9sbG9TZXJ2ZXJQbHVnaW5JbmxpbmVUcmFjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/inlineTrace/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/landingPage/default/getEmbeddedHTML.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/landingPage/default/getEmbeddedHTML.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getEmbeddedSandboxHTML = exports.getEmbeddedExplorerHTML = void 0;\nfunction getConfigStringForHtml(config) {\n    return JSON.stringify(config)\n        .replace('<', '\\\\u003c')\n        .replace('>', '\\\\u003e')\n        .replace('&', '\\\\u0026')\n        .replace(\"'\", '\\\\u0027');\n}\nconst getEmbeddedExplorerHTML = (explorerCdnVersion, config, apolloServerVersion, nonce) => {\n    const productionLandingPageEmbedConfigOrDefault = {\n        displayOptions: {},\n        persistExplorerState: false,\n        runTelemetry: true,\n        ...(typeof config.embed === 'boolean' ? {} : config.embed),\n    };\n    const embeddedExplorerParams = {\n        graphRef: config.graphRef,\n        target: '#embeddableExplorer',\n        initialState: {\n            ...('document' in config || 'headers' in config || 'variables' in config\n                ? {\n                    document: config.document,\n                    headers: config.headers,\n                    variables: config.variables,\n                }\n                : {}),\n            ...('collectionId' in config\n                ? {\n                    collectionId: config.collectionId,\n                    operationId: config.operationId,\n                }\n                : {}),\n            displayOptions: {\n                ...productionLandingPageEmbedConfigOrDefault.displayOptions,\n            },\n        },\n        persistExplorerState: productionLandingPageEmbedConfigOrDefault.persistExplorerState,\n        includeCookies: config.includeCookies,\n        runtime: apolloServerVersion,\n        runTelemetry: productionLandingPageEmbedConfigOrDefault.runTelemetry,\n        allowDynamicStyles: false,\n    };\n    return `\n<div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>Apollo Explorer cannot be loaded; it appears that you might be offline.</p>\n</div>\n<style nonce=${nonce}>\n  iframe {\n    background-color: white;\n    height: 100%;\n    width: 100%;\n    border: none;\n  }\n  #embeddableExplorer {\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    top: 0;\n  }\n</style>\n<div id=\"embeddableExplorer\"></div>\n<script nonce=\"${nonce}\" src=\"https://embeddable-explorer.cdn.apollographql.com/${encodeURIComponent(explorerCdnVersion)}/embeddable-explorer.umd.production.min.js?runtime=${encodeURIComponent(apolloServerVersion)}\"></script>\n<script nonce=\"${nonce}\">\n  var endpointUrl = window.location.href;\n  var embeddedExplorerConfig = ${getConfigStringForHtml(embeddedExplorerParams)};\n  new window.EmbeddedExplorer({\n    ...embeddedExplorerConfig,\n    endpointUrl,\n  });\n</script>\n`;\n};\nexports.getEmbeddedExplorerHTML = getEmbeddedExplorerHTML;\nconst getEmbeddedSandboxHTML = (sandboxCdnVersion, config, apolloServerVersion, nonce) => {\n    const localDevelopmentEmbedConfigOrDefault = {\n        runTelemetry: true,\n        endpointIsEditable: false,\n        initialState: {},\n        ...(typeof config.embed === 'boolean' ? {} : (config.embed ?? {})),\n    };\n    const embeddedSandboxConfig = {\n        target: '#embeddableSandbox',\n        initialState: {\n            ...('document' in config || 'headers' in config || 'variables' in config\n                ? {\n                    document: config.document,\n                    variables: config.variables,\n                    headers: config.headers,\n                }\n                : {}),\n            ...('collectionId' in config\n                ? {\n                    collectionId: config.collectionId,\n                    operationId: config.operationId,\n                }\n                : {}),\n            includeCookies: config.includeCookies,\n            ...localDevelopmentEmbedConfigOrDefault.initialState,\n        },\n        hideCookieToggle: false,\n        endpointIsEditable: localDevelopmentEmbedConfigOrDefault.endpointIsEditable,\n        runtime: apolloServerVersion,\n        runTelemetry: localDevelopmentEmbedConfigOrDefault.runTelemetry,\n        allowDynamicStyles: false,\n    };\n    return `\n<div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>Apollo Sandbox cannot be loaded; it appears that you might be offline.</p>\n</div>\n<style nonce=${nonce}>\n  iframe {\n    background-color: white;\n    height: 100%;\n    width: 100%;\n    border: none;\n  }\n  #embeddableSandbox {\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    top: 0;\n  }\n</style>\n<div id=\"embeddableSandbox\"></div>\n<script nonce=\"${nonce}\" src=\"https://embeddable-sandbox.cdn.apollographql.com/${encodeURIComponent(sandboxCdnVersion)}/embeddable-sandbox.umd.production.min.js?runtime=${encodeURIComponent(apolloServerVersion)}\"></script>\n<script nonce=\"${nonce}\">\n  var initialEndpoint = window.location.href;\n  var embeddedSandboxConfig = ${getConfigStringForHtml(embeddedSandboxConfig)};\n  new window.EmbeddedSandbox(\n    {\n      ...embeddedSandboxConfig,\n      initialEndpoint,\n    }\n  );\n</script>\n`;\n};\nexports.getEmbeddedSandboxHTML = getEmbeddedSandboxHTML;\n//# sourceMappingURL=getEmbeddedHTML.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL2xhbmRpbmdQYWdlL2RlZmF1bHQvZ2V0RW1iZWRkZWRIVE1MLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDhCQUE4QixHQUFHLCtCQUErQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0EsZUFBZSxNQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTSwyREFBMkQsdUNBQXVDLHFEQUFxRCx3Q0FBd0M7QUFDdE4saUJBQWlCLE1BQU07QUFDdkI7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixtREFBbUQscUJBQXFCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQSxlQUFlLE1BQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixNQUFNLDBEQUEwRCxzQ0FBc0Msb0RBQW9ELHdDQUF3QztBQUNuTixpQkFBaUIsTUFBTTtBQUN2QjtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3BsdWdpbi9sYW5kaW5nUGFnZS9kZWZhdWx0L2dldEVtYmVkZGVkSFRNTC5qcz85ZjBhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRFbWJlZGRlZFNhbmRib3hIVE1MID0gZXhwb3J0cy5nZXRFbWJlZGRlZEV4cGxvcmVySFRNTCA9IHZvaWQgMDtcbmZ1bmN0aW9uIGdldENvbmZpZ1N0cmluZ0Zvckh0bWwoY29uZmlnKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbmZpZylcbiAgICAgICAgLnJlcGxhY2UoJzwnLCAnXFxcXHUwMDNjJylcbiAgICAgICAgLnJlcGxhY2UoJz4nLCAnXFxcXHUwMDNlJylcbiAgICAgICAgLnJlcGxhY2UoJyYnLCAnXFxcXHUwMDI2JylcbiAgICAgICAgLnJlcGxhY2UoXCInXCIsICdcXFxcdTAwMjcnKTtcbn1cbmNvbnN0IGdldEVtYmVkZGVkRXhwbG9yZXJIVE1MID0gKGV4cGxvcmVyQ2RuVmVyc2lvbiwgY29uZmlnLCBhcG9sbG9TZXJ2ZXJWZXJzaW9uLCBub25jZSkgPT4ge1xuICAgIGNvbnN0IHByb2R1Y3Rpb25MYW5kaW5nUGFnZUVtYmVkQ29uZmlnT3JEZWZhdWx0ID0ge1xuICAgICAgICBkaXNwbGF5T3B0aW9uczoge30sXG4gICAgICAgIHBlcnNpc3RFeHBsb3JlclN0YXRlOiBmYWxzZSxcbiAgICAgICAgcnVuVGVsZW1ldHJ5OiB0cnVlLFxuICAgICAgICAuLi4odHlwZW9mIGNvbmZpZy5lbWJlZCA9PT0gJ2Jvb2xlYW4nID8ge30gOiBjb25maWcuZW1iZWQpLFxuICAgIH07XG4gICAgY29uc3QgZW1iZWRkZWRFeHBsb3JlclBhcmFtcyA9IHtcbiAgICAgICAgZ3JhcGhSZWY6IGNvbmZpZy5ncmFwaFJlZixcbiAgICAgICAgdGFyZ2V0OiAnI2VtYmVkZGFibGVFeHBsb3JlcicsXG4gICAgICAgIGluaXRpYWxTdGF0ZToge1xuICAgICAgICAgICAgLi4uKCdkb2N1bWVudCcgaW4gY29uZmlnIHx8ICdoZWFkZXJzJyBpbiBjb25maWcgfHwgJ3ZhcmlhYmxlcycgaW4gY29uZmlnXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBjb25maWcuZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGNvbmZpZy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgLi4uKCdjb2xsZWN0aW9uSWQnIGluIGNvbmZpZ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGNvbmZpZy5jb2xsZWN0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbklkOiBjb25maWcub3BlcmF0aW9uSWQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgZGlzcGxheU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAuLi5wcm9kdWN0aW9uTGFuZGluZ1BhZ2VFbWJlZENvbmZpZ09yRGVmYXVsdC5kaXNwbGF5T3B0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHBlcnNpc3RFeHBsb3JlclN0YXRlOiBwcm9kdWN0aW9uTGFuZGluZ1BhZ2VFbWJlZENvbmZpZ09yRGVmYXVsdC5wZXJzaXN0RXhwbG9yZXJTdGF0ZSxcbiAgICAgICAgaW5jbHVkZUNvb2tpZXM6IGNvbmZpZy5pbmNsdWRlQ29va2llcyxcbiAgICAgICAgcnVudGltZTogYXBvbGxvU2VydmVyVmVyc2lvbixcbiAgICAgICAgcnVuVGVsZW1ldHJ5OiBwcm9kdWN0aW9uTGFuZGluZ1BhZ2VFbWJlZENvbmZpZ09yRGVmYXVsdC5ydW5UZWxlbWV0cnksXG4gICAgICAgIGFsbG93RHluYW1pY1N0eWxlczogZmFsc2UsXG4gICAgfTtcbiAgICByZXR1cm4gYFxuPGRpdiBjbGFzcz1cImZhbGxiYWNrXCI+XG4gIDxoMT5XZWxjb21lIHRvIEFwb2xsbyBTZXJ2ZXI8L2gxPlxuICA8cD5BcG9sbG8gRXhwbG9yZXIgY2Fubm90IGJlIGxvYWRlZDsgaXQgYXBwZWFycyB0aGF0IHlvdSBtaWdodCBiZSBvZmZsaW5lLjwvcD5cbjwvZGl2PlxuPHN0eWxlIG5vbmNlPSR7bm9uY2V9PlxuICBpZnJhbWUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbiAgI2VtYmVkZGFibGVFeHBsb3JlciB7XG4gICAgd2lkdGg6IDEwMHZ3O1xuICAgIGhlaWdodDogMTAwdmg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgfVxuPC9zdHlsZT5cbjxkaXYgaWQ9XCJlbWJlZGRhYmxlRXhwbG9yZXJcIj48L2Rpdj5cbjxzY3JpcHQgbm9uY2U9XCIke25vbmNlfVwiIHNyYz1cImh0dHBzOi8vZW1iZWRkYWJsZS1leHBsb3Jlci5jZG4uYXBvbGxvZ3JhcGhxbC5jb20vJHtlbmNvZGVVUklDb21wb25lbnQoZXhwbG9yZXJDZG5WZXJzaW9uKX0vZW1iZWRkYWJsZS1leHBsb3Jlci51bWQucHJvZHVjdGlvbi5taW4uanM/cnVudGltZT0ke2VuY29kZVVSSUNvbXBvbmVudChhcG9sbG9TZXJ2ZXJWZXJzaW9uKX1cIj48L3NjcmlwdD5cbjxzY3JpcHQgbm9uY2U9XCIke25vbmNlfVwiPlxuICB2YXIgZW5kcG9pbnRVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgdmFyIGVtYmVkZGVkRXhwbG9yZXJDb25maWcgPSAke2dldENvbmZpZ1N0cmluZ0Zvckh0bWwoZW1iZWRkZWRFeHBsb3JlclBhcmFtcyl9O1xuICBuZXcgd2luZG93LkVtYmVkZGVkRXhwbG9yZXIoe1xuICAgIC4uLmVtYmVkZGVkRXhwbG9yZXJDb25maWcsXG4gICAgZW5kcG9pbnRVcmwsXG4gIH0pO1xuPC9zY3JpcHQ+XG5gO1xufTtcbmV4cG9ydHMuZ2V0RW1iZWRkZWRFeHBsb3JlckhUTUwgPSBnZXRFbWJlZGRlZEV4cGxvcmVySFRNTDtcbmNvbnN0IGdldEVtYmVkZGVkU2FuZGJveEhUTUwgPSAoc2FuZGJveENkblZlcnNpb24sIGNvbmZpZywgYXBvbGxvU2VydmVyVmVyc2lvbiwgbm9uY2UpID0+IHtcbiAgICBjb25zdCBsb2NhbERldmVsb3BtZW50RW1iZWRDb25maWdPckRlZmF1bHQgPSB7XG4gICAgICAgIHJ1blRlbGVtZXRyeTogdHJ1ZSxcbiAgICAgICAgZW5kcG9pbnRJc0VkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgaW5pdGlhbFN0YXRlOiB7fSxcbiAgICAgICAgLi4uKHR5cGVvZiBjb25maWcuZW1iZWQgPT09ICdib29sZWFuJyA/IHt9IDogKGNvbmZpZy5lbWJlZCA/PyB7fSkpLFxuICAgIH07XG4gICAgY29uc3QgZW1iZWRkZWRTYW5kYm94Q29uZmlnID0ge1xuICAgICAgICB0YXJnZXQ6ICcjZW1iZWRkYWJsZVNhbmRib3gnLFxuICAgICAgICBpbml0aWFsU3RhdGU6IHtcbiAgICAgICAgICAgIC4uLignZG9jdW1lbnQnIGluIGNvbmZpZyB8fCAnaGVhZGVycycgaW4gY29uZmlnIHx8ICd2YXJpYWJsZXMnIGluIGNvbmZpZ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogY29uZmlnLmRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGNvbmZpZy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIC4uLignY29sbGVjdGlvbklkJyBpbiBjb25maWdcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBjb25maWcuY29sbGVjdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25JZDogY29uZmlnLm9wZXJhdGlvbklkLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIGluY2x1ZGVDb29raWVzOiBjb25maWcuaW5jbHVkZUNvb2tpZXMsXG4gICAgICAgICAgICAuLi5sb2NhbERldmVsb3BtZW50RW1iZWRDb25maWdPckRlZmF1bHQuaW5pdGlhbFN0YXRlLFxuICAgICAgICB9LFxuICAgICAgICBoaWRlQ29va2llVG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgZW5kcG9pbnRJc0VkaXRhYmxlOiBsb2NhbERldmVsb3BtZW50RW1iZWRDb25maWdPckRlZmF1bHQuZW5kcG9pbnRJc0VkaXRhYmxlLFxuICAgICAgICBydW50aW1lOiBhcG9sbG9TZXJ2ZXJWZXJzaW9uLFxuICAgICAgICBydW5UZWxlbWV0cnk6IGxvY2FsRGV2ZWxvcG1lbnRFbWJlZENvbmZpZ09yRGVmYXVsdC5ydW5UZWxlbWV0cnksXG4gICAgICAgIGFsbG93RHluYW1pY1N0eWxlczogZmFsc2UsXG4gICAgfTtcbiAgICByZXR1cm4gYFxuPGRpdiBjbGFzcz1cImZhbGxiYWNrXCI+XG4gIDxoMT5XZWxjb21lIHRvIEFwb2xsbyBTZXJ2ZXI8L2gxPlxuICA8cD5BcG9sbG8gU2FuZGJveCBjYW5ub3QgYmUgbG9hZGVkOyBpdCBhcHBlYXJzIHRoYXQgeW91IG1pZ2h0IGJlIG9mZmxpbmUuPC9wPlxuPC9kaXY+XG48c3R5bGUgbm9uY2U9JHtub25jZX0+XG4gIGlmcmFtZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuICAjZW1iZWRkYWJsZVNhbmRib3gge1xuICAgIHdpZHRoOiAxMDB2dztcbiAgICBoZWlnaHQ6IDEwMHZoO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gIH1cbjwvc3R5bGU+XG48ZGl2IGlkPVwiZW1iZWRkYWJsZVNhbmRib3hcIj48L2Rpdj5cbjxzY3JpcHQgbm9uY2U9XCIke25vbmNlfVwiIHNyYz1cImh0dHBzOi8vZW1iZWRkYWJsZS1zYW5kYm94LmNkbi5hcG9sbG9ncmFwaHFsLmNvbS8ke2VuY29kZVVSSUNvbXBvbmVudChzYW5kYm94Q2RuVmVyc2lvbil9L2VtYmVkZGFibGUtc2FuZGJveC51bWQucHJvZHVjdGlvbi5taW4uanM/cnVudGltZT0ke2VuY29kZVVSSUNvbXBvbmVudChhcG9sbG9TZXJ2ZXJWZXJzaW9uKX1cIj48L3NjcmlwdD5cbjxzY3JpcHQgbm9uY2U9XCIke25vbmNlfVwiPlxuICB2YXIgaW5pdGlhbEVuZHBvaW50ID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBlbWJlZGRlZFNhbmRib3hDb25maWcgPSAke2dldENvbmZpZ1N0cmluZ0Zvckh0bWwoZW1iZWRkZWRTYW5kYm94Q29uZmlnKX07XG4gIG5ldyB3aW5kb3cuRW1iZWRkZWRTYW5kYm94KFxuICAgIHtcbiAgICAgIC4uLmVtYmVkZGVkU2FuZGJveENvbmZpZyxcbiAgICAgIGluaXRpYWxFbmRwb2ludCxcbiAgICB9XG4gICk7XG48L3NjcmlwdD5cbmA7XG59O1xuZXhwb3J0cy5nZXRFbWJlZGRlZFNhbmRib3hIVE1MID0gZ2V0RW1iZWRkZWRTYW5kYm94SFRNTDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldEVtYmVkZGVkSFRNTC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/landingPage/default/getEmbeddedHTML.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/landingPage/default/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/landingPage/default/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION = exports.DEFAULT_EMBEDDED_SANDBOX_VERSION = exports.DEFAULT_EMBEDDED_EXPLORER_VERSION = exports.ApolloServerPluginLandingPageProductionDefault = exports.ApolloServerPluginLandingPageLocalDefault = void 0;\nconst getEmbeddedHTML_js_1 = __webpack_require__(/*! ./getEmbeddedHTML.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/landingPage/default/getEmbeddedHTML.js\");\nconst packageVersion_js_1 = __webpack_require__(/*! ../../../generated/packageVersion.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/generated/packageVersion.js\");\nconst utils_createhash_1 = __webpack_require__(/*! @apollo/utils.createhash */ \"(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\");\nconst uuid_1 = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/index.js\");\nfunction ApolloServerPluginLandingPageLocalDefault(options = {}) {\n    const { version, __internal_apolloStudioEnv__, ...rest } = {\n        embed: true,\n        ...options,\n    };\n    return ApolloServerPluginLandingPageDefault(version, {\n        isProd: false,\n        apolloStudioEnv: __internal_apolloStudioEnv__,\n        ...rest,\n    });\n}\nexports.ApolloServerPluginLandingPageLocalDefault = ApolloServerPluginLandingPageLocalDefault;\nfunction ApolloServerPluginLandingPageProductionDefault(options = {}) {\n    const { version, __internal_apolloStudioEnv__, ...rest } = options;\n    return ApolloServerPluginLandingPageDefault(version, {\n        isProd: true,\n        apolloStudioEnv: __internal_apolloStudioEnv__,\n        ...rest,\n    });\n}\nexports.ApolloServerPluginLandingPageProductionDefault = ApolloServerPluginLandingPageProductionDefault;\nfunction encodeConfig(config) {\n    return JSON.stringify(encodeURIComponent(JSON.stringify(config)));\n}\nconst getNonEmbeddedLandingPageHTML = (cdnVersion, config, apolloServerVersion, nonce) => {\n    const encodedConfig = encodeConfig(config);\n    return `\n <div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>The full landing page cannot be loaded; it appears that you might be offline.</p>\n</div>\n<script nonce=\"${nonce}\">window.landingPage = ${encodedConfig};</script>\n<script nonce=\"${nonce}\" src=\"https://apollo-server-landing-page.cdn.apollographql.com/${encodeURIComponent(cdnVersion)}/static/js/main.js?runtime=${apolloServerVersion}\"></script>`;\n};\nexports.DEFAULT_EMBEDDED_EXPLORER_VERSION = 'v3';\nexports.DEFAULT_EMBEDDED_SANDBOX_VERSION = 'v2';\nexports.DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION = '_latest';\nfunction ApolloServerPluginLandingPageDefault(maybeVersion, config) {\n    const explorerVersion = maybeVersion ?? exports.DEFAULT_EMBEDDED_EXPLORER_VERSION;\n    const sandboxVersion = maybeVersion ?? exports.DEFAULT_EMBEDDED_SANDBOX_VERSION;\n    const apolloServerLandingPageVersion = maybeVersion ?? exports.DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION;\n    const apolloServerVersion = `@apollo/server@${packageVersion_js_1.packageVersion}`;\n    const scriptSafeList = [\n        'https://apollo-server-landing-page.cdn.apollographql.com',\n        'https://embeddable-sandbox.cdn.apollographql.com',\n        'https://embeddable-explorer.cdn.apollographql.com',\n    ].join(' ');\n    const styleSafeList = [\n        'https://apollo-server-landing-page.cdn.apollographql.com',\n        'https://embeddable-sandbox.cdn.apollographql.com',\n        'https://embeddable-explorer.cdn.apollographql.com',\n        'https://fonts.googleapis.com',\n    ].join(' ');\n    const iframeSafeList = [\n        'https://explorer.embed.apollographql.com',\n        'https://sandbox.embed.apollographql.com',\n        'https://embed.apollo.local:3000',\n    ].join(' ');\n    return {\n        __internal_installed_implicitly__: false,\n        async serverWillStart(server) {\n            if (config.precomputedNonce) {\n                server.logger.warn(\"The `precomputedNonce` landing page configuration option is deprecated. Removing this option is strictly an improvement to Apollo Server's landing page Content Security Policy (CSP) implementation for preventing XSS attacks.\");\n            }\n            return {\n                async renderLandingPage() {\n                    const encodedASLandingPageVersion = encodeURIComponent(apolloServerLandingPageVersion);\n                    async function html() {\n                        const nonce = config.precomputedNonce ??\n                            (0, utils_createhash_1.createHash)('sha256').update((0, uuid_1.v4)()).digest('hex');\n                        const scriptCsp = `script-src 'self' 'nonce-${nonce}' ${scriptSafeList}`;\n                        const styleCsp = `style-src 'nonce-${nonce}' ${styleSafeList}`;\n                        const imageCsp = `img-src https://apollo-server-landing-page.cdn.apollographql.com`;\n                        const manifestCsp = `manifest-src https://apollo-server-landing-page.cdn.apollographql.com`;\n                        const frameCsp = `frame-src ${iframeSafeList}`;\n                        return `\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"Content-Security-Policy\" content=\"${scriptCsp}; ${styleCsp}; ${imageCsp}; ${manifestCsp}; ${frameCsp}\" />\n    <link\n      rel=\"icon\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${encodedASLandingPageVersion}/assets/favicon.png\"\n    />\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" />\n    <link\n      href=\"https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap\"\n      rel=\"stylesheet\"\n    />\n    <meta name=\"theme-color\" content=\"#000000\" />\n    <meta name=\"description\" content=\"Apollo server landing page\" />\n    <link\n      rel=\"apple-touch-icon\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${encodedASLandingPageVersion}/assets/favicon.png\"\n    />\n    <link\n      rel=\"manifest\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${encodedASLandingPageVersion}/manifest.json\"\n    />\n    <title>Apollo Server</title>\n  </head>\n  <body>\n    <noscript>You need to enable JavaScript to run this app.</noscript>\n    <div id=\"react-root\">\n      <style nonce=${nonce}>\n        body {\n          margin: 0;\n          overflow-x: hidden;\n          overflow-y: hidden;\n        }\n        .fallback {\n          opacity: 0;\n          animation: fadeIn 1s 1s;\n          animation-iteration-count: 1;\n          animation-fill-mode: forwards;\n          padding: 1em;\n        }\n        @keyframes fadeIn {\n          0% {opacity:0;}\n          100% {opacity:1; }\n        }\n      </style>\n    ${config.embed\n                            ? 'graphRef' in config && config.graphRef\n                                ? (0, getEmbeddedHTML_js_1.getEmbeddedExplorerHTML)(explorerVersion, config, apolloServerVersion, nonce)\n                                : !('graphRef' in config)\n                                    ? (0, getEmbeddedHTML_js_1.getEmbeddedSandboxHTML)(sandboxVersion, config, apolloServerVersion, nonce)\n                                    : getNonEmbeddedLandingPageHTML(apolloServerLandingPageVersion, config, apolloServerVersion, nonce)\n                            : getNonEmbeddedLandingPageHTML(apolloServerLandingPageVersion, config, apolloServerVersion, nonce)}\n    </div>\n  </body>\n</html>\n          `;\n                    }\n                    return { html };\n                },\n            };\n        },\n    };\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL2xhbmRpbmdQYWdlL2RlZmF1bHQvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0RBQWtELEdBQUcsd0NBQXdDLEdBQUcseUNBQXlDLEdBQUcsc0RBQXNELEdBQUcsaURBQWlEO0FBQ3RQLDZCQUE2QixtQkFBTyxDQUFDLHdIQUFzQjtBQUMzRCw0QkFBNEIsbUJBQU8sQ0FBQyxzSEFBc0M7QUFDMUUsMkJBQTJCLG1CQUFPLENBQUMsNkZBQTBCO0FBQzdELGVBQWUsbUJBQU8sQ0FBQyw4REFBTTtBQUM3QiwrREFBK0Q7QUFDL0QsWUFBWSxpREFBaUQ7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpREFBaUQ7QUFDakQsb0VBQW9FO0FBQ3BFLFlBQVksaURBQWlEO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSxpQkFBaUIsTUFBTSx5QkFBeUIsZUFBZTtBQUMvRCxpQkFBaUIsTUFBTSxrRUFBa0UsK0JBQStCLDZCQUE2QixvQkFBb0I7QUFDeks7QUFDQSx5Q0FBeUM7QUFDekMsd0NBQXdDO0FBQ3hDLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxtQ0FBbUM7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsTUFBTSxJQUFJLGVBQWU7QUFDL0YsNkRBQTZELE1BQU0sSUFBSSxjQUFjO0FBQ3JGO0FBQ0E7QUFDQSxzREFBc0QsZUFBZTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELFlBQVksRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxTQUFTO0FBQzNIO0FBQ0E7QUFDQSx1RUFBdUUsNEJBQTRCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsNEJBQTRCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSw0QkFBNEI7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLE1BQU07QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9wbHVnaW4vbGFuZGluZ1BhZ2UvZGVmYXVsdC9pbmRleC5qcz9hZjhmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5ERUZBVUxUX0FQT0xMT19TRVJWRVJfTEFORElOR19QQUdFX1ZFUlNJT04gPSBleHBvcnRzLkRFRkFVTFRfRU1CRURERURfU0FOREJPWF9WRVJTSU9OID0gZXhwb3J0cy5ERUZBVUxUX0VNQkVEREVEX0VYUExPUkVSX1ZFUlNJT04gPSBleHBvcnRzLkFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlUHJvZHVjdGlvbkRlZmF1bHQgPSBleHBvcnRzLkFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlTG9jYWxEZWZhdWx0ID0gdm9pZCAwO1xuY29uc3QgZ2V0RW1iZWRkZWRIVE1MX2pzXzEgPSByZXF1aXJlKFwiLi9nZXRFbWJlZGRlZEhUTUwuanNcIik7XG5jb25zdCBwYWNrYWdlVmVyc2lvbl9qc18xID0gcmVxdWlyZShcIi4uLy4uLy4uL2dlbmVyYXRlZC9wYWNrYWdlVmVyc2lvbi5qc1wiKTtcbmNvbnN0IHV0aWxzX2NyZWF0ZWhhc2hfMSA9IHJlcXVpcmUoXCJAYXBvbGxvL3V0aWxzLmNyZWF0ZWhhc2hcIik7XG5jb25zdCB1dWlkXzEgPSByZXF1aXJlKFwidXVpZFwiKTtcbmZ1bmN0aW9uIEFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlTG9jYWxEZWZhdWx0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgdmVyc2lvbiwgX19pbnRlcm5hbF9hcG9sbG9TdHVkaW9FbnZfXywgLi4ucmVzdCB9ID0ge1xuICAgICAgICBlbWJlZDogdHJ1ZSxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICB9O1xuICAgIHJldHVybiBBcG9sbG9TZXJ2ZXJQbHVnaW5MYW5kaW5nUGFnZURlZmF1bHQodmVyc2lvbiwge1xuICAgICAgICBpc1Byb2Q6IGZhbHNlLFxuICAgICAgICBhcG9sbG9TdHVkaW9FbnY6IF9faW50ZXJuYWxfYXBvbGxvU3R1ZGlvRW52X18sXG4gICAgICAgIC4uLnJlc3QsXG4gICAgfSk7XG59XG5leHBvcnRzLkFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlTG9jYWxEZWZhdWx0ID0gQXBvbGxvU2VydmVyUGx1Z2luTGFuZGluZ1BhZ2VMb2NhbERlZmF1bHQ7XG5mdW5jdGlvbiBBcG9sbG9TZXJ2ZXJQbHVnaW5MYW5kaW5nUGFnZVByb2R1Y3Rpb25EZWZhdWx0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgdmVyc2lvbiwgX19pbnRlcm5hbF9hcG9sbG9TdHVkaW9FbnZfXywgLi4ucmVzdCB9ID0gb3B0aW9ucztcbiAgICByZXR1cm4gQXBvbGxvU2VydmVyUGx1Z2luTGFuZGluZ1BhZ2VEZWZhdWx0KHZlcnNpb24sIHtcbiAgICAgICAgaXNQcm9kOiB0cnVlLFxuICAgICAgICBhcG9sbG9TdHVkaW9FbnY6IF9faW50ZXJuYWxfYXBvbGxvU3R1ZGlvRW52X18sXG4gICAgICAgIC4uLnJlc3QsXG4gICAgfSk7XG59XG5leHBvcnRzLkFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlUHJvZHVjdGlvbkRlZmF1bHQgPSBBcG9sbG9TZXJ2ZXJQbHVnaW5MYW5kaW5nUGFnZVByb2R1Y3Rpb25EZWZhdWx0O1xuZnVuY3Rpb24gZW5jb2RlQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSkpO1xufVxuY29uc3QgZ2V0Tm9uRW1iZWRkZWRMYW5kaW5nUGFnZUhUTUwgPSAoY2RuVmVyc2lvbiwgY29uZmlnLCBhcG9sbG9TZXJ2ZXJWZXJzaW9uLCBub25jZSkgPT4ge1xuICAgIGNvbnN0IGVuY29kZWRDb25maWcgPSBlbmNvZGVDb25maWcoY29uZmlnKTtcbiAgICByZXR1cm4gYFxuIDxkaXYgY2xhc3M9XCJmYWxsYmFja1wiPlxuICA8aDE+V2VsY29tZSB0byBBcG9sbG8gU2VydmVyPC9oMT5cbiAgPHA+VGhlIGZ1bGwgbGFuZGluZyBwYWdlIGNhbm5vdCBiZSBsb2FkZWQ7IGl0IGFwcGVhcnMgdGhhdCB5b3UgbWlnaHQgYmUgb2ZmbGluZS48L3A+XG48L2Rpdj5cbjxzY3JpcHQgbm9uY2U9XCIke25vbmNlfVwiPndpbmRvdy5sYW5kaW5nUGFnZSA9ICR7ZW5jb2RlZENvbmZpZ307PC9zY3JpcHQ+XG48c2NyaXB0IG5vbmNlPVwiJHtub25jZX1cIiBzcmM9XCJodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbS8ke2VuY29kZVVSSUNvbXBvbmVudChjZG5WZXJzaW9uKX0vc3RhdGljL2pzL21haW4uanM/cnVudGltZT0ke2Fwb2xsb1NlcnZlclZlcnNpb259XCI+PC9zY3JpcHQ+YDtcbn07XG5leHBvcnRzLkRFRkFVTFRfRU1CRURERURfRVhQTE9SRVJfVkVSU0lPTiA9ICd2Myc7XG5leHBvcnRzLkRFRkFVTFRfRU1CRURERURfU0FOREJPWF9WRVJTSU9OID0gJ3YyJztcbmV4cG9ydHMuREVGQVVMVF9BUE9MTE9fU0VSVkVSX0xBTkRJTkdfUEFHRV9WRVJTSU9OID0gJ19sYXRlc3QnO1xuZnVuY3Rpb24gQXBvbGxvU2VydmVyUGx1Z2luTGFuZGluZ1BhZ2VEZWZhdWx0KG1heWJlVmVyc2lvbiwgY29uZmlnKSB7XG4gICAgY29uc3QgZXhwbG9yZXJWZXJzaW9uID0gbWF5YmVWZXJzaW9uID8/IGV4cG9ydHMuREVGQVVMVF9FTUJFRERFRF9FWFBMT1JFUl9WRVJTSU9OO1xuICAgIGNvbnN0IHNhbmRib3hWZXJzaW9uID0gbWF5YmVWZXJzaW9uID8/IGV4cG9ydHMuREVGQVVMVF9FTUJFRERFRF9TQU5EQk9YX1ZFUlNJT047XG4gICAgY29uc3QgYXBvbGxvU2VydmVyTGFuZGluZ1BhZ2VWZXJzaW9uID0gbWF5YmVWZXJzaW9uID8/IGV4cG9ydHMuREVGQVVMVF9BUE9MTE9fU0VSVkVSX0xBTkRJTkdfUEFHRV9WRVJTSU9OO1xuICAgIGNvbnN0IGFwb2xsb1NlcnZlclZlcnNpb24gPSBgQGFwb2xsby9zZXJ2ZXJAJHtwYWNrYWdlVmVyc2lvbl9qc18xLnBhY2thZ2VWZXJzaW9ufWA7XG4gICAgY29uc3Qgc2NyaXB0U2FmZUxpc3QgPSBbXG4gICAgICAgICdodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbScsXG4gICAgICAgICdodHRwczovL2VtYmVkZGFibGUtc2FuZGJveC5jZG4uYXBvbGxvZ3JhcGhxbC5jb20nLFxuICAgICAgICAnaHR0cHM6Ly9lbWJlZGRhYmxlLWV4cGxvcmVyLmNkbi5hcG9sbG9ncmFwaHFsLmNvbScsXG4gICAgXS5qb2luKCcgJyk7XG4gICAgY29uc3Qgc3R5bGVTYWZlTGlzdCA9IFtcbiAgICAgICAgJ2h0dHBzOi8vYXBvbGxvLXNlcnZlci1sYW5kaW5nLXBhZ2UuY2RuLmFwb2xsb2dyYXBocWwuY29tJyxcbiAgICAgICAgJ2h0dHBzOi8vZW1iZWRkYWJsZS1zYW5kYm94LmNkbi5hcG9sbG9ncmFwaHFsLmNvbScsXG4gICAgICAgICdodHRwczovL2VtYmVkZGFibGUtZXhwbG9yZXIuY2RuLmFwb2xsb2dyYXBocWwuY29tJyxcbiAgICAgICAgJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20nLFxuICAgIF0uam9pbignICcpO1xuICAgIGNvbnN0IGlmcmFtZVNhZmVMaXN0ID0gW1xuICAgICAgICAnaHR0cHM6Ly9leHBsb3Jlci5lbWJlZC5hcG9sbG9ncmFwaHFsLmNvbScsXG4gICAgICAgICdodHRwczovL3NhbmRib3guZW1iZWQuYXBvbGxvZ3JhcGhxbC5jb20nLFxuICAgICAgICAnaHR0cHM6Ly9lbWJlZC5hcG9sbG8ubG9jYWw6MzAwMCcsXG4gICAgXS5qb2luKCcgJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgX19pbnRlcm5hbF9pbnN0YWxsZWRfaW1wbGljaXRseV9fOiBmYWxzZSxcbiAgICAgICAgYXN5bmMgc2VydmVyV2lsbFN0YXJ0KHNlcnZlcikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5wcmVjb21wdXRlZE5vbmNlKSB7XG4gICAgICAgICAgICAgICAgc2VydmVyLmxvZ2dlci53YXJuKFwiVGhlIGBwcmVjb21wdXRlZE5vbmNlYCBsYW5kaW5nIHBhZ2UgY29uZmlndXJhdGlvbiBvcHRpb24gaXMgZGVwcmVjYXRlZC4gUmVtb3ZpbmcgdGhpcyBvcHRpb24gaXMgc3RyaWN0bHkgYW4gaW1wcm92ZW1lbnQgdG8gQXBvbGxvIFNlcnZlcidzIGxhbmRpbmcgcGFnZSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSAoQ1NQKSBpbXBsZW1lbnRhdGlvbiBmb3IgcHJldmVudGluZyBYU1MgYXR0YWNrcy5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFzeW5jIHJlbmRlckxhbmRpbmdQYWdlKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkQVNMYW5kaW5nUGFnZVZlcnNpb24gPSBlbmNvZGVVUklDb21wb25lbnQoYXBvbGxvU2VydmVyTGFuZGluZ1BhZ2VWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gaHRtbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vbmNlID0gY29uZmlnLnByZWNvbXB1dGVkTm9uY2UgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgdXRpbHNfY3JlYXRlaGFzaF8xLmNyZWF0ZUhhc2gpKCdzaGEyNTYnKS51cGRhdGUoKDAsIHV1aWRfMS52NCkoKSkuZGlnZXN0KCdoZXgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcmlwdENzcCA9IGBzY3JpcHQtc3JjICdzZWxmJyAnbm9uY2UtJHtub25jZX0nICR7c2NyaXB0U2FmZUxpc3R9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlQ3NwID0gYHN0eWxlLXNyYyAnbm9uY2UtJHtub25jZX0nICR7c3R5bGVTYWZlTGlzdH1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VDc3AgPSBgaW1nLXNyYyBodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYW5pZmVzdENzcCA9IGBtYW5pZmVzdC1zcmMgaHR0cHM6Ly9hcG9sbG8tc2VydmVyLWxhbmRpbmctcGFnZS5jZG4uYXBvbGxvZ3JhcGhxbC5jb21gO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWVDc3AgPSBgZnJhbWUtc3JjICR7aWZyYW1lU2FmZUxpc3R9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgXG48IURPQ1RZUEUgaHRtbD5cbjxodG1sIGxhbmc9XCJlblwiPlxuICA8aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwidXRmLThcIiAvPlxuICAgIDxtZXRhIGh0dHAtZXF1aXY9XCJDb250ZW50LVNlY3VyaXR5LVBvbGljeVwiIGNvbnRlbnQ9XCIke3NjcmlwdENzcH07ICR7c3R5bGVDc3B9OyAke2ltYWdlQ3NwfTsgJHttYW5pZmVzdENzcH07ICR7ZnJhbWVDc3B9XCIgLz5cbiAgICA8bGlua1xuICAgICAgcmVsPVwiaWNvblwiXG4gICAgICBocmVmPVwiaHR0cHM6Ly9hcG9sbG8tc2VydmVyLWxhbmRpbmctcGFnZS5jZG4uYXBvbGxvZ3JhcGhxbC5jb20vJHtlbmNvZGVkQVNMYW5kaW5nUGFnZVZlcnNpb259L2Fzc2V0cy9mYXZpY29uLnBuZ1wiXG4gICAgLz5cbiAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MVwiIC8+XG4gICAgPGxpbmsgcmVsPVwicHJlY29ubmVjdFwiIGhyZWY9XCJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tXCIgLz5cbiAgICA8bGlua1xuICAgICAgaHJlZj1cImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9U291cmNlK1NhbnMrUHJvJmRpc3BsYXk9c3dhcFwiXG4gICAgICByZWw9XCJzdHlsZXNoZWV0XCJcbiAgICAvPlxuICAgIDxtZXRhIG5hbWU9XCJ0aGVtZS1jb2xvclwiIGNvbnRlbnQ9XCIjMDAwMDAwXCIgLz5cbiAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiQXBvbGxvIHNlcnZlciBsYW5kaW5nIHBhZ2VcIiAvPlxuICAgIDxsaW5rXG4gICAgICByZWw9XCJhcHBsZS10b3VjaC1pY29uXCJcbiAgICAgIGhyZWY9XCJodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbS8ke2VuY29kZWRBU0xhbmRpbmdQYWdlVmVyc2lvbn0vYXNzZXRzL2Zhdmljb24ucG5nXCJcbiAgICAvPlxuICAgIDxsaW5rXG4gICAgICByZWw9XCJtYW5pZmVzdFwiXG4gICAgICBocmVmPVwiaHR0cHM6Ly9hcG9sbG8tc2VydmVyLWxhbmRpbmctcGFnZS5jZG4uYXBvbGxvZ3JhcGhxbC5jb20vJHtlbmNvZGVkQVNMYW5kaW5nUGFnZVZlcnNpb259L21hbmlmZXN0Lmpzb25cIlxuICAgIC8+XG4gICAgPHRpdGxlPkFwb2xsbyBTZXJ2ZXI8L3RpdGxlPlxuICA8L2hlYWQ+XG4gIDxib2R5PlxuICAgIDxub3NjcmlwdD5Zb3UgbmVlZCB0byBlbmFibGUgSmF2YVNjcmlwdCB0byBydW4gdGhpcyBhcHAuPC9ub3NjcmlwdD5cbiAgICA8ZGl2IGlkPVwicmVhY3Qtcm9vdFwiPlxuICAgICAgPHN0eWxlIG5vbmNlPSR7bm9uY2V9PlxuICAgICAgICBib2R5IHtcbiAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICAgICAgfVxuICAgICAgICAuZmFsbGJhY2sge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgYW5pbWF0aW9uOiBmYWRlSW4gMXMgMXM7XG4gICAgICAgICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogMTtcbiAgICAgICAgICBhbmltYXRpb24tZmlsbC1tb2RlOiBmb3J3YXJkcztcbiAgICAgICAgICBwYWRkaW5nOiAxZW07XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW4ge1xuICAgICAgICAgIDAlIHtvcGFjaXR5OjA7fVxuICAgICAgICAgIDEwMCUge29wYWNpdHk6MTsgfVxuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuICAgICR7Y29uZmlnLmVtYmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnZ3JhcGhSZWYnIGluIGNvbmZpZyAmJiBjb25maWcuZ3JhcGhSZWZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoMCwgZ2V0RW1iZWRkZWRIVE1MX2pzXzEuZ2V0RW1iZWRkZWRFeHBsb3JlckhUTUwpKGV4cGxvcmVyVmVyc2lvbiwgY29uZmlnLCBhcG9sbG9TZXJ2ZXJWZXJzaW9uLCBub25jZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAhKCdncmFwaFJlZicgaW4gY29uZmlnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoMCwgZ2V0RW1iZWRkZWRIVE1MX2pzXzEuZ2V0RW1iZWRkZWRTYW5kYm94SFRNTCkoc2FuZGJveFZlcnNpb24sIGNvbmZpZywgYXBvbGxvU2VydmVyVmVyc2lvbiwgbm9uY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGdldE5vbkVtYmVkZGVkTGFuZGluZ1BhZ2VIVE1MKGFwb2xsb1NlcnZlckxhbmRpbmdQYWdlVmVyc2lvbiwgY29uZmlnLCBhcG9sbG9TZXJ2ZXJWZXJzaW9uLCBub25jZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGdldE5vbkVtYmVkZGVkTGFuZGluZ1BhZ2VIVE1MKGFwb2xsb1NlcnZlckxhbmRpbmdQYWdlVmVyc2lvbiwgY29uZmlnLCBhcG9sbG9TZXJ2ZXJWZXJzaW9uLCBub25jZSl9XG4gICAgPC9kaXY+XG4gIDwvYm9keT5cbjwvaHRtbD5cbiAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGh0bWwgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/landingPage/default/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaIsSubgraph.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/schemaIsSubgraph.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.schemaIsSubgraph = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nfunction schemaIsSubgraph(schema) {\n    const serviceType = schema.getType('_Service');\n    if (!(0, graphql_1.isObjectType)(serviceType)) {\n        return false;\n    }\n    const sdlField = serviceType.getFields().sdl;\n    if (!sdlField) {\n        return false;\n    }\n    let sdlFieldType = sdlField.type;\n    if ((0, graphql_1.isNonNullType)(sdlFieldType)) {\n        sdlFieldType = sdlFieldType.ofType;\n    }\n    if (!(0, graphql_1.isScalarType)(sdlFieldType)) {\n        return false;\n    }\n    return sdlFieldType.name == 'String';\n}\nexports.schemaIsSubgraph = schemaIsSubgraph;\n//# sourceMappingURL=schemaIsSubgraph.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3NjaGVtYUlzU3ViZ3JhcGguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsd0JBQXdCO0FBQ3hCLGtCQUFrQixtQkFBTyxDQUFDLHVEQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3NjaGVtYUlzU3ViZ3JhcGguanM/MjNjNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2NoZW1hSXNTdWJncmFwaCA9IHZvaWQgMDtcbmNvbnN0IGdyYXBocWxfMSA9IHJlcXVpcmUoXCJncmFwaHFsXCIpO1xuZnVuY3Rpb24gc2NoZW1hSXNTdWJncmFwaChzY2hlbWEpIHtcbiAgICBjb25zdCBzZXJ2aWNlVHlwZSA9IHNjaGVtYS5nZXRUeXBlKCdfU2VydmljZScpO1xuICAgIGlmICghKDAsIGdyYXBocWxfMS5pc09iamVjdFR5cGUpKHNlcnZpY2VUeXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHNkbEZpZWxkID0gc2VydmljZVR5cGUuZ2V0RmllbGRzKCkuc2RsO1xuICAgIGlmICghc2RsRmllbGQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBsZXQgc2RsRmllbGRUeXBlID0gc2RsRmllbGQudHlwZTtcbiAgICBpZiAoKDAsIGdyYXBocWxfMS5pc05vbk51bGxUeXBlKShzZGxGaWVsZFR5cGUpKSB7XG4gICAgICAgIHNkbEZpZWxkVHlwZSA9IHNkbEZpZWxkVHlwZS5vZlR5cGU7XG4gICAgfVxuICAgIGlmICghKDAsIGdyYXBocWxfMS5pc1NjYWxhclR5cGUpKHNkbEZpZWxkVHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc2RsRmllbGRUeXBlLm5hbWUgPT0gJ1N0cmluZyc7XG59XG5leHBvcnRzLnNjaGVtYUlzU3ViZ3JhcGggPSBzY2hlbWFJc1N1YmdyYXBoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hSXNTdWJncmFwaC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaIsSubgraph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaReporting/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/schemaReporting/index.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ApolloServerPluginSchemaReporting = void 0;\nconst os_1 = __importDefault(__webpack_require__(/*! os */ \"os\"));\nconst internalPlugin_js_1 = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalPlugin.js\");\nconst uuid_1 = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/index.js\");\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst schemaReporter_js_1 = __webpack_require__(/*! ./schemaReporter.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaReporting/schemaReporter.js\");\nconst schemaIsSubgraph_js_1 = __webpack_require__(/*! ../schemaIsSubgraph.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaIsSubgraph.js\");\nconst packageVersion_js_1 = __webpack_require__(/*! ../../generated/packageVersion.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/generated/packageVersion.js\");\nconst computeCoreSchemaHash_js_1 = __webpack_require__(/*! ../../utils/computeCoreSchemaHash.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/computeCoreSchemaHash.js\");\nfunction ApolloServerPluginSchemaReporting({ initialDelayMaxMs, overrideReportedSchema, endpointUrl, fetcher, } = Object.create(null)) {\n    const bootId = (0, uuid_1.v4)();\n    return (0, internalPlugin_js_1.internalPlugin)({\n        __internal_plugin_id__: 'SchemaReporting',\n        __is_disabled_plugin__: false,\n        async serverWillStart({ apollo, schema, logger }) {\n            const { key, graphRef } = apollo;\n            if (!key) {\n                throw Error('To use ApolloServerPluginSchemaReporting, you must provide an Apollo API ' +\n                    'key, via the APOLLO_KEY environment variable or via `new ApolloServer({apollo: {key})`');\n            }\n            if (!graphRef) {\n                throw Error('To use ApolloServerPluginSchemaReporting, you must provide your graph ref (eg, ' +\n                    \"'my-graph-id@my-graph-variant'). Try setting the APOLLO_GRAPH_REF environment \" +\n                    'variable or passing `new ApolloServer({apollo: {graphRef}})`.');\n            }\n            if (overrideReportedSchema) {\n                try {\n                    const validationErrors = (0, graphql_1.validateSchema)((0, graphql_1.buildSchema)(overrideReportedSchema, { noLocation: true }));\n                    if (validationErrors.length) {\n                        throw new Error(validationErrors.map((error) => error.message).join('\\n'));\n                    }\n                }\n                catch (err) {\n                    throw new Error('The schema provided to overrideReportedSchema failed to parse or ' +\n                        `validate: ${err.message}`);\n                }\n            }\n            if ((0, schemaIsSubgraph_js_1.schemaIsSubgraph)(schema)) {\n                throw Error([\n                    'Schema reporting is not yet compatible with Apollo Federation subgraphs.',\n                    \"If you're interested in using schema reporting with subgraphs,\",\n                    'please contact Apollo support. To set up managed federation, see',\n                    'https://go.apollo.dev/s/managed-federation',\n                ].join(' '));\n            }\n            if (endpointUrl !== undefined) {\n                logger.info(`Apollo schema reporting: schema reporting URL override: ${endpointUrl}`);\n            }\n            const baseSchemaReport = {\n                bootId,\n                graphRef,\n                platform: process.env.APOLLO_SERVER_PLATFORM || 'local',\n                runtimeVersion: `node ${process.version}`,\n                userVersion: process.env.APOLLO_SERVER_USER_VERSION,\n                serverId: process.env.APOLLO_SERVER_ID || process.env.HOSTNAME || os_1.default.hostname(),\n                libraryVersion: `@apollo/server@${packageVersion_js_1.packageVersion}`,\n            };\n            let currentSchemaReporter;\n            return {\n                schemaDidLoadOrUpdate({ apiSchema, coreSupergraphSdl }) {\n                    if (overrideReportedSchema !== undefined) {\n                        if (currentSchemaReporter) {\n                            return;\n                        }\n                        else {\n                            logger.info('Apollo schema reporting: schema to report has been overridden');\n                        }\n                    }\n                    const coreSchema = overrideReportedSchema ??\n                        coreSupergraphSdl ??\n                        (0, graphql_1.printSchema)(apiSchema);\n                    const coreSchemaHash = (0, computeCoreSchemaHash_js_1.computeCoreSchemaHash)(coreSchema);\n                    const schemaReport = {\n                        ...baseSchemaReport,\n                        coreSchemaHash,\n                    };\n                    currentSchemaReporter?.stop();\n                    currentSchemaReporter = new schemaReporter_js_1.SchemaReporter({\n                        schemaReport,\n                        coreSchema,\n                        apiKey: key,\n                        endpointUrl,\n                        logger,\n                        initialReportingDelayInMs: Math.floor(Math.random() * (initialDelayMaxMs ?? 10000)),\n                        fallbackReportingDelayInMs: 20000,\n                        fetcher,\n                    });\n                    currentSchemaReporter.start();\n                    logger.info('Apollo schema reporting: reporting a new schema to Studio! See your graph at ' +\n                        `https://studio.apollographql.com/graph/${encodeURI(graphRef)}/ with server info ${JSON.stringify(schemaReport)}`);\n                },\n                async serverWillStop() {\n                    currentSchemaReporter?.stop();\n                },\n            };\n        },\n    });\n}\nexports.ApolloServerPluginSchemaReporting = ApolloServerPluginSchemaReporting;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3NjaGVtYVJlcG9ydGluZy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHlDQUF5QztBQUN6Qyw2QkFBNkIsbUJBQU8sQ0FBQyxjQUFJO0FBQ3pDLDRCQUE0QixtQkFBTyxDQUFDLCtGQUF5QjtBQUM3RCxlQUFlLG1CQUFPLENBQUMsOERBQU07QUFDN0Isa0JBQWtCLG1CQUFPLENBQUMsdURBQVM7QUFDbkMsNEJBQTRCLG1CQUFPLENBQUMsa0hBQXFCO0FBQ3pELDhCQUE4QixtQkFBTyxDQUFDLHVHQUF3QjtBQUM5RCw0QkFBNEIsbUJBQU8sQ0FBQyxtSEFBbUM7QUFDdkUsbUNBQW1DLG1CQUFPLENBQUMseUhBQXNDO0FBQ2pGLDZDQUE2QyxtRUFBbUU7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msd0JBQXdCO0FBQ3hELG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBLDRGQUE0RixTQUFTLElBQUk7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsU0FBUyxVQUFVO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLGdJQUFnSSxrQkFBa0I7QUFDbEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFlBQVk7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RixZQUFZO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsZ0JBQWdCO0FBQ3hEO0FBQ0E7QUFDQSxrREFBa0QsbUNBQW1DO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLHdDQUF3Qyw4QkFBOEI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0Esa0VBQWtFLG9CQUFvQixxQkFBcUIsNkJBQTZCO0FBQ3hJLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLHlDQUF5QztBQUN6QyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3NjaGVtYVJlcG9ydGluZy9pbmRleC5qcz8zMDhjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BcG9sbG9TZXJ2ZXJQbHVnaW5TY2hlbWFSZXBvcnRpbmcgPSB2b2lkIDA7XG5jb25zdCBvc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJvc1wiKSk7XG5jb25zdCBpbnRlcm5hbFBsdWdpbl9qc18xID0gcmVxdWlyZShcIi4uLy4uL2ludGVybmFsUGx1Z2luLmpzXCIpO1xuY29uc3QgdXVpZF8xID0gcmVxdWlyZShcInV1aWRcIik7XG5jb25zdCBncmFwaHFsXzEgPSByZXF1aXJlKFwiZ3JhcGhxbFwiKTtcbmNvbnN0IHNjaGVtYVJlcG9ydGVyX2pzXzEgPSByZXF1aXJlKFwiLi9zY2hlbWFSZXBvcnRlci5qc1wiKTtcbmNvbnN0IHNjaGVtYUlzU3ViZ3JhcGhfanNfMSA9IHJlcXVpcmUoXCIuLi9zY2hlbWFJc1N1YmdyYXBoLmpzXCIpO1xuY29uc3QgcGFja2FnZVZlcnNpb25fanNfMSA9IHJlcXVpcmUoXCIuLi8uLi9nZW5lcmF0ZWQvcGFja2FnZVZlcnNpb24uanNcIik7XG5jb25zdCBjb21wdXRlQ29yZVNjaGVtYUhhc2hfanNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9jb21wdXRlQ29yZVNjaGVtYUhhc2guanNcIik7XG5mdW5jdGlvbiBBcG9sbG9TZXJ2ZXJQbHVnaW5TY2hlbWFSZXBvcnRpbmcoeyBpbml0aWFsRGVsYXlNYXhNcywgb3ZlcnJpZGVSZXBvcnRlZFNjaGVtYSwgZW5kcG9pbnRVcmwsIGZldGNoZXIsIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpKSB7XG4gICAgY29uc3QgYm9vdElkID0gKDAsIHV1aWRfMS52NCkoKTtcbiAgICByZXR1cm4gKDAsIGludGVybmFsUGx1Z2luX2pzXzEuaW50ZXJuYWxQbHVnaW4pKHtcbiAgICAgICAgX19pbnRlcm5hbF9wbHVnaW5faWRfXzogJ1NjaGVtYVJlcG9ydGluZycsXG4gICAgICAgIF9faXNfZGlzYWJsZWRfcGx1Z2luX186IGZhbHNlLFxuICAgICAgICBhc3luYyBzZXJ2ZXJXaWxsU3RhcnQoeyBhcG9sbG8sIHNjaGVtYSwgbG9nZ2VyIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCBncmFwaFJlZiB9ID0gYXBvbGxvO1xuICAgICAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignVG8gdXNlIEFwb2xsb1NlcnZlclBsdWdpblNjaGVtYVJlcG9ydGluZywgeW91IG11c3QgcHJvdmlkZSBhbiBBcG9sbG8gQVBJICcgK1xuICAgICAgICAgICAgICAgICAgICAna2V5LCB2aWEgdGhlIEFQT0xMT19LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgb3IgdmlhIGBuZXcgQXBvbGxvU2VydmVyKHthcG9sbG86IHtrZXl9KWAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ3JhcGhSZWYpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignVG8gdXNlIEFwb2xsb1NlcnZlclBsdWdpblNjaGVtYVJlcG9ydGluZywgeW91IG11c3QgcHJvdmlkZSB5b3VyIGdyYXBoIHJlZiAoZWcsICcgK1xuICAgICAgICAgICAgICAgICAgICBcIidteS1ncmFwaC1pZEBteS1ncmFwaC12YXJpYW50JykuIFRyeSBzZXR0aW5nIHRoZSBBUE9MTE9fR1JBUEhfUkVGIGVudmlyb25tZW50IFwiICtcbiAgICAgICAgICAgICAgICAgICAgJ3ZhcmlhYmxlIG9yIHBhc3NpbmcgYG5ldyBBcG9sbG9TZXJ2ZXIoe2Fwb2xsbzoge2dyYXBoUmVmfX0pYC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdmVycmlkZVJlcG9ydGVkU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9ICgwLCBncmFwaHFsXzEudmFsaWRhdGVTY2hlbWEpKCgwLCBncmFwaHFsXzEuYnVpbGRTY2hlbWEpKG92ZXJyaWRlUmVwb3J0ZWRTY2hlbWEsIHsgbm9Mb2NhdGlvbjogdHJ1ZSB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHZhbGlkYXRpb25FcnJvcnMubWFwKChlcnJvcikgPT4gZXJyb3IubWVzc2FnZSkuam9pbignXFxuJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2NoZW1hIHByb3ZpZGVkIHRvIG92ZXJyaWRlUmVwb3J0ZWRTY2hlbWEgZmFpbGVkIHRvIHBhcnNlIG9yICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHZhbGlkYXRlOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoMCwgc2NoZW1hSXNTdWJncmFwaF9qc18xLnNjaGVtYUlzU3ViZ3JhcGgpKHNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihbXG4gICAgICAgICAgICAgICAgICAgICdTY2hlbWEgcmVwb3J0aW5nIGlzIG5vdCB5ZXQgY29tcGF0aWJsZSB3aXRoIEFwb2xsbyBGZWRlcmF0aW9uIHN1YmdyYXBocy4nLFxuICAgICAgICAgICAgICAgICAgICBcIklmIHlvdSdyZSBpbnRlcmVzdGVkIGluIHVzaW5nIHNjaGVtYSByZXBvcnRpbmcgd2l0aCBzdWJncmFwaHMsXCIsXG4gICAgICAgICAgICAgICAgICAgICdwbGVhc2UgY29udGFjdCBBcG9sbG8gc3VwcG9ydC4gVG8gc2V0IHVwIG1hbmFnZWQgZmVkZXJhdGlvbiwgc2VlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vZ28uYXBvbGxvLmRldi9zL21hbmFnZWQtZmVkZXJhdGlvbicsXG4gICAgICAgICAgICAgICAgXS5qb2luKCcgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVuZHBvaW50VXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgQXBvbGxvIHNjaGVtYSByZXBvcnRpbmc6IHNjaGVtYSByZXBvcnRpbmcgVVJMIG92ZXJyaWRlOiAke2VuZHBvaW50VXJsfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYmFzZVNjaGVtYVJlcG9ydCA9IHtcbiAgICAgICAgICAgICAgICBib290SWQsXG4gICAgICAgICAgICAgICAgZ3JhcGhSZWYsXG4gICAgICAgICAgICAgICAgcGxhdGZvcm06IHByb2Nlc3MuZW52LkFQT0xMT19TRVJWRVJfUExBVEZPUk0gfHwgJ2xvY2FsJyxcbiAgICAgICAgICAgICAgICBydW50aW1lVmVyc2lvbjogYG5vZGUgJHtwcm9jZXNzLnZlcnNpb259YCxcbiAgICAgICAgICAgICAgICB1c2VyVmVyc2lvbjogcHJvY2Vzcy5lbnYuQVBPTExPX1NFUlZFUl9VU0VSX1ZFUlNJT04sXG4gICAgICAgICAgICAgICAgc2VydmVySWQ6IHByb2Nlc3MuZW52LkFQT0xMT19TRVJWRVJfSUQgfHwgcHJvY2Vzcy5lbnYuSE9TVE5BTUUgfHwgb3NfMS5kZWZhdWx0Lmhvc3RuYW1lKCksXG4gICAgICAgICAgICAgICAgbGlicmFyeVZlcnNpb246IGBAYXBvbGxvL3NlcnZlckAke3BhY2thZ2VWZXJzaW9uX2pzXzEucGFja2FnZVZlcnNpb259YCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgY3VycmVudFNjaGVtYVJlcG9ydGVyO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzY2hlbWFEaWRMb2FkT3JVcGRhdGUoeyBhcGlTY2hlbWEsIGNvcmVTdXBlcmdyYXBoU2RsIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJyaWRlUmVwb3J0ZWRTY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTY2hlbWFSZXBvcnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdBcG9sbG8gc2NoZW1hIHJlcG9ydGluZzogc2NoZW1hIHRvIHJlcG9ydCBoYXMgYmVlbiBvdmVycmlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29yZVNjaGVtYSA9IG92ZXJyaWRlUmVwb3J0ZWRTY2hlbWEgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVTdXBlcmdyYXBoU2RsID8/XG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgZ3JhcGhxbF8xLnByaW50U2NoZW1hKShhcGlTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3JlU2NoZW1hSGFzaCA9ICgwLCBjb21wdXRlQ29yZVNjaGVtYUhhc2hfanNfMS5jb21wdXRlQ29yZVNjaGVtYUhhc2gpKGNvcmVTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2hlbWFSZXBvcnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5iYXNlU2NoZW1hUmVwb3J0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29yZVNjaGVtYUhhc2gsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlbWFSZXBvcnRlcj8uc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NoZW1hUmVwb3J0ZXIgPSBuZXcgc2NoZW1hUmVwb3J0ZXJfanNfMS5TY2hlbWFSZXBvcnRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWFSZXBvcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JlU2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5OiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludFVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxSZXBvcnRpbmdEZWxheUluTXM6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpbml0aWFsRGVsYXlNYXhNcyA/PyAxMDAwMCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tSZXBvcnRpbmdEZWxheUluTXM6IDIwMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hlcixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlbWFSZXBvcnRlci5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygnQXBvbGxvIHNjaGVtYSByZXBvcnRpbmc6IHJlcG9ydGluZyBhIG5ldyBzY2hlbWEgdG8gU3R1ZGlvISBTZWUgeW91ciBncmFwaCBhdCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwczovL3N0dWRpby5hcG9sbG9ncmFwaHFsLmNvbS9ncmFwaC8ke2VuY29kZVVSSShncmFwaFJlZil9LyB3aXRoIHNlcnZlciBpbmZvICR7SlNPTi5zdHJpbmdpZnkoc2NoZW1hUmVwb3J0KX1gKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFzeW5jIHNlcnZlcldpbGxTdG9wKCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NoZW1hUmVwb3J0ZXI/LnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmV4cG9ydHMuQXBvbGxvU2VydmVyUGx1Z2luU2NoZW1hUmVwb3J0aW5nID0gQXBvbGxvU2VydmVyUGx1Z2luU2NoZW1hUmVwb3J0aW5nO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaReporting/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaReporting/schemaReporter.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/schemaReporting/schemaReporter.js ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.SchemaReporter = exports.schemaReportGql = void 0;\nconst node_fetch_1 = __importDefault(__webpack_require__(/*! node-fetch */ \"(rsc)/./node_modules/node-fetch/lib/index.mjs\"));\nconst packageVersion_js_1 = __webpack_require__(/*! ../../generated/packageVersion.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/generated/packageVersion.js\");\nexports.schemaReportGql = `#graphql\n  mutation SchemaReport($report: SchemaReport!, $coreSchema: String) {\n    reportSchema(report: $report, coreSchema: $coreSchema) {\n      __typename\n      ... on ReportSchemaError {\n        message\n        code\n      }\n      ... on ReportSchemaResponse {\n        inSeconds\n        withCoreSchema\n      }\n    }\n  }\n`;\nclass SchemaReporter {\n    constructor(options) {\n        this.headers = {\n            'Content-Type': 'application/json',\n            'x-api-key': options.apiKey,\n            'apollographql-client-name': 'ApolloServerPluginSchemaReporting',\n            'apollographql-client-version': packageVersion_js_1.packageVersion,\n        };\n        this.endpointUrl =\n            options.endpointUrl ||\n                'https://schema-reporting.api.apollographql.com/api/graphql';\n        this.schemaReport = options.schemaReport;\n        this.coreSchema = options.coreSchema;\n        this.isStopped = false;\n        this.logger = options.logger;\n        this.initialReportingDelayInMs = options.initialReportingDelayInMs;\n        this.fallbackReportingDelayInMs = options.fallbackReportingDelayInMs;\n        this.fetcher = options.fetcher ?? node_fetch_1.default;\n    }\n    stopped() {\n        return this.isStopped;\n    }\n    start() {\n        this.pollTimer = setTimeout(() => this.sendOneReportAndScheduleNext(false), this.initialReportingDelayInMs);\n    }\n    stop() {\n        this.isStopped = true;\n        if (this.pollTimer) {\n            clearTimeout(this.pollTimer);\n            this.pollTimer = undefined;\n        }\n    }\n    async sendOneReportAndScheduleNext(sendNextWithCoreSchema) {\n        this.pollTimer = undefined;\n        if (this.stopped())\n            return;\n        try {\n            const result = await this.reportSchema(sendNextWithCoreSchema);\n            if (!result) {\n                return;\n            }\n            if (!this.stopped()) {\n                this.pollTimer = setTimeout(() => this.sendOneReportAndScheduleNext(result.withCoreSchema), result.inSeconds * 1000);\n            }\n            return;\n        }\n        catch (error) {\n            this.logger.error(`Error reporting server info to Apollo during schema reporting: ${error}`);\n            if (!this.stopped()) {\n                this.pollTimer = setTimeout(() => this.sendOneReportAndScheduleNext(false), this.fallbackReportingDelayInMs);\n            }\n        }\n    }\n    async reportSchema(withCoreSchema) {\n        const { data, errors } = await this.apolloQuery({\n            report: this.schemaReport,\n            coreSchema: withCoreSchema ? this.coreSchema : null,\n        });\n        if (errors) {\n            throw new Error(errors.map((x) => x.message).join('\\n'));\n        }\n        function msgForUnexpectedResponse(data) {\n            return [\n                'Unexpected response shape from Apollo when',\n                'reporting schema. If this continues, please reach',\n                'out to support@apollographql.com.',\n                'Received response:',\n                JSON.stringify(data),\n            ].join(' ');\n        }\n        if (!data || !data.reportSchema) {\n            throw new Error(msgForUnexpectedResponse(data));\n        }\n        if (data.reportSchema.__typename === 'ReportSchemaResponse') {\n            return data.reportSchema;\n        }\n        else if (data.reportSchema.__typename === 'ReportSchemaError') {\n            this.logger.error([\n                'Received input validation error from Apollo:',\n                data.reportSchema.message,\n                'Stopping reporting. Please fix the input errors.',\n            ].join(' '));\n            this.stop();\n            return null;\n        }\n        throw new Error(msgForUnexpectedResponse(data));\n    }\n    async apolloQuery(variables) {\n        const request = {\n            query: exports.schemaReportGql,\n            variables,\n        };\n        const httpResponse = await this.fetcher(this.endpointUrl, {\n            method: 'POST',\n            headers: this.headers,\n            body: JSON.stringify(request),\n        });\n        if (!httpResponse.ok) {\n            throw new Error([\n                `An unexpected HTTP status code (${httpResponse.status}) was`,\n                'encountered during schema reporting.',\n            ].join(' '));\n        }\n        try {\n            return await httpResponse.json();\n        }\n        catch (error) {\n            throw new Error([\n                \"Couldn't report schema to Apollo.\",\n                'Parsing response as JSON failed.',\n                'If this continues please reach out to support@apollographql.com',\n                error,\n            ].join(' '));\n        }\n    }\n}\nexports.SchemaReporter = SchemaReporter;\n//# sourceMappingURL=schemaReporter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3NjaGVtYVJlcG9ydGluZy9zY2hlbWFSZXBvcnRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHNCQUFzQixHQUFHLHVCQUF1QjtBQUNoRCxxQ0FBcUMsbUJBQU8sQ0FBQyxpRUFBWTtBQUN6RCw0QkFBNEIsbUJBQU8sQ0FBQyxtSEFBbUM7QUFDdkUsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLE1BQU07QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxtREFBbUQsb0JBQW9CO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9wbHVnaW4vc2NoZW1hUmVwb3J0aW5nL3NjaGVtYVJlcG9ydGVyLmpzP2M5YzciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNjaGVtYVJlcG9ydGVyID0gZXhwb3J0cy5zY2hlbWFSZXBvcnRHcWwgPSB2b2lkIDA7XG5jb25zdCBub2RlX2ZldGNoXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm5vZGUtZmV0Y2hcIikpO1xuY29uc3QgcGFja2FnZVZlcnNpb25fanNfMSA9IHJlcXVpcmUoXCIuLi8uLi9nZW5lcmF0ZWQvcGFja2FnZVZlcnNpb24uanNcIik7XG5leHBvcnRzLnNjaGVtYVJlcG9ydEdxbCA9IGAjZ3JhcGhxbFxuICBtdXRhdGlvbiBTY2hlbWFSZXBvcnQoJHJlcG9ydDogU2NoZW1hUmVwb3J0ISwgJGNvcmVTY2hlbWE6IFN0cmluZykge1xuICAgIHJlcG9ydFNjaGVtYShyZXBvcnQ6ICRyZXBvcnQsIGNvcmVTY2hlbWE6ICRjb3JlU2NoZW1hKSB7XG4gICAgICBfX3R5cGVuYW1lXG4gICAgICAuLi4gb24gUmVwb3J0U2NoZW1hRXJyb3Ige1xuICAgICAgICBtZXNzYWdlXG4gICAgICAgIGNvZGVcbiAgICAgIH1cbiAgICAgIC4uLiBvbiBSZXBvcnRTY2hlbWFSZXNwb25zZSB7XG4gICAgICAgIGluU2Vjb25kc1xuICAgICAgICB3aXRoQ29yZVNjaGVtYVxuICAgICAgfVxuICAgIH1cbiAgfVxuYDtcbmNsYXNzIFNjaGVtYVJlcG9ydGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAneC1hcGkta2V5Jzogb3B0aW9ucy5hcGlLZXksXG4gICAgICAgICAgICAnYXBvbGxvZ3JhcGhxbC1jbGllbnQtbmFtZSc6ICdBcG9sbG9TZXJ2ZXJQbHVnaW5TY2hlbWFSZXBvcnRpbmcnLFxuICAgICAgICAgICAgJ2Fwb2xsb2dyYXBocWwtY2xpZW50LXZlcnNpb24nOiBwYWNrYWdlVmVyc2lvbl9qc18xLnBhY2thZ2VWZXJzaW9uLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVuZHBvaW50VXJsID1cbiAgICAgICAgICAgIG9wdGlvbnMuZW5kcG9pbnRVcmwgfHxcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9zY2hlbWEtcmVwb3J0aW5nLmFwaS5hcG9sbG9ncmFwaHFsLmNvbS9hcGkvZ3JhcGhxbCc7XG4gICAgICAgIHRoaXMuc2NoZW1hUmVwb3J0ID0gb3B0aW9ucy5zY2hlbWFSZXBvcnQ7XG4gICAgICAgIHRoaXMuY29yZVNjaGVtYSA9IG9wdGlvbnMuY29yZVNjaGVtYTtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBvcHRpb25zLmxvZ2dlcjtcbiAgICAgICAgdGhpcy5pbml0aWFsUmVwb3J0aW5nRGVsYXlJbk1zID0gb3B0aW9ucy5pbml0aWFsUmVwb3J0aW5nRGVsYXlJbk1zO1xuICAgICAgICB0aGlzLmZhbGxiYWNrUmVwb3J0aW5nRGVsYXlJbk1zID0gb3B0aW9ucy5mYWxsYmFja1JlcG9ydGluZ0RlbGF5SW5NcztcbiAgICAgICAgdGhpcy5mZXRjaGVyID0gb3B0aW9ucy5mZXRjaGVyID8/IG5vZGVfZmV0Y2hfMS5kZWZhdWx0O1xuICAgIH1cbiAgICBzdG9wcGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1N0b3BwZWQ7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZW5kT25lUmVwb3J0QW5kU2NoZWR1bGVOZXh0KGZhbHNlKSwgdGhpcy5pbml0aWFsUmVwb3J0aW5nRGVsYXlJbk1zKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5wb2xsVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbGxUaW1lcik7XG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzZW5kT25lUmVwb3J0QW5kU2NoZWR1bGVOZXh0KHNlbmROZXh0V2l0aENvcmVTY2hlbWEpIHtcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQoKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVwb3J0U2NoZW1hKHNlbmROZXh0V2l0aENvcmVTY2hlbWEpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcHBlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VuZE9uZVJlcG9ydEFuZFNjaGVkdWxlTmV4dChyZXN1bHQud2l0aENvcmVTY2hlbWEpLCByZXN1bHQuaW5TZWNvbmRzICogMTAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRXJyb3IgcmVwb3J0aW5nIHNlcnZlciBpbmZvIHRvIEFwb2xsbyBkdXJpbmcgc2NoZW1hIHJlcG9ydGluZzogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9wcGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZW5kT25lUmVwb3J0QW5kU2NoZWR1bGVOZXh0KGZhbHNlKSwgdGhpcy5mYWxsYmFja1JlcG9ydGluZ0RlbGF5SW5Ncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmVwb3J0U2NoZW1hKHdpdGhDb3JlU2NoZW1hKSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3JzIH0gPSBhd2FpdCB0aGlzLmFwb2xsb1F1ZXJ5KHtcbiAgICAgICAgICAgIHJlcG9ydDogdGhpcy5zY2hlbWFSZXBvcnQsXG4gICAgICAgICAgICBjb3JlU2NoZW1hOiB3aXRoQ29yZVNjaGVtYSA/IHRoaXMuY29yZVNjaGVtYSA6IG51bGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JzLm1hcCgoeCkgPT4geC5tZXNzYWdlKS5qb2luKCdcXG4nKSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbXNnRm9yVW5leHBlY3RlZFJlc3BvbnNlKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgJ1VuZXhwZWN0ZWQgcmVzcG9uc2Ugc2hhcGUgZnJvbSBBcG9sbG8gd2hlbicsXG4gICAgICAgICAgICAgICAgJ3JlcG9ydGluZyBzY2hlbWEuIElmIHRoaXMgY29udGludWVzLCBwbGVhc2UgcmVhY2gnLFxuICAgICAgICAgICAgICAgICdvdXQgdG8gc3VwcG9ydEBhcG9sbG9ncmFwaHFsLmNvbS4nLFxuICAgICAgICAgICAgICAgICdSZWNlaXZlZCByZXNwb25zZTonLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgXS5qb2luKCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnJlcG9ydFNjaGVtYSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZ0ZvclVuZXhwZWN0ZWRSZXNwb25zZShkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEucmVwb3J0U2NoZW1hLl9fdHlwZW5hbWUgPT09ICdSZXBvcnRTY2hlbWFSZXNwb25zZScpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLnJlcG9ydFNjaGVtYTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhLnJlcG9ydFNjaGVtYS5fX3R5cGVuYW1lID09PSAnUmVwb3J0U2NoZW1hRXJyb3InKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihbXG4gICAgICAgICAgICAgICAgJ1JlY2VpdmVkIGlucHV0IHZhbGlkYXRpb24gZXJyb3IgZnJvbSBBcG9sbG86JyxcbiAgICAgICAgICAgICAgICBkYXRhLnJlcG9ydFNjaGVtYS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICdTdG9wcGluZyByZXBvcnRpbmcuIFBsZWFzZSBmaXggdGhlIGlucHV0IGVycm9ycy4nLFxuICAgICAgICAgICAgXS5qb2luKCcgJykpO1xuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnRm9yVW5leHBlY3RlZFJlc3BvbnNlKGRhdGEpKTtcbiAgICB9XG4gICAgYXN5bmMgYXBvbGxvUXVlcnkodmFyaWFibGVzKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICBxdWVyeTogZXhwb3J0cy5zY2hlbWFSZXBvcnRHcWwsXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGh0dHBSZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2hlcih0aGlzLmVuZHBvaW50VXJsLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFodHRwUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihbXG4gICAgICAgICAgICAgICAgYEFuIHVuZXhwZWN0ZWQgSFRUUCBzdGF0dXMgY29kZSAoJHtodHRwUmVzcG9uc2Uuc3RhdHVzfSkgd2FzYCxcbiAgICAgICAgICAgICAgICAnZW5jb3VudGVyZWQgZHVyaW5nIHNjaGVtYSByZXBvcnRpbmcuJyxcbiAgICAgICAgICAgIF0uam9pbignICcpKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGh0dHBSZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoW1xuICAgICAgICAgICAgICAgIFwiQ291bGRuJ3QgcmVwb3J0IHNjaGVtYSB0byBBcG9sbG8uXCIsXG4gICAgICAgICAgICAgICAgJ1BhcnNpbmcgcmVzcG9uc2UgYXMgSlNPTiBmYWlsZWQuJyxcbiAgICAgICAgICAgICAgICAnSWYgdGhpcyBjb250aW51ZXMgcGxlYXNlIHJlYWNoIG91dCB0byBzdXBwb3J0QGFwb2xsb2dyYXBocWwuY29tJyxcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIF0uam9pbignICcpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuU2NoZW1hUmVwb3J0ZXIgPSBTY2hlbWFSZXBvcnRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVtYVJlcG9ydGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaReporting/schemaReporter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/traceTreeBuilder.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/traceTreeBuilder.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.dateToProtoTimestamp = exports.TraceTreeBuilder = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst usage_reporting_protobuf_1 = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js\");\nconst UnreachableCaseError_js_1 = __webpack_require__(/*! ../utils/UnreachableCaseError.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/UnreachableCaseError.js\");\nfunction internalError(message) {\n    return new Error(`[internal apollo-server error] ${message}`);\n}\nclass TraceTreeBuilder {\n    constructor(options) {\n        this.rootNode = new usage_reporting_protobuf_1.Trace.Node();\n        this.trace = new usage_reporting_protobuf_1.Trace({\n            root: this.rootNode,\n            fieldExecutionWeight: 1,\n        });\n        this.stopped = false;\n        this.nodes = new Map([\n            [responsePathAsString(), this.rootNode],\n        ]);\n        const { sendErrors, maskedBy } = options;\n        if (!sendErrors || 'masked' in sendErrors) {\n            this.transformError = () => new graphql_1.GraphQLError('<masked>', {\n                extensions: { maskedBy },\n            });\n        }\n        else if ('transform' in sendErrors) {\n            this.transformError = sendErrors.transform;\n        }\n        else if ('unmodified' in sendErrors) {\n            this.transformError = null;\n        }\n        else {\n            throw new UnreachableCaseError_js_1.UnreachableCaseError(sendErrors);\n        }\n    }\n    startTiming() {\n        if (this.startHrTime) {\n            throw internalError('startTiming called twice!');\n        }\n        if (this.stopped) {\n            throw internalError('startTiming called after stopTiming!');\n        }\n        this.trace.startTime = dateToProtoTimestamp(new Date());\n        this.startHrTime = process.hrtime();\n    }\n    stopTiming() {\n        if (!this.startHrTime) {\n            throw internalError('stopTiming called before startTiming!');\n        }\n        if (this.stopped) {\n            throw internalError('stopTiming called twice!');\n        }\n        this.trace.durationNs = durationHrTimeToNanos(process.hrtime(this.startHrTime));\n        this.trace.endTime = dateToProtoTimestamp(new Date());\n        this.stopped = true;\n    }\n    willResolveField(info) {\n        if (!this.startHrTime) {\n            throw internalError('willResolveField called before startTiming!');\n        }\n        if (this.stopped) {\n            return () => { };\n        }\n        const path = info.path;\n        const node = this.newNode(path);\n        node.type = info.returnType.toString();\n        node.parentType = info.parentType.toString();\n        node.startTime = durationHrTimeToNanos(process.hrtime(this.startHrTime));\n        if (typeof path.key === 'string' && path.key !== info.fieldName) {\n            node.originalFieldName = info.fieldName;\n        }\n        return () => {\n            node.endTime = durationHrTimeToNanos(process.hrtime(this.startHrTime));\n        };\n    }\n    didEncounterErrors(errors) {\n        errors.forEach((err) => {\n            if (err.extensions?.serviceName) {\n                return;\n            }\n            const errorForReporting = this.transformAndNormalizeError(err);\n            if (errorForReporting === null) {\n                return;\n            }\n            this.addProtobufError(errorForReporting.path, errorToProtobufError(errorForReporting));\n        });\n    }\n    addProtobufError(path, error) {\n        if (!this.startHrTime) {\n            throw internalError('addProtobufError called before startTiming!');\n        }\n        if (this.stopped) {\n            throw internalError('addProtobufError called after stopTiming!');\n        }\n        let node = this.rootNode;\n        if (Array.isArray(path)) {\n            const specificNode = this.nodes.get(path.join('.'));\n            if (specificNode) {\n                node = specificNode;\n            }\n            else {\n                const responsePath = responsePathFromArray(path, this.rootNode);\n                if (!responsePath) {\n                    throw internalError('addProtobufError called with invalid path!');\n                }\n                node = this.newNode(responsePath);\n            }\n        }\n        node.error.push(error);\n    }\n    newNode(path) {\n        const node = new usage_reporting_protobuf_1.Trace.Node();\n        const id = path.key;\n        if (typeof id === 'number') {\n            node.index = id;\n        }\n        else {\n            node.responseName = id;\n        }\n        this.nodes.set(responsePathAsString(path), node);\n        const parentNode = this.ensureParentNode(path);\n        parentNode.child.push(node);\n        return node;\n    }\n    ensureParentNode(path) {\n        const parentPath = responsePathAsString(path.prev);\n        const parentNode = this.nodes.get(parentPath);\n        if (parentNode) {\n            return parentNode;\n        }\n        return this.newNode(path.prev);\n    }\n    transformAndNormalizeError(err) {\n        if (this.transformError) {\n            const clonedError = Object.assign(Object.create(Object.getPrototypeOf(err)), err);\n            const rewrittenError = this.transformError(clonedError);\n            if (rewrittenError === null) {\n                return null;\n            }\n            if (!(rewrittenError instanceof graphql_1.GraphQLError)) {\n                return err;\n            }\n            return new graphql_1.GraphQLError(rewrittenError.message, {\n                nodes: err.nodes,\n                source: err.source,\n                positions: err.positions,\n                path: err.path,\n                originalError: err.originalError,\n                extensions: rewrittenError.extensions || err.extensions,\n            });\n        }\n        return err;\n    }\n}\nexports.TraceTreeBuilder = TraceTreeBuilder;\nfunction durationHrTimeToNanos(hrtime) {\n    return hrtime[0] * 1e9 + hrtime[1];\n}\nfunction responsePathAsString(p) {\n    if (p === undefined) {\n        return '';\n    }\n    let res = String(p.key);\n    while ((p = p.prev) !== undefined) {\n        res = `${p.key}.${res}`;\n    }\n    return res;\n}\nfunction responsePathFromArray(path, node) {\n    let responsePath;\n    let nodePtr = node;\n    for (const key of path) {\n        nodePtr = nodePtr?.child?.find((child) => child.responseName === key);\n        responsePath = {\n            key,\n            prev: responsePath,\n            typename: nodePtr?.type ?? undefined,\n        };\n    }\n    return responsePath;\n}\nfunction errorToProtobufError(error) {\n    return new usage_reporting_protobuf_1.Trace.Error({\n        message: error.message,\n        location: (error.locations || []).map(({ line, column }) => new usage_reporting_protobuf_1.Trace.Location({ line, column })),\n        json: JSON.stringify(error),\n    });\n}\nfunction dateToProtoTimestamp(date) {\n    const totalMillis = +date;\n    const millis = totalMillis % 1000;\n    return new usage_reporting_protobuf_1.google.protobuf.Timestamp({\n        seconds: (totalMillis - millis) / 1000,\n        nanos: millis * 1e6,\n    });\n}\nexports.dateToProtoTimestamp = dateToProtoTimestamp;\n//# sourceMappingURL=traceTreeBuilder.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3RyYWNlVHJlZUJ1aWxkZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsNEJBQTRCLEdBQUcsd0JBQXdCO0FBQ3ZELGtCQUFrQixtQkFBTyxDQUFDLHVEQUFTO0FBQ25DLG1DQUFtQyxtQkFBTyxDQUFDLHlIQUFrQztBQUM3RSxrQ0FBa0MsbUJBQU8sQ0FBQyxvSEFBa0M7QUFDNUU7QUFDQSx1REFBdUQsUUFBUTtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1QkFBdUI7QUFDdkM7QUFDQTtBQUNBLDhCQUE4QixVQUFVO0FBQ3hDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU0sR0FBRyxJQUFJO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGNBQWMscURBQXFELGNBQWM7QUFDbEk7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw0QkFBNEI7QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3BsdWdpbi90cmFjZVRyZWVCdWlsZGVyLmpzPzQyNzgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRhdGVUb1Byb3RvVGltZXN0YW1wID0gZXhwb3J0cy5UcmFjZVRyZWVCdWlsZGVyID0gdm9pZCAwO1xuY29uc3QgZ3JhcGhxbF8xID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5jb25zdCB1c2FnZV9yZXBvcnRpbmdfcHJvdG9idWZfMSA9IHJlcXVpcmUoXCJAYXBvbGxvL3VzYWdlLXJlcG9ydGluZy1wcm90b2J1ZlwiKTtcbmNvbnN0IFVucmVhY2hhYmxlQ2FzZUVycm9yX2pzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvVW5yZWFjaGFibGVDYXNlRXJyb3IuanNcIik7XG5mdW5jdGlvbiBpbnRlcm5hbEVycm9yKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKGBbaW50ZXJuYWwgYXBvbGxvLXNlcnZlciBlcnJvcl0gJHttZXNzYWdlfWApO1xufVxuY2xhc3MgVHJhY2VUcmVlQnVpbGRlciB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLnJvb3ROb2RlID0gbmV3IHVzYWdlX3JlcG9ydGluZ19wcm90b2J1Zl8xLlRyYWNlLk5vZGUoKTtcbiAgICAgICAgdGhpcy50cmFjZSA9IG5ldyB1c2FnZV9yZXBvcnRpbmdfcHJvdG9idWZfMS5UcmFjZSh7XG4gICAgICAgICAgICByb290OiB0aGlzLnJvb3ROb2RlLFxuICAgICAgICAgICAgZmllbGRFeGVjdXRpb25XZWlnaHQ6IDEsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ub2RlcyA9IG5ldyBNYXAoW1xuICAgICAgICAgICAgW3Jlc3BvbnNlUGF0aEFzU3RyaW5nKCksIHRoaXMucm9vdE5vZGVdLFxuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgeyBzZW5kRXJyb3JzLCBtYXNrZWRCeSB9ID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCFzZW5kRXJyb3JzIHx8ICdtYXNrZWQnIGluIHNlbmRFcnJvcnMpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRXJyb3IgPSAoKSA9PiBuZXcgZ3JhcGhxbF8xLkdyYXBoUUxFcnJvcignPG1hc2tlZD4nLCB7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogeyBtYXNrZWRCeSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJ3RyYW5zZm9ybScgaW4gc2VuZEVycm9ycykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1FcnJvciA9IHNlbmRFcnJvcnMudHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCd1bm1vZGlmaWVkJyBpbiBzZW5kRXJyb3JzKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUVycm9yID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVbnJlYWNoYWJsZUNhc2VFcnJvcl9qc18xLlVucmVhY2hhYmxlQ2FzZUVycm9yKHNlbmRFcnJvcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0VGltaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5zdGFydEhyVGltZSkge1xuICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignc3RhcnRUaW1pbmcgY2FsbGVkIHR3aWNlIScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHRocm93IGludGVybmFsRXJyb3IoJ3N0YXJ0VGltaW5nIGNhbGxlZCBhZnRlciBzdG9wVGltaW5nIScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhY2Uuc3RhcnRUaW1lID0gZGF0ZVRvUHJvdG9UaW1lc3RhbXAobmV3IERhdGUoKSk7XG4gICAgICAgIHRoaXMuc3RhcnRIclRpbWUgPSBwcm9jZXNzLmhydGltZSgpO1xuICAgIH1cbiAgICBzdG9wVGltaW5nKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRIclRpbWUpIHtcbiAgICAgICAgICAgIHRocm93IGludGVybmFsRXJyb3IoJ3N0b3BUaW1pbmcgY2FsbGVkIGJlZm9yZSBzdGFydFRpbWluZyEnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBpbnRlcm5hbEVycm9yKCdzdG9wVGltaW5nIGNhbGxlZCB0d2ljZSEnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYWNlLmR1cmF0aW9uTnMgPSBkdXJhdGlvbkhyVGltZVRvTmFub3MocHJvY2Vzcy5ocnRpbWUodGhpcy5zdGFydEhyVGltZSkpO1xuICAgICAgICB0aGlzLnRyYWNlLmVuZFRpbWUgPSBkYXRlVG9Qcm90b1RpbWVzdGFtcChuZXcgRGF0ZSgpKTtcbiAgICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgd2lsbFJlc29sdmVGaWVsZChpbmZvKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydEhyVGltZSkge1xuICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignd2lsbFJlc29sdmVGaWVsZCBjYWxsZWQgYmVmb3JlIHN0YXJ0VGltaW5nIScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0aCA9IGluZm8ucGF0aDtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubmV3Tm9kZShwYXRoKTtcbiAgICAgICAgbm9kZS50eXBlID0gaW5mby5yZXR1cm5UeXBlLnRvU3RyaW5nKCk7XG4gICAgICAgIG5vZGUucGFyZW50VHlwZSA9IGluZm8ucGFyZW50VHlwZS50b1N0cmluZygpO1xuICAgICAgICBub2RlLnN0YXJ0VGltZSA9IGR1cmF0aW9uSHJUaW1lVG9OYW5vcyhwcm9jZXNzLmhydGltZSh0aGlzLnN0YXJ0SHJUaW1lKSk7XG4gICAgICAgIGlmICh0eXBlb2YgcGF0aC5rZXkgPT09ICdzdHJpbmcnICYmIHBhdGgua2V5ICE9PSBpbmZvLmZpZWxkTmFtZSkge1xuICAgICAgICAgICAgbm9kZS5vcmlnaW5hbEZpZWxkTmFtZSA9IGluZm8uZmllbGROYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBub2RlLmVuZFRpbWUgPSBkdXJhdGlvbkhyVGltZVRvTmFub3MocHJvY2Vzcy5ocnRpbWUodGhpcy5zdGFydEhyVGltZSkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBkaWRFbmNvdW50ZXJFcnJvcnMoZXJyb3JzKSB7XG4gICAgICAgIGVycm9ycy5mb3JFYWNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIuZXh0ZW5zaW9ucz8uc2VydmljZU5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlcnJvckZvclJlcG9ydGluZyA9IHRoaXMudHJhbnNmb3JtQW5kTm9ybWFsaXplRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIGlmIChlcnJvckZvclJlcG9ydGluZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkUHJvdG9idWZFcnJvcihlcnJvckZvclJlcG9ydGluZy5wYXRoLCBlcnJvclRvUHJvdG9idWZFcnJvcihlcnJvckZvclJlcG9ydGluZykpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkUHJvdG9idWZFcnJvcihwYXRoLCBlcnJvcikge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRIclRpbWUpIHtcbiAgICAgICAgICAgIHRocm93IGludGVybmFsRXJyb3IoJ2FkZFByb3RvYnVmRXJyb3IgY2FsbGVkIGJlZm9yZSBzdGFydFRpbWluZyEnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBpbnRlcm5hbEVycm9yKCdhZGRQcm90b2J1ZkVycm9yIGNhbGxlZCBhZnRlciBzdG9wVGltaW5nIScpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBub2RlID0gdGhpcy5yb290Tm9kZTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGF0aCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNwZWNpZmljTm9kZSA9IHRoaXMubm9kZXMuZ2V0KHBhdGguam9pbignLicpKTtcbiAgICAgICAgICAgIGlmIChzcGVjaWZpY05vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlID0gc3BlY2lmaWNOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VQYXRoID0gcmVzcG9uc2VQYXRoRnJvbUFycmF5KHBhdGgsIHRoaXMucm9vdE5vZGUpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2VQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGludGVybmFsRXJyb3IoJ2FkZFByb3RvYnVmRXJyb3IgY2FsbGVkIHdpdGggaW52YWxpZCBwYXRoIScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2RlID0gdGhpcy5uZXdOb2RlKHJlc3BvbnNlUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5lcnJvci5wdXNoKGVycm9yKTtcbiAgICB9XG4gICAgbmV3Tm9kZShwYXRoKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXcgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuTm9kZSgpO1xuICAgICAgICBjb25zdCBpZCA9IHBhdGgua2V5O1xuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgbm9kZS5pbmRleCA9IGlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5yZXNwb25zZU5hbWUgPSBpZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vZGVzLnNldChyZXNwb25zZVBhdGhBc1N0cmluZyhwYXRoKSwgbm9kZSk7XG4gICAgICAgIGNvbnN0IHBhcmVudE5vZGUgPSB0aGlzLmVuc3VyZVBhcmVudE5vZGUocGF0aCk7XG4gICAgICAgIHBhcmVudE5vZGUuY2hpbGQucHVzaChub2RlKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIGVuc3VyZVBhcmVudE5vZGUocGF0aCkge1xuICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gcmVzcG9uc2VQYXRoQXNTdHJpbmcocGF0aC5wcmV2KTtcbiAgICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IHRoaXMubm9kZXMuZ2V0KHBhcmVudFBhdGgpO1xuICAgICAgICBpZiAocGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubmV3Tm9kZShwYXRoLnByZXYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm1BbmROb3JtYWxpemVFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lZEVycm9yID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihlcnIpKSwgZXJyKTtcbiAgICAgICAgICAgIGNvbnN0IHJld3JpdHRlbkVycm9yID0gdGhpcy50cmFuc2Zvcm1FcnJvcihjbG9uZWRFcnJvcik7XG4gICAgICAgICAgICBpZiAocmV3cml0dGVuRXJyb3IgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKHJld3JpdHRlbkVycm9yIGluc3RhbmNlb2YgZ3JhcGhxbF8xLkdyYXBoUUxFcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBncmFwaHFsXzEuR3JhcGhRTEVycm9yKHJld3JpdHRlbkVycm9yLm1lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICBub2RlczogZXJyLm5vZGVzLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogZXJyLnNvdXJjZSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnM6IGVyci5wb3NpdGlvbnMsXG4gICAgICAgICAgICAgICAgcGF0aDogZXJyLnBhdGgsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvcjogZXJyLm9yaWdpbmFsRXJyb3IsXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogcmV3cml0dGVuRXJyb3IuZXh0ZW5zaW9ucyB8fCBlcnIuZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgfVxufVxuZXhwb3J0cy5UcmFjZVRyZWVCdWlsZGVyID0gVHJhY2VUcmVlQnVpbGRlcjtcbmZ1bmN0aW9uIGR1cmF0aW9uSHJUaW1lVG9OYW5vcyhocnRpbWUpIHtcbiAgICByZXR1cm4gaHJ0aW1lWzBdICogMWU5ICsgaHJ0aW1lWzFdO1xufVxuZnVuY3Rpb24gcmVzcG9uc2VQYXRoQXNTdHJpbmcocCkge1xuICAgIGlmIChwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBsZXQgcmVzID0gU3RyaW5nKHAua2V5KTtcbiAgICB3aGlsZSAoKHAgPSBwLnByZXYpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVzID0gYCR7cC5rZXl9LiR7cmVzfWA7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiByZXNwb25zZVBhdGhGcm9tQXJyYXkocGF0aCwgbm9kZSkge1xuICAgIGxldCByZXNwb25zZVBhdGg7XG4gICAgbGV0IG5vZGVQdHIgPSBub2RlO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHBhdGgpIHtcbiAgICAgICAgbm9kZVB0ciA9IG5vZGVQdHI/LmNoaWxkPy5maW5kKChjaGlsZCkgPT4gY2hpbGQucmVzcG9uc2VOYW1lID09PSBrZXkpO1xuICAgICAgICByZXNwb25zZVBhdGggPSB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBwcmV2OiByZXNwb25zZVBhdGgsXG4gICAgICAgICAgICB0eXBlbmFtZTogbm9kZVB0cj8udHlwZSA/PyB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZVBhdGg7XG59XG5mdW5jdGlvbiBlcnJvclRvUHJvdG9idWZFcnJvcihlcnJvcikge1xuICAgIHJldHVybiBuZXcgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBsb2NhdGlvbjogKGVycm9yLmxvY2F0aW9ucyB8fCBbXSkubWFwKCh7IGxpbmUsIGNvbHVtbiB9KSA9PiBuZXcgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuTG9jYXRpb24oeyBsaW5lLCBjb2x1bW4gfSkpLFxuICAgICAgICBqc29uOiBKU09OLnN0cmluZ2lmeShlcnJvciksXG4gICAgfSk7XG59XG5mdW5jdGlvbiBkYXRlVG9Qcm90b1RpbWVzdGFtcChkYXRlKSB7XG4gICAgY29uc3QgdG90YWxNaWxsaXMgPSArZGF0ZTtcbiAgICBjb25zdCBtaWxsaXMgPSB0b3RhbE1pbGxpcyAlIDEwMDA7XG4gICAgcmV0dXJuIG5ldyB1c2FnZV9yZXBvcnRpbmdfcHJvdG9idWZfMS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wKHtcbiAgICAgICAgc2Vjb25kczogKHRvdGFsTWlsbGlzIC0gbWlsbGlzKSAvIDEwMDAsXG4gICAgICAgIG5hbm9zOiBtaWxsaXMgKiAxZTYsXG4gICAgfSk7XG59XG5leHBvcnRzLmRhdGVUb1Byb3RvVGltZXN0YW1wID0gZGF0ZVRvUHJvdG9UaW1lc3RhbXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZVRyZWVCdWlsZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/traceTreeBuilder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/defaultSendOperationsAsTrace.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/defaultSendOperationsAsTrace.js ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.defaultSendOperationsAsTrace = void 0;\nconst lru_cache_1 = __importDefault(__webpack_require__(/*! lru-cache */ \"(rsc)/./node_modules/lru-cache/index.js\"));\nconst iterateOverTrace_js_1 = __webpack_require__(/*! ./iterateOverTrace.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/iterateOverTrace.js\");\nconst durationHistogram_js_1 = __webpack_require__(/*! ./durationHistogram.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/durationHistogram.js\");\nfunction defaultSendOperationsAsTrace() {\n    const cache = new lru_cache_1.default({\n        maxSize: Math.pow(2, 20),\n        sizeCalculation: (_val, key) => {\n            return (key && Buffer.byteLength(key)) || 0;\n        },\n    });\n    return (trace, statsReportKey) => {\n        const endTimeSeconds = trace.endTime?.seconds;\n        if (endTimeSeconds == null) {\n            throw Error('programming error: endTime not set on trace');\n        }\n        const hasErrors = traceHasErrors(trace);\n        const cacheKey = JSON.stringify([\n            statsReportKey,\n            durationHistogram_js_1.DurationHistogram.durationToBucket(trace.durationNs),\n            Math.floor(endTimeSeconds / 60),\n            hasErrors ? Math.floor(endTimeSeconds / 5) : '',\n        ]);\n        if (cache.get(cacheKey)) {\n            return false;\n        }\n        cache.set(cacheKey, true);\n        return true;\n    };\n}\nexports.defaultSendOperationsAsTrace = defaultSendOperationsAsTrace;\nfunction traceHasErrors(trace) {\n    let hasErrors = false;\n    function traceNodeStats(node) {\n        if ((node.error?.length ?? 0) > 0) {\n            hasErrors = true;\n        }\n        return hasErrors;\n    }\n    (0, iterateOverTrace_js_1.iterateOverTrace)(trace, traceNodeStats, false);\n    return hasErrors;\n}\n//# sourceMappingURL=defaultSendOperationsAsTrace.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2RlZmF1bHRTZW5kT3BlcmF0aW9uc0FzVHJhY2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxvQ0FBb0M7QUFDcEMsb0NBQW9DLG1CQUFPLENBQUMsMERBQVc7QUFDdkQsOEJBQThCLG1CQUFPLENBQUMscUhBQXVCO0FBQzdELCtCQUErQixtQkFBTyxDQUFDLHVIQUF3QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3BsdWdpbi91c2FnZVJlcG9ydGluZy9kZWZhdWx0U2VuZE9wZXJhdGlvbnNBc1RyYWNlLmpzP2I4NTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHRTZW5kT3BlcmF0aW9uc0FzVHJhY2UgPSB2b2lkIDA7XG5jb25zdCBscnVfY2FjaGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibHJ1LWNhY2hlXCIpKTtcbmNvbnN0IGl0ZXJhdGVPdmVyVHJhY2VfanNfMSA9IHJlcXVpcmUoXCIuL2l0ZXJhdGVPdmVyVHJhY2UuanNcIik7XG5jb25zdCBkdXJhdGlvbkhpc3RvZ3JhbV9qc18xID0gcmVxdWlyZShcIi4vZHVyYXRpb25IaXN0b2dyYW0uanNcIik7XG5mdW5jdGlvbiBkZWZhdWx0U2VuZE9wZXJhdGlvbnNBc1RyYWNlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gbmV3IGxydV9jYWNoZV8xLmRlZmF1bHQoe1xuICAgICAgICBtYXhTaXplOiBNYXRoLnBvdygyLCAyMCksXG4gICAgICAgIHNpemVDYWxjdWxhdGlvbjogKF92YWwsIGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChrZXkgJiYgQnVmZmVyLmJ5dGVMZW5ndGgoa2V5KSkgfHwgMDtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gKHRyYWNlLCBzdGF0c1JlcG9ydEtleSkgPT4ge1xuICAgICAgICBjb25zdCBlbmRUaW1lU2Vjb25kcyA9IHRyYWNlLmVuZFRpbWU/LnNlY29uZHM7XG4gICAgICAgIGlmIChlbmRUaW1lU2Vjb25kcyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcigncHJvZ3JhbW1pbmcgZXJyb3I6IGVuZFRpbWUgbm90IHNldCBvbiB0cmFjZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc0Vycm9ycyA9IHRyYWNlSGFzRXJyb3JzKHRyYWNlKTtcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBKU09OLnN0cmluZ2lmeShbXG4gICAgICAgICAgICBzdGF0c1JlcG9ydEtleSxcbiAgICAgICAgICAgIGR1cmF0aW9uSGlzdG9ncmFtX2pzXzEuRHVyYXRpb25IaXN0b2dyYW0uZHVyYXRpb25Ub0J1Y2tldCh0cmFjZS5kdXJhdGlvbk5zKSxcbiAgICAgICAgICAgIE1hdGguZmxvb3IoZW5kVGltZVNlY29uZHMgLyA2MCksXG4gICAgICAgICAgICBoYXNFcnJvcnMgPyBNYXRoLmZsb29yKGVuZFRpbWVTZWNvbmRzIC8gNSkgOiAnJyxcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChjYWNoZS5nZXQoY2FjaGVLZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FjaGUuc2V0KGNhY2hlS2V5LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbmV4cG9ydHMuZGVmYXVsdFNlbmRPcGVyYXRpb25zQXNUcmFjZSA9IGRlZmF1bHRTZW5kT3BlcmF0aW9uc0FzVHJhY2U7XG5mdW5jdGlvbiB0cmFjZUhhc0Vycm9ycyh0cmFjZSkge1xuICAgIGxldCBoYXNFcnJvcnMgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiB0cmFjZU5vZGVTdGF0cyhub2RlKSB7XG4gICAgICAgIGlmICgobm9kZS5lcnJvcj8ubGVuZ3RoID8/IDApID4gMCkge1xuICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzRXJyb3JzO1xuICAgIH1cbiAgICAoMCwgaXRlcmF0ZU92ZXJUcmFjZV9qc18xLml0ZXJhdGVPdmVyVHJhY2UpKHRyYWNlLCB0cmFjZU5vZGVTdGF0cywgZmFsc2UpO1xuICAgIHJldHVybiBoYXNFcnJvcnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0U2VuZE9wZXJhdGlvbnNBc1RyYWNlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/defaultSendOperationsAsTrace.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/durationHistogram.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/durationHistogram.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DurationHistogram = void 0;\nclass DurationHistogram {\n    toArray() {\n        let bufferedZeroes = 0;\n        const outputArray = [];\n        for (const value of this.buckets) {\n            if (value === 0) {\n                bufferedZeroes++;\n            }\n            else {\n                if (bufferedZeroes === 1) {\n                    outputArray.push(0);\n                }\n                else if (bufferedZeroes !== 0) {\n                    outputArray.push(-bufferedZeroes);\n                }\n                outputArray.push(Math.floor(value));\n                bufferedZeroes = 0;\n            }\n        }\n        return outputArray;\n    }\n    static durationToBucket(durationNs) {\n        const log = Math.log(durationNs / 1000.0);\n        const unboundedBucket = Math.ceil(log / DurationHistogram.EXPONENT_LOG);\n        return unboundedBucket <= 0 || Number.isNaN(unboundedBucket)\n            ? 0\n            : unboundedBucket >= DurationHistogram.BUCKET_COUNT\n                ? DurationHistogram.BUCKET_COUNT - 1\n                : unboundedBucket;\n    }\n    incrementDuration(durationNs, value = 1) {\n        this.incrementBucket(DurationHistogram.durationToBucket(durationNs), value);\n        return this;\n    }\n    incrementBucket(bucket, value = 1) {\n        if (bucket >= DurationHistogram.BUCKET_COUNT) {\n            throw Error('Bucket is out of bounds of the buckets array');\n        }\n        if (bucket >= this.buckets.length) {\n            const oldLength = this.buckets.length;\n            this.buckets.length = bucket + 1;\n            this.buckets.fill(0, oldLength);\n        }\n        this.buckets[bucket] += value;\n    }\n    combine(otherHistogram) {\n        for (let i = 0; i < otherHistogram.buckets.length; i++) {\n            this.incrementBucket(i, otherHistogram.buckets[i]);\n        }\n    }\n    constructor(options) {\n        const initSize = options?.initSize || 74;\n        const buckets = options?.buckets;\n        const arrayInitSize = Math.max(buckets?.length || 0, initSize);\n        this.buckets = Array(arrayInitSize).fill(0);\n        if (buckets) {\n            buckets.forEach((val, index) => (this.buckets[index] = val));\n        }\n    }\n}\nexports.DurationHistogram = DurationHistogram;\nDurationHistogram.BUCKET_COUNT = 384;\nDurationHistogram.EXPONENT_LOG = Math.log(1.1);\n//# sourceMappingURL=durationHistogram.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2R1cmF0aW9uSGlzdG9ncmFtLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtQ0FBbUM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9wbHVnaW4vdXNhZ2VSZXBvcnRpbmcvZHVyYXRpb25IaXN0b2dyYW0uanM/NTFkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRHVyYXRpb25IaXN0b2dyYW0gPSB2b2lkIDA7XG5jbGFzcyBEdXJhdGlvbkhpc3RvZ3JhbSB7XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgbGV0IGJ1ZmZlcmVkWmVyb2VzID0gMDtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLmJ1Y2tldHMpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcmVkWmVyb2VzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyZWRaZXJvZXMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYnVmZmVyZWRaZXJvZXMgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCgtYnVmZmVyZWRaZXJvZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKE1hdGguZmxvb3IodmFsdWUpKTtcbiAgICAgICAgICAgICAgICBidWZmZXJlZFplcm9lcyA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dEFycmF5O1xuICAgIH1cbiAgICBzdGF0aWMgZHVyYXRpb25Ub0J1Y2tldChkdXJhdGlvbk5zKSB7XG4gICAgICAgIGNvbnN0IGxvZyA9IE1hdGgubG9nKGR1cmF0aW9uTnMgLyAxMDAwLjApO1xuICAgICAgICBjb25zdCB1bmJvdW5kZWRCdWNrZXQgPSBNYXRoLmNlaWwobG9nIC8gRHVyYXRpb25IaXN0b2dyYW0uRVhQT05FTlRfTE9HKTtcbiAgICAgICAgcmV0dXJuIHVuYm91bmRlZEJ1Y2tldCA8PSAwIHx8IE51bWJlci5pc05hTih1bmJvdW5kZWRCdWNrZXQpXG4gICAgICAgICAgICA/IDBcbiAgICAgICAgICAgIDogdW5ib3VuZGVkQnVja2V0ID49IER1cmF0aW9uSGlzdG9ncmFtLkJVQ0tFVF9DT1VOVFxuICAgICAgICAgICAgICAgID8gRHVyYXRpb25IaXN0b2dyYW0uQlVDS0VUX0NPVU5UIC0gMVxuICAgICAgICAgICAgICAgIDogdW5ib3VuZGVkQnVja2V0O1xuICAgIH1cbiAgICBpbmNyZW1lbnREdXJhdGlvbihkdXJhdGlvbk5zLCB2YWx1ZSA9IDEpIHtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRCdWNrZXQoRHVyYXRpb25IaXN0b2dyYW0uZHVyYXRpb25Ub0J1Y2tldChkdXJhdGlvbk5zKSwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaW5jcmVtZW50QnVja2V0KGJ1Y2tldCwgdmFsdWUgPSAxKSB7XG4gICAgICAgIGlmIChidWNrZXQgPj0gRHVyYXRpb25IaXN0b2dyYW0uQlVDS0VUX0NPVU5UKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignQnVja2V0IGlzIG91dCBvZiBib3VuZHMgb2YgdGhlIGJ1Y2tldHMgYXJyYXknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnVja2V0ID49IHRoaXMuYnVja2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZExlbmd0aCA9IHRoaXMuYnVja2V0cy5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmJ1Y2tldHMubGVuZ3RoID0gYnVja2V0ICsgMTtcbiAgICAgICAgICAgIHRoaXMuYnVja2V0cy5maWxsKDAsIG9sZExlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWNrZXRzW2J1Y2tldF0gKz0gdmFsdWU7XG4gICAgfVxuICAgIGNvbWJpbmUob3RoZXJIaXN0b2dyYW0pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdGhlckhpc3RvZ3JhbS5idWNrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudEJ1Y2tldChpLCBvdGhlckhpc3RvZ3JhbS5idWNrZXRzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGluaXRTaXplID0gb3B0aW9ucz8uaW5pdFNpemUgfHwgNzQ7XG4gICAgICAgIGNvbnN0IGJ1Y2tldHMgPSBvcHRpb25zPy5idWNrZXRzO1xuICAgICAgICBjb25zdCBhcnJheUluaXRTaXplID0gTWF0aC5tYXgoYnVja2V0cz8ubGVuZ3RoIHx8IDAsIGluaXRTaXplKTtcbiAgICAgICAgdGhpcy5idWNrZXRzID0gQXJyYXkoYXJyYXlJbml0U2l6ZSkuZmlsbCgwKTtcbiAgICAgICAgaWYgKGJ1Y2tldHMpIHtcbiAgICAgICAgICAgIGJ1Y2tldHMuZm9yRWFjaCgodmFsLCBpbmRleCkgPT4gKHRoaXMuYnVja2V0c1tpbmRleF0gPSB2YWwpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuRHVyYXRpb25IaXN0b2dyYW0gPSBEdXJhdGlvbkhpc3RvZ3JhbTtcbkR1cmF0aW9uSGlzdG9ncmFtLkJVQ0tFVF9DT1VOVCA9IDM4NDtcbkR1cmF0aW9uSGlzdG9ncmFtLkVYUE9ORU5UX0xPRyA9IE1hdGgubG9nKDEuMSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kdXJhdGlvbkhpc3RvZ3JhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/durationHistogram.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ApolloServerPluginUsageReporting = void 0;\nvar plugin_js_1 = __webpack_require__(/*! ./plugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/plugin.js\");\nObject.defineProperty(exports, \"ApolloServerPluginUsageReporting\", ({ enumerable: true, get: function () { return plugin_js_1.ApolloServerPluginUsageReporting; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHdDQUF3QztBQUN4QyxrQkFBa0IsbUJBQU8sQ0FBQyxpR0FBYTtBQUN2QyxvRUFBbUUsRUFBRSxxQ0FBcUMsd0RBQXdELEVBQUM7QUFDbksiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3BsdWdpbi91c2FnZVJlcG9ydGluZy9pbmRleC5qcz9iMjQ1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZyA9IHZvaWQgMDtcbnZhciBwbHVnaW5fanNfMSA9IHJlcXVpcmUoXCIuL3BsdWdpbi5qc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwbHVnaW5fanNfMS5BcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZzsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/iterateOverTrace.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/iterateOverTrace.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.iterateOverTrace = void 0;\nfunction iterateOverTrace(trace, f, includePath) {\n    const rootPath = includePath\n        ? new RootCollectingPathsResponseNamePath()\n        : notCollectingPathsResponseNamePath;\n    if (trace.root) {\n        if (iterateOverTraceNode(trace.root, rootPath, f))\n            return;\n    }\n    if (trace.queryPlan) {\n        if (iterateOverQueryPlan(trace.queryPlan, rootPath, f))\n            return;\n    }\n}\nexports.iterateOverTrace = iterateOverTrace;\nfunction iterateOverQueryPlan(node, rootPath, f) {\n    if (!node)\n        return false;\n    if (node.fetch?.trace?.root && node.fetch.serviceName) {\n        return iterateOverTraceNode(node.fetch.trace.root, rootPath.child(`service:${node.fetch.serviceName}`), f);\n    }\n    if (node.flatten?.node) {\n        return iterateOverQueryPlan(node.flatten.node, rootPath, f);\n    }\n    if (node.parallel?.nodes) {\n        return node.parallel.nodes.some((node) => iterateOverQueryPlan(node, rootPath, f));\n    }\n    if (node.sequence?.nodes) {\n        return node.sequence.nodes.some((node) => iterateOverQueryPlan(node, rootPath, f));\n    }\n    return false;\n}\nfunction iterateOverTraceNode(node, path, f) {\n    if (f(node, path)) {\n        return true;\n    }\n    return (node.child?.some((child) => {\n        const childPath = child.responseName\n            ? path.child(child.responseName)\n            : path;\n        return iterateOverTraceNode(child, childPath, f);\n    }) ?? false);\n}\nconst notCollectingPathsResponseNamePath = {\n    toArray() {\n        throw Error('not collecting paths!');\n    },\n    child() {\n        return this;\n    },\n};\nclass RootCollectingPathsResponseNamePath {\n    toArray() {\n        return [];\n    }\n    child(responseName) {\n        return new ChildCollectingPathsResponseNamePath(responseName, this);\n    }\n}\nclass ChildCollectingPathsResponseNamePath {\n    constructor(responseName, prev) {\n        this.responseName = responseName;\n        this.prev = prev;\n    }\n    toArray() {\n        const out = [];\n        let curr = this;\n        while (curr instanceof ChildCollectingPathsResponseNamePath) {\n            out.push(curr.responseName);\n            curr = curr.prev;\n        }\n        return out.reverse();\n    }\n    child(responseName) {\n        return new ChildCollectingPathsResponseNamePath(responseName, this);\n    }\n}\n//# sourceMappingURL=iterateOverTrace.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2l0ZXJhdGVPdmVyVHJhY2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLHVCQUF1QjtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2l0ZXJhdGVPdmVyVHJhY2UuanM/ZjI3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaXRlcmF0ZU92ZXJUcmFjZSA9IHZvaWQgMDtcbmZ1bmN0aW9uIGl0ZXJhdGVPdmVyVHJhY2UodHJhY2UsIGYsIGluY2x1ZGVQYXRoKSB7XG4gICAgY29uc3Qgcm9vdFBhdGggPSBpbmNsdWRlUGF0aFxuICAgICAgICA/IG5ldyBSb290Q29sbGVjdGluZ1BhdGhzUmVzcG9uc2VOYW1lUGF0aCgpXG4gICAgICAgIDogbm90Q29sbGVjdGluZ1BhdGhzUmVzcG9uc2VOYW1lUGF0aDtcbiAgICBpZiAodHJhY2Uucm9vdCkge1xuICAgICAgICBpZiAoaXRlcmF0ZU92ZXJUcmFjZU5vZGUodHJhY2Uucm9vdCwgcm9vdFBhdGgsIGYpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHJhY2UucXVlcnlQbGFuKSB7XG4gICAgICAgIGlmIChpdGVyYXRlT3ZlclF1ZXJ5UGxhbih0cmFjZS5xdWVyeVBsYW4sIHJvb3RQYXRoLCBmKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICB9XG59XG5leHBvcnRzLml0ZXJhdGVPdmVyVHJhY2UgPSBpdGVyYXRlT3ZlclRyYWNlO1xuZnVuY3Rpb24gaXRlcmF0ZU92ZXJRdWVyeVBsYW4obm9kZSwgcm9vdFBhdGgsIGYpIHtcbiAgICBpZiAoIW5vZGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAobm9kZS5mZXRjaD8udHJhY2U/LnJvb3QgJiYgbm9kZS5mZXRjaC5zZXJ2aWNlTmFtZSkge1xuICAgICAgICByZXR1cm4gaXRlcmF0ZU92ZXJUcmFjZU5vZGUobm9kZS5mZXRjaC50cmFjZS5yb290LCByb290UGF0aC5jaGlsZChgc2VydmljZToke25vZGUuZmV0Y2guc2VydmljZU5hbWV9YCksIGYpO1xuICAgIH1cbiAgICBpZiAobm9kZS5mbGF0dGVuPy5ub2RlKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRlT3ZlclF1ZXJ5UGxhbihub2RlLmZsYXR0ZW4ubm9kZSwgcm9vdFBhdGgsIGYpO1xuICAgIH1cbiAgICBpZiAobm9kZS5wYXJhbGxlbD8ubm9kZXMpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUucGFyYWxsZWwubm9kZXMuc29tZSgobm9kZSkgPT4gaXRlcmF0ZU92ZXJRdWVyeVBsYW4obm9kZSwgcm9vdFBhdGgsIGYpKTtcbiAgICB9XG4gICAgaWYgKG5vZGUuc2VxdWVuY2U/Lm5vZGVzKSB7XG4gICAgICAgIHJldHVybiBub2RlLnNlcXVlbmNlLm5vZGVzLnNvbWUoKG5vZGUpID0+IGl0ZXJhdGVPdmVyUXVlcnlQbGFuKG5vZGUsIHJvb3RQYXRoLCBmKSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGl0ZXJhdGVPdmVyVHJhY2VOb2RlKG5vZGUsIHBhdGgsIGYpIHtcbiAgICBpZiAoZihub2RlLCBwYXRoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChub2RlLmNoaWxkPy5zb21lKChjaGlsZCkgPT4ge1xuICAgICAgICBjb25zdCBjaGlsZFBhdGggPSBjaGlsZC5yZXNwb25zZU5hbWVcbiAgICAgICAgICAgID8gcGF0aC5jaGlsZChjaGlsZC5yZXNwb25zZU5hbWUpXG4gICAgICAgICAgICA6IHBhdGg7XG4gICAgICAgIHJldHVybiBpdGVyYXRlT3ZlclRyYWNlTm9kZShjaGlsZCwgY2hpbGRQYXRoLCBmKTtcbiAgICB9KSA/PyBmYWxzZSk7XG59XG5jb25zdCBub3RDb2xsZWN0aW5nUGF0aHNSZXNwb25zZU5hbWVQYXRoID0ge1xuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdub3QgY29sbGVjdGluZyBwYXRocyEnKTtcbiAgICB9LFxuICAgIGNoaWxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxufTtcbmNsYXNzIFJvb3RDb2xsZWN0aW5nUGF0aHNSZXNwb25zZU5hbWVQYXRoIHtcbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNoaWxkKHJlc3BvbnNlTmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IENoaWxkQ29sbGVjdGluZ1BhdGhzUmVzcG9uc2VOYW1lUGF0aChyZXNwb25zZU5hbWUsIHRoaXMpO1xuICAgIH1cbn1cbmNsYXNzIENoaWxkQ29sbGVjdGluZ1BhdGhzUmVzcG9uc2VOYW1lUGF0aCB7XG4gICAgY29uc3RydWN0b3IocmVzcG9uc2VOYW1lLCBwcmV2KSB7XG4gICAgICAgIHRoaXMucmVzcG9uc2VOYW1lID0gcmVzcG9uc2VOYW1lO1xuICAgICAgICB0aGlzLnByZXYgPSBwcmV2O1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCBvdXQgPSBbXTtcbiAgICAgICAgbGV0IGN1cnIgPSB0aGlzO1xuICAgICAgICB3aGlsZSAoY3VyciBpbnN0YW5jZW9mIENoaWxkQ29sbGVjdGluZ1BhdGhzUmVzcG9uc2VOYW1lUGF0aCkge1xuICAgICAgICAgICAgb3V0LnB1c2goY3Vyci5yZXNwb25zZU5hbWUpO1xuICAgICAgICAgICAgY3VyciA9IGN1cnIucHJldjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0LnJldmVyc2UoKTtcbiAgICB9XG4gICAgY2hpbGQocmVzcG9uc2VOYW1lKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hpbGRDb2xsZWN0aW5nUGF0aHNSZXNwb25zZU5hbWVQYXRoKHJlc3BvbnNlTmFtZSwgdGhpcyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlcmF0ZU92ZXJUcmFjZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/iterateOverTrace.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/operationDerivedDataCache.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/operationDerivedDataCache.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.operationDerivedDataCacheKey = exports.createOperationDerivedDataCache = void 0;\nconst lru_cache_1 = __importDefault(__webpack_require__(/*! lru-cache */ \"(rsc)/./node_modules/lru-cache/index.js\"));\nfunction createOperationDerivedDataCache({ logger, }) {\n    let lastWarn;\n    let lastDisposals = 0;\n    return new lru_cache_1.default({\n        sizeCalculation(obj) {\n            return Buffer.byteLength(JSON.stringify(obj), 'utf8');\n        },\n        maxSize: Math.pow(2, 20) * 10,\n        dispose() {\n            lastDisposals++;\n            if (!lastWarn || new Date().getTime() - lastWarn.getTime() > 60000) {\n                lastWarn = new Date();\n                logger.warn([\n                    'This server is processing a high number of unique operations.  ',\n                    `A total of ${lastDisposals} records have been `,\n                    'ejected from the ApolloServerPluginUsageReporting signature cache in the past ',\n                    'interval.  If you see this warning frequently, please open an ',\n                    'issue on the Apollo Server repository.',\n                ].join(''));\n                lastDisposals = 0;\n            }\n        },\n    });\n}\nexports.createOperationDerivedDataCache = createOperationDerivedDataCache;\nfunction operationDerivedDataCacheKey(queryHash, operationName) {\n    return `${queryHash}${operationName && ':' + operationName}`;\n}\nexports.operationDerivedDataCacheKey = operationDerivedDataCacheKey;\n//# sourceMappingURL=operationDerivedDataCache.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL29wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxvQ0FBb0MsR0FBRyx1Q0FBdUM7QUFDOUUsb0NBQW9DLG1CQUFPLENBQUMsMERBQVc7QUFDdkQsMkNBQTJDLFNBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxlQUFlO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQSxjQUFjLFVBQVUsRUFBRSxxQ0FBcUM7QUFDL0Q7QUFDQSxvQ0FBb0M7QUFDcEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3BsdWdpbi91c2FnZVJlcG9ydGluZy9vcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlLmpzPzM5NjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGVLZXkgPSBleHBvcnRzLmNyZWF0ZU9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUgPSB2b2lkIDA7XG5jb25zdCBscnVfY2FjaGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibHJ1LWNhY2hlXCIpKTtcbmZ1bmN0aW9uIGNyZWF0ZU9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUoeyBsb2dnZXIsIH0pIHtcbiAgICBsZXQgbGFzdFdhcm47XG4gICAgbGV0IGxhc3REaXNwb3NhbHMgPSAwO1xuICAgIHJldHVybiBuZXcgbHJ1X2NhY2hlXzEuZGVmYXVsdCh7XG4gICAgICAgIHNpemVDYWxjdWxhdGlvbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBCdWZmZXIuYnl0ZUxlbmd0aChKU09OLnN0cmluZ2lmeShvYmopLCAndXRmOCcpO1xuICAgICAgICB9LFxuICAgICAgICBtYXhTaXplOiBNYXRoLnBvdygyLCAyMCkgKiAxMCxcbiAgICAgICAgZGlzcG9zZSgpIHtcbiAgICAgICAgICAgIGxhc3REaXNwb3NhbHMrKztcbiAgICAgICAgICAgIGlmICghbGFzdFdhcm4gfHwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0V2Fybi5nZXRUaW1lKCkgPiA2MDAwMCkge1xuICAgICAgICAgICAgICAgIGxhc3RXYXJuID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybihbXG4gICAgICAgICAgICAgICAgICAgICdUaGlzIHNlcnZlciBpcyBwcm9jZXNzaW5nIGEgaGlnaCBudW1iZXIgb2YgdW5pcXVlIG9wZXJhdGlvbnMuICAnLFxuICAgICAgICAgICAgICAgICAgICBgQSB0b3RhbCBvZiAke2xhc3REaXNwb3NhbHN9IHJlY29yZHMgaGF2ZSBiZWVuIGAsXG4gICAgICAgICAgICAgICAgICAgICdlamVjdGVkIGZyb20gdGhlIEFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nIHNpZ25hdHVyZSBjYWNoZSBpbiB0aGUgcGFzdCAnLFxuICAgICAgICAgICAgICAgICAgICAnaW50ZXJ2YWwuICBJZiB5b3Ugc2VlIHRoaXMgd2FybmluZyBmcmVxdWVudGx5LCBwbGVhc2Ugb3BlbiBhbiAnLFxuICAgICAgICAgICAgICAgICAgICAnaXNzdWUgb24gdGhlIEFwb2xsbyBTZXJ2ZXIgcmVwb3NpdG9yeS4nLFxuICAgICAgICAgICAgICAgIF0uam9pbignJykpO1xuICAgICAgICAgICAgICAgIGxhc3REaXNwb3NhbHMgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0cy5jcmVhdGVPcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlID0gY3JlYXRlT3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZTtcbmZ1bmN0aW9uIG9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGVLZXkocXVlcnlIYXNoLCBvcGVyYXRpb25OYW1lKSB7XG4gICAgcmV0dXJuIGAke3F1ZXJ5SGFzaH0ke29wZXJhdGlvbk5hbWUgJiYgJzonICsgb3BlcmF0aW9uTmFtZX1gO1xufVxuZXhwb3J0cy5vcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlS2V5ID0gb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZUtleTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/operationDerivedDataCache.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/plugin.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/plugin.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.makeHTTPRequestHeaders = exports.ApolloServerPluginUsageReporting = void 0;\nconst usage_reporting_protobuf_1 = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js\");\nconst utils_usagereporting_1 = __webpack_require__(/*! @apollo/utils.usagereporting */ \"(rsc)/./node_modules/@apollo/utils.usagereporting/dist/index.js\");\nconst async_retry_1 = __importDefault(__webpack_require__(/*! async-retry */ \"(rsc)/./node_modules/async-retry/lib/index.js\"));\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst node_abort_controller_1 = __webpack_require__(/*! node-abort-controller */ \"(rsc)/./node_modules/node-abort-controller/index.js\");\nconst node_fetch_1 = __importDefault(__webpack_require__(/*! node-fetch */ \"(rsc)/./node_modules/node-fetch/lib/index.mjs\"));\nconst os_1 = __importDefault(__webpack_require__(/*! os */ \"os\"));\nconst zlib_1 = __webpack_require__(/*! zlib */ \"zlib\");\nconst internalPlugin_js_1 = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalPlugin.js\");\nconst traceTreeBuilder_js_1 = __webpack_require__(/*! ../traceTreeBuilder.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/traceTreeBuilder.js\");\nconst defaultSendOperationsAsTrace_js_1 = __webpack_require__(/*! ./defaultSendOperationsAsTrace.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/defaultSendOperationsAsTrace.js\");\nconst operationDerivedDataCache_js_1 = __webpack_require__(/*! ./operationDerivedDataCache.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/operationDerivedDataCache.js\");\nconst stats_js_1 = __webpack_require__(/*! ./stats.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/stats.js\");\nconst traceDetails_js_1 = __webpack_require__(/*! ./traceDetails.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/traceDetails.js\");\nconst packageVersion_js_1 = __webpack_require__(/*! ../../generated/packageVersion.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/generated/packageVersion.js\");\nconst computeCoreSchemaHash_js_1 = __webpack_require__(/*! ../../utils/computeCoreSchemaHash.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/computeCoreSchemaHash.js\");\nconst schemaIsSubgraph_js_1 = __webpack_require__(/*! ../schemaIsSubgraph.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/schemaIsSubgraph.js\");\nconst reportHeaderDefaults = {\n    hostname: os_1.default.hostname(),\n    agentVersion: `@apollo/server@${packageVersion_js_1.packageVersion}`,\n    runtimeVersion: `node ${process.version}`,\n    uname: `${os_1.default.platform()}, ${os_1.default.type()}, ${os_1.default.release()}, ${os_1.default.arch()})`,\n};\nfunction ApolloServerPluginUsageReporting(options = Object.create(null)) {\n    const fieldLevelInstrumentationOption = options.fieldLevelInstrumentation;\n    const fieldLevelInstrumentation = typeof fieldLevelInstrumentationOption === 'number'\n        ? async () => Math.random() < fieldLevelInstrumentationOption\n            ? 1 / fieldLevelInstrumentationOption\n            : 0\n        : fieldLevelInstrumentationOption\n            ? fieldLevelInstrumentationOption\n            : async () => true;\n    let requestDidStartHandler = null;\n    return (0, internalPlugin_js_1.internalPlugin)({\n        __internal_plugin_id__: 'UsageReporting',\n        __is_disabled_plugin__: false,\n        async requestDidStart(requestContext) {\n            if (requestDidStartHandler) {\n                return requestDidStartHandler(requestContext);\n            }\n            return {};\n        },\n        async serverWillStart({ logger: serverLogger, apollo, startedInBackground, schema, }) {\n            const logger = options.logger ?? serverLogger;\n            const { key, graphRef } = apollo;\n            if (!(key && graphRef)) {\n                throw new Error(\"You've enabled usage reporting via ApolloServerPluginUsageReporting, \" +\n                    'but you also need to provide your Apollo API key and graph ref, via ' +\n                    'the APOLLO_KEY/APOLLO_GRAPH_REF environment ' +\n                    'variables or via `new ApolloServer({apollo: {key, graphRef})`.');\n            }\n            if ((0, schemaIsSubgraph_js_1.schemaIsSubgraph)(schema)) {\n                if (options.__onlyIfSchemaIsNotSubgraph) {\n                    logger.warn('You have specified an Apollo API key and graph ref but this server appears ' +\n                        'to be a subgraph. Typically usage reports are sent to Apollo by your Router ' +\n                        'or Gateway, not directly from your subgraph; usage reporting is disabled. To ' +\n                        'enable usage reporting anyway, explicitly install `ApolloServerPluginUsageReporting`. ' +\n                        'To disable this warning, install `ApolloServerPluginUsageReportingDisabled`.');\n                    return {};\n                }\n                else {\n                    logger.warn('You have installed `ApolloServerPluginUsageReporting` but this server appears to ' +\n                        'be a subgraph. Typically usage reports are sent to Apollo by your Router ' +\n                        'or Gateway, not directly from your subgraph. If this was unintentional, remove ' +\n                        \"`ApolloServerPluginUsageReporting` from your server's `plugins` array.\");\n                }\n            }\n            logger.info('Apollo usage reporting starting! See your graph at ' +\n                `https://studio.apollographql.com/graph/${encodeURI(graphRef)}/`);\n            const sendReportsImmediately = options.sendReportsImmediately ?? startedInBackground;\n            let operationDerivedDataCache = null;\n            const reportByExecutableSchemaId = new Map();\n            const getReportWhichMustBeUsedImmediately = (executableSchemaId) => {\n                const existing = reportByExecutableSchemaId.get(executableSchemaId);\n                if (existing) {\n                    return existing;\n                }\n                const report = new stats_js_1.OurReport(new usage_reporting_protobuf_1.ReportHeader({\n                    ...reportHeaderDefaults,\n                    executableSchemaId,\n                    graphRef,\n                }));\n                reportByExecutableSchemaId.set(executableSchemaId, report);\n                return report;\n            };\n            const getAndDeleteReport = (executableSchemaId) => {\n                const report = reportByExecutableSchemaId.get(executableSchemaId);\n                if (report) {\n                    reportByExecutableSchemaId.delete(executableSchemaId);\n                    return report;\n                }\n                return null;\n            };\n            const overriddenExecutableSchemaId = options.overrideReportedSchema\n                ? (0, computeCoreSchemaHash_js_1.computeCoreSchemaHash)(options.overrideReportedSchema)\n                : undefined;\n            let lastSeenExecutableSchemaToId;\n            let reportTimer;\n            if (!sendReportsImmediately) {\n                reportTimer = setInterval(() => sendAllReportsAndReportErrors(), options.reportIntervalMs || 10 * 1000);\n            }\n            let sendTraces = options.sendTraces ?? true;\n            const sendOperationAsTrace = options.experimental_sendOperationAsTrace ??\n                (0, defaultSendOperationsAsTrace_js_1.defaultSendOperationsAsTrace)();\n            let stopped = false;\n            function executableSchemaIdForSchema(schema) {\n                if (lastSeenExecutableSchemaToId?.executableSchema === schema) {\n                    return lastSeenExecutableSchemaToId.executableSchemaId;\n                }\n                const id = (0, computeCoreSchemaHash_js_1.computeCoreSchemaHash)((0, graphql_1.printSchema)(schema));\n                lastSeenExecutableSchemaToId = {\n                    executableSchema: schema,\n                    executableSchemaId: id,\n                };\n                return id;\n            }\n            async function sendAllReportsAndReportErrors() {\n                await Promise.all([...reportByExecutableSchemaId.keys()].map((executableSchemaId) => sendReportAndReportErrors(executableSchemaId)));\n            }\n            async function sendReportAndReportErrors(executableSchemaId) {\n                return sendReport(executableSchemaId).catch((err) => {\n                    if (options.reportErrorFunction) {\n                        options.reportErrorFunction(err);\n                    }\n                    else {\n                        logger.error(err.message);\n                    }\n                });\n            }\n            const sendReport = async (executableSchemaId) => {\n                let report = getAndDeleteReport(executableSchemaId);\n                if (!report ||\n                    (Object.keys(report.tracesPerQuery).length === 0 &&\n                        report.operationCount === 0)) {\n                    return;\n                }\n                report.endTime = (0, traceTreeBuilder_js_1.dateToProtoTimestamp)(new Date());\n                report.ensureCountsAreIntegers();\n                const protobufError = usage_reporting_protobuf_1.Report.verify(report);\n                if (protobufError) {\n                    throw new Error(`Error verifying report: ${protobufError}`);\n                }\n                let message = usage_reporting_protobuf_1.Report.encode(report).finish();\n                report = null;\n                if (options.debugPrintReports) {\n                    const decodedReport = usage_reporting_protobuf_1.Report.decode(message);\n                    logger.info(`Apollo usage report: ${JSON.stringify(decodedReport.toJSON())}`);\n                }\n                const compressed = await new Promise((resolve, reject) => {\n                    (0, zlib_1.gzip)(message, (error, result) => {\n                        error ? reject(error) : resolve(result);\n                    });\n                });\n                message = null;\n                const fetcher = options.fetcher ?? node_fetch_1.default;\n                const response = await (0, async_retry_1.default)(async () => {\n                    const controller = new node_abort_controller_1.AbortController();\n                    const abortTimeout = setTimeout(() => {\n                        controller.abort();\n                    }, options.requestTimeoutMs ?? 30000);\n                    let curResponse;\n                    try {\n                        curResponse = await fetcher((options.endpointUrl ||\n                            'https://usage-reporting.api.apollographql.com') +\n                            '/api/ingress/traces', {\n                            method: 'POST',\n                            headers: {\n                                'user-agent': 'ApolloServerPluginUsageReporting',\n                                'x-api-key': key,\n                                'content-encoding': 'gzip',\n                                accept: 'application/json',\n                            },\n                            body: compressed,\n                            signal: controller.signal,\n                        });\n                    }\n                    finally {\n                        clearTimeout(abortTimeout);\n                    }\n                    if (curResponse.status >= 500 && curResponse.status < 600) {\n                        throw new Error(`HTTP status ${curResponse.status}, ${(await curResponse.text()) || '(no body)'}`);\n                    }\n                    else {\n                        return curResponse;\n                    }\n                }, {\n                    retries: (options.maxAttempts || 5) - 1,\n                    minTimeout: options.minimumRetryDelayMs || 100,\n                    factor: 2,\n                }).catch((err) => {\n                    throw new Error(`Error sending report to Apollo servers: ${err.message}`);\n                });\n                if (response.status < 200 || response.status >= 300) {\n                    throw new Error(`Error sending report to Apollo servers: HTTP status ${response.status}, ${(await response.text()) || '(no body)'}`);\n                }\n                if (sendTraces &&\n                    response.status === 200 &&\n                    response.headers\n                        .get('content-type')\n                        ?.match(/^\\s*application\\/json\\s*(?:;|$)/i)) {\n                    const body = await response.text();\n                    let parsedBody;\n                    try {\n                        parsedBody = JSON.parse(body);\n                    }\n                    catch (e) {\n                        throw new Error(`Error parsing response from Apollo servers: ${e}`);\n                    }\n                    if (parsedBody.tracesIgnored === true) {\n                        logger.debug(\"This graph's organization does not have access to traces; sending all \" +\n                            'subsequent operations as stats.');\n                        sendTraces = false;\n                    }\n                }\n                if (options.debugPrintReports) {\n                    logger.info(`Apollo usage report: status ${response.status}`);\n                }\n            };\n            requestDidStartHandler = ({ metrics, schema, request: { http, variables }, }) => {\n                const treeBuilder = new traceTreeBuilder_js_1.TraceTreeBuilder({\n                    maskedBy: 'ApolloServerPluginUsageReporting',\n                    sendErrors: options.sendErrors,\n                });\n                treeBuilder.startTiming();\n                metrics.startHrTime = treeBuilder.startHrTime;\n                let graphqlValidationFailure = false;\n                let graphqlUnknownOperationName = false;\n                let includeOperationInUsageReporting = null;\n                if (http) {\n                    treeBuilder.trace.http = new usage_reporting_protobuf_1.Trace.HTTP({\n                        method: usage_reporting_protobuf_1.Trace.HTTP.Method[http.method] || usage_reporting_protobuf_1.Trace.HTTP.Method.UNKNOWN,\n                    });\n                    if (options.sendHeaders) {\n                        makeHTTPRequestHeaders(treeBuilder.trace.http, http.headers, options.sendHeaders);\n                    }\n                }\n                async function maybeCallIncludeRequestHook(requestContext) {\n                    if (includeOperationInUsageReporting !== null)\n                        return;\n                    if (typeof options.includeRequest !== 'function') {\n                        includeOperationInUsageReporting = true;\n                        return;\n                    }\n                    includeOperationInUsageReporting =\n                        await options.includeRequest(requestContext);\n                    if (typeof includeOperationInUsageReporting !== 'boolean') {\n                        logger.warn(\"The 'includeRequest' async predicate function must return a boolean value.\");\n                        includeOperationInUsageReporting = true;\n                    }\n                }\n                let didResolveSource = false;\n                return {\n                    async didResolveSource(requestContext) {\n                        didResolveSource = true;\n                        if (metrics.persistedQueryHit) {\n                            treeBuilder.trace.persistedQueryHit = true;\n                        }\n                        if (metrics.persistedQueryRegister) {\n                            treeBuilder.trace.persistedQueryRegister = true;\n                        }\n                        if (variables) {\n                            treeBuilder.trace.details = (0, traceDetails_js_1.makeTraceDetails)(variables, options.sendVariableValues, requestContext.source);\n                        }\n                        const clientInfo = (options.generateClientInfo || defaultGenerateClientInfo)(requestContext);\n                        if (clientInfo) {\n                            const { clientName, clientVersion } = clientInfo;\n                            treeBuilder.trace.clientVersion = clientVersion || '';\n                            treeBuilder.trace.clientName = clientName || '';\n                        }\n                    },\n                    async validationDidStart() {\n                        return async (validationErrors) => {\n                            graphqlValidationFailure = validationErrors\n                                ? validationErrors.length !== 0\n                                : false;\n                        };\n                    },\n                    async didResolveOperation(requestContext) {\n                        graphqlUnknownOperationName =\n                            requestContext.operation === undefined;\n                        await maybeCallIncludeRequestHook(requestContext);\n                        if (includeOperationInUsageReporting &&\n                            !graphqlUnknownOperationName) {\n                            if (metrics.captureTraces === undefined) {\n                                const rawWeight = await fieldLevelInstrumentation(requestContext);\n                                treeBuilder.trace.fieldExecutionWeight =\n                                    typeof rawWeight === 'number' ? rawWeight : rawWeight ? 1 : 0;\n                                metrics.captureTraces =\n                                    !!treeBuilder.trace.fieldExecutionWeight;\n                            }\n                        }\n                    },\n                    async executionDidStart() {\n                        if (!metrics.captureTraces)\n                            return;\n                        return {\n                            willResolveField({ info }) {\n                                return treeBuilder.willResolveField(info);\n                            },\n                        };\n                    },\n                    async didEncounterSubsequentErrors(_requestContext, errors) {\n                        treeBuilder.didEncounterErrors(errors);\n                    },\n                    async willSendSubsequentPayload(requestContext, payload) {\n                        if (!payload.hasNext) {\n                            await operationFinished(requestContext);\n                        }\n                    },\n                    async willSendResponse(requestContext) {\n                        if (!didResolveSource)\n                            return;\n                        if (requestContext.errors) {\n                            treeBuilder.didEncounterErrors(requestContext.errors);\n                        }\n                        if (requestContext.response.body.kind === 'single') {\n                            await operationFinished(requestContext);\n                        }\n                    },\n                };\n                async function operationFinished(requestContext) {\n                    const resolvedOperation = !!requestContext.operation;\n                    await maybeCallIncludeRequestHook(requestContext);\n                    treeBuilder.stopTiming();\n                    const executableSchemaId = overriddenExecutableSchemaId ?? executableSchemaIdForSchema(schema);\n                    if (includeOperationInUsageReporting === false) {\n                        if (resolvedOperation) {\n                            getReportWhichMustBeUsedImmediately(executableSchemaId)\n                                .operationCount++;\n                        }\n                        return;\n                    }\n                    treeBuilder.trace.fullQueryCacheHit = !!metrics.responseCacheHit;\n                    treeBuilder.trace.forbiddenOperation = !!metrics.forbiddenOperation;\n                    treeBuilder.trace.registeredOperation = !!metrics.registeredOperation;\n                    const policyIfCacheable = requestContext.overallCachePolicy.policyIfCacheable();\n                    if (policyIfCacheable) {\n                        treeBuilder.trace.cachePolicy = new usage_reporting_protobuf_1.Trace.CachePolicy({\n                            scope: policyIfCacheable.scope === 'PRIVATE'\n                                ? usage_reporting_protobuf_1.Trace.CachePolicy.Scope.PRIVATE\n                                : policyIfCacheable.scope === 'PUBLIC'\n                                    ? usage_reporting_protobuf_1.Trace.CachePolicy.Scope.PUBLIC\n                                    : usage_reporting_protobuf_1.Trace.CachePolicy.Scope.UNKNOWN,\n                            maxAgeNs: policyIfCacheable.maxAge * 1e9,\n                        });\n                    }\n                    if (metrics.queryPlanTrace) {\n                        treeBuilder.trace.queryPlan = metrics.queryPlanTrace;\n                    }\n                    addTrace().catch(logger.error);\n                    async function addTrace() {\n                        if (stopped) {\n                            return;\n                        }\n                        await new Promise((res) => setImmediate(res));\n                        const executableSchemaId = overriddenExecutableSchemaId ??\n                            executableSchemaIdForSchema(schema);\n                        const { trace } = treeBuilder;\n                        let statsReportKey = undefined;\n                        let referencedFieldsByType;\n                        if (!requestContext.document) {\n                            statsReportKey = `## GraphQLParseFailure\\n`;\n                        }\n                        else if (graphqlValidationFailure) {\n                            statsReportKey = `## GraphQLValidationFailure\\n`;\n                        }\n                        else if (graphqlUnknownOperationName) {\n                            statsReportKey = `## GraphQLUnknownOperationName\\n`;\n                        }\n                        const isExecutable = statsReportKey === undefined;\n                        if (statsReportKey) {\n                            if (options.sendUnexecutableOperationDocuments) {\n                                trace.unexecutedOperationBody = requestContext.source;\n                                trace.unexecutedOperationName =\n                                    requestContext.request.operationName || '';\n                            }\n                            referencedFieldsByType = Object.create(null);\n                        }\n                        else {\n                            const operationDerivedData = getOperationDerivedData();\n                            statsReportKey = `# ${requestContext.operationName || '-'}\\n${operationDerivedData.signature}`;\n                            referencedFieldsByType =\n                                operationDerivedData.referencedFieldsByType;\n                        }\n                        const protobufError = usage_reporting_protobuf_1.Trace.verify(trace);\n                        if (protobufError) {\n                            throw new Error(`Error encoding trace: ${protobufError}`);\n                        }\n                        if (resolvedOperation) {\n                            getReportWhichMustBeUsedImmediately(executableSchemaId)\n                                .operationCount++;\n                        }\n                        getReportWhichMustBeUsedImmediately(executableSchemaId).addTrace({\n                            statsReportKey,\n                            trace,\n                            asTrace: sendTraces &&\n                                (!isExecutable || !!metrics.captureTraces) &&\n                                !metrics.nonFtv1ErrorPaths?.length &&\n                                sendOperationAsTrace(trace, statsReportKey),\n                            referencedFieldsByType,\n                            nonFtv1ErrorPaths: metrics.nonFtv1ErrorPaths ?? [],\n                        });\n                        if (sendReportsImmediately ||\n                            getReportWhichMustBeUsedImmediately(executableSchemaId)\n                                .sizeEstimator.bytes >=\n                                (options.maxUncompressedReportSize || 4 * 1024 * 1024)) {\n                            await sendReportAndReportErrors(executableSchemaId);\n                        }\n                    }\n                    function getOperationDerivedData() {\n                        if (!requestContext.document) {\n                            throw new Error('No document?');\n                        }\n                        const cacheKey = (0, operationDerivedDataCache_js_1.operationDerivedDataCacheKey)(requestContext.queryHash, requestContext.operationName || '');\n                        if (!operationDerivedDataCache ||\n                            operationDerivedDataCache.forSchema !== schema) {\n                            operationDerivedDataCache = {\n                                forSchema: schema,\n                                cache: (0, operationDerivedDataCache_js_1.createOperationDerivedDataCache)({ logger }),\n                            };\n                        }\n                        const cachedOperationDerivedData = operationDerivedDataCache.cache.get(cacheKey);\n                        if (cachedOperationDerivedData) {\n                            return cachedOperationDerivedData;\n                        }\n                        const generatedSignature = (options.calculateSignature || utils_usagereporting_1.usageReportingSignature)(requestContext.document, requestContext.operationName || '');\n                        const generatedOperationDerivedData = {\n                            signature: generatedSignature,\n                            referencedFieldsByType: (0, utils_usagereporting_1.calculateReferencedFieldsByType)({\n                                document: requestContext.document,\n                                schema,\n                                resolvedOperationName: requestContext.operationName ?? null,\n                            }),\n                        };\n                        operationDerivedDataCache.cache.set(cacheKey, generatedOperationDerivedData);\n                        return generatedOperationDerivedData;\n                    }\n                }\n            };\n            return {\n                async serverWillStop() {\n                    if (reportTimer) {\n                        clearInterval(reportTimer);\n                        reportTimer = undefined;\n                    }\n                    stopped = true;\n                    await sendAllReportsAndReportErrors();\n                },\n            };\n        },\n    });\n}\nexports.ApolloServerPluginUsageReporting = ApolloServerPluginUsageReporting;\nfunction makeHTTPRequestHeaders(http, headers, sendHeaders) {\n    if (!sendHeaders ||\n        ('none' in sendHeaders && sendHeaders.none) ||\n        ('all' in sendHeaders && !sendHeaders.all)) {\n        return;\n    }\n    for (const [key, value] of headers) {\n        if (('exceptNames' in sendHeaders &&\n            sendHeaders.exceptNames.some((exceptHeader) => {\n                return exceptHeader.toLowerCase() === key;\n            })) ||\n            ('onlyNames' in sendHeaders &&\n                !sendHeaders.onlyNames.some((header) => {\n                    return header.toLowerCase() === key;\n                }))) {\n            continue;\n        }\n        switch (key) {\n            case 'authorization':\n            case 'cookie':\n            case 'set-cookie':\n                break;\n            default:\n                http.requestHeaders[key] = new usage_reporting_protobuf_1.Trace.HTTP.Values({\n                    value: [value],\n                });\n        }\n    }\n}\nexports.makeHTTPRequestHeaders = makeHTTPRequestHeaders;\nfunction defaultGenerateClientInfo({ request, }) {\n    const clientNameHeaderKey = 'apollographql-client-name';\n    const clientVersionHeaderKey = 'apollographql-client-version';\n    if (request.http?.headers?.get(clientNameHeaderKey) ||\n        request.http?.headers?.get(clientVersionHeaderKey)) {\n        return {\n            clientName: request.http?.headers?.get(clientNameHeaderKey),\n            clientVersion: request.http?.headers?.get(clientVersionHeaderKey),\n        };\n    }\n    else if (request.extensions?.clientInfo) {\n        return request.extensions.clientInfo;\n    }\n    else {\n        return {};\n    }\n}\n//# sourceMappingURL=plugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3BsdWdpbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDhCQUE4QixHQUFHLHdDQUF3QztBQUN6RSxtQ0FBbUMsbUJBQU8sQ0FBQyx5SEFBa0M7QUFDN0UsK0JBQStCLG1CQUFPLENBQUMscUdBQThCO0FBQ3JFLHNDQUFzQyxtQkFBTyxDQUFDLGtFQUFhO0FBQzNELGtCQUFrQixtQkFBTyxDQUFDLHVEQUFTO0FBQ25DLGdDQUFnQyxtQkFBTyxDQUFDLGtGQUF1QjtBQUMvRCxxQ0FBcUMsbUJBQU8sQ0FBQyxpRUFBWTtBQUN6RCw2QkFBNkIsbUJBQU8sQ0FBQyxjQUFJO0FBQ3pDLGVBQWUsbUJBQU8sQ0FBQyxrQkFBTTtBQUM3Qiw0QkFBNEIsbUJBQU8sQ0FBQywrRkFBeUI7QUFDN0QsOEJBQThCLG1CQUFPLENBQUMsdUdBQXdCO0FBQzlELDBDQUEwQyxtQkFBTyxDQUFDLDZJQUFtQztBQUNyRix1Q0FBdUMsbUJBQU8sQ0FBQyx1SUFBZ0M7QUFDL0UsbUJBQW1CLG1CQUFPLENBQUMsK0ZBQVk7QUFDdkMsMEJBQTBCLG1CQUFPLENBQUMsNkdBQW1CO0FBQ3JELDRCQUE0QixtQkFBTyxDQUFDLG1IQUFtQztBQUN2RSxtQ0FBbUMsbUJBQU8sQ0FBQyx5SEFBc0M7QUFDakYsOEJBQThCLG1CQUFPLENBQUMsdUdBQXdCO0FBQzlEO0FBQ0E7QUFDQSxvQ0FBb0MsbUNBQW1DO0FBQ3ZFLDRCQUE0QixnQkFBZ0I7QUFDNUMsY0FBYyx3QkFBd0IsSUFBSSxvQkFBb0IsSUFBSSx1QkFBdUIsSUFBSSxvQkFBb0I7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIscUNBQXFDLFVBQVU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3BsdWdpbi5qcz8zNDgyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tYWtlSFRUUFJlcXVlc3RIZWFkZXJzID0gZXhwb3J0cy5BcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZyA9IHZvaWQgMDtcbmNvbnN0IHVzYWdlX3JlcG9ydGluZ19wcm90b2J1Zl8xID0gcmVxdWlyZShcIkBhcG9sbG8vdXNhZ2UtcmVwb3J0aW5nLXByb3RvYnVmXCIpO1xuY29uc3QgdXRpbHNfdXNhZ2VyZXBvcnRpbmdfMSA9IHJlcXVpcmUoXCJAYXBvbGxvL3V0aWxzLnVzYWdlcmVwb3J0aW5nXCIpO1xuY29uc3QgYXN5bmNfcmV0cnlfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiYXN5bmMtcmV0cnlcIikpO1xuY29uc3QgZ3JhcGhxbF8xID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5jb25zdCBub2RlX2Fib3J0X2NvbnRyb2xsZXJfMSA9IHJlcXVpcmUoXCJub2RlLWFib3J0LWNvbnRyb2xsZXJcIik7XG5jb25zdCBub2RlX2ZldGNoXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm5vZGUtZmV0Y2hcIikpO1xuY29uc3Qgb3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwib3NcIikpO1xuY29uc3QgemxpYl8xID0gcmVxdWlyZShcInpsaWJcIik7XG5jb25zdCBpbnRlcm5hbFBsdWdpbl9qc18xID0gcmVxdWlyZShcIi4uLy4uL2ludGVybmFsUGx1Z2luLmpzXCIpO1xuY29uc3QgdHJhY2VUcmVlQnVpbGRlcl9qc18xID0gcmVxdWlyZShcIi4uL3RyYWNlVHJlZUJ1aWxkZXIuanNcIik7XG5jb25zdCBkZWZhdWx0U2VuZE9wZXJhdGlvbnNBc1RyYWNlX2pzXzEgPSByZXF1aXJlKFwiLi9kZWZhdWx0U2VuZE9wZXJhdGlvbnNBc1RyYWNlLmpzXCIpO1xuY29uc3Qgb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZV9qc18xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZS5qc1wiKTtcbmNvbnN0IHN0YXRzX2pzXzEgPSByZXF1aXJlKFwiLi9zdGF0cy5qc1wiKTtcbmNvbnN0IHRyYWNlRGV0YWlsc19qc18xID0gcmVxdWlyZShcIi4vdHJhY2VEZXRhaWxzLmpzXCIpO1xuY29uc3QgcGFja2FnZVZlcnNpb25fanNfMSA9IHJlcXVpcmUoXCIuLi8uLi9nZW5lcmF0ZWQvcGFja2FnZVZlcnNpb24uanNcIik7XG5jb25zdCBjb21wdXRlQ29yZVNjaGVtYUhhc2hfanNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9jb21wdXRlQ29yZVNjaGVtYUhhc2guanNcIik7XG5jb25zdCBzY2hlbWFJc1N1YmdyYXBoX2pzXzEgPSByZXF1aXJlKFwiLi4vc2NoZW1hSXNTdWJncmFwaC5qc1wiKTtcbmNvbnN0IHJlcG9ydEhlYWRlckRlZmF1bHRzID0ge1xuICAgIGhvc3RuYW1lOiBvc18xLmRlZmF1bHQuaG9zdG5hbWUoKSxcbiAgICBhZ2VudFZlcnNpb246IGBAYXBvbGxvL3NlcnZlckAke3BhY2thZ2VWZXJzaW9uX2pzXzEucGFja2FnZVZlcnNpb259YCxcbiAgICBydW50aW1lVmVyc2lvbjogYG5vZGUgJHtwcm9jZXNzLnZlcnNpb259YCxcbiAgICB1bmFtZTogYCR7b3NfMS5kZWZhdWx0LnBsYXRmb3JtKCl9LCAke29zXzEuZGVmYXVsdC50eXBlKCl9LCAke29zXzEuZGVmYXVsdC5yZWxlYXNlKCl9LCAke29zXzEuZGVmYXVsdC5hcmNoKCl9KWAsXG59O1xuZnVuY3Rpb24gQXBvbGxvU2VydmVyUGx1Z2luVXNhZ2VSZXBvcnRpbmcob3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCkpIHtcbiAgICBjb25zdCBmaWVsZExldmVsSW5zdHJ1bWVudGF0aW9uT3B0aW9uID0gb3B0aW9ucy5maWVsZExldmVsSW5zdHJ1bWVudGF0aW9uO1xuICAgIGNvbnN0IGZpZWxkTGV2ZWxJbnN0cnVtZW50YXRpb24gPSB0eXBlb2YgZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbk9wdGlvbiA9PT0gJ251bWJlcidcbiAgICAgICAgPyBhc3luYyAoKSA9PiBNYXRoLnJhbmRvbSgpIDwgZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbk9wdGlvblxuICAgICAgICAgICAgPyAxIC8gZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbk9wdGlvblxuICAgICAgICAgICAgOiAwXG4gICAgICAgIDogZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbk9wdGlvblxuICAgICAgICAgICAgPyBmaWVsZExldmVsSW5zdHJ1bWVudGF0aW9uT3B0aW9uXG4gICAgICAgICAgICA6IGFzeW5jICgpID0+IHRydWU7XG4gICAgbGV0IHJlcXVlc3REaWRTdGFydEhhbmRsZXIgPSBudWxsO1xuICAgIHJldHVybiAoMCwgaW50ZXJuYWxQbHVnaW5fanNfMS5pbnRlcm5hbFBsdWdpbikoe1xuICAgICAgICBfX2ludGVybmFsX3BsdWdpbl9pZF9fOiAnVXNhZ2VSZXBvcnRpbmcnLFxuICAgICAgICBfX2lzX2Rpc2FibGVkX3BsdWdpbl9fOiBmYWxzZSxcbiAgICAgICAgYXN5bmMgcmVxdWVzdERpZFN0YXJ0KHJlcXVlc3RDb250ZXh0KSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdERpZFN0YXJ0SGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RGlkU3RhcnRIYW5kbGVyKHJlcXVlc3RDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgc2VydmVyV2lsbFN0YXJ0KHsgbG9nZ2VyOiBzZXJ2ZXJMb2dnZXIsIGFwb2xsbywgc3RhcnRlZEluQmFja2dyb3VuZCwgc2NoZW1hLCB9KSB7XG4gICAgICAgICAgICBjb25zdCBsb2dnZXIgPSBvcHRpb25zLmxvZ2dlciA/PyBzZXJ2ZXJMb2dnZXI7XG4gICAgICAgICAgICBjb25zdCB7IGtleSwgZ3JhcGhSZWYgfSA9IGFwb2xsbztcbiAgICAgICAgICAgIGlmICghKGtleSAmJiBncmFwaFJlZikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UndmUgZW5hYmxlZCB1c2FnZSByZXBvcnRpbmcgdmlhIEFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nLCBcIiArXG4gICAgICAgICAgICAgICAgICAgICdidXQgeW91IGFsc28gbmVlZCB0byBwcm92aWRlIHlvdXIgQXBvbGxvIEFQSSBrZXkgYW5kIGdyYXBoIHJlZiwgdmlhICcgK1xuICAgICAgICAgICAgICAgICAgICAndGhlIEFQT0xMT19LRVkvQVBPTExPX0dSQVBIX1JFRiBlbnZpcm9ubWVudCAnICtcbiAgICAgICAgICAgICAgICAgICAgJ3ZhcmlhYmxlcyBvciB2aWEgYG5ldyBBcG9sbG9TZXJ2ZXIoe2Fwb2xsbzoge2tleSwgZ3JhcGhSZWZ9KWAuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKDAsIHNjaGVtYUlzU3ViZ3JhcGhfanNfMS5zY2hlbWFJc1N1YmdyYXBoKShzY2hlbWEpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuX19vbmx5SWZTY2hlbWFJc05vdFN1YmdyYXBoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdZb3UgaGF2ZSBzcGVjaWZpZWQgYW4gQXBvbGxvIEFQSSBrZXkgYW5kIGdyYXBoIHJlZiBidXQgdGhpcyBzZXJ2ZXIgYXBwZWFycyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICd0byBiZSBhIHN1YmdyYXBoLiBUeXBpY2FsbHkgdXNhZ2UgcmVwb3J0cyBhcmUgc2VudCB0byBBcG9sbG8gYnkgeW91ciBSb3V0ZXIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3IgR2F0ZXdheSwgbm90IGRpcmVjdGx5IGZyb20geW91ciBzdWJncmFwaDsgdXNhZ2UgcmVwb3J0aW5nIGlzIGRpc2FibGVkLiBUbyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdlbmFibGUgdXNhZ2UgcmVwb3J0aW5nIGFueXdheSwgZXhwbGljaXRseSBpbnN0YWxsIGBBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZ2AuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1RvIGRpc2FibGUgdGhpcyB3YXJuaW5nLCBpbnN0YWxsIGBBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZ0Rpc2FibGVkYC4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1lvdSBoYXZlIGluc3RhbGxlZCBgQXBvbGxvU2VydmVyUGx1Z2luVXNhZ2VSZXBvcnRpbmdgIGJ1dCB0aGlzIHNlcnZlciBhcHBlYXJzIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2JlIGEgc3ViZ3JhcGguIFR5cGljYWxseSB1c2FnZSByZXBvcnRzIGFyZSBzZW50IHRvIEFwb2xsbyBieSB5b3VyIFJvdXRlciAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvciBHYXRld2F5LCBub3QgZGlyZWN0bHkgZnJvbSB5b3VyIHN1YmdyYXBoLiBJZiB0aGlzIHdhcyB1bmludGVudGlvbmFsLCByZW1vdmUgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBcImBBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZ2AgZnJvbSB5b3VyIHNlcnZlcidzIGBwbHVnaW5zYCBhcnJheS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0Fwb2xsbyB1c2FnZSByZXBvcnRpbmcgc3RhcnRpbmchIFNlZSB5b3VyIGdyYXBoIGF0ICcgK1xuICAgICAgICAgICAgICAgIGBodHRwczovL3N0dWRpby5hcG9sbG9ncmFwaHFsLmNvbS9ncmFwaC8ke2VuY29kZVVSSShncmFwaFJlZil9L2ApO1xuICAgICAgICAgICAgY29uc3Qgc2VuZFJlcG9ydHNJbW1lZGlhdGVseSA9IG9wdGlvbnMuc2VuZFJlcG9ydHNJbW1lZGlhdGVseSA/PyBzdGFydGVkSW5CYWNrZ3JvdW5kO1xuICAgICAgICAgICAgbGV0IG9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUgPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgcmVwb3J0QnlFeGVjdXRhYmxlU2NoZW1hSWQgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBjb25zdCBnZXRSZXBvcnRXaGljaE11c3RCZVVzZWRJbW1lZGlhdGVseSA9IChleGVjdXRhYmxlU2NoZW1hSWQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHJlcG9ydEJ5RXhlY3V0YWJsZVNjaGVtYUlkLmdldChleGVjdXRhYmxlU2NoZW1hSWQpO1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcG9ydCA9IG5ldyBzdGF0c19qc18xLk91clJlcG9ydChuZXcgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuUmVwb3J0SGVhZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVwb3J0SGVhZGVyRGVmYXVsdHMsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGFibGVTY2hlbWFJZCxcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGhSZWYsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJlcG9ydEJ5RXhlY3V0YWJsZVNjaGVtYUlkLnNldChleGVjdXRhYmxlU2NoZW1hSWQsIHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBnZXRBbmREZWxldGVSZXBvcnQgPSAoZXhlY3V0YWJsZVNjaGVtYUlkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwb3J0ID0gcmVwb3J0QnlFeGVjdXRhYmxlU2NoZW1hSWQuZ2V0KGV4ZWN1dGFibGVTY2hlbWFJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRCeUV4ZWN1dGFibGVTY2hlbWFJZC5kZWxldGUoZXhlY3V0YWJsZVNjaGVtYUlkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgb3ZlcnJpZGRlbkV4ZWN1dGFibGVTY2hlbWFJZCA9IG9wdGlvbnMub3ZlcnJpZGVSZXBvcnRlZFNjaGVtYVxuICAgICAgICAgICAgICAgID8gKDAsIGNvbXB1dGVDb3JlU2NoZW1hSGFzaF9qc18xLmNvbXB1dGVDb3JlU2NoZW1hSGFzaCkob3B0aW9ucy5vdmVycmlkZVJlcG9ydGVkU2NoZW1hKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgbGV0IGxhc3RTZWVuRXhlY3V0YWJsZVNjaGVtYVRvSWQ7XG4gICAgICAgICAgICBsZXQgcmVwb3J0VGltZXI7XG4gICAgICAgICAgICBpZiAoIXNlbmRSZXBvcnRzSW1tZWRpYXRlbHkpIHtcbiAgICAgICAgICAgICAgICByZXBvcnRUaW1lciA9IHNldEludGVydmFsKCgpID0+IHNlbmRBbGxSZXBvcnRzQW5kUmVwb3J0RXJyb3JzKCksIG9wdGlvbnMucmVwb3J0SW50ZXJ2YWxNcyB8fCAxMCAqIDEwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNlbmRUcmFjZXMgPSBvcHRpb25zLnNlbmRUcmFjZXMgPz8gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHNlbmRPcGVyYXRpb25Bc1RyYWNlID0gb3B0aW9ucy5leHBlcmltZW50YWxfc2VuZE9wZXJhdGlvbkFzVHJhY2UgPz9cbiAgICAgICAgICAgICAgICAoMCwgZGVmYXVsdFNlbmRPcGVyYXRpb25zQXNUcmFjZV9qc18xLmRlZmF1bHRTZW5kT3BlcmF0aW9uc0FzVHJhY2UpKCk7XG4gICAgICAgICAgICBsZXQgc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZnVuY3Rpb24gZXhlY3V0YWJsZVNjaGVtYUlkRm9yU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0U2VlbkV4ZWN1dGFibGVTY2hlbWFUb0lkPy5leGVjdXRhYmxlU2NoZW1hID09PSBzY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RTZWVuRXhlY3V0YWJsZVNjaGVtYVRvSWQuZXhlY3V0YWJsZVNjaGVtYUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9ICgwLCBjb21wdXRlQ29yZVNjaGVtYUhhc2hfanNfMS5jb21wdXRlQ29yZVNjaGVtYUhhc2gpKCgwLCBncmFwaHFsXzEucHJpbnRTY2hlbWEpKHNjaGVtYSkpO1xuICAgICAgICAgICAgICAgIGxhc3RTZWVuRXhlY3V0YWJsZVNjaGVtYVRvSWQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGFibGVTY2hlbWE6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0YWJsZVNjaGVtYUlkOiBpZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNlbmRBbGxSZXBvcnRzQW5kUmVwb3J0RXJyb3JzKCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi5yZXBvcnRCeUV4ZWN1dGFibGVTY2hlbWFJZC5rZXlzKCldLm1hcCgoZXhlY3V0YWJsZVNjaGVtYUlkKSA9PiBzZW5kUmVwb3J0QW5kUmVwb3J0RXJyb3JzKGV4ZWN1dGFibGVTY2hlbWFJZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNlbmRSZXBvcnRBbmRSZXBvcnRFcnJvcnMoZXhlY3V0YWJsZVNjaGVtYUlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZXBvcnQoZXhlY3V0YWJsZVNjaGVtYUlkKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlcG9ydEVycm9yRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVwb3J0RXJyb3JGdW5jdGlvbihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2VuZFJlcG9ydCA9IGFzeW5jIChleGVjdXRhYmxlU2NoZW1hSWQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcmVwb3J0ID0gZ2V0QW5kRGVsZXRlUmVwb3J0KGV4ZWN1dGFibGVTY2hlbWFJZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXBvcnQgfHxcbiAgICAgICAgICAgICAgICAgICAgKE9iamVjdC5rZXlzKHJlcG9ydC50cmFjZXNQZXJRdWVyeSkubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBvcnQub3BlcmF0aW9uQ291bnQgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVwb3J0LmVuZFRpbWUgPSAoMCwgdHJhY2VUcmVlQnVpbGRlcl9qc18xLmRhdGVUb1Byb3RvVGltZXN0YW1wKShuZXcgRGF0ZSgpKTtcbiAgICAgICAgICAgICAgICByZXBvcnQuZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm90b2J1ZkVycm9yID0gdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuUmVwb3J0LnZlcmlmeShyZXBvcnQpO1xuICAgICAgICAgICAgICAgIGlmIChwcm90b2J1ZkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdmVyaWZ5aW5nIHJlcG9ydDogJHtwcm90b2J1ZkVycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHVzYWdlX3JlcG9ydGluZ19wcm90b2J1Zl8xLlJlcG9ydC5lbmNvZGUocmVwb3J0KS5maW5pc2goKTtcbiAgICAgICAgICAgICAgICByZXBvcnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlYnVnUHJpbnRSZXBvcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWRSZXBvcnQgPSB1c2FnZV9yZXBvcnRpbmdfcHJvdG9idWZfMS5SZXBvcnQuZGVjb2RlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgQXBvbGxvIHVzYWdlIHJlcG9ydDogJHtKU09OLnN0cmluZ2lmeShkZWNvZGVkUmVwb3J0LnRvSlNPTigpKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcHJlc3NlZCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIHpsaWJfMS5nemlwKShtZXNzYWdlLCAoZXJyb3IsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPyByZWplY3QoZXJyb3IpIDogcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjb25zdCBmZXRjaGVyID0gb3B0aW9ucy5mZXRjaGVyID8/IG5vZGVfZmV0Y2hfMS5kZWZhdWx0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIGFzeW5jX3JldHJ5XzEuZGVmYXVsdCkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IG5vZGVfYWJvcnRfY29udHJvbGxlcl8xLkFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhYm9ydFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucy5yZXF1ZXN0VGltZW91dE1zID8/IDMwMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUmVzcG9uc2UgPSBhd2FpdCBmZXRjaGVyKChvcHRpb25zLmVuZHBvaW50VXJsIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vdXNhZ2UtcmVwb3J0aW5nLmFwaS5hcG9sbG9ncmFwaHFsLmNvbScpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnL2FwaS9pbmdyZXNzL3RyYWNlcycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1c2VyLWFnZW50JzogJ0Fwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3gtYXBpLWtleSc6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtZW5jb2RpbmcnOiAnZ3ppcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogY29tcHJlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWJvcnRUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyUmVzcG9uc2Uuc3RhdHVzID49IDUwMCAmJiBjdXJSZXNwb25zZS5zdGF0dXMgPCA2MDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBzdGF0dXMgJHtjdXJSZXNwb25zZS5zdGF0dXN9LCAkeyhhd2FpdCBjdXJSZXNwb25zZS50ZXh0KCkpIHx8ICcobm8gYm9keSknfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1clJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICByZXRyaWVzOiAob3B0aW9ucy5tYXhBdHRlbXB0cyB8fCA1KSAtIDEsXG4gICAgICAgICAgICAgICAgICAgIG1pblRpbWVvdXQ6IG9wdGlvbnMubWluaW11bVJldHJ5RGVsYXlNcyB8fCAxMDAsXG4gICAgICAgICAgICAgICAgICAgIGZhY3RvcjogMixcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3Igc2VuZGluZyByZXBvcnQgdG8gQXBvbGxvIHNlcnZlcnM6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA8IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPj0gMzAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3Igc2VuZGluZyByZXBvcnQgdG8gQXBvbGxvIHNlcnZlcnM6IEhUVFAgc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfSwgJHsoYXdhaXQgcmVzcG9uc2UudGV4dCgpKSB8fCAnKG5vIGJvZHkpJ31gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRUcmFjZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgLmdldCgnY29udGVudC10eXBlJylcbiAgICAgICAgICAgICAgICAgICAgICAgID8ubWF0Y2goL15cXHMqYXBwbGljYXRpb25cXC9qc29uXFxzKig/Ojt8JCkvaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZEJvZHk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRCb2R5ID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBwYXJzaW5nIHJlc3BvbnNlIGZyb20gQXBvbGxvIHNlcnZlcnM6ICR7ZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkQm9keS50cmFjZXNJZ25vcmVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJUaGlzIGdyYXBoJ3Mgb3JnYW5pemF0aW9uIGRvZXMgbm90IGhhdmUgYWNjZXNzIHRvIHRyYWNlczsgc2VuZGluZyBhbGwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdWJzZXF1ZW50IG9wZXJhdGlvbnMgYXMgc3RhdHMuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kVHJhY2VzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVidWdQcmludFJlcG9ydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oYEFwb2xsbyB1c2FnZSByZXBvcnQ6IHN0YXR1cyAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdERpZFN0YXJ0SGFuZGxlciA9ICh7IG1ldHJpY3MsIHNjaGVtYSwgcmVxdWVzdDogeyBodHRwLCB2YXJpYWJsZXMgfSwgfSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVCdWlsZGVyID0gbmV3IHRyYWNlVHJlZUJ1aWxkZXJfanNfMS5UcmFjZVRyZWVCdWlsZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgbWFza2VkQnk6ICdBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZycsXG4gICAgICAgICAgICAgICAgICAgIHNlbmRFcnJvcnM6IG9wdGlvbnMuc2VuZEVycm9ycyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci5zdGFydFRpbWluZygpO1xuICAgICAgICAgICAgICAgIG1ldHJpY3Muc3RhcnRIclRpbWUgPSB0cmVlQnVpbGRlci5zdGFydEhyVGltZTtcbiAgICAgICAgICAgICAgICBsZXQgZ3JhcGhxbFZhbGlkYXRpb25GYWlsdXJlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGV0IGdyYXBocWxVbmtub3duT3BlcmF0aW9uTmFtZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxldCBpbmNsdWRlT3BlcmF0aW9uSW5Vc2FnZVJlcG9ydGluZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGh0dHApIHtcbiAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIudHJhY2UuaHR0cCA9IG5ldyB1c2FnZV9yZXBvcnRpbmdfcHJvdG9idWZfMS5UcmFjZS5IVFRQKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuSFRUUC5NZXRob2RbaHR0cC5tZXRob2RdIHx8IHVzYWdlX3JlcG9ydGluZ19wcm90b2J1Zl8xLlRyYWNlLkhUVFAuTWV0aG9kLlVOS05PV04sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZW5kSGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUhUVFBSZXF1ZXN0SGVhZGVycyh0cmVlQnVpbGRlci50cmFjZS5odHRwLCBodHRwLmhlYWRlcnMsIG9wdGlvbnMuc2VuZEhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIG1heWJlQ2FsbEluY2x1ZGVSZXF1ZXN0SG9vayhyZXF1ZXN0Q29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZU9wZXJhdGlvbkluVXNhZ2VSZXBvcnRpbmcgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5pbmNsdWRlUmVxdWVzdCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZU9wZXJhdGlvbkluVXNhZ2VSZXBvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluY2x1ZGVPcGVyYXRpb25JblVzYWdlUmVwb3J0aW5nID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG9wdGlvbnMuaW5jbHVkZVJlcXVlc3QocmVxdWVzdENvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluY2x1ZGVPcGVyYXRpb25JblVzYWdlUmVwb3J0aW5nICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwiVGhlICdpbmNsdWRlUmVxdWVzdCcgYXN5bmMgcHJlZGljYXRlIGZ1bmN0aW9uIG11c3QgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlT3BlcmF0aW9uSW5Vc2FnZVJlcG9ydGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGRpZFJlc29sdmVTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBhc3luYyBkaWRSZXNvbHZlU291cmNlKHJlcXVlc3RDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWRSZXNvbHZlU291cmNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRyaWNzLnBlcnNpc3RlZFF1ZXJ5SGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIudHJhY2UucGVyc2lzdGVkUXVlcnlIaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldHJpY3MucGVyc2lzdGVkUXVlcnlSZWdpc3Rlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhcmlhYmxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLmRldGFpbHMgPSAoMCwgdHJhY2VEZXRhaWxzX2pzXzEubWFrZVRyYWNlRGV0YWlscykodmFyaWFibGVzLCBvcHRpb25zLnNlbmRWYXJpYWJsZVZhbHVlcywgcmVxdWVzdENvbnRleHQuc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudEluZm8gPSAob3B0aW9ucy5nZW5lcmF0ZUNsaWVudEluZm8gfHwgZGVmYXVsdEdlbmVyYXRlQ2xpZW50SW5mbykocmVxdWVzdENvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNsaWVudE5hbWUsIGNsaWVudFZlcnNpb24gfSA9IGNsaWVudEluZm87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIudHJhY2UuY2xpZW50VmVyc2lvbiA9IGNsaWVudFZlcnNpb24gfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIudHJhY2UuY2xpZW50TmFtZSA9IGNsaWVudE5hbWUgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIHZhbGlkYXRpb25EaWRTdGFydCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhc3luYyAodmFsaWRhdGlvbkVycm9ycykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBocWxWYWxpZGF0aW9uRmFpbHVyZSA9IHZhbGlkYXRpb25FcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCAhPT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgZGlkUmVzb2x2ZU9wZXJhdGlvbihyZXF1ZXN0Q29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGhxbFVua25vd25PcGVyYXRpb25OYW1lID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Q29udGV4dC5vcGVyYXRpb24gPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG1heWJlQ2FsbEluY2x1ZGVSZXF1ZXN0SG9vayhyZXF1ZXN0Q29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZU9wZXJhdGlvbkluVXNhZ2VSZXBvcnRpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZ3JhcGhxbFVua25vd25PcGVyYXRpb25OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldHJpY3MuY2FwdHVyZVRyYWNlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd1dlaWdodCA9IGF3YWl0IGZpZWxkTGV2ZWxJbnN0cnVtZW50YXRpb24ocmVxdWVzdENvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5maWVsZEV4ZWN1dGlvbldlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcmF3V2VpZ2h0ID09PSAnbnVtYmVyJyA/IHJhd1dlaWdodCA6IHJhd1dlaWdodCA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRyaWNzLmNhcHR1cmVUcmFjZXMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISF0cmVlQnVpbGRlci50cmFjZS5maWVsZEV4ZWN1dGlvbldlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIGV4ZWN1dGlvbkRpZFN0YXJ0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXRyaWNzLmNhcHR1cmVUcmFjZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsUmVzb2x2ZUZpZWxkKHsgaW5mbyB9KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmVlQnVpbGRlci53aWxsUmVzb2x2ZUZpZWxkKGluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhc3luYyBkaWRFbmNvdW50ZXJTdWJzZXF1ZW50RXJyb3JzKF9yZXF1ZXN0Q29udGV4dCwgZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci5kaWRFbmNvdW50ZXJFcnJvcnMoZXJyb3JzKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2lsbFNlbmRTdWJzZXF1ZW50UGF5bG9hZChyZXF1ZXN0Q29udGV4dCwgcGF5bG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXlsb2FkLmhhc05leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBvcGVyYXRpb25GaW5pc2hlZChyZXF1ZXN0Q29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIHdpbGxTZW5kUmVzcG9uc2UocmVxdWVzdENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGlkUmVzb2x2ZVNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdENvbnRleHQuZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIuZGlkRW5jb3VudGVyRXJyb3JzKHJlcXVlc3RDb250ZXh0LmVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdENvbnRleHQucmVzcG9uc2UuYm9keS5raW5kID09PSAnc2luZ2xlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG9wZXJhdGlvbkZpbmlzaGVkKHJlcXVlc3RDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIG9wZXJhdGlvbkZpbmlzaGVkKHJlcXVlc3RDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkT3BlcmF0aW9uID0gISFyZXF1ZXN0Q29udGV4dC5vcGVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1heWJlQ2FsbEluY2x1ZGVSZXF1ZXN0SG9vayhyZXF1ZXN0Q29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnN0b3BUaW1pbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhlY3V0YWJsZVNjaGVtYUlkID0gb3ZlcnJpZGRlbkV4ZWN1dGFibGVTY2hlbWFJZCA/PyBleGVjdXRhYmxlU2NoZW1hSWRGb3JTY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVPcGVyYXRpb25JblVzYWdlUmVwb3J0aW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdmVkT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmVwb3J0V2hpY2hNdXN0QmVVc2VkSW1tZWRpYXRlbHkoZXhlY3V0YWJsZVNjaGVtYUlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3BlcmF0aW9uQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5mdWxsUXVlcnlDYWNoZUhpdCA9ICEhbWV0cmljcy5yZXNwb25zZUNhY2hlSGl0O1xuICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5mb3JiaWRkZW5PcGVyYXRpb24gPSAhIW1ldHJpY3MuZm9yYmlkZGVuT3BlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5yZWdpc3RlcmVkT3BlcmF0aW9uID0gISFtZXRyaWNzLnJlZ2lzdGVyZWRPcGVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlmQ2FjaGVhYmxlID0gcmVxdWVzdENvbnRleHQub3ZlcmFsbENhY2hlUG9saWN5LnBvbGljeUlmQ2FjaGVhYmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lJZkNhY2hlYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIudHJhY2UuY2FjaGVQb2xpY3kgPSBuZXcgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuQ2FjaGVQb2xpY3koe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlOiBwb2xpY3lJZkNhY2hlYWJsZS5zY29wZSA9PT0gJ1BSSVZBVEUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGUuUFJJVkFURVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHBvbGljeUlmQ2FjaGVhYmxlLnNjb3BlID09PSAnUFVCTElDJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB1c2FnZV9yZXBvcnRpbmdfcHJvdG9idWZfMS5UcmFjZS5DYWNoZVBvbGljeS5TY29wZS5QVUJMSUNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGUuVU5LTk9XTixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBZ2VOczogcG9saWN5SWZDYWNoZWFibGUubWF4QWdlICogMWU5LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldHJpY3MucXVlcnlQbGFuVHJhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLnF1ZXJ5UGxhbiA9IG1ldHJpY3MucXVlcnlQbGFuVHJhY2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYWRkVHJhY2UoKS5jYXRjaChsb2dnZXIuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBhZGRUcmFjZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlcykgPT4gc2V0SW1tZWRpYXRlKHJlcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhlY3V0YWJsZVNjaGVtYUlkID0gb3ZlcnJpZGRlbkV4ZWN1dGFibGVTY2hlbWFJZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGFibGVTY2hlbWFJZEZvclNjaGVtYShzY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0cmFjZSB9ID0gdHJlZUJ1aWxkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhdHNSZXBvcnRLZXkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVmZXJlbmNlZEZpZWxkc0J5VHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVxdWVzdENvbnRleHQuZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0c1JlcG9ydEtleSA9IGAjIyBHcmFwaFFMUGFyc2VGYWlsdXJlXFxuYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdyYXBocWxWYWxpZGF0aW9uRmFpbHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzUmVwb3J0S2V5ID0gYCMjIEdyYXBoUUxWYWxpZGF0aW9uRmFpbHVyZVxcbmA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChncmFwaHFsVW5rbm93bk9wZXJhdGlvbk5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0c1JlcG9ydEtleSA9IGAjIyBHcmFwaFFMVW5rbm93bk9wZXJhdGlvbk5hbWVcXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNFeGVjdXRhYmxlID0gc3RhdHNSZXBvcnRLZXkgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0c1JlcG9ydEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNlbmRVbmV4ZWN1dGFibGVPcGVyYXRpb25Eb2N1bWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2UudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkgPSByZXF1ZXN0Q29udGV4dC5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlLnVuZXhlY3V0ZWRPcGVyYXRpb25OYW1lID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LnJlcXVlc3Qub3BlcmF0aW9uTmFtZSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRpb25EZXJpdmVkRGF0YSA9IGdldE9wZXJhdGlvbkRlcml2ZWREYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHNSZXBvcnRLZXkgPSBgIyAke3JlcXVlc3RDb250ZXh0Lm9wZXJhdGlvbk5hbWUgfHwgJy0nfVxcbiR7b3BlcmF0aW9uRGVyaXZlZERhdGEuc2lnbmF0dXJlfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRlcml2ZWREYXRhLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm90b2J1ZkVycm9yID0gdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UudmVyaWZ5KHRyYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm90b2J1ZkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBlbmNvZGluZyB0cmFjZTogJHtwcm90b2J1ZkVycm9yfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdmVkT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmVwb3J0V2hpY2hNdXN0QmVVc2VkSW1tZWRpYXRlbHkoZXhlY3V0YWJsZVNjaGVtYUlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3BlcmF0aW9uQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFJlcG9ydFdoaWNoTXVzdEJlVXNlZEltbWVkaWF0ZWx5KGV4ZWN1dGFibGVTY2hlbWFJZCkuYWRkVHJhY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzUmVwb3J0S2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzVHJhY2U6IHNlbmRUcmFjZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0V4ZWN1dGFibGUgfHwgISFtZXRyaWNzLmNhcHR1cmVUcmFjZXMpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFtZXRyaWNzLm5vbkZ0djFFcnJvclBhdGhzPy5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE9wZXJhdGlvbkFzVHJhY2UodHJhY2UsIHN0YXRzUmVwb3J0S2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VkRmllbGRzQnlUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbkZ0djFFcnJvclBhdGhzOiBtZXRyaWNzLm5vbkZ0djFFcnJvclBhdGhzID8/IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VuZFJlcG9ydHNJbW1lZGlhdGVseSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJlcG9ydFdoaWNoTXVzdEJlVXNlZEltbWVkaWF0ZWx5KGV4ZWN1dGFibGVTY2hlbWFJZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNpemVFc3RpbWF0b3IuYnl0ZXMgPj1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9wdGlvbnMubWF4VW5jb21wcmVzc2VkUmVwb3J0U2l6ZSB8fCA0ICogMTAyNCAqIDEwMjQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VuZFJlcG9ydEFuZFJlcG9ydEVycm9ycyhleGVjdXRhYmxlU2NoZW1hSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldE9wZXJhdGlvbkRlcml2ZWREYXRhKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0Q29udGV4dC5kb2N1bWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZG9jdW1lbnQ/Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9ICgwLCBvcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlX2pzXzEub3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZUtleSkocmVxdWVzdENvbnRleHQucXVlcnlIYXNoLCByZXF1ZXN0Q29udGV4dC5vcGVyYXRpb25OYW1lIHx8ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUuZm9yU2NoZW1hICE9PSBzY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JTY2hlbWE6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICgwLCBvcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlX2pzXzEuY3JlYXRlT3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZSkoeyBsb2dnZXIgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlZE9wZXJhdGlvbkRlcml2ZWREYXRhID0gb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZS5jYWNoZS5nZXQoY2FjaGVLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZE9wZXJhdGlvbkRlcml2ZWREYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZE9wZXJhdGlvbkRlcml2ZWREYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGVkU2lnbmF0dXJlID0gKG9wdGlvbnMuY2FsY3VsYXRlU2lnbmF0dXJlIHx8IHV0aWxzX3VzYWdlcmVwb3J0aW5nXzEudXNhZ2VSZXBvcnRpbmdTaWduYXR1cmUpKHJlcXVlc3RDb250ZXh0LmRvY3VtZW50LCByZXF1ZXN0Q29udGV4dC5vcGVyYXRpb25OYW1lIHx8ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZE9wZXJhdGlvbkRlcml2ZWREYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogZ2VuZXJhdGVkU2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGU6ICgwLCB1dGlsc191c2FnZXJlcG9ydGluZ18xLmNhbGN1bGF0ZVJlZmVyZW5jZWRGaWVsZHNCeVR5cGUpKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHJlcXVlc3RDb250ZXh0LmRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkT3BlcmF0aW9uTmFtZTogcmVxdWVzdENvbnRleHQub3BlcmF0aW9uTmFtZSA/PyBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUuY2FjaGUuc2V0KGNhY2hlS2V5LCBnZW5lcmF0ZWRPcGVyYXRpb25EZXJpdmVkRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkT3BlcmF0aW9uRGVyaXZlZERhdGE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhc3luYyBzZXJ2ZXJXaWxsU3RvcCgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcG9ydFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHJlcG9ydFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydFRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kQWxsUmVwb3J0c0FuZFJlcG9ydEVycm9ycygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0cy5BcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZyA9IEFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nO1xuZnVuY3Rpb24gbWFrZUhUVFBSZXF1ZXN0SGVhZGVycyhodHRwLCBoZWFkZXJzLCBzZW5kSGVhZGVycykge1xuICAgIGlmICghc2VuZEhlYWRlcnMgfHxcbiAgICAgICAgKCdub25lJyBpbiBzZW5kSGVhZGVycyAmJiBzZW5kSGVhZGVycy5ub25lKSB8fFxuICAgICAgICAoJ2FsbCcgaW4gc2VuZEhlYWRlcnMgJiYgIXNlbmRIZWFkZXJzLmFsbCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBoZWFkZXJzKSB7XG4gICAgICAgIGlmICgoJ2V4Y2VwdE5hbWVzJyBpbiBzZW5kSGVhZGVycyAmJlxuICAgICAgICAgICAgc2VuZEhlYWRlcnMuZXhjZXB0TmFtZXMuc29tZSgoZXhjZXB0SGVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4Y2VwdEhlYWRlci50b0xvd2VyQ2FzZSgpID09PSBrZXk7XG4gICAgICAgICAgICB9KSkgfHxcbiAgICAgICAgICAgICgnb25seU5hbWVzJyBpbiBzZW5kSGVhZGVycyAmJlxuICAgICAgICAgICAgICAgICFzZW5kSGVhZGVycy5vbmx5TmFtZXMuc29tZSgoaGVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWFkZXIudG9Mb3dlckNhc2UoKSA9PT0ga2V5O1xuICAgICAgICAgICAgICAgIH0pKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJ2F1dGhvcml6YXRpb24nOlxuICAgICAgICAgICAgY2FzZSAnY29va2llJzpcbiAgICAgICAgICAgIGNhc2UgJ3NldC1jb29raWUnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBodHRwLnJlcXVlc3RIZWFkZXJzW2tleV0gPSBuZXcgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuSFRUUC5WYWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMubWFrZUhUVFBSZXF1ZXN0SGVhZGVycyA9IG1ha2VIVFRQUmVxdWVzdEhlYWRlcnM7XG5mdW5jdGlvbiBkZWZhdWx0R2VuZXJhdGVDbGllbnRJbmZvKHsgcmVxdWVzdCwgfSkge1xuICAgIGNvbnN0IGNsaWVudE5hbWVIZWFkZXJLZXkgPSAnYXBvbGxvZ3JhcGhxbC1jbGllbnQtbmFtZSc7XG4gICAgY29uc3QgY2xpZW50VmVyc2lvbkhlYWRlcktleSA9ICdhcG9sbG9ncmFwaHFsLWNsaWVudC12ZXJzaW9uJztcbiAgICBpZiAocmVxdWVzdC5odHRwPy5oZWFkZXJzPy5nZXQoY2xpZW50TmFtZUhlYWRlcktleSkgfHxcbiAgICAgICAgcmVxdWVzdC5odHRwPy5oZWFkZXJzPy5nZXQoY2xpZW50VmVyc2lvbkhlYWRlcktleSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNsaWVudE5hbWU6IHJlcXVlc3QuaHR0cD8uaGVhZGVycz8uZ2V0KGNsaWVudE5hbWVIZWFkZXJLZXkpLFxuICAgICAgICAgICAgY2xpZW50VmVyc2lvbjogcmVxdWVzdC5odHRwPy5oZWFkZXJzPy5nZXQoY2xpZW50VmVyc2lvbkhlYWRlcktleSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlcXVlc3QuZXh0ZW5zaW9ucz8uY2xpZW50SW5mbykge1xuICAgICAgICByZXR1cm4gcmVxdWVzdC5leHRlbnNpb25zLmNsaWVudEluZm87XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGx1Z2luLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/plugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/stats.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/stats.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.OurContextualizedStats = exports.OurReport = exports.SizeEstimator = void 0;\nconst usage_reporting_protobuf_1 = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js\");\nconst durationHistogram_js_1 = __webpack_require__(/*! ./durationHistogram.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/durationHistogram.js\");\nconst iterateOverTrace_js_1 = __webpack_require__(/*! ./iterateOverTrace.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/iterateOverTrace.js\");\nclass SizeEstimator {\n    constructor() {\n        this.bytes = 0;\n    }\n}\nexports.SizeEstimator = SizeEstimator;\nclass OurReport {\n    constructor(header) {\n        this.header = header;\n        this.tracesPreAggregated = false;\n        this.tracesPerQuery = Object.create(null);\n        this.endTime = null;\n        this.operationCount = 0;\n        this.sizeEstimator = new SizeEstimator();\n    }\n    ensureCountsAreIntegers() {\n        for (const tracesAndStats of Object.values(this.tracesPerQuery)) {\n            tracesAndStats.ensureCountsAreIntegers();\n        }\n    }\n    addTrace({ statsReportKey, trace, asTrace, referencedFieldsByType, maxTraceBytes = 10 * 1024 * 1024, nonFtv1ErrorPaths, }) {\n        const tracesAndStats = this.getTracesAndStats({\n            statsReportKey,\n            referencedFieldsByType,\n        });\n        if (asTrace) {\n            const encodedTrace = usage_reporting_protobuf_1.Trace.encode(trace).finish();\n            if (!isNaN(maxTraceBytes) && encodedTrace.length > maxTraceBytes) {\n                tracesAndStats.statsWithContext.addTrace(trace, this.sizeEstimator, nonFtv1ErrorPaths);\n            }\n            else {\n                tracesAndStats.trace.push(encodedTrace);\n                this.sizeEstimator.bytes += 2 + encodedTrace.length;\n            }\n        }\n        else {\n            tracesAndStats.statsWithContext.addTrace(trace, this.sizeEstimator, nonFtv1ErrorPaths);\n        }\n    }\n    getTracesAndStats({ statsReportKey, referencedFieldsByType, }) {\n        const existing = this.tracesPerQuery[statsReportKey];\n        if (existing) {\n            return existing;\n        }\n        this.sizeEstimator.bytes += estimatedBytesForString(statsReportKey);\n        for (const [typeName, referencedFieldsForType] of Object.entries(referencedFieldsByType)) {\n            this.sizeEstimator.bytes += 2 + 2;\n            if (referencedFieldsForType.isInterface) {\n                this.sizeEstimator.bytes += 2;\n            }\n            this.sizeEstimator.bytes += estimatedBytesForString(typeName);\n            for (const fieldName of referencedFieldsForType.fieldNames) {\n                this.sizeEstimator.bytes += estimatedBytesForString(fieldName);\n            }\n        }\n        return (this.tracesPerQuery[statsReportKey] = new OurTracesAndStats(referencedFieldsByType));\n    }\n}\nexports.OurReport = OurReport;\nclass OurTracesAndStats {\n    constructor(referencedFieldsByType) {\n        this.referencedFieldsByType = referencedFieldsByType;\n        this.trace = [];\n        this.statsWithContext = new StatsByContext();\n        this.internalTracesContributingToStats = [];\n    }\n    ensureCountsAreIntegers() {\n        this.statsWithContext.ensureCountsAreIntegers();\n    }\n}\nclass StatsByContext {\n    constructor() {\n        this.map = Object.create(null);\n    }\n    toArray() {\n        return Object.values(this.map);\n    }\n    ensureCountsAreIntegers() {\n        for (const contextualizedStats of Object.values(this.map)) {\n            contextualizedStats.ensureCountsAreIntegers();\n        }\n    }\n    addTrace(trace, sizeEstimator, nonFtv1ErrorPaths) {\n        this.getContextualizedStats(trace, sizeEstimator).addTrace(trace, sizeEstimator, nonFtv1ErrorPaths);\n    }\n    getContextualizedStats(trace, sizeEstimator) {\n        const statsContext = {\n            clientName: trace.clientName,\n            clientVersion: trace.clientVersion,\n        };\n        const statsContextKey = JSON.stringify(statsContext);\n        const existing = this.map[statsContextKey];\n        if (existing) {\n            return existing;\n        }\n        sizeEstimator.bytes +=\n            20 +\n                estimatedBytesForString(trace.clientName) +\n                estimatedBytesForString(trace.clientVersion);\n        const contextualizedStats = new OurContextualizedStats(statsContext);\n        this.map[statsContextKey] = contextualizedStats;\n        return contextualizedStats;\n    }\n}\nclass OurContextualizedStats {\n    constructor(context) {\n        this.context = context;\n        this.queryLatencyStats = new OurQueryLatencyStats();\n        this.perTypeStat = Object.create(null);\n    }\n    ensureCountsAreIntegers() {\n        for (const typeStat of Object.values(this.perTypeStat)) {\n            typeStat.ensureCountsAreIntegers();\n        }\n    }\n    addTrace(trace, sizeEstimator, nonFtv1ErrorPaths = []) {\n        const { fieldExecutionWeight } = trace;\n        if (!fieldExecutionWeight) {\n            this.queryLatencyStats.requestsWithoutFieldInstrumentation++;\n        }\n        this.queryLatencyStats.requestCount++;\n        if (trace.fullQueryCacheHit) {\n            this.queryLatencyStats.cacheLatencyCount.incrementDuration(trace.durationNs);\n            this.queryLatencyStats.cacheHits++;\n        }\n        else {\n            this.queryLatencyStats.latencyCount.incrementDuration(trace.durationNs);\n        }\n        if (!trace.fullQueryCacheHit && trace.cachePolicy?.maxAgeNs != null) {\n            switch (trace.cachePolicy.scope) {\n                case usage_reporting_protobuf_1.Trace.CachePolicy.Scope.PRIVATE:\n                    this.queryLatencyStats.privateCacheTtlCount.incrementDuration(trace.cachePolicy.maxAgeNs);\n                    break;\n                case usage_reporting_protobuf_1.Trace.CachePolicy.Scope.PUBLIC:\n                    this.queryLatencyStats.publicCacheTtlCount.incrementDuration(trace.cachePolicy.maxAgeNs);\n                    break;\n            }\n        }\n        if (trace.persistedQueryHit) {\n            this.queryLatencyStats.persistedQueryHits++;\n        }\n        if (trace.persistedQueryRegister) {\n            this.queryLatencyStats.persistedQueryMisses++;\n        }\n        if (trace.forbiddenOperation) {\n            this.queryLatencyStats.forbiddenOperationCount++;\n        }\n        if (trace.registeredOperation) {\n            this.queryLatencyStats.registeredOperationCount++;\n        }\n        let hasError = false;\n        const errorPathStats = new Set();\n        const traceNodeStats = (node, path) => {\n            if (node.error?.length) {\n                hasError = true;\n                let currPathErrorStats = this.queryLatencyStats.rootErrorStats;\n                path.toArray().forEach((subPath) => {\n                    currPathErrorStats = currPathErrorStats.getChild(subPath, sizeEstimator);\n                });\n                errorPathStats.add(currPathErrorStats);\n                currPathErrorStats.errorsCount += node.error.length;\n            }\n            if (fieldExecutionWeight) {\n                const fieldName = node.originalFieldName || node.responseName;\n                if (node.parentType &&\n                    fieldName &&\n                    node.type &&\n                    node.endTime != null &&\n                    node.startTime != null &&\n                    node.endTime >= node.startTime) {\n                    const typeStat = this.getTypeStat(node.parentType, sizeEstimator);\n                    const fieldStat = typeStat.getFieldStat(fieldName, node.type, sizeEstimator);\n                    fieldStat.errorsCount += node.error?.length ?? 0;\n                    fieldStat.observedExecutionCount++;\n                    fieldStat.estimatedExecutionCount += fieldExecutionWeight;\n                    fieldStat.requestsWithErrorsCount +=\n                        (node.error?.length ?? 0) > 0 ? 1 : 0;\n                    fieldStat.latencyCount.incrementDuration(node.endTime - node.startTime, fieldExecutionWeight);\n                }\n            }\n            return false;\n        };\n        (0, iterateOverTrace_js_1.iterateOverTrace)(trace, traceNodeStats, true);\n        for (const { subgraph, path } of nonFtv1ErrorPaths) {\n            hasError = true;\n            if (path) {\n                let currPathErrorStats = this.queryLatencyStats.rootErrorStats.getChild(`service:${subgraph}`, sizeEstimator);\n                path.forEach((subPath) => {\n                    if (typeof subPath === 'string') {\n                        currPathErrorStats = currPathErrorStats.getChild(subPath, sizeEstimator);\n                    }\n                });\n                errorPathStats.add(currPathErrorStats);\n                currPathErrorStats.errorsCount += 1;\n            }\n        }\n        for (const errorPath of errorPathStats) {\n            errorPath.requestsWithErrorsCount += 1;\n        }\n        if (hasError) {\n            this.queryLatencyStats.requestsWithErrorsCount++;\n        }\n    }\n    getTypeStat(parentType, sizeEstimator) {\n        const existing = this.perTypeStat[parentType];\n        if (existing) {\n            return existing;\n        }\n        sizeEstimator.bytes += estimatedBytesForString(parentType);\n        const typeStat = new OurTypeStat();\n        this.perTypeStat[parentType] = typeStat;\n        return typeStat;\n    }\n}\nexports.OurContextualizedStats = OurContextualizedStats;\nclass OurQueryLatencyStats {\n    constructor() {\n        this.latencyCount = new durationHistogram_js_1.DurationHistogram();\n        this.requestCount = 0;\n        this.requestsWithoutFieldInstrumentation = 0;\n        this.cacheHits = 0;\n        this.persistedQueryHits = 0;\n        this.persistedQueryMisses = 0;\n        this.cacheLatencyCount = new durationHistogram_js_1.DurationHistogram();\n        this.rootErrorStats = new OurPathErrorStats();\n        this.requestsWithErrorsCount = 0;\n        this.publicCacheTtlCount = new durationHistogram_js_1.DurationHistogram();\n        this.privateCacheTtlCount = new durationHistogram_js_1.DurationHistogram();\n        this.registeredOperationCount = 0;\n        this.forbiddenOperationCount = 0;\n    }\n}\nclass OurPathErrorStats {\n    constructor() {\n        this.children = Object.create(null);\n        this.errorsCount = 0;\n        this.requestsWithErrorsCount = 0;\n    }\n    getChild(subPath, sizeEstimator) {\n        const existing = this.children[subPath];\n        if (existing) {\n            return existing;\n        }\n        const child = new OurPathErrorStats();\n        this.children[subPath] = child;\n        sizeEstimator.bytes += estimatedBytesForString(subPath) + 4;\n        return child;\n    }\n}\nclass OurTypeStat {\n    constructor() {\n        this.perFieldStat = Object.create(null);\n    }\n    getFieldStat(fieldName, returnType, sizeEstimator) {\n        const existing = this.perFieldStat[fieldName];\n        if (existing) {\n            return existing;\n        }\n        sizeEstimator.bytes +=\n            estimatedBytesForString(fieldName) +\n                estimatedBytesForString(returnType) +\n                10;\n        const fieldStat = new OurFieldStat(returnType);\n        this.perFieldStat[fieldName] = fieldStat;\n        return fieldStat;\n    }\n    ensureCountsAreIntegers() {\n        for (const fieldStat of Object.values(this.perFieldStat)) {\n            fieldStat.ensureCountsAreIntegers();\n        }\n    }\n}\nclass OurFieldStat {\n    constructor(returnType) {\n        this.returnType = returnType;\n        this.errorsCount = 0;\n        this.observedExecutionCount = 0;\n        this.estimatedExecutionCount = 0;\n        this.requestsWithErrorsCount = 0;\n        this.latencyCount = new durationHistogram_js_1.DurationHistogram();\n    }\n    ensureCountsAreIntegers() {\n        this.estimatedExecutionCount = Math.floor(this.estimatedExecutionCount);\n    }\n}\nfunction estimatedBytesForString(s) {\n    return 2 + Buffer.byteLength(s);\n}\n//# sourceMappingURL=stats.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3N0YXRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDhCQUE4QixHQUFHLGlCQUFpQixHQUFHLHFCQUFxQjtBQUMxRSxtQ0FBbUMsbUJBQU8sQ0FBQyx5SEFBa0M7QUFDN0UsK0JBQStCLG1CQUFPLENBQUMsdUhBQXdCO0FBQy9ELDhCQUE4QixtQkFBTyxDQUFDLHFIQUF1QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhHQUE4RztBQUM3SDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5Q0FBeUM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1QkFBdUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUJBQWlCO0FBQ3RDO0FBQ0E7QUFDQSxtR0FBbUcsU0FBUztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9wbHVnaW4vdXNhZ2VSZXBvcnRpbmcvc3RhdHMuanM/OWRmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuT3VyQ29udGV4dHVhbGl6ZWRTdGF0cyA9IGV4cG9ydHMuT3VyUmVwb3J0ID0gZXhwb3J0cy5TaXplRXN0aW1hdG9yID0gdm9pZCAwO1xuY29uc3QgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEgPSByZXF1aXJlKFwiQGFwb2xsby91c2FnZS1yZXBvcnRpbmctcHJvdG9idWZcIik7XG5jb25zdCBkdXJhdGlvbkhpc3RvZ3JhbV9qc18xID0gcmVxdWlyZShcIi4vZHVyYXRpb25IaXN0b2dyYW0uanNcIik7XG5jb25zdCBpdGVyYXRlT3ZlclRyYWNlX2pzXzEgPSByZXF1aXJlKFwiLi9pdGVyYXRlT3ZlclRyYWNlLmpzXCIpO1xuY2xhc3MgU2l6ZUVzdGltYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSAwO1xuICAgIH1cbn1cbmV4cG9ydHMuU2l6ZUVzdGltYXRvciA9IFNpemVFc3RpbWF0b3I7XG5jbGFzcyBPdXJSZXBvcnQge1xuICAgIGNvbnN0cnVjdG9yKGhlYWRlcikge1xuICAgICAgICB0aGlzLmhlYWRlciA9IGhlYWRlcjtcbiAgICAgICAgdGhpcy50cmFjZXNQcmVBZ2dyZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudHJhY2VzUGVyUXVlcnkgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLmVuZFRpbWUgPSBudWxsO1xuICAgICAgICB0aGlzLm9wZXJhdGlvbkNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5zaXplRXN0aW1hdG9yID0gbmV3IFNpemVFc3RpbWF0b3IoKTtcbiAgICB9XG4gICAgZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgdHJhY2VzQW5kU3RhdHMgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLnRyYWNlc1BlclF1ZXJ5KSkge1xuICAgICAgICAgICAgdHJhY2VzQW5kU3RhdHMuZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZSh7IHN0YXRzUmVwb3J0S2V5LCB0cmFjZSwgYXNUcmFjZSwgcmVmZXJlbmNlZEZpZWxkc0J5VHlwZSwgbWF4VHJhY2VCeXRlcyA9IDEwICogMTAyNCAqIDEwMjQsIG5vbkZ0djFFcnJvclBhdGhzLCB9KSB7XG4gICAgICAgIGNvbnN0IHRyYWNlc0FuZFN0YXRzID0gdGhpcy5nZXRUcmFjZXNBbmRTdGF0cyh7XG4gICAgICAgICAgICBzdGF0c1JlcG9ydEtleSxcbiAgICAgICAgICAgIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYXNUcmFjZSkge1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZFRyYWNlID0gdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEuVHJhY2UuZW5jb2RlKHRyYWNlKS5maW5pc2goKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4obWF4VHJhY2VCeXRlcykgJiYgZW5jb2RlZFRyYWNlLmxlbmd0aCA+IG1heFRyYWNlQnl0ZXMpIHtcbiAgICAgICAgICAgICAgICB0cmFjZXNBbmRTdGF0cy5zdGF0c1dpdGhDb250ZXh0LmFkZFRyYWNlKHRyYWNlLCB0aGlzLnNpemVFc3RpbWF0b3IsIG5vbkZ0djFFcnJvclBhdGhzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyYWNlc0FuZFN0YXRzLnRyYWNlLnB1c2goZW5jb2RlZFRyYWNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNpemVFc3RpbWF0b3IuYnl0ZXMgKz0gMiArIGVuY29kZWRUcmFjZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmFjZXNBbmRTdGF0cy5zdGF0c1dpdGhDb250ZXh0LmFkZFRyYWNlKHRyYWNlLCB0aGlzLnNpemVFc3RpbWF0b3IsIG5vbkZ0djFFcnJvclBhdGhzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRUcmFjZXNBbmRTdGF0cyh7IHN0YXRzUmVwb3J0S2V5LCByZWZlcmVuY2VkRmllbGRzQnlUeXBlLCB9KSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy50cmFjZXNQZXJRdWVyeVtzdGF0c1JlcG9ydEtleV07XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2l6ZUVzdGltYXRvci5ieXRlcyArPSBlc3RpbWF0ZWRCeXRlc0ZvclN0cmluZyhzdGF0c1JlcG9ydEtleSk7XG4gICAgICAgIGZvciAoY29uc3QgW3R5cGVOYW1lLCByZWZlcmVuY2VkRmllbGRzRm9yVHlwZV0gb2YgT2JqZWN0LmVudHJpZXMocmVmZXJlbmNlZEZpZWxkc0J5VHlwZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2l6ZUVzdGltYXRvci5ieXRlcyArPSAyICsgMjtcbiAgICAgICAgICAgIGlmIChyZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5pc0ludGVyZmFjZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZUVzdGltYXRvci5ieXRlcyArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zaXplRXN0aW1hdG9yLmJ5dGVzICs9IGVzdGltYXRlZEJ5dGVzRm9yU3RyaW5nKHR5cGVOYW1lKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmllbGROYW1lIG9mIHJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmZpZWxkTmFtZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpemVFc3RpbWF0b3IuYnl0ZXMgKz0gZXN0aW1hdGVkQnl0ZXNGb3JTdHJpbmcoZmllbGROYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHRoaXMudHJhY2VzUGVyUXVlcnlbc3RhdHNSZXBvcnRLZXldID0gbmV3IE91clRyYWNlc0FuZFN0YXRzKHJlZmVyZW5jZWRGaWVsZHNCeVR5cGUpKTtcbiAgICB9XG59XG5leHBvcnRzLk91clJlcG9ydCA9IE91clJlcG9ydDtcbmNsYXNzIE91clRyYWNlc0FuZFN0YXRzIHtcbiAgICBjb25zdHJ1Y3RvcihyZWZlcmVuY2VkRmllbGRzQnlUeXBlKSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IHJlZmVyZW5jZWRGaWVsZHNCeVR5cGU7XG4gICAgICAgIHRoaXMudHJhY2UgPSBbXTtcbiAgICAgICAgdGhpcy5zdGF0c1dpdGhDb250ZXh0ID0gbmV3IFN0YXRzQnlDb250ZXh0KCk7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzID0gW107XG4gICAgfVxuICAgIGVuc3VyZUNvdW50c0FyZUludGVnZXJzKCkge1xuICAgICAgICB0aGlzLnN0YXRzV2l0aENvbnRleHQuZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKTtcbiAgICB9XG59XG5jbGFzcyBTdGF0c0J5Q29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5tYXApO1xuICAgIH1cbiAgICBlbnN1cmVDb3VudHNBcmVJbnRlZ2VycygpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb250ZXh0dWFsaXplZFN0YXRzIG9mIE9iamVjdC52YWx1ZXModGhpcy5tYXApKSB7XG4gICAgICAgICAgICBjb250ZXh0dWFsaXplZFN0YXRzLmVuc3VyZUNvdW50c0FyZUludGVnZXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVHJhY2UodHJhY2UsIHNpemVFc3RpbWF0b3IsIG5vbkZ0djFFcnJvclBhdGhzKSB7XG4gICAgICAgIHRoaXMuZ2V0Q29udGV4dHVhbGl6ZWRTdGF0cyh0cmFjZSwgc2l6ZUVzdGltYXRvcikuYWRkVHJhY2UodHJhY2UsIHNpemVFc3RpbWF0b3IsIG5vbkZ0djFFcnJvclBhdGhzKTtcbiAgICB9XG4gICAgZ2V0Q29udGV4dHVhbGl6ZWRTdGF0cyh0cmFjZSwgc2l6ZUVzdGltYXRvcikge1xuICAgICAgICBjb25zdCBzdGF0c0NvbnRleHQgPSB7XG4gICAgICAgICAgICBjbGllbnROYW1lOiB0cmFjZS5jbGllbnROYW1lLFxuICAgICAgICAgICAgY2xpZW50VmVyc2lvbjogdHJhY2UuY2xpZW50VmVyc2lvbixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RhdHNDb250ZXh0S2V5ID0gSlNPTi5zdHJpbmdpZnkoc3RhdHNDb250ZXh0KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLm1hcFtzdGF0c0NvbnRleHRLZXldO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgfVxuICAgICAgICBzaXplRXN0aW1hdG9yLmJ5dGVzICs9XG4gICAgICAgICAgICAyMCArXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkQnl0ZXNGb3JTdHJpbmcodHJhY2UuY2xpZW50TmFtZSkgK1xuICAgICAgICAgICAgICAgIGVzdGltYXRlZEJ5dGVzRm9yU3RyaW5nKHRyYWNlLmNsaWVudFZlcnNpb24pO1xuICAgICAgICBjb25zdCBjb250ZXh0dWFsaXplZFN0YXRzID0gbmV3IE91ckNvbnRleHR1YWxpemVkU3RhdHMoc3RhdHNDb250ZXh0KTtcbiAgICAgICAgdGhpcy5tYXBbc3RhdHNDb250ZXh0S2V5XSA9IGNvbnRleHR1YWxpemVkU3RhdHM7XG4gICAgICAgIHJldHVybiBjb250ZXh0dWFsaXplZFN0YXRzO1xuICAgIH1cbn1cbmNsYXNzIE91ckNvbnRleHR1YWxpemVkU3RhdHMge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cyA9IG5ldyBPdXJRdWVyeUxhdGVuY3lTdGF0cygpO1xuICAgICAgICB0aGlzLnBlclR5cGVTdGF0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9XG4gICAgZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZVN0YXQgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLnBlclR5cGVTdGF0KSkge1xuICAgICAgICAgICAgdHlwZVN0YXQuZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZSh0cmFjZSwgc2l6ZUVzdGltYXRvciwgbm9uRnR2MUVycm9yUGF0aHMgPSBbXSkge1xuICAgICAgICBjb25zdCB7IGZpZWxkRXhlY3V0aW9uV2VpZ2h0IH0gPSB0cmFjZTtcbiAgICAgICAgaWYgKCFmaWVsZEV4ZWN1dGlvbldlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cy5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbisrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucmVxdWVzdENvdW50Kys7XG4gICAgICAgIGlmICh0cmFjZS5mdWxsUXVlcnlDYWNoZUhpdCkge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cy5jYWNoZUxhdGVuY3lDb3VudC5pbmNyZW1lbnREdXJhdGlvbih0cmFjZS5kdXJhdGlvbk5zKTtcbiAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMuY2FjaGVIaXRzKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5TGF0ZW5jeVN0YXRzLmxhdGVuY3lDb3VudC5pbmNyZW1lbnREdXJhdGlvbih0cmFjZS5kdXJhdGlvbk5zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYWNlLmZ1bGxRdWVyeUNhY2hlSGl0ICYmIHRyYWNlLmNhY2hlUG9saWN5Py5tYXhBZ2VOcyAhPSBudWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRyYWNlLmNhY2hlUG9saWN5LnNjb3BlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSB1c2FnZV9yZXBvcnRpbmdfcHJvdG9idWZfMS5UcmFjZS5DYWNoZVBvbGljeS5TY29wZS5QUklWQVRFOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5TGF0ZW5jeVN0YXRzLnByaXZhdGVDYWNoZVR0bENvdW50LmluY3JlbWVudER1cmF0aW9uKHRyYWNlLmNhY2hlUG9saWN5Lm1heEFnZU5zKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB1c2FnZV9yZXBvcnRpbmdfcHJvdG9idWZfMS5UcmFjZS5DYWNoZVBvbGljeS5TY29wZS5QVUJMSUM6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucHVibGljQ2FjaGVUdGxDb3VudC5pbmNyZW1lbnREdXJhdGlvbih0cmFjZS5jYWNoZVBvbGljeS5tYXhBZ2VOcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjZS5wZXJzaXN0ZWRRdWVyeUhpdCkge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cy5wZXJzaXN0ZWRRdWVyeUhpdHMrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2UucGVyc2lzdGVkUXVlcnlSZWdpc3Rlcikge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cy5wZXJzaXN0ZWRRdWVyeU1pc3NlcysrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjZS5mb3JiaWRkZW5PcGVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2UucmVnaXN0ZXJlZE9wZXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cy5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICBsZXQgaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZXJyb3JQYXRoU3RhdHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGNvbnN0IHRyYWNlTm9kZVN0YXRzID0gKG5vZGUsIHBhdGgpID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlLmVycm9yPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBoYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJQYXRoRXJyb3JTdGF0cyA9IHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucm9vdEVycm9yU3RhdHM7XG4gICAgICAgICAgICAgICAgcGF0aC50b0FycmF5KCkuZm9yRWFjaCgoc3ViUGF0aCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjdXJyUGF0aEVycm9yU3RhdHMgPSBjdXJyUGF0aEVycm9yU3RhdHMuZ2V0Q2hpbGQoc3ViUGF0aCwgc2l6ZUVzdGltYXRvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZXJyb3JQYXRoU3RhdHMuYWRkKGN1cnJQYXRoRXJyb3JTdGF0cyk7XG4gICAgICAgICAgICAgICAgY3VyclBhdGhFcnJvclN0YXRzLmVycm9yc0NvdW50ICs9IG5vZGUuZXJyb3IubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpZWxkRXhlY3V0aW9uV2VpZ2h0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gbm9kZS5vcmlnaW5hbEZpZWxkTmFtZSB8fCBub2RlLnJlc3BvbnNlTmFtZTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5wYXJlbnRUeXBlICYmXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZSAmJlxuICAgICAgICAgICAgICAgICAgICBub2RlLnR5cGUgJiZcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5lbmRUaW1lICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zdGFydFRpbWUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICBub2RlLmVuZFRpbWUgPj0gbm9kZS5zdGFydFRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZVN0YXQgPSB0aGlzLmdldFR5cGVTdGF0KG5vZGUucGFyZW50VHlwZSwgc2l6ZUVzdGltYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkU3RhdCA9IHR5cGVTdGF0LmdldEZpZWxkU3RhdChmaWVsZE5hbWUsIG5vZGUudHlwZSwgc2l6ZUVzdGltYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkU3RhdC5lcnJvcnNDb3VudCArPSBub2RlLmVycm9yPy5sZW5ndGggPz8gMDtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRTdGF0Lm9ic2VydmVkRXhlY3V0aW9uQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgZmllbGRTdGF0LmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ICs9IGZpZWxkRXhlY3V0aW9uV2VpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFN0YXQucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgKz1cbiAgICAgICAgICAgICAgICAgICAgICAgIChub2RlLmVycm9yPy5sZW5ndGggPz8gMCkgPiAwID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkU3RhdC5sYXRlbmN5Q291bnQuaW5jcmVtZW50RHVyYXRpb24obm9kZS5lbmRUaW1lIC0gbm9kZS5zdGFydFRpbWUsIGZpZWxkRXhlY3V0aW9uV2VpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgICgwLCBpdGVyYXRlT3ZlclRyYWNlX2pzXzEuaXRlcmF0ZU92ZXJUcmFjZSkodHJhY2UsIHRyYWNlTm9kZVN0YXRzLCB0cnVlKTtcbiAgICAgICAgZm9yIChjb25zdCB7IHN1YmdyYXBoLCBwYXRoIH0gb2Ygbm9uRnR2MUVycm9yUGF0aHMpIHtcbiAgICAgICAgICAgIGhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJQYXRoRXJyb3JTdGF0cyA9IHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucm9vdEVycm9yU3RhdHMuZ2V0Q2hpbGQoYHNlcnZpY2U6JHtzdWJncmFwaH1gLCBzaXplRXN0aW1hdG9yKTtcbiAgICAgICAgICAgICAgICBwYXRoLmZvckVhY2goKHN1YlBhdGgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWJQYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyclBhdGhFcnJvclN0YXRzID0gY3VyclBhdGhFcnJvclN0YXRzLmdldENoaWxkKHN1YlBhdGgsIHNpemVFc3RpbWF0b3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZXJyb3JQYXRoU3RhdHMuYWRkKGN1cnJQYXRoRXJyb3JTdGF0cyk7XG4gICAgICAgICAgICAgICAgY3VyclBhdGhFcnJvclN0YXRzLmVycm9yc0NvdW50ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBlcnJvclBhdGggb2YgZXJyb3JQYXRoU3RhdHMpIHtcbiAgICAgICAgICAgIGVycm9yUGF0aC5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cy5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFR5cGVTdGF0KHBhcmVudFR5cGUsIHNpemVFc3RpbWF0b3IpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnBlclR5cGVTdGF0W3BhcmVudFR5cGVdO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgfVxuICAgICAgICBzaXplRXN0aW1hdG9yLmJ5dGVzICs9IGVzdGltYXRlZEJ5dGVzRm9yU3RyaW5nKHBhcmVudFR5cGUpO1xuICAgICAgICBjb25zdCB0eXBlU3RhdCA9IG5ldyBPdXJUeXBlU3RhdCgpO1xuICAgICAgICB0aGlzLnBlclR5cGVTdGF0W3BhcmVudFR5cGVdID0gdHlwZVN0YXQ7XG4gICAgICAgIHJldHVybiB0eXBlU3RhdDtcbiAgICB9XG59XG5leHBvcnRzLk91ckNvbnRleHR1YWxpemVkU3RhdHMgPSBPdXJDb250ZXh0dWFsaXplZFN0YXRzO1xuY2xhc3MgT3VyUXVlcnlMYXRlbmN5U3RhdHMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxhdGVuY3lDb3VudCA9IG5ldyBkdXJhdGlvbkhpc3RvZ3JhbV9qc18xLkR1cmF0aW9uSGlzdG9ncmFtKCk7XG4gICAgICAgIHRoaXMucmVxdWVzdENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuY2FjaGVIaXRzID0gMDtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZWRRdWVyeUhpdHMgPSAwO1xuICAgICAgICB0aGlzLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzID0gMDtcbiAgICAgICAgdGhpcy5jYWNoZUxhdGVuY3lDb3VudCA9IG5ldyBkdXJhdGlvbkhpc3RvZ3JhbV9qc18xLkR1cmF0aW9uSGlzdG9ncmFtKCk7XG4gICAgICAgIHRoaXMucm9vdEVycm9yU3RhdHMgPSBuZXcgT3VyUGF0aEVycm9yU3RhdHMoKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IDA7XG4gICAgICAgIHRoaXMucHVibGljQ2FjaGVUdGxDb3VudCA9IG5ldyBkdXJhdGlvbkhpc3RvZ3JhbV9qc18xLkR1cmF0aW9uSGlzdG9ncmFtKCk7XG4gICAgICAgIHRoaXMucHJpdmF0ZUNhY2hlVHRsQ291bnQgPSBuZXcgZHVyYXRpb25IaXN0b2dyYW1fanNfMS5EdXJhdGlvbkhpc3RvZ3JhbSgpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCA9IDA7XG4gICAgICAgIHRoaXMuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgPSAwO1xuICAgIH1cbn1cbmNsYXNzIE91clBhdGhFcnJvclN0YXRzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuZXJyb3JzQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gMDtcbiAgICB9XG4gICAgZ2V0Q2hpbGQoc3ViUGF0aCwgc2l6ZUVzdGltYXRvcikge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuY2hpbGRyZW5bc3ViUGF0aF07XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoaWxkID0gbmV3IE91clBhdGhFcnJvclN0YXRzKCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5bc3ViUGF0aF0gPSBjaGlsZDtcbiAgICAgICAgc2l6ZUVzdGltYXRvci5ieXRlcyArPSBlc3RpbWF0ZWRCeXRlc0ZvclN0cmluZyhzdWJQYXRoKSArIDQ7XG4gICAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG59XG5jbGFzcyBPdXJUeXBlU3RhdCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGVyRmllbGRTdGF0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0RmllbGRTdGF0KGZpZWxkTmFtZSwgcmV0dXJuVHlwZSwgc2l6ZUVzdGltYXRvcikge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMucGVyRmllbGRTdGF0W2ZpZWxkTmFtZV07XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgICAgICB9XG4gICAgICAgIHNpemVFc3RpbWF0b3IuYnl0ZXMgKz1cbiAgICAgICAgICAgIGVzdGltYXRlZEJ5dGVzRm9yU3RyaW5nKGZpZWxkTmFtZSkgK1xuICAgICAgICAgICAgICAgIGVzdGltYXRlZEJ5dGVzRm9yU3RyaW5nKHJldHVyblR5cGUpICtcbiAgICAgICAgICAgICAgICAxMDtcbiAgICAgICAgY29uc3QgZmllbGRTdGF0ID0gbmV3IE91ckZpZWxkU3RhdChyZXR1cm5UeXBlKTtcbiAgICAgICAgdGhpcy5wZXJGaWVsZFN0YXRbZmllbGROYW1lXSA9IGZpZWxkU3RhdDtcbiAgICAgICAgcmV0dXJuIGZpZWxkU3RhdDtcbiAgICB9XG4gICAgZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmllbGRTdGF0IG9mIE9iamVjdC52YWx1ZXModGhpcy5wZXJGaWVsZFN0YXQpKSB7XG4gICAgICAgICAgICBmaWVsZFN0YXQuZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIE91ckZpZWxkU3RhdCB7XG4gICAgY29uc3RydWN0b3IocmV0dXJuVHlwZSkge1xuICAgICAgICB0aGlzLnJldHVyblR5cGUgPSByZXR1cm5UeXBlO1xuICAgICAgICB0aGlzLmVycm9yc0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudCA9IDA7XG4gICAgICAgIHRoaXMucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmxhdGVuY3lDb3VudCA9IG5ldyBkdXJhdGlvbkhpc3RvZ3JhbV9qc18xLkR1cmF0aW9uSGlzdG9ncmFtKCk7XG4gICAgfVxuICAgIGVuc3VyZUNvdW50c0FyZUludGVnZXJzKCkge1xuICAgICAgICB0aGlzLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ID0gTWF0aC5mbG9vcih0aGlzLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50KTtcbiAgICB9XG59XG5mdW5jdGlvbiBlc3RpbWF0ZWRCeXRlc0ZvclN0cmluZyhzKSB7XG4gICAgcmV0dXJuIDIgKyBCdWZmZXIuYnl0ZUxlbmd0aChzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/stats.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/traceDetails.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/traceDetails.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.makeTraceDetails = void 0;\nconst usage_reporting_protobuf_1 = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js\");\nfunction makeTraceDetails(variables, sendVariableValues, operationString) {\n    const details = new usage_reporting_protobuf_1.Trace.Details();\n    const variablesToRecord = (() => {\n        if (sendVariableValues && 'transform' in sendVariableValues) {\n            const originalKeys = Object.keys(variables);\n            try {\n                const modifiedVariables = sendVariableValues.transform({\n                    variables: variables,\n                    operationString: operationString,\n                });\n                return cleanModifiedVariables(originalKeys, modifiedVariables);\n            }\n            catch (e) {\n                return handleVariableValueTransformError(originalKeys);\n            }\n        }\n        else {\n            return variables;\n        }\n    })();\n    Object.keys(variablesToRecord).forEach((name) => {\n        if (!sendVariableValues ||\n            ('none' in sendVariableValues && sendVariableValues.none) ||\n            ('all' in sendVariableValues && !sendVariableValues.all) ||\n            ('exceptNames' in sendVariableValues &&\n                sendVariableValues.exceptNames.includes(name)) ||\n            ('onlyNames' in sendVariableValues &&\n                !sendVariableValues.onlyNames.includes(name))) {\n            details.variablesJson[name] = '';\n        }\n        else {\n            try {\n                details.variablesJson[name] =\n                    typeof variablesToRecord[name] === 'undefined'\n                        ? ''\n                        : JSON.stringify(variablesToRecord[name]);\n            }\n            catch (e) {\n                details.variablesJson[name] = JSON.stringify('[Unable to convert value to JSON]');\n            }\n        }\n    });\n    return details;\n}\nexports.makeTraceDetails = makeTraceDetails;\nfunction handleVariableValueTransformError(variableNames) {\n    const modifiedVariables = Object.create(null);\n    variableNames.forEach((name) => {\n        modifiedVariables[name] = '[PREDICATE_FUNCTION_ERROR]';\n    });\n    return modifiedVariables;\n}\nfunction cleanModifiedVariables(originalKeys, modifiedVariables) {\n    const cleanedVariables = Object.create(null);\n    originalKeys.forEach((name) => {\n        cleanedVariables[name] = modifiedVariables[name];\n    });\n    return cleanedVariables;\n}\n//# sourceMappingURL=traceDetails.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3RyYWNlRGV0YWlscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx3QkFBd0I7QUFDeEIsbUNBQW1DLG1CQUFPLENBQUMseUhBQWtDO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3RyYWNlRGV0YWlscy5qcz81MTU5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tYWtlVHJhY2VEZXRhaWxzID0gdm9pZCAwO1xuY29uc3QgdXNhZ2VfcmVwb3J0aW5nX3Byb3RvYnVmXzEgPSByZXF1aXJlKFwiQGFwb2xsby91c2FnZS1yZXBvcnRpbmctcHJvdG9idWZcIik7XG5mdW5jdGlvbiBtYWtlVHJhY2VEZXRhaWxzKHZhcmlhYmxlcywgc2VuZFZhcmlhYmxlVmFsdWVzLCBvcGVyYXRpb25TdHJpbmcpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gbmV3IHVzYWdlX3JlcG9ydGluZ19wcm90b2J1Zl8xLlRyYWNlLkRldGFpbHMoKTtcbiAgICBjb25zdCB2YXJpYWJsZXNUb1JlY29yZCA9ICgoKSA9PiB7XG4gICAgICAgIGlmIChzZW5kVmFyaWFibGVWYWx1ZXMgJiYgJ3RyYW5zZm9ybScgaW4gc2VuZFZhcmlhYmxlVmFsdWVzKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbEtleXMgPSBPYmplY3Qua2V5cyh2YXJpYWJsZXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RpZmllZFZhcmlhYmxlcyA9IHNlbmRWYXJpYWJsZVZhbHVlcy50cmFuc2Zvcm0oe1xuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uU3RyaW5nOiBvcGVyYXRpb25TdHJpbmcsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsZWFuTW9kaWZpZWRWYXJpYWJsZXMob3JpZ2luYWxLZXlzLCBtb2RpZmllZFZhcmlhYmxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVWYXJpYWJsZVZhbHVlVHJhbnNmb3JtRXJyb3Iob3JpZ2luYWxLZXlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB2YXJpYWJsZXM7XG4gICAgICAgIH1cbiAgICB9KSgpO1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlc1RvUmVjb3JkKS5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgIGlmICghc2VuZFZhcmlhYmxlVmFsdWVzIHx8XG4gICAgICAgICAgICAoJ25vbmUnIGluIHNlbmRWYXJpYWJsZVZhbHVlcyAmJiBzZW5kVmFyaWFibGVWYWx1ZXMubm9uZSkgfHxcbiAgICAgICAgICAgICgnYWxsJyBpbiBzZW5kVmFyaWFibGVWYWx1ZXMgJiYgIXNlbmRWYXJpYWJsZVZhbHVlcy5hbGwpIHx8XG4gICAgICAgICAgICAoJ2V4Y2VwdE5hbWVzJyBpbiBzZW5kVmFyaWFibGVWYWx1ZXMgJiZcbiAgICAgICAgICAgICAgICBzZW5kVmFyaWFibGVWYWx1ZXMuZXhjZXB0TmFtZXMuaW5jbHVkZXMobmFtZSkpIHx8XG4gICAgICAgICAgICAoJ29ubHlOYW1lcycgaW4gc2VuZFZhcmlhYmxlVmFsdWVzICYmXG4gICAgICAgICAgICAgICAgIXNlbmRWYXJpYWJsZVZhbHVlcy5vbmx5TmFtZXMuaW5jbHVkZXMobmFtZSkpKSB7XG4gICAgICAgICAgICBkZXRhaWxzLnZhcmlhYmxlc0pzb25bbmFtZV0gPSAnJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGV0YWlscy52YXJpYWJsZXNKc29uW25hbWVdID1cbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHZhcmlhYmxlc1RvUmVjb3JkW25hbWVdID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeSh2YXJpYWJsZXNUb1JlY29yZFtuYW1lXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGRldGFpbHMudmFyaWFibGVzSnNvbltuYW1lXSA9IEpTT04uc3RyaW5naWZ5KCdbVW5hYmxlIHRvIGNvbnZlcnQgdmFsdWUgdG8gSlNPTl0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkZXRhaWxzO1xufVxuZXhwb3J0cy5tYWtlVHJhY2VEZXRhaWxzID0gbWFrZVRyYWNlRGV0YWlscztcbmZ1bmN0aW9uIGhhbmRsZVZhcmlhYmxlVmFsdWVUcmFuc2Zvcm1FcnJvcih2YXJpYWJsZU5hbWVzKSB7XG4gICAgY29uc3QgbW9kaWZpZWRWYXJpYWJsZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhcmlhYmxlTmFtZXMuZm9yRWFjaCgobmFtZSkgPT4ge1xuICAgICAgICBtb2RpZmllZFZhcmlhYmxlc1tuYW1lXSA9ICdbUFJFRElDQVRFX0ZVTkNUSU9OX0VSUk9SXSc7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1vZGlmaWVkVmFyaWFibGVzO1xufVxuZnVuY3Rpb24gY2xlYW5Nb2RpZmllZFZhcmlhYmxlcyhvcmlnaW5hbEtleXMsIG1vZGlmaWVkVmFyaWFibGVzKSB7XG4gICAgY29uc3QgY2xlYW5lZFZhcmlhYmxlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgb3JpZ2luYWxLZXlzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgY2xlYW5lZFZhcmlhYmxlc1tuYW1lXSA9IG1vZGlmaWVkVmFyaWFibGVzW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBjbGVhbmVkVmFyaWFibGVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2VEZXRhaWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/plugin/usageReporting/traceDetails.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/preventCsrf.js":
/*!*************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/preventCsrf.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.preventCsrf = exports.recommendedCsrfPreventionRequestHeaders = void 0;\nconst whatwg_mimetype_1 = __importDefault(__webpack_require__(/*! whatwg-mimetype */ \"(rsc)/./node_modules/whatwg-mimetype/lib/mime-type.js\"));\nconst internalErrorClasses_js_1 = __webpack_require__(/*! ./internalErrorClasses.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalErrorClasses.js\");\nexports.recommendedCsrfPreventionRequestHeaders = [\n    'x-apollo-operation-name',\n    'apollo-require-preflight',\n];\nconst NON_PREFLIGHTED_CONTENT_TYPES = [\n    'application/x-www-form-urlencoded',\n    'multipart/form-data',\n    'text/plain',\n];\nfunction preventCsrf(headers, csrfPreventionRequestHeaders) {\n    const contentType = headers.get('content-type');\n    if (contentType !== undefined) {\n        const contentTypeParsed = whatwg_mimetype_1.default.parse(contentType);\n        if (contentTypeParsed === null) {\n            return;\n        }\n        if (!NON_PREFLIGHTED_CONTENT_TYPES.includes(contentTypeParsed.essence)) {\n            return;\n        }\n    }\n    if (csrfPreventionRequestHeaders.some((header) => {\n        const value = headers.get(header);\n        return value !== undefined && value.length > 0;\n    })) {\n        return;\n    }\n    throw new internalErrorClasses_js_1.BadRequestError(`This operation has been blocked as a potential Cross-Site Request Forgery ` +\n        `(CSRF). Please either specify a 'content-type' header (with a type that ` +\n        `is not one of ${NON_PREFLIGHTED_CONTENT_TYPES.join(', ')}) or provide ` +\n        `a non-empty value for one of the following headers: ${csrfPreventionRequestHeaders.join(', ')}\\n`);\n}\nexports.preventCsrf = preventCsrf;\n//# sourceMappingURL=preventCsrf.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcHJldmVudENzcmYuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxtQkFBbUIsR0FBRywrQ0FBK0M7QUFDckUsMENBQTBDLG1CQUFPLENBQUMsOEVBQWlCO0FBQ25FLGtDQUFrQyxtQkFBTyxDQUFDLHVHQUEyQjtBQUNyRSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseUNBQXlDO0FBQ2xFLCtEQUErRCx3Q0FBd0M7QUFDdkc7QUFDQSxtQkFBbUI7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3ByZXZlbnRDc3JmLmpzPzM3Y2EiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnByZXZlbnRDc3JmID0gZXhwb3J0cy5yZWNvbW1lbmRlZENzcmZQcmV2ZW50aW9uUmVxdWVzdEhlYWRlcnMgPSB2b2lkIDA7XG5jb25zdCB3aGF0d2dfbWltZXR5cGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwid2hhdHdnLW1pbWV0eXBlXCIpKTtcbmNvbnN0IGludGVybmFsRXJyb3JDbGFzc2VzX2pzXzEgPSByZXF1aXJlKFwiLi9pbnRlcm5hbEVycm9yQ2xhc3Nlcy5qc1wiKTtcbmV4cG9ydHMucmVjb21tZW5kZWRDc3JmUHJldmVudGlvblJlcXVlc3RIZWFkZXJzID0gW1xuICAgICd4LWFwb2xsby1vcGVyYXRpb24tbmFtZScsXG4gICAgJ2Fwb2xsby1yZXF1aXJlLXByZWZsaWdodCcsXG5dO1xuY29uc3QgTk9OX1BSRUZMSUdIVEVEX0NPTlRFTlRfVFlQRVMgPSBbXG4gICAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgJ211bHRpcGFydC9mb3JtLWRhdGEnLFxuICAgICd0ZXh0L3BsYWluJyxcbl07XG5mdW5jdGlvbiBwcmV2ZW50Q3NyZihoZWFkZXJzLCBjc3JmUHJldmVudGlvblJlcXVlc3RIZWFkZXJzKSB7XG4gICAgY29uc3QgY29udGVudFR5cGUgPSBoZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG4gICAgaWYgKGNvbnRlbnRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgY29udGVudFR5cGVQYXJzZWQgPSB3aGF0d2dfbWltZXR5cGVfMS5kZWZhdWx0LnBhcnNlKGNvbnRlbnRUeXBlKTtcbiAgICAgICAgaWYgKGNvbnRlbnRUeXBlUGFyc2VkID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOT05fUFJFRkxJR0hURURfQ09OVEVOVF9UWVBFUy5pbmNsdWRlcyhjb250ZW50VHlwZVBhcnNlZC5lc3NlbmNlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjc3JmUHJldmVudGlvblJlcXVlc3RIZWFkZXJzLnNvbWUoKGhlYWRlcikgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGhlYWRlcnMuZ2V0KGhlYWRlcik7XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLmxlbmd0aCA+IDA7XG4gICAgfSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgaW50ZXJuYWxFcnJvckNsYXNzZXNfanNfMS5CYWRSZXF1ZXN0RXJyb3IoYFRoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGJsb2NrZWQgYXMgYSBwb3RlbnRpYWwgQ3Jvc3MtU2l0ZSBSZXF1ZXN0IEZvcmdlcnkgYCArXG4gICAgICAgIGAoQ1NSRikuIFBsZWFzZSBlaXRoZXIgc3BlY2lmeSBhICdjb250ZW50LXR5cGUnIGhlYWRlciAod2l0aCBhIHR5cGUgdGhhdCBgICtcbiAgICAgICAgYGlzIG5vdCBvbmUgb2YgJHtOT05fUFJFRkxJR0hURURfQ09OVEVOVF9UWVBFUy5qb2luKCcsICcpfSkgb3IgcHJvdmlkZSBgICtcbiAgICAgICAgYGEgbm9uLWVtcHR5IHZhbHVlIGZvciBvbmUgb2YgdGhlIGZvbGxvd2luZyBoZWFkZXJzOiAke2NzcmZQcmV2ZW50aW9uUmVxdWVzdEhlYWRlcnMuam9pbignLCAnKX1cXG5gKTtcbn1cbmV4cG9ydHMucHJldmVudENzcmYgPSBwcmV2ZW50Q3NyZjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByZXZlbnRDc3JmLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/preventCsrf.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/requestPipeline.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/requestPipeline.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.processGraphQLRequest = exports.APQ_CACHE_PREFIX = void 0;\nconst utils_createhash_1 = __webpack_require__(/*! @apollo/utils.createhash */ \"(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\");\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst schemaInstrumentation_js_1 = __webpack_require__(/*! ./utils/schemaInstrumentation.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/schemaInstrumentation.js\");\nconst internalErrorClasses_js_1 = __webpack_require__(/*! ./internalErrorClasses.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalErrorClasses.js\");\nconst errorNormalize_js_1 = __webpack_require__(/*! ./errorNormalize.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/errorNormalize.js\");\nconst invokeHooks_js_1 = __webpack_require__(/*! ./utils/invokeHooks.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/invokeHooks.js\");\nconst makeGatewayGraphQLRequestContext_js_1 = __webpack_require__(/*! ./utils/makeGatewayGraphQLRequestContext.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/makeGatewayGraphQLRequestContext.js\");\nconst runHttpQuery_js_1 = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/runHttpQuery.js\");\nconst isDefined_js_1 = __webpack_require__(/*! ./utils/isDefined.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/isDefined.js\");\nconst incrementalDeliveryPolyfill_js_1 = __webpack_require__(/*! ./incrementalDeliveryPolyfill.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/incrementalDeliveryPolyfill.js\");\nconst HeaderMap_js_1 = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js\");\nexports.APQ_CACHE_PREFIX = 'apq:';\nfunction computeQueryHash(query) {\n    return (0, utils_createhash_1.createHash)('sha256').update(query).digest('hex');\n}\nfunction isBadUserInputGraphQLError(error) {\n    return (error.nodes?.length === 1 &&\n        error.nodes[0].kind === graphql_1.Kind.VARIABLE_DEFINITION &&\n        (error.message.startsWith(`Variable \"$${error.nodes[0].variable.name.value}\" got invalid value `) ||\n            error.message.startsWith(`Variable \"$${error.nodes[0].variable.name.value}\" of required type `) ||\n            error.message.startsWith(`Variable \"$${error.nodes[0].variable.name.value}\" of non-null type `)));\n}\nasync function processGraphQLRequest(schemaDerivedData, server, internals, requestContext) {\n    const requestListeners = (await Promise.all(internals.plugins.map((p) => p.requestDidStart?.(requestContext)))).filter(isDefined_js_1.isDefined);\n    const request = requestContext.request;\n    let { query, extensions } = request;\n    let queryHash;\n    requestContext.metrics.persistedQueryHit = false;\n    requestContext.metrics.persistedQueryRegister = false;\n    if (extensions?.persistedQuery) {\n        if (!internals.persistedQueries) {\n            return await sendErrorResponse([new internalErrorClasses_js_1.PersistedQueryNotSupportedError()]);\n        }\n        else if (extensions.persistedQuery.version !== 1) {\n            return await sendErrorResponse([\n                new graphql_1.GraphQLError('Unsupported persisted query version', {\n                    extensions: { http: (0, runHttpQuery_js_1.newHTTPGraphQLHead)(400) },\n                }),\n            ]);\n        }\n        queryHash = extensions.persistedQuery.sha256Hash;\n        if (query === undefined) {\n            query = await internals.persistedQueries.cache.get(queryHash);\n            if (query) {\n                requestContext.metrics.persistedQueryHit = true;\n            }\n            else {\n                return await sendErrorResponse([new internalErrorClasses_js_1.PersistedQueryNotFoundError()]);\n            }\n        }\n        else {\n            const computedQueryHash = computeQueryHash(query);\n            if (queryHash !== computedQueryHash) {\n                return await sendErrorResponse([\n                    new graphql_1.GraphQLError('provided sha does not match query', {\n                        extensions: { http: (0, runHttpQuery_js_1.newHTTPGraphQLHead)(400) },\n                    }),\n                ]);\n            }\n            requestContext.metrics.persistedQueryRegister = true;\n        }\n    }\n    else if (query) {\n        queryHash = computeQueryHash(query);\n    }\n    else {\n        return await sendErrorResponse([\n            new internalErrorClasses_js_1.BadRequestError('GraphQL operations must contain a non-empty `query` or a `persistedQuery` extension.'),\n        ]);\n    }\n    requestContext.queryHash = queryHash;\n    requestContext.source = query;\n    await Promise.all(requestListeners.map((l) => l.didResolveSource?.(requestContext)));\n    if (schemaDerivedData.documentStore) {\n        try {\n            requestContext.document = await schemaDerivedData.documentStore.get(schemaDerivedData.documentStoreKeyPrefix + queryHash);\n        }\n        catch (err) {\n            server.logger.warn('An error occurred while attempting to read from the documentStore. ' +\n                (0, errorNormalize_js_1.ensureError)(err).message);\n        }\n    }\n    if (!requestContext.document) {\n        const parsingDidEnd = await (0, invokeHooks_js_1.invokeDidStartHook)(requestListeners, async (l) => l.parsingDidStart?.(requestContext));\n        try {\n            requestContext.document = (0, graphql_1.parse)(query, internals.parseOptions);\n        }\n        catch (syntaxMaybeError) {\n            const error = (0, errorNormalize_js_1.ensureError)(syntaxMaybeError);\n            await parsingDidEnd(error);\n            return await sendErrorResponse([\n                new internalErrorClasses_js_1.SyntaxError((0, errorNormalize_js_1.ensureGraphQLError)(error)),\n            ]);\n        }\n        await parsingDidEnd();\n        if (internals.dangerouslyDisableValidation !== true) {\n            const validationDidEnd = await (0, invokeHooks_js_1.invokeDidStartHook)(requestListeners, async (l) => l.validationDidStart?.(requestContext));\n            let validationErrors = (0, graphql_1.validate)(schemaDerivedData.schema, requestContext.document, [...graphql_1.specifiedRules, ...internals.validationRules]);\n            if (validationErrors.length === 0 && internals.laterValidationRules) {\n                validationErrors = (0, graphql_1.validate)(schemaDerivedData.schema, requestContext.document, internals.laterValidationRules);\n            }\n            if (validationErrors.length === 0) {\n                await validationDidEnd();\n            }\n            else {\n                await validationDidEnd(validationErrors);\n                return await sendErrorResponse(validationErrors.map((error) => new internalErrorClasses_js_1.ValidationError(error)));\n            }\n        }\n        if (schemaDerivedData.documentStore) {\n            Promise.resolve(schemaDerivedData.documentStore.set(schemaDerivedData.documentStoreKeyPrefix + queryHash, requestContext.document)).catch((err) => server.logger.warn('Could not store validated document. ' + err?.message || 0));\n        }\n    }\n    const operation = (0, graphql_1.getOperationAST)(requestContext.document, request.operationName);\n    requestContext.operation = operation || undefined;\n    requestContext.operationName = operation?.name?.value || null;\n    if (request.http?.method === 'GET' &&\n        operation?.operation &&\n        operation.operation !== 'query') {\n        return await sendErrorResponse([\n            new internalErrorClasses_js_1.BadRequestError(`GET requests only support query operations, not ${operation.operation} operations`, {\n                extensions: {\n                    http: { status: 405, headers: new HeaderMap_js_1.HeaderMap([['allow', 'POST']]) },\n                },\n            }),\n        ]);\n    }\n    try {\n        await Promise.all(requestListeners.map((l) => l.didResolveOperation?.(requestContext)));\n    }\n    catch (err) {\n        return await sendErrorResponse([(0, errorNormalize_js_1.ensureGraphQLError)(err)]);\n    }\n    if (requestContext.metrics.persistedQueryRegister &&\n        internals.persistedQueries) {\n        const ttl = internals.persistedQueries?.ttl;\n        Promise.resolve(internals.persistedQueries.cache.set(queryHash, query, ttl !== undefined\n            ? { ttl: internals.persistedQueries?.ttl }\n            : undefined)).catch(server.logger.warn);\n    }\n    const responseFromPlugin = await (0, invokeHooks_js_1.invokeHooksUntilDefinedAndNonNull)(requestListeners, async (l) => await l.responseForOperation?.(requestContext));\n    if (responseFromPlugin !== null) {\n        requestContext.response.body = responseFromPlugin.body;\n        (0, runHttpQuery_js_1.mergeHTTPGraphQLHead)(requestContext.response.http, responseFromPlugin.http);\n    }\n    else {\n        const executionListeners = (await Promise.all(requestListeners.map((l) => l.executionDidStart?.(requestContext)))).filter(isDefined_js_1.isDefined);\n        executionListeners.reverse();\n        if (executionListeners.some((l) => l.willResolveField)) {\n            const invokeWillResolveField = (...args) => (0, invokeHooks_js_1.invokeSyncDidStartHook)(executionListeners, (l) => l.willResolveField?.(...args));\n            Object.defineProperty(requestContext.contextValue, schemaInstrumentation_js_1.symbolExecutionDispatcherWillResolveField, { value: invokeWillResolveField });\n            if (internals.fieldResolver) {\n                Object.defineProperty(requestContext.contextValue, schemaInstrumentation_js_1.symbolUserFieldResolver, {\n                    value: internals.fieldResolver,\n                });\n            }\n            (0, schemaInstrumentation_js_1.enablePluginsForSchemaResolvers)(schemaDerivedData.schema);\n        }\n        try {\n            const fullResult = await execute(requestContext);\n            const result = 'singleResult' in fullResult\n                ? fullResult.singleResult\n                : fullResult.initialResult;\n            if (!requestContext.operation) {\n                if (!result.errors?.length) {\n                    throw new Error('Unexpected error: Apollo Server did not resolve an operation but execute did not return errors');\n                }\n                throw new internalErrorClasses_js_1.OperationResolutionError(result.errors[0]);\n            }\n            const resultErrors = result.errors?.map((e) => {\n                if (isBadUserInputGraphQLError(e) && e.extensions?.code == null) {\n                    return new internalErrorClasses_js_1.UserInputError(e);\n                }\n                return e;\n            });\n            if (resultErrors) {\n                await didEncounterErrors(resultErrors);\n            }\n            const { formattedErrors, httpFromErrors } = resultErrors\n                ? formatErrors(resultErrors)\n                : { formattedErrors: undefined, httpFromErrors: (0, runHttpQuery_js_1.newHTTPGraphQLHead)() };\n            if (internals.status400ForVariableCoercionErrors &&\n                resultErrors?.length &&\n                result.data === undefined &&\n                !httpFromErrors.status) {\n                httpFromErrors.status = 400;\n            }\n            (0, runHttpQuery_js_1.mergeHTTPGraphQLHead)(requestContext.response.http, httpFromErrors);\n            if ('singleResult' in fullResult) {\n                requestContext.response.body = {\n                    kind: 'single',\n                    singleResult: {\n                        ...result,\n                        errors: formattedErrors,\n                    },\n                };\n            }\n            else {\n                requestContext.response.body = {\n                    kind: 'incremental',\n                    initialResult: {\n                        ...fullResult.initialResult,\n                        errors: formattedErrors,\n                    },\n                    subsequentResults: fullResult.subsequentResults,\n                };\n            }\n        }\n        catch (executionMaybeError) {\n            const executionError = (0, errorNormalize_js_1.ensureError)(executionMaybeError);\n            await Promise.all(executionListeners.map((l) => l.executionDidEnd?.(executionError)));\n            return await sendErrorResponse([(0, errorNormalize_js_1.ensureGraphQLError)(executionError)]);\n        }\n        await Promise.all(executionListeners.map((l) => l.executionDidEnd?.()));\n    }\n    await invokeWillSendResponse();\n    if (!requestContext.response.body) {\n        throw Error('got to end of processGraphQLRequest without setting body?');\n    }\n    return requestContext.response;\n    async function execute(requestContext) {\n        const { request, document } = requestContext;\n        if (internals.__testing_incrementalExecutionResults) {\n            return internals.__testing_incrementalExecutionResults;\n        }\n        else if (internals.gatewayExecutor) {\n            const result = await internals.gatewayExecutor((0, makeGatewayGraphQLRequestContext_js_1.makeGatewayGraphQLRequestContext)(requestContext, server, internals));\n            return { singleResult: result };\n        }\n        else {\n            const resultOrResults = await (0, incrementalDeliveryPolyfill_js_1.executeIncrementally)({\n                schema: schemaDerivedData.schema,\n                document,\n                rootValue: typeof internals.rootValue === 'function'\n                    ? internals.rootValue(document)\n                    : internals.rootValue,\n                contextValue: requestContext.contextValue,\n                variableValues: request.variables,\n                operationName: request.operationName,\n                fieldResolver: internals.fieldResolver,\n            });\n            if ('initialResult' in resultOrResults) {\n                return {\n                    initialResult: resultOrResults.initialResult,\n                    subsequentResults: formatErrorsInSubsequentResults(resultOrResults.subsequentResults),\n                };\n            }\n            else {\n                return { singleResult: resultOrResults };\n            }\n        }\n    }\n    async function* formatErrorsInSubsequentResults(results) {\n        for await (const result of results) {\n            const payload = result.incremental\n                ? {\n                    ...result,\n                    incremental: await seriesAsyncMap(result.incremental, async (incrementalResult) => {\n                        const { errors } = incrementalResult;\n                        if (errors) {\n                            await Promise.all(requestListeners.map((l) => l.didEncounterSubsequentErrors?.(requestContext, errors)));\n                            return {\n                                ...incrementalResult,\n                                errors: formatErrors(errors).formattedErrors,\n                            };\n                        }\n                        return incrementalResult;\n                    }),\n                }\n                : result;\n            await Promise.all(requestListeners.map((l) => l.willSendSubsequentPayload?.(requestContext, payload)));\n            yield payload;\n        }\n    }\n    async function invokeWillSendResponse() {\n        await Promise.all(requestListeners.map((l) => l.willSendResponse?.(requestContext)));\n    }\n    async function didEncounterErrors(errors) {\n        requestContext.errors = errors;\n        return await Promise.all(requestListeners.map((l) => l.didEncounterErrors?.(requestContext)));\n    }\n    async function sendErrorResponse(errors) {\n        await didEncounterErrors(errors);\n        const { formattedErrors, httpFromErrors } = formatErrors(errors);\n        requestContext.response.body = {\n            kind: 'single',\n            singleResult: {\n                errors: formattedErrors,\n            },\n        };\n        (0, runHttpQuery_js_1.mergeHTTPGraphQLHead)(requestContext.response.http, httpFromErrors);\n        if (!requestContext.response.http.status) {\n            requestContext.response.http.status = 500;\n        }\n        await invokeWillSendResponse();\n        return requestContext.response;\n    }\n    function formatErrors(errors) {\n        return (0, errorNormalize_js_1.normalizeAndFormatErrors)(errors, {\n            formatError: internals.formatError,\n            includeStacktraceInErrorResponses: internals.includeStacktraceInErrorResponses,\n        });\n    }\n}\nexports.processGraphQLRequest = processGraphQLRequest;\nasync function seriesAsyncMap(ts, fn) {\n    const us = [];\n    for (const t of ts) {\n        const u = await fn(t);\n        us.push(u);\n    }\n    return us;\n}\n//# sourceMappingURL=requestPipeline.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcmVxdWVzdFBpcGVsaW5lLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDZCQUE2QixHQUFHLHdCQUF3QjtBQUN4RCwyQkFBMkIsbUJBQU8sQ0FBQyw2RkFBMEI7QUFDN0Qsa0JBQWtCLG1CQUFPLENBQUMsdURBQVM7QUFDbkMsbUNBQW1DLG1CQUFPLENBQUMscUhBQWtDO0FBQzdFLGtDQUFrQyxtQkFBTyxDQUFDLHVHQUEyQjtBQUNyRSw0QkFBNEIsbUJBQU8sQ0FBQywyRkFBcUI7QUFDekQseUJBQXlCLG1CQUFPLENBQUMsaUdBQXdCO0FBQ3pELDhDQUE4QyxtQkFBTyxDQUFDLDJJQUE2QztBQUNuRywwQkFBMEIsbUJBQU8sQ0FBQyx1RkFBbUI7QUFDckQsdUJBQXVCLG1CQUFPLENBQUMsNkZBQXNCO0FBQ3JELHlDQUF5QyxtQkFBTyxDQUFDLHFIQUFrQztBQUNuRix1QkFBdUIsbUJBQU8sQ0FBQyw2RkFBc0I7QUFDckQsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxtQ0FBbUM7QUFDbkYsbURBQW1ELG1DQUFtQztBQUN0RixtREFBbUQsbUNBQW1DO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvQkFBb0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0RBQXNEO0FBQ3hGLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHNEQUFzRDtBQUM1RixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJPQUEyTyxDQUFHO0FBQzlPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZHQUE2RyxxQkFBcUI7QUFDbEk7QUFDQSw0QkFBNEIseUVBQXlFO0FBQ3JHLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVJQUF1SSwrQkFBK0I7QUFDdEs7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQ0FBa0M7QUFDdEQ7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9CQUFvQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrQ0FBa0M7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy9yZXF1ZXN0UGlwZWxpbmUuanM/ZGM4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucHJvY2Vzc0dyYXBoUUxSZXF1ZXN0ID0gZXhwb3J0cy5BUFFfQ0FDSEVfUFJFRklYID0gdm9pZCAwO1xuY29uc3QgdXRpbHNfY3JlYXRlaGFzaF8xID0gcmVxdWlyZShcIkBhcG9sbG8vdXRpbHMuY3JlYXRlaGFzaFwiKTtcbmNvbnN0IGdyYXBocWxfMSA9IHJlcXVpcmUoXCJncmFwaHFsXCIpO1xuY29uc3Qgc2NoZW1hSW5zdHJ1bWVudGF0aW9uX2pzXzEgPSByZXF1aXJlKFwiLi91dGlscy9zY2hlbWFJbnN0cnVtZW50YXRpb24uanNcIik7XG5jb25zdCBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xID0gcmVxdWlyZShcIi4vaW50ZXJuYWxFcnJvckNsYXNzZXMuanNcIik7XG5jb25zdCBlcnJvck5vcm1hbGl6ZV9qc18xID0gcmVxdWlyZShcIi4vZXJyb3JOb3JtYWxpemUuanNcIik7XG5jb25zdCBpbnZva2VIb29rc19qc18xID0gcmVxdWlyZShcIi4vdXRpbHMvaW52b2tlSG9va3MuanNcIik7XG5jb25zdCBtYWtlR2F0ZXdheUdyYXBoUUxSZXF1ZXN0Q29udGV4dF9qc18xID0gcmVxdWlyZShcIi4vdXRpbHMvbWFrZUdhdGV3YXlHcmFwaFFMUmVxdWVzdENvbnRleHQuanNcIik7XG5jb25zdCBydW5IdHRwUXVlcnlfanNfMSA9IHJlcXVpcmUoXCIuL3J1bkh0dHBRdWVyeS5qc1wiKTtcbmNvbnN0IGlzRGVmaW5lZF9qc18xID0gcmVxdWlyZShcIi4vdXRpbHMvaXNEZWZpbmVkLmpzXCIpO1xuY29uc3QgaW5jcmVtZW50YWxEZWxpdmVyeVBvbHlmaWxsX2pzXzEgPSByZXF1aXJlKFwiLi9pbmNyZW1lbnRhbERlbGl2ZXJ5UG9seWZpbGwuanNcIik7XG5jb25zdCBIZWFkZXJNYXBfanNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL0hlYWRlck1hcC5qc1wiKTtcbmV4cG9ydHMuQVBRX0NBQ0hFX1BSRUZJWCA9ICdhcHE6JztcbmZ1bmN0aW9uIGNvbXB1dGVRdWVyeUhhc2gocXVlcnkpIHtcbiAgICByZXR1cm4gKDAsIHV0aWxzX2NyZWF0ZWhhc2hfMS5jcmVhdGVIYXNoKSgnc2hhMjU2JykudXBkYXRlKHF1ZXJ5KS5kaWdlc3QoJ2hleCcpO1xufVxuZnVuY3Rpb24gaXNCYWRVc2VySW5wdXRHcmFwaFFMRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4gKGVycm9yLm5vZGVzPy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgZXJyb3Iubm9kZXNbMF0ua2luZCA9PT0gZ3JhcGhxbF8xLktpbmQuVkFSSUFCTEVfREVGSU5JVElPTiAmJlxuICAgICAgICAoZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKGBWYXJpYWJsZSBcIiQke2Vycm9yLm5vZGVzWzBdLnZhcmlhYmxlLm5hbWUudmFsdWV9XCIgZ290IGludmFsaWQgdmFsdWUgYCkgfHxcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChgVmFyaWFibGUgXCIkJHtlcnJvci5ub2Rlc1swXS52YXJpYWJsZS5uYW1lLnZhbHVlfVwiIG9mIHJlcXVpcmVkIHR5cGUgYCkgfHxcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChgVmFyaWFibGUgXCIkJHtlcnJvci5ub2Rlc1swXS52YXJpYWJsZS5uYW1lLnZhbHVlfVwiIG9mIG5vbi1udWxsIHR5cGUgYCkpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NHcmFwaFFMUmVxdWVzdChzY2hlbWFEZXJpdmVkRGF0YSwgc2VydmVyLCBpbnRlcm5hbHMsIHJlcXVlc3RDb250ZXh0KSB7XG4gICAgY29uc3QgcmVxdWVzdExpc3RlbmVycyA9IChhd2FpdCBQcm9taXNlLmFsbChpbnRlcm5hbHMucGx1Z2lucy5tYXAoKHApID0+IHAucmVxdWVzdERpZFN0YXJ0Py4ocmVxdWVzdENvbnRleHQpKSkpLmZpbHRlcihpc0RlZmluZWRfanNfMS5pc0RlZmluZWQpO1xuICAgIGNvbnN0IHJlcXVlc3QgPSByZXF1ZXN0Q29udGV4dC5yZXF1ZXN0O1xuICAgIGxldCB7IHF1ZXJ5LCBleHRlbnNpb25zIH0gPSByZXF1ZXN0O1xuICAgIGxldCBxdWVyeUhhc2g7XG4gICAgcmVxdWVzdENvbnRleHQubWV0cmljcy5wZXJzaXN0ZWRRdWVyeUhpdCA9IGZhbHNlO1xuICAgIHJlcXVlc3RDb250ZXh0Lm1ldHJpY3MucGVyc2lzdGVkUXVlcnlSZWdpc3RlciA9IGZhbHNlO1xuICAgIGlmIChleHRlbnNpb25zPy5wZXJzaXN0ZWRRdWVyeSkge1xuICAgICAgICBpZiAoIWludGVybmFscy5wZXJzaXN0ZWRRdWVyaWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VuZEVycm9yUmVzcG9uc2UoW25ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLlBlcnNpc3RlZFF1ZXJ5Tm90U3VwcG9ydGVkRXJyb3IoKV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dGVuc2lvbnMucGVyc2lzdGVkUXVlcnkudmVyc2lvbiAhPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbmRFcnJvclJlc3BvbnNlKFtcbiAgICAgICAgICAgICAgICBuZXcgZ3JhcGhxbF8xLkdyYXBoUUxFcnJvcignVW5zdXBwb3J0ZWQgcGVyc2lzdGVkIHF1ZXJ5IHZlcnNpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHsgaHR0cDogKDAsIHJ1bkh0dHBRdWVyeV9qc18xLm5ld0hUVFBHcmFwaFFMSGVhZCkoNDAwKSB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgcXVlcnlIYXNoID0gZXh0ZW5zaW9ucy5wZXJzaXN0ZWRRdWVyeS5zaGEyNTZIYXNoO1xuICAgICAgICBpZiAocXVlcnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnkgPSBhd2FpdCBpbnRlcm5hbHMucGVyc2lzdGVkUXVlcmllcy5jYWNoZS5nZXQocXVlcnlIYXNoKTtcbiAgICAgICAgICAgIGlmIChxdWVyeSkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0Lm1ldHJpY3MucGVyc2lzdGVkUXVlcnlIaXQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbmRFcnJvclJlc3BvbnNlKFtuZXcgaW50ZXJuYWxFcnJvckNsYXNzZXNfanNfMS5QZXJzaXN0ZWRRdWVyeU5vdEZvdW5kRXJyb3IoKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZWRRdWVyeUhhc2ggPSBjb21wdXRlUXVlcnlIYXNoKHF1ZXJ5KTtcbiAgICAgICAgICAgIGlmIChxdWVyeUhhc2ggIT09IGNvbXB1dGVkUXVlcnlIYXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbmRFcnJvclJlc3BvbnNlKFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGdyYXBocWxfMS5HcmFwaFFMRXJyb3IoJ3Byb3ZpZGVkIHNoYSBkb2VzIG5vdCBtYXRjaCBxdWVyeScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHsgaHR0cDogKDAsIHJ1bkh0dHBRdWVyeV9qc18xLm5ld0hUVFBHcmFwaFFMSGVhZCkoNDAwKSB9LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0Lm1ldHJpY3MucGVyc2lzdGVkUXVlcnlSZWdpc3RlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocXVlcnkpIHtcbiAgICAgICAgcXVlcnlIYXNoID0gY29tcHV0ZVF1ZXJ5SGFzaChxdWVyeSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgc2VuZEVycm9yUmVzcG9uc2UoW1xuICAgICAgICAgICAgbmV3IGludGVybmFsRXJyb3JDbGFzc2VzX2pzXzEuQmFkUmVxdWVzdEVycm9yKCdHcmFwaFFMIG9wZXJhdGlvbnMgbXVzdCBjb250YWluIGEgbm9uLWVtcHR5IGBxdWVyeWAgb3IgYSBgcGVyc2lzdGVkUXVlcnlgIGV4dGVuc2lvbi4nKSxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIHJlcXVlc3RDb250ZXh0LnF1ZXJ5SGFzaCA9IHF1ZXJ5SGFzaDtcbiAgICByZXF1ZXN0Q29udGV4dC5zb3VyY2UgPSBxdWVyeTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0TGlzdGVuZXJzLm1hcCgobCkgPT4gbC5kaWRSZXNvbHZlU291cmNlPy4ocmVxdWVzdENvbnRleHQpKSk7XG4gICAgaWYgKHNjaGVtYURlcml2ZWREYXRhLmRvY3VtZW50U3RvcmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LmRvY3VtZW50ID0gYXdhaXQgc2NoZW1hRGVyaXZlZERhdGEuZG9jdW1lbnRTdG9yZS5nZXQoc2NoZW1hRGVyaXZlZERhdGEuZG9jdW1lbnRTdG9yZUtleVByZWZpeCArIHF1ZXJ5SGFzaCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2VydmVyLmxvZ2dlci53YXJuKCdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBhdHRlbXB0aW5nIHRvIHJlYWQgZnJvbSB0aGUgZG9jdW1lbnRTdG9yZS4gJyArXG4gICAgICAgICAgICAgICAgKDAsIGVycm9yTm9ybWFsaXplX2pzXzEuZW5zdXJlRXJyb3IpKGVycikubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFyZXF1ZXN0Q29udGV4dC5kb2N1bWVudCkge1xuICAgICAgICBjb25zdCBwYXJzaW5nRGlkRW5kID0gYXdhaXQgKDAsIGludm9rZUhvb2tzX2pzXzEuaW52b2tlRGlkU3RhcnRIb29rKShyZXF1ZXN0TGlzdGVuZXJzLCBhc3luYyAobCkgPT4gbC5wYXJzaW5nRGlkU3RhcnQ/LihyZXF1ZXN0Q29udGV4dCkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVxdWVzdENvbnRleHQuZG9jdW1lbnQgPSAoMCwgZ3JhcGhxbF8xLnBhcnNlKShxdWVyeSwgaW50ZXJuYWxzLnBhcnNlT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHN5bnRheE1heWJlRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gKDAsIGVycm9yTm9ybWFsaXplX2pzXzEuZW5zdXJlRXJyb3IpKHN5bnRheE1heWJlRXJyb3IpO1xuICAgICAgICAgICAgYXdhaXQgcGFyc2luZ0RpZEVuZChlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VuZEVycm9yUmVzcG9uc2UoW1xuICAgICAgICAgICAgICAgIG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLlN5bnRheEVycm9yKCgwLCBlcnJvck5vcm1hbGl6ZV9qc18xLmVuc3VyZUdyYXBoUUxFcnJvcikoZXJyb3IpKSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHBhcnNpbmdEaWRFbmQoKTtcbiAgICAgICAgaWYgKGludGVybmFscy5kYW5nZXJvdXNseURpc2FibGVWYWxpZGF0aW9uICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uRGlkRW5kID0gYXdhaXQgKDAsIGludm9rZUhvb2tzX2pzXzEuaW52b2tlRGlkU3RhcnRIb29rKShyZXF1ZXN0TGlzdGVuZXJzLCBhc3luYyAobCkgPT4gbC52YWxpZGF0aW9uRGlkU3RhcnQ/LihyZXF1ZXN0Q29udGV4dCkpO1xuICAgICAgICAgICAgbGV0IHZhbGlkYXRpb25FcnJvcnMgPSAoMCwgZ3JhcGhxbF8xLnZhbGlkYXRlKShzY2hlbWFEZXJpdmVkRGF0YS5zY2hlbWEsIHJlcXVlc3RDb250ZXh0LmRvY3VtZW50LCBbLi4uZ3JhcGhxbF8xLnNwZWNpZmllZFJ1bGVzLCAuLi5pbnRlcm5hbHMudmFsaWRhdGlvblJ1bGVzXSk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPT09IDAgJiYgaW50ZXJuYWxzLmxhdGVyVmFsaWRhdGlvblJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9ycyA9ICgwLCBncmFwaHFsXzEudmFsaWRhdGUpKHNjaGVtYURlcml2ZWREYXRhLnNjaGVtYSwgcmVxdWVzdENvbnRleHQuZG9jdW1lbnQsIGludGVybmFscy5sYXRlclZhbGlkYXRpb25SdWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB2YWxpZGF0aW9uRGlkRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB2YWxpZGF0aW9uRGlkRW5kKHZhbGlkYXRpb25FcnJvcnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZW5kRXJyb3JSZXNwb25zZSh2YWxpZGF0aW9uRXJyb3JzLm1hcCgoZXJyb3IpID0+IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLlZhbGlkYXRpb25FcnJvcihlcnJvcikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hRGVyaXZlZERhdGEuZG9jdW1lbnRTdG9yZSkge1xuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHNjaGVtYURlcml2ZWREYXRhLmRvY3VtZW50U3RvcmUuc2V0KHNjaGVtYURlcml2ZWREYXRhLmRvY3VtZW50U3RvcmVLZXlQcmVmaXggKyBxdWVyeUhhc2gsIHJlcXVlc3RDb250ZXh0LmRvY3VtZW50KSkuY2F0Y2goKGVycikgPT4gc2VydmVyLmxvZ2dlci53YXJuKCdDb3VsZCBub3Qgc3RvcmUgdmFsaWRhdGVkIGRvY3VtZW50LiAnICsgZXJyPy5tZXNzYWdlIHx8IGVycikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG9wZXJhdGlvbiA9ICgwLCBncmFwaHFsXzEuZ2V0T3BlcmF0aW9uQVNUKShyZXF1ZXN0Q29udGV4dC5kb2N1bWVudCwgcmVxdWVzdC5vcGVyYXRpb25OYW1lKTtcbiAgICByZXF1ZXN0Q29udGV4dC5vcGVyYXRpb24gPSBvcGVyYXRpb24gfHwgdW5kZWZpbmVkO1xuICAgIHJlcXVlc3RDb250ZXh0Lm9wZXJhdGlvbk5hbWUgPSBvcGVyYXRpb24/Lm5hbWU/LnZhbHVlIHx8IG51bGw7XG4gICAgaWYgKHJlcXVlc3QuaHR0cD8ubWV0aG9kID09PSAnR0VUJyAmJlxuICAgICAgICBvcGVyYXRpb24/Lm9wZXJhdGlvbiAmJlxuICAgICAgICBvcGVyYXRpb24ub3BlcmF0aW9uICE9PSAncXVlcnknKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBzZW5kRXJyb3JSZXNwb25zZShbXG4gICAgICAgICAgICBuZXcgaW50ZXJuYWxFcnJvckNsYXNzZXNfanNfMS5CYWRSZXF1ZXN0RXJyb3IoYEdFVCByZXF1ZXN0cyBvbmx5IHN1cHBvcnQgcXVlcnkgb3BlcmF0aW9ucywgbm90ICR7b3BlcmF0aW9uLm9wZXJhdGlvbn0gb3BlcmF0aW9uc2AsIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGh0dHA6IHsgc3RhdHVzOiA0MDUsIGhlYWRlcnM6IG5ldyBIZWFkZXJNYXBfanNfMS5IZWFkZXJNYXAoW1snYWxsb3cnLCAnUE9TVCddXSkgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0TGlzdGVuZXJzLm1hcCgobCkgPT4gbC5kaWRSZXNvbHZlT3BlcmF0aW9uPy4ocmVxdWVzdENvbnRleHQpKSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbmRFcnJvclJlc3BvbnNlKFsoMCwgZXJyb3JOb3JtYWxpemVfanNfMS5lbnN1cmVHcmFwaFFMRXJyb3IpKGVycildKTtcbiAgICB9XG4gICAgaWYgKHJlcXVlc3RDb250ZXh0Lm1ldHJpY3MucGVyc2lzdGVkUXVlcnlSZWdpc3RlciAmJlxuICAgICAgICBpbnRlcm5hbHMucGVyc2lzdGVkUXVlcmllcykge1xuICAgICAgICBjb25zdCB0dGwgPSBpbnRlcm5hbHMucGVyc2lzdGVkUXVlcmllcz8udHRsO1xuICAgICAgICBQcm9taXNlLnJlc29sdmUoaW50ZXJuYWxzLnBlcnNpc3RlZFF1ZXJpZXMuY2FjaGUuc2V0KHF1ZXJ5SGFzaCwgcXVlcnksIHR0bCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHsgdHRsOiBpbnRlcm5hbHMucGVyc2lzdGVkUXVlcmllcz8udHRsIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkKSkuY2F0Y2goc2VydmVyLmxvZ2dlci53YXJuKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2VGcm9tUGx1Z2luID0gYXdhaXQgKDAsIGludm9rZUhvb2tzX2pzXzEuaW52b2tlSG9va3NVbnRpbERlZmluZWRBbmROb25OdWxsKShyZXF1ZXN0TGlzdGVuZXJzLCBhc3luYyAobCkgPT4gYXdhaXQgbC5yZXNwb25zZUZvck9wZXJhdGlvbj8uKHJlcXVlc3RDb250ZXh0KSk7XG4gICAgaWYgKHJlc3BvbnNlRnJvbVBsdWdpbiAhPT0gbnVsbCkge1xuICAgICAgICByZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5ib2R5ID0gcmVzcG9uc2VGcm9tUGx1Z2luLmJvZHk7XG4gICAgICAgICgwLCBydW5IdHRwUXVlcnlfanNfMS5tZXJnZUhUVFBHcmFwaFFMSGVhZCkocmVxdWVzdENvbnRleHQucmVzcG9uc2UuaHR0cCwgcmVzcG9uc2VGcm9tUGx1Z2luLmh0dHApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uTGlzdGVuZXJzID0gKGF3YWl0IFByb21pc2UuYWxsKHJlcXVlc3RMaXN0ZW5lcnMubWFwKChsKSA9PiBsLmV4ZWN1dGlvbkRpZFN0YXJ0Py4ocmVxdWVzdENvbnRleHQpKSkpLmZpbHRlcihpc0RlZmluZWRfanNfMS5pc0RlZmluZWQpO1xuICAgICAgICBleGVjdXRpb25MaXN0ZW5lcnMucmV2ZXJzZSgpO1xuICAgICAgICBpZiAoZXhlY3V0aW9uTGlzdGVuZXJzLnNvbWUoKGwpID0+IGwud2lsbFJlc29sdmVGaWVsZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGludm9rZVdpbGxSZXNvbHZlRmllbGQgPSAoLi4uYXJncykgPT4gKDAsIGludm9rZUhvb2tzX2pzXzEuaW52b2tlU3luY0RpZFN0YXJ0SG9vaykoZXhlY3V0aW9uTGlzdGVuZXJzLCAobCkgPT4gbC53aWxsUmVzb2x2ZUZpZWxkPy4oLi4uYXJncykpO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVlc3RDb250ZXh0LmNvbnRleHRWYWx1ZSwgc2NoZW1hSW5zdHJ1bWVudGF0aW9uX2pzXzEuc3ltYm9sRXhlY3V0aW9uRGlzcGF0Y2hlcldpbGxSZXNvbHZlRmllbGQsIHsgdmFsdWU6IGludm9rZVdpbGxSZXNvbHZlRmllbGQgfSk7XG4gICAgICAgICAgICBpZiAoaW50ZXJuYWxzLmZpZWxkUmVzb2x2ZXIpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVxdWVzdENvbnRleHQuY29udGV4dFZhbHVlLCBzY2hlbWFJbnN0cnVtZW50YXRpb25fanNfMS5zeW1ib2xVc2VyRmllbGRSZXNvbHZlciwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaW50ZXJuYWxzLmZpZWxkUmVzb2x2ZXIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoMCwgc2NoZW1hSW5zdHJ1bWVudGF0aW9uX2pzXzEuZW5hYmxlUGx1Z2luc0ZvclNjaGVtYVJlc29sdmVycykoc2NoZW1hRGVyaXZlZERhdGEuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZnVsbFJlc3VsdCA9IGF3YWl0IGV4ZWN1dGUocmVxdWVzdENvbnRleHQpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gJ3NpbmdsZVJlc3VsdCcgaW4gZnVsbFJlc3VsdFxuICAgICAgICAgICAgICAgID8gZnVsbFJlc3VsdC5zaW5nbGVSZXN1bHRcbiAgICAgICAgICAgICAgICA6IGZ1bGxSZXN1bHQuaW5pdGlhbFJlc3VsdDtcbiAgICAgICAgICAgIGlmICghcmVxdWVzdENvbnRleHQub3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuZXJyb3JzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGVycm9yOiBBcG9sbG8gU2VydmVyIGRpZCBub3QgcmVzb2x2ZSBhbiBvcGVyYXRpb24gYnV0IGV4ZWN1dGUgZGlkIG5vdCByZXR1cm4gZXJyb3JzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLk9wZXJhdGlvblJlc29sdXRpb25FcnJvcihyZXN1bHQuZXJyb3JzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdEVycm9ycyA9IHJlc3VsdC5lcnJvcnM/Lm1hcCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc0JhZFVzZXJJbnB1dEdyYXBoUUxFcnJvcihlKSAmJiBlLmV4dGVuc2lvbnM/LmNvZGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGludGVybmFsRXJyb3JDbGFzc2VzX2pzXzEuVXNlcklucHV0RXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0RXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGlkRW5jb3VudGVyRXJyb3JzKHJlc3VsdEVycm9ycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGZvcm1hdHRlZEVycm9ycywgaHR0cEZyb21FcnJvcnMgfSA9IHJlc3VsdEVycm9yc1xuICAgICAgICAgICAgICAgID8gZm9ybWF0RXJyb3JzKHJlc3VsdEVycm9ycylcbiAgICAgICAgICAgICAgICA6IHsgZm9ybWF0dGVkRXJyb3JzOiB1bmRlZmluZWQsIGh0dHBGcm9tRXJyb3JzOiAoMCwgcnVuSHR0cFF1ZXJ5X2pzXzEubmV3SFRUUEdyYXBoUUxIZWFkKSgpIH07XG4gICAgICAgICAgICBpZiAoaW50ZXJuYWxzLnN0YXR1czQwMEZvclZhcmlhYmxlQ29lcmNpb25FcnJvcnMgJiZcbiAgICAgICAgICAgICAgICByZXN1bHRFcnJvcnM/Lmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAhaHR0cEZyb21FcnJvcnMuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgaHR0cEZyb21FcnJvcnMuc3RhdHVzID0gNDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKDAsIHJ1bkh0dHBRdWVyeV9qc18xLm1lcmdlSFRUUEdyYXBoUUxIZWFkKShyZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5odHRwLCBodHRwRnJvbUVycm9ycyk7XG4gICAgICAgICAgICBpZiAoJ3NpbmdsZVJlc3VsdCcgaW4gZnVsbFJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdzaW5nbGUnLFxuICAgICAgICAgICAgICAgICAgICBzaW5nbGVSZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogZm9ybWF0dGVkRXJyb3JzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBraW5kOiAnaW5jcmVtZW50YWwnLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsUmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5mdWxsUmVzdWx0LmluaXRpYWxSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IGZvcm1hdHRlZEVycm9ycyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3Vic2VxdWVudFJlc3VsdHM6IGZ1bGxSZXN1bHQuc3Vic2VxdWVudFJlc3VsdHMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXhlY3V0aW9uTWF5YmVFcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXhlY3V0aW9uRXJyb3IgPSAoMCwgZXJyb3JOb3JtYWxpemVfanNfMS5lbnN1cmVFcnJvcikoZXhlY3V0aW9uTWF5YmVFcnJvcik7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChleGVjdXRpb25MaXN0ZW5lcnMubWFwKChsKSA9PiBsLmV4ZWN1dGlvbkRpZEVuZD8uKGV4ZWN1dGlvbkVycm9yKSkpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbmRFcnJvclJlc3BvbnNlKFsoMCwgZXJyb3JOb3JtYWxpemVfanNfMS5lbnN1cmVHcmFwaFFMRXJyb3IpKGV4ZWN1dGlvbkVycm9yKV0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGV4ZWN1dGlvbkxpc3RlbmVycy5tYXAoKGwpID0+IGwuZXhlY3V0aW9uRGlkRW5kPy4oKSkpO1xuICAgIH1cbiAgICBhd2FpdCBpbnZva2VXaWxsU2VuZFJlc3BvbnNlKCk7XG4gICAgaWYgKCFyZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5ib2R5KSB7XG4gICAgICAgIHRocm93IEVycm9yKCdnb3QgdG8gZW5kIG9mIHByb2Nlc3NHcmFwaFFMUmVxdWVzdCB3aXRob3V0IHNldHRpbmcgYm9keT8nKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcXVlc3RDb250ZXh0LnJlc3BvbnNlO1xuICAgIGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGUocmVxdWVzdENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgeyByZXF1ZXN0LCBkb2N1bWVudCB9ID0gcmVxdWVzdENvbnRleHQ7XG4gICAgICAgIGlmIChpbnRlcm5hbHMuX190ZXN0aW5nX2luY3JlbWVudGFsRXhlY3V0aW9uUmVzdWx0cykge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFscy5fX3Rlc3RpbmdfaW5jcmVtZW50YWxFeGVjdXRpb25SZXN1bHRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGludGVybmFscy5nYXRld2F5RXhlY3V0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGludGVybmFscy5nYXRld2F5RXhlY3V0b3IoKDAsIG1ha2VHYXRld2F5R3JhcGhRTFJlcXVlc3RDb250ZXh0X2pzXzEubWFrZUdhdGV3YXlHcmFwaFFMUmVxdWVzdENvbnRleHQpKHJlcXVlc3RDb250ZXh0LCBzZXJ2ZXIsIGludGVybmFscykpO1xuICAgICAgICAgICAgcmV0dXJuIHsgc2luZ2xlUmVzdWx0OiByZXN1bHQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdE9yUmVzdWx0cyA9IGF3YWl0ICgwLCBpbmNyZW1lbnRhbERlbGl2ZXJ5UG9seWZpbGxfanNfMS5leGVjdXRlSW5jcmVtZW50YWxseSkoe1xuICAgICAgICAgICAgICAgIHNjaGVtYTogc2NoZW1hRGVyaXZlZERhdGEuc2NoZW1hLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LFxuICAgICAgICAgICAgICAgIHJvb3RWYWx1ZTogdHlwZW9mIGludGVybmFscy5yb290VmFsdWUgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPyBpbnRlcm5hbHMucm9vdFZhbHVlKGRvY3VtZW50KVxuICAgICAgICAgICAgICAgICAgICA6IGludGVybmFscy5yb290VmFsdWUsXG4gICAgICAgICAgICAgICAgY29udGV4dFZhbHVlOiByZXF1ZXN0Q29udGV4dC5jb250ZXh0VmFsdWUsXG4gICAgICAgICAgICAgICAgdmFyaWFibGVWYWx1ZXM6IHJlcXVlc3QudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbk5hbWU6IHJlcXVlc3Qub3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICBmaWVsZFJlc29sdmVyOiBpbnRlcm5hbHMuZmllbGRSZXNvbHZlcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCdpbml0aWFsUmVzdWx0JyBpbiByZXN1bHRPclJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsUmVzdWx0OiByZXN1bHRPclJlc3VsdHMuaW5pdGlhbFJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgc3Vic2VxdWVudFJlc3VsdHM6IGZvcm1hdEVycm9yc0luU3Vic2VxdWVudFJlc3VsdHMocmVzdWx0T3JSZXN1bHRzLnN1YnNlcXVlbnRSZXN1bHRzKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc2luZ2xlUmVzdWx0OiByZXN1bHRPclJlc3VsdHMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiogZm9ybWF0RXJyb3JzSW5TdWJzZXF1ZW50UmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSByZXN1bHQuaW5jcmVtZW50YWxcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRhbDogYXdhaXQgc2VyaWVzQXN5bmNNYXAocmVzdWx0LmluY3JlbWVudGFsLCBhc3luYyAoaW5jcmVtZW50YWxSZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZXJyb3JzIH0gPSBpbmNyZW1lbnRhbFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0TGlzdGVuZXJzLm1hcCgobCkgPT4gbC5kaWRFbmNvdW50ZXJTdWJzZXF1ZW50RXJyb3JzPy4ocmVxdWVzdENvbnRleHQsIGVycm9ycykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5pbmNyZW1lbnRhbFJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzOiBmb3JtYXRFcnJvcnMoZXJyb3JzKS5mb3JtYXR0ZWRFcnJvcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmNyZW1lbnRhbFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogcmVzdWx0O1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVxdWVzdExpc3RlbmVycy5tYXAoKGwpID0+IGwud2lsbFNlbmRTdWJzZXF1ZW50UGF5bG9hZD8uKHJlcXVlc3RDb250ZXh0LCBwYXlsb2FkKSkpO1xuICAgICAgICAgICAgeWllbGQgcGF5bG9hZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2VXaWxsU2VuZFJlc3BvbnNlKCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0TGlzdGVuZXJzLm1hcCgobCkgPT4gbC53aWxsU2VuZFJlc3BvbnNlPy4ocmVxdWVzdENvbnRleHQpKSk7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGRpZEVuY291bnRlckVycm9ycyhlcnJvcnMpIHtcbiAgICAgICAgcmVxdWVzdENvbnRleHQuZXJyb3JzID0gZXJyb3JzO1xuICAgICAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwocmVxdWVzdExpc3RlbmVycy5tYXAoKGwpID0+IGwuZGlkRW5jb3VudGVyRXJyb3JzPy4ocmVxdWVzdENvbnRleHQpKSk7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIHNlbmRFcnJvclJlc3BvbnNlKGVycm9ycykge1xuICAgICAgICBhd2FpdCBkaWRFbmNvdW50ZXJFcnJvcnMoZXJyb3JzKTtcbiAgICAgICAgY29uc3QgeyBmb3JtYXR0ZWRFcnJvcnMsIGh0dHBGcm9tRXJyb3JzIH0gPSBmb3JtYXRFcnJvcnMoZXJyb3JzKTtcbiAgICAgICAgcmVxdWVzdENvbnRleHQucmVzcG9uc2UuYm9keSA9IHtcbiAgICAgICAgICAgIGtpbmQ6ICdzaW5nbGUnLFxuICAgICAgICAgICAgc2luZ2xlUmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgZXJyb3JzOiBmb3JtYXR0ZWRFcnJvcnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICAoMCwgcnVuSHR0cFF1ZXJ5X2pzXzEubWVyZ2VIVFRQR3JhcGhRTEhlYWQpKHJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmh0dHAsIGh0dHBGcm9tRXJyb3JzKTtcbiAgICAgICAgaWYgKCFyZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5odHRwLnN0YXR1cykge1xuICAgICAgICAgICAgcmVxdWVzdENvbnRleHQucmVzcG9uc2UuaHR0cC5zdGF0dXMgPSA1MDA7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgaW52b2tlV2lsbFNlbmRSZXNwb25zZSgpO1xuICAgICAgICByZXR1cm4gcmVxdWVzdENvbnRleHQucmVzcG9uc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvcm1hdEVycm9ycyhlcnJvcnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBlcnJvck5vcm1hbGl6ZV9qc18xLm5vcm1hbGl6ZUFuZEZvcm1hdEVycm9ycykoZXJyb3JzLCB7XG4gICAgICAgICAgICBmb3JtYXRFcnJvcjogaW50ZXJuYWxzLmZvcm1hdEVycm9yLFxuICAgICAgICAgICAgaW5jbHVkZVN0YWNrdHJhY2VJbkVycm9yUmVzcG9uc2VzOiBpbnRlcm5hbHMuaW5jbHVkZVN0YWNrdHJhY2VJbkVycm9yUmVzcG9uc2VzLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLnByb2Nlc3NHcmFwaFFMUmVxdWVzdCA9IHByb2Nlc3NHcmFwaFFMUmVxdWVzdDtcbmFzeW5jIGZ1bmN0aW9uIHNlcmllc0FzeW5jTWFwKHRzLCBmbikge1xuICAgIGNvbnN0IHVzID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIHRzKSB7XG4gICAgICAgIGNvbnN0IHUgPSBhd2FpdCBmbih0KTtcbiAgICAgICAgdXMucHVzaCh1KTtcbiAgICB9XG4gICAgcmV0dXJuIHVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVxdWVzdFBpcGVsaW5lLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/requestPipeline.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/runHttpQuery.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/runHttpQuery.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.mergeHTTPGraphQLHead = exports.newHTTPGraphQLHead = exports.prettyJSONStringify = exports.runHttpQuery = void 0;\nconst ApolloServer_js_1 = __webpack_require__(/*! ./ApolloServer.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/ApolloServer.js\");\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst internalErrorClasses_js_1 = __webpack_require__(/*! ./internalErrorClasses.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/internalErrorClasses.js\");\nconst negotiator_1 = __importDefault(__webpack_require__(/*! negotiator */ \"(rsc)/./node_modules/negotiator/index.js\"));\nconst HeaderMap_js_1 = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js\");\nfunction fieldIfString(o, fieldName) {\n    const value = o[fieldName];\n    if (typeof value === 'string') {\n        return value;\n    }\n    return undefined;\n}\nfunction searchParamIfSpecifiedOnce(searchParams, paramName) {\n    const values = searchParams.getAll(paramName);\n    switch (values.length) {\n        case 0:\n            return undefined;\n        case 1:\n            return values[0];\n        default:\n            throw new internalErrorClasses_js_1.BadRequestError(`The '${paramName}' search parameter may only be specified once.`);\n    }\n}\nfunction jsonParsedSearchParamIfSpecifiedOnce(searchParams, fieldName) {\n    const value = searchParamIfSpecifiedOnce(searchParams, fieldName);\n    if (value === undefined) {\n        return undefined;\n    }\n    let hopefullyRecord;\n    try {\n        hopefullyRecord = JSON.parse(value);\n    }\n    catch {\n        throw new internalErrorClasses_js_1.BadRequestError(`The ${fieldName} search parameter contains invalid JSON.`);\n    }\n    if (!isStringRecord(hopefullyRecord)) {\n        throw new internalErrorClasses_js_1.BadRequestError(`The ${fieldName} search parameter should contain a JSON-encoded object.`);\n    }\n    return hopefullyRecord;\n}\nfunction fieldIfRecord(o, fieldName) {\n    const value = o[fieldName];\n    if (isStringRecord(value)) {\n        return value;\n    }\n    return undefined;\n}\nfunction isStringRecord(o) {\n    return (!!o && typeof o === 'object' && !Buffer.isBuffer(o) && !Array.isArray(o));\n}\nfunction isNonEmptyStringRecord(o) {\n    return isStringRecord(o) && Object.keys(o).length > 0;\n}\nfunction ensureQueryIsStringOrMissing(query) {\n    if (!query || typeof query === 'string') {\n        return;\n    }\n    if (query.kind === graphql_1.Kind.DOCUMENT) {\n        throw new internalErrorClasses_js_1.BadRequestError(\"GraphQL queries must be strings. It looks like you're sending the \" +\n            'internal graphql-js representation of a parsed query in your ' +\n            'request instead of a request in the GraphQL query language. You ' +\n            'can convert an AST to a string using the `print` function from ' +\n            '`graphql`, or use a client like `apollo-client` which converts ' +\n            'the internal representation to a string for you.');\n    }\n    else {\n        throw new internalErrorClasses_js_1.BadRequestError('GraphQL queries must be strings.');\n    }\n}\nasync function runHttpQuery({ server, httpRequest, contextValue, schemaDerivedData, internals, sharedResponseHTTPGraphQLHead, }) {\n    let graphQLRequest;\n    switch (httpRequest.method) {\n        case 'POST': {\n            if (!isNonEmptyStringRecord(httpRequest.body)) {\n                throw new internalErrorClasses_js_1.BadRequestError('POST body missing, invalid Content-Type, or JSON object has no keys.');\n            }\n            ensureQueryIsStringOrMissing(httpRequest.body.query);\n            if (typeof httpRequest.body.variables === 'string') {\n                throw new internalErrorClasses_js_1.BadRequestError('`variables` in a POST body should be provided as an object, not a recursively JSON-encoded string.');\n            }\n            if (typeof httpRequest.body.extensions === 'string') {\n                throw new internalErrorClasses_js_1.BadRequestError('`extensions` in a POST body should be provided as an object, not a recursively JSON-encoded string.');\n            }\n            if ('extensions' in httpRequest.body &&\n                httpRequest.body.extensions !== null &&\n                !isStringRecord(httpRequest.body.extensions)) {\n                throw new internalErrorClasses_js_1.BadRequestError('`extensions` in a POST body must be an object if provided.');\n            }\n            if ('variables' in httpRequest.body &&\n                httpRequest.body.variables !== null &&\n                !isStringRecord(httpRequest.body.variables)) {\n                throw new internalErrorClasses_js_1.BadRequestError('`variables` in a POST body must be an object if provided.');\n            }\n            if ('operationName' in httpRequest.body &&\n                httpRequest.body.operationName !== null &&\n                typeof httpRequest.body.operationName !== 'string') {\n                throw new internalErrorClasses_js_1.BadRequestError('`operationName` in a POST body must be a string if provided.');\n            }\n            graphQLRequest = {\n                query: fieldIfString(httpRequest.body, 'query'),\n                operationName: fieldIfString(httpRequest.body, 'operationName'),\n                variables: fieldIfRecord(httpRequest.body, 'variables'),\n                extensions: fieldIfRecord(httpRequest.body, 'extensions'),\n                http: httpRequest,\n            };\n            break;\n        }\n        case 'GET': {\n            const searchParams = new URLSearchParams(httpRequest.search);\n            graphQLRequest = {\n                query: searchParamIfSpecifiedOnce(searchParams, 'query'),\n                operationName: searchParamIfSpecifiedOnce(searchParams, 'operationName'),\n                variables: jsonParsedSearchParamIfSpecifiedOnce(searchParams, 'variables'),\n                extensions: jsonParsedSearchParamIfSpecifiedOnce(searchParams, 'extensions'),\n                http: httpRequest,\n            };\n            break;\n        }\n        default:\n            throw new internalErrorClasses_js_1.BadRequestError('Apollo Server supports only GET/POST requests.', {\n                extensions: {\n                    http: {\n                        status: 405,\n                        headers: new HeaderMap_js_1.HeaderMap([['allow', 'GET, POST']]),\n                    },\n                },\n            });\n    }\n    const graphQLResponse = await (0, ApolloServer_js_1.internalExecuteOperation)({\n        server,\n        graphQLRequest,\n        internals,\n        schemaDerivedData,\n        sharedResponseHTTPGraphQLHead,\n    }, { contextValue });\n    if (graphQLResponse.body.kind === 'single') {\n        if (!graphQLResponse.http.headers.get('content-type')) {\n            const contentType = (0, ApolloServer_js_1.chooseContentTypeForSingleResultResponse)(httpRequest);\n            if (contentType === null) {\n                throw new internalErrorClasses_js_1.BadRequestError(`An 'accept' header was provided for this request which does not accept ` +\n                    `${ApolloServer_js_1.MEDIA_TYPES.APPLICATION_JSON} or ${ApolloServer_js_1.MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON}`, { extensions: { http: { status: 406 } } });\n            }\n            graphQLResponse.http.headers.set('content-type', contentType);\n        }\n        return {\n            ...graphQLResponse.http,\n            body: {\n                kind: 'complete',\n                string: await internals.stringifyResult(orderExecutionResultFields(graphQLResponse.body.singleResult)),\n            },\n        };\n    }\n    const acceptHeader = httpRequest.headers.get('accept');\n    if (!(acceptHeader &&\n        new negotiator_1.default({\n            headers: { accept: httpRequest.headers.get('accept') },\n        }).mediaType([\n            ApolloServer_js_1.MEDIA_TYPES.MULTIPART_MIXED_NO_DEFER_SPEC,\n            ApolloServer_js_1.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL,\n        ]) === ApolloServer_js_1.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL)) {\n        throw new internalErrorClasses_js_1.BadRequestError('Apollo server received an operation that uses incremental delivery ' +\n            '(@defer or @stream), but the client does not accept multipart/mixed ' +\n            'HTTP responses. To enable incremental delivery support, add the HTTP ' +\n            \"header 'Accept: multipart/mixed; deferSpec=20220824'.\", { extensions: { http: { status: 406 } } });\n    }\n    graphQLResponse.http.headers.set('content-type', 'multipart/mixed; boundary=\"-\"; deferSpec=20220824');\n    return {\n        ...graphQLResponse.http,\n        body: {\n            kind: 'chunked',\n            asyncIterator: writeMultipartBody(graphQLResponse.body.initialResult, graphQLResponse.body.subsequentResults),\n        },\n    };\n}\nexports.runHttpQuery = runHttpQuery;\nasync function* writeMultipartBody(initialResult, subsequentResults) {\n    yield `\\r\\n---\\r\\ncontent-type: application/json; charset=utf-8\\r\\n\\r\\n${JSON.stringify(orderInitialIncrementalExecutionResultFields(initialResult))}\\r\\n---${initialResult.hasNext ? '' : '--'}\\r\\n`;\n    for await (const result of subsequentResults) {\n        yield `content-type: application/json; charset=utf-8\\r\\n\\r\\n${JSON.stringify(orderSubsequentIncrementalExecutionResultFields(result))}\\r\\n---${result.hasNext ? '' : '--'}\\r\\n`;\n    }\n}\nfunction orderExecutionResultFields(result) {\n    return {\n        errors: result.errors,\n        data: result.data,\n        extensions: result.extensions,\n    };\n}\nfunction orderInitialIncrementalExecutionResultFields(result) {\n    return {\n        hasNext: result.hasNext,\n        errors: result.errors,\n        data: result.data,\n        incremental: orderIncrementalResultFields(result.incremental),\n        extensions: result.extensions,\n    };\n}\nfunction orderSubsequentIncrementalExecutionResultFields(result) {\n    return {\n        hasNext: result.hasNext,\n        incremental: orderIncrementalResultFields(result.incremental),\n        extensions: result.extensions,\n    };\n}\nfunction orderIncrementalResultFields(incremental) {\n    return incremental?.map((i) => ({\n        hasNext: i.hasNext,\n        errors: i.errors,\n        path: i.path,\n        label: i.label,\n        data: i.data,\n        items: i.items,\n        extensions: i.extensions,\n    }));\n}\nfunction prettyJSONStringify(value) {\n    return JSON.stringify(value) + '\\n';\n}\nexports.prettyJSONStringify = prettyJSONStringify;\nfunction newHTTPGraphQLHead(status) {\n    return {\n        status,\n        headers: new HeaderMap_js_1.HeaderMap(),\n    };\n}\nexports.newHTTPGraphQLHead = newHTTPGraphQLHead;\nfunction mergeHTTPGraphQLHead(target, source) {\n    if (source.status) {\n        target.status = source.status;\n    }\n    if (source.headers) {\n        for (const [name, value] of source.headers) {\n            target.headers.set(name, value);\n        }\n    }\n}\nexports.mergeHTTPGraphQLHead = mergeHTTPGraphQLHead;\n//# sourceMappingURL=runHttpQuery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcnVuSHR0cFF1ZXJ5LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsNEJBQTRCLEdBQUcsMEJBQTBCLEdBQUcsMkJBQTJCLEdBQUcsb0JBQW9CO0FBQzlHLDBCQUEwQixtQkFBTyxDQUFDLHVGQUFtQjtBQUNyRCxrQkFBa0IsbUJBQU8sQ0FBQyx1REFBUztBQUNuQyxrQ0FBa0MsbUJBQU8sQ0FBQyx1R0FBMkI7QUFDckUscUNBQXFDLG1CQUFPLENBQUMsNERBQVk7QUFDekQsdUJBQXVCLG1CQUFPLENBQUMsNkZBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxVQUFVO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxXQUFXO0FBQzlFO0FBQ0E7QUFDQSxtRUFBbUUsV0FBVztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlHQUFpRztBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSxjQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQWdELEtBQUssZ0VBQWdFLEtBQUssY0FBYyxRQUFRLGlCQUFpQjtBQUN4TDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkNBQTJDO0FBQ2xFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMseUJBQXlCLGNBQWMsUUFBUSxpQkFBaUI7QUFDOUc7QUFDQSx1RUFBdUUsY0FBYztBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQSxzREFBc0QsdUJBQXVCLDRFQUE0RSxTQUFTLGtDQUFrQztBQUNwTTtBQUNBLCtDQUErQyx1QkFBdUIsd0VBQXdFLFNBQVMsMkJBQTJCO0FBQ2xMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvcnVuSHR0cFF1ZXJ5LmpzP2YzZTEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1lcmdlSFRUUEdyYXBoUUxIZWFkID0gZXhwb3J0cy5uZXdIVFRQR3JhcGhRTEhlYWQgPSBleHBvcnRzLnByZXR0eUpTT05TdHJpbmdpZnkgPSBleHBvcnRzLnJ1bkh0dHBRdWVyeSA9IHZvaWQgMDtcbmNvbnN0IEFwb2xsb1NlcnZlcl9qc18xID0gcmVxdWlyZShcIi4vQXBvbGxvU2VydmVyLmpzXCIpO1xuY29uc3QgZ3JhcGhxbF8xID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5jb25zdCBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xID0gcmVxdWlyZShcIi4vaW50ZXJuYWxFcnJvckNsYXNzZXMuanNcIik7XG5jb25zdCBuZWdvdGlhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm5lZ290aWF0b3JcIikpO1xuY29uc3QgSGVhZGVyTWFwX2pzXzEgPSByZXF1aXJlKFwiLi91dGlscy9IZWFkZXJNYXAuanNcIik7XG5mdW5jdGlvbiBmaWVsZElmU3RyaW5nKG8sIGZpZWxkTmFtZSkge1xuICAgIGNvbnN0IHZhbHVlID0gb1tmaWVsZE5hbWVdO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHNlYXJjaFBhcmFtSWZTcGVjaWZpZWRPbmNlKHNlYXJjaFBhcmFtcywgcGFyYW1OYW1lKSB7XG4gICAgY29uc3QgdmFsdWVzID0gc2VhcmNoUGFyYW1zLmdldEFsbChwYXJhbU5hbWUpO1xuICAgIHN3aXRjaCAodmFsdWVzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzWzBdO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IGludGVybmFsRXJyb3JDbGFzc2VzX2pzXzEuQmFkUmVxdWVzdEVycm9yKGBUaGUgJyR7cGFyYW1OYW1lfScgc2VhcmNoIHBhcmFtZXRlciBtYXkgb25seSBiZSBzcGVjaWZpZWQgb25jZS5gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBqc29uUGFyc2VkU2VhcmNoUGFyYW1JZlNwZWNpZmllZE9uY2Uoc2VhcmNoUGFyYW1zLCBmaWVsZE5hbWUpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHNlYXJjaFBhcmFtSWZTcGVjaWZpZWRPbmNlKHNlYXJjaFBhcmFtcywgZmllbGROYW1lKTtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBsZXQgaG9wZWZ1bGx5UmVjb3JkO1xuICAgIHRyeSB7XG4gICAgICAgIGhvcGVmdWxseVJlY29yZCA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLkJhZFJlcXVlc3RFcnJvcihgVGhlICR7ZmllbGROYW1lfSBzZWFyY2ggcGFyYW1ldGVyIGNvbnRhaW5zIGludmFsaWQgSlNPTi5gKTtcbiAgICB9XG4gICAgaWYgKCFpc1N0cmluZ1JlY29yZChob3BlZnVsbHlSZWNvcmQpKSB7XG4gICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLkJhZFJlcXVlc3RFcnJvcihgVGhlICR7ZmllbGROYW1lfSBzZWFyY2ggcGFyYW1ldGVyIHNob3VsZCBjb250YWluIGEgSlNPTi1lbmNvZGVkIG9iamVjdC5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGhvcGVmdWxseVJlY29yZDtcbn1cbmZ1bmN0aW9uIGZpZWxkSWZSZWNvcmQobywgZmllbGROYW1lKSB7XG4gICAgY29uc3QgdmFsdWUgPSBvW2ZpZWxkTmFtZV07XG4gICAgaWYgKGlzU3RyaW5nUmVjb3JkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBpc1N0cmluZ1JlY29yZChvKSB7XG4gICAgcmV0dXJuICghIW8gJiYgdHlwZW9mIG8gPT09ICdvYmplY3QnICYmICFCdWZmZXIuaXNCdWZmZXIobykgJiYgIUFycmF5LmlzQXJyYXkobykpO1xufVxuZnVuY3Rpb24gaXNOb25FbXB0eVN0cmluZ1JlY29yZChvKSB7XG4gICAgcmV0dXJuIGlzU3RyaW5nUmVjb3JkKG8pICYmIE9iamVjdC5rZXlzKG8pLmxlbmd0aCA+IDA7XG59XG5mdW5jdGlvbiBlbnN1cmVRdWVyeUlzU3RyaW5nT3JNaXNzaW5nKHF1ZXJ5KSB7XG4gICAgaWYgKCFxdWVyeSB8fCB0eXBlb2YgcXVlcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5LmtpbmQgPT09IGdyYXBocWxfMS5LaW5kLkRPQ1VNRU5UKSB7XG4gICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLkJhZFJlcXVlc3RFcnJvcihcIkdyYXBoUUwgcXVlcmllcyBtdXN0IGJlIHN0cmluZ3MuIEl0IGxvb2tzIGxpa2UgeW91J3JlIHNlbmRpbmcgdGhlIFwiICtcbiAgICAgICAgICAgICdpbnRlcm5hbCBncmFwaHFsLWpzIHJlcHJlc2VudGF0aW9uIG9mIGEgcGFyc2VkIHF1ZXJ5IGluIHlvdXIgJyArXG4gICAgICAgICAgICAncmVxdWVzdCBpbnN0ZWFkIG9mIGEgcmVxdWVzdCBpbiB0aGUgR3JhcGhRTCBxdWVyeSBsYW5ndWFnZS4gWW91ICcgK1xuICAgICAgICAgICAgJ2NhbiBjb252ZXJ0IGFuIEFTVCB0byBhIHN0cmluZyB1c2luZyB0aGUgYHByaW50YCBmdW5jdGlvbiBmcm9tICcgK1xuICAgICAgICAgICAgJ2BncmFwaHFsYCwgb3IgdXNlIGEgY2xpZW50IGxpa2UgYGFwb2xsby1jbGllbnRgIHdoaWNoIGNvbnZlcnRzICcgK1xuICAgICAgICAgICAgJ3RoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiB0byBhIHN0cmluZyBmb3IgeW91LicpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IGludGVybmFsRXJyb3JDbGFzc2VzX2pzXzEuQmFkUmVxdWVzdEVycm9yKCdHcmFwaFFMIHF1ZXJpZXMgbXVzdCBiZSBzdHJpbmdzLicpO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bkh0dHBRdWVyeSh7IHNlcnZlciwgaHR0cFJlcXVlc3QsIGNvbnRleHRWYWx1ZSwgc2NoZW1hRGVyaXZlZERhdGEsIGludGVybmFscywgc2hhcmVkUmVzcG9uc2VIVFRQR3JhcGhRTEhlYWQsIH0pIHtcbiAgICBsZXQgZ3JhcGhRTFJlcXVlc3Q7XG4gICAgc3dpdGNoIChodHRwUmVxdWVzdC5tZXRob2QpIHtcbiAgICAgICAgY2FzZSAnUE9TVCc6IHtcbiAgICAgICAgICAgIGlmICghaXNOb25FbXB0eVN0cmluZ1JlY29yZChodHRwUmVxdWVzdC5ib2R5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLkJhZFJlcXVlc3RFcnJvcignUE9TVCBib2R5IG1pc3NpbmcsIGludmFsaWQgQ29udGVudC1UeXBlLCBvciBKU09OIG9iamVjdCBoYXMgbm8ga2V5cy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVuc3VyZVF1ZXJ5SXNTdHJpbmdPck1pc3NpbmcoaHR0cFJlcXVlc3QuYm9keS5xdWVyeSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGh0dHBSZXF1ZXN0LmJvZHkudmFyaWFibGVzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLkJhZFJlcXVlc3RFcnJvcignYHZhcmlhYmxlc2AgaW4gYSBQT1NUIGJvZHkgc2hvdWxkIGJlIHByb3ZpZGVkIGFzIGFuIG9iamVjdCwgbm90IGEgcmVjdXJzaXZlbHkgSlNPTi1lbmNvZGVkIHN0cmluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgaHR0cFJlcXVlc3QuYm9keS5leHRlbnNpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLkJhZFJlcXVlc3RFcnJvcignYGV4dGVuc2lvbnNgIGluIGEgUE9TVCBib2R5IHNob3VsZCBiZSBwcm92aWRlZCBhcyBhbiBvYmplY3QsIG5vdCBhIHJlY3Vyc2l2ZWx5IEpTT04tZW5jb2RlZCBzdHJpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ2V4dGVuc2lvbnMnIGluIGh0dHBSZXF1ZXN0LmJvZHkgJiZcbiAgICAgICAgICAgICAgICBodHRwUmVxdWVzdC5ib2R5LmV4dGVuc2lvbnMgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAhaXNTdHJpbmdSZWNvcmQoaHR0cFJlcXVlc3QuYm9keS5leHRlbnNpb25zKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBpbnRlcm5hbEVycm9yQ2xhc3Nlc19qc18xLkJhZFJlcXVlc3RFcnJvcignYGV4dGVuc2lvbnNgIGluIGEgUE9TVCBib2R5IG11c3QgYmUgYW4gb2JqZWN0IGlmIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCd2YXJpYWJsZXMnIGluIGh0dHBSZXF1ZXN0LmJvZHkgJiZcbiAgICAgICAgICAgICAgICBodHRwUmVxdWVzdC5ib2R5LnZhcmlhYmxlcyAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICFpc1N0cmluZ1JlY29yZChodHRwUmVxdWVzdC5ib2R5LnZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgaW50ZXJuYWxFcnJvckNsYXNzZXNfanNfMS5CYWRSZXF1ZXN0RXJyb3IoJ2B2YXJpYWJsZXNgIGluIGEgUE9TVCBib2R5IG11c3QgYmUgYW4gb2JqZWN0IGlmIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdvcGVyYXRpb25OYW1lJyBpbiBodHRwUmVxdWVzdC5ib2R5ICYmXG4gICAgICAgICAgICAgICAgaHR0cFJlcXVlc3QuYm9keS5vcGVyYXRpb25OYW1lICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGh0dHBSZXF1ZXN0LmJvZHkub3BlcmF0aW9uTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgaW50ZXJuYWxFcnJvckNsYXNzZXNfanNfMS5CYWRSZXF1ZXN0RXJyb3IoJ2BvcGVyYXRpb25OYW1lYCBpbiBhIFBPU1QgYm9keSBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3JhcGhRTFJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IGZpZWxkSWZTdHJpbmcoaHR0cFJlcXVlc3QuYm9keSwgJ3F1ZXJ5JyksXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uTmFtZTogZmllbGRJZlN0cmluZyhodHRwUmVxdWVzdC5ib2R5LCAnb3BlcmF0aW9uTmFtZScpLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogZmllbGRJZlJlY29yZChodHRwUmVxdWVzdC5ib2R5LCAndmFyaWFibGVzJyksXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogZmllbGRJZlJlY29yZChodHRwUmVxdWVzdC5ib2R5LCAnZXh0ZW5zaW9ucycpLFxuICAgICAgICAgICAgICAgIGh0dHA6IGh0dHBSZXF1ZXN0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0dFVCc6IHtcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaHR0cFJlcXVlc3Quc2VhcmNoKTtcbiAgICAgICAgICAgIGdyYXBoUUxSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBzZWFyY2hQYXJhbUlmU3BlY2lmaWVkT25jZShzZWFyY2hQYXJhbXMsICdxdWVyeScpLFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbk5hbWU6IHNlYXJjaFBhcmFtSWZTcGVjaWZpZWRPbmNlKHNlYXJjaFBhcmFtcywgJ29wZXJhdGlvbk5hbWUnKSxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGpzb25QYXJzZWRTZWFyY2hQYXJhbUlmU3BlY2lmaWVkT25jZShzZWFyY2hQYXJhbXMsICd2YXJpYWJsZXMnKSxcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiBqc29uUGFyc2VkU2VhcmNoUGFyYW1JZlNwZWNpZmllZE9uY2Uoc2VhcmNoUGFyYW1zLCAnZXh0ZW5zaW9ucycpLFxuICAgICAgICAgICAgICAgIGh0dHA6IGh0dHBSZXF1ZXN0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgaW50ZXJuYWxFcnJvckNsYXNzZXNfanNfMS5CYWRSZXF1ZXN0RXJyb3IoJ0Fwb2xsbyBTZXJ2ZXIgc3VwcG9ydHMgb25seSBHRVQvUE9TVCByZXF1ZXN0cy4nLCB7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgICAgICBodHRwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDQwNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJNYXBfanNfMS5IZWFkZXJNYXAoW1snYWxsb3cnLCAnR0VULCBQT1NUJ11dKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGdyYXBoUUxSZXNwb25zZSA9IGF3YWl0ICgwLCBBcG9sbG9TZXJ2ZXJfanNfMS5pbnRlcm5hbEV4ZWN1dGVPcGVyYXRpb24pKHtcbiAgICAgICAgc2VydmVyLFxuICAgICAgICBncmFwaFFMUmVxdWVzdCxcbiAgICAgICAgaW50ZXJuYWxzLFxuICAgICAgICBzY2hlbWFEZXJpdmVkRGF0YSxcbiAgICAgICAgc2hhcmVkUmVzcG9uc2VIVFRQR3JhcGhRTEhlYWQsXG4gICAgfSwgeyBjb250ZXh0VmFsdWUgfSk7XG4gICAgaWYgKGdyYXBoUUxSZXNwb25zZS5ib2R5LmtpbmQgPT09ICdzaW5nbGUnKSB7XG4gICAgICAgIGlmICghZ3JhcGhRTFJlc3BvbnNlLmh0dHAuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9ICgwLCBBcG9sbG9TZXJ2ZXJfanNfMS5jaG9vc2VDb250ZW50VHlwZUZvclNpbmdsZVJlc3VsdFJlc3BvbnNlKShodHRwUmVxdWVzdCk7XG4gICAgICAgICAgICBpZiAoY29udGVudFR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgaW50ZXJuYWxFcnJvckNsYXNzZXNfanNfMS5CYWRSZXF1ZXN0RXJyb3IoYEFuICdhY2NlcHQnIGhlYWRlciB3YXMgcHJvdmlkZWQgZm9yIHRoaXMgcmVxdWVzdCB3aGljaCBkb2VzIG5vdCBhY2NlcHQgYCArXG4gICAgICAgICAgICAgICAgICAgIGAke0Fwb2xsb1NlcnZlcl9qc18xLk1FRElBX1RZUEVTLkFQUExJQ0FUSU9OX0pTT059IG9yICR7QXBvbGxvU2VydmVyX2pzXzEuTUVESUFfVFlQRVMuQVBQTElDQVRJT05fR1JBUEhRTF9SRVNQT05TRV9KU09OfWAsIHsgZXh0ZW5zaW9uczogeyBodHRwOiB7IHN0YXR1czogNDA2IH0gfSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyYXBoUUxSZXNwb25zZS5odHRwLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCBjb250ZW50VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmdyYXBoUUxSZXNwb25zZS5odHRwLFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIGtpbmQ6ICdjb21wbGV0ZScsXG4gICAgICAgICAgICAgICAgc3RyaW5nOiBhd2FpdCBpbnRlcm5hbHMuc3RyaW5naWZ5UmVzdWx0KG9yZGVyRXhlY3V0aW9uUmVzdWx0RmllbGRzKGdyYXBoUUxSZXNwb25zZS5ib2R5LnNpbmdsZVJlc3VsdCkpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgYWNjZXB0SGVhZGVyID0gaHR0cFJlcXVlc3QuaGVhZGVycy5nZXQoJ2FjY2VwdCcpO1xuICAgIGlmICghKGFjY2VwdEhlYWRlciAmJlxuICAgICAgICBuZXcgbmVnb3RpYXRvcl8xLmRlZmF1bHQoe1xuICAgICAgICAgICAgaGVhZGVyczogeyBhY2NlcHQ6IGh0dHBSZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhY2NlcHQnKSB9LFxuICAgICAgICB9KS5tZWRpYVR5cGUoW1xuICAgICAgICAgICAgQXBvbGxvU2VydmVyX2pzXzEuTUVESUFfVFlQRVMuTVVMVElQQVJUX01JWEVEX05PX0RFRkVSX1NQRUMsXG4gICAgICAgICAgICBBcG9sbG9TZXJ2ZXJfanNfMS5NRURJQV9UWVBFUy5NVUxUSVBBUlRfTUlYRURfRVhQRVJJTUVOVEFMLFxuICAgICAgICBdKSA9PT0gQXBvbGxvU2VydmVyX2pzXzEuTUVESUFfVFlQRVMuTVVMVElQQVJUX01JWEVEX0VYUEVSSU1FTlRBTCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IGludGVybmFsRXJyb3JDbGFzc2VzX2pzXzEuQmFkUmVxdWVzdEVycm9yKCdBcG9sbG8gc2VydmVyIHJlY2VpdmVkIGFuIG9wZXJhdGlvbiB0aGF0IHVzZXMgaW5jcmVtZW50YWwgZGVsaXZlcnkgJyArXG4gICAgICAgICAgICAnKEBkZWZlciBvciBAc3RyZWFtKSwgYnV0IHRoZSBjbGllbnQgZG9lcyBub3QgYWNjZXB0IG11bHRpcGFydC9taXhlZCAnICtcbiAgICAgICAgICAgICdIVFRQIHJlc3BvbnNlcy4gVG8gZW5hYmxlIGluY3JlbWVudGFsIGRlbGl2ZXJ5IHN1cHBvcnQsIGFkZCB0aGUgSFRUUCAnICtcbiAgICAgICAgICAgIFwiaGVhZGVyICdBY2NlcHQ6IG11bHRpcGFydC9taXhlZDsgZGVmZXJTcGVjPTIwMjIwODI0Jy5cIiwgeyBleHRlbnNpb25zOiB7IGh0dHA6IHsgc3RhdHVzOiA0MDYgfSB9IH0pO1xuICAgIH1cbiAgICBncmFwaFFMUmVzcG9uc2UuaHR0cC5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ211bHRpcGFydC9taXhlZDsgYm91bmRhcnk9XCItXCI7IGRlZmVyU3BlYz0yMDIyMDgyNCcpO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmdyYXBoUUxSZXNwb25zZS5odHRwLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBraW5kOiAnY2h1bmtlZCcsXG4gICAgICAgICAgICBhc3luY0l0ZXJhdG9yOiB3cml0ZU11bHRpcGFydEJvZHkoZ3JhcGhRTFJlc3BvbnNlLmJvZHkuaW5pdGlhbFJlc3VsdCwgZ3JhcGhRTFJlc3BvbnNlLmJvZHkuc3Vic2VxdWVudFJlc3VsdHMpLFxuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnRzLnJ1bkh0dHBRdWVyeSA9IHJ1bkh0dHBRdWVyeTtcbmFzeW5jIGZ1bmN0aW9uKiB3cml0ZU11bHRpcGFydEJvZHkoaW5pdGlhbFJlc3VsdCwgc3Vic2VxdWVudFJlc3VsdHMpIHtcbiAgICB5aWVsZCBgXFxyXFxuLS0tXFxyXFxuY29udGVudC10eXBlOiBhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XFxyXFxuXFxyXFxuJHtKU09OLnN0cmluZ2lmeShvcmRlckluaXRpYWxJbmNyZW1lbnRhbEV4ZWN1dGlvblJlc3VsdEZpZWxkcyhpbml0aWFsUmVzdWx0KSl9XFxyXFxuLS0tJHtpbml0aWFsUmVzdWx0Lmhhc05leHQgPyAnJyA6ICctLSd9XFxyXFxuYDtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IHJlc3VsdCBvZiBzdWJzZXF1ZW50UmVzdWx0cykge1xuICAgICAgICB5aWVsZCBgY29udGVudC10eXBlOiBhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XFxyXFxuXFxyXFxuJHtKU09OLnN0cmluZ2lmeShvcmRlclN1YnNlcXVlbnRJbmNyZW1lbnRhbEV4ZWN1dGlvblJlc3VsdEZpZWxkcyhyZXN1bHQpKX1cXHJcXG4tLS0ke3Jlc3VsdC5oYXNOZXh0ID8gJycgOiAnLS0nfVxcclxcbmA7XG4gICAgfVxufVxuZnVuY3Rpb24gb3JkZXJFeGVjdXRpb25SZXN1bHRGaWVsZHMocmVzdWx0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3JzOiByZXN1bHQuZXJyb3JzLFxuICAgICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgICAgZXh0ZW5zaW9uczogcmVzdWx0LmV4dGVuc2lvbnMsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIG9yZGVySW5pdGlhbEluY3JlbWVudGFsRXhlY3V0aW9uUmVzdWx0RmllbGRzKHJlc3VsdCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGhhc05leHQ6IHJlc3VsdC5oYXNOZXh0LFxuICAgICAgICBlcnJvcnM6IHJlc3VsdC5lcnJvcnMsXG4gICAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgICBpbmNyZW1lbnRhbDogb3JkZXJJbmNyZW1lbnRhbFJlc3VsdEZpZWxkcyhyZXN1bHQuaW5jcmVtZW50YWwpLFxuICAgICAgICBleHRlbnNpb25zOiByZXN1bHQuZXh0ZW5zaW9ucyxcbiAgICB9O1xufVxuZnVuY3Rpb24gb3JkZXJTdWJzZXF1ZW50SW5jcmVtZW50YWxFeGVjdXRpb25SZXN1bHRGaWVsZHMocmVzdWx0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaGFzTmV4dDogcmVzdWx0Lmhhc05leHQsXG4gICAgICAgIGluY3JlbWVudGFsOiBvcmRlckluY3JlbWVudGFsUmVzdWx0RmllbGRzKHJlc3VsdC5pbmNyZW1lbnRhbCksXG4gICAgICAgIGV4dGVuc2lvbnM6IHJlc3VsdC5leHRlbnNpb25zLFxuICAgIH07XG59XG5mdW5jdGlvbiBvcmRlckluY3JlbWVudGFsUmVzdWx0RmllbGRzKGluY3JlbWVudGFsKSB7XG4gICAgcmV0dXJuIGluY3JlbWVudGFsPy5tYXAoKGkpID0+ICh7XG4gICAgICAgIGhhc05leHQ6IGkuaGFzTmV4dCxcbiAgICAgICAgZXJyb3JzOiBpLmVycm9ycyxcbiAgICAgICAgcGF0aDogaS5wYXRoLFxuICAgICAgICBsYWJlbDogaS5sYWJlbCxcbiAgICAgICAgZGF0YTogaS5kYXRhLFxuICAgICAgICBpdGVtczogaS5pdGVtcyxcbiAgICAgICAgZXh0ZW5zaW9uczogaS5leHRlbnNpb25zLFxuICAgIH0pKTtcbn1cbmZ1bmN0aW9uIHByZXR0eUpTT05TdHJpbmdpZnkodmFsdWUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJ1xcbic7XG59XG5leHBvcnRzLnByZXR0eUpTT05TdHJpbmdpZnkgPSBwcmV0dHlKU09OU3RyaW5naWZ5O1xuZnVuY3Rpb24gbmV3SFRUUEdyYXBoUUxIZWFkKHN0YXR1cykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlck1hcF9qc18xLkhlYWRlck1hcCgpLFxuICAgIH07XG59XG5leHBvcnRzLm5ld0hUVFBHcmFwaFFMSGVhZCA9IG5ld0hUVFBHcmFwaFFMSGVhZDtcbmZ1bmN0aW9uIG1lcmdlSFRUUEdyYXBoUUxIZWFkKHRhcmdldCwgc291cmNlKSB7XG4gICAgaWYgKHNvdXJjZS5zdGF0dXMpIHtcbiAgICAgICAgdGFyZ2V0LnN0YXR1cyA9IHNvdXJjZS5zdGF0dXM7XG4gICAgfVxuICAgIGlmIChzb3VyY2UuaGVhZGVycykge1xuICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2Ygc291cmNlLmhlYWRlcnMpIHtcbiAgICAgICAgICAgIHRhcmdldC5oZWFkZXJzLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLm1lcmdlSFRUUEdyYXBoUUxIZWFkID0gbWVyZ2VIVFRQR3JhcGhRTEhlYWQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5IdHRwUXVlcnkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/runHttpQuery.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.HeaderMap = void 0;\nclass HeaderMap extends Map {\n    constructor() {\n        super(...arguments);\n        this.__identity = Symbol('HeaderMap');\n    }\n    set(key, value) {\n        return super.set(key.toLowerCase(), value);\n    }\n    get(key) {\n        return super.get(key.toLowerCase());\n    }\n    delete(key) {\n        return super.delete(key.toLowerCase());\n    }\n    has(key) {\n        return super.has(key.toLowerCase());\n    }\n}\nexports.HeaderMap = HeaderMap;\n//# sourceMappingURL=HeaderMap.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvSGVhZGVyTWFwLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3V0aWxzL0hlYWRlck1hcC5qcz8zY2M1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5IZWFkZXJNYXAgPSB2b2lkIDA7XG5jbGFzcyBIZWFkZXJNYXAgZXh0ZW5kcyBNYXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9faWRlbnRpdHkgPSBTeW1ib2woJ0hlYWRlck1hcCcpO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuc2V0KGtleS50b0xvd2VyQ2FzZSgpLCB2YWx1ZSk7XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChrZXkudG9Mb3dlckNhc2UoKSk7XG4gICAgfVxuICAgIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRlbGV0ZShrZXkudG9Mb3dlckNhc2UoKSk7XG4gICAgfVxuICAgIGhhcyhrZXkpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmhhcyhrZXkudG9Mb3dlckNhc2UoKSk7XG4gICAgfVxufVxuZXhwb3J0cy5IZWFkZXJNYXAgPSBIZWFkZXJNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1IZWFkZXJNYXAuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/HeaderMap.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/UnreachableCaseError.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/UnreachableCaseError.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UnreachableCaseError = void 0;\nclass UnreachableCaseError extends Error {\n    constructor(val) {\n        super(`Unreachable case: ${val}`);\n    }\n}\nexports.UnreachableCaseError = UnreachableCaseError;\n//# sourceMappingURL=UnreachableCaseError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvVW5yZWFjaGFibGVDYXNlRXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxtQ0FBbUMsSUFBSTtBQUN2QztBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy91dGlscy9VbnJlYWNoYWJsZUNhc2VFcnJvci5qcz80YTRjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5VbnJlYWNoYWJsZUNhc2VFcnJvciA9IHZvaWQgMDtcbmNsYXNzIFVucmVhY2hhYmxlQ2FzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHZhbCkge1xuICAgICAgICBzdXBlcihgVW5yZWFjaGFibGUgY2FzZTogJHt2YWx9YCk7XG4gICAgfVxufVxuZXhwb3J0cy5VbnJlYWNoYWJsZUNhc2VFcnJvciA9IFVucmVhY2hhYmxlQ2FzZUVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5yZWFjaGFibGVDYXNlRXJyb3IuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/UnreachableCaseError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/computeCoreSchemaHash.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/computeCoreSchemaHash.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.computeCoreSchemaHash = void 0;\nconst utils_createhash_1 = __webpack_require__(/*! @apollo/utils.createhash */ \"(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\");\nfunction computeCoreSchemaHash(schema) {\n    return (0, utils_createhash_1.createHash)('sha256').update(schema).digest('hex');\n}\nexports.computeCoreSchemaHash = computeCoreSchemaHash;\n//# sourceMappingURL=computeCoreSchemaHash.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvY29tcHV0ZUNvcmVTY2hlbWFIYXNoLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDZCQUE2QjtBQUM3QiwyQkFBMkIsbUJBQU8sQ0FBQyw2RkFBMEI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy91dGlscy9jb21wdXRlQ29yZVNjaGVtYUhhc2guanM/M2U0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY29tcHV0ZUNvcmVTY2hlbWFIYXNoID0gdm9pZCAwO1xuY29uc3QgdXRpbHNfY3JlYXRlaGFzaF8xID0gcmVxdWlyZShcIkBhcG9sbG8vdXRpbHMuY3JlYXRlaGFzaFwiKTtcbmZ1bmN0aW9uIGNvbXB1dGVDb3JlU2NoZW1hSGFzaChzY2hlbWEpIHtcbiAgICByZXR1cm4gKDAsIHV0aWxzX2NyZWF0ZWhhc2hfMS5jcmVhdGVIYXNoKSgnc2hhMjU2JykudXBkYXRlKHNjaGVtYSkuZGlnZXN0KCdoZXgnKTtcbn1cbmV4cG9ydHMuY29tcHV0ZUNvcmVTY2hlbWFIYXNoID0gY29tcHV0ZUNvcmVTY2hlbWFIYXNoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcHV0ZUNvcmVTY2hlbWFIYXNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/computeCoreSchemaHash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/invokeHooks.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/invokeHooks.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.invokeHooksUntilDefinedAndNonNull = exports.invokeSyncDidStartHook = exports.invokeDidStartHook = void 0;\nconst isDefined_js_1 = __webpack_require__(/*! ./isDefined.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/utils/isDefined.js\");\nasync function invokeDidStartHook(targets, hook) {\n    const didEndHooks = (await Promise.all(targets.map((target) => hook(target)))).filter(isDefined_js_1.isDefined);\n    didEndHooks.reverse();\n    return async (...args) => {\n        for (const didEndHook of didEndHooks) {\n            didEndHook(...args);\n        }\n    };\n}\nexports.invokeDidStartHook = invokeDidStartHook;\nfunction invokeSyncDidStartHook(targets, hook) {\n    const didEndHooks = targets\n        .map((target) => hook(target))\n        .filter(isDefined_js_1.isDefined);\n    didEndHooks.reverse();\n    return (...args) => {\n        for (const didEndHook of didEndHooks) {\n            didEndHook(...args);\n        }\n    };\n}\nexports.invokeSyncDidStartHook = invokeSyncDidStartHook;\nasync function invokeHooksUntilDefinedAndNonNull(targets, hook) {\n    for (const target of targets) {\n        const value = await hook(target);\n        if (value != null) {\n            return value;\n        }\n    }\n    return null;\n}\nexports.invokeHooksUntilDefinedAndNonNull = invokeHooksUntilDefinedAndNonNull;\n//# sourceMappingURL=invokeHooks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvaW52b2tlSG9va3MuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QseUNBQXlDLEdBQUcsOEJBQThCLEdBQUcsMEJBQTBCO0FBQ3ZHLHVCQUF1QixtQkFBTyxDQUFDLHVGQUFnQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3V0aWxzL2ludm9rZUhvb2tzLmpzPzhiMDMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmludm9rZUhvb2tzVW50aWxEZWZpbmVkQW5kTm9uTnVsbCA9IGV4cG9ydHMuaW52b2tlU3luY0RpZFN0YXJ0SG9vayA9IGV4cG9ydHMuaW52b2tlRGlkU3RhcnRIb29rID0gdm9pZCAwO1xuY29uc3QgaXNEZWZpbmVkX2pzXzEgPSByZXF1aXJlKFwiLi9pc0RlZmluZWQuanNcIik7XG5hc3luYyBmdW5jdGlvbiBpbnZva2VEaWRTdGFydEhvb2sodGFyZ2V0cywgaG9vaykge1xuICAgIGNvbnN0IGRpZEVuZEhvb2tzID0gKGF3YWl0IFByb21pc2UuYWxsKHRhcmdldHMubWFwKCh0YXJnZXQpID0+IGhvb2sodGFyZ2V0KSkpKS5maWx0ZXIoaXNEZWZpbmVkX2pzXzEuaXNEZWZpbmVkKTtcbiAgICBkaWRFbmRIb29rcy5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZGlkRW5kSG9vayBvZiBkaWRFbmRIb29rcykge1xuICAgICAgICAgICAgZGlkRW5kSG9vayguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5leHBvcnRzLmludm9rZURpZFN0YXJ0SG9vayA9IGludm9rZURpZFN0YXJ0SG9vaztcbmZ1bmN0aW9uIGludm9rZVN5bmNEaWRTdGFydEhvb2sodGFyZ2V0cywgaG9vaykge1xuICAgIGNvbnN0IGRpZEVuZEhvb2tzID0gdGFyZ2V0c1xuICAgICAgICAubWFwKCh0YXJnZXQpID0+IGhvb2sodGFyZ2V0KSlcbiAgICAgICAgLmZpbHRlcihpc0RlZmluZWRfanNfMS5pc0RlZmluZWQpO1xuICAgIGRpZEVuZEhvb2tzLnJldmVyc2UoKTtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBkaWRFbmRIb29rIG9mIGRpZEVuZEhvb2tzKSB7XG4gICAgICAgICAgICBkaWRFbmRIb29rKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmV4cG9ydHMuaW52b2tlU3luY0RpZFN0YXJ0SG9vayA9IGludm9rZVN5bmNEaWRTdGFydEhvb2s7XG5hc3luYyBmdW5jdGlvbiBpbnZva2VIb29rc1VudGlsRGVmaW5lZEFuZE5vbk51bGwodGFyZ2V0cywgaG9vaykge1xuICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIHRhcmdldHMpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBob29rKHRhcmdldCk7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5leHBvcnRzLmludm9rZUhvb2tzVW50aWxEZWZpbmVkQW5kTm9uTnVsbCA9IGludm9rZUhvb2tzVW50aWxEZWZpbmVkQW5kTm9uTnVsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludm9rZUhvb2tzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/invokeHooks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/isDefined.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/isDefined.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.isDefined = void 0;\nfunction isDefined(t) {\n    return t != null;\n}\nexports.isDefined = isDefined;\n//# sourceMappingURL=isDefined.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvaXNEZWZpbmVkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvY2pzL3V0aWxzL2lzRGVmaW5lZC5qcz85NGMyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc0RlZmluZWQgPSB2b2lkIDA7XG5mdW5jdGlvbiBpc0RlZmluZWQodCkge1xuICAgIHJldHVybiB0ICE9IG51bGw7XG59XG5leHBvcnRzLmlzRGVmaW5lZCA9IGlzRGVmaW5lZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRGVmaW5lZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/isDefined.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/makeGatewayGraphQLRequestContext.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/makeGatewayGraphQLRequestContext.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.makeGatewayGraphQLRequestContext = void 0;\nfunction makeGatewayGraphQLRequestContext(as4RequestContext, server, internals) {\n    const request = {};\n    if ('query' in as4RequestContext.request) {\n        request.query = as4RequestContext.request.query;\n    }\n    if ('operationName' in as4RequestContext.request) {\n        request.operationName = as4RequestContext.request.operationName;\n    }\n    if ('variables' in as4RequestContext.request) {\n        request.variables = as4RequestContext.request.variables;\n    }\n    if ('extensions' in as4RequestContext.request) {\n        request.extensions = as4RequestContext.request.extensions;\n    }\n    if (as4RequestContext.request.http) {\n        const as4http = as4RequestContext.request.http;\n        const needQuestion = as4http.search !== '' && !as4http.search.startsWith('?');\n        request.http = {\n            method: as4http.method,\n            url: `https://unknown-url.invalid/${needQuestion ? '?' : ''}${as4http.search}`,\n            headers: new FetcherHeadersForHeaderMap(as4http.headers),\n        };\n    }\n    const response = {\n        http: {\n            headers: new FetcherHeadersForHeaderMap(as4RequestContext.response.http.headers),\n            get status() {\n                return as4RequestContext.response.http.status;\n            },\n            set status(newStatus) {\n                as4RequestContext.response.http.status = newStatus;\n            },\n        },\n    };\n    return {\n        request,\n        response,\n        logger: server.logger,\n        schema: as4RequestContext.schema,\n        schemaHash: 'schemaHash no longer exists in Apollo Server 4',\n        context: as4RequestContext.contextValue,\n        cache: server.cache,\n        queryHash: as4RequestContext.queryHash,\n        document: as4RequestContext.document,\n        source: as4RequestContext.source,\n        operationName: as4RequestContext.operationName,\n        operation: as4RequestContext.operation,\n        errors: as4RequestContext.errors,\n        metrics: as4RequestContext.metrics,\n        debug: internals.includeStacktraceInErrorResponses,\n        overallCachePolicy: as4RequestContext.overallCachePolicy,\n        requestIsBatched: as4RequestContext.requestIsBatched,\n    };\n}\nexports.makeGatewayGraphQLRequestContext = makeGatewayGraphQLRequestContext;\nclass FetcherHeadersForHeaderMap {\n    constructor(map) {\n        this.map = map;\n    }\n    append(name, value) {\n        if (this.map.has(name)) {\n            this.map.set(name, this.map.get(name) + ', ' + value);\n        }\n        else {\n            this.map.set(name, value);\n        }\n    }\n    delete(name) {\n        this.map.delete(name);\n    }\n    get(name) {\n        return this.map.get(name) ?? null;\n    }\n    has(name) {\n        return this.map.has(name);\n    }\n    set(name, value) {\n        this.map.set(name, value);\n    }\n    entries() {\n        return this.map.entries();\n    }\n    keys() {\n        return this.map.keys();\n    }\n    values() {\n        return this.map.values();\n    }\n    [Symbol.iterator]() {\n        return this.map.entries();\n    }\n}\n//# sourceMappingURL=makeGatewayGraphQLRequestContext.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvbWFrZUdhdGV3YXlHcmFwaFFMUmVxdWVzdENvbnRleHQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELHdCQUF3QixFQUFFLGVBQWU7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvbWFrZUdhdGV3YXlHcmFwaFFMUmVxdWVzdENvbnRleHQuanM/OGU2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubWFrZUdhdGV3YXlHcmFwaFFMUmVxdWVzdENvbnRleHQgPSB2b2lkIDA7XG5mdW5jdGlvbiBtYWtlR2F0ZXdheUdyYXBoUUxSZXF1ZXN0Q29udGV4dChhczRSZXF1ZXN0Q29udGV4dCwgc2VydmVyLCBpbnRlcm5hbHMpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0ge307XG4gICAgaWYgKCdxdWVyeScgaW4gYXM0UmVxdWVzdENvbnRleHQucmVxdWVzdCkge1xuICAgICAgICByZXF1ZXN0LnF1ZXJ5ID0gYXM0UmVxdWVzdENvbnRleHQucmVxdWVzdC5xdWVyeTtcbiAgICB9XG4gICAgaWYgKCdvcGVyYXRpb25OYW1lJyBpbiBhczRSZXF1ZXN0Q29udGV4dC5yZXF1ZXN0KSB7XG4gICAgICAgIHJlcXVlc3Qub3BlcmF0aW9uTmFtZSA9IGFzNFJlcXVlc3RDb250ZXh0LnJlcXVlc3Qub3BlcmF0aW9uTmFtZTtcbiAgICB9XG4gICAgaWYgKCd2YXJpYWJsZXMnIGluIGFzNFJlcXVlc3RDb250ZXh0LnJlcXVlc3QpIHtcbiAgICAgICAgcmVxdWVzdC52YXJpYWJsZXMgPSBhczRSZXF1ZXN0Q29udGV4dC5yZXF1ZXN0LnZhcmlhYmxlcztcbiAgICB9XG4gICAgaWYgKCdleHRlbnNpb25zJyBpbiBhczRSZXF1ZXN0Q29udGV4dC5yZXF1ZXN0KSB7XG4gICAgICAgIHJlcXVlc3QuZXh0ZW5zaW9ucyA9IGFzNFJlcXVlc3RDb250ZXh0LnJlcXVlc3QuZXh0ZW5zaW9ucztcbiAgICB9XG4gICAgaWYgKGFzNFJlcXVlc3RDb250ZXh0LnJlcXVlc3QuaHR0cCkge1xuICAgICAgICBjb25zdCBhczRodHRwID0gYXM0UmVxdWVzdENvbnRleHQucmVxdWVzdC5odHRwO1xuICAgICAgICBjb25zdCBuZWVkUXVlc3Rpb24gPSBhczRodHRwLnNlYXJjaCAhPT0gJycgJiYgIWFzNGh0dHAuc2VhcmNoLnN0YXJ0c1dpdGgoJz8nKTtcbiAgICAgICAgcmVxdWVzdC5odHRwID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBhczRodHRwLm1ldGhvZCxcbiAgICAgICAgICAgIHVybDogYGh0dHBzOi8vdW5rbm93bi11cmwuaW52YWxpZC8ke25lZWRRdWVzdGlvbiA/ICc/JyA6ICcnfSR7YXM0aHR0cC5zZWFyY2h9YCxcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBGZXRjaGVySGVhZGVyc0ZvckhlYWRlck1hcChhczRodHRwLmhlYWRlcnMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgaHR0cDoge1xuICAgICAgICAgICAgaGVhZGVyczogbmV3IEZldGNoZXJIZWFkZXJzRm9ySGVhZGVyTWFwKGFzNFJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmh0dHAuaGVhZGVycyksXG4gICAgICAgICAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhczRSZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5odHRwLnN0YXR1cztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQgc3RhdHVzKG5ld1N0YXR1cykge1xuICAgICAgICAgICAgICAgIGFzNFJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmh0dHAuc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIHJlc3BvbnNlLFxuICAgICAgICBsb2dnZXI6IHNlcnZlci5sb2dnZXIsXG4gICAgICAgIHNjaGVtYTogYXM0UmVxdWVzdENvbnRleHQuc2NoZW1hLFxuICAgICAgICBzY2hlbWFIYXNoOiAnc2NoZW1hSGFzaCBubyBsb25nZXIgZXhpc3RzIGluIEFwb2xsbyBTZXJ2ZXIgNCcsXG4gICAgICAgIGNvbnRleHQ6IGFzNFJlcXVlc3RDb250ZXh0LmNvbnRleHRWYWx1ZSxcbiAgICAgICAgY2FjaGU6IHNlcnZlci5jYWNoZSxcbiAgICAgICAgcXVlcnlIYXNoOiBhczRSZXF1ZXN0Q29udGV4dC5xdWVyeUhhc2gsXG4gICAgICAgIGRvY3VtZW50OiBhczRSZXF1ZXN0Q29udGV4dC5kb2N1bWVudCxcbiAgICAgICAgc291cmNlOiBhczRSZXF1ZXN0Q29udGV4dC5zb3VyY2UsXG4gICAgICAgIG9wZXJhdGlvbk5hbWU6IGFzNFJlcXVlc3RDb250ZXh0Lm9wZXJhdGlvbk5hbWUsXG4gICAgICAgIG9wZXJhdGlvbjogYXM0UmVxdWVzdENvbnRleHQub3BlcmF0aW9uLFxuICAgICAgICBlcnJvcnM6IGFzNFJlcXVlc3RDb250ZXh0LmVycm9ycyxcbiAgICAgICAgbWV0cmljczogYXM0UmVxdWVzdENvbnRleHQubWV0cmljcyxcbiAgICAgICAgZGVidWc6IGludGVybmFscy5pbmNsdWRlU3RhY2t0cmFjZUluRXJyb3JSZXNwb25zZXMsXG4gICAgICAgIG92ZXJhbGxDYWNoZVBvbGljeTogYXM0UmVxdWVzdENvbnRleHQub3ZlcmFsbENhY2hlUG9saWN5LFxuICAgICAgICByZXF1ZXN0SXNCYXRjaGVkOiBhczRSZXF1ZXN0Q29udGV4dC5yZXF1ZXN0SXNCYXRjaGVkLFxuICAgIH07XG59XG5leHBvcnRzLm1ha2VHYXRld2F5R3JhcGhRTFJlcXVlc3RDb250ZXh0ID0gbWFrZUdhdGV3YXlHcmFwaFFMUmVxdWVzdENvbnRleHQ7XG5jbGFzcyBGZXRjaGVySGVhZGVyc0ZvckhlYWRlck1hcCB7XG4gICAgY29uc3RydWN0b3IobWFwKSB7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgIH1cbiAgICBhcHBlbmQobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMubWFwLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5tYXAuc2V0KG5hbWUsIHRoaXMubWFwLmdldChuYW1lKSArICcsICcgKyB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlbGV0ZShuYW1lKSB7XG4gICAgICAgIHRoaXMubWFwLmRlbGV0ZShuYW1lKTtcbiAgICB9XG4gICAgZ2V0KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmdldChuYW1lKSA/PyBudWxsO1xuICAgIH1cbiAgICBoYXMobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuaGFzKG5hbWUpO1xuICAgIH1cbiAgICBzZXQobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5tYXAuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICB9XG4gICAgZW50cmllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmVudHJpZXMoKTtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmtleXMoKTtcbiAgICB9XG4gICAgdmFsdWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAudmFsdWVzKCk7XG4gICAgfVxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZW50cmllcygpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ha2VHYXRld2F5R3JhcGhRTFJlcXVlc3RDb250ZXh0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/makeGatewayGraphQLRequestContext.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/resolvable.js":
/*!******************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/resolvable.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = () => {\n    let resolve;\n    let reject;\n    const promise = new Promise((_resolve, _reject) => {\n        resolve = _resolve;\n        reject = _reject;\n    });\n    promise.resolve = resolve;\n    promise.reject = reject;\n    return promise;\n};\n//# sourceMappingURL=resolvable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvcmVzb2x2YWJsZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvcmVzb2x2YWJsZS5qcz83ZThhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gKCkgPT4ge1xuICAgIGxldCByZXNvbHZlO1xuICAgIGxldCByZWplY3Q7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xuICAgICAgICByZXNvbHZlID0gX3Jlc29sdmU7XG4gICAgICAgIHJlamVjdCA9IF9yZWplY3Q7XG4gICAgfSk7XG4gICAgcHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICBwcm9taXNlLnJlamVjdCA9IHJlamVjdDtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNvbHZhYmxlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/resolvable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/schemaInstrumentation.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/schemaInstrumentation.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.whenResultIsFinished = exports.pluginsEnabledForSchemaResolvers = exports.enablePluginsForSchemaResolvers = exports.symbolUserFieldResolver = exports.symbolExecutionDispatcherWillResolveField = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nexports.symbolExecutionDispatcherWillResolveField = Symbol('apolloServerExecutionDispatcherWillResolveField');\nexports.symbolUserFieldResolver = Symbol('apolloServerUserFieldResolver');\nconst symbolPluginsEnabled = Symbol('apolloServerPluginsEnabled');\nfunction enablePluginsForSchemaResolvers(schema) {\n    if (pluginsEnabledForSchemaResolvers(schema)) {\n        return schema;\n    }\n    Object.defineProperty(schema, symbolPluginsEnabled, {\n        value: true,\n    });\n    const typeMap = schema.getTypeMap();\n    Object.values(typeMap).forEach((type) => {\n        if (!(0, graphql_1.getNamedType)(type).name.startsWith('__') &&\n            type instanceof graphql_1.GraphQLObjectType) {\n            const fields = type.getFields();\n            Object.values(fields).forEach((field) => {\n                wrapField(field);\n            });\n        }\n    });\n    return schema;\n}\nexports.enablePluginsForSchemaResolvers = enablePluginsForSchemaResolvers;\nfunction pluginsEnabledForSchemaResolvers(schema) {\n    return !!schema[symbolPluginsEnabled];\n}\nexports.pluginsEnabledForSchemaResolvers = pluginsEnabledForSchemaResolvers;\nfunction wrapField(field) {\n    const originalFieldResolve = field.resolve;\n    field.resolve = (source, args, contextValue, info) => {\n        const willResolveField = contextValue?.[exports.symbolExecutionDispatcherWillResolveField];\n        const userFieldResolver = contextValue?.[exports.symbolUserFieldResolver];\n        const didResolveField = typeof willResolveField === 'function' &&\n            willResolveField({ source, args, contextValue, info });\n        const fieldResolver = originalFieldResolve || userFieldResolver || graphql_1.defaultFieldResolver;\n        try {\n            const result = fieldResolver(source, args, contextValue, info);\n            if (typeof didResolveField === 'function') {\n                whenResultIsFinished(result, didResolveField);\n            }\n            return result;\n        }\n        catch (error) {\n            if (typeof didResolveField === 'function') {\n                didResolveField(error);\n            }\n            throw error;\n        }\n    };\n}\nfunction isPromise(x) {\n    return x && typeof x.then === 'function';\n}\nfunction whenResultIsFinished(result, callback) {\n    if (isPromise(result)) {\n        result.then((r) => whenResultIsFinished(r, callback), (err) => callback(err));\n    }\n    else if (Array.isArray(result)) {\n        if (result.some(isPromise)) {\n            Promise.all(result).then((r) => callback(null, r), (err) => callback(err));\n        }\n        else {\n            callback(null, result);\n        }\n    }\n    else {\n        callback(null, result);\n    }\n}\nexports.whenResultIsFinished = whenResultIsFinished;\n//# sourceMappingURL=schemaInstrumentation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvc2NoZW1hSW5zdHJ1bWVudGF0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDRCQUE0QixHQUFHLHdDQUF3QyxHQUFHLHVDQUF1QyxHQUFHLCtCQUErQixHQUFHLGlEQUFpRDtBQUN2TSxrQkFBa0IsbUJBQU8sQ0FBQyx1REFBUztBQUNuQyxpREFBaUQ7QUFDakQsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixrQ0FBa0M7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvc2NoZW1hSW5zdHJ1bWVudGF0aW9uLmpzPzU0OWIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLndoZW5SZXN1bHRJc0ZpbmlzaGVkID0gZXhwb3J0cy5wbHVnaW5zRW5hYmxlZEZvclNjaGVtYVJlc29sdmVycyA9IGV4cG9ydHMuZW5hYmxlUGx1Z2luc0ZvclNjaGVtYVJlc29sdmVycyA9IGV4cG9ydHMuc3ltYm9sVXNlckZpZWxkUmVzb2x2ZXIgPSBleHBvcnRzLnN5bWJvbEV4ZWN1dGlvbkRpc3BhdGNoZXJXaWxsUmVzb2x2ZUZpZWxkID0gdm9pZCAwO1xuY29uc3QgZ3JhcGhxbF8xID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5leHBvcnRzLnN5bWJvbEV4ZWN1dGlvbkRpc3BhdGNoZXJXaWxsUmVzb2x2ZUZpZWxkID0gU3ltYm9sKCdhcG9sbG9TZXJ2ZXJFeGVjdXRpb25EaXNwYXRjaGVyV2lsbFJlc29sdmVGaWVsZCcpO1xuZXhwb3J0cy5zeW1ib2xVc2VyRmllbGRSZXNvbHZlciA9IFN5bWJvbCgnYXBvbGxvU2VydmVyVXNlckZpZWxkUmVzb2x2ZXInKTtcbmNvbnN0IHN5bWJvbFBsdWdpbnNFbmFibGVkID0gU3ltYm9sKCdhcG9sbG9TZXJ2ZXJQbHVnaW5zRW5hYmxlZCcpO1xuZnVuY3Rpb24gZW5hYmxlUGx1Z2luc0ZvclNjaGVtYVJlc29sdmVycyhzY2hlbWEpIHtcbiAgICBpZiAocGx1Z2luc0VuYWJsZWRGb3JTY2hlbWFSZXNvbHZlcnMoc2NoZW1hKSkge1xuICAgICAgICByZXR1cm4gc2NoZW1hO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2NoZW1hLCBzeW1ib2xQbHVnaW5zRW5hYmxlZCwge1xuICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICB9KTtcbiAgICBjb25zdCB0eXBlTWFwID0gc2NoZW1hLmdldFR5cGVNYXAoKTtcbiAgICBPYmplY3QudmFsdWVzKHR5cGVNYXApLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgaWYgKCEoMCwgZ3JhcGhxbF8xLmdldE5hbWVkVHlwZSkodHlwZSkubmFtZS5zdGFydHNXaXRoKCdfXycpICYmXG4gICAgICAgICAgICB0eXBlIGluc3RhbmNlb2YgZ3JhcGhxbF8xLkdyYXBoUUxPYmplY3RUeXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSB0eXBlLmdldEZpZWxkcygpO1xuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhmaWVsZHMpLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICAgICAgICAgICAgd3JhcEZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmV4cG9ydHMuZW5hYmxlUGx1Z2luc0ZvclNjaGVtYVJlc29sdmVycyA9IGVuYWJsZVBsdWdpbnNGb3JTY2hlbWFSZXNvbHZlcnM7XG5mdW5jdGlvbiBwbHVnaW5zRW5hYmxlZEZvclNjaGVtYVJlc29sdmVycyhzY2hlbWEpIHtcbiAgICByZXR1cm4gISFzY2hlbWFbc3ltYm9sUGx1Z2luc0VuYWJsZWRdO1xufVxuZXhwb3J0cy5wbHVnaW5zRW5hYmxlZEZvclNjaGVtYVJlc29sdmVycyA9IHBsdWdpbnNFbmFibGVkRm9yU2NoZW1hUmVzb2x2ZXJzO1xuZnVuY3Rpb24gd3JhcEZpZWxkKGZpZWxkKSB7XG4gICAgY29uc3Qgb3JpZ2luYWxGaWVsZFJlc29sdmUgPSBmaWVsZC5yZXNvbHZlO1xuICAgIGZpZWxkLnJlc29sdmUgPSAoc291cmNlLCBhcmdzLCBjb250ZXh0VmFsdWUsIGluZm8pID0+IHtcbiAgICAgICAgY29uc3Qgd2lsbFJlc29sdmVGaWVsZCA9IGNvbnRleHRWYWx1ZT8uW2V4cG9ydHMuc3ltYm9sRXhlY3V0aW9uRGlzcGF0Y2hlcldpbGxSZXNvbHZlRmllbGRdO1xuICAgICAgICBjb25zdCB1c2VyRmllbGRSZXNvbHZlciA9IGNvbnRleHRWYWx1ZT8uW2V4cG9ydHMuc3ltYm9sVXNlckZpZWxkUmVzb2x2ZXJdO1xuICAgICAgICBjb25zdCBkaWRSZXNvbHZlRmllbGQgPSB0eXBlb2Ygd2lsbFJlc29sdmVGaWVsZCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgd2lsbFJlc29sdmVGaWVsZCh7IHNvdXJjZSwgYXJncywgY29udGV4dFZhbHVlLCBpbmZvIH0pO1xuICAgICAgICBjb25zdCBmaWVsZFJlc29sdmVyID0gb3JpZ2luYWxGaWVsZFJlc29sdmUgfHwgdXNlckZpZWxkUmVzb2x2ZXIgfHwgZ3JhcGhxbF8xLmRlZmF1bHRGaWVsZFJlc29sdmVyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmllbGRSZXNvbHZlcihzb3VyY2UsIGFyZ3MsIGNvbnRleHRWYWx1ZSwgaW5mbyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRpZFJlc29sdmVGaWVsZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHdoZW5SZXN1bHRJc0ZpbmlzaGVkKHJlc3VsdCwgZGlkUmVzb2x2ZUZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRpZFJlc29sdmVGaWVsZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGRpZFJlc29sdmVGaWVsZChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBpc1Byb21pc2UoeCkge1xuICAgIHJldHVybiB4ICYmIHR5cGVvZiB4LnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiB3aGVuUmVzdWx0SXNGaW5pc2hlZChyZXN1bHQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgIHJlc3VsdC50aGVuKChyKSA9PiB3aGVuUmVzdWx0SXNGaW5pc2hlZChyLCBjYWxsYmFjayksIChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5zb21lKGlzUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHJlc3VsdCkudGhlbigocikgPT4gY2FsbGJhY2sobnVsbCwgciksIChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICB9XG59XG5leHBvcnRzLndoZW5SZXN1bHRJc0ZpbmlzaGVkID0gd2hlblJlc3VsdElzRmluaXNoZWQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWFJbnN0cnVtZW50YXRpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/schemaInstrumentation.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/utils/schemaManager.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/utils/schemaManager.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.SchemaManager = void 0;\nclass SchemaManager {\n    constructor(options) {\n        this.onSchemaLoadOrUpdateListeners = new Set();\n        this.isStopped = false;\n        this.logger = options.logger;\n        this.schemaDerivedDataProvider = options.schemaDerivedDataProvider;\n        if ('gateway' in options) {\n            this.modeSpecificState = {\n                mode: 'gateway',\n                gateway: options.gateway,\n                apolloConfig: options.apolloConfig,\n            };\n        }\n        else {\n            this.modeSpecificState = {\n                mode: 'schema',\n                apiSchema: options.apiSchema,\n                schemaDerivedData: options.schemaDerivedDataProvider(options.apiSchema),\n            };\n        }\n    }\n    async start() {\n        if (this.modeSpecificState.mode === 'gateway') {\n            const gateway = this.modeSpecificState.gateway;\n            if (gateway.onSchemaLoadOrUpdate) {\n                this.modeSpecificState.unsubscribeFromGateway =\n                    gateway.onSchemaLoadOrUpdate((schemaContext) => {\n                        this.processSchemaLoadOrUpdateEvent(schemaContext);\n                    });\n            }\n            else {\n                throw new Error(\"Unexpectedly couldn't find onSchemaLoadOrUpdate on gateway\");\n            }\n            const config = await this.modeSpecificState.gateway.load({\n                apollo: this.modeSpecificState.apolloConfig,\n            });\n            return config.executor;\n        }\n        else {\n            this.processSchemaLoadOrUpdateEvent({\n                apiSchema: this.modeSpecificState.apiSchema,\n            }, this.modeSpecificState.schemaDerivedData);\n            return null;\n        }\n    }\n    onSchemaLoadOrUpdate(callback) {\n        if (!this.schemaContext) {\n            throw new Error('You must call start() before onSchemaLoadOrUpdate()');\n        }\n        if (!this.isStopped) {\n            try {\n                callback(this.schemaContext);\n            }\n            catch (e) {\n                throw new Error(`An error was thrown from an 'onSchemaLoadOrUpdate' listener: ${e.message}`);\n            }\n        }\n        this.onSchemaLoadOrUpdateListeners.add(callback);\n        return () => {\n            this.onSchemaLoadOrUpdateListeners.delete(callback);\n        };\n    }\n    getSchemaDerivedData() {\n        if (!this.schemaDerivedData) {\n            throw new Error('You must call start() before getSchemaDerivedData()');\n        }\n        return this.schemaDerivedData;\n    }\n    async stop() {\n        this.isStopped = true;\n        if (this.modeSpecificState.mode === 'gateway') {\n            this.modeSpecificState.unsubscribeFromGateway?.();\n            await this.modeSpecificState.gateway.stop?.();\n        }\n    }\n    processSchemaLoadOrUpdateEvent(schemaContext, schemaDerivedData) {\n        if (!this.isStopped) {\n            this.schemaDerivedData =\n                schemaDerivedData ??\n                    this.schemaDerivedDataProvider(schemaContext.apiSchema);\n            this.schemaContext = schemaContext;\n            this.onSchemaLoadOrUpdateListeners.forEach((listener) => {\n                try {\n                    listener(schemaContext);\n                }\n                catch (e) {\n                    this.logger.error(\"An error was thrown from an 'onSchemaLoadOrUpdate' listener\");\n                    this.logger.error(e);\n                }\n            });\n        }\n    }\n}\nexports.SchemaManager = SchemaManager;\n//# sourceMappingURL=schemaManager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdXRpbHMvc2NoZW1hTWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLFVBQVU7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy91dGlscy9zY2hlbWFNYW5hZ2VyLmpzPzYwYjMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNjaGVtYU1hbmFnZXIgPSB2b2lkIDA7XG5jbGFzcyBTY2hlbWFNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub25TY2hlbWFMb2FkT3JVcGRhdGVMaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gb3B0aW9ucy5sb2dnZXI7XG4gICAgICAgIHRoaXMuc2NoZW1hRGVyaXZlZERhdGFQcm92aWRlciA9IG9wdGlvbnMuc2NoZW1hRGVyaXZlZERhdGFQcm92aWRlcjtcbiAgICAgICAgaWYgKCdnYXRld2F5JyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlID0ge1xuICAgICAgICAgICAgICAgIG1vZGU6ICdnYXRld2F5JyxcbiAgICAgICAgICAgICAgICBnYXRld2F5OiBvcHRpb25zLmdhdGV3YXksXG4gICAgICAgICAgICAgICAgYXBvbGxvQ29uZmlnOiBvcHRpb25zLmFwb2xsb0NvbmZpZyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlID0ge1xuICAgICAgICAgICAgICAgIG1vZGU6ICdzY2hlbWEnLFxuICAgICAgICAgICAgICAgIGFwaVNjaGVtYTogb3B0aW9ucy5hcGlTY2hlbWEsXG4gICAgICAgICAgICAgICAgc2NoZW1hRGVyaXZlZERhdGE6IG9wdGlvbnMuc2NoZW1hRGVyaXZlZERhdGFQcm92aWRlcihvcHRpb25zLmFwaVNjaGVtYSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy5tb2RlU3BlY2lmaWNTdGF0ZS5tb2RlID09PSAnZ2F0ZXdheScpIHtcbiAgICAgICAgICAgIGNvbnN0IGdhdGV3YXkgPSB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlLmdhdGV3YXk7XG4gICAgICAgICAgICBpZiAoZ2F0ZXdheS5vblNjaGVtYUxvYWRPclVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kZVNwZWNpZmljU3RhdGUudW5zdWJzY3JpYmVGcm9tR2F0ZXdheSA9XG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXkub25TY2hlbWFMb2FkT3JVcGRhdGUoKHNjaGVtYUNvbnRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NjaGVtYUxvYWRPclVwZGF0ZUV2ZW50KHNjaGVtYUNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWRseSBjb3VsZG4ndCBmaW5kIG9uU2NoZW1hTG9hZE9yVXBkYXRlIG9uIGdhdGV3YXlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSBhd2FpdCB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlLmdhdGV3YXkubG9hZCh7XG4gICAgICAgICAgICAgICAgYXBvbGxvOiB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlLmFwb2xsb0NvbmZpZyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5leGVjdXRvcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NjaGVtYUxvYWRPclVwZGF0ZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBhcGlTY2hlbWE6IHRoaXMubW9kZVNwZWNpZmljU3RhdGUuYXBpU2NoZW1hLFxuICAgICAgICAgICAgfSwgdGhpcy5tb2RlU3BlY2lmaWNTdGF0ZS5zY2hlbWFEZXJpdmVkRGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblNjaGVtYUxvYWRPclVwZGF0ZShjYWxsYmFjaykge1xuICAgICAgICBpZiAoIXRoaXMuc2NoZW1hQ29udGV4dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBjYWxsIHN0YXJ0KCkgYmVmb3JlIG9uU2NoZW1hTG9hZE9yVXBkYXRlKCknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuc2NoZW1hQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQW4gZXJyb3Igd2FzIHRocm93biBmcm9tIGFuICdvblNjaGVtYUxvYWRPclVwZGF0ZScgbGlzdGVuZXI6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub25TY2hlbWFMb2FkT3JVcGRhdGVMaXN0ZW5lcnMuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25TY2hlbWFMb2FkT3JVcGRhdGVMaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0U2NoZW1hRGVyaXZlZERhdGEoKSB7XG4gICAgICAgIGlmICghdGhpcy5zY2hlbWFEZXJpdmVkRGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBjYWxsIHN0YXJ0KCkgYmVmb3JlIGdldFNjaGVtYURlcml2ZWREYXRhKCknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWFEZXJpdmVkRGF0YTtcbiAgICB9XG4gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5tb2RlU3BlY2lmaWNTdGF0ZS5tb2RlID09PSAnZ2F0ZXdheScpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZVNwZWNpZmljU3RhdGUudW5zdWJzY3JpYmVGcm9tR2F0ZXdheT8uKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlLmdhdGV3YXkuc3RvcD8uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc1NjaGVtYUxvYWRPclVwZGF0ZUV2ZW50KHNjaGVtYUNvbnRleHQsIHNjaGVtYURlcml2ZWREYXRhKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NoZW1hRGVyaXZlZERhdGEgPVxuICAgICAgICAgICAgICAgIHNjaGVtYURlcml2ZWREYXRhID8/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZW1hRGVyaXZlZERhdGFQcm92aWRlcihzY2hlbWFDb250ZXh0LmFwaVNjaGVtYSk7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYUNvbnRleHQgPSBzY2hlbWFDb250ZXh0O1xuICAgICAgICAgICAgdGhpcy5vblNjaGVtYUxvYWRPclVwZGF0ZUxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyKHNjaGVtYUNvbnRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkFuIGVycm9yIHdhcyB0aHJvd24gZnJvbSBhbiAnb25TY2hlbWFMb2FkT3JVcGRhdGUnIGxpc3RlbmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuU2NoZW1hTWFuYWdlciA9IFNjaGVtYU1hbmFnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWFNYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/utils/schemaManager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/NoIntrospection.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/validationRules/NoIntrospection.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.NoIntrospection = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst index_js_1 = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/errors/index.js\");\nconst NoIntrospection = (context) => ({\n    Field(node) {\n        if (node.name.value === '__schema' || node.name.value === '__type') {\n            context.reportError(new graphql_1.GraphQLError('GraphQL introspection is not allowed by Apollo Server, but the query contained __schema or __type. To enable introspection, pass introspection: true to ApolloServer in production', {\n                nodes: [node],\n                extensions: {\n                    validationErrorCode: index_js_1.ApolloServerValidationErrorCode.INTROSPECTION_DISABLED,\n                },\n            }));\n        }\n    },\n});\nexports.NoIntrospection = NoIntrospection;\n//# sourceMappingURL=NoIntrospection.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdmFsaWRhdGlvblJ1bGVzL05vSW50cm9zcGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx1QkFBdUI7QUFDdkIsa0JBQWtCLG1CQUFPLENBQUMsdURBQVM7QUFDbkMsbUJBQW1CLG1CQUFPLENBQUMsd0ZBQW9CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ0QsdUJBQXVCO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy92YWxpZGF0aW9uUnVsZXMvTm9JbnRyb3NwZWN0aW9uLmpzP2Q5OGIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk5vSW50cm9zcGVjdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGdyYXBocWxfMSA9IHJlcXVpcmUoXCJncmFwaHFsXCIpO1xuY29uc3QgaW5kZXhfanNfMSA9IHJlcXVpcmUoXCIuLi9lcnJvcnMvaW5kZXguanNcIik7XG5jb25zdCBOb0ludHJvc3BlY3Rpb24gPSAoY29udGV4dCkgPT4gKHtcbiAgICBGaWVsZChub2RlKSB7XG4gICAgICAgIGlmIChub2RlLm5hbWUudmFsdWUgPT09ICdfX3NjaGVtYScgfHwgbm9kZS5uYW1lLnZhbHVlID09PSAnX190eXBlJykge1xuICAgICAgICAgICAgY29udGV4dC5yZXBvcnRFcnJvcihuZXcgZ3JhcGhxbF8xLkdyYXBoUUxFcnJvcignR3JhcGhRTCBpbnRyb3NwZWN0aW9uIGlzIG5vdCBhbGxvd2VkIGJ5IEFwb2xsbyBTZXJ2ZXIsIGJ1dCB0aGUgcXVlcnkgY29udGFpbmVkIF9fc2NoZW1hIG9yIF9fdHlwZS4gVG8gZW5hYmxlIGludHJvc3BlY3Rpb24sIHBhc3MgaW50cm9zcGVjdGlvbjogdHJ1ZSB0byBBcG9sbG9TZXJ2ZXIgaW4gcHJvZHVjdGlvbicsIHtcbiAgICAgICAgICAgICAgICBub2RlczogW25vZGVdLFxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yQ29kZTogaW5kZXhfanNfMS5BcG9sbG9TZXJ2ZXJWYWxpZGF0aW9uRXJyb3JDb2RlLklOVFJPU1BFQ1RJT05fRElTQUJMRUQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH0sXG59KTtcbmV4cG9ydHMuTm9JbnRyb3NwZWN0aW9uID0gTm9JbnRyb3NwZWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm9JbnRyb3NwZWN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/NoIntrospection.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/RecursiveSelectionsLimit.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/validationRules/RecursiveSelectionsLimit.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createMaxRecursiveSelectionsRule = exports.DEFAULT_MAX_RECURSIVE_SELECTIONS = void 0;\nconst graphql_1 = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\");\nconst index_js_1 = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/errors/index.js\");\nexports.DEFAULT_MAX_RECURSIVE_SELECTIONS = 10000000;\nclass RecursiveSelectionValidationContext {\n    constructor(selectionCountLimit, context) {\n        this.selectionCountLimit = selectionCountLimit;\n        this.context = context;\n        this.fragmentInfo = new Map();\n        this.operationInfo = new Map();\n        this.fragmentRecursiveSelectionCount = new Map();\n    }\n    getExecutionDefinitionInfo() {\n        if (this.currentFragment !== undefined) {\n            let entry = this.fragmentInfo.get(this.currentFragment);\n            if (!entry) {\n                entry = {\n                    selectionCount: 0,\n                    fragmentSpreads: new Map(),\n                };\n                this.fragmentInfo.set(this.currentFragment, entry);\n            }\n            return entry;\n        }\n        if (this.currentOperation !== undefined) {\n            let entry = this.operationInfo.get(this.currentOperation);\n            if (!entry) {\n                entry = {\n                    selectionCount: 0,\n                    fragmentSpreads: new Map(),\n                };\n                this.operationInfo.set(this.currentOperation, entry);\n            }\n            return entry;\n        }\n        return undefined;\n    }\n    processSelection(fragmentSpreadName) {\n        const definitionInfo = this.getExecutionDefinitionInfo();\n        if (!definitionInfo) {\n            return;\n        }\n        definitionInfo.selectionCount++;\n        if (fragmentSpreadName !== undefined) {\n            let spreadCount = (definitionInfo.fragmentSpreads.get(fragmentSpreadName) ?? 0) + 1;\n            definitionInfo.fragmentSpreads.set(fragmentSpreadName, spreadCount);\n        }\n    }\n    enterFragment(fragment) {\n        this.currentFragment = fragment;\n    }\n    leaveFragment() {\n        this.currentFragment = undefined;\n    }\n    enterOperation(operation) {\n        this.currentOperation = operation;\n    }\n    leaveOperation() {\n        this.currentOperation = undefined;\n    }\n    computeFragmentRecursiveSelectionsCount(fragment) {\n        const cachedCount = this.fragmentRecursiveSelectionCount.get(fragment);\n        if (cachedCount === null) {\n            return 0;\n        }\n        if (cachedCount !== undefined) {\n            return cachedCount;\n        }\n        this.fragmentRecursiveSelectionCount.set(fragment, null);\n        const definitionInfo = this.fragmentInfo.get(fragment);\n        let count = 0;\n        if (definitionInfo) {\n            count = definitionInfo.selectionCount;\n            for (const [fragment, spreadCount] of definitionInfo.fragmentSpreads) {\n                count +=\n                    spreadCount * this.computeFragmentRecursiveSelectionsCount(fragment);\n            }\n        }\n        this.fragmentRecursiveSelectionCount.set(fragment, count);\n        return count;\n    }\n    reportError(operation) {\n        const operationName = operation\n            ? `Operation \"${operation}\"`\n            : 'Anonymous operation';\n        this.context.reportError(new graphql_1.GraphQLError(`${operationName} recursively requests too many selections.`, {\n            nodes: [],\n            extensions: {\n                validationErrorCode: index_js_1.ApolloServerValidationErrorCode.MAX_RECURSIVE_SELECTIONS_EXCEEDED,\n            },\n        }));\n    }\n    checkLimitExceeded() {\n        for (const [operation, definitionInfo] of this.operationInfo) {\n            let count = definitionInfo.selectionCount;\n            for (const [fragment, spreadCount] of definitionInfo.fragmentSpreads) {\n                count +=\n                    spreadCount * this.computeFragmentRecursiveSelectionsCount(fragment);\n            }\n            if (count > this.selectionCountLimit) {\n                this.reportError(operation);\n            }\n        }\n    }\n}\nfunction createMaxRecursiveSelectionsRule(limit) {\n    return (context) => {\n        const selectionContext = new RecursiveSelectionValidationContext(limit, context);\n        return {\n            Field() {\n                selectionContext.processSelection();\n            },\n            InlineFragment() {\n                selectionContext.processSelection();\n            },\n            FragmentSpread(node) {\n                selectionContext.processSelection(node.name.value);\n            },\n            FragmentDefinition: {\n                enter(node) {\n                    selectionContext.enterFragment(node.name.value);\n                },\n                leave() {\n                    selectionContext.leaveFragment();\n                },\n            },\n            OperationDefinition: {\n                enter(node) {\n                    selectionContext.enterOperation(node.name?.value ?? null);\n                },\n                leave() {\n                    selectionContext.leaveOperation();\n                },\n            },\n            Document: {\n                leave() {\n                    selectionContext.checkLimitExceeded();\n                },\n            },\n        };\n    };\n}\nexports.createMaxRecursiveSelectionsRule = createMaxRecursiveSelectionsRule;\n//# sourceMappingURL=RecursiveSelectionsLimit.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdmFsaWRhdGlvblJ1bGVzL1JlY3Vyc2l2ZVNlbGVjdGlvbnNMaW1pdC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx3Q0FBd0MsR0FBRyx3Q0FBd0M7QUFDbkYsa0JBQWtCLG1CQUFPLENBQUMsdURBQVM7QUFDbkMsbUJBQW1CLG1CQUFPLENBQUMsd0ZBQW9CO0FBQy9DLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVO0FBQ3RDO0FBQ0EsK0RBQStELGVBQWU7QUFDOUU7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy92YWxpZGF0aW9uUnVsZXMvUmVjdXJzaXZlU2VsZWN0aW9uc0xpbWl0LmpzP2E5ZjEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyZWF0ZU1heFJlY3Vyc2l2ZVNlbGVjdGlvbnNSdWxlID0gZXhwb3J0cy5ERUZBVUxUX01BWF9SRUNVUlNJVkVfU0VMRUNUSU9OUyA9IHZvaWQgMDtcbmNvbnN0IGdyYXBocWxfMSA9IHJlcXVpcmUoXCJncmFwaHFsXCIpO1xuY29uc3QgaW5kZXhfanNfMSA9IHJlcXVpcmUoXCIuLi9lcnJvcnMvaW5kZXguanNcIik7XG5leHBvcnRzLkRFRkFVTFRfTUFYX1JFQ1VSU0lWRV9TRUxFQ1RJT05TID0gMTAwMDAwMDA7XG5jbGFzcyBSZWN1cnNpdmVTZWxlY3Rpb25WYWxpZGF0aW9uQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0aW9uQ291bnRMaW1pdCwgY29udGV4dCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbkNvdW50TGltaXQgPSBzZWxlY3Rpb25Db3VudExpbWl0O1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmZyYWdtZW50SW5mbyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25JbmZvID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmZyYWdtZW50UmVjdXJzaXZlU2VsZWN0aW9uQ291bnQgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldEV4ZWN1dGlvbkRlZmluaXRpb25JbmZvKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50RnJhZ21lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IGVudHJ5ID0gdGhpcy5mcmFnbWVudEluZm8uZ2V0KHRoaXMuY3VycmVudEZyYWdtZW50KTtcbiAgICAgICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICAgICAgICBlbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ291bnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U3ByZWFkczogbmV3IE1hcCgpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFnbWVudEluZm8uc2V0KHRoaXMuY3VycmVudEZyYWdtZW50LCBlbnRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE9wZXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgZW50cnkgPSB0aGlzLm9wZXJhdGlvbkluZm8uZ2V0KHRoaXMuY3VycmVudE9wZXJhdGlvbik7XG4gICAgICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgICAgICAgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNwcmVhZHM6IG5ldyBNYXAoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0aW9uSW5mby5zZXQodGhpcy5jdXJyZW50T3BlcmF0aW9uLCBlbnRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcHJvY2Vzc1NlbGVjdGlvbihmcmFnbWVudFNwcmVhZE5hbWUpIHtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbkluZm8gPSB0aGlzLmdldEV4ZWN1dGlvbkRlZmluaXRpb25JbmZvKCk7XG4gICAgICAgIGlmICghZGVmaW5pdGlvbkluZm8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZWZpbml0aW9uSW5mby5zZWxlY3Rpb25Db3VudCsrO1xuICAgICAgICBpZiAoZnJhZ21lbnRTcHJlYWROYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBzcHJlYWRDb3VudCA9IChkZWZpbml0aW9uSW5mby5mcmFnbWVudFNwcmVhZHMuZ2V0KGZyYWdtZW50U3ByZWFkTmFtZSkgPz8gMCkgKyAxO1xuICAgICAgICAgICAgZGVmaW5pdGlvbkluZm8uZnJhZ21lbnRTcHJlYWRzLnNldChmcmFnbWVudFNwcmVhZE5hbWUsIHNwcmVhZENvdW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnRlckZyYWdtZW50KGZyYWdtZW50KSB7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYWdtZW50ID0gZnJhZ21lbnQ7XG4gICAgfVxuICAgIGxlYXZlRnJhZ21lbnQoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYWdtZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBlbnRlck9wZXJhdGlvbihvcGVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5jdXJyZW50T3BlcmF0aW9uID0gb3BlcmF0aW9uO1xuICAgIH1cbiAgICBsZWF2ZU9wZXJhdGlvbigpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50T3BlcmF0aW9uID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb21wdXRlRnJhZ21lbnRSZWN1cnNpdmVTZWxlY3Rpb25zQ291bnQoZnJhZ21lbnQpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkQ291bnQgPSB0aGlzLmZyYWdtZW50UmVjdXJzaXZlU2VsZWN0aW9uQ291bnQuZ2V0KGZyYWdtZW50KTtcbiAgICAgICAgaWYgKGNhY2hlZENvdW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVkQ291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENvdW50O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnJhZ21lbnRSZWN1cnNpdmVTZWxlY3Rpb25Db3VudC5zZXQoZnJhZ21lbnQsIG51bGwpO1xuICAgICAgICBjb25zdCBkZWZpbml0aW9uSW5mbyA9IHRoaXMuZnJhZ21lbnRJbmZvLmdldChmcmFnbWVudCk7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGlmIChkZWZpbml0aW9uSW5mbykge1xuICAgICAgICAgICAgY291bnQgPSBkZWZpbml0aW9uSW5mby5zZWxlY3Rpb25Db3VudDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2ZyYWdtZW50LCBzcHJlYWRDb3VudF0gb2YgZGVmaW5pdGlvbkluZm8uZnJhZ21lbnRTcHJlYWRzKSB7XG4gICAgICAgICAgICAgICAgY291bnQgKz1cbiAgICAgICAgICAgICAgICAgICAgc3ByZWFkQ291bnQgKiB0aGlzLmNvbXB1dGVGcmFnbWVudFJlY3Vyc2l2ZVNlbGVjdGlvbnNDb3VudChmcmFnbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcmFnbWVudFJlY3Vyc2l2ZVNlbGVjdGlvbkNvdW50LnNldChmcmFnbWVudCwgY291bnQpO1xuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuICAgIHJlcG9ydEVycm9yKG9wZXJhdGlvbikge1xuICAgICAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gb3BlcmF0aW9uXG4gICAgICAgICAgICA/IGBPcGVyYXRpb24gXCIke29wZXJhdGlvbn1cImBcbiAgICAgICAgICAgIDogJ0Fub255bW91cyBvcGVyYXRpb24nO1xuICAgICAgICB0aGlzLmNvbnRleHQucmVwb3J0RXJyb3IobmV3IGdyYXBocWxfMS5HcmFwaFFMRXJyb3IoYCR7b3BlcmF0aW9uTmFtZX0gcmVjdXJzaXZlbHkgcmVxdWVzdHMgdG9vIG1hbnkgc2VsZWN0aW9ucy5gLCB7XG4gICAgICAgICAgICBub2RlczogW10sXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yQ29kZTogaW5kZXhfanNfMS5BcG9sbG9TZXJ2ZXJWYWxpZGF0aW9uRXJyb3JDb2RlLk1BWF9SRUNVUlNJVkVfU0VMRUNUSU9OU19FWENFRURFRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2hlY2tMaW1pdEV4Y2VlZGVkKCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtvcGVyYXRpb24sIGRlZmluaXRpb25JbmZvXSBvZiB0aGlzLm9wZXJhdGlvbkluZm8pIHtcbiAgICAgICAgICAgIGxldCBjb3VudCA9IGRlZmluaXRpb25JbmZvLnNlbGVjdGlvbkNvdW50O1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZnJhZ21lbnQsIHNwcmVhZENvdW50XSBvZiBkZWZpbml0aW9uSW5mby5mcmFnbWVudFNwcmVhZHMpIHtcbiAgICAgICAgICAgICAgICBjb3VudCArPVxuICAgICAgICAgICAgICAgICAgICBzcHJlYWRDb3VudCAqIHRoaXMuY29tcHV0ZUZyYWdtZW50UmVjdXJzaXZlU2VsZWN0aW9uc0NvdW50KGZyYWdtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb3VudCA+IHRoaXMuc2VsZWN0aW9uQ291bnRMaW1pdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0RXJyb3Iob3BlcmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZU1heFJlY3Vyc2l2ZVNlbGVjdGlvbnNSdWxlKGxpbWl0KSB7XG4gICAgcmV0dXJuIChjb250ZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbkNvbnRleHQgPSBuZXcgUmVjdXJzaXZlU2VsZWN0aW9uVmFsaWRhdGlvbkNvbnRleHQobGltaXQsIGNvbnRleHQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgRmllbGQoKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQ29udGV4dC5wcm9jZXNzU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSW5saW5lRnJhZ21lbnQoKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQ29udGV4dC5wcm9jZXNzU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRnJhZ21lbnRTcHJlYWQobm9kZSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNvbnRleHQucHJvY2Vzc1NlbGVjdGlvbihub2RlLm5hbWUudmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEZyYWdtZW50RGVmaW5pdGlvbjoge1xuICAgICAgICAgICAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ29udGV4dC5lbnRlckZyYWdtZW50KG5vZGUubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsZWF2ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ29udGV4dC5sZWF2ZUZyYWdtZW50KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBPcGVyYXRpb25EZWZpbml0aW9uOiB7XG4gICAgICAgICAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db250ZXh0LmVudGVyT3BlcmF0aW9uKG5vZGUubmFtZT8udmFsdWUgPz8gbnVsbCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsZWF2ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ29udGV4dC5sZWF2ZU9wZXJhdGlvbigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRG9jdW1lbnQ6IHtcbiAgICAgICAgICAgICAgICBsZWF2ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ29udGV4dC5jaGVja0xpbWl0RXhjZWVkZWQoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9O1xufVxuZXhwb3J0cy5jcmVhdGVNYXhSZWN1cnNpdmVTZWxlY3Rpb25zUnVsZSA9IGNyZWF0ZU1heFJlY3Vyc2l2ZVNlbGVjdGlvbnNSdWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjdXJzaXZlU2VsZWN0aW9uc0xpbWl0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/RecursiveSelectionsLimit.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/cjs/validationRules/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createMaxRecursiveSelectionsRule = exports.DEFAULT_MAX_RECURSIVE_SELECTIONS = exports.NoIntrospection = void 0;\nvar NoIntrospection_js_1 = __webpack_require__(/*! ./NoIntrospection.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/NoIntrospection.js\");\nObject.defineProperty(exports, \"NoIntrospection\", ({ enumerable: true, get: function () { return NoIntrospection_js_1.NoIntrospection; } }));\nvar RecursiveSelectionsLimit_js_1 = __webpack_require__(/*! ./RecursiveSelectionsLimit.js */ \"(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/RecursiveSelectionsLimit.js\");\nObject.defineProperty(exports, \"DEFAULT_MAX_RECURSIVE_SELECTIONS\", ({ enumerable: true, get: function () { return RecursiveSelectionsLimit_js_1.DEFAULT_MAX_RECURSIVE_SELECTIONS; } }));\nObject.defineProperty(exports, \"createMaxRecursiveSelectionsRule\", ({ enumerable: true, get: function () { return RecursiveSelectionsLimit_js_1.createMaxRecursiveSelectionsRule; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9janMvdmFsaWRhdGlvblJ1bGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHdDQUF3QyxHQUFHLHdDQUF3QyxHQUFHLHVCQUF1QjtBQUM3RywyQkFBMkIsbUJBQU8sQ0FBQyw2R0FBc0I7QUFDekQsbURBQWtELEVBQUUscUNBQXFDLGdEQUFnRCxFQUFDO0FBQzFJLG9DQUFvQyxtQkFBTyxDQUFDLCtIQUErQjtBQUMzRSxvRUFBbUUsRUFBRSxxQ0FBcUMsMEVBQTBFLEVBQUM7QUFDckwsb0VBQW1FLEVBQUUscUNBQXFDLDBFQUEwRSxFQUFDO0FBQ3JMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2Nqcy92YWxpZGF0aW9uUnVsZXMvaW5kZXguanM/YTU3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JlYXRlTWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUgPSBleHBvcnRzLkRFRkFVTFRfTUFYX1JFQ1VSU0lWRV9TRUxFQ1RJT05TID0gZXhwb3J0cy5Ob0ludHJvc3BlY3Rpb24gPSB2b2lkIDA7XG52YXIgTm9JbnRyb3NwZWN0aW9uX2pzXzEgPSByZXF1aXJlKFwiLi9Ob0ludHJvc3BlY3Rpb24uanNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJOb0ludHJvc3BlY3Rpb25cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE5vSW50cm9zcGVjdGlvbl9qc18xLk5vSW50cm9zcGVjdGlvbjsgfSB9KTtcbnZhciBSZWN1cnNpdmVTZWxlY3Rpb25zTGltaXRfanNfMSA9IHJlcXVpcmUoXCIuL1JlY3Vyc2l2ZVNlbGVjdGlvbnNMaW1pdC5qc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRFRkFVTFRfTUFYX1JFQ1VSU0lWRV9TRUxFQ1RJT05TXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBSZWN1cnNpdmVTZWxlY3Rpb25zTGltaXRfanNfMS5ERUZBVUxUX01BWF9SRUNVUlNJVkVfU0VMRUNUSU9OUzsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNyZWF0ZU1heFJlY3Vyc2l2ZVNlbGVjdGlvbnNSdWxlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBSZWN1cnNpdmVTZWxlY3Rpb25zTGltaXRfanNfMS5jcmVhdGVNYXhSZWN1cnNpdmVTZWxlY3Rpb25zUnVsZTsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/cjs/validationRules/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js ***!
  \*********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/*eslint-disable block-scoped-var, id-length, no-control-regex, no-magic-numbers, no-prototype-builtins, no-redeclare, no-shadow, no-var, sort-vars*/\n\n\nvar $protobuf = __webpack_require__(/*! @apollo/protobufjs/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/minimal.js\");\n\n// Common aliases\nvar $Reader = $protobuf.Reader, $Writer = $protobuf.Writer, $util = $protobuf.util;\n\n// Exported root namespace\nvar $root = $protobuf.roots[\"default\"] || ($protobuf.roots[\"default\"] = {});\n\n$root.Trace = (function() {\n\n    /**\n     * Properties of a Trace.\n     * @exports ITrace\n     * @interface ITrace\n     * @property {google.protobuf.ITimestamp|null} [startTime] Trace startTime\n     * @property {google.protobuf.ITimestamp|null} [endTime] Trace endTime\n     * @property {number|null} [durationNs] Trace durationNs\n     * @property {Trace.INode|null} [root] Trace root\n     * @property {boolean|null} [isIncomplete] Trace isIncomplete\n     * @property {string|null} [signature] Trace signature\n     * @property {string|null} [unexecutedOperationBody] Trace unexecutedOperationBody\n     * @property {string|null} [unexecutedOperationName] Trace unexecutedOperationName\n     * @property {Trace.IDetails|null} [details] Trace details\n     * @property {string|null} [clientName] Trace clientName\n     * @property {string|null} [clientVersion] Trace clientVersion\n     * @property {Trace.IHTTP|null} [http] Trace http\n     * @property {Trace.ICachePolicy|null} [cachePolicy] Trace cachePolicy\n     * @property {Trace.IQueryPlanNode|null} [queryPlan] Trace queryPlan\n     * @property {boolean|null} [fullQueryCacheHit] Trace fullQueryCacheHit\n     * @property {boolean|null} [persistedQueryHit] Trace persistedQueryHit\n     * @property {boolean|null} [persistedQueryRegister] Trace persistedQueryRegister\n     * @property {boolean|null} [registeredOperation] Trace registeredOperation\n     * @property {boolean|null} [forbiddenOperation] Trace forbiddenOperation\n     * @property {number|null} [fieldExecutionWeight] Trace fieldExecutionWeight\n     */\n\n    /**\n     * Constructs a new Trace.\n     * @exports Trace\n     * @classdesc Represents a Trace.\n     * @implements ITrace\n     * @constructor\n     * @param {ITrace=} [properties] Properties to set\n     */\n    function Trace(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * Trace startTime.\n     * @member {google.protobuf.ITimestamp|null|undefined} startTime\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.startTime = null;\n\n    /**\n     * Trace endTime.\n     * @member {google.protobuf.ITimestamp|null|undefined} endTime\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.endTime = null;\n\n    /**\n     * Trace durationNs.\n     * @member {number} durationNs\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.durationNs = 0;\n\n    /**\n     * Trace root.\n     * @member {Trace.INode|null|undefined} root\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.root = null;\n\n    /**\n     * Trace isIncomplete.\n     * @member {boolean} isIncomplete\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.isIncomplete = false;\n\n    /**\n     * Trace signature.\n     * @member {string} signature\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.signature = \"\";\n\n    /**\n     * Trace unexecutedOperationBody.\n     * @member {string} unexecutedOperationBody\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.unexecutedOperationBody = \"\";\n\n    /**\n     * Trace unexecutedOperationName.\n     * @member {string} unexecutedOperationName\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.unexecutedOperationName = \"\";\n\n    /**\n     * Trace details.\n     * @member {Trace.IDetails|null|undefined} details\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.details = null;\n\n    /**\n     * Trace clientName.\n     * @member {string} clientName\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.clientName = \"\";\n\n    /**\n     * Trace clientVersion.\n     * @member {string} clientVersion\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.clientVersion = \"\";\n\n    /**\n     * Trace http.\n     * @member {Trace.IHTTP|null|undefined} http\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.http = null;\n\n    /**\n     * Trace cachePolicy.\n     * @member {Trace.ICachePolicy|null|undefined} cachePolicy\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.cachePolicy = null;\n\n    /**\n     * Trace queryPlan.\n     * @member {Trace.IQueryPlanNode|null|undefined} queryPlan\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.queryPlan = null;\n\n    /**\n     * Trace fullQueryCacheHit.\n     * @member {boolean} fullQueryCacheHit\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.fullQueryCacheHit = false;\n\n    /**\n     * Trace persistedQueryHit.\n     * @member {boolean} persistedQueryHit\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.persistedQueryHit = false;\n\n    /**\n     * Trace persistedQueryRegister.\n     * @member {boolean} persistedQueryRegister\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.persistedQueryRegister = false;\n\n    /**\n     * Trace registeredOperation.\n     * @member {boolean} registeredOperation\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.registeredOperation = false;\n\n    /**\n     * Trace forbiddenOperation.\n     * @member {boolean} forbiddenOperation\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.forbiddenOperation = false;\n\n    /**\n     * Trace fieldExecutionWeight.\n     * @member {number} fieldExecutionWeight\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.fieldExecutionWeight = 0;\n\n    /**\n     * Creates a new Trace instance using the specified properties.\n     * @function create\n     * @memberof Trace\n     * @static\n     * @param {ITrace=} [properties] Properties to set\n     * @returns {Trace} Trace instance\n     */\n    Trace.create = function create(properties) {\n        return new Trace(properties);\n    };\n\n    /**\n     * Encodes the specified Trace message. Does not implicitly {@link Trace.verify|verify} messages.\n     * @function encode\n     * @memberof Trace\n     * @static\n     * @param {ITrace} message Trace message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Trace.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.endTime != null && Object.hasOwnProperty.call(message, \"endTime\"))\n            $root.google.protobuf.Timestamp.encode(message.endTime, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n        if (message.startTime != null && Object.hasOwnProperty.call(message, \"startTime\"))\n            $root.google.protobuf.Timestamp.encode(message.startTime, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();\n        if (message.details != null && Object.hasOwnProperty.call(message, \"details\"))\n            $root.Trace.Details.encode(message.details, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();\n        if (message.clientName != null && Object.hasOwnProperty.call(message, \"clientName\"))\n            writer.uint32(/* id 7, wireType 2 =*/58).string(message.clientName);\n        if (message.clientVersion != null && Object.hasOwnProperty.call(message, \"clientVersion\"))\n            writer.uint32(/* id 8, wireType 2 =*/66).string(message.clientVersion);\n        if (message.http != null && Object.hasOwnProperty.call(message, \"http\"))\n            $root.Trace.HTTP.encode(message.http, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();\n        if (message.durationNs != null && Object.hasOwnProperty.call(message, \"durationNs\"))\n            writer.uint32(/* id 11, wireType 0 =*/88).uint64(message.durationNs);\n        if (message.root != null && Object.hasOwnProperty.call(message, \"root\"))\n            $root.Trace.Node.encode(message.root, writer.uint32(/* id 14, wireType 2 =*/114).fork()).ldelim();\n        if (message.cachePolicy != null && Object.hasOwnProperty.call(message, \"cachePolicy\"))\n            $root.Trace.CachePolicy.encode(message.cachePolicy, writer.uint32(/* id 18, wireType 2 =*/146).fork()).ldelim();\n        if (message.signature != null && Object.hasOwnProperty.call(message, \"signature\"))\n            writer.uint32(/* id 19, wireType 2 =*/154).string(message.signature);\n        if (message.fullQueryCacheHit != null && Object.hasOwnProperty.call(message, \"fullQueryCacheHit\"))\n            writer.uint32(/* id 20, wireType 0 =*/160).bool(message.fullQueryCacheHit);\n        if (message.persistedQueryHit != null && Object.hasOwnProperty.call(message, \"persistedQueryHit\"))\n            writer.uint32(/* id 21, wireType 0 =*/168).bool(message.persistedQueryHit);\n        if (message.persistedQueryRegister != null && Object.hasOwnProperty.call(message, \"persistedQueryRegister\"))\n            writer.uint32(/* id 22, wireType 0 =*/176).bool(message.persistedQueryRegister);\n        if (message.registeredOperation != null && Object.hasOwnProperty.call(message, \"registeredOperation\"))\n            writer.uint32(/* id 24, wireType 0 =*/192).bool(message.registeredOperation);\n        if (message.forbiddenOperation != null && Object.hasOwnProperty.call(message, \"forbiddenOperation\"))\n            writer.uint32(/* id 25, wireType 0 =*/200).bool(message.forbiddenOperation);\n        if (message.queryPlan != null && Object.hasOwnProperty.call(message, \"queryPlan\"))\n            $root.Trace.QueryPlanNode.encode(message.queryPlan, writer.uint32(/* id 26, wireType 2 =*/210).fork()).ldelim();\n        if (message.unexecutedOperationBody != null && Object.hasOwnProperty.call(message, \"unexecutedOperationBody\"))\n            writer.uint32(/* id 27, wireType 2 =*/218).string(message.unexecutedOperationBody);\n        if (message.unexecutedOperationName != null && Object.hasOwnProperty.call(message, \"unexecutedOperationName\"))\n            writer.uint32(/* id 28, wireType 2 =*/226).string(message.unexecutedOperationName);\n        if (message.fieldExecutionWeight != null && Object.hasOwnProperty.call(message, \"fieldExecutionWeight\"))\n            writer.uint32(/* id 31, wireType 1 =*/249).double(message.fieldExecutionWeight);\n        if (message.isIncomplete != null && Object.hasOwnProperty.call(message, \"isIncomplete\"))\n            writer.uint32(/* id 33, wireType 0 =*/264).bool(message.isIncomplete);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified Trace message, length delimited. Does not implicitly {@link Trace.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof Trace\n     * @static\n     * @param {ITrace} message Trace message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Trace.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a Trace message from the specified reader or buffer.\n     * @function decode\n     * @memberof Trace\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {Trace} Trace\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Trace.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 4:\n                message.startTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                break;\n            case 3:\n                message.endTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                break;\n            case 11:\n                message.durationNs = reader.uint64();\n                break;\n            case 14:\n                message.root = $root.Trace.Node.decode(reader, reader.uint32());\n                break;\n            case 33:\n                message.isIncomplete = reader.bool();\n                break;\n            case 19:\n                message.signature = reader.string();\n                break;\n            case 27:\n                message.unexecutedOperationBody = reader.string();\n                break;\n            case 28:\n                message.unexecutedOperationName = reader.string();\n                break;\n            case 6:\n                message.details = $root.Trace.Details.decode(reader, reader.uint32());\n                break;\n            case 7:\n                message.clientName = reader.string();\n                break;\n            case 8:\n                message.clientVersion = reader.string();\n                break;\n            case 10:\n                message.http = $root.Trace.HTTP.decode(reader, reader.uint32());\n                break;\n            case 18:\n                message.cachePolicy = $root.Trace.CachePolicy.decode(reader, reader.uint32());\n                break;\n            case 26:\n                message.queryPlan = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                break;\n            case 20:\n                message.fullQueryCacheHit = reader.bool();\n                break;\n            case 21:\n                message.persistedQueryHit = reader.bool();\n                break;\n            case 22:\n                message.persistedQueryRegister = reader.bool();\n                break;\n            case 24:\n                message.registeredOperation = reader.bool();\n                break;\n            case 25:\n                message.forbiddenOperation = reader.bool();\n                break;\n            case 31:\n                message.fieldExecutionWeight = reader.double();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a Trace message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof Trace\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {Trace} Trace\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Trace.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a Trace message.\n     * @function verify\n     * @memberof Trace\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    Trace.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.startTime != null && message.hasOwnProperty(\"startTime\")) {\n            var error = $root.google.protobuf.Timestamp.verify(message.startTime);\n            if (error)\n                return \"startTime.\" + error;\n        }\n        if (message.endTime != null && message.hasOwnProperty(\"endTime\")) {\n            var error = $root.google.protobuf.Timestamp.verify(message.endTime);\n            if (error)\n                return \"endTime.\" + error;\n        }\n        if (message.durationNs != null && message.hasOwnProperty(\"durationNs\"))\n            if (!$util.isInteger(message.durationNs) && !(message.durationNs && $util.isInteger(message.durationNs.low) && $util.isInteger(message.durationNs.high)))\n                return \"durationNs: integer|Long expected\";\n        if (message.root != null && message.hasOwnProperty(\"root\")) {\n            var error = $root.Trace.Node.verify(message.root);\n            if (error)\n                return \"root.\" + error;\n        }\n        if (message.isIncomplete != null && message.hasOwnProperty(\"isIncomplete\"))\n            if (typeof message.isIncomplete !== \"boolean\")\n                return \"isIncomplete: boolean expected\";\n        if (message.signature != null && message.hasOwnProperty(\"signature\"))\n            if (!$util.isString(message.signature))\n                return \"signature: string expected\";\n        if (message.unexecutedOperationBody != null && message.hasOwnProperty(\"unexecutedOperationBody\"))\n            if (!$util.isString(message.unexecutedOperationBody))\n                return \"unexecutedOperationBody: string expected\";\n        if (message.unexecutedOperationName != null && message.hasOwnProperty(\"unexecutedOperationName\"))\n            if (!$util.isString(message.unexecutedOperationName))\n                return \"unexecutedOperationName: string expected\";\n        if (message.details != null && message.hasOwnProperty(\"details\")) {\n            var error = $root.Trace.Details.verify(message.details);\n            if (error)\n                return \"details.\" + error;\n        }\n        if (message.clientName != null && message.hasOwnProperty(\"clientName\"))\n            if (!$util.isString(message.clientName))\n                return \"clientName: string expected\";\n        if (message.clientVersion != null && message.hasOwnProperty(\"clientVersion\"))\n            if (!$util.isString(message.clientVersion))\n                return \"clientVersion: string expected\";\n        if (message.http != null && message.hasOwnProperty(\"http\")) {\n            var error = $root.Trace.HTTP.verify(message.http);\n            if (error)\n                return \"http.\" + error;\n        }\n        if (message.cachePolicy != null && message.hasOwnProperty(\"cachePolicy\")) {\n            var error = $root.Trace.CachePolicy.verify(message.cachePolicy);\n            if (error)\n                return \"cachePolicy.\" + error;\n        }\n        if (message.queryPlan != null && message.hasOwnProperty(\"queryPlan\")) {\n            var error = $root.Trace.QueryPlanNode.verify(message.queryPlan);\n            if (error)\n                return \"queryPlan.\" + error;\n        }\n        if (message.fullQueryCacheHit != null && message.hasOwnProperty(\"fullQueryCacheHit\"))\n            if (typeof message.fullQueryCacheHit !== \"boolean\")\n                return \"fullQueryCacheHit: boolean expected\";\n        if (message.persistedQueryHit != null && message.hasOwnProperty(\"persistedQueryHit\"))\n            if (typeof message.persistedQueryHit !== \"boolean\")\n                return \"persistedQueryHit: boolean expected\";\n        if (message.persistedQueryRegister != null && message.hasOwnProperty(\"persistedQueryRegister\"))\n            if (typeof message.persistedQueryRegister !== \"boolean\")\n                return \"persistedQueryRegister: boolean expected\";\n        if (message.registeredOperation != null && message.hasOwnProperty(\"registeredOperation\"))\n            if (typeof message.registeredOperation !== \"boolean\")\n                return \"registeredOperation: boolean expected\";\n        if (message.forbiddenOperation != null && message.hasOwnProperty(\"forbiddenOperation\"))\n            if (typeof message.forbiddenOperation !== \"boolean\")\n                return \"forbiddenOperation: boolean expected\";\n        if (message.fieldExecutionWeight != null && message.hasOwnProperty(\"fieldExecutionWeight\"))\n            if (typeof message.fieldExecutionWeight !== \"number\")\n                return \"fieldExecutionWeight: number expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a Trace message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Trace\n     * @static\n     * @param {Trace} message Trace\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Trace.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.endTime = null;\n            object.startTime = null;\n            object.details = null;\n            object.clientName = \"\";\n            object.clientVersion = \"\";\n            object.http = null;\n            object.durationNs = 0;\n            object.root = null;\n            object.cachePolicy = null;\n            object.signature = \"\";\n            object.fullQueryCacheHit = false;\n            object.persistedQueryHit = false;\n            object.persistedQueryRegister = false;\n            object.registeredOperation = false;\n            object.forbiddenOperation = false;\n            object.queryPlan = null;\n            object.unexecutedOperationBody = \"\";\n            object.unexecutedOperationName = \"\";\n            object.fieldExecutionWeight = 0;\n            object.isIncomplete = false;\n        }\n        if (message.endTime != null && message.hasOwnProperty(\"endTime\"))\n            object.endTime = $root.google.protobuf.Timestamp.toObject(message.endTime, options);\n        if (message.startTime != null && message.hasOwnProperty(\"startTime\"))\n            object.startTime = $root.google.protobuf.Timestamp.toObject(message.startTime, options);\n        if (message.details != null && message.hasOwnProperty(\"details\"))\n            object.details = $root.Trace.Details.toObject(message.details, options);\n        if (message.clientName != null && message.hasOwnProperty(\"clientName\"))\n            object.clientName = message.clientName;\n        if (message.clientVersion != null && message.hasOwnProperty(\"clientVersion\"))\n            object.clientVersion = message.clientVersion;\n        if (message.http != null && message.hasOwnProperty(\"http\"))\n            object.http = $root.Trace.HTTP.toObject(message.http, options);\n        if (message.durationNs != null && message.hasOwnProperty(\"durationNs\"))\n            if (typeof message.durationNs === \"number\")\n                object.durationNs = options.longs === String ? String(message.durationNs) : message.durationNs;\n            else\n                object.durationNs = options.longs === String ? $util.Long.prototype.toString.call(message.durationNs) : options.longs === Number ? new $util.LongBits(message.durationNs.low >>> 0, message.durationNs.high >>> 0).toNumber(true) : message.durationNs;\n        if (message.root != null && message.hasOwnProperty(\"root\"))\n            object.root = $root.Trace.Node.toObject(message.root, options);\n        if (message.cachePolicy != null && message.hasOwnProperty(\"cachePolicy\"))\n            object.cachePolicy = $root.Trace.CachePolicy.toObject(message.cachePolicy, options);\n        if (message.signature != null && message.hasOwnProperty(\"signature\"))\n            object.signature = message.signature;\n        if (message.fullQueryCacheHit != null && message.hasOwnProperty(\"fullQueryCacheHit\"))\n            object.fullQueryCacheHit = message.fullQueryCacheHit;\n        if (message.persistedQueryHit != null && message.hasOwnProperty(\"persistedQueryHit\"))\n            object.persistedQueryHit = message.persistedQueryHit;\n        if (message.persistedQueryRegister != null && message.hasOwnProperty(\"persistedQueryRegister\"))\n            object.persistedQueryRegister = message.persistedQueryRegister;\n        if (message.registeredOperation != null && message.hasOwnProperty(\"registeredOperation\"))\n            object.registeredOperation = message.registeredOperation;\n        if (message.forbiddenOperation != null && message.hasOwnProperty(\"forbiddenOperation\"))\n            object.forbiddenOperation = message.forbiddenOperation;\n        if (message.queryPlan != null && message.hasOwnProperty(\"queryPlan\"))\n            object.queryPlan = $root.Trace.QueryPlanNode.toObject(message.queryPlan, options);\n        if (message.unexecutedOperationBody != null && message.hasOwnProperty(\"unexecutedOperationBody\"))\n            object.unexecutedOperationBody = message.unexecutedOperationBody;\n        if (message.unexecutedOperationName != null && message.hasOwnProperty(\"unexecutedOperationName\"))\n            object.unexecutedOperationName = message.unexecutedOperationName;\n        if (message.fieldExecutionWeight != null && message.hasOwnProperty(\"fieldExecutionWeight\"))\n            object.fieldExecutionWeight = options.json && !isFinite(message.fieldExecutionWeight) ? String(message.fieldExecutionWeight) : message.fieldExecutionWeight;\n        if (message.isIncomplete != null && message.hasOwnProperty(\"isIncomplete\"))\n            object.isIncomplete = message.isIncomplete;\n        return object;\n    };\n\n    /**\n     * Converts this Trace to JSON.\n     * @function toJSON\n     * @memberof Trace\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Trace.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    Trace.CachePolicy = (function() {\n\n        /**\n         * Properties of a CachePolicy.\n         * @memberof Trace\n         * @interface ICachePolicy\n         * @property {Trace.CachePolicy.Scope|null} [scope] CachePolicy scope\n         * @property {number|null} [maxAgeNs] CachePolicy maxAgeNs\n         */\n\n        /**\n         * Constructs a new CachePolicy.\n         * @memberof Trace\n         * @classdesc Represents a CachePolicy.\n         * @implements ICachePolicy\n         * @constructor\n         * @param {Trace.ICachePolicy=} [properties] Properties to set\n         */\n        function CachePolicy(properties) {\n            if (properties)\n                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * CachePolicy scope.\n         * @member {Trace.CachePolicy.Scope} scope\n         * @memberof Trace.CachePolicy\n         * @instance\n         */\n        CachePolicy.prototype.scope = 0;\n\n        /**\n         * CachePolicy maxAgeNs.\n         * @member {number} maxAgeNs\n         * @memberof Trace.CachePolicy\n         * @instance\n         */\n        CachePolicy.prototype.maxAgeNs = 0;\n\n        /**\n         * Creates a new CachePolicy instance using the specified properties.\n         * @function create\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Trace.ICachePolicy=} [properties] Properties to set\n         * @returns {Trace.CachePolicy} CachePolicy instance\n         */\n        CachePolicy.create = function create(properties) {\n            return new CachePolicy(properties);\n        };\n\n        /**\n         * Encodes the specified CachePolicy message. Does not implicitly {@link Trace.CachePolicy.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Trace.ICachePolicy} message CachePolicy message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        CachePolicy.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.scope != null && Object.hasOwnProperty.call(message, \"scope\"))\n                writer.uint32(/* id 1, wireType 0 =*/8).int32(message.scope);\n            if (message.maxAgeNs != null && Object.hasOwnProperty.call(message, \"maxAgeNs\"))\n                writer.uint32(/* id 2, wireType 0 =*/16).int64(message.maxAgeNs);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified CachePolicy message, length delimited. Does not implicitly {@link Trace.CachePolicy.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Trace.ICachePolicy} message CachePolicy message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        CachePolicy.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a CachePolicy message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.CachePolicy} CachePolicy\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        CachePolicy.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.CachePolicy();\n            while (reader.pos < end) {\n                var tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.scope = reader.int32();\n                    break;\n                case 2:\n                    message.maxAgeNs = reader.int64();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a CachePolicy message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.CachePolicy} CachePolicy\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        CachePolicy.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a CachePolicy message.\n         * @function verify\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        CachePolicy.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.scope != null && message.hasOwnProperty(\"scope\"))\n                switch (message.scope) {\n                default:\n                    return \"scope: enum value expected\";\n                case 0:\n                case 1:\n                case 2:\n                    break;\n                }\n            if (message.maxAgeNs != null && message.hasOwnProperty(\"maxAgeNs\"))\n                if (!$util.isInteger(message.maxAgeNs) && !(message.maxAgeNs && $util.isInteger(message.maxAgeNs.low) && $util.isInteger(message.maxAgeNs.high)))\n                    return \"maxAgeNs: integer|Long expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a CachePolicy message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Trace.CachePolicy} message CachePolicy\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        CachePolicy.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            var object = {};\n            if (options.defaults) {\n                object.scope = options.enums === String ? \"UNKNOWN\" : 0;\n                object.maxAgeNs = 0;\n            }\n            if (message.scope != null && message.hasOwnProperty(\"scope\"))\n                object.scope = options.enums === String ? $root.Trace.CachePolicy.Scope[message.scope] : message.scope;\n            if (message.maxAgeNs != null && message.hasOwnProperty(\"maxAgeNs\"))\n                if (typeof message.maxAgeNs === \"number\")\n                    object.maxAgeNs = options.longs === String ? String(message.maxAgeNs) : message.maxAgeNs;\n                else\n                    object.maxAgeNs = options.longs === String ? $util.Long.prototype.toString.call(message.maxAgeNs) : options.longs === Number ? new $util.LongBits(message.maxAgeNs.low >>> 0, message.maxAgeNs.high >>> 0).toNumber() : message.maxAgeNs;\n            return object;\n        };\n\n        /**\n         * Converts this CachePolicy to JSON.\n         * @function toJSON\n         * @memberof Trace.CachePolicy\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        CachePolicy.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n        };\n\n        /**\n         * Scope enum.\n         * @name Trace.CachePolicy.Scope\n         * @enum {string}\n         * @property {number} UNKNOWN=0 UNKNOWN value\n         * @property {number} PUBLIC=1 PUBLIC value\n         * @property {number} PRIVATE=2 PRIVATE value\n         */\n        CachePolicy.Scope = (function() {\n            var valuesById = {}, values = Object.create(valuesById);\n            values[valuesById[0] = \"UNKNOWN\"] = 0;\n            values[valuesById[1] = \"PUBLIC\"] = 1;\n            values[valuesById[2] = \"PRIVATE\"] = 2;\n            return values;\n        })();\n\n        return CachePolicy;\n    })();\n\n    Trace.Details = (function() {\n\n        /**\n         * Properties of a Details.\n         * @memberof Trace\n         * @interface IDetails\n         * @property {Object.<string,string>|null} [variablesJson] Details variablesJson\n         * @property {string|null} [operationName] Details operationName\n         */\n\n        /**\n         * Constructs a new Details.\n         * @memberof Trace\n         * @classdesc Represents a Details.\n         * @implements IDetails\n         * @constructor\n         * @param {Trace.IDetails=} [properties] Properties to set\n         */\n        function Details(properties) {\n            this.variablesJson = {};\n            if (properties)\n                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * Details variablesJson.\n         * @member {Object.<string,string>} variablesJson\n         * @memberof Trace.Details\n         * @instance\n         */\n        Details.prototype.variablesJson = $util.emptyObject;\n\n        /**\n         * Details operationName.\n         * @member {string} operationName\n         * @memberof Trace.Details\n         * @instance\n         */\n        Details.prototype.operationName = \"\";\n\n        /**\n         * Creates a new Details instance using the specified properties.\n         * @function create\n         * @memberof Trace.Details\n         * @static\n         * @param {Trace.IDetails=} [properties] Properties to set\n         * @returns {Trace.Details} Details instance\n         */\n        Details.create = function create(properties) {\n            return new Details(properties);\n        };\n\n        /**\n         * Encodes the specified Details message. Does not implicitly {@link Trace.Details.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.Details\n         * @static\n         * @param {Trace.IDetails} message Details message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Details.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.operationName != null && Object.hasOwnProperty.call(message, \"operationName\"))\n                writer.uint32(/* id 3, wireType 2 =*/26).string(message.operationName);\n            if (message.variablesJson != null && Object.hasOwnProperty.call(message, \"variablesJson\"))\n                for (var keys = Object.keys(message.variablesJson), i = 0; i < keys.length; ++i)\n                    writer.uint32(/* id 4, wireType 2 =*/34).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]).uint32(/* id 2, wireType 2 =*/18).string(message.variablesJson[keys[i]]).ldelim();\n            return writer;\n        };\n\n        /**\n         * Encodes the specified Details message, length delimited. Does not implicitly {@link Trace.Details.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.Details\n         * @static\n         * @param {Trace.IDetails} message Details message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Details.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a Details message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.Details\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.Details} Details\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Details.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.Details(), key;\n            while (reader.pos < end) {\n                var tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 4:\n                    reader.skip().pos++;\n                    if (message.variablesJson === $util.emptyObject)\n                        message.variablesJson = {};\n                    key = reader.string();\n                    reader.pos++;\n                    message.variablesJson[key] = reader.string();\n                    break;\n                case 3:\n                    message.operationName = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a Details message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.Details\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.Details} Details\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Details.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a Details message.\n         * @function verify\n         * @memberof Trace.Details\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        Details.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.variablesJson != null && message.hasOwnProperty(\"variablesJson\")) {\n                if (!$util.isObject(message.variablesJson))\n                    return \"variablesJson: object expected\";\n                var key = Object.keys(message.variablesJson);\n                for (var i = 0; i < key.length; ++i)\n                    if (!$util.isString(message.variablesJson[key[i]]))\n                        return \"variablesJson: string{k:string} expected\";\n            }\n            if (message.operationName != null && message.hasOwnProperty(\"operationName\"))\n                if (!$util.isString(message.operationName))\n                    return \"operationName: string expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a Details message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.Details\n         * @static\n         * @param {Trace.Details} message Details\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        Details.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            var object = {};\n            if (options.objects || options.defaults)\n                object.variablesJson = {};\n            if (options.defaults)\n                object.operationName = \"\";\n            if (message.operationName != null && message.hasOwnProperty(\"operationName\"))\n                object.operationName = message.operationName;\n            var keys2;\n            if (message.variablesJson && (keys2 = Object.keys(message.variablesJson)).length) {\n                object.variablesJson = {};\n                for (var j = 0; j < keys2.length; ++j)\n                    object.variablesJson[keys2[j]] = message.variablesJson[keys2[j]];\n            }\n            return object;\n        };\n\n        /**\n         * Converts this Details to JSON.\n         * @function toJSON\n         * @memberof Trace.Details\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        Details.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n        };\n\n        return Details;\n    })();\n\n    Trace.Error = (function() {\n\n        /**\n         * Properties of an Error.\n         * @memberof Trace\n         * @interface IError\n         * @property {string|null} [message] Error message\n         * @property {Array.<Trace.ILocation>|null} [location] Error location\n         * @property {number|null} [timeNs] Error timeNs\n         * @property {string|null} [json] Error json\n         */\n\n        /**\n         * Constructs a new Error.\n         * @memberof Trace\n         * @classdesc Represents an Error.\n         * @implements IError\n         * @constructor\n         * @param {Trace.IError=} [properties] Properties to set\n         */\n        function Error(properties) {\n            this.location = [];\n            if (properties)\n                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * Error message.\n         * @member {string} message\n         * @memberof Trace.Error\n         * @instance\n         */\n        Error.prototype.message = \"\";\n\n        /**\n         * Error location.\n         * @member {Array.<Trace.ILocation>} location\n         * @memberof Trace.Error\n         * @instance\n         */\n        Error.prototype.location = $util.emptyArray;\n\n        /**\n         * Error timeNs.\n         * @member {number} timeNs\n         * @memberof Trace.Error\n         * @instance\n         */\n        Error.prototype.timeNs = 0;\n\n        /**\n         * Error json.\n         * @member {string} json\n         * @memberof Trace.Error\n         * @instance\n         */\n        Error.prototype.json = \"\";\n\n        /**\n         * Creates a new Error instance using the specified properties.\n         * @function create\n         * @memberof Trace.Error\n         * @static\n         * @param {Trace.IError=} [properties] Properties to set\n         * @returns {Trace.Error} Error instance\n         */\n        Error.create = function create(properties) {\n            return new Error(properties);\n        };\n\n        /**\n         * Encodes the specified Error message. Does not implicitly {@link Trace.Error.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.Error\n         * @static\n         * @param {Trace.IError} message Error message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Error.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.message != null && Object.hasOwnProperty.call(message, \"message\"))\n                writer.uint32(/* id 1, wireType 2 =*/10).string(message.message);\n            if (message.location != null && message.location.length)\n                for (var i = 0; i < message.location.length; ++i)\n                    $root.Trace.Location.encode(message.location[i], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n            if (message.timeNs != null && Object.hasOwnProperty.call(message, \"timeNs\"))\n                writer.uint32(/* id 3, wireType 0 =*/24).uint64(message.timeNs);\n            if (message.json != null && Object.hasOwnProperty.call(message, \"json\"))\n                writer.uint32(/* id 4, wireType 2 =*/34).string(message.json);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified Error message, length delimited. Does not implicitly {@link Trace.Error.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.Error\n         * @static\n         * @param {Trace.IError} message Error message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Error.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes an Error message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.Error\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.Error} Error\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Error.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.Error();\n            while (reader.pos < end) {\n                var tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.message = reader.string();\n                    break;\n                case 2:\n                    if (!(message.location && message.location.length))\n                        message.location = [];\n                    message.location.push($root.Trace.Location.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.timeNs = reader.uint64();\n                    break;\n                case 4:\n                    message.json = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes an Error message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.Error\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.Error} Error\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Error.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies an Error message.\n         * @function verify\n         * @memberof Trace.Error\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        Error.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.message != null && message.hasOwnProperty(\"message\"))\n                if (!$util.isString(message.message))\n                    return \"message: string expected\";\n            if (message.location != null && message.hasOwnProperty(\"location\")) {\n                if (!Array.isArray(message.location))\n                    return \"location: array expected\";\n                for (var i = 0; i < message.location.length; ++i) {\n                    var error = $root.Trace.Location.verify(message.location[i]);\n                    if (error)\n                        return \"location.\" + error;\n                }\n            }\n            if (message.timeNs != null && message.hasOwnProperty(\"timeNs\"))\n                if (!$util.isInteger(message.timeNs) && !(message.timeNs && $util.isInteger(message.timeNs.low) && $util.isInteger(message.timeNs.high)))\n                    return \"timeNs: integer|Long expected\";\n            if (message.json != null && message.hasOwnProperty(\"json\"))\n                if (!$util.isString(message.json))\n                    return \"json: string expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from an Error message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.Error\n         * @static\n         * @param {Trace.Error} message Error\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        Error.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            var object = {};\n            if (options.arrays || options.defaults)\n                object.location = [];\n            if (options.defaults) {\n                object.message = \"\";\n                object.timeNs = 0;\n                object.json = \"\";\n            }\n            if (message.message != null && message.hasOwnProperty(\"message\"))\n                object.message = message.message;\n            if (message.location && message.location.length) {\n                object.location = [];\n                for (var j = 0; j < message.location.length; ++j)\n                    object.location[j] = $root.Trace.Location.toObject(message.location[j], options);\n            }\n            if (message.timeNs != null && message.hasOwnProperty(\"timeNs\"))\n                if (typeof message.timeNs === \"number\")\n                    object.timeNs = options.longs === String ? String(message.timeNs) : message.timeNs;\n                else\n                    object.timeNs = options.longs === String ? $util.Long.prototype.toString.call(message.timeNs) : options.longs === Number ? new $util.LongBits(message.timeNs.low >>> 0, message.timeNs.high >>> 0).toNumber(true) : message.timeNs;\n            if (message.json != null && message.hasOwnProperty(\"json\"))\n                object.json = message.json;\n            return object;\n        };\n\n        /**\n         * Converts this Error to JSON.\n         * @function toJSON\n         * @memberof Trace.Error\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        Error.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n        };\n\n        return Error;\n    })();\n\n    Trace.HTTP = (function() {\n\n        /**\n         * Properties of a HTTP.\n         * @memberof Trace\n         * @interface IHTTP\n         * @property {Trace.HTTP.Method|null} [method] HTTP method\n         * @property {Object.<string,Trace.HTTP.IValues>|null} [requestHeaders] HTTP requestHeaders\n         * @property {Object.<string,Trace.HTTP.IValues>|null} [responseHeaders] HTTP responseHeaders\n         * @property {number|null} [statusCode] HTTP statusCode\n         */\n\n        /**\n         * Constructs a new HTTP.\n         * @memberof Trace\n         * @classdesc Represents a HTTP.\n         * @implements IHTTP\n         * @constructor\n         * @param {Trace.IHTTP=} [properties] Properties to set\n         */\n        function HTTP(properties) {\n            this.requestHeaders = {};\n            this.responseHeaders = {};\n            if (properties)\n                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * HTTP method.\n         * @member {Trace.HTTP.Method} method\n         * @memberof Trace.HTTP\n         * @instance\n         */\n        HTTP.prototype.method = 0;\n\n        /**\n         * HTTP requestHeaders.\n         * @member {Object.<string,Trace.HTTP.IValues>} requestHeaders\n         * @memberof Trace.HTTP\n         * @instance\n         */\n        HTTP.prototype.requestHeaders = $util.emptyObject;\n\n        /**\n         * HTTP responseHeaders.\n         * @member {Object.<string,Trace.HTTP.IValues>} responseHeaders\n         * @memberof Trace.HTTP\n         * @instance\n         */\n        HTTP.prototype.responseHeaders = $util.emptyObject;\n\n        /**\n         * HTTP statusCode.\n         * @member {number} statusCode\n         * @memberof Trace.HTTP\n         * @instance\n         */\n        HTTP.prototype.statusCode = 0;\n\n        /**\n         * Creates a new HTTP instance using the specified properties.\n         * @function create\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Trace.IHTTP=} [properties] Properties to set\n         * @returns {Trace.HTTP} HTTP instance\n         */\n        HTTP.create = function create(properties) {\n            return new HTTP(properties);\n        };\n\n        /**\n         * Encodes the specified HTTP message. Does not implicitly {@link Trace.HTTP.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Trace.IHTTP} message HTTP message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        HTTP.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.method != null && Object.hasOwnProperty.call(message, \"method\"))\n                writer.uint32(/* id 1, wireType 0 =*/8).int32(message.method);\n            if (message.requestHeaders != null && Object.hasOwnProperty.call(message, \"requestHeaders\"))\n                for (var keys = Object.keys(message.requestHeaders), i = 0; i < keys.length; ++i) {\n                    writer.uint32(/* id 4, wireType 2 =*/34).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                    $root.Trace.HTTP.Values.encode(message.requestHeaders[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n                }\n            if (message.responseHeaders != null && Object.hasOwnProperty.call(message, \"responseHeaders\"))\n                for (var keys = Object.keys(message.responseHeaders), i = 0; i < keys.length; ++i) {\n                    writer.uint32(/* id 5, wireType 2 =*/42).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                    $root.Trace.HTTP.Values.encode(message.responseHeaders[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n                }\n            if (message.statusCode != null && Object.hasOwnProperty.call(message, \"statusCode\"))\n                writer.uint32(/* id 6, wireType 0 =*/48).uint32(message.statusCode);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified HTTP message, length delimited. Does not implicitly {@link Trace.HTTP.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Trace.IHTTP} message HTTP message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        HTTP.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a HTTP message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.HTTP\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.HTTP} HTTP\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        HTTP.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.HTTP(), key;\n            while (reader.pos < end) {\n                var tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.method = reader.int32();\n                    break;\n                case 4:\n                    reader.skip().pos++;\n                    if (message.requestHeaders === $util.emptyObject)\n                        message.requestHeaders = {};\n                    key = reader.string();\n                    reader.pos++;\n                    message.requestHeaders[key] = $root.Trace.HTTP.Values.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    reader.skip().pos++;\n                    if (message.responseHeaders === $util.emptyObject)\n                        message.responseHeaders = {};\n                    key = reader.string();\n                    reader.pos++;\n                    message.responseHeaders[key] = $root.Trace.HTTP.Values.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.statusCode = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a HTTP message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.HTTP\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.HTTP} HTTP\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        HTTP.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a HTTP message.\n         * @function verify\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        HTTP.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.method != null && message.hasOwnProperty(\"method\"))\n                switch (message.method) {\n                default:\n                    return \"method: enum value expected\";\n                case 0:\n                case 1:\n                case 2:\n                case 3:\n                case 4:\n                case 5:\n                case 6:\n                case 7:\n                case 8:\n                case 9:\n                    break;\n                }\n            if (message.requestHeaders != null && message.hasOwnProperty(\"requestHeaders\")) {\n                if (!$util.isObject(message.requestHeaders))\n                    return \"requestHeaders: object expected\";\n                var key = Object.keys(message.requestHeaders);\n                for (var i = 0; i < key.length; ++i) {\n                    var error = $root.Trace.HTTP.Values.verify(message.requestHeaders[key[i]]);\n                    if (error)\n                        return \"requestHeaders.\" + error;\n                }\n            }\n            if (message.responseHeaders != null && message.hasOwnProperty(\"responseHeaders\")) {\n                if (!$util.isObject(message.responseHeaders))\n                    return \"responseHeaders: object expected\";\n                var key = Object.keys(message.responseHeaders);\n                for (var i = 0; i < key.length; ++i) {\n                    var error = $root.Trace.HTTP.Values.verify(message.responseHeaders[key[i]]);\n                    if (error)\n                        return \"responseHeaders.\" + error;\n                }\n            }\n            if (message.statusCode != null && message.hasOwnProperty(\"statusCode\"))\n                if (!$util.isInteger(message.statusCode))\n                    return \"statusCode: integer expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a HTTP message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Trace.HTTP} message HTTP\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        HTTP.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            var object = {};\n            if (options.objects || options.defaults) {\n                object.requestHeaders = {};\n                object.responseHeaders = {};\n            }\n            if (options.defaults) {\n                object.method = options.enums === String ? \"UNKNOWN\" : 0;\n                object.statusCode = 0;\n            }\n            if (message.method != null && message.hasOwnProperty(\"method\"))\n                object.method = options.enums === String ? $root.Trace.HTTP.Method[message.method] : message.method;\n            var keys2;\n            if (message.requestHeaders && (keys2 = Object.keys(message.requestHeaders)).length) {\n                object.requestHeaders = {};\n                for (var j = 0; j < keys2.length; ++j)\n                    object.requestHeaders[keys2[j]] = $root.Trace.HTTP.Values.toObject(message.requestHeaders[keys2[j]], options);\n            }\n            if (message.responseHeaders && (keys2 = Object.keys(message.responseHeaders)).length) {\n                object.responseHeaders = {};\n                for (var j = 0; j < keys2.length; ++j)\n                    object.responseHeaders[keys2[j]] = $root.Trace.HTTP.Values.toObject(message.responseHeaders[keys2[j]], options);\n            }\n            if (message.statusCode != null && message.hasOwnProperty(\"statusCode\"))\n                object.statusCode = message.statusCode;\n            return object;\n        };\n\n        /**\n         * Converts this HTTP to JSON.\n         * @function toJSON\n         * @memberof Trace.HTTP\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        HTTP.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n        };\n\n        HTTP.Values = (function() {\n\n            /**\n             * Properties of a Values.\n             * @memberof Trace.HTTP\n             * @interface IValues\n             * @property {Array.<string>|null} [value] Values value\n             */\n\n            /**\n             * Constructs a new Values.\n             * @memberof Trace.HTTP\n             * @classdesc Represents a Values.\n             * @implements IValues\n             * @constructor\n             * @param {Trace.HTTP.IValues=} [properties] Properties to set\n             */\n            function Values(properties) {\n                this.value = [];\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * Values value.\n             * @member {Array.<string>} value\n             * @memberof Trace.HTTP.Values\n             * @instance\n             */\n            Values.prototype.value = $util.emptyArray;\n\n            /**\n             * Creates a new Values instance using the specified properties.\n             * @function create\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Trace.HTTP.IValues=} [properties] Properties to set\n             * @returns {Trace.HTTP.Values} Values instance\n             */\n            Values.create = function create(properties) {\n                return new Values(properties);\n            };\n\n            /**\n             * Encodes the specified Values message. Does not implicitly {@link Trace.HTTP.Values.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Trace.HTTP.IValues} message Values message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Values.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.value != null && message.value.length)\n                    for (var i = 0; i < message.value.length; ++i)\n                        writer.uint32(/* id 1, wireType 2 =*/10).string(message.value[i]);\n                return writer;\n            };\n\n            /**\n             * Encodes the specified Values message, length delimited. Does not implicitly {@link Trace.HTTP.Values.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Trace.HTTP.IValues} message Values message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Values.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a Values message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.HTTP.Values} Values\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Values.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.HTTP.Values();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.value && message.value.length))\n                            message.value = [];\n                        message.value.push(reader.string());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a Values message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.HTTP.Values} Values\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Values.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a Values message.\n             * @function verify\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            Values.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.value != null && message.hasOwnProperty(\"value\")) {\n                    if (!Array.isArray(message.value))\n                        return \"value: array expected\";\n                    for (var i = 0; i < message.value.length; ++i)\n                        if (!$util.isString(message.value[i]))\n                            return \"value: string[] expected\";\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a Values message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Trace.HTTP.Values} message Values\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            Values.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.arrays || options.defaults)\n                    object.value = [];\n                if (message.value && message.value.length) {\n                    object.value = [];\n                    for (var j = 0; j < message.value.length; ++j)\n                        object.value[j] = message.value[j];\n                }\n                return object;\n            };\n\n            /**\n             * Converts this Values to JSON.\n             * @function toJSON\n             * @memberof Trace.HTTP.Values\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            Values.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return Values;\n        })();\n\n        /**\n         * Method enum.\n         * @name Trace.HTTP.Method\n         * @enum {string}\n         * @property {number} UNKNOWN=0 UNKNOWN value\n         * @property {number} OPTIONS=1 OPTIONS value\n         * @property {number} GET=2 GET value\n         * @property {number} HEAD=3 HEAD value\n         * @property {number} POST=4 POST value\n         * @property {number} PUT=5 PUT value\n         * @property {number} DELETE=6 DELETE value\n         * @property {number} TRACE=7 TRACE value\n         * @property {number} CONNECT=8 CONNECT value\n         * @property {number} PATCH=9 PATCH value\n         */\n        HTTP.Method = (function() {\n            var valuesById = {}, values = Object.create(valuesById);\n            values[valuesById[0] = \"UNKNOWN\"] = 0;\n            values[valuesById[1] = \"OPTIONS\"] = 1;\n            values[valuesById[2] = \"GET\"] = 2;\n            values[valuesById[3] = \"HEAD\"] = 3;\n            values[valuesById[4] = \"POST\"] = 4;\n            values[valuesById[5] = \"PUT\"] = 5;\n            values[valuesById[6] = \"DELETE\"] = 6;\n            values[valuesById[7] = \"TRACE\"] = 7;\n            values[valuesById[8] = \"CONNECT\"] = 8;\n            values[valuesById[9] = \"PATCH\"] = 9;\n            return values;\n        })();\n\n        return HTTP;\n    })();\n\n    Trace.Location = (function() {\n\n        /**\n         * Properties of a Location.\n         * @memberof Trace\n         * @interface ILocation\n         * @property {number|null} [line] Location line\n         * @property {number|null} [column] Location column\n         */\n\n        /**\n         * Constructs a new Location.\n         * @memberof Trace\n         * @classdesc Represents a Location.\n         * @implements ILocation\n         * @constructor\n         * @param {Trace.ILocation=} [properties] Properties to set\n         */\n        function Location(properties) {\n            if (properties)\n                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * Location line.\n         * @member {number} line\n         * @memberof Trace.Location\n         * @instance\n         */\n        Location.prototype.line = 0;\n\n        /**\n         * Location column.\n         * @member {number} column\n         * @memberof Trace.Location\n         * @instance\n         */\n        Location.prototype.column = 0;\n\n        /**\n         * Creates a new Location instance using the specified properties.\n         * @function create\n         * @memberof Trace.Location\n         * @static\n         * @param {Trace.ILocation=} [properties] Properties to set\n         * @returns {Trace.Location} Location instance\n         */\n        Location.create = function create(properties) {\n            return new Location(properties);\n        };\n\n        /**\n         * Encodes the specified Location message. Does not implicitly {@link Trace.Location.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.Location\n         * @static\n         * @param {Trace.ILocation} message Location message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Location.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.line != null && Object.hasOwnProperty.call(message, \"line\"))\n                writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.line);\n            if (message.column != null && Object.hasOwnProperty.call(message, \"column\"))\n                writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.column);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified Location message, length delimited. Does not implicitly {@link Trace.Location.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.Location\n         * @static\n         * @param {Trace.ILocation} message Location message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Location.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a Location message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.Location\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.Location} Location\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Location.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.Location();\n            while (reader.pos < end) {\n                var tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.line = reader.uint32();\n                    break;\n                case 2:\n                    message.column = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a Location message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.Location\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.Location} Location\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Location.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a Location message.\n         * @function verify\n         * @memberof Trace.Location\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        Location.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.line != null && message.hasOwnProperty(\"line\"))\n                if (!$util.isInteger(message.line))\n                    return \"line: integer expected\";\n            if (message.column != null && message.hasOwnProperty(\"column\"))\n                if (!$util.isInteger(message.column))\n                    return \"column: integer expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a Location message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.Location\n         * @static\n         * @param {Trace.Location} message Location\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        Location.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            var object = {};\n            if (options.defaults) {\n                object.line = 0;\n                object.column = 0;\n            }\n            if (message.line != null && message.hasOwnProperty(\"line\"))\n                object.line = message.line;\n            if (message.column != null && message.hasOwnProperty(\"column\"))\n                object.column = message.column;\n            return object;\n        };\n\n        /**\n         * Converts this Location to JSON.\n         * @function toJSON\n         * @memberof Trace.Location\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        Location.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n        };\n\n        return Location;\n    })();\n\n    Trace.Node = (function() {\n\n        /**\n         * Properties of a Node.\n         * @memberof Trace\n         * @interface INode\n         * @property {string|null} [responseName] Node responseName\n         * @property {number|null} [index] Node index\n         * @property {string|null} [originalFieldName] Node originalFieldName\n         * @property {string|null} [type] Node type\n         * @property {string|null} [parentType] Node parentType\n         * @property {Trace.ICachePolicy|null} [cachePolicy] Node cachePolicy\n         * @property {number|null} [startTime] Node startTime\n         * @property {number|null} [endTime] Node endTime\n         * @property {Array.<Trace.IError>|null} [error] Node error\n         * @property {Array.<Trace.INode>|null} [child] Node child\n         */\n\n        /**\n         * Constructs a new Node.\n         * @memberof Trace\n         * @classdesc Represents a Node.\n         * @implements INode\n         * @constructor\n         * @param {Trace.INode=} [properties] Properties to set\n         */\n        function Node(properties) {\n            this.error = [];\n            this.child = [];\n            if (properties)\n                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * Node responseName.\n         * @member {string} responseName\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.responseName = \"\";\n\n        /**\n         * Node index.\n         * @member {number} index\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.index = 0;\n\n        /**\n         * Node originalFieldName.\n         * @member {string} originalFieldName\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.originalFieldName = \"\";\n\n        /**\n         * Node type.\n         * @member {string} type\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.type = \"\";\n\n        /**\n         * Node parentType.\n         * @member {string} parentType\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.parentType = \"\";\n\n        /**\n         * Node cachePolicy.\n         * @member {Trace.ICachePolicy|null|undefined} cachePolicy\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.cachePolicy = null;\n\n        /**\n         * Node startTime.\n         * @member {number} startTime\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.startTime = 0;\n\n        /**\n         * Node endTime.\n         * @member {number} endTime\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.endTime = 0;\n\n        /**\n         * Node error.\n         * @member {Array.<Trace.IError>} error\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.error = $util.emptyArray;\n\n        /**\n         * Node child.\n         * @member {Array.<Trace.INode>} child\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.child = $util.emptyArray;\n\n        // OneOf field names bound to virtual getters and setters\n        var $oneOfFields;\n\n        /**\n         * Node id.\n         * @member {\"responseName\"|\"index\"|undefined} id\n         * @memberof Trace.Node\n         * @instance\n         */\n        Object.defineProperty(Node.prototype, \"id\", {\n            get: $util.oneOfGetter($oneOfFields = [\"responseName\", \"index\"]),\n            set: $util.oneOfSetter($oneOfFields)\n        });\n\n        /**\n         * Creates a new Node instance using the specified properties.\n         * @function create\n         * @memberof Trace.Node\n         * @static\n         * @param {Trace.INode=} [properties] Properties to set\n         * @returns {Trace.Node} Node instance\n         */\n        Node.create = function create(properties) {\n            return new Node(properties);\n        };\n\n        /**\n         * Encodes the specified Node message. Does not implicitly {@link Trace.Node.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.Node\n         * @static\n         * @param {Trace.INode} message Node message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Node.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.responseName != null && Object.hasOwnProperty.call(message, \"responseName\"))\n                writer.uint32(/* id 1, wireType 2 =*/10).string(message.responseName);\n            if (message.index != null && Object.hasOwnProperty.call(message, \"index\"))\n                writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.index);\n            if (message.type != null && Object.hasOwnProperty.call(message, \"type\"))\n                writer.uint32(/* id 3, wireType 2 =*/26).string(message.type);\n            if (message.cachePolicy != null && Object.hasOwnProperty.call(message, \"cachePolicy\"))\n                $root.Trace.CachePolicy.encode(message.cachePolicy, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();\n            if (message.startTime != null && Object.hasOwnProperty.call(message, \"startTime\"))\n                writer.uint32(/* id 8, wireType 0 =*/64).uint64(message.startTime);\n            if (message.endTime != null && Object.hasOwnProperty.call(message, \"endTime\"))\n                writer.uint32(/* id 9, wireType 0 =*/72).uint64(message.endTime);\n            if (message.error != null && message.error.length)\n                for (var i = 0; i < message.error.length; ++i)\n                    $root.Trace.Error.encode(message.error[i], writer.uint32(/* id 11, wireType 2 =*/90).fork()).ldelim();\n            if (message.child != null && message.child.length)\n                for (var i = 0; i < message.child.length; ++i)\n                    $root.Trace.Node.encode(message.child[i], writer.uint32(/* id 12, wireType 2 =*/98).fork()).ldelim();\n            if (message.parentType != null && Object.hasOwnProperty.call(message, \"parentType\"))\n                writer.uint32(/* id 13, wireType 2 =*/106).string(message.parentType);\n            if (message.originalFieldName != null && Object.hasOwnProperty.call(message, \"originalFieldName\"))\n                writer.uint32(/* id 14, wireType 2 =*/114).string(message.originalFieldName);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified Node message, length delimited. Does not implicitly {@link Trace.Node.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.Node\n         * @static\n         * @param {Trace.INode} message Node message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Node.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a Node message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.Node\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.Node} Node\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Node.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.Node();\n            while (reader.pos < end) {\n                var tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.responseName = reader.string();\n                    break;\n                case 2:\n                    message.index = reader.uint32();\n                    break;\n                case 14:\n                    message.originalFieldName = reader.string();\n                    break;\n                case 3:\n                    message.type = reader.string();\n                    break;\n                case 13:\n                    message.parentType = reader.string();\n                    break;\n                case 5:\n                    message.cachePolicy = $root.Trace.CachePolicy.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.startTime = reader.uint64();\n                    break;\n                case 9:\n                    message.endTime = reader.uint64();\n                    break;\n                case 11:\n                    if (!(message.error && message.error.length))\n                        message.error = [];\n                    message.error.push($root.Trace.Error.decode(reader, reader.uint32()));\n                    break;\n                case 12:\n                    if (!(message.child && message.child.length))\n                        message.child = [];\n                    message.child.push($root.Trace.Node.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a Node message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.Node\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.Node} Node\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Node.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a Node message.\n         * @function verify\n         * @memberof Trace.Node\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        Node.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            var properties = {};\n            if (message.responseName != null && message.hasOwnProperty(\"responseName\")) {\n                properties.id = 1;\n                if (!$util.isString(message.responseName))\n                    return \"responseName: string expected\";\n            }\n            if (message.index != null && message.hasOwnProperty(\"index\")) {\n                if (properties.id === 1)\n                    return \"id: multiple values\";\n                properties.id = 1;\n                if (!$util.isInteger(message.index))\n                    return \"index: integer expected\";\n            }\n            if (message.originalFieldName != null && message.hasOwnProperty(\"originalFieldName\"))\n                if (!$util.isString(message.originalFieldName))\n                    return \"originalFieldName: string expected\";\n            if (message.type != null && message.hasOwnProperty(\"type\"))\n                if (!$util.isString(message.type))\n                    return \"type: string expected\";\n            if (message.parentType != null && message.hasOwnProperty(\"parentType\"))\n                if (!$util.isString(message.parentType))\n                    return \"parentType: string expected\";\n            if (message.cachePolicy != null && message.hasOwnProperty(\"cachePolicy\")) {\n                var error = $root.Trace.CachePolicy.verify(message.cachePolicy);\n                if (error)\n                    return \"cachePolicy.\" + error;\n            }\n            if (message.startTime != null && message.hasOwnProperty(\"startTime\"))\n                if (!$util.isInteger(message.startTime) && !(message.startTime && $util.isInteger(message.startTime.low) && $util.isInteger(message.startTime.high)))\n                    return \"startTime: integer|Long expected\";\n            if (message.endTime != null && message.hasOwnProperty(\"endTime\"))\n                if (!$util.isInteger(message.endTime) && !(message.endTime && $util.isInteger(message.endTime.low) && $util.isInteger(message.endTime.high)))\n                    return \"endTime: integer|Long expected\";\n            if (message.error != null && message.hasOwnProperty(\"error\")) {\n                if (!Array.isArray(message.error))\n                    return \"error: array expected\";\n                for (var i = 0; i < message.error.length; ++i) {\n                    var error = $root.Trace.Error.verify(message.error[i]);\n                    if (error)\n                        return \"error.\" + error;\n                }\n            }\n            if (message.child != null && message.hasOwnProperty(\"child\")) {\n                if (!Array.isArray(message.child))\n                    return \"child: array expected\";\n                for (var i = 0; i < message.child.length; ++i) {\n                    var error = $root.Trace.Node.verify(message.child[i]);\n                    if (error)\n                        return \"child.\" + error;\n                }\n            }\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a Node message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.Node\n         * @static\n         * @param {Trace.Node} message Node\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        Node.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            var object = {};\n            if (options.arrays || options.defaults) {\n                object.error = [];\n                object.child = [];\n            }\n            if (options.defaults) {\n                object.type = \"\";\n                object.cachePolicy = null;\n                object.startTime = 0;\n                object.endTime = 0;\n                object.parentType = \"\";\n                object.originalFieldName = \"\";\n            }\n            if (message.responseName != null && message.hasOwnProperty(\"responseName\")) {\n                object.responseName = message.responseName;\n                if (options.oneofs)\n                    object.id = \"responseName\";\n            }\n            if (message.index != null && message.hasOwnProperty(\"index\")) {\n                object.index = message.index;\n                if (options.oneofs)\n                    object.id = \"index\";\n            }\n            if (message.type != null && message.hasOwnProperty(\"type\"))\n                object.type = message.type;\n            if (message.cachePolicy != null && message.hasOwnProperty(\"cachePolicy\"))\n                object.cachePolicy = $root.Trace.CachePolicy.toObject(message.cachePolicy, options);\n            if (message.startTime != null && message.hasOwnProperty(\"startTime\"))\n                if (typeof message.startTime === \"number\")\n                    object.startTime = options.longs === String ? String(message.startTime) : message.startTime;\n                else\n                    object.startTime = options.longs === String ? $util.Long.prototype.toString.call(message.startTime) : options.longs === Number ? new $util.LongBits(message.startTime.low >>> 0, message.startTime.high >>> 0).toNumber(true) : message.startTime;\n            if (message.endTime != null && message.hasOwnProperty(\"endTime\"))\n                if (typeof message.endTime === \"number\")\n                    object.endTime = options.longs === String ? String(message.endTime) : message.endTime;\n                else\n                    object.endTime = options.longs === String ? $util.Long.prototype.toString.call(message.endTime) : options.longs === Number ? new $util.LongBits(message.endTime.low >>> 0, message.endTime.high >>> 0).toNumber(true) : message.endTime;\n            if (message.error && message.error.length) {\n                object.error = [];\n                for (var j = 0; j < message.error.length; ++j)\n                    object.error[j] = $root.Trace.Error.toObject(message.error[j], options);\n            }\n            if (message.child && message.child.length) {\n                object.child = [];\n                for (var j = 0; j < message.child.length; ++j)\n                    object.child[j] = $root.Trace.Node.toObject(message.child[j], options);\n            }\n            if (message.parentType != null && message.hasOwnProperty(\"parentType\"))\n                object.parentType = message.parentType;\n            if (message.originalFieldName != null && message.hasOwnProperty(\"originalFieldName\"))\n                object.originalFieldName = message.originalFieldName;\n            return object;\n        };\n\n        /**\n         * Converts this Node to JSON.\n         * @function toJSON\n         * @memberof Trace.Node\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        Node.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n        };\n\n        return Node;\n    })();\n\n    Trace.QueryPlanNode = (function() {\n\n        /**\n         * Properties of a QueryPlanNode.\n         * @memberof Trace\n         * @interface IQueryPlanNode\n         * @property {Trace.QueryPlanNode.ISequenceNode|null} [sequence] QueryPlanNode sequence\n         * @property {Trace.QueryPlanNode.IParallelNode|null} [parallel] QueryPlanNode parallel\n         * @property {Trace.QueryPlanNode.IFetchNode|null} [fetch] QueryPlanNode fetch\n         * @property {Trace.QueryPlanNode.IFlattenNode|null} [flatten] QueryPlanNode flatten\n         * @property {Trace.QueryPlanNode.IDeferNode|null} [defer] QueryPlanNode defer\n         * @property {Trace.QueryPlanNode.IConditionNode|null} [condition] QueryPlanNode condition\n         */\n\n        /**\n         * Constructs a new QueryPlanNode.\n         * @memberof Trace\n         * @classdesc Represents a QueryPlanNode.\n         * @implements IQueryPlanNode\n         * @constructor\n         * @param {Trace.IQueryPlanNode=} [properties] Properties to set\n         */\n        function QueryPlanNode(properties) {\n            if (properties)\n                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * QueryPlanNode sequence.\n         * @member {Trace.QueryPlanNode.ISequenceNode|null|undefined} sequence\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.sequence = null;\n\n        /**\n         * QueryPlanNode parallel.\n         * @member {Trace.QueryPlanNode.IParallelNode|null|undefined} parallel\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.parallel = null;\n\n        /**\n         * QueryPlanNode fetch.\n         * @member {Trace.QueryPlanNode.IFetchNode|null|undefined} fetch\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.fetch = null;\n\n        /**\n         * QueryPlanNode flatten.\n         * @member {Trace.QueryPlanNode.IFlattenNode|null|undefined} flatten\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.flatten = null;\n\n        /**\n         * QueryPlanNode defer.\n         * @member {Trace.QueryPlanNode.IDeferNode|null|undefined} defer\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.defer = null;\n\n        /**\n         * QueryPlanNode condition.\n         * @member {Trace.QueryPlanNode.IConditionNode|null|undefined} condition\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.condition = null;\n\n        // OneOf field names bound to virtual getters and setters\n        var $oneOfFields;\n\n        /**\n         * QueryPlanNode node.\n         * @member {\"sequence\"|\"parallel\"|\"fetch\"|\"flatten\"|\"defer\"|\"condition\"|undefined} node\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        Object.defineProperty(QueryPlanNode.prototype, \"node\", {\n            get: $util.oneOfGetter($oneOfFields = [\"sequence\", \"parallel\", \"fetch\", \"flatten\", \"defer\", \"condition\"]),\n            set: $util.oneOfSetter($oneOfFields)\n        });\n\n        /**\n         * Creates a new QueryPlanNode instance using the specified properties.\n         * @function create\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Trace.IQueryPlanNode=} [properties] Properties to set\n         * @returns {Trace.QueryPlanNode} QueryPlanNode instance\n         */\n        QueryPlanNode.create = function create(properties) {\n            return new QueryPlanNode(properties);\n        };\n\n        /**\n         * Encodes the specified QueryPlanNode message. Does not implicitly {@link Trace.QueryPlanNode.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Trace.IQueryPlanNode} message QueryPlanNode message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        QueryPlanNode.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.sequence != null && Object.hasOwnProperty.call(message, \"sequence\"))\n                $root.Trace.QueryPlanNode.SequenceNode.encode(message.sequence, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n            if (message.parallel != null && Object.hasOwnProperty.call(message, \"parallel\"))\n                $root.Trace.QueryPlanNode.ParallelNode.encode(message.parallel, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n            if (message.fetch != null && Object.hasOwnProperty.call(message, \"fetch\"))\n                $root.Trace.QueryPlanNode.FetchNode.encode(message.fetch, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n            if (message.flatten != null && Object.hasOwnProperty.call(message, \"flatten\"))\n                $root.Trace.QueryPlanNode.FlattenNode.encode(message.flatten, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();\n            if (message.defer != null && Object.hasOwnProperty.call(message, \"defer\"))\n                $root.Trace.QueryPlanNode.DeferNode.encode(message.defer, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();\n            if (message.condition != null && Object.hasOwnProperty.call(message, \"condition\"))\n                $root.Trace.QueryPlanNode.ConditionNode.encode(message.condition, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();\n            return writer;\n        };\n\n        /**\n         * Encodes the specified QueryPlanNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Trace.IQueryPlanNode} message QueryPlanNode message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        QueryPlanNode.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a QueryPlanNode message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.QueryPlanNode} QueryPlanNode\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        QueryPlanNode.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode();\n            while (reader.pos < end) {\n                var tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.sequence = $root.Trace.QueryPlanNode.SequenceNode.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.parallel = $root.Trace.QueryPlanNode.ParallelNode.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.fetch = $root.Trace.QueryPlanNode.FetchNode.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.flatten = $root.Trace.QueryPlanNode.FlattenNode.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.defer = $root.Trace.QueryPlanNode.DeferNode.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.condition = $root.Trace.QueryPlanNode.ConditionNode.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a QueryPlanNode message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.QueryPlanNode} QueryPlanNode\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        QueryPlanNode.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a QueryPlanNode message.\n         * @function verify\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        QueryPlanNode.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            var properties = {};\n            if (message.sequence != null && message.hasOwnProperty(\"sequence\")) {\n                properties.node = 1;\n                {\n                    var error = $root.Trace.QueryPlanNode.SequenceNode.verify(message.sequence);\n                    if (error)\n                        return \"sequence.\" + error;\n                }\n            }\n            if (message.parallel != null && message.hasOwnProperty(\"parallel\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    var error = $root.Trace.QueryPlanNode.ParallelNode.verify(message.parallel);\n                    if (error)\n                        return \"parallel.\" + error;\n                }\n            }\n            if (message.fetch != null && message.hasOwnProperty(\"fetch\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    var error = $root.Trace.QueryPlanNode.FetchNode.verify(message.fetch);\n                    if (error)\n                        return \"fetch.\" + error;\n                }\n            }\n            if (message.flatten != null && message.hasOwnProperty(\"flatten\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    var error = $root.Trace.QueryPlanNode.FlattenNode.verify(message.flatten);\n                    if (error)\n                        return \"flatten.\" + error;\n                }\n            }\n            if (message.defer != null && message.hasOwnProperty(\"defer\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    var error = $root.Trace.QueryPlanNode.DeferNode.verify(message.defer);\n                    if (error)\n                        return \"defer.\" + error;\n                }\n            }\n            if (message.condition != null && message.hasOwnProperty(\"condition\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    var error = $root.Trace.QueryPlanNode.ConditionNode.verify(message.condition);\n                    if (error)\n                        return \"condition.\" + error;\n                }\n            }\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a QueryPlanNode message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Trace.QueryPlanNode} message QueryPlanNode\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        QueryPlanNode.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            var object = {};\n            if (message.sequence != null && message.hasOwnProperty(\"sequence\")) {\n                object.sequence = $root.Trace.QueryPlanNode.SequenceNode.toObject(message.sequence, options);\n                if (options.oneofs)\n                    object.node = \"sequence\";\n            }\n            if (message.parallel != null && message.hasOwnProperty(\"parallel\")) {\n                object.parallel = $root.Trace.QueryPlanNode.ParallelNode.toObject(message.parallel, options);\n                if (options.oneofs)\n                    object.node = \"parallel\";\n            }\n            if (message.fetch != null && message.hasOwnProperty(\"fetch\")) {\n                object.fetch = $root.Trace.QueryPlanNode.FetchNode.toObject(message.fetch, options);\n                if (options.oneofs)\n                    object.node = \"fetch\";\n            }\n            if (message.flatten != null && message.hasOwnProperty(\"flatten\")) {\n                object.flatten = $root.Trace.QueryPlanNode.FlattenNode.toObject(message.flatten, options);\n                if (options.oneofs)\n                    object.node = \"flatten\";\n            }\n            if (message.defer != null && message.hasOwnProperty(\"defer\")) {\n                object.defer = $root.Trace.QueryPlanNode.DeferNode.toObject(message.defer, options);\n                if (options.oneofs)\n                    object.node = \"defer\";\n            }\n            if (message.condition != null && message.hasOwnProperty(\"condition\")) {\n                object.condition = $root.Trace.QueryPlanNode.ConditionNode.toObject(message.condition, options);\n                if (options.oneofs)\n                    object.node = \"condition\";\n            }\n            return object;\n        };\n\n        /**\n         * Converts this QueryPlanNode to JSON.\n         * @function toJSON\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        QueryPlanNode.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n        };\n\n        QueryPlanNode.SequenceNode = (function() {\n\n            /**\n             * Properties of a SequenceNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface ISequenceNode\n             * @property {Array.<Trace.IQueryPlanNode>|null} [nodes] SequenceNode nodes\n             */\n\n            /**\n             * Constructs a new SequenceNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a SequenceNode.\n             * @implements ISequenceNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.ISequenceNode=} [properties] Properties to set\n             */\n            function SequenceNode(properties) {\n                this.nodes = [];\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * SequenceNode nodes.\n             * @member {Array.<Trace.IQueryPlanNode>} nodes\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @instance\n             */\n            SequenceNode.prototype.nodes = $util.emptyArray;\n\n            /**\n             * Creates a new SequenceNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Trace.QueryPlanNode.ISequenceNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.SequenceNode} SequenceNode instance\n             */\n            SequenceNode.create = function create(properties) {\n                return new SequenceNode(properties);\n            };\n\n            /**\n             * Encodes the specified SequenceNode message. Does not implicitly {@link Trace.QueryPlanNode.SequenceNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Trace.QueryPlanNode.ISequenceNode} message SequenceNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            SequenceNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.nodes != null && message.nodes.length)\n                    for (var i = 0; i < message.nodes.length; ++i)\n                        $root.Trace.QueryPlanNode.encode(message.nodes[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified SequenceNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.SequenceNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Trace.QueryPlanNode.ISequenceNode} message SequenceNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            SequenceNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a SequenceNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.SequenceNode} SequenceNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            SequenceNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.SequenceNode();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.nodes && message.nodes.length))\n                            message.nodes = [];\n                        message.nodes.push($root.Trace.QueryPlanNode.decode(reader, reader.uint32()));\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a SequenceNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.SequenceNode} SequenceNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            SequenceNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a SequenceNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            SequenceNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.nodes != null && message.hasOwnProperty(\"nodes\")) {\n                    if (!Array.isArray(message.nodes))\n                        return \"nodes: array expected\";\n                    for (var i = 0; i < message.nodes.length; ++i) {\n                        var error = $root.Trace.QueryPlanNode.verify(message.nodes[i]);\n                        if (error)\n                            return \"nodes.\" + error;\n                    }\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a SequenceNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Trace.QueryPlanNode.SequenceNode} message SequenceNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            SequenceNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.arrays || options.defaults)\n                    object.nodes = [];\n                if (message.nodes && message.nodes.length) {\n                    object.nodes = [];\n                    for (var j = 0; j < message.nodes.length; ++j)\n                        object.nodes[j] = $root.Trace.QueryPlanNode.toObject(message.nodes[j], options);\n                }\n                return object;\n            };\n\n            /**\n             * Converts this SequenceNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            SequenceNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return SequenceNode;\n        })();\n\n        QueryPlanNode.ParallelNode = (function() {\n\n            /**\n             * Properties of a ParallelNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IParallelNode\n             * @property {Array.<Trace.IQueryPlanNode>|null} [nodes] ParallelNode nodes\n             */\n\n            /**\n             * Constructs a new ParallelNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a ParallelNode.\n             * @implements IParallelNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IParallelNode=} [properties] Properties to set\n             */\n            function ParallelNode(properties) {\n                this.nodes = [];\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * ParallelNode nodes.\n             * @member {Array.<Trace.IQueryPlanNode>} nodes\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @instance\n             */\n            ParallelNode.prototype.nodes = $util.emptyArray;\n\n            /**\n             * Creates a new ParallelNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Trace.QueryPlanNode.IParallelNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.ParallelNode} ParallelNode instance\n             */\n            ParallelNode.create = function create(properties) {\n                return new ParallelNode(properties);\n            };\n\n            /**\n             * Encodes the specified ParallelNode message. Does not implicitly {@link Trace.QueryPlanNode.ParallelNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Trace.QueryPlanNode.IParallelNode} message ParallelNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ParallelNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.nodes != null && message.nodes.length)\n                    for (var i = 0; i < message.nodes.length; ++i)\n                        $root.Trace.QueryPlanNode.encode(message.nodes[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified ParallelNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.ParallelNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Trace.QueryPlanNode.IParallelNode} message ParallelNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ParallelNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a ParallelNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.ParallelNode} ParallelNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ParallelNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.ParallelNode();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.nodes && message.nodes.length))\n                            message.nodes = [];\n                        message.nodes.push($root.Trace.QueryPlanNode.decode(reader, reader.uint32()));\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a ParallelNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.ParallelNode} ParallelNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ParallelNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a ParallelNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            ParallelNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.nodes != null && message.hasOwnProperty(\"nodes\")) {\n                    if (!Array.isArray(message.nodes))\n                        return \"nodes: array expected\";\n                    for (var i = 0; i < message.nodes.length; ++i) {\n                        var error = $root.Trace.QueryPlanNode.verify(message.nodes[i]);\n                        if (error)\n                            return \"nodes.\" + error;\n                    }\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a ParallelNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Trace.QueryPlanNode.ParallelNode} message ParallelNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ParallelNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.arrays || options.defaults)\n                    object.nodes = [];\n                if (message.nodes && message.nodes.length) {\n                    object.nodes = [];\n                    for (var j = 0; j < message.nodes.length; ++j)\n                        object.nodes[j] = $root.Trace.QueryPlanNode.toObject(message.nodes[j], options);\n                }\n                return object;\n            };\n\n            /**\n             * Converts this ParallelNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ParallelNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return ParallelNode;\n        })();\n\n        QueryPlanNode.FetchNode = (function() {\n\n            /**\n             * Properties of a FetchNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IFetchNode\n             * @property {string|null} [serviceName] FetchNode serviceName\n             * @property {boolean|null} [traceParsingFailed] FetchNode traceParsingFailed\n             * @property {ITrace|null} [trace] FetchNode trace\n             * @property {number|null} [sentTimeOffset] FetchNode sentTimeOffset\n             * @property {google.protobuf.ITimestamp|null} [sentTime] FetchNode sentTime\n             * @property {google.protobuf.ITimestamp|null} [receivedTime] FetchNode receivedTime\n             */\n\n            /**\n             * Constructs a new FetchNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a FetchNode.\n             * @implements IFetchNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IFetchNode=} [properties] Properties to set\n             */\n            function FetchNode(properties) {\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * FetchNode serviceName.\n             * @member {string} serviceName\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.serviceName = \"\";\n\n            /**\n             * FetchNode traceParsingFailed.\n             * @member {boolean} traceParsingFailed\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.traceParsingFailed = false;\n\n            /**\n             * FetchNode trace.\n             * @member {ITrace|null|undefined} trace\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.trace = null;\n\n            /**\n             * FetchNode sentTimeOffset.\n             * @member {number} sentTimeOffset\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.sentTimeOffset = 0;\n\n            /**\n             * FetchNode sentTime.\n             * @member {google.protobuf.ITimestamp|null|undefined} sentTime\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.sentTime = null;\n\n            /**\n             * FetchNode receivedTime.\n             * @member {google.protobuf.ITimestamp|null|undefined} receivedTime\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.receivedTime = null;\n\n            /**\n             * Creates a new FetchNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFetchNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.FetchNode} FetchNode instance\n             */\n            FetchNode.create = function create(properties) {\n                return new FetchNode(properties);\n            };\n\n            /**\n             * Encodes the specified FetchNode message. Does not implicitly {@link Trace.QueryPlanNode.FetchNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFetchNode} message FetchNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            FetchNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.serviceName != null && Object.hasOwnProperty.call(message, \"serviceName\"))\n                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.serviceName);\n                if (message.traceParsingFailed != null && Object.hasOwnProperty.call(message, \"traceParsingFailed\"))\n                    writer.uint32(/* id 2, wireType 0 =*/16).bool(message.traceParsingFailed);\n                if (message.trace != null && Object.hasOwnProperty.call(message, \"trace\"))\n                    $root.Trace.encode(message.trace, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n                if (message.sentTimeOffset != null && Object.hasOwnProperty.call(message, \"sentTimeOffset\"))\n                    writer.uint32(/* id 4, wireType 0 =*/32).uint64(message.sentTimeOffset);\n                if (message.sentTime != null && Object.hasOwnProperty.call(message, \"sentTime\"))\n                    $root.google.protobuf.Timestamp.encode(message.sentTime, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();\n                if (message.receivedTime != null && Object.hasOwnProperty.call(message, \"receivedTime\"))\n                    $root.google.protobuf.Timestamp.encode(message.receivedTime, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified FetchNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.FetchNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFetchNode} message FetchNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            FetchNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a FetchNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.FetchNode} FetchNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            FetchNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.FetchNode();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.serviceName = reader.string();\n                        break;\n                    case 2:\n                        message.traceParsingFailed = reader.bool();\n                        break;\n                    case 3:\n                        message.trace = $root.Trace.decode(reader, reader.uint32());\n                        break;\n                    case 4:\n                        message.sentTimeOffset = reader.uint64();\n                        break;\n                    case 5:\n                        message.sentTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                        break;\n                    case 6:\n                        message.receivedTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a FetchNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.FetchNode} FetchNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            FetchNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a FetchNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            FetchNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.serviceName != null && message.hasOwnProperty(\"serviceName\"))\n                    if (!$util.isString(message.serviceName))\n                        return \"serviceName: string expected\";\n                if (message.traceParsingFailed != null && message.hasOwnProperty(\"traceParsingFailed\"))\n                    if (typeof message.traceParsingFailed !== \"boolean\")\n                        return \"traceParsingFailed: boolean expected\";\n                if (message.trace != null && message.hasOwnProperty(\"trace\")) {\n                    var error = $root.Trace.verify(message.trace);\n                    if (error)\n                        return \"trace.\" + error;\n                }\n                if (message.sentTimeOffset != null && message.hasOwnProperty(\"sentTimeOffset\"))\n                    if (!$util.isInteger(message.sentTimeOffset) && !(message.sentTimeOffset && $util.isInteger(message.sentTimeOffset.low) && $util.isInteger(message.sentTimeOffset.high)))\n                        return \"sentTimeOffset: integer|Long expected\";\n                if (message.sentTime != null && message.hasOwnProperty(\"sentTime\")) {\n                    var error = $root.google.protobuf.Timestamp.verify(message.sentTime);\n                    if (error)\n                        return \"sentTime.\" + error;\n                }\n                if (message.receivedTime != null && message.hasOwnProperty(\"receivedTime\")) {\n                    var error = $root.google.protobuf.Timestamp.verify(message.receivedTime);\n                    if (error)\n                        return \"receivedTime.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a FetchNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Trace.QueryPlanNode.FetchNode} message FetchNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            FetchNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.defaults) {\n                    object.serviceName = \"\";\n                    object.traceParsingFailed = false;\n                    object.trace = null;\n                    object.sentTimeOffset = 0;\n                    object.sentTime = null;\n                    object.receivedTime = null;\n                }\n                if (message.serviceName != null && message.hasOwnProperty(\"serviceName\"))\n                    object.serviceName = message.serviceName;\n                if (message.traceParsingFailed != null && message.hasOwnProperty(\"traceParsingFailed\"))\n                    object.traceParsingFailed = message.traceParsingFailed;\n                if (message.trace != null && message.hasOwnProperty(\"trace\"))\n                    object.trace = $root.Trace.toObject(message.trace, options);\n                if (message.sentTimeOffset != null && message.hasOwnProperty(\"sentTimeOffset\"))\n                    if (typeof message.sentTimeOffset === \"number\")\n                        object.sentTimeOffset = options.longs === String ? String(message.sentTimeOffset) : message.sentTimeOffset;\n                    else\n                        object.sentTimeOffset = options.longs === String ? $util.Long.prototype.toString.call(message.sentTimeOffset) : options.longs === Number ? new $util.LongBits(message.sentTimeOffset.low >>> 0, message.sentTimeOffset.high >>> 0).toNumber(true) : message.sentTimeOffset;\n                if (message.sentTime != null && message.hasOwnProperty(\"sentTime\"))\n                    object.sentTime = $root.google.protobuf.Timestamp.toObject(message.sentTime, options);\n                if (message.receivedTime != null && message.hasOwnProperty(\"receivedTime\"))\n                    object.receivedTime = $root.google.protobuf.Timestamp.toObject(message.receivedTime, options);\n                return object;\n            };\n\n            /**\n             * Converts this FetchNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            FetchNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return FetchNode;\n        })();\n\n        QueryPlanNode.FlattenNode = (function() {\n\n            /**\n             * Properties of a FlattenNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IFlattenNode\n             * @property {Array.<Trace.QueryPlanNode.IResponsePathElement>|null} [responsePath] FlattenNode responsePath\n             * @property {Trace.IQueryPlanNode|null} [node] FlattenNode node\n             */\n\n            /**\n             * Constructs a new FlattenNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a FlattenNode.\n             * @implements IFlattenNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IFlattenNode=} [properties] Properties to set\n             */\n            function FlattenNode(properties) {\n                this.responsePath = [];\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * FlattenNode responsePath.\n             * @member {Array.<Trace.QueryPlanNode.IResponsePathElement>} responsePath\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @instance\n             */\n            FlattenNode.prototype.responsePath = $util.emptyArray;\n\n            /**\n             * FlattenNode node.\n             * @member {Trace.IQueryPlanNode|null|undefined} node\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @instance\n             */\n            FlattenNode.prototype.node = null;\n\n            /**\n             * Creates a new FlattenNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFlattenNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.FlattenNode} FlattenNode instance\n             */\n            FlattenNode.create = function create(properties) {\n                return new FlattenNode(properties);\n            };\n\n            /**\n             * Encodes the specified FlattenNode message. Does not implicitly {@link Trace.QueryPlanNode.FlattenNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFlattenNode} message FlattenNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            FlattenNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.responsePath != null && message.responsePath.length)\n                    for (var i = 0; i < message.responsePath.length; ++i)\n                        $root.Trace.QueryPlanNode.ResponsePathElement.encode(message.responsePath[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                if (message.node != null && Object.hasOwnProperty.call(message, \"node\"))\n                    $root.Trace.QueryPlanNode.encode(message.node, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified FlattenNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.FlattenNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFlattenNode} message FlattenNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            FlattenNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a FlattenNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.FlattenNode} FlattenNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            FlattenNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.FlattenNode();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.responsePath && message.responsePath.length))\n                            message.responsePath = [];\n                        message.responsePath.push($root.Trace.QueryPlanNode.ResponsePathElement.decode(reader, reader.uint32()));\n                        break;\n                    case 2:\n                        message.node = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a FlattenNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.FlattenNode} FlattenNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            FlattenNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a FlattenNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            FlattenNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.responsePath != null && message.hasOwnProperty(\"responsePath\")) {\n                    if (!Array.isArray(message.responsePath))\n                        return \"responsePath: array expected\";\n                    for (var i = 0; i < message.responsePath.length; ++i) {\n                        var error = $root.Trace.QueryPlanNode.ResponsePathElement.verify(message.responsePath[i]);\n                        if (error)\n                            return \"responsePath.\" + error;\n                    }\n                }\n                if (message.node != null && message.hasOwnProperty(\"node\")) {\n                    var error = $root.Trace.QueryPlanNode.verify(message.node);\n                    if (error)\n                        return \"node.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a FlattenNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Trace.QueryPlanNode.FlattenNode} message FlattenNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            FlattenNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.arrays || options.defaults)\n                    object.responsePath = [];\n                if (options.defaults)\n                    object.node = null;\n                if (message.responsePath && message.responsePath.length) {\n                    object.responsePath = [];\n                    for (var j = 0; j < message.responsePath.length; ++j)\n                        object.responsePath[j] = $root.Trace.QueryPlanNode.ResponsePathElement.toObject(message.responsePath[j], options);\n                }\n                if (message.node != null && message.hasOwnProperty(\"node\"))\n                    object.node = $root.Trace.QueryPlanNode.toObject(message.node, options);\n                return object;\n            };\n\n            /**\n             * Converts this FlattenNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            FlattenNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return FlattenNode;\n        })();\n\n        QueryPlanNode.DeferNode = (function() {\n\n            /**\n             * Properties of a DeferNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IDeferNode\n             * @property {Trace.QueryPlanNode.IDeferNodePrimary|null} [primary] DeferNode primary\n             * @property {Array.<Trace.QueryPlanNode.IDeferredNode>|null} [deferred] DeferNode deferred\n             */\n\n            /**\n             * Constructs a new DeferNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a DeferNode.\n             * @implements IDeferNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IDeferNode=} [properties] Properties to set\n             */\n            function DeferNode(properties) {\n                this.deferred = [];\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * DeferNode primary.\n             * @member {Trace.QueryPlanNode.IDeferNodePrimary|null|undefined} primary\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @instance\n             */\n            DeferNode.prototype.primary = null;\n\n            /**\n             * DeferNode deferred.\n             * @member {Array.<Trace.QueryPlanNode.IDeferredNode>} deferred\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @instance\n             */\n            DeferNode.prototype.deferred = $util.emptyArray;\n\n            /**\n             * Creates a new DeferNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.DeferNode} DeferNode instance\n             */\n            DeferNode.create = function create(properties) {\n                return new DeferNode(properties);\n            };\n\n            /**\n             * Encodes the specified DeferNode message. Does not implicitly {@link Trace.QueryPlanNode.DeferNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNode} message DeferNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.primary != null && Object.hasOwnProperty.call(message, \"primary\"))\n                    $root.Trace.QueryPlanNode.DeferNodePrimary.encode(message.primary, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                if (message.deferred != null && message.deferred.length)\n                    for (var i = 0; i < message.deferred.length; ++i)\n                        $root.Trace.QueryPlanNode.DeferredNode.encode(message.deferred[i], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified DeferNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.DeferNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNode} message DeferNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a DeferNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.DeferNode} DeferNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.DeferNode();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.primary = $root.Trace.QueryPlanNode.DeferNodePrimary.decode(reader, reader.uint32());\n                        break;\n                    case 2:\n                        if (!(message.deferred && message.deferred.length))\n                            message.deferred = [];\n                        message.deferred.push($root.Trace.QueryPlanNode.DeferredNode.decode(reader, reader.uint32()));\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a DeferNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.DeferNode} DeferNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a DeferNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            DeferNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.primary != null && message.hasOwnProperty(\"primary\")) {\n                    var error = $root.Trace.QueryPlanNode.DeferNodePrimary.verify(message.primary);\n                    if (error)\n                        return \"primary.\" + error;\n                }\n                if (message.deferred != null && message.hasOwnProperty(\"deferred\")) {\n                    if (!Array.isArray(message.deferred))\n                        return \"deferred: array expected\";\n                    for (var i = 0; i < message.deferred.length; ++i) {\n                        var error = $root.Trace.QueryPlanNode.DeferredNode.verify(message.deferred[i]);\n                        if (error)\n                            return \"deferred.\" + error;\n                    }\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a DeferNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Trace.QueryPlanNode.DeferNode} message DeferNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            DeferNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.arrays || options.defaults)\n                    object.deferred = [];\n                if (options.defaults)\n                    object.primary = null;\n                if (message.primary != null && message.hasOwnProperty(\"primary\"))\n                    object.primary = $root.Trace.QueryPlanNode.DeferNodePrimary.toObject(message.primary, options);\n                if (message.deferred && message.deferred.length) {\n                    object.deferred = [];\n                    for (var j = 0; j < message.deferred.length; ++j)\n                        object.deferred[j] = $root.Trace.QueryPlanNode.DeferredNode.toObject(message.deferred[j], options);\n                }\n                return object;\n            };\n\n            /**\n             * Converts this DeferNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            DeferNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return DeferNode;\n        })();\n\n        QueryPlanNode.ConditionNode = (function() {\n\n            /**\n             * Properties of a ConditionNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IConditionNode\n             * @property {string|null} [condition] ConditionNode condition\n             * @property {Trace.IQueryPlanNode|null} [ifClause] ConditionNode ifClause\n             * @property {Trace.IQueryPlanNode|null} [elseClause] ConditionNode elseClause\n             */\n\n            /**\n             * Constructs a new ConditionNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a ConditionNode.\n             * @implements IConditionNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IConditionNode=} [properties] Properties to set\n             */\n            function ConditionNode(properties) {\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * ConditionNode condition.\n             * @member {string} condition\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @instance\n             */\n            ConditionNode.prototype.condition = \"\";\n\n            /**\n             * ConditionNode ifClause.\n             * @member {Trace.IQueryPlanNode|null|undefined} ifClause\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @instance\n             */\n            ConditionNode.prototype.ifClause = null;\n\n            /**\n             * ConditionNode elseClause.\n             * @member {Trace.IQueryPlanNode|null|undefined} elseClause\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @instance\n             */\n            ConditionNode.prototype.elseClause = null;\n\n            /**\n             * Creates a new ConditionNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Trace.QueryPlanNode.IConditionNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.ConditionNode} ConditionNode instance\n             */\n            ConditionNode.create = function create(properties) {\n                return new ConditionNode(properties);\n            };\n\n            /**\n             * Encodes the specified ConditionNode message. Does not implicitly {@link Trace.QueryPlanNode.ConditionNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Trace.QueryPlanNode.IConditionNode} message ConditionNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ConditionNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.condition != null && Object.hasOwnProperty.call(message, \"condition\"))\n                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.condition);\n                if (message.ifClause != null && Object.hasOwnProperty.call(message, \"ifClause\"))\n                    $root.Trace.QueryPlanNode.encode(message.ifClause, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n                if (message.elseClause != null && Object.hasOwnProperty.call(message, \"elseClause\"))\n                    $root.Trace.QueryPlanNode.encode(message.elseClause, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified ConditionNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.ConditionNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Trace.QueryPlanNode.IConditionNode} message ConditionNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ConditionNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a ConditionNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.ConditionNode} ConditionNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ConditionNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.ConditionNode();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.condition = reader.string();\n                        break;\n                    case 2:\n                        message.ifClause = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    case 3:\n                        message.elseClause = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a ConditionNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.ConditionNode} ConditionNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ConditionNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a ConditionNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            ConditionNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.condition != null && message.hasOwnProperty(\"condition\"))\n                    if (!$util.isString(message.condition))\n                        return \"condition: string expected\";\n                if (message.ifClause != null && message.hasOwnProperty(\"ifClause\")) {\n                    var error = $root.Trace.QueryPlanNode.verify(message.ifClause);\n                    if (error)\n                        return \"ifClause.\" + error;\n                }\n                if (message.elseClause != null && message.hasOwnProperty(\"elseClause\")) {\n                    var error = $root.Trace.QueryPlanNode.verify(message.elseClause);\n                    if (error)\n                        return \"elseClause.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a ConditionNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Trace.QueryPlanNode.ConditionNode} message ConditionNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ConditionNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.defaults) {\n                    object.condition = \"\";\n                    object.ifClause = null;\n                    object.elseClause = null;\n                }\n                if (message.condition != null && message.hasOwnProperty(\"condition\"))\n                    object.condition = message.condition;\n                if (message.ifClause != null && message.hasOwnProperty(\"ifClause\"))\n                    object.ifClause = $root.Trace.QueryPlanNode.toObject(message.ifClause, options);\n                if (message.elseClause != null && message.hasOwnProperty(\"elseClause\"))\n                    object.elseClause = $root.Trace.QueryPlanNode.toObject(message.elseClause, options);\n                return object;\n            };\n\n            /**\n             * Converts this ConditionNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ConditionNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return ConditionNode;\n        })();\n\n        QueryPlanNode.DeferNodePrimary = (function() {\n\n            /**\n             * Properties of a DeferNodePrimary.\n             * @memberof Trace.QueryPlanNode\n             * @interface IDeferNodePrimary\n             * @property {Trace.IQueryPlanNode|null} [node] DeferNodePrimary node\n             */\n\n            /**\n             * Constructs a new DeferNodePrimary.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a DeferNodePrimary.\n             * @implements IDeferNodePrimary\n             * @constructor\n             * @param {Trace.QueryPlanNode.IDeferNodePrimary=} [properties] Properties to set\n             */\n            function DeferNodePrimary(properties) {\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * DeferNodePrimary node.\n             * @member {Trace.IQueryPlanNode|null|undefined} node\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @instance\n             */\n            DeferNodePrimary.prototype.node = null;\n\n            /**\n             * Creates a new DeferNodePrimary instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNodePrimary=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.DeferNodePrimary} DeferNodePrimary instance\n             */\n            DeferNodePrimary.create = function create(properties) {\n                return new DeferNodePrimary(properties);\n            };\n\n            /**\n             * Encodes the specified DeferNodePrimary message. Does not implicitly {@link Trace.QueryPlanNode.DeferNodePrimary.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNodePrimary} message DeferNodePrimary message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferNodePrimary.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.node != null && Object.hasOwnProperty.call(message, \"node\"))\n                    $root.Trace.QueryPlanNode.encode(message.node, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified DeferNodePrimary message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.DeferNodePrimary.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNodePrimary} message DeferNodePrimary message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferNodePrimary.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a DeferNodePrimary message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.DeferNodePrimary} DeferNodePrimary\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferNodePrimary.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.DeferNodePrimary();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.node = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a DeferNodePrimary message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.DeferNodePrimary} DeferNodePrimary\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferNodePrimary.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a DeferNodePrimary message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            DeferNodePrimary.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.node != null && message.hasOwnProperty(\"node\")) {\n                    var error = $root.Trace.QueryPlanNode.verify(message.node);\n                    if (error)\n                        return \"node.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a DeferNodePrimary message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Trace.QueryPlanNode.DeferNodePrimary} message DeferNodePrimary\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            DeferNodePrimary.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.defaults)\n                    object.node = null;\n                if (message.node != null && message.hasOwnProperty(\"node\"))\n                    object.node = $root.Trace.QueryPlanNode.toObject(message.node, options);\n                return object;\n            };\n\n            /**\n             * Converts this DeferNodePrimary to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            DeferNodePrimary.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return DeferNodePrimary;\n        })();\n\n        QueryPlanNode.DeferredNode = (function() {\n\n            /**\n             * Properties of a DeferredNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IDeferredNode\n             * @property {Array.<Trace.QueryPlanNode.IDeferredNodeDepends>|null} [depends] DeferredNode depends\n             * @property {string|null} [label] DeferredNode label\n             * @property {Array.<Trace.QueryPlanNode.IResponsePathElement>|null} [path] DeferredNode path\n             * @property {Trace.IQueryPlanNode|null} [node] DeferredNode node\n             */\n\n            /**\n             * Constructs a new DeferredNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a DeferredNode.\n             * @implements IDeferredNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IDeferredNode=} [properties] Properties to set\n             */\n            function DeferredNode(properties) {\n                this.depends = [];\n                this.path = [];\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * DeferredNode depends.\n             * @member {Array.<Trace.QueryPlanNode.IDeferredNodeDepends>} depends\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             */\n            DeferredNode.prototype.depends = $util.emptyArray;\n\n            /**\n             * DeferredNode label.\n             * @member {string} label\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             */\n            DeferredNode.prototype.label = \"\";\n\n            /**\n             * DeferredNode path.\n             * @member {Array.<Trace.QueryPlanNode.IResponsePathElement>} path\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             */\n            DeferredNode.prototype.path = $util.emptyArray;\n\n            /**\n             * DeferredNode node.\n             * @member {Trace.IQueryPlanNode|null|undefined} node\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             */\n            DeferredNode.prototype.node = null;\n\n            /**\n             * Creates a new DeferredNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.DeferredNode} DeferredNode instance\n             */\n            DeferredNode.create = function create(properties) {\n                return new DeferredNode(properties);\n            };\n\n            /**\n             * Encodes the specified DeferredNode message. Does not implicitly {@link Trace.QueryPlanNode.DeferredNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNode} message DeferredNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferredNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.depends != null && message.depends.length)\n                    for (var i = 0; i < message.depends.length; ++i)\n                        $root.Trace.QueryPlanNode.DeferredNodeDepends.encode(message.depends[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                if (message.label != null && Object.hasOwnProperty.call(message, \"label\"))\n                    writer.uint32(/* id 2, wireType 2 =*/18).string(message.label);\n                if (message.path != null && message.path.length)\n                    for (var i = 0; i < message.path.length; ++i)\n                        $root.Trace.QueryPlanNode.ResponsePathElement.encode(message.path[i], writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n                if (message.node != null && Object.hasOwnProperty.call(message, \"node\"))\n                    $root.Trace.QueryPlanNode.encode(message.node, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified DeferredNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.DeferredNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNode} message DeferredNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferredNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a DeferredNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.DeferredNode} DeferredNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferredNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.DeferredNode();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.depends && message.depends.length))\n                            message.depends = [];\n                        message.depends.push($root.Trace.QueryPlanNode.DeferredNodeDepends.decode(reader, reader.uint32()));\n                        break;\n                    case 2:\n                        message.label = reader.string();\n                        break;\n                    case 3:\n                        if (!(message.path && message.path.length))\n                            message.path = [];\n                        message.path.push($root.Trace.QueryPlanNode.ResponsePathElement.decode(reader, reader.uint32()));\n                        break;\n                    case 4:\n                        message.node = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a DeferredNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.DeferredNode} DeferredNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferredNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a DeferredNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            DeferredNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.depends != null && message.hasOwnProperty(\"depends\")) {\n                    if (!Array.isArray(message.depends))\n                        return \"depends: array expected\";\n                    for (var i = 0; i < message.depends.length; ++i) {\n                        var error = $root.Trace.QueryPlanNode.DeferredNodeDepends.verify(message.depends[i]);\n                        if (error)\n                            return \"depends.\" + error;\n                    }\n                }\n                if (message.label != null && message.hasOwnProperty(\"label\"))\n                    if (!$util.isString(message.label))\n                        return \"label: string expected\";\n                if (message.path != null && message.hasOwnProperty(\"path\")) {\n                    if (!Array.isArray(message.path))\n                        return \"path: array expected\";\n                    for (var i = 0; i < message.path.length; ++i) {\n                        var error = $root.Trace.QueryPlanNode.ResponsePathElement.verify(message.path[i]);\n                        if (error)\n                            return \"path.\" + error;\n                    }\n                }\n                if (message.node != null && message.hasOwnProperty(\"node\")) {\n                    var error = $root.Trace.QueryPlanNode.verify(message.node);\n                    if (error)\n                        return \"node.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a DeferredNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Trace.QueryPlanNode.DeferredNode} message DeferredNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            DeferredNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.arrays || options.defaults) {\n                    object.depends = [];\n                    object.path = [];\n                }\n                if (options.defaults) {\n                    object.label = \"\";\n                    object.node = null;\n                }\n                if (message.depends && message.depends.length) {\n                    object.depends = [];\n                    for (var j = 0; j < message.depends.length; ++j)\n                        object.depends[j] = $root.Trace.QueryPlanNode.DeferredNodeDepends.toObject(message.depends[j], options);\n                }\n                if (message.label != null && message.hasOwnProperty(\"label\"))\n                    object.label = message.label;\n                if (message.path && message.path.length) {\n                    object.path = [];\n                    for (var j = 0; j < message.path.length; ++j)\n                        object.path[j] = $root.Trace.QueryPlanNode.ResponsePathElement.toObject(message.path[j], options);\n                }\n                if (message.node != null && message.hasOwnProperty(\"node\"))\n                    object.node = $root.Trace.QueryPlanNode.toObject(message.node, options);\n                return object;\n            };\n\n            /**\n             * Converts this DeferredNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            DeferredNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return DeferredNode;\n        })();\n\n        QueryPlanNode.DeferredNodeDepends = (function() {\n\n            /**\n             * Properties of a DeferredNodeDepends.\n             * @memberof Trace.QueryPlanNode\n             * @interface IDeferredNodeDepends\n             * @property {string|null} [id] DeferredNodeDepends id\n             * @property {string|null} [deferLabel] DeferredNodeDepends deferLabel\n             */\n\n            /**\n             * Constructs a new DeferredNodeDepends.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a DeferredNodeDepends.\n             * @implements IDeferredNodeDepends\n             * @constructor\n             * @param {Trace.QueryPlanNode.IDeferredNodeDepends=} [properties] Properties to set\n             */\n            function DeferredNodeDepends(properties) {\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * DeferredNodeDepends id.\n             * @member {string} id\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @instance\n             */\n            DeferredNodeDepends.prototype.id = \"\";\n\n            /**\n             * DeferredNodeDepends deferLabel.\n             * @member {string} deferLabel\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @instance\n             */\n            DeferredNodeDepends.prototype.deferLabel = \"\";\n\n            /**\n             * Creates a new DeferredNodeDepends instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNodeDepends=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.DeferredNodeDepends} DeferredNodeDepends instance\n             */\n            DeferredNodeDepends.create = function create(properties) {\n                return new DeferredNodeDepends(properties);\n            };\n\n            /**\n             * Encodes the specified DeferredNodeDepends message. Does not implicitly {@link Trace.QueryPlanNode.DeferredNodeDepends.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNodeDepends} message DeferredNodeDepends message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferredNodeDepends.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.id != null && Object.hasOwnProperty.call(message, \"id\"))\n                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.id);\n                if (message.deferLabel != null && Object.hasOwnProperty.call(message, \"deferLabel\"))\n                    writer.uint32(/* id 2, wireType 2 =*/18).string(message.deferLabel);\n                return writer;\n            };\n\n            /**\n             * Encodes the specified DeferredNodeDepends message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.DeferredNodeDepends.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNodeDepends} message DeferredNodeDepends message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferredNodeDepends.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a DeferredNodeDepends message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.DeferredNodeDepends} DeferredNodeDepends\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferredNodeDepends.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.DeferredNodeDepends();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.id = reader.string();\n                        break;\n                    case 2:\n                        message.deferLabel = reader.string();\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a DeferredNodeDepends message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.DeferredNodeDepends} DeferredNodeDepends\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferredNodeDepends.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a DeferredNodeDepends message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            DeferredNodeDepends.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.id != null && message.hasOwnProperty(\"id\"))\n                    if (!$util.isString(message.id))\n                        return \"id: string expected\";\n                if (message.deferLabel != null && message.hasOwnProperty(\"deferLabel\"))\n                    if (!$util.isString(message.deferLabel))\n                        return \"deferLabel: string expected\";\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a DeferredNodeDepends message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Trace.QueryPlanNode.DeferredNodeDepends} message DeferredNodeDepends\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            DeferredNodeDepends.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.defaults) {\n                    object.id = \"\";\n                    object.deferLabel = \"\";\n                }\n                if (message.id != null && message.hasOwnProperty(\"id\"))\n                    object.id = message.id;\n                if (message.deferLabel != null && message.hasOwnProperty(\"deferLabel\"))\n                    object.deferLabel = message.deferLabel;\n                return object;\n            };\n\n            /**\n             * Converts this DeferredNodeDepends to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            DeferredNodeDepends.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return DeferredNodeDepends;\n        })();\n\n        QueryPlanNode.ResponsePathElement = (function() {\n\n            /**\n             * Properties of a ResponsePathElement.\n             * @memberof Trace.QueryPlanNode\n             * @interface IResponsePathElement\n             * @property {string|null} [fieldName] ResponsePathElement fieldName\n             * @property {number|null} [index] ResponsePathElement index\n             */\n\n            /**\n             * Constructs a new ResponsePathElement.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a ResponsePathElement.\n             * @implements IResponsePathElement\n             * @constructor\n             * @param {Trace.QueryPlanNode.IResponsePathElement=} [properties] Properties to set\n             */\n            function ResponsePathElement(properties) {\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * ResponsePathElement fieldName.\n             * @member {string} fieldName\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @instance\n             */\n            ResponsePathElement.prototype.fieldName = \"\";\n\n            /**\n             * ResponsePathElement index.\n             * @member {number} index\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @instance\n             */\n            ResponsePathElement.prototype.index = 0;\n\n            // OneOf field names bound to virtual getters and setters\n            var $oneOfFields;\n\n            /**\n             * ResponsePathElement id.\n             * @member {\"fieldName\"|\"index\"|undefined} id\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @instance\n             */\n            Object.defineProperty(ResponsePathElement.prototype, \"id\", {\n                get: $util.oneOfGetter($oneOfFields = [\"fieldName\", \"index\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Creates a new ResponsePathElement instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Trace.QueryPlanNode.IResponsePathElement=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.ResponsePathElement} ResponsePathElement instance\n             */\n            ResponsePathElement.create = function create(properties) {\n                return new ResponsePathElement(properties);\n            };\n\n            /**\n             * Encodes the specified ResponsePathElement message. Does not implicitly {@link Trace.QueryPlanNode.ResponsePathElement.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Trace.QueryPlanNode.IResponsePathElement} message ResponsePathElement message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ResponsePathElement.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.fieldName != null && Object.hasOwnProperty.call(message, \"fieldName\"))\n                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.fieldName);\n                if (message.index != null && Object.hasOwnProperty.call(message, \"index\"))\n                    writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.index);\n                return writer;\n            };\n\n            /**\n             * Encodes the specified ResponsePathElement message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.ResponsePathElement.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Trace.QueryPlanNode.IResponsePathElement} message ResponsePathElement message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ResponsePathElement.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a ResponsePathElement message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.ResponsePathElement} ResponsePathElement\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ResponsePathElement.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.ResponsePathElement();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.fieldName = reader.string();\n                        break;\n                    case 2:\n                        message.index = reader.uint32();\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a ResponsePathElement message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.ResponsePathElement} ResponsePathElement\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ResponsePathElement.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a ResponsePathElement message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            ResponsePathElement.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                var properties = {};\n                if (message.fieldName != null && message.hasOwnProperty(\"fieldName\")) {\n                    properties.id = 1;\n                    if (!$util.isString(message.fieldName))\n                        return \"fieldName: string expected\";\n                }\n                if (message.index != null && message.hasOwnProperty(\"index\")) {\n                    if (properties.id === 1)\n                        return \"id: multiple values\";\n                    properties.id = 1;\n                    if (!$util.isInteger(message.index))\n                        return \"index: integer expected\";\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a ResponsePathElement message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Trace.QueryPlanNode.ResponsePathElement} message ResponsePathElement\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ResponsePathElement.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (message.fieldName != null && message.hasOwnProperty(\"fieldName\")) {\n                    object.fieldName = message.fieldName;\n                    if (options.oneofs)\n                        object.id = \"fieldName\";\n                }\n                if (message.index != null && message.hasOwnProperty(\"index\")) {\n                    object.index = message.index;\n                    if (options.oneofs)\n                        object.id = \"index\";\n                }\n                return object;\n            };\n\n            /**\n             * Converts this ResponsePathElement to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ResponsePathElement.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return ResponsePathElement;\n        })();\n\n        return QueryPlanNode;\n    })();\n\n    return Trace;\n})();\n\n$root.ReportHeader = (function() {\n\n    /**\n     * Properties of a ReportHeader.\n     * @exports IReportHeader\n     * @interface IReportHeader\n     * @property {string|null} [graphRef] ReportHeader graphRef\n     * @property {string|null} [hostname] ReportHeader hostname\n     * @property {string|null} [agentVersion] ReportHeader agentVersion\n     * @property {string|null} [serviceVersion] ReportHeader serviceVersion\n     * @property {string|null} [runtimeVersion] ReportHeader runtimeVersion\n     * @property {string|null} [uname] ReportHeader uname\n     * @property {string|null} [executableSchemaId] ReportHeader executableSchemaId\n     */\n\n    /**\n     * Constructs a new ReportHeader.\n     * @exports ReportHeader\n     * @classdesc Represents a ReportHeader.\n     * @implements IReportHeader\n     * @constructor\n     * @param {IReportHeader=} [properties] Properties to set\n     */\n    function ReportHeader(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ReportHeader graphRef.\n     * @member {string} graphRef\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.graphRef = \"\";\n\n    /**\n     * ReportHeader hostname.\n     * @member {string} hostname\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.hostname = \"\";\n\n    /**\n     * ReportHeader agentVersion.\n     * @member {string} agentVersion\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.agentVersion = \"\";\n\n    /**\n     * ReportHeader serviceVersion.\n     * @member {string} serviceVersion\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.serviceVersion = \"\";\n\n    /**\n     * ReportHeader runtimeVersion.\n     * @member {string} runtimeVersion\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.runtimeVersion = \"\";\n\n    /**\n     * ReportHeader uname.\n     * @member {string} uname\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.uname = \"\";\n\n    /**\n     * ReportHeader executableSchemaId.\n     * @member {string} executableSchemaId\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.executableSchemaId = \"\";\n\n    /**\n     * Creates a new ReportHeader instance using the specified properties.\n     * @function create\n     * @memberof ReportHeader\n     * @static\n     * @param {IReportHeader=} [properties] Properties to set\n     * @returns {ReportHeader} ReportHeader instance\n     */\n    ReportHeader.create = function create(properties) {\n        return new ReportHeader(properties);\n    };\n\n    /**\n     * Encodes the specified ReportHeader message. Does not implicitly {@link ReportHeader.verify|verify} messages.\n     * @function encode\n     * @memberof ReportHeader\n     * @static\n     * @param {IReportHeader} message ReportHeader message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ReportHeader.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.hostname != null && Object.hasOwnProperty.call(message, \"hostname\"))\n            writer.uint32(/* id 5, wireType 2 =*/42).string(message.hostname);\n        if (message.agentVersion != null && Object.hasOwnProperty.call(message, \"agentVersion\"))\n            writer.uint32(/* id 6, wireType 2 =*/50).string(message.agentVersion);\n        if (message.serviceVersion != null && Object.hasOwnProperty.call(message, \"serviceVersion\"))\n            writer.uint32(/* id 7, wireType 2 =*/58).string(message.serviceVersion);\n        if (message.runtimeVersion != null && Object.hasOwnProperty.call(message, \"runtimeVersion\"))\n            writer.uint32(/* id 8, wireType 2 =*/66).string(message.runtimeVersion);\n        if (message.uname != null && Object.hasOwnProperty.call(message, \"uname\"))\n            writer.uint32(/* id 9, wireType 2 =*/74).string(message.uname);\n        if (message.executableSchemaId != null && Object.hasOwnProperty.call(message, \"executableSchemaId\"))\n            writer.uint32(/* id 11, wireType 2 =*/90).string(message.executableSchemaId);\n        if (message.graphRef != null && Object.hasOwnProperty.call(message, \"graphRef\"))\n            writer.uint32(/* id 12, wireType 2 =*/98).string(message.graphRef);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ReportHeader message, length delimited. Does not implicitly {@link ReportHeader.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ReportHeader\n     * @static\n     * @param {IReportHeader} message ReportHeader message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ReportHeader.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ReportHeader message from the specified reader or buffer.\n     * @function decode\n     * @memberof ReportHeader\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ReportHeader} ReportHeader\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ReportHeader.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ReportHeader();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 12:\n                message.graphRef = reader.string();\n                break;\n            case 5:\n                message.hostname = reader.string();\n                break;\n            case 6:\n                message.agentVersion = reader.string();\n                break;\n            case 7:\n                message.serviceVersion = reader.string();\n                break;\n            case 8:\n                message.runtimeVersion = reader.string();\n                break;\n            case 9:\n                message.uname = reader.string();\n                break;\n            case 11:\n                message.executableSchemaId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ReportHeader message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ReportHeader\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ReportHeader} ReportHeader\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ReportHeader.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ReportHeader message.\n     * @function verify\n     * @memberof ReportHeader\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ReportHeader.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.graphRef != null && message.hasOwnProperty(\"graphRef\"))\n            if (!$util.isString(message.graphRef))\n                return \"graphRef: string expected\";\n        if (message.hostname != null && message.hasOwnProperty(\"hostname\"))\n            if (!$util.isString(message.hostname))\n                return \"hostname: string expected\";\n        if (message.agentVersion != null && message.hasOwnProperty(\"agentVersion\"))\n            if (!$util.isString(message.agentVersion))\n                return \"agentVersion: string expected\";\n        if (message.serviceVersion != null && message.hasOwnProperty(\"serviceVersion\"))\n            if (!$util.isString(message.serviceVersion))\n                return \"serviceVersion: string expected\";\n        if (message.runtimeVersion != null && message.hasOwnProperty(\"runtimeVersion\"))\n            if (!$util.isString(message.runtimeVersion))\n                return \"runtimeVersion: string expected\";\n        if (message.uname != null && message.hasOwnProperty(\"uname\"))\n            if (!$util.isString(message.uname))\n                return \"uname: string expected\";\n        if (message.executableSchemaId != null && message.hasOwnProperty(\"executableSchemaId\"))\n            if (!$util.isString(message.executableSchemaId))\n                return \"executableSchemaId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ReportHeader message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ReportHeader\n     * @static\n     * @param {ReportHeader} message ReportHeader\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ReportHeader.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.hostname = \"\";\n            object.agentVersion = \"\";\n            object.serviceVersion = \"\";\n            object.runtimeVersion = \"\";\n            object.uname = \"\";\n            object.executableSchemaId = \"\";\n            object.graphRef = \"\";\n        }\n        if (message.hostname != null && message.hasOwnProperty(\"hostname\"))\n            object.hostname = message.hostname;\n        if (message.agentVersion != null && message.hasOwnProperty(\"agentVersion\"))\n            object.agentVersion = message.agentVersion;\n        if (message.serviceVersion != null && message.hasOwnProperty(\"serviceVersion\"))\n            object.serviceVersion = message.serviceVersion;\n        if (message.runtimeVersion != null && message.hasOwnProperty(\"runtimeVersion\"))\n            object.runtimeVersion = message.runtimeVersion;\n        if (message.uname != null && message.hasOwnProperty(\"uname\"))\n            object.uname = message.uname;\n        if (message.executableSchemaId != null && message.hasOwnProperty(\"executableSchemaId\"))\n            object.executableSchemaId = message.executableSchemaId;\n        if (message.graphRef != null && message.hasOwnProperty(\"graphRef\"))\n            object.graphRef = message.graphRef;\n        return object;\n    };\n\n    /**\n     * Converts this ReportHeader to JSON.\n     * @function toJSON\n     * @memberof ReportHeader\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ReportHeader.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ReportHeader;\n})();\n\n$root.PathErrorStats = (function() {\n\n    /**\n     * Properties of a PathErrorStats.\n     * @exports IPathErrorStats\n     * @interface IPathErrorStats\n     * @property {Object.<string,IPathErrorStats>|null} [children] PathErrorStats children\n     * @property {number|null} [errorsCount] PathErrorStats errorsCount\n     * @property {number|null} [requestsWithErrorsCount] PathErrorStats requestsWithErrorsCount\n     */\n\n    /**\n     * Constructs a new PathErrorStats.\n     * @exports PathErrorStats\n     * @classdesc Represents a PathErrorStats.\n     * @implements IPathErrorStats\n     * @constructor\n     * @param {IPathErrorStats=} [properties] Properties to set\n     */\n    function PathErrorStats(properties) {\n        this.children = {};\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * PathErrorStats children.\n     * @member {Object.<string,IPathErrorStats>} children\n     * @memberof PathErrorStats\n     * @instance\n     */\n    PathErrorStats.prototype.children = $util.emptyObject;\n\n    /**\n     * PathErrorStats errorsCount.\n     * @member {number} errorsCount\n     * @memberof PathErrorStats\n     * @instance\n     */\n    PathErrorStats.prototype.errorsCount = 0;\n\n    /**\n     * PathErrorStats requestsWithErrorsCount.\n     * @member {number} requestsWithErrorsCount\n     * @memberof PathErrorStats\n     * @instance\n     */\n    PathErrorStats.prototype.requestsWithErrorsCount = 0;\n\n    /**\n     * Creates a new PathErrorStats instance using the specified properties.\n     * @function create\n     * @memberof PathErrorStats\n     * @static\n     * @param {IPathErrorStats=} [properties] Properties to set\n     * @returns {PathErrorStats} PathErrorStats instance\n     */\n    PathErrorStats.create = function create(properties) {\n        return new PathErrorStats(properties);\n    };\n\n    /**\n     * Encodes the specified PathErrorStats message. Does not implicitly {@link PathErrorStats.verify|verify} messages.\n     * @function encode\n     * @memberof PathErrorStats\n     * @static\n     * @param {IPathErrorStats} message PathErrorStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    PathErrorStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.children != null && Object.hasOwnProperty.call(message, \"children\"))\n            for (var keys = Object.keys(message.children), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 1, wireType 2 =*/10).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.PathErrorStats.encode(message.children[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        if (message.errorsCount != null && Object.hasOwnProperty.call(message, \"errorsCount\"))\n            writer.uint32(/* id 4, wireType 0 =*/32).uint64(message.errorsCount);\n        if (message.requestsWithErrorsCount != null && Object.hasOwnProperty.call(message, \"requestsWithErrorsCount\"))\n            writer.uint32(/* id 5, wireType 0 =*/40).uint64(message.requestsWithErrorsCount);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified PathErrorStats message, length delimited. Does not implicitly {@link PathErrorStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof PathErrorStats\n     * @static\n     * @param {IPathErrorStats} message PathErrorStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    PathErrorStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a PathErrorStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof PathErrorStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {PathErrorStats} PathErrorStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    PathErrorStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.PathErrorStats(), key;\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                reader.skip().pos++;\n                if (message.children === $util.emptyObject)\n                    message.children = {};\n                key = reader.string();\n                reader.pos++;\n                message.children[key] = $root.PathErrorStats.decode(reader, reader.uint32());\n                break;\n            case 4:\n                message.errorsCount = reader.uint64();\n                break;\n            case 5:\n                message.requestsWithErrorsCount = reader.uint64();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a PathErrorStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof PathErrorStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {PathErrorStats} PathErrorStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    PathErrorStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a PathErrorStats message.\n     * @function verify\n     * @memberof PathErrorStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    PathErrorStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.children != null && message.hasOwnProperty(\"children\")) {\n            if (!$util.isObject(message.children))\n                return \"children: object expected\";\n            var key = Object.keys(message.children);\n            for (var i = 0; i < key.length; ++i) {\n                var error = $root.PathErrorStats.verify(message.children[key[i]]);\n                if (error)\n                    return \"children.\" + error;\n            }\n        }\n        if (message.errorsCount != null && message.hasOwnProperty(\"errorsCount\"))\n            if (!$util.isInteger(message.errorsCount) && !(message.errorsCount && $util.isInteger(message.errorsCount.low) && $util.isInteger(message.errorsCount.high)))\n                return \"errorsCount: integer|Long expected\";\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (!$util.isInteger(message.requestsWithErrorsCount) && !(message.requestsWithErrorsCount && $util.isInteger(message.requestsWithErrorsCount.low) && $util.isInteger(message.requestsWithErrorsCount.high)))\n                return \"requestsWithErrorsCount: integer|Long expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a PathErrorStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof PathErrorStats\n     * @static\n     * @param {PathErrorStats} message PathErrorStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    PathErrorStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.objects || options.defaults)\n            object.children = {};\n        if (options.defaults) {\n            object.errorsCount = 0;\n            object.requestsWithErrorsCount = 0;\n        }\n        var keys2;\n        if (message.children && (keys2 = Object.keys(message.children)).length) {\n            object.children = {};\n            for (var j = 0; j < keys2.length; ++j)\n                object.children[keys2[j]] = $root.PathErrorStats.toObject(message.children[keys2[j]], options);\n        }\n        if (message.errorsCount != null && message.hasOwnProperty(\"errorsCount\"))\n            if (typeof message.errorsCount === \"number\")\n                object.errorsCount = options.longs === String ? String(message.errorsCount) : message.errorsCount;\n            else\n                object.errorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.errorsCount) : options.longs === Number ? new $util.LongBits(message.errorsCount.low >>> 0, message.errorsCount.high >>> 0).toNumber(true) : message.errorsCount;\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (typeof message.requestsWithErrorsCount === \"number\")\n                object.requestsWithErrorsCount = options.longs === String ? String(message.requestsWithErrorsCount) : message.requestsWithErrorsCount;\n            else\n                object.requestsWithErrorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.requestsWithErrorsCount) : options.longs === Number ? new $util.LongBits(message.requestsWithErrorsCount.low >>> 0, message.requestsWithErrorsCount.high >>> 0).toNumber(true) : message.requestsWithErrorsCount;\n        return object;\n    };\n\n    /**\n     * Converts this PathErrorStats to JSON.\n     * @function toJSON\n     * @memberof PathErrorStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    PathErrorStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return PathErrorStats;\n})();\n\n$root.QueryLatencyStats = (function() {\n\n    /**\n     * Properties of a QueryLatencyStats.\n     * @exports IQueryLatencyStats\n     * @interface IQueryLatencyStats\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [latencyCount] QueryLatencyStats latencyCount\n     * @property {number|null} [requestCount] QueryLatencyStats requestCount\n     * @property {number|null} [cacheHits] QueryLatencyStats cacheHits\n     * @property {number|null} [persistedQueryHits] QueryLatencyStats persistedQueryHits\n     * @property {number|null} [persistedQueryMisses] QueryLatencyStats persistedQueryMisses\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [cacheLatencyCount] QueryLatencyStats cacheLatencyCount\n     * @property {IPathErrorStats|null} [rootErrorStats] QueryLatencyStats rootErrorStats\n     * @property {number|null} [requestsWithErrorsCount] QueryLatencyStats requestsWithErrorsCount\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [publicCacheTtlCount] QueryLatencyStats publicCacheTtlCount\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [privateCacheTtlCount] QueryLatencyStats privateCacheTtlCount\n     * @property {number|null} [registeredOperationCount] QueryLatencyStats registeredOperationCount\n     * @property {number|null} [forbiddenOperationCount] QueryLatencyStats forbiddenOperationCount\n     * @property {number|null} [requestsWithoutFieldInstrumentation] QueryLatencyStats requestsWithoutFieldInstrumentation\n     */\n\n    /**\n     * Constructs a new QueryLatencyStats.\n     * @exports QueryLatencyStats\n     * @classdesc Represents a QueryLatencyStats.\n     * @implements IQueryLatencyStats\n     * @constructor\n     * @param {IQueryLatencyStats=} [properties] Properties to set\n     */\n    function QueryLatencyStats(properties) {\n        this.latencyCount = [];\n        this.cacheLatencyCount = [];\n        this.publicCacheTtlCount = [];\n        this.privateCacheTtlCount = [];\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * QueryLatencyStats latencyCount.\n     * @member {Array.<number>} latencyCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.latencyCount = $util.emptyArray;\n\n    /**\n     * QueryLatencyStats requestCount.\n     * @member {number} requestCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.requestCount = 0;\n\n    /**\n     * QueryLatencyStats cacheHits.\n     * @member {number} cacheHits\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.cacheHits = 0;\n\n    /**\n     * QueryLatencyStats persistedQueryHits.\n     * @member {number} persistedQueryHits\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.persistedQueryHits = 0;\n\n    /**\n     * QueryLatencyStats persistedQueryMisses.\n     * @member {number} persistedQueryMisses\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.persistedQueryMisses = 0;\n\n    /**\n     * QueryLatencyStats cacheLatencyCount.\n     * @member {Array.<number>} cacheLatencyCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.cacheLatencyCount = $util.emptyArray;\n\n    /**\n     * QueryLatencyStats rootErrorStats.\n     * @member {IPathErrorStats|null|undefined} rootErrorStats\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.rootErrorStats = null;\n\n    /**\n     * QueryLatencyStats requestsWithErrorsCount.\n     * @member {number} requestsWithErrorsCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.requestsWithErrorsCount = 0;\n\n    /**\n     * QueryLatencyStats publicCacheTtlCount.\n     * @member {Array.<number>} publicCacheTtlCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.publicCacheTtlCount = $util.emptyArray;\n\n    /**\n     * QueryLatencyStats privateCacheTtlCount.\n     * @member {Array.<number>} privateCacheTtlCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.privateCacheTtlCount = $util.emptyArray;\n\n    /**\n     * QueryLatencyStats registeredOperationCount.\n     * @member {number} registeredOperationCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.registeredOperationCount = 0;\n\n    /**\n     * QueryLatencyStats forbiddenOperationCount.\n     * @member {number} forbiddenOperationCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.forbiddenOperationCount = 0;\n\n    /**\n     * QueryLatencyStats requestsWithoutFieldInstrumentation.\n     * @member {number} requestsWithoutFieldInstrumentation\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.requestsWithoutFieldInstrumentation = 0;\n\n    /**\n     * Creates a new QueryLatencyStats instance using the specified properties.\n     * @function create\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {IQueryLatencyStats=} [properties] Properties to set\n     * @returns {QueryLatencyStats} QueryLatencyStats instance\n     */\n    QueryLatencyStats.create = function create(properties) {\n        return new QueryLatencyStats(properties);\n    };\n\n    /**\n     * Encodes the specified QueryLatencyStats message. Does not implicitly {@link QueryLatencyStats.verify|verify} messages.\n     * @function encode\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {IQueryLatencyStats} message QueryLatencyStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    QueryLatencyStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.requestCount != null && Object.hasOwnProperty.call(message, \"requestCount\"))\n            writer.uint32(/* id 2, wireType 0 =*/16).uint64(message.requestCount);\n        if (message.cacheHits != null && Object.hasOwnProperty.call(message, \"cacheHits\"))\n            writer.uint32(/* id 3, wireType 0 =*/24).uint64(message.cacheHits);\n        if (message.persistedQueryHits != null && Object.hasOwnProperty.call(message, \"persistedQueryHits\"))\n            writer.uint32(/* id 4, wireType 0 =*/32).uint64(message.persistedQueryHits);\n        if (message.persistedQueryMisses != null && Object.hasOwnProperty.call(message, \"persistedQueryMisses\"))\n            writer.uint32(/* id 5, wireType 0 =*/40).uint64(message.persistedQueryMisses);\n        if (message.rootErrorStats != null && Object.hasOwnProperty.call(message, \"rootErrorStats\"))\n            $root.PathErrorStats.encode(message.rootErrorStats, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();\n        if (message.requestsWithErrorsCount != null && Object.hasOwnProperty.call(message, \"requestsWithErrorsCount\"))\n            writer.uint32(/* id 8, wireType 0 =*/64).uint64(message.requestsWithErrorsCount);\n        if (message.registeredOperationCount != null && Object.hasOwnProperty.call(message, \"registeredOperationCount\"))\n            writer.uint32(/* id 11, wireType 0 =*/88).uint64(message.registeredOperationCount);\n        if (message.forbiddenOperationCount != null && Object.hasOwnProperty.call(message, \"forbiddenOperationCount\"))\n            writer.uint32(/* id 12, wireType 0 =*/96).uint64(message.forbiddenOperationCount);\n        var array13;\n        if (message.latencyCount != null && message.latencyCount.toArray)\n            array13 = message.latencyCount.toArray();\n        else\n            array13 = message.latencyCount;\n        if (array13 != null && array13.length) {\n            writer.uint32(/* id 13, wireType 2 =*/106).fork();\n            for (var i = 0; i < array13.length; ++i)\n                writer.sint64(array13[i]);\n            writer.ldelim();\n        }\n        var array14;\n        if (message.cacheLatencyCount != null && message.cacheLatencyCount.toArray)\n            array14 = message.cacheLatencyCount.toArray();\n        else\n            array14 = message.cacheLatencyCount;\n        if (array14 != null && array14.length) {\n            writer.uint32(/* id 14, wireType 2 =*/114).fork();\n            for (var i = 0; i < array14.length; ++i)\n                writer.sint64(array14[i]);\n            writer.ldelim();\n        }\n        var array15;\n        if (message.publicCacheTtlCount != null && message.publicCacheTtlCount.toArray)\n            array15 = message.publicCacheTtlCount.toArray();\n        else\n            array15 = message.publicCacheTtlCount;\n        if (array15 != null && array15.length) {\n            writer.uint32(/* id 15, wireType 2 =*/122).fork();\n            for (var i = 0; i < array15.length; ++i)\n                writer.sint64(array15[i]);\n            writer.ldelim();\n        }\n        var array16;\n        if (message.privateCacheTtlCount != null && message.privateCacheTtlCount.toArray)\n            array16 = message.privateCacheTtlCount.toArray();\n        else\n            array16 = message.privateCacheTtlCount;\n        if (array16 != null && array16.length) {\n            writer.uint32(/* id 16, wireType 2 =*/130).fork();\n            for (var i = 0; i < array16.length; ++i)\n                writer.sint64(array16[i]);\n            writer.ldelim();\n        }\n        if (message.requestsWithoutFieldInstrumentation != null && Object.hasOwnProperty.call(message, \"requestsWithoutFieldInstrumentation\"))\n            writer.uint32(/* id 17, wireType 0 =*/136).uint64(message.requestsWithoutFieldInstrumentation);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified QueryLatencyStats message, length delimited. Does not implicitly {@link QueryLatencyStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {IQueryLatencyStats} message QueryLatencyStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    QueryLatencyStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a QueryLatencyStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {QueryLatencyStats} QueryLatencyStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    QueryLatencyStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.QueryLatencyStats();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 13:\n                if (!(message.latencyCount && message.latencyCount.length))\n                    message.latencyCount = [];\n                if ((tag & 7) === 2) {\n                    var end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.latencyCount.push(reader.sint64());\n                } else\n                    message.latencyCount.push(reader.sint64());\n                break;\n            case 2:\n                message.requestCount = reader.uint64();\n                break;\n            case 3:\n                message.cacheHits = reader.uint64();\n                break;\n            case 4:\n                message.persistedQueryHits = reader.uint64();\n                break;\n            case 5:\n                message.persistedQueryMisses = reader.uint64();\n                break;\n            case 14:\n                if (!(message.cacheLatencyCount && message.cacheLatencyCount.length))\n                    message.cacheLatencyCount = [];\n                if ((tag & 7) === 2) {\n                    var end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.cacheLatencyCount.push(reader.sint64());\n                } else\n                    message.cacheLatencyCount.push(reader.sint64());\n                break;\n            case 7:\n                message.rootErrorStats = $root.PathErrorStats.decode(reader, reader.uint32());\n                break;\n            case 8:\n                message.requestsWithErrorsCount = reader.uint64();\n                break;\n            case 15:\n                if (!(message.publicCacheTtlCount && message.publicCacheTtlCount.length))\n                    message.publicCacheTtlCount = [];\n                if ((tag & 7) === 2) {\n                    var end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.publicCacheTtlCount.push(reader.sint64());\n                } else\n                    message.publicCacheTtlCount.push(reader.sint64());\n                break;\n            case 16:\n                if (!(message.privateCacheTtlCount && message.privateCacheTtlCount.length))\n                    message.privateCacheTtlCount = [];\n                if ((tag & 7) === 2) {\n                    var end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.privateCacheTtlCount.push(reader.sint64());\n                } else\n                    message.privateCacheTtlCount.push(reader.sint64());\n                break;\n            case 11:\n                message.registeredOperationCount = reader.uint64();\n                break;\n            case 12:\n                message.forbiddenOperationCount = reader.uint64();\n                break;\n            case 17:\n                message.requestsWithoutFieldInstrumentation = reader.uint64();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a QueryLatencyStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {QueryLatencyStats} QueryLatencyStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    QueryLatencyStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a QueryLatencyStats message.\n     * @function verify\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    QueryLatencyStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.latencyCount != null && message.hasOwnProperty(\"latencyCount\")) {\n            var array13;\n            if (message.latencyCount != null && message.latencyCount.toArray)\n                array13 = message.latencyCount.toArray();\n            else\n                array13 = message.latencyCount;\n            if (!Array.isArray(array13))\n                return \"latencyCount: array expected\";\n            for (var i = 0; i < array13.length; ++i)\n                if (!$util.isInteger(array13[i]) && !(array13[i] && $util.isInteger(array13[i].low) && $util.isInteger(array13[i].high)))\n                    return \"latencyCount: integer|Long[] expected\";\n        }\n        if (message.requestCount != null && message.hasOwnProperty(\"requestCount\"))\n            if (!$util.isInteger(message.requestCount) && !(message.requestCount && $util.isInteger(message.requestCount.low) && $util.isInteger(message.requestCount.high)))\n                return \"requestCount: integer|Long expected\";\n        if (message.cacheHits != null && message.hasOwnProperty(\"cacheHits\"))\n            if (!$util.isInteger(message.cacheHits) && !(message.cacheHits && $util.isInteger(message.cacheHits.low) && $util.isInteger(message.cacheHits.high)))\n                return \"cacheHits: integer|Long expected\";\n        if (message.persistedQueryHits != null && message.hasOwnProperty(\"persistedQueryHits\"))\n            if (!$util.isInteger(message.persistedQueryHits) && !(message.persistedQueryHits && $util.isInteger(message.persistedQueryHits.low) && $util.isInteger(message.persistedQueryHits.high)))\n                return \"persistedQueryHits: integer|Long expected\";\n        if (message.persistedQueryMisses != null && message.hasOwnProperty(\"persistedQueryMisses\"))\n            if (!$util.isInteger(message.persistedQueryMisses) && !(message.persistedQueryMisses && $util.isInteger(message.persistedQueryMisses.low) && $util.isInteger(message.persistedQueryMisses.high)))\n                return \"persistedQueryMisses: integer|Long expected\";\n        if (message.cacheLatencyCount != null && message.hasOwnProperty(\"cacheLatencyCount\")) {\n            var array14;\n            if (message.cacheLatencyCount != null && message.cacheLatencyCount.toArray)\n                array14 = message.cacheLatencyCount.toArray();\n            else\n                array14 = message.cacheLatencyCount;\n            if (!Array.isArray(array14))\n                return \"cacheLatencyCount: array expected\";\n            for (var i = 0; i < array14.length; ++i)\n                if (!$util.isInteger(array14[i]) && !(array14[i] && $util.isInteger(array14[i].low) && $util.isInteger(array14[i].high)))\n                    return \"cacheLatencyCount: integer|Long[] expected\";\n        }\n        if (message.rootErrorStats != null && message.hasOwnProperty(\"rootErrorStats\")) {\n            var error = $root.PathErrorStats.verify(message.rootErrorStats);\n            if (error)\n                return \"rootErrorStats.\" + error;\n        }\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (!$util.isInteger(message.requestsWithErrorsCount) && !(message.requestsWithErrorsCount && $util.isInteger(message.requestsWithErrorsCount.low) && $util.isInteger(message.requestsWithErrorsCount.high)))\n                return \"requestsWithErrorsCount: integer|Long expected\";\n        if (message.publicCacheTtlCount != null && message.hasOwnProperty(\"publicCacheTtlCount\")) {\n            var array15;\n            if (message.publicCacheTtlCount != null && message.publicCacheTtlCount.toArray)\n                array15 = message.publicCacheTtlCount.toArray();\n            else\n                array15 = message.publicCacheTtlCount;\n            if (!Array.isArray(array15))\n                return \"publicCacheTtlCount: array expected\";\n            for (var i = 0; i < array15.length; ++i)\n                if (!$util.isInteger(array15[i]) && !(array15[i] && $util.isInteger(array15[i].low) && $util.isInteger(array15[i].high)))\n                    return \"publicCacheTtlCount: integer|Long[] expected\";\n        }\n        if (message.privateCacheTtlCount != null && message.hasOwnProperty(\"privateCacheTtlCount\")) {\n            var array16;\n            if (message.privateCacheTtlCount != null && message.privateCacheTtlCount.toArray)\n                array16 = message.privateCacheTtlCount.toArray();\n            else\n                array16 = message.privateCacheTtlCount;\n            if (!Array.isArray(array16))\n                return \"privateCacheTtlCount: array expected\";\n            for (var i = 0; i < array16.length; ++i)\n                if (!$util.isInteger(array16[i]) && !(array16[i] && $util.isInteger(array16[i].low) && $util.isInteger(array16[i].high)))\n                    return \"privateCacheTtlCount: integer|Long[] expected\";\n        }\n        if (message.registeredOperationCount != null && message.hasOwnProperty(\"registeredOperationCount\"))\n            if (!$util.isInteger(message.registeredOperationCount) && !(message.registeredOperationCount && $util.isInteger(message.registeredOperationCount.low) && $util.isInteger(message.registeredOperationCount.high)))\n                return \"registeredOperationCount: integer|Long expected\";\n        if (message.forbiddenOperationCount != null && message.hasOwnProperty(\"forbiddenOperationCount\"))\n            if (!$util.isInteger(message.forbiddenOperationCount) && !(message.forbiddenOperationCount && $util.isInteger(message.forbiddenOperationCount.low) && $util.isInteger(message.forbiddenOperationCount.high)))\n                return \"forbiddenOperationCount: integer|Long expected\";\n        if (message.requestsWithoutFieldInstrumentation != null && message.hasOwnProperty(\"requestsWithoutFieldInstrumentation\"))\n            if (!$util.isInteger(message.requestsWithoutFieldInstrumentation) && !(message.requestsWithoutFieldInstrumentation && $util.isInteger(message.requestsWithoutFieldInstrumentation.low) && $util.isInteger(message.requestsWithoutFieldInstrumentation.high)))\n                return \"requestsWithoutFieldInstrumentation: integer|Long expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a QueryLatencyStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {QueryLatencyStats} message QueryLatencyStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    QueryLatencyStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.arrays || options.defaults) {\n            object.latencyCount = [];\n            object.cacheLatencyCount = [];\n            object.publicCacheTtlCount = [];\n            object.privateCacheTtlCount = [];\n        }\n        if (options.defaults) {\n            object.requestCount = 0;\n            object.cacheHits = 0;\n            object.persistedQueryHits = 0;\n            object.persistedQueryMisses = 0;\n            object.rootErrorStats = null;\n            object.requestsWithErrorsCount = 0;\n            object.registeredOperationCount = 0;\n            object.forbiddenOperationCount = 0;\n            object.requestsWithoutFieldInstrumentation = 0;\n        }\n        if (message.requestCount != null && message.hasOwnProperty(\"requestCount\"))\n            if (typeof message.requestCount === \"number\")\n                object.requestCount = options.longs === String ? String(message.requestCount) : message.requestCount;\n            else\n                object.requestCount = options.longs === String ? $util.Long.prototype.toString.call(message.requestCount) : options.longs === Number ? new $util.LongBits(message.requestCount.low >>> 0, message.requestCount.high >>> 0).toNumber(true) : message.requestCount;\n        if (message.cacheHits != null && message.hasOwnProperty(\"cacheHits\"))\n            if (typeof message.cacheHits === \"number\")\n                object.cacheHits = options.longs === String ? String(message.cacheHits) : message.cacheHits;\n            else\n                object.cacheHits = options.longs === String ? $util.Long.prototype.toString.call(message.cacheHits) : options.longs === Number ? new $util.LongBits(message.cacheHits.low >>> 0, message.cacheHits.high >>> 0).toNumber(true) : message.cacheHits;\n        if (message.persistedQueryHits != null && message.hasOwnProperty(\"persistedQueryHits\"))\n            if (typeof message.persistedQueryHits === \"number\")\n                object.persistedQueryHits = options.longs === String ? String(message.persistedQueryHits) : message.persistedQueryHits;\n            else\n                object.persistedQueryHits = options.longs === String ? $util.Long.prototype.toString.call(message.persistedQueryHits) : options.longs === Number ? new $util.LongBits(message.persistedQueryHits.low >>> 0, message.persistedQueryHits.high >>> 0).toNumber(true) : message.persistedQueryHits;\n        if (message.persistedQueryMisses != null && message.hasOwnProperty(\"persistedQueryMisses\"))\n            if (typeof message.persistedQueryMisses === \"number\")\n                object.persistedQueryMisses = options.longs === String ? String(message.persistedQueryMisses) : message.persistedQueryMisses;\n            else\n                object.persistedQueryMisses = options.longs === String ? $util.Long.prototype.toString.call(message.persistedQueryMisses) : options.longs === Number ? new $util.LongBits(message.persistedQueryMisses.low >>> 0, message.persistedQueryMisses.high >>> 0).toNumber(true) : message.persistedQueryMisses;\n        if (message.rootErrorStats != null && message.hasOwnProperty(\"rootErrorStats\"))\n            object.rootErrorStats = $root.PathErrorStats.toObject(message.rootErrorStats, options);\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (typeof message.requestsWithErrorsCount === \"number\")\n                object.requestsWithErrorsCount = options.longs === String ? String(message.requestsWithErrorsCount) : message.requestsWithErrorsCount;\n            else\n                object.requestsWithErrorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.requestsWithErrorsCount) : options.longs === Number ? new $util.LongBits(message.requestsWithErrorsCount.low >>> 0, message.requestsWithErrorsCount.high >>> 0).toNumber(true) : message.requestsWithErrorsCount;\n        if (message.registeredOperationCount != null && message.hasOwnProperty(\"registeredOperationCount\"))\n            if (typeof message.registeredOperationCount === \"number\")\n                object.registeredOperationCount = options.longs === String ? String(message.registeredOperationCount) : message.registeredOperationCount;\n            else\n                object.registeredOperationCount = options.longs === String ? $util.Long.prototype.toString.call(message.registeredOperationCount) : options.longs === Number ? new $util.LongBits(message.registeredOperationCount.low >>> 0, message.registeredOperationCount.high >>> 0).toNumber(true) : message.registeredOperationCount;\n        if (message.forbiddenOperationCount != null && message.hasOwnProperty(\"forbiddenOperationCount\"))\n            if (typeof message.forbiddenOperationCount === \"number\")\n                object.forbiddenOperationCount = options.longs === String ? String(message.forbiddenOperationCount) : message.forbiddenOperationCount;\n            else\n                object.forbiddenOperationCount = options.longs === String ? $util.Long.prototype.toString.call(message.forbiddenOperationCount) : options.longs === Number ? new $util.LongBits(message.forbiddenOperationCount.low >>> 0, message.forbiddenOperationCount.high >>> 0).toNumber(true) : message.forbiddenOperationCount;\n        if (message.latencyCount && message.latencyCount.length) {\n            object.latencyCount = [];\n            for (var j = 0; j < message.latencyCount.length; ++j)\n                if (typeof message.latencyCount[j] === \"number\")\n                    object.latencyCount[j] = options.longs === String ? String(message.latencyCount[j]) : message.latencyCount[j];\n                else\n                    object.latencyCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.latencyCount[j]) : options.longs === Number ? new $util.LongBits(message.latencyCount[j].low >>> 0, message.latencyCount[j].high >>> 0).toNumber() : message.latencyCount[j];\n        }\n        if (message.cacheLatencyCount && message.cacheLatencyCount.length) {\n            object.cacheLatencyCount = [];\n            for (var j = 0; j < message.cacheLatencyCount.length; ++j)\n                if (typeof message.cacheLatencyCount[j] === \"number\")\n                    object.cacheLatencyCount[j] = options.longs === String ? String(message.cacheLatencyCount[j]) : message.cacheLatencyCount[j];\n                else\n                    object.cacheLatencyCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.cacheLatencyCount[j]) : options.longs === Number ? new $util.LongBits(message.cacheLatencyCount[j].low >>> 0, message.cacheLatencyCount[j].high >>> 0).toNumber() : message.cacheLatencyCount[j];\n        }\n        if (message.publicCacheTtlCount && message.publicCacheTtlCount.length) {\n            object.publicCacheTtlCount = [];\n            for (var j = 0; j < message.publicCacheTtlCount.length; ++j)\n                if (typeof message.publicCacheTtlCount[j] === \"number\")\n                    object.publicCacheTtlCount[j] = options.longs === String ? String(message.publicCacheTtlCount[j]) : message.publicCacheTtlCount[j];\n                else\n                    object.publicCacheTtlCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.publicCacheTtlCount[j]) : options.longs === Number ? new $util.LongBits(message.publicCacheTtlCount[j].low >>> 0, message.publicCacheTtlCount[j].high >>> 0).toNumber() : message.publicCacheTtlCount[j];\n        }\n        if (message.privateCacheTtlCount && message.privateCacheTtlCount.length) {\n            object.privateCacheTtlCount = [];\n            for (var j = 0; j < message.privateCacheTtlCount.length; ++j)\n                if (typeof message.privateCacheTtlCount[j] === \"number\")\n                    object.privateCacheTtlCount[j] = options.longs === String ? String(message.privateCacheTtlCount[j]) : message.privateCacheTtlCount[j];\n                else\n                    object.privateCacheTtlCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.privateCacheTtlCount[j]) : options.longs === Number ? new $util.LongBits(message.privateCacheTtlCount[j].low >>> 0, message.privateCacheTtlCount[j].high >>> 0).toNumber() : message.privateCacheTtlCount[j];\n        }\n        if (message.requestsWithoutFieldInstrumentation != null && message.hasOwnProperty(\"requestsWithoutFieldInstrumentation\"))\n            if (typeof message.requestsWithoutFieldInstrumentation === \"number\")\n                object.requestsWithoutFieldInstrumentation = options.longs === String ? String(message.requestsWithoutFieldInstrumentation) : message.requestsWithoutFieldInstrumentation;\n            else\n                object.requestsWithoutFieldInstrumentation = options.longs === String ? $util.Long.prototype.toString.call(message.requestsWithoutFieldInstrumentation) : options.longs === Number ? new $util.LongBits(message.requestsWithoutFieldInstrumentation.low >>> 0, message.requestsWithoutFieldInstrumentation.high >>> 0).toNumber(true) : message.requestsWithoutFieldInstrumentation;\n        return object;\n    };\n\n    /**\n     * Converts this QueryLatencyStats to JSON.\n     * @function toJSON\n     * @memberof QueryLatencyStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    QueryLatencyStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return QueryLatencyStats;\n})();\n\n$root.StatsContext = (function() {\n\n    /**\n     * Properties of a StatsContext.\n     * @exports IStatsContext\n     * @interface IStatsContext\n     * @property {string|null} [clientName] StatsContext clientName\n     * @property {string|null} [clientVersion] StatsContext clientVersion\n     */\n\n    /**\n     * Constructs a new StatsContext.\n     * @exports StatsContext\n     * @classdesc Represents a StatsContext.\n     * @implements IStatsContext\n     * @constructor\n     * @param {IStatsContext=} [properties] Properties to set\n     */\n    function StatsContext(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * StatsContext clientName.\n     * @member {string} clientName\n     * @memberof StatsContext\n     * @instance\n     */\n    StatsContext.prototype.clientName = \"\";\n\n    /**\n     * StatsContext clientVersion.\n     * @member {string} clientVersion\n     * @memberof StatsContext\n     * @instance\n     */\n    StatsContext.prototype.clientVersion = \"\";\n\n    /**\n     * Creates a new StatsContext instance using the specified properties.\n     * @function create\n     * @memberof StatsContext\n     * @static\n     * @param {IStatsContext=} [properties] Properties to set\n     * @returns {StatsContext} StatsContext instance\n     */\n    StatsContext.create = function create(properties) {\n        return new StatsContext(properties);\n    };\n\n    /**\n     * Encodes the specified StatsContext message. Does not implicitly {@link StatsContext.verify|verify} messages.\n     * @function encode\n     * @memberof StatsContext\n     * @static\n     * @param {IStatsContext} message StatsContext message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    StatsContext.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.clientName != null && Object.hasOwnProperty.call(message, \"clientName\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.clientName);\n        if (message.clientVersion != null && Object.hasOwnProperty.call(message, \"clientVersion\"))\n            writer.uint32(/* id 3, wireType 2 =*/26).string(message.clientVersion);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified StatsContext message, length delimited. Does not implicitly {@link StatsContext.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof StatsContext\n     * @static\n     * @param {IStatsContext} message StatsContext message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    StatsContext.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a StatsContext message from the specified reader or buffer.\n     * @function decode\n     * @memberof StatsContext\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {StatsContext} StatsContext\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    StatsContext.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.StatsContext();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 2:\n                message.clientName = reader.string();\n                break;\n            case 3:\n                message.clientVersion = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a StatsContext message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof StatsContext\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {StatsContext} StatsContext\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    StatsContext.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a StatsContext message.\n     * @function verify\n     * @memberof StatsContext\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    StatsContext.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.clientName != null && message.hasOwnProperty(\"clientName\"))\n            if (!$util.isString(message.clientName))\n                return \"clientName: string expected\";\n        if (message.clientVersion != null && message.hasOwnProperty(\"clientVersion\"))\n            if (!$util.isString(message.clientVersion))\n                return \"clientVersion: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a StatsContext message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof StatsContext\n     * @static\n     * @param {StatsContext} message StatsContext\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    StatsContext.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.clientName = \"\";\n            object.clientVersion = \"\";\n        }\n        if (message.clientName != null && message.hasOwnProperty(\"clientName\"))\n            object.clientName = message.clientName;\n        if (message.clientVersion != null && message.hasOwnProperty(\"clientVersion\"))\n            object.clientVersion = message.clientVersion;\n        return object;\n    };\n\n    /**\n     * Converts this StatsContext to JSON.\n     * @function toJSON\n     * @memberof StatsContext\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    StatsContext.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return StatsContext;\n})();\n\n$root.ContextualizedQueryLatencyStats = (function() {\n\n    /**\n     * Properties of a ContextualizedQueryLatencyStats.\n     * @exports IContextualizedQueryLatencyStats\n     * @interface IContextualizedQueryLatencyStats\n     * @property {IQueryLatencyStats|null} [queryLatencyStats] ContextualizedQueryLatencyStats queryLatencyStats\n     * @property {IStatsContext|null} [context] ContextualizedQueryLatencyStats context\n     */\n\n    /**\n     * Constructs a new ContextualizedQueryLatencyStats.\n     * @exports ContextualizedQueryLatencyStats\n     * @classdesc Represents a ContextualizedQueryLatencyStats.\n     * @implements IContextualizedQueryLatencyStats\n     * @constructor\n     * @param {IContextualizedQueryLatencyStats=} [properties] Properties to set\n     */\n    function ContextualizedQueryLatencyStats(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ContextualizedQueryLatencyStats queryLatencyStats.\n     * @member {IQueryLatencyStats|null|undefined} queryLatencyStats\n     * @memberof ContextualizedQueryLatencyStats\n     * @instance\n     */\n    ContextualizedQueryLatencyStats.prototype.queryLatencyStats = null;\n\n    /**\n     * ContextualizedQueryLatencyStats context.\n     * @member {IStatsContext|null|undefined} context\n     * @memberof ContextualizedQueryLatencyStats\n     * @instance\n     */\n    ContextualizedQueryLatencyStats.prototype.context = null;\n\n    /**\n     * Creates a new ContextualizedQueryLatencyStats instance using the specified properties.\n     * @function create\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {IContextualizedQueryLatencyStats=} [properties] Properties to set\n     * @returns {ContextualizedQueryLatencyStats} ContextualizedQueryLatencyStats instance\n     */\n    ContextualizedQueryLatencyStats.create = function create(properties) {\n        return new ContextualizedQueryLatencyStats(properties);\n    };\n\n    /**\n     * Encodes the specified ContextualizedQueryLatencyStats message. Does not implicitly {@link ContextualizedQueryLatencyStats.verify|verify} messages.\n     * @function encode\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {IContextualizedQueryLatencyStats} message ContextualizedQueryLatencyStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedQueryLatencyStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.queryLatencyStats != null && Object.hasOwnProperty.call(message, \"queryLatencyStats\"))\n            $root.QueryLatencyStats.encode(message.queryLatencyStats, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.context != null && Object.hasOwnProperty.call(message, \"context\"))\n            $root.StatsContext.encode(message.context, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ContextualizedQueryLatencyStats message, length delimited. Does not implicitly {@link ContextualizedQueryLatencyStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {IContextualizedQueryLatencyStats} message ContextualizedQueryLatencyStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedQueryLatencyStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ContextualizedQueryLatencyStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ContextualizedQueryLatencyStats} ContextualizedQueryLatencyStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedQueryLatencyStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ContextualizedQueryLatencyStats();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.queryLatencyStats = $root.QueryLatencyStats.decode(reader, reader.uint32());\n                break;\n            case 2:\n                message.context = $root.StatsContext.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ContextualizedQueryLatencyStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ContextualizedQueryLatencyStats} ContextualizedQueryLatencyStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedQueryLatencyStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ContextualizedQueryLatencyStats message.\n     * @function verify\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ContextualizedQueryLatencyStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.queryLatencyStats != null && message.hasOwnProperty(\"queryLatencyStats\")) {\n            var error = $root.QueryLatencyStats.verify(message.queryLatencyStats);\n            if (error)\n                return \"queryLatencyStats.\" + error;\n        }\n        if (message.context != null && message.hasOwnProperty(\"context\")) {\n            var error = $root.StatsContext.verify(message.context);\n            if (error)\n                return \"context.\" + error;\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ContextualizedQueryLatencyStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {ContextualizedQueryLatencyStats} message ContextualizedQueryLatencyStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ContextualizedQueryLatencyStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.queryLatencyStats = null;\n            object.context = null;\n        }\n        if (message.queryLatencyStats != null && message.hasOwnProperty(\"queryLatencyStats\"))\n            object.queryLatencyStats = $root.QueryLatencyStats.toObject(message.queryLatencyStats, options);\n        if (message.context != null && message.hasOwnProperty(\"context\"))\n            object.context = $root.StatsContext.toObject(message.context, options);\n        return object;\n    };\n\n    /**\n     * Converts this ContextualizedQueryLatencyStats to JSON.\n     * @function toJSON\n     * @memberof ContextualizedQueryLatencyStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ContextualizedQueryLatencyStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ContextualizedQueryLatencyStats;\n})();\n\n$root.ContextualizedTypeStats = (function() {\n\n    /**\n     * Properties of a ContextualizedTypeStats.\n     * @exports IContextualizedTypeStats\n     * @interface IContextualizedTypeStats\n     * @property {IStatsContext|null} [context] ContextualizedTypeStats context\n     * @property {Object.<string,ITypeStat>|null} [perTypeStat] ContextualizedTypeStats perTypeStat\n     */\n\n    /**\n     * Constructs a new ContextualizedTypeStats.\n     * @exports ContextualizedTypeStats\n     * @classdesc Represents a ContextualizedTypeStats.\n     * @implements IContextualizedTypeStats\n     * @constructor\n     * @param {IContextualizedTypeStats=} [properties] Properties to set\n     */\n    function ContextualizedTypeStats(properties) {\n        this.perTypeStat = {};\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ContextualizedTypeStats context.\n     * @member {IStatsContext|null|undefined} context\n     * @memberof ContextualizedTypeStats\n     * @instance\n     */\n    ContextualizedTypeStats.prototype.context = null;\n\n    /**\n     * ContextualizedTypeStats perTypeStat.\n     * @member {Object.<string,ITypeStat>} perTypeStat\n     * @memberof ContextualizedTypeStats\n     * @instance\n     */\n    ContextualizedTypeStats.prototype.perTypeStat = $util.emptyObject;\n\n    /**\n     * Creates a new ContextualizedTypeStats instance using the specified properties.\n     * @function create\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {IContextualizedTypeStats=} [properties] Properties to set\n     * @returns {ContextualizedTypeStats} ContextualizedTypeStats instance\n     */\n    ContextualizedTypeStats.create = function create(properties) {\n        return new ContextualizedTypeStats(properties);\n    };\n\n    /**\n     * Encodes the specified ContextualizedTypeStats message. Does not implicitly {@link ContextualizedTypeStats.verify|verify} messages.\n     * @function encode\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {IContextualizedTypeStats} message ContextualizedTypeStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedTypeStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.context != null && Object.hasOwnProperty.call(message, \"context\"))\n            $root.StatsContext.encode(message.context, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.perTypeStat != null && Object.hasOwnProperty.call(message, \"perTypeStat\"))\n            for (var keys = Object.keys(message.perTypeStat), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 2, wireType 2 =*/18).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.TypeStat.encode(message.perTypeStat[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ContextualizedTypeStats message, length delimited. Does not implicitly {@link ContextualizedTypeStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {IContextualizedTypeStats} message ContextualizedTypeStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedTypeStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ContextualizedTypeStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ContextualizedTypeStats} ContextualizedTypeStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedTypeStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ContextualizedTypeStats(), key;\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.context = $root.StatsContext.decode(reader, reader.uint32());\n                break;\n            case 2:\n                reader.skip().pos++;\n                if (message.perTypeStat === $util.emptyObject)\n                    message.perTypeStat = {};\n                key = reader.string();\n                reader.pos++;\n                message.perTypeStat[key] = $root.TypeStat.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ContextualizedTypeStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ContextualizedTypeStats} ContextualizedTypeStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedTypeStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ContextualizedTypeStats message.\n     * @function verify\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ContextualizedTypeStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.context != null && message.hasOwnProperty(\"context\")) {\n            var error = $root.StatsContext.verify(message.context);\n            if (error)\n                return \"context.\" + error;\n        }\n        if (message.perTypeStat != null && message.hasOwnProperty(\"perTypeStat\")) {\n            if (!$util.isObject(message.perTypeStat))\n                return \"perTypeStat: object expected\";\n            var key = Object.keys(message.perTypeStat);\n            for (var i = 0; i < key.length; ++i) {\n                var error = $root.TypeStat.verify(message.perTypeStat[key[i]]);\n                if (error)\n                    return \"perTypeStat.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ContextualizedTypeStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {ContextualizedTypeStats} message ContextualizedTypeStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ContextualizedTypeStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.objects || options.defaults)\n            object.perTypeStat = {};\n        if (options.defaults)\n            object.context = null;\n        if (message.context != null && message.hasOwnProperty(\"context\"))\n            object.context = $root.StatsContext.toObject(message.context, options);\n        var keys2;\n        if (message.perTypeStat && (keys2 = Object.keys(message.perTypeStat)).length) {\n            object.perTypeStat = {};\n            for (var j = 0; j < keys2.length; ++j)\n                object.perTypeStat[keys2[j]] = $root.TypeStat.toObject(message.perTypeStat[keys2[j]], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this ContextualizedTypeStats to JSON.\n     * @function toJSON\n     * @memberof ContextualizedTypeStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ContextualizedTypeStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ContextualizedTypeStats;\n})();\n\n$root.FieldStat = (function() {\n\n    /**\n     * Properties of a FieldStat.\n     * @exports IFieldStat\n     * @interface IFieldStat\n     * @property {string|null} [returnType] FieldStat returnType\n     * @property {number|null} [errorsCount] FieldStat errorsCount\n     * @property {number|null} [observedExecutionCount] FieldStat observedExecutionCount\n     * @property {number|null} [estimatedExecutionCount] FieldStat estimatedExecutionCount\n     * @property {number|null} [requestsWithErrorsCount] FieldStat requestsWithErrorsCount\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [latencyCount] FieldStat latencyCount\n     */\n\n    /**\n     * Constructs a new FieldStat.\n     * @exports FieldStat\n     * @classdesc Represents a FieldStat.\n     * @implements IFieldStat\n     * @constructor\n     * @param {IFieldStat=} [properties] Properties to set\n     */\n    function FieldStat(properties) {\n        this.latencyCount = [];\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * FieldStat returnType.\n     * @member {string} returnType\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.returnType = \"\";\n\n    /**\n     * FieldStat errorsCount.\n     * @member {number} errorsCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.errorsCount = 0;\n\n    /**\n     * FieldStat observedExecutionCount.\n     * @member {number} observedExecutionCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.observedExecutionCount = 0;\n\n    /**\n     * FieldStat estimatedExecutionCount.\n     * @member {number} estimatedExecutionCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.estimatedExecutionCount = 0;\n\n    /**\n     * FieldStat requestsWithErrorsCount.\n     * @member {number} requestsWithErrorsCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.requestsWithErrorsCount = 0;\n\n    /**\n     * FieldStat latencyCount.\n     * @member {Array.<number>} latencyCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.latencyCount = $util.emptyArray;\n\n    /**\n     * Creates a new FieldStat instance using the specified properties.\n     * @function create\n     * @memberof FieldStat\n     * @static\n     * @param {IFieldStat=} [properties] Properties to set\n     * @returns {FieldStat} FieldStat instance\n     */\n    FieldStat.create = function create(properties) {\n        return new FieldStat(properties);\n    };\n\n    /**\n     * Encodes the specified FieldStat message. Does not implicitly {@link FieldStat.verify|verify} messages.\n     * @function encode\n     * @memberof FieldStat\n     * @static\n     * @param {IFieldStat} message FieldStat message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    FieldStat.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.returnType != null && Object.hasOwnProperty.call(message, \"returnType\"))\n            writer.uint32(/* id 3, wireType 2 =*/26).string(message.returnType);\n        if (message.errorsCount != null && Object.hasOwnProperty.call(message, \"errorsCount\"))\n            writer.uint32(/* id 4, wireType 0 =*/32).uint64(message.errorsCount);\n        if (message.observedExecutionCount != null && Object.hasOwnProperty.call(message, \"observedExecutionCount\"))\n            writer.uint32(/* id 5, wireType 0 =*/40).uint64(message.observedExecutionCount);\n        if (message.requestsWithErrorsCount != null && Object.hasOwnProperty.call(message, \"requestsWithErrorsCount\"))\n            writer.uint32(/* id 6, wireType 0 =*/48).uint64(message.requestsWithErrorsCount);\n        var array9;\n        if (message.latencyCount != null && message.latencyCount.toArray)\n            array9 = message.latencyCount.toArray();\n        else\n            array9 = message.latencyCount;\n        if (array9 != null && array9.length) {\n            writer.uint32(/* id 9, wireType 2 =*/74).fork();\n            for (var i = 0; i < array9.length; ++i)\n                writer.sint64(array9[i]);\n            writer.ldelim();\n        }\n        if (message.estimatedExecutionCount != null && Object.hasOwnProperty.call(message, \"estimatedExecutionCount\"))\n            writer.uint32(/* id 10, wireType 0 =*/80).uint64(message.estimatedExecutionCount);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified FieldStat message, length delimited. Does not implicitly {@link FieldStat.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof FieldStat\n     * @static\n     * @param {IFieldStat} message FieldStat message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    FieldStat.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a FieldStat message from the specified reader or buffer.\n     * @function decode\n     * @memberof FieldStat\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {FieldStat} FieldStat\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    FieldStat.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.FieldStat();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 3:\n                message.returnType = reader.string();\n                break;\n            case 4:\n                message.errorsCount = reader.uint64();\n                break;\n            case 5:\n                message.observedExecutionCount = reader.uint64();\n                break;\n            case 10:\n                message.estimatedExecutionCount = reader.uint64();\n                break;\n            case 6:\n                message.requestsWithErrorsCount = reader.uint64();\n                break;\n            case 9:\n                if (!(message.latencyCount && message.latencyCount.length))\n                    message.latencyCount = [];\n                if ((tag & 7) === 2) {\n                    var end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.latencyCount.push(reader.sint64());\n                } else\n                    message.latencyCount.push(reader.sint64());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a FieldStat message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof FieldStat\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {FieldStat} FieldStat\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    FieldStat.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a FieldStat message.\n     * @function verify\n     * @memberof FieldStat\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    FieldStat.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.returnType != null && message.hasOwnProperty(\"returnType\"))\n            if (!$util.isString(message.returnType))\n                return \"returnType: string expected\";\n        if (message.errorsCount != null && message.hasOwnProperty(\"errorsCount\"))\n            if (!$util.isInteger(message.errorsCount) && !(message.errorsCount && $util.isInteger(message.errorsCount.low) && $util.isInteger(message.errorsCount.high)))\n                return \"errorsCount: integer|Long expected\";\n        if (message.observedExecutionCount != null && message.hasOwnProperty(\"observedExecutionCount\"))\n            if (!$util.isInteger(message.observedExecutionCount) && !(message.observedExecutionCount && $util.isInteger(message.observedExecutionCount.low) && $util.isInteger(message.observedExecutionCount.high)))\n                return \"observedExecutionCount: integer|Long expected\";\n        if (message.estimatedExecutionCount != null && message.hasOwnProperty(\"estimatedExecutionCount\"))\n            if (!$util.isInteger(message.estimatedExecutionCount) && !(message.estimatedExecutionCount && $util.isInteger(message.estimatedExecutionCount.low) && $util.isInteger(message.estimatedExecutionCount.high)))\n                return \"estimatedExecutionCount: integer|Long expected\";\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (!$util.isInteger(message.requestsWithErrorsCount) && !(message.requestsWithErrorsCount && $util.isInteger(message.requestsWithErrorsCount.low) && $util.isInteger(message.requestsWithErrorsCount.high)))\n                return \"requestsWithErrorsCount: integer|Long expected\";\n        if (message.latencyCount != null && message.hasOwnProperty(\"latencyCount\")) {\n            var array9;\n            if (message.latencyCount != null && message.latencyCount.toArray)\n                array9 = message.latencyCount.toArray();\n            else\n                array9 = message.latencyCount;\n            if (!Array.isArray(array9))\n                return \"latencyCount: array expected\";\n            for (var i = 0; i < array9.length; ++i)\n                if (!$util.isInteger(array9[i]) && !(array9[i] && $util.isInteger(array9[i].low) && $util.isInteger(array9[i].high)))\n                    return \"latencyCount: integer|Long[] expected\";\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a FieldStat message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof FieldStat\n     * @static\n     * @param {FieldStat} message FieldStat\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    FieldStat.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.arrays || options.defaults)\n            object.latencyCount = [];\n        if (options.defaults) {\n            object.returnType = \"\";\n            object.errorsCount = 0;\n            object.observedExecutionCount = 0;\n            object.requestsWithErrorsCount = 0;\n            object.estimatedExecutionCount = 0;\n        }\n        if (message.returnType != null && message.hasOwnProperty(\"returnType\"))\n            object.returnType = message.returnType;\n        if (message.errorsCount != null && message.hasOwnProperty(\"errorsCount\"))\n            if (typeof message.errorsCount === \"number\")\n                object.errorsCount = options.longs === String ? String(message.errorsCount) : message.errorsCount;\n            else\n                object.errorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.errorsCount) : options.longs === Number ? new $util.LongBits(message.errorsCount.low >>> 0, message.errorsCount.high >>> 0).toNumber(true) : message.errorsCount;\n        if (message.observedExecutionCount != null && message.hasOwnProperty(\"observedExecutionCount\"))\n            if (typeof message.observedExecutionCount === \"number\")\n                object.observedExecutionCount = options.longs === String ? String(message.observedExecutionCount) : message.observedExecutionCount;\n            else\n                object.observedExecutionCount = options.longs === String ? $util.Long.prototype.toString.call(message.observedExecutionCount) : options.longs === Number ? new $util.LongBits(message.observedExecutionCount.low >>> 0, message.observedExecutionCount.high >>> 0).toNumber(true) : message.observedExecutionCount;\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (typeof message.requestsWithErrorsCount === \"number\")\n                object.requestsWithErrorsCount = options.longs === String ? String(message.requestsWithErrorsCount) : message.requestsWithErrorsCount;\n            else\n                object.requestsWithErrorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.requestsWithErrorsCount) : options.longs === Number ? new $util.LongBits(message.requestsWithErrorsCount.low >>> 0, message.requestsWithErrorsCount.high >>> 0).toNumber(true) : message.requestsWithErrorsCount;\n        if (message.latencyCount && message.latencyCount.length) {\n            object.latencyCount = [];\n            for (var j = 0; j < message.latencyCount.length; ++j)\n                if (typeof message.latencyCount[j] === \"number\")\n                    object.latencyCount[j] = options.longs === String ? String(message.latencyCount[j]) : message.latencyCount[j];\n                else\n                    object.latencyCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.latencyCount[j]) : options.longs === Number ? new $util.LongBits(message.latencyCount[j].low >>> 0, message.latencyCount[j].high >>> 0).toNumber() : message.latencyCount[j];\n        }\n        if (message.estimatedExecutionCount != null && message.hasOwnProperty(\"estimatedExecutionCount\"))\n            if (typeof message.estimatedExecutionCount === \"number\")\n                object.estimatedExecutionCount = options.longs === String ? String(message.estimatedExecutionCount) : message.estimatedExecutionCount;\n            else\n                object.estimatedExecutionCount = options.longs === String ? $util.Long.prototype.toString.call(message.estimatedExecutionCount) : options.longs === Number ? new $util.LongBits(message.estimatedExecutionCount.low >>> 0, message.estimatedExecutionCount.high >>> 0).toNumber(true) : message.estimatedExecutionCount;\n        return object;\n    };\n\n    /**\n     * Converts this FieldStat to JSON.\n     * @function toJSON\n     * @memberof FieldStat\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    FieldStat.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return FieldStat;\n})();\n\n$root.TypeStat = (function() {\n\n    /**\n     * Properties of a TypeStat.\n     * @exports ITypeStat\n     * @interface ITypeStat\n     * @property {Object.<string,IFieldStat>|null} [perFieldStat] TypeStat perFieldStat\n     */\n\n    /**\n     * Constructs a new TypeStat.\n     * @exports TypeStat\n     * @classdesc Represents a TypeStat.\n     * @implements ITypeStat\n     * @constructor\n     * @param {ITypeStat=} [properties] Properties to set\n     */\n    function TypeStat(properties) {\n        this.perFieldStat = {};\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * TypeStat perFieldStat.\n     * @member {Object.<string,IFieldStat>} perFieldStat\n     * @memberof TypeStat\n     * @instance\n     */\n    TypeStat.prototype.perFieldStat = $util.emptyObject;\n\n    /**\n     * Creates a new TypeStat instance using the specified properties.\n     * @function create\n     * @memberof TypeStat\n     * @static\n     * @param {ITypeStat=} [properties] Properties to set\n     * @returns {TypeStat} TypeStat instance\n     */\n    TypeStat.create = function create(properties) {\n        return new TypeStat(properties);\n    };\n\n    /**\n     * Encodes the specified TypeStat message. Does not implicitly {@link TypeStat.verify|verify} messages.\n     * @function encode\n     * @memberof TypeStat\n     * @static\n     * @param {ITypeStat} message TypeStat message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TypeStat.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.perFieldStat != null && Object.hasOwnProperty.call(message, \"perFieldStat\"))\n            for (var keys = Object.keys(message.perFieldStat), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 3, wireType 2 =*/26).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.FieldStat.encode(message.perFieldStat[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        return writer;\n    };\n\n    /**\n     * Encodes the specified TypeStat message, length delimited. Does not implicitly {@link TypeStat.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof TypeStat\n     * @static\n     * @param {ITypeStat} message TypeStat message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TypeStat.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a TypeStat message from the specified reader or buffer.\n     * @function decode\n     * @memberof TypeStat\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {TypeStat} TypeStat\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TypeStat.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.TypeStat(), key;\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 3:\n                reader.skip().pos++;\n                if (message.perFieldStat === $util.emptyObject)\n                    message.perFieldStat = {};\n                key = reader.string();\n                reader.pos++;\n                message.perFieldStat[key] = $root.FieldStat.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a TypeStat message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof TypeStat\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {TypeStat} TypeStat\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TypeStat.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a TypeStat message.\n     * @function verify\n     * @memberof TypeStat\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    TypeStat.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.perFieldStat != null && message.hasOwnProperty(\"perFieldStat\")) {\n            if (!$util.isObject(message.perFieldStat))\n                return \"perFieldStat: object expected\";\n            var key = Object.keys(message.perFieldStat);\n            for (var i = 0; i < key.length; ++i) {\n                var error = $root.FieldStat.verify(message.perFieldStat[key[i]]);\n                if (error)\n                    return \"perFieldStat.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a TypeStat message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof TypeStat\n     * @static\n     * @param {TypeStat} message TypeStat\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    TypeStat.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.objects || options.defaults)\n            object.perFieldStat = {};\n        var keys2;\n        if (message.perFieldStat && (keys2 = Object.keys(message.perFieldStat)).length) {\n            object.perFieldStat = {};\n            for (var j = 0; j < keys2.length; ++j)\n                object.perFieldStat[keys2[j]] = $root.FieldStat.toObject(message.perFieldStat[keys2[j]], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this TypeStat to JSON.\n     * @function toJSON\n     * @memberof TypeStat\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    TypeStat.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return TypeStat;\n})();\n\n$root.ReferencedFieldsForType = (function() {\n\n    /**\n     * Properties of a ReferencedFieldsForType.\n     * @exports IReferencedFieldsForType\n     * @interface IReferencedFieldsForType\n     * @property {Array.<string>|null} [fieldNames] ReferencedFieldsForType fieldNames\n     * @property {boolean|null} [isInterface] ReferencedFieldsForType isInterface\n     */\n\n    /**\n     * Constructs a new ReferencedFieldsForType.\n     * @exports ReferencedFieldsForType\n     * @classdesc Represents a ReferencedFieldsForType.\n     * @implements IReferencedFieldsForType\n     * @constructor\n     * @param {IReferencedFieldsForType=} [properties] Properties to set\n     */\n    function ReferencedFieldsForType(properties) {\n        this.fieldNames = [];\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ReferencedFieldsForType fieldNames.\n     * @member {Array.<string>} fieldNames\n     * @memberof ReferencedFieldsForType\n     * @instance\n     */\n    ReferencedFieldsForType.prototype.fieldNames = $util.emptyArray;\n\n    /**\n     * ReferencedFieldsForType isInterface.\n     * @member {boolean} isInterface\n     * @memberof ReferencedFieldsForType\n     * @instance\n     */\n    ReferencedFieldsForType.prototype.isInterface = false;\n\n    /**\n     * Creates a new ReferencedFieldsForType instance using the specified properties.\n     * @function create\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {IReferencedFieldsForType=} [properties] Properties to set\n     * @returns {ReferencedFieldsForType} ReferencedFieldsForType instance\n     */\n    ReferencedFieldsForType.create = function create(properties) {\n        return new ReferencedFieldsForType(properties);\n    };\n\n    /**\n     * Encodes the specified ReferencedFieldsForType message. Does not implicitly {@link ReferencedFieldsForType.verify|verify} messages.\n     * @function encode\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {IReferencedFieldsForType} message ReferencedFieldsForType message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ReferencedFieldsForType.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.fieldNames != null && message.fieldNames.length)\n            for (var i = 0; i < message.fieldNames.length; ++i)\n                writer.uint32(/* id 1, wireType 2 =*/10).string(message.fieldNames[i]);\n        if (message.isInterface != null && Object.hasOwnProperty.call(message, \"isInterface\"))\n            writer.uint32(/* id 2, wireType 0 =*/16).bool(message.isInterface);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ReferencedFieldsForType message, length delimited. Does not implicitly {@link ReferencedFieldsForType.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {IReferencedFieldsForType} message ReferencedFieldsForType message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ReferencedFieldsForType.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ReferencedFieldsForType message from the specified reader or buffer.\n     * @function decode\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ReferencedFieldsForType} ReferencedFieldsForType\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ReferencedFieldsForType.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ReferencedFieldsForType();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                if (!(message.fieldNames && message.fieldNames.length))\n                    message.fieldNames = [];\n                message.fieldNames.push(reader.string());\n                break;\n            case 2:\n                message.isInterface = reader.bool();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ReferencedFieldsForType message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ReferencedFieldsForType} ReferencedFieldsForType\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ReferencedFieldsForType.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ReferencedFieldsForType message.\n     * @function verify\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ReferencedFieldsForType.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.fieldNames != null && message.hasOwnProperty(\"fieldNames\")) {\n            if (!Array.isArray(message.fieldNames))\n                return \"fieldNames: array expected\";\n            for (var i = 0; i < message.fieldNames.length; ++i)\n                if (!$util.isString(message.fieldNames[i]))\n                    return \"fieldNames: string[] expected\";\n        }\n        if (message.isInterface != null && message.hasOwnProperty(\"isInterface\"))\n            if (typeof message.isInterface !== \"boolean\")\n                return \"isInterface: boolean expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ReferencedFieldsForType message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {ReferencedFieldsForType} message ReferencedFieldsForType\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ReferencedFieldsForType.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.arrays || options.defaults)\n            object.fieldNames = [];\n        if (options.defaults)\n            object.isInterface = false;\n        if (message.fieldNames && message.fieldNames.length) {\n            object.fieldNames = [];\n            for (var j = 0; j < message.fieldNames.length; ++j)\n                object.fieldNames[j] = message.fieldNames[j];\n        }\n        if (message.isInterface != null && message.hasOwnProperty(\"isInterface\"))\n            object.isInterface = message.isInterface;\n        return object;\n    };\n\n    /**\n     * Converts this ReferencedFieldsForType to JSON.\n     * @function toJSON\n     * @memberof ReferencedFieldsForType\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ReferencedFieldsForType.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ReferencedFieldsForType;\n})();\n\n$root.Report = (function() {\n\n    /**\n     * Properties of a Report.\n     * @exports IReport\n     * @interface IReport\n     * @property {IReportHeader|null} [header] Report header\n     * @property {Object.<string,ITracesAndStats>|null} [tracesPerQuery] Report tracesPerQuery\n     * @property {google.protobuf.ITimestamp|null} [endTime] Report endTime\n     * @property {number|null} [operationCount] Report operationCount\n     * @property {boolean|null} [tracesPreAggregated] Report tracesPreAggregated\n     */\n\n    /**\n     * Constructs a new Report.\n     * @exports Report\n     * @classdesc Represents a Report.\n     * @implements IReport\n     * @constructor\n     * @param {IReport=} [properties] Properties to set\n     */\n    function Report(properties) {\n        this.tracesPerQuery = {};\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * Report header.\n     * @member {IReportHeader|null|undefined} header\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.header = null;\n\n    /**\n     * Report tracesPerQuery.\n     * @member {Object.<string,ITracesAndStats>} tracesPerQuery\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.tracesPerQuery = $util.emptyObject;\n\n    /**\n     * Report endTime.\n     * @member {google.protobuf.ITimestamp|null|undefined} endTime\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.endTime = null;\n\n    /**\n     * Report operationCount.\n     * @member {number} operationCount\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.operationCount = 0;\n\n    /**\n     * Report tracesPreAggregated.\n     * @member {boolean} tracesPreAggregated\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.tracesPreAggregated = false;\n\n    /**\n     * Creates a new Report instance using the specified properties.\n     * @function create\n     * @memberof Report\n     * @static\n     * @param {IReport=} [properties] Properties to set\n     * @returns {Report} Report instance\n     */\n    Report.create = function create(properties) {\n        return new Report(properties);\n    };\n\n    /**\n     * Encodes the specified Report message. Does not implicitly {@link Report.verify|verify} messages.\n     * @function encode\n     * @memberof Report\n     * @static\n     * @param {IReport} message Report message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Report.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.header != null && Object.hasOwnProperty.call(message, \"header\"))\n            $root.ReportHeader.encode(message.header, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.endTime != null && Object.hasOwnProperty.call(message, \"endTime\"))\n            $root.google.protobuf.Timestamp.encode(message.endTime, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n        if (message.tracesPerQuery != null && Object.hasOwnProperty.call(message, \"tracesPerQuery\"))\n            for (var keys = Object.keys(message.tracesPerQuery), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 5, wireType 2 =*/42).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.TracesAndStats.encode(message.tracesPerQuery[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        if (message.operationCount != null && Object.hasOwnProperty.call(message, \"operationCount\"))\n            writer.uint32(/* id 6, wireType 0 =*/48).uint64(message.operationCount);\n        if (message.tracesPreAggregated != null && Object.hasOwnProperty.call(message, \"tracesPreAggregated\"))\n            writer.uint32(/* id 7, wireType 0 =*/56).bool(message.tracesPreAggregated);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified Report message, length delimited. Does not implicitly {@link Report.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof Report\n     * @static\n     * @param {IReport} message Report message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Report.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a Report message from the specified reader or buffer.\n     * @function decode\n     * @memberof Report\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {Report} Report\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Report.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Report(), key;\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.header = $root.ReportHeader.decode(reader, reader.uint32());\n                break;\n            case 5:\n                reader.skip().pos++;\n                if (message.tracesPerQuery === $util.emptyObject)\n                    message.tracesPerQuery = {};\n                key = reader.string();\n                reader.pos++;\n                message.tracesPerQuery[key] = $root.TracesAndStats.decode(reader, reader.uint32());\n                break;\n            case 2:\n                message.endTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                break;\n            case 6:\n                message.operationCount = reader.uint64();\n                break;\n            case 7:\n                message.tracesPreAggregated = reader.bool();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a Report message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof Report\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {Report} Report\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Report.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a Report message.\n     * @function verify\n     * @memberof Report\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    Report.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.header != null && message.hasOwnProperty(\"header\")) {\n            var error = $root.ReportHeader.verify(message.header);\n            if (error)\n                return \"header.\" + error;\n        }\n        if (message.tracesPerQuery != null && message.hasOwnProperty(\"tracesPerQuery\")) {\n            if (!$util.isObject(message.tracesPerQuery))\n                return \"tracesPerQuery: object expected\";\n            var key = Object.keys(message.tracesPerQuery);\n            for (var i = 0; i < key.length; ++i) {\n                var error = $root.TracesAndStats.verify(message.tracesPerQuery[key[i]]);\n                if (error)\n                    return \"tracesPerQuery.\" + error;\n            }\n        }\n        if (message.endTime != null && message.hasOwnProperty(\"endTime\")) {\n            var error = $root.google.protobuf.Timestamp.verify(message.endTime);\n            if (error)\n                return \"endTime.\" + error;\n        }\n        if (message.operationCount != null && message.hasOwnProperty(\"operationCount\"))\n            if (!$util.isInteger(message.operationCount) && !(message.operationCount && $util.isInteger(message.operationCount.low) && $util.isInteger(message.operationCount.high)))\n                return \"operationCount: integer|Long expected\";\n        if (message.tracesPreAggregated != null && message.hasOwnProperty(\"tracesPreAggregated\"))\n            if (typeof message.tracesPreAggregated !== \"boolean\")\n                return \"tracesPreAggregated: boolean expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a Report message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Report\n     * @static\n     * @param {Report} message Report\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Report.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.objects || options.defaults)\n            object.tracesPerQuery = {};\n        if (options.defaults) {\n            object.header = null;\n            object.endTime = null;\n            object.operationCount = 0;\n            object.tracesPreAggregated = false;\n        }\n        if (message.header != null && message.hasOwnProperty(\"header\"))\n            object.header = $root.ReportHeader.toObject(message.header, options);\n        if (message.endTime != null && message.hasOwnProperty(\"endTime\"))\n            object.endTime = $root.google.protobuf.Timestamp.toObject(message.endTime, options);\n        var keys2;\n        if (message.tracesPerQuery && (keys2 = Object.keys(message.tracesPerQuery)).length) {\n            object.tracesPerQuery = {};\n            for (var j = 0; j < keys2.length; ++j)\n                object.tracesPerQuery[keys2[j]] = $root.TracesAndStats.toObject(message.tracesPerQuery[keys2[j]], options);\n        }\n        if (message.operationCount != null && message.hasOwnProperty(\"operationCount\"))\n            if (typeof message.operationCount === \"number\")\n                object.operationCount = options.longs === String ? String(message.operationCount) : message.operationCount;\n            else\n                object.operationCount = options.longs === String ? $util.Long.prototype.toString.call(message.operationCount) : options.longs === Number ? new $util.LongBits(message.operationCount.low >>> 0, message.operationCount.high >>> 0).toNumber(true) : message.operationCount;\n        if (message.tracesPreAggregated != null && message.hasOwnProperty(\"tracesPreAggregated\"))\n            object.tracesPreAggregated = message.tracesPreAggregated;\n        return object;\n    };\n\n    /**\n     * Converts this Report to JSON.\n     * @function toJSON\n     * @memberof Report\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Report.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return Report;\n})();\n\n$root.ContextualizedStats = (function() {\n\n    /**\n     * Properties of a ContextualizedStats.\n     * @exports IContextualizedStats\n     * @interface IContextualizedStats\n     * @property {IStatsContext|null} [context] ContextualizedStats context\n     * @property {IQueryLatencyStats|null} [queryLatencyStats] ContextualizedStats queryLatencyStats\n     * @property {Object.<string,ITypeStat>|null} [perTypeStat] ContextualizedStats perTypeStat\n     */\n\n    /**\n     * Constructs a new ContextualizedStats.\n     * @exports ContextualizedStats\n     * @classdesc Represents a ContextualizedStats.\n     * @implements IContextualizedStats\n     * @constructor\n     * @param {IContextualizedStats=} [properties] Properties to set\n     */\n    function ContextualizedStats(properties) {\n        this.perTypeStat = {};\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ContextualizedStats context.\n     * @member {IStatsContext|null|undefined} context\n     * @memberof ContextualizedStats\n     * @instance\n     */\n    ContextualizedStats.prototype.context = null;\n\n    /**\n     * ContextualizedStats queryLatencyStats.\n     * @member {IQueryLatencyStats|null|undefined} queryLatencyStats\n     * @memberof ContextualizedStats\n     * @instance\n     */\n    ContextualizedStats.prototype.queryLatencyStats = null;\n\n    /**\n     * ContextualizedStats perTypeStat.\n     * @member {Object.<string,ITypeStat>} perTypeStat\n     * @memberof ContextualizedStats\n     * @instance\n     */\n    ContextualizedStats.prototype.perTypeStat = $util.emptyObject;\n\n    /**\n     * Creates a new ContextualizedStats instance using the specified properties.\n     * @function create\n     * @memberof ContextualizedStats\n     * @static\n     * @param {IContextualizedStats=} [properties] Properties to set\n     * @returns {ContextualizedStats} ContextualizedStats instance\n     */\n    ContextualizedStats.create = function create(properties) {\n        return new ContextualizedStats(properties);\n    };\n\n    /**\n     * Encodes the specified ContextualizedStats message. Does not implicitly {@link ContextualizedStats.verify|verify} messages.\n     * @function encode\n     * @memberof ContextualizedStats\n     * @static\n     * @param {IContextualizedStats} message ContextualizedStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.context != null && Object.hasOwnProperty.call(message, \"context\"))\n            $root.StatsContext.encode(message.context, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.queryLatencyStats != null && Object.hasOwnProperty.call(message, \"queryLatencyStats\"))\n            $root.QueryLatencyStats.encode(message.queryLatencyStats, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n        if (message.perTypeStat != null && Object.hasOwnProperty.call(message, \"perTypeStat\"))\n            for (var keys = Object.keys(message.perTypeStat), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 3, wireType 2 =*/26).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.TypeStat.encode(message.perTypeStat[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ContextualizedStats message, length delimited. Does not implicitly {@link ContextualizedStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ContextualizedStats\n     * @static\n     * @param {IContextualizedStats} message ContextualizedStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ContextualizedStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof ContextualizedStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ContextualizedStats} ContextualizedStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ContextualizedStats(), key;\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.context = $root.StatsContext.decode(reader, reader.uint32());\n                break;\n            case 2:\n                message.queryLatencyStats = $root.QueryLatencyStats.decode(reader, reader.uint32());\n                break;\n            case 3:\n                reader.skip().pos++;\n                if (message.perTypeStat === $util.emptyObject)\n                    message.perTypeStat = {};\n                key = reader.string();\n                reader.pos++;\n                message.perTypeStat[key] = $root.TypeStat.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ContextualizedStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ContextualizedStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ContextualizedStats} ContextualizedStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ContextualizedStats message.\n     * @function verify\n     * @memberof ContextualizedStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ContextualizedStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.context != null && message.hasOwnProperty(\"context\")) {\n            var error = $root.StatsContext.verify(message.context);\n            if (error)\n                return \"context.\" + error;\n        }\n        if (message.queryLatencyStats != null && message.hasOwnProperty(\"queryLatencyStats\")) {\n            var error = $root.QueryLatencyStats.verify(message.queryLatencyStats);\n            if (error)\n                return \"queryLatencyStats.\" + error;\n        }\n        if (message.perTypeStat != null && message.hasOwnProperty(\"perTypeStat\")) {\n            if (!$util.isObject(message.perTypeStat))\n                return \"perTypeStat: object expected\";\n            var key = Object.keys(message.perTypeStat);\n            for (var i = 0; i < key.length; ++i) {\n                var error = $root.TypeStat.verify(message.perTypeStat[key[i]]);\n                if (error)\n                    return \"perTypeStat.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ContextualizedStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ContextualizedStats\n     * @static\n     * @param {ContextualizedStats} message ContextualizedStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ContextualizedStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.objects || options.defaults)\n            object.perTypeStat = {};\n        if (options.defaults) {\n            object.context = null;\n            object.queryLatencyStats = null;\n        }\n        if (message.context != null && message.hasOwnProperty(\"context\"))\n            object.context = $root.StatsContext.toObject(message.context, options);\n        if (message.queryLatencyStats != null && message.hasOwnProperty(\"queryLatencyStats\"))\n            object.queryLatencyStats = $root.QueryLatencyStats.toObject(message.queryLatencyStats, options);\n        var keys2;\n        if (message.perTypeStat && (keys2 = Object.keys(message.perTypeStat)).length) {\n            object.perTypeStat = {};\n            for (var j = 0; j < keys2.length; ++j)\n                object.perTypeStat[keys2[j]] = $root.TypeStat.toObject(message.perTypeStat[keys2[j]], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this ContextualizedStats to JSON.\n     * @function toJSON\n     * @memberof ContextualizedStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ContextualizedStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ContextualizedStats;\n})();\n\n$root.TracesAndStats = (function() {\n\n    /**\n     * Properties of a TracesAndStats.\n     * @exports ITracesAndStats\n     * @interface ITracesAndStats\n     * @property {Array.<ITrace|Uint8Array>|null} [trace] TracesAndStats trace\n     * @property {$protobuf.ToArray.<IContextualizedStats>|Array.<IContextualizedStats>|null} [statsWithContext] TracesAndStats statsWithContext\n     * @property {Object.<string,IReferencedFieldsForType>|null} [referencedFieldsByType] TracesAndStats referencedFieldsByType\n     * @property {Array.<ITrace|Uint8Array>|null} [internalTracesContributingToStats] TracesAndStats internalTracesContributingToStats\n     */\n\n    /**\n     * Constructs a new TracesAndStats.\n     * @exports TracesAndStats\n     * @classdesc Represents a TracesAndStats.\n     * @implements ITracesAndStats\n     * @constructor\n     * @param {ITracesAndStats=} [properties] Properties to set\n     */\n    function TracesAndStats(properties) {\n        this.trace = [];\n        this.statsWithContext = [];\n        this.referencedFieldsByType = {};\n        this.internalTracesContributingToStats = [];\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * TracesAndStats trace.\n     * @member {Array.<ITrace|Uint8Array>} trace\n     * @memberof TracesAndStats\n     * @instance\n     */\n    TracesAndStats.prototype.trace = $util.emptyArray;\n\n    /**\n     * TracesAndStats statsWithContext.\n     * @member {Array.<IContextualizedStats>} statsWithContext\n     * @memberof TracesAndStats\n     * @instance\n     */\n    TracesAndStats.prototype.statsWithContext = $util.emptyArray;\n\n    /**\n     * TracesAndStats referencedFieldsByType.\n     * @member {Object.<string,IReferencedFieldsForType>} referencedFieldsByType\n     * @memberof TracesAndStats\n     * @instance\n     */\n    TracesAndStats.prototype.referencedFieldsByType = $util.emptyObject;\n\n    /**\n     * TracesAndStats internalTracesContributingToStats.\n     * @member {Array.<ITrace|Uint8Array>} internalTracesContributingToStats\n     * @memberof TracesAndStats\n     * @instance\n     */\n    TracesAndStats.prototype.internalTracesContributingToStats = $util.emptyArray;\n\n    /**\n     * Creates a new TracesAndStats instance using the specified properties.\n     * @function create\n     * @memberof TracesAndStats\n     * @static\n     * @param {ITracesAndStats=} [properties] Properties to set\n     * @returns {TracesAndStats} TracesAndStats instance\n     */\n    TracesAndStats.create = function create(properties) {\n        return new TracesAndStats(properties);\n    };\n\n    /**\n     * Encodes the specified TracesAndStats message. Does not implicitly {@link TracesAndStats.verify|verify} messages.\n     * @function encode\n     * @memberof TracesAndStats\n     * @static\n     * @param {ITracesAndStats} message TracesAndStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TracesAndStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.trace != null && message.trace.length)\n            for (var i = 0; i < message.trace.length; ++i)\n                if (message.trace[i] instanceof Uint8Array) {\n                    writer.uint32(/* id 1, wireType 2 =*/10);\n                    writer.bytes(message.trace[i]);\n                } else\n                    $root.Trace.encode(message.trace[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        var array2;\n        if (message.statsWithContext != null && message.statsWithContext.toArray)\n            array2 = message.statsWithContext.toArray();\n        else\n            array2 = message.statsWithContext;\n        if (array2 != null && array2.length)\n            for (var i = 0; i < array2.length; ++i)\n                $root.ContextualizedStats.encode(array2[i], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n        if (message.internalTracesContributingToStats != null && message.internalTracesContributingToStats.length)\n            for (var i = 0; i < message.internalTracesContributingToStats.length; ++i)\n                if (message.internalTracesContributingToStats[i] instanceof Uint8Array) {\n                    writer.uint32(/* id 3, wireType 2 =*/26);\n                    writer.bytes(message.internalTracesContributingToStats[i]);\n                } else\n                    $root.Trace.encode(message.internalTracesContributingToStats[i], writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n        if (message.referencedFieldsByType != null && Object.hasOwnProperty.call(message, \"referencedFieldsByType\"))\n            for (var keys = Object.keys(message.referencedFieldsByType), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 4, wireType 2 =*/34).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.ReferencedFieldsForType.encode(message.referencedFieldsByType[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        return writer;\n    };\n\n    /**\n     * Encodes the specified TracesAndStats message, length delimited. Does not implicitly {@link TracesAndStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof TracesAndStats\n     * @static\n     * @param {ITracesAndStats} message TracesAndStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TracesAndStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a TracesAndStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof TracesAndStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {TracesAndStats} TracesAndStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TracesAndStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.TracesAndStats(), key;\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                if (!(message.trace && message.trace.length))\n                    message.trace = [];\n                message.trace.push($root.Trace.decode(reader, reader.uint32()));\n                break;\n            case 2:\n                if (!(message.statsWithContext && message.statsWithContext.length))\n                    message.statsWithContext = [];\n                message.statsWithContext.push($root.ContextualizedStats.decode(reader, reader.uint32()));\n                break;\n            case 4:\n                reader.skip().pos++;\n                if (message.referencedFieldsByType === $util.emptyObject)\n                    message.referencedFieldsByType = {};\n                key = reader.string();\n                reader.pos++;\n                message.referencedFieldsByType[key] = $root.ReferencedFieldsForType.decode(reader, reader.uint32());\n                break;\n            case 3:\n                if (!(message.internalTracesContributingToStats && message.internalTracesContributingToStats.length))\n                    message.internalTracesContributingToStats = [];\n                message.internalTracesContributingToStats.push($root.Trace.decode(reader, reader.uint32()));\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a TracesAndStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof TracesAndStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {TracesAndStats} TracesAndStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TracesAndStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a TracesAndStats message.\n     * @function verify\n     * @memberof TracesAndStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    TracesAndStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.trace != null && message.hasOwnProperty(\"trace\")) {\n            if (!Array.isArray(message.trace))\n                return \"trace: array expected\";\n            for (var i = 0; i < message.trace.length; ++i)\n                if (!(message.trace[i] instanceof Uint8Array)) {\n                    var error = $root.Trace.verify(message.trace[i]);\n                    if (error)\n                        return \"trace.\" + error;\n                }\n        }\n        if (message.statsWithContext != null && message.hasOwnProperty(\"statsWithContext\")) {\n            var array2;\n            if (message.statsWithContext != null && message.statsWithContext.toArray)\n                array2 = message.statsWithContext.toArray();\n            else\n                array2 = message.statsWithContext;\n            if (!Array.isArray(array2))\n                return \"statsWithContext: array expected\";\n            for (var i = 0; i < array2.length; ++i) {\n                var error = $root.ContextualizedStats.verify(array2[i]);\n                if (error)\n                    return \"statsWithContext.\" + error;\n            }\n        }\n        if (message.referencedFieldsByType != null && message.hasOwnProperty(\"referencedFieldsByType\")) {\n            if (!$util.isObject(message.referencedFieldsByType))\n                return \"referencedFieldsByType: object expected\";\n            var key = Object.keys(message.referencedFieldsByType);\n            for (var i = 0; i < key.length; ++i) {\n                var error = $root.ReferencedFieldsForType.verify(message.referencedFieldsByType[key[i]]);\n                if (error)\n                    return \"referencedFieldsByType.\" + error;\n            }\n        }\n        if (message.internalTracesContributingToStats != null && message.hasOwnProperty(\"internalTracesContributingToStats\")) {\n            if (!Array.isArray(message.internalTracesContributingToStats))\n                return \"internalTracesContributingToStats: array expected\";\n            for (var i = 0; i < message.internalTracesContributingToStats.length; ++i)\n                if (!(message.internalTracesContributingToStats[i] instanceof Uint8Array)) {\n                    var error = $root.Trace.verify(message.internalTracesContributingToStats[i]);\n                    if (error)\n                        return \"internalTracesContributingToStats.\" + error;\n                }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a TracesAndStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof TracesAndStats\n     * @static\n     * @param {TracesAndStats} message TracesAndStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    TracesAndStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.arrays || options.defaults) {\n            object.trace = [];\n            object.statsWithContext = [];\n            object.internalTracesContributingToStats = [];\n        }\n        if (options.objects || options.defaults)\n            object.referencedFieldsByType = {};\n        if (message.trace && message.trace.length) {\n            object.trace = [];\n            for (var j = 0; j < message.trace.length; ++j)\n                object.trace[j] = $root.Trace.toObject(message.trace[j], options);\n        }\n        if (message.statsWithContext && message.statsWithContext.length) {\n            object.statsWithContext = [];\n            for (var j = 0; j < message.statsWithContext.length; ++j)\n                object.statsWithContext[j] = $root.ContextualizedStats.toObject(message.statsWithContext[j], options);\n        }\n        if (message.internalTracesContributingToStats && message.internalTracesContributingToStats.length) {\n            object.internalTracesContributingToStats = [];\n            for (var j = 0; j < message.internalTracesContributingToStats.length; ++j)\n                object.internalTracesContributingToStats[j] = $root.Trace.toObject(message.internalTracesContributingToStats[j], options);\n        }\n        var keys2;\n        if (message.referencedFieldsByType && (keys2 = Object.keys(message.referencedFieldsByType)).length) {\n            object.referencedFieldsByType = {};\n            for (var j = 0; j < keys2.length; ++j)\n                object.referencedFieldsByType[keys2[j]] = $root.ReferencedFieldsForType.toObject(message.referencedFieldsByType[keys2[j]], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this TracesAndStats to JSON.\n     * @function toJSON\n     * @memberof TracesAndStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    TracesAndStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return TracesAndStats;\n})();\n\n$root.google = (function() {\n\n    /**\n     * Namespace google.\n     * @exports google\n     * @namespace\n     */\n    var google = {};\n\n    google.protobuf = (function() {\n\n        /**\n         * Namespace protobuf.\n         * @memberof google\n         * @namespace\n         */\n        var protobuf = {};\n\n        protobuf.Timestamp = (function() {\n\n            /**\n             * Properties of a Timestamp.\n             * @memberof google.protobuf\n             * @interface ITimestamp\n             * @property {number|null} [seconds] Timestamp seconds\n             * @property {number|null} [nanos] Timestamp nanos\n             */\n\n            /**\n             * Constructs a new Timestamp.\n             * @memberof google.protobuf\n             * @classdesc Represents a Timestamp.\n             * @implements ITimestamp\n             * @constructor\n             * @param {google.protobuf.ITimestamp=} [properties] Properties to set\n             */\n            function Timestamp(properties) {\n                if (properties)\n                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * Timestamp seconds.\n             * @member {number} seconds\n             * @memberof google.protobuf.Timestamp\n             * @instance\n             */\n            Timestamp.prototype.seconds = 0;\n\n            /**\n             * Timestamp nanos.\n             * @member {number} nanos\n             * @memberof google.protobuf.Timestamp\n             * @instance\n             */\n            Timestamp.prototype.nanos = 0;\n\n            /**\n             * Creates a new Timestamp instance using the specified properties.\n             * @function create\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {google.protobuf.ITimestamp=} [properties] Properties to set\n             * @returns {google.protobuf.Timestamp} Timestamp instance\n             */\n            Timestamp.create = function create(properties) {\n                return new Timestamp(properties);\n            };\n\n            /**\n             * Encodes the specified Timestamp message. Does not implicitly {@link google.protobuf.Timestamp.verify|verify} messages.\n             * @function encode\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {google.protobuf.ITimestamp} message Timestamp message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Timestamp.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.seconds != null && Object.hasOwnProperty.call(message, \"seconds\"))\n                    writer.uint32(/* id 1, wireType 0 =*/8).int64(message.seconds);\n                if (message.nanos != null && Object.hasOwnProperty.call(message, \"nanos\"))\n                    writer.uint32(/* id 2, wireType 0 =*/16).int32(message.nanos);\n                return writer;\n            };\n\n            /**\n             * Encodes the specified Timestamp message, length delimited. Does not implicitly {@link google.protobuf.Timestamp.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {google.protobuf.ITimestamp} message Timestamp message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Timestamp.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a Timestamp message from the specified reader or buffer.\n             * @function decode\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {google.protobuf.Timestamp} Timestamp\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Timestamp.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.Timestamp();\n                while (reader.pos < end) {\n                    var tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.seconds = reader.int64();\n                        break;\n                    case 2:\n                        message.nanos = reader.int32();\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a Timestamp message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {google.protobuf.Timestamp} Timestamp\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Timestamp.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a Timestamp message.\n             * @function verify\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            Timestamp.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.seconds != null && message.hasOwnProperty(\"seconds\"))\n                    if (!$util.isInteger(message.seconds) && !(message.seconds && $util.isInteger(message.seconds.low) && $util.isInteger(message.seconds.high)))\n                        return \"seconds: integer|Long expected\";\n                if (message.nanos != null && message.hasOwnProperty(\"nanos\"))\n                    if (!$util.isInteger(message.nanos))\n                        return \"nanos: integer expected\";\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a Timestamp message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {google.protobuf.Timestamp} message Timestamp\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            Timestamp.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                var object = {};\n                if (options.defaults) {\n                    object.seconds = 0;\n                    object.nanos = 0;\n                }\n                if (message.seconds != null && message.hasOwnProperty(\"seconds\"))\n                    if (typeof message.seconds === \"number\")\n                        object.seconds = options.longs === String ? String(message.seconds) : message.seconds;\n                    else\n                        object.seconds = options.longs === String ? $util.Long.prototype.toString.call(message.seconds) : options.longs === Number ? new $util.LongBits(message.seconds.low >>> 0, message.seconds.high >>> 0).toNumber() : message.seconds;\n                if (message.nanos != null && message.hasOwnProperty(\"nanos\"))\n                    object.nanos = message.nanos;\n                return object;\n            };\n\n            /**\n             * Converts this Timestamp to JSON.\n             * @function toJSON\n             * @memberof google.protobuf.Timestamp\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            Timestamp.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return Timestamp;\n        })();\n\n        return protobuf;\n    })();\n\n    return google;\n})();\n\nmodule.exports = $root;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91c2FnZS1yZXBvcnRpbmctcHJvdG9idWYvZ2VuZXJhdGVkL2Nqcy9wcm90b2J1Zi5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNhOztBQUViLGdCQUFnQixtQkFBTyxDQUFDLHNGQUE0Qjs7QUFFcEQ7QUFDQTs7QUFFQTtBQUNBLDBFQUEwRTs7QUFFMUU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUNBQWlDO0FBQ25ELGtCQUFrQixpQ0FBaUM7QUFDbkQsa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGtCQUFrQjtBQUNwQyxrQkFBa0IsY0FBYztBQUNoQyxrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IscUJBQXFCO0FBQ3ZDLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixrQkFBa0I7QUFDcEMsa0JBQWtCLHlCQUF5QjtBQUMzQyxrQkFBa0IsMkJBQTJCO0FBQzdDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixhQUFhO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaUJBQWlCO0FBQzdFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDJDQUEyQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDJDQUEyQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiw0QkFBNEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTOztBQUVUO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vdXNhZ2UtcmVwb3J0aW5nLXByb3RvYnVmL2dlbmVyYXRlZC9janMvcHJvdG9idWYuanM/M2E5YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKmVzbGludC1kaXNhYmxlIGJsb2NrLXNjb3BlZC12YXIsIGlkLWxlbmd0aCwgbm8tY29udHJvbC1yZWdleCwgbm8tbWFnaWMtbnVtYmVycywgbm8tcHJvdG90eXBlLWJ1aWx0aW5zLCBuby1yZWRlY2xhcmUsIG5vLXNoYWRvdywgbm8tdmFyLCBzb3J0LXZhcnMqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciAkcHJvdG9idWYgPSByZXF1aXJlKFwiQGFwb2xsby9wcm90b2J1ZmpzL21pbmltYWxcIik7XG5cbi8vIENvbW1vbiBhbGlhc2VzXG52YXIgJFJlYWRlciA9ICRwcm90b2J1Zi5SZWFkZXIsICRXcml0ZXIgPSAkcHJvdG9idWYuV3JpdGVyLCAkdXRpbCA9ICRwcm90b2J1Zi51dGlsO1xuXG4vLyBFeHBvcnRlZCByb290IG5hbWVzcGFjZVxudmFyICRyb290ID0gJHByb3RvYnVmLnJvb3RzW1wiZGVmYXVsdFwiXSB8fCAoJHByb3RvYnVmLnJvb3RzW1wiZGVmYXVsdFwiXSA9IHt9KTtcblxuJHJvb3QuVHJhY2UgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVHJhY2UuXG4gICAgICogQGV4cG9ydHMgSVRyYWNlXG4gICAgICogQGludGVyZmFjZSBJVHJhY2VcbiAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfG51bGx9IFtzdGFydFRpbWVdIFRyYWNlIHN0YXJ0VGltZVxuICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB8bnVsbH0gW2VuZFRpbWVdIFRyYWNlIGVuZFRpbWVcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZHVyYXRpb25Oc10gVHJhY2UgZHVyYXRpb25Oc1xuICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSU5vZGV8bnVsbH0gW3Jvb3RdIFRyYWNlIHJvb3RcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2lzSW5jb21wbGV0ZV0gVHJhY2UgaXNJbmNvbXBsZXRlXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3NpZ25hdHVyZV0gVHJhY2Ugc2lnbmF0dXJlXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5XSBUcmFjZSB1bmV4ZWN1dGVkT3BlcmF0aW9uQm9keVxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt1bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZV0gVHJhY2UgdW5leGVjdXRlZE9wZXJhdGlvbk5hbWVcbiAgICAgKiBAcHJvcGVydHkge1RyYWNlLklEZXRhaWxzfG51bGx9IFtkZXRhaWxzXSBUcmFjZSBkZXRhaWxzXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2NsaWVudE5hbWVdIFRyYWNlIGNsaWVudE5hbWVcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbY2xpZW50VmVyc2lvbl0gVHJhY2UgY2xpZW50VmVyc2lvblxuICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSUhUVFB8bnVsbH0gW2h0dHBdIFRyYWNlIGh0dHBcbiAgICAgKiBAcHJvcGVydHkge1RyYWNlLklDYWNoZVBvbGljeXxudWxsfSBbY2FjaGVQb2xpY3ldIFRyYWNlIGNhY2hlUG9saWN5XG4gICAgICogQHByb3BlcnR5IHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfSBbcXVlcnlQbGFuXSBUcmFjZSBxdWVyeVBsYW5cbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2Z1bGxRdWVyeUNhY2hlSGl0XSBUcmFjZSBmdWxsUXVlcnlDYWNoZUhpdFxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxudWxsfSBbcGVyc2lzdGVkUXVlcnlIaXRdIFRyYWNlIHBlcnNpc3RlZFF1ZXJ5SGl0XG4gICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFtwZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyXSBUcmFjZSBwZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFtyZWdpc3RlcmVkT3BlcmF0aW9uXSBUcmFjZSByZWdpc3RlcmVkT3BlcmF0aW9uXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFtmb3JiaWRkZW5PcGVyYXRpb25dIFRyYWNlIGZvcmJpZGRlbk9wZXJhdGlvblxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtmaWVsZEV4ZWN1dGlvbldlaWdodF0gVHJhY2UgZmllbGRFeGVjdXRpb25XZWlnaHRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVHJhY2UuXG4gICAgICogQGV4cG9ydHMgVHJhY2VcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUcmFjZS5cbiAgICAgKiBAaW1wbGVtZW50cyBJVHJhY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lUcmFjZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyYWNlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBzdGFydFRpbWUuXG4gICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB8bnVsbHx1bmRlZmluZWR9IHN0YXJ0VGltZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5zdGFydFRpbWUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgZW5kVGltZS5cbiAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVRpbWVzdGFtcHxudWxsfHVuZGVmaW5lZH0gZW5kVGltZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5lbmRUaW1lID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIGR1cmF0aW9uTnMuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBkdXJhdGlvbk5zXG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLmR1cmF0aW9uTnMgPSAwO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2Ugcm9vdC5cbiAgICAgKiBAbWVtYmVyIHtUcmFjZS5JTm9kZXxudWxsfHVuZGVmaW5lZH0gcm9vdFxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5yb290ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIGlzSW5jb21wbGV0ZS5cbiAgICAgKiBAbWVtYmVyIHtib29sZWFufSBpc0luY29tcGxldGVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuaXNJbmNvbXBsZXRlID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBzaWduYXR1cmUuXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBzaWduYXR1cmVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuc2lnbmF0dXJlID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIHVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5LlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gdW5leGVjdXRlZE9wZXJhdGlvbkJvZHlcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkgPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgdW5leGVjdXRlZE9wZXJhdGlvbk5hbWUuXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSB1bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS51bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZSA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBkZXRhaWxzLlxuICAgICAqIEBtZW1iZXIge1RyYWNlLklEZXRhaWxzfG51bGx8dW5kZWZpbmVkfSBkZXRhaWxzXG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLmRldGFpbHMgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgY2xpZW50TmFtZS5cbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGNsaWVudE5hbWVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuY2xpZW50TmFtZSA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBjbGllbnRWZXJzaW9uLlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gY2xpZW50VmVyc2lvblxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5jbGllbnRWZXJzaW9uID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIGh0dHAuXG4gICAgICogQG1lbWJlciB7VHJhY2UuSUhUVFB8bnVsbHx1bmRlZmluZWR9IGh0dHBcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuaHR0cCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBjYWNoZVBvbGljeS5cbiAgICAgKiBAbWVtYmVyIHtUcmFjZS5JQ2FjaGVQb2xpY3l8bnVsbHx1bmRlZmluZWR9IGNhY2hlUG9saWN5XG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLmNhY2hlUG9saWN5ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIHF1ZXJ5UGxhbi5cbiAgICAgKiBAbWVtYmVyIHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfHVuZGVmaW5lZH0gcXVlcnlQbGFuXG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLnF1ZXJ5UGxhbiA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBmdWxsUXVlcnlDYWNoZUhpdC5cbiAgICAgKiBAbWVtYmVyIHtib29sZWFufSBmdWxsUXVlcnlDYWNoZUhpdFxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5mdWxsUXVlcnlDYWNoZUhpdCA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgcGVyc2lzdGVkUXVlcnlIaXQuXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn0gcGVyc2lzdGVkUXVlcnlIaXRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUucGVyc2lzdGVkUXVlcnlIaXQgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIHBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIuXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn0gcGVyc2lzdGVkUXVlcnlSZWdpc3RlclxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSByZWdpc3RlcmVkT3BlcmF0aW9uLlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IHJlZ2lzdGVyZWRPcGVyYXRpb25cbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUucmVnaXN0ZXJlZE9wZXJhdGlvbiA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgZm9yYmlkZGVuT3BlcmF0aW9uLlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IGZvcmJpZGRlbk9wZXJhdGlvblxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5mb3JiaWRkZW5PcGVyYXRpb24gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIGZpZWxkRXhlY3V0aW9uV2VpZ2h0LlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gZmllbGRFeGVjdXRpb25XZWlnaHRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuZmllbGRFeGVjdXRpb25XZWlnaHQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBUcmFjZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lUcmFjZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqIEByZXR1cm5zIHtUcmFjZX0gVHJhY2UgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHJhY2UgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lUcmFjZX0gbWVzc2FnZSBUcmFjZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgVHJhY2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVuZFRpbWVcIikpXG4gICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmVuY29kZShtZXNzYWdlLmVuZFRpbWUsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRUaW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydFRpbWVcIikpXG4gICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmVuY29kZShtZXNzYWdlLnN0YXJ0VGltZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5kZXRhaWxzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZXRhaWxzXCIpKVxuICAgICAgICAgICAgJHJvb3QuVHJhY2UuRGV0YWlscy5lbmNvZGUobWVzc2FnZS5kZXRhaWxzLCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNsaWVudE5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNsaWVudE5hbWVcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDIgPSovNTgpLnN0cmluZyhtZXNzYWdlLmNsaWVudE5hbWUpO1xuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnRWZXJzaW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjbGllbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAyID0qLzY2KS5zdHJpbmcobWVzc2FnZS5jbGllbnRWZXJzaW9uKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaHR0cCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaHR0cFwiKSlcbiAgICAgICAgICAgICRyb290LlRyYWNlLkhUVFAuZW5jb2RlKG1lc3NhZ2UuaHR0cCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMCwgd2lyZVR5cGUgMiA9Ki84MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb25OcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZHVyYXRpb25Oc1wiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTEsIHdpcmVUeXBlIDAgPSovODgpLnVpbnQ2NChtZXNzYWdlLmR1cmF0aW9uTnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5yb290ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyb290XCIpKVxuICAgICAgICAgICAgJHJvb3QuVHJhY2UuTm9kZS5lbmNvZGUobWVzc2FnZS5yb290LCB3cml0ZXIudWludDMyKC8qIGlkIDE0LCB3aXJlVHlwZSAyID0qLzExNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVQb2xpY3kgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNhY2hlUG9saWN5XCIpKVxuICAgICAgICAgICAgJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kuZW5jb2RlKG1lc3NhZ2UuY2FjaGVQb2xpY3ksIHdyaXRlci51aW50MzIoLyogaWQgMTgsIHdpcmVUeXBlIDIgPSovMTQ2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5zaWduYXR1cmUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNpZ25hdHVyZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTksIHdpcmVUeXBlIDIgPSovMTU0KS5zdHJpbmcobWVzc2FnZS5zaWduYXR1cmUpO1xuICAgICAgICBpZiAobWVzc2FnZS5mdWxsUXVlcnlDYWNoZUhpdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZnVsbFF1ZXJ5Q2FjaGVIaXRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIwLCB3aXJlVHlwZSAwID0qLzE2MCkuYm9vbChtZXNzYWdlLmZ1bGxRdWVyeUNhY2hlSGl0KTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlcnNpc3RlZFF1ZXJ5SGl0XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyMSwgd2lyZVR5cGUgMCA9Ki8xNjgpLmJvb2wobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXJcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIyLCB3aXJlVHlwZSAwID0qLzE3NikuYm9vbChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIpO1xuICAgICAgICBpZiAobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZWdpc3RlcmVkT3BlcmF0aW9uXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyNCwgd2lyZVR5cGUgMCA9Ki8xOTIpLmJvb2wobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJmb3JiaWRkZW5PcGVyYXRpb25cIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDI1LCB3aXJlVHlwZSAwID0qLzIwMCkuYm9vbChtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbik7XG4gICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5UGxhbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlQbGFuXCIpKVxuICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5lbmNvZGUobWVzc2FnZS5xdWVyeVBsYW4sIHdyaXRlci51aW50MzIoLyogaWQgMjYsIHdpcmVUeXBlIDIgPSovMjEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uQm9keSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidW5leGVjdXRlZE9wZXJhdGlvbkJvZHlcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDI3LCB3aXJlVHlwZSAyID0qLzIxOCkuc3RyaW5nKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkpO1xuICAgICAgICBpZiAobWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidW5leGVjdXRlZE9wZXJhdGlvbk5hbWVcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDI4LCB3aXJlVHlwZSAyID0qLzIyNikuc3RyaW5nKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUpO1xuICAgICAgICBpZiAobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZmllbGRFeGVjdXRpb25XZWlnaHRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMxLCB3aXJlVHlwZSAxID0qLzI0OSkuZG91YmxlKG1lc3NhZ2UuZmllbGRFeGVjdXRpb25XZWlnaHQpO1xuICAgICAgICBpZiAobWVzc2FnZS5pc0luY29tcGxldGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlzSW5jb21wbGV0ZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMzMsIHdpcmVUeXBlIDAgPSovMjY0KS5ib29sKG1lc3NhZ2UuaXNJbmNvbXBsZXRlKTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRyYWNlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJVHJhY2V9IG1lc3NhZ2UgVHJhY2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFRyYWNlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUcmFjZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7VHJhY2V9IFRyYWNlXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBUcmFjZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmR1cmF0aW9uTnMgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vdCA9ICRyb290LlRyYWNlLk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzM6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5pc0luY29tcGxldGUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNpZ25hdHVyZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uQm9keSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjg6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRldGFpbHMgPSAkcm9vdC5UcmFjZS5EZXRhaWxzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jbGllbnROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2xpZW50VmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5odHRwID0gJHJvb3QuVHJhY2UuSFRUUC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhY2hlUG9saWN5ID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjY6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeVBsYW4gPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZnVsbFF1ZXJ5Q2FjaGVIaXQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjU6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb24gPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmZpZWxkRXhlY3V0aW9uV2VpZ2h0ID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUcmFjZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1RyYWNlfSBUcmFjZVxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgVHJhY2UuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgVHJhY2UgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgVHJhY2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0VGltZVwiKSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC52ZXJpZnkobWVzc2FnZS5zdGFydFRpbWUpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInN0YXJ0VGltZS5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5kVGltZVwiKSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC52ZXJpZnkobWVzc2FnZS5lbmRUaW1lKTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmRUaW1lLlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb25OcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkdXJhdGlvbk5zXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5kdXJhdGlvbk5zKSAmJiAhKG1lc3NhZ2UuZHVyYXRpb25OcyAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5kdXJhdGlvbk5zLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZHVyYXRpb25Ocy5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZHVyYXRpb25OczogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb3QgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicm9vdFwiKSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuTm9kZS52ZXJpZnkobWVzc2FnZS5yb290KTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyb290LlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaXNJbmNvbXBsZXRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlzSW5jb21wbGV0ZVwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5pc0luY29tcGxldGUgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImlzSW5jb21wbGV0ZTogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5zaWduYXR1cmUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2lnbmF0dXJlXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnNpZ25hdHVyZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2lnbmF0dXJlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidW5leGVjdXRlZE9wZXJhdGlvbkJvZHlcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5OiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidW5leGVjdXRlZE9wZXJhdGlvbk5hbWVcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInVuZXhlY3V0ZWRPcGVyYXRpb25OYW1lOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZGV0YWlscyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXRhaWxzXCIpKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5UcmFjZS5EZXRhaWxzLnZlcmlmeShtZXNzYWdlLmRldGFpbHMpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImRldGFpbHMuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnROYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudE5hbWVcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuY2xpZW50TmFtZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2xpZW50TmFtZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLmNsaWVudFZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2xpZW50VmVyc2lvblwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5jbGllbnRWZXJzaW9uKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjbGllbnRWZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaHR0cCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJodHRwXCIpKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5UcmFjZS5IVFRQLnZlcmlmeShtZXNzYWdlLmh0dHApO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImh0dHAuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jYWNoZVBvbGljeSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjYWNoZVBvbGljeVwiKSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kudmVyaWZ5KG1lc3NhZ2UuY2FjaGVQb2xpY3kpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImNhY2hlUG9saWN5LlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlQbGFuICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInF1ZXJ5UGxhblwiKSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS52ZXJpZnkobWVzc2FnZS5xdWVyeVBsYW4pO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInF1ZXJ5UGxhbi5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZ1bGxRdWVyeUNhY2hlSGl0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZ1bGxRdWVyeUNhY2hlSGl0XCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmZ1bGxRdWVyeUNhY2hlSGl0ICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmdWxsUXVlcnlDYWNoZUhpdDogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwZXJzaXN0ZWRRdWVyeUhpdFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdCAhPT0gXCJib29sZWFuXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicGVyc2lzdGVkUXVlcnlIaXQ6IGJvb2xlYW4gZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlSZWdpc3RlciAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXI6IGJvb2xlYW4gZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZWdpc3RlcmVkT3BlcmF0aW9uXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb24gIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJlZ2lzdGVyZWRPcGVyYXRpb246IGJvb2xlYW4gZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZvcmJpZGRlbk9wZXJhdGlvblwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb24gIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImZvcmJpZGRlbk9wZXJhdGlvbjogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmaWVsZEV4ZWN1dGlvbldlaWdodFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCAhPT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWVsZEV4ZWN1dGlvbldlaWdodDogbnVtYmVyIGV4cGVjdGVkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUcmFjZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7VHJhY2V9IG1lc3NhZ2UgVHJhY2VcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIFRyYWNlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC5lbmRUaW1lID0gbnVsbDtcbiAgICAgICAgICAgIG9iamVjdC5zdGFydFRpbWUgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmRldGFpbHMgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmNsaWVudE5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LmNsaWVudFZlcnNpb24gPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0Lmh0dHAgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmR1cmF0aW9uTnMgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LnJvb3QgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmNhY2hlUG9saWN5ID0gbnVsbDtcbiAgICAgICAgICAgIG9iamVjdC5zaWduYXR1cmUgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LmZ1bGxRdWVyeUNhY2hlSGl0ID0gZmFsc2U7XG4gICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlIaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIG9iamVjdC5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyID0gZmFsc2U7XG4gICAgICAgICAgICBvYmplY3QucmVnaXN0ZXJlZE9wZXJhdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgb2JqZWN0LmZvcmJpZGRlbk9wZXJhdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgb2JqZWN0LnF1ZXJ5UGxhbiA9IG51bGw7XG4gICAgICAgICAgICBvYmplY3QudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LnVuZXhlY3V0ZWRPcGVyYXRpb25OYW1lID0gXCJcIjtcbiAgICAgICAgICAgIG9iamVjdC5maWVsZEV4ZWN1dGlvbldlaWdodCA9IDA7XG4gICAgICAgICAgICBvYmplY3QuaXNJbmNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRUaW1lXCIpKVxuICAgICAgICAgICAgb2JqZWN0LmVuZFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KG1lc3NhZ2UuZW5kVGltZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGFydFRpbWVcIikpXG4gICAgICAgICAgICBvYmplY3Quc3RhcnRUaW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChtZXNzYWdlLnN0YXJ0VGltZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLmRldGFpbHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGV0YWlsc1wiKSlcbiAgICAgICAgICAgIG9iamVjdC5kZXRhaWxzID0gJHJvb3QuVHJhY2UuRGV0YWlscy50b09iamVjdChtZXNzYWdlLmRldGFpbHMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnROYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudE5hbWVcIikpXG4gICAgICAgICAgICBvYmplY3QuY2xpZW50TmFtZSA9IG1lc3NhZ2UuY2xpZW50TmFtZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2xpZW50VmVyc2lvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjbGllbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgb2JqZWN0LmNsaWVudFZlcnNpb24gPSBtZXNzYWdlLmNsaWVudFZlcnNpb247XG4gICAgICAgIGlmIChtZXNzYWdlLmh0dHAgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaHR0cFwiKSlcbiAgICAgICAgICAgIG9iamVjdC5odHRwID0gJHJvb3QuVHJhY2UuSFRUUC50b09iamVjdChtZXNzYWdlLmh0dHAsIG9wdGlvbnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5kdXJhdGlvbk5zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImR1cmF0aW9uTnNcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuZHVyYXRpb25OcyA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3QuZHVyYXRpb25OcyA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLmR1cmF0aW9uTnMpIDogbWVzc2FnZS5kdXJhdGlvbk5zO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5kdXJhdGlvbk5zID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmR1cmF0aW9uTnMpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UuZHVyYXRpb25Ocy5sb3cgPj4+IDAsIG1lc3NhZ2UuZHVyYXRpb25Ocy5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UuZHVyYXRpb25OcztcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb290XCIpKVxuICAgICAgICAgICAgb2JqZWN0LnJvb3QgPSAkcm9vdC5UcmFjZS5Ob2RlLnRvT2JqZWN0KG1lc3NhZ2Uucm9vdCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNhY2hlUG9saWN5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNhY2hlUG9saWN5XCIpKVxuICAgICAgICAgICAgb2JqZWN0LmNhY2hlUG9saWN5ID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kudG9PYmplY3QobWVzc2FnZS5jYWNoZVBvbGljeSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnNpZ25hdHVyZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzaWduYXR1cmVcIikpXG4gICAgICAgICAgICBvYmplY3Quc2lnbmF0dXJlID0gbWVzc2FnZS5zaWduYXR1cmU7XG4gICAgICAgIGlmIChtZXNzYWdlLmZ1bGxRdWVyeUNhY2hlSGl0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZ1bGxRdWVyeUNhY2hlSGl0XCIpKVxuICAgICAgICAgICAgb2JqZWN0LmZ1bGxRdWVyeUNhY2hlSGl0ID0gbWVzc2FnZS5mdWxsUXVlcnlDYWNoZUhpdDtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGVyc2lzdGVkUXVlcnlIaXRcIikpXG4gICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlIaXQgPSBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0O1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXJcIikpXG4gICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlSZWdpc3RlciA9IG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlSZWdpc3RlcjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZWdpc3RlcmVkT3BlcmF0aW9uXCIpKVxuICAgICAgICAgICAgb2JqZWN0LnJlZ2lzdGVyZWRPcGVyYXRpb24gPSBtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb247XG4gICAgICAgIGlmIChtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmb3JiaWRkZW5PcGVyYXRpb25cIikpXG4gICAgICAgICAgICBvYmplY3QuZm9yYmlkZGVuT3BlcmF0aW9uID0gbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb247XG4gICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5UGxhbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJxdWVyeVBsYW5cIikpXG4gICAgICAgICAgICBvYmplY3QucXVlcnlQbGFuID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS50b09iamVjdChtZXNzYWdlLnF1ZXJ5UGxhbiwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5XCIpKVxuICAgICAgICAgICAgb2JqZWN0LnVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5ID0gbWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uQm9keTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidW5leGVjdXRlZE9wZXJhdGlvbk5hbWVcIikpXG4gICAgICAgICAgICBvYmplY3QudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUgPSBtZXNzYWdlLnVuZXhlY3V0ZWRPcGVyYXRpb25OYW1lO1xuICAgICAgICBpZiAobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmaWVsZEV4ZWN1dGlvbldlaWdodFwiKSlcbiAgICAgICAgICAgIG9iamVjdC5maWVsZEV4ZWN1dGlvbldlaWdodCA9IG9wdGlvbnMuanNvbiAmJiAhaXNGaW5pdGUobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCkgPyBTdHJpbmcobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCkgOiBtZXNzYWdlLmZpZWxkRXhlY3V0aW9uV2VpZ2h0O1xuICAgICAgICBpZiAobWVzc2FnZS5pc0luY29tcGxldGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaXNJbmNvbXBsZXRlXCIpKVxuICAgICAgICAgICAgb2JqZWN0LmlzSW5jb21wbGV0ZSA9IG1lc3NhZ2UuaXNJbmNvbXBsZXRlO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIFRyYWNlIHRvIEpTT04uXG4gICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgVHJhY2UuQ2FjaGVQb2xpY3kgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBDYWNoZVBvbGljeS5cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSUNhY2hlUG9saWN5XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGV8bnVsbH0gW3Njb3BlXSBDYWNoZVBvbGljeSBzY29wZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbbWF4QWdlTnNdIENhY2hlUG9saWN5IG1heEFnZU5zXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENhY2hlUG9saWN5LlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ2FjaGVQb2xpY3kuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElDYWNoZVBvbGljeVxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JQ2FjaGVQb2xpY3k9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIENhY2hlUG9saWN5KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGVQb2xpY3kgc2NvcGUuXG4gICAgICAgICAqIEBtZW1iZXIge1RyYWNlLkNhY2hlUG9saWN5LlNjb3BlfSBzY29wZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS5wcm90b3R5cGUuc2NvcGUgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZVBvbGljeSBtYXhBZ2VOcy5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBtYXhBZ2VOc1xuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS5wcm90b3R5cGUubWF4QWdlTnMgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IENhY2hlUG9saWN5IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklDYWNoZVBvbGljeT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuQ2FjaGVQb2xpY3l9IENhY2hlUG9saWN5IGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWNoZVBvbGljeShwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENhY2hlUG9saWN5IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkNhY2hlUG9saWN5LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5DYWNoZVBvbGljeVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUNhY2hlUG9saWN5fSBtZXNzYWdlIENhY2hlUG9saWN5IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgQ2FjaGVQb2xpY3kuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNjb3BlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzY29wZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS5zY29wZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tYXhBZ2VOcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWF4QWdlTnNcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5pbnQ2NChtZXNzYWdlLm1heEFnZU5zKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDYWNoZVBvbGljeSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5DYWNoZVBvbGljeS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklDYWNoZVBvbGljeX0gbWVzc2FnZSBDYWNoZVBvbGljeSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIENhY2hlUG9saWN5LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgQ2FjaGVQb2xpY3kgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkNhY2hlUG9saWN5fSBDYWNoZVBvbGljeVxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIENhY2hlUG9saWN5LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLkNhY2hlUG9saWN5KCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NvcGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1heEFnZU5zID0gcmVhZGVyLmludDY0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBDYWNoZVBvbGljeSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5DYWNoZVBvbGljeVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuQ2FjaGVQb2xpY3l9IENhY2hlUG9saWN5XG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgQ2FjaGVQb2xpY3kuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgQ2FjaGVQb2xpY3kgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIENhY2hlUG9saWN5LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNjb3BlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNjb3BlXCIpKVxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5zY29wZSkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNjb3BlOiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1heEFnZU5zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1heEFnZU5zXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UubWF4QWdlTnMpICYmICEobWVzc2FnZS5tYXhBZ2VOcyAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5tYXhBZ2VOcy5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLm1heEFnZU5zLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibWF4QWdlTnM6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIENhY2hlUG9saWN5IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5DYWNoZVBvbGljeVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuQ2FjaGVQb2xpY3l9IG1lc3NhZ2UgQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5zY29wZSA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiVU5LTk9XTlwiIDogMDtcbiAgICAgICAgICAgICAgICBvYmplY3QubWF4QWdlTnMgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2NvcGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2NvcGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnNjb3BlID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGVbbWVzc2FnZS5zY29wZV0gOiBtZXNzYWdlLnNjb3BlO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWF4QWdlTnMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWF4QWdlTnNcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLm1heEFnZU5zID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF4QWdlTnMgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5tYXhBZ2VOcykgOiBtZXNzYWdlLm1heEFnZU5zO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1heEFnZU5zID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLm1heEFnZU5zKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLm1heEFnZU5zLmxvdyA+Pj4gMCwgbWVzc2FnZS5tYXhBZ2VOcy5oaWdoID4+PiAwKS50b051bWJlcigpIDogbWVzc2FnZS5tYXhBZ2VOcztcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgQ2FjaGVQb2xpY3kgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIENhY2hlUG9saWN5LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2NvcGUgZW51bS5cbiAgICAgICAgICogQG5hbWUgVHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGVcbiAgICAgICAgICogQGVudW0ge3N0cmluZ31cbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFVOS05PV049MCBVTktOT1dOIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBQVUJMSUM9MSBQVUJMSUMgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFBSSVZBVEU9MiBQUklWQVRFIHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS5TY29wZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiVU5LTk9XTlwiXSA9IDA7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiUFVCTElDXCJdID0gMTtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzJdID0gXCJQUklWQVRFXCJdID0gMjtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgcmV0dXJuIENhY2hlUG9saWN5O1xuICAgIH0pKCk7XG5cbiAgICBUcmFjZS5EZXRhaWxzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRGV0YWlscy5cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSURldGFpbHNcbiAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZyxzdHJpbmc+fG51bGx9IFt2YXJpYWJsZXNKc29uXSBEZXRhaWxzIHZhcmlhYmxlc0pzb25cbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW29wZXJhdGlvbk5hbWVdIERldGFpbHMgb3BlcmF0aW9uTmFtZVxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEZXRhaWxzLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGV0YWlscy5cbiAgICAgICAgICogQGltcGxlbWVudHMgSURldGFpbHNcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSURldGFpbHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIERldGFpbHMocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy52YXJpYWJsZXNKc29uID0ge307XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGFpbHMgdmFyaWFibGVzSnNvbi5cbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsc3RyaW5nPn0gdmFyaWFibGVzSnNvblxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRGV0YWlsc1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIERldGFpbHMucHJvdG90eXBlLnZhcmlhYmxlc0pzb24gPSAkdXRpbC5lbXB0eU9iamVjdDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGV0YWlscyBvcGVyYXRpb25OYW1lLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IG9wZXJhdGlvbk5hbWVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkRldGFpbHNcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBEZXRhaWxzLnByb3RvdHlwZS5vcGVyYXRpb25OYW1lID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBEZXRhaWxzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRGV0YWlsc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSURldGFpbHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkRldGFpbHN9IERldGFpbHMgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIERldGFpbHMuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV0YWlscyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERldGFpbHMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuRGV0YWlscy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRGV0YWlsc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSURldGFpbHN9IG1lc3NhZ2UgRGV0YWlscyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIERldGFpbHMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9wZXJhdGlvbk5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm9wZXJhdGlvbk5hbWVcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5zdHJpbmcobWVzc2FnZS5vcGVyYXRpb25OYW1lKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnZhcmlhYmxlc0pzb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZhcmlhYmxlc0pzb25cIikpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2UudmFyaWFibGVzSnNvbiksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhrZXlzW2ldKS51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuc3RyaW5nKG1lc3NhZ2UudmFyaWFibGVzSnNvbltrZXlzW2ldXSkubGRlbGltKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGV0YWlscyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5EZXRhaWxzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5EZXRhaWxzXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JRGV0YWlsc30gbWVzc2FnZSBEZXRhaWxzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgRGV0YWlscy5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIERldGFpbHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRGV0YWlsc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuRGV0YWlsc30gRGV0YWlsc1xuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIERldGFpbHMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuRGV0YWlscygpLCBrZXk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwKCkucG9zKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnZhcmlhYmxlc0pzb24gPT09ICR1dGlsLmVtcHR5T2JqZWN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YXJpYWJsZXNKc29uID0ge307XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhcmlhYmxlc0pzb25ba2V5XSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9wZXJhdGlvbk5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBEZXRhaWxzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkRldGFpbHNcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkRldGFpbHN9IERldGFpbHNcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBEZXRhaWxzLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhIERldGFpbHMgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRGV0YWlsc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgRGV0YWlscy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS52YXJpYWJsZXNKc29uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInZhcmlhYmxlc0pzb25cIikpIHtcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzT2JqZWN0KG1lc3NhZ2UudmFyaWFibGVzSnNvbikpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInZhcmlhYmxlc0pzb246IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnZhcmlhYmxlc0pzb24pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudmFyaWFibGVzSnNvbltrZXlbaV1dKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInZhcmlhYmxlc0pzb246IHN0cmluZ3trOnN0cmluZ30gZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9wZXJhdGlvbk5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib3BlcmF0aW9uTmFtZVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uub3BlcmF0aW9uTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9wZXJhdGlvbk5hbWU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIERldGFpbHMgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkRldGFpbHNcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLkRldGFpbHN9IG1lc3NhZ2UgRGV0YWlsc1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIERldGFpbHMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMub2JqZWN0cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgIG9iamVjdC52YXJpYWJsZXNKc29uID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgICAgICBvYmplY3Qub3BlcmF0aW9uTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5vcGVyYXRpb25OYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9wZXJhdGlvbk5hbWVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm9wZXJhdGlvbk5hbWUgPSBtZXNzYWdlLm9wZXJhdGlvbk5hbWU7XG4gICAgICAgICAgICB2YXIga2V5czI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS52YXJpYWJsZXNKc29uICYmIChrZXlzMiA9IE9iamVjdC5rZXlzKG1lc3NhZ2UudmFyaWFibGVzSnNvbikpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC52YXJpYWJsZXNKc29uID0ge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzMi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnZhcmlhYmxlc0pzb25ba2V5czJbal1dID0gbWVzc2FnZS52YXJpYWJsZXNKc29uW2tleXMyW2pdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgRGV0YWlscyB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5EZXRhaWxzXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBEZXRhaWxzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gRGV0YWlscztcbiAgICB9KSgpO1xuXG4gICAgVHJhY2UuRXJyb3IgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gRXJyb3IuXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAgICAgKiBAaW50ZXJmYWNlIElFcnJvclxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbbWVzc2FnZV0gRXJyb3IgbWVzc2FnZVxuICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxUcmFjZS5JTG9jYXRpb24+fG51bGx9IFtsb2NhdGlvbl0gRXJyb3IgbG9jYXRpb25cbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3RpbWVOc10gRXJyb3IgdGltZU5zXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtqc29uXSBFcnJvciBqc29uXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEVycm9yLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIEVycm9yLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJRXJyb3JcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUVycm9yPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBFcnJvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gW107XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gbWVzc2FnZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBFcnJvci5wcm90b3R5cGUubWVzc2FnZSA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVycm9yIGxvY2F0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48VHJhY2UuSUxvY2F0aW9uPn0gbG9jYXRpb25cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkVycm9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IucHJvdG90eXBlLmxvY2F0aW9uID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRXJyb3IgdGltZU5zLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHRpbWVOc1xuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBFcnJvci5wcm90b3R5cGUudGltZU5zID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRXJyb3IganNvbi5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBqc29uXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5FcnJvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLnByb3RvdHlwZS5qc29uID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBFcnJvciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkVycm9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JRXJyb3I9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkVycm9yfSBFcnJvciBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBFcnJvciBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5FcnJvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklFcnJvcn0gbWVzc2FnZSBFcnJvciBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtZXNzYWdlXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UubWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sb2NhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UubG9jYXRpb24ubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5sb2NhdGlvbi5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuTG9jYXRpb24uZW5jb2RlKG1lc3NhZ2UubG9jYXRpb25baV0sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRpbWVOcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidGltZU5zXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMCA9Ki8yNCkudWludDY0KG1lc3NhZ2UudGltZU5zKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmpzb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImpzb25cIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5zdHJpbmcobWVzc2FnZS5qc29uKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBFcnJvciBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5FcnJvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklFcnJvcn0gbWVzc2FnZSBFcnJvciBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGFuIEVycm9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkVycm9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5FcnJvcn0gRXJyb3JcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBFcnJvci5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5FcnJvcigpO1xuICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2UgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5sb2NhdGlvbiAmJiBtZXNzYWdlLmxvY2F0aW9uLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxvY2F0aW9uID0gW107XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubG9jYXRpb24ucHVzaCgkcm9vdC5UcmFjZS5Mb2NhdGlvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWVOcyA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmpzb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYW4gRXJyb3IgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkVycm9yfSBFcnJvclxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhbiBFcnJvciBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5FcnJvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJtZXNzYWdlXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5tZXNzYWdlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibWVzc2FnZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sb2NhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsb2NhdGlvblwiKSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLmxvY2F0aW9uKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibG9jYXRpb246IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmxvY2F0aW9uLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLkxvY2F0aW9uLnZlcmlmeShtZXNzYWdlLmxvY2F0aW9uW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibG9jYXRpb24uXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50aW1lTnMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidGltZU5zXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UudGltZU5zKSAmJiAhKG1lc3NhZ2UudGltZU5zICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnRpbWVOcy5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnRpbWVOcy5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRpbWVOczogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5qc29uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImpzb25cIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmpzb24pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJqc29uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYW4gRXJyb3IgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkVycm9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5FcnJvcn0gbWVzc2FnZSBFcnJvclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgIG9iamVjdC5sb2NhdGlvbiA9IFtdO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QubWVzc2FnZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnRpbWVOcyA9IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0Lmpzb24gPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJtZXNzYWdlXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5tZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubG9jYXRpb24gJiYgbWVzc2FnZS5sb2NhdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QubG9jYXRpb24gPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UubG9jYXRpb24ubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5sb2NhdGlvbltqXSA9ICRyb290LlRyYWNlLkxvY2F0aW9uLnRvT2JqZWN0KG1lc3NhZ2UubG9jYXRpb25bal0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGltZU5zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRpbWVOc1wiKSlcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UudGltZU5zID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZU5zID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UudGltZU5zKSA6IG1lc3NhZ2UudGltZU5zO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRpbWVOcyA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS50aW1lTnMpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UudGltZU5zLmxvdyA+Pj4gMCwgbWVzc2FnZS50aW1lTnMuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLnRpbWVOcztcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmpzb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwianNvblwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuanNvbiA9IG1lc3NhZ2UuanNvbjtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgRXJyb3IgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gRXJyb3I7XG4gICAgfSkoKTtcblxuICAgIFRyYWNlLkhUVFAgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBIVFRQLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGludGVyZmFjZSBJSFRUUFxuICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLkhUVFAuTWV0aG9kfG51bGx9IFttZXRob2RdIEhUVFAgbWV0aG9kXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsVHJhY2UuSFRUUC5JVmFsdWVzPnxudWxsfSBbcmVxdWVzdEhlYWRlcnNdIEhUVFAgcmVxdWVzdEhlYWRlcnNcbiAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZyxUcmFjZS5IVFRQLklWYWx1ZXM+fG51bGx9IFtyZXNwb25zZUhlYWRlcnNdIEhUVFAgcmVzcG9uc2VIZWFkZXJzXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtzdGF0dXNDb2RlXSBIVFRQIHN0YXR1c0NvZGVcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgSFRUUC5cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEhUVFAuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElIVFRQXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklIVFRQPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBIVFRQKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdEhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VIZWFkZXJzID0ge307XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhUVFAgbWV0aG9kLlxuICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5IVFRQLk1ldGhvZH0gbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgSFRUUC5wcm90b3R5cGUubWV0aG9kID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSFRUUCByZXF1ZXN0SGVhZGVycy5cbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsVHJhY2UuSFRUUC5JVmFsdWVzPn0gcmVxdWVzdEhlYWRlcnNcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLnByb3RvdHlwZS5yZXF1ZXN0SGVhZGVycyA9ICR1dGlsLmVtcHR5T2JqZWN0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIVFRQIHJlc3BvbnNlSGVhZGVycy5cbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsVHJhY2UuSFRUUC5JVmFsdWVzPn0gcmVzcG9uc2VIZWFkZXJzXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgSFRUUC5wcm90b3R5cGUucmVzcG9uc2VIZWFkZXJzID0gJHV0aWwuZW1wdHlPYmplY3Q7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhUVFAgc3RhdHVzQ29kZS5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBzdGF0dXNDb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgSFRUUC5wcm90b3R5cGUuc3RhdHVzQ29kZSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgSFRUUCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklIVFRQPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5IVFRQfSBIVFRQIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEhUVFAocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBIVFRQIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkhUVFAudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklIVFRQfSBtZXNzYWdlIEhUVFAgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm1ldGhvZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS5tZXRob2QpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdEhlYWRlcnMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RIZWFkZXJzXCIpKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlcXVlc3RIZWFkZXJzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcoa2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLkhUVFAuVmFsdWVzLmVuY29kZShtZXNzYWdlLnJlcXVlc3RIZWFkZXJzW2tleXNbaV1dLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZXNwb25zZUhlYWRlcnNcIikpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcoa2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLkhUVFAuVmFsdWVzLmVuY29kZShtZXNzYWdlLnJlc3BvbnNlSGVhZGVyc1trZXlzW2ldXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXR1c0NvZGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0YXR1c0NvZGVcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAwID0qLzQ4KS51aW50MzIobWVzc2FnZS5zdGF0dXNDb2RlKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBIVFRQIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkhUVFAudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklIVFRQfSBtZXNzYWdlIEhUVFAgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgSFRUUCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5IVFRQfSBIVFRQXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgSFRUUC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5IVFRQKCksIGtleTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXRob2QgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcCgpLnBvcysrO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0SGVhZGVycyA9PT0gJHV0aWwuZW1wdHlPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RIZWFkZXJzID0ge307XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RIZWFkZXJzW2tleV0gPSAkcm9vdC5UcmFjZS5IVFRQLlZhbHVlcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwKCkucG9zKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlc3BvbnNlSGVhZGVycyA9PT0gJHV0aWwuZW1wdHlPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3BvbnNlSGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5wb3MrKztcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXNwb25zZUhlYWRlcnNba2V5XSA9ICRyb290LlRyYWNlLkhUVFAuVmFsdWVzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGF0dXNDb2RlID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgSFRUUCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5IVFRQfSBIVFRQXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgSFRUUC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBIVFRQIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIEhUVFAudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWV0aG9kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1ldGhvZFwiKSlcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UubWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibWV0aG9kOiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0SGVhZGVycyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXF1ZXN0SGVhZGVyc1wiKSkge1xuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNPYmplY3QobWVzc2FnZS5yZXF1ZXN0SGVhZGVycykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlcXVlc3RIZWFkZXJzOiBvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gT2JqZWN0LmtleXMobWVzc2FnZS5yZXF1ZXN0SGVhZGVycyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuSFRUUC5WYWx1ZXMudmVyaWZ5KG1lc3NhZ2UucmVxdWVzdEhlYWRlcnNba2V5W2ldXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlcXVlc3RIZWFkZXJzLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlc3BvbnNlSGVhZGVyc1wiKSkge1xuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNPYmplY3QobWVzc2FnZS5yZXNwb25zZUhlYWRlcnMpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXNwb25zZUhlYWRlcnM6IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlc3BvbnNlSGVhZGVycyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuSFRUUC5WYWx1ZXMudmVyaWZ5KG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzW2tleVtpXV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXNwb25zZUhlYWRlcnMuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXNDb2RlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXR1c0NvZGVcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zdGF0dXNDb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RhdHVzQ29kZTogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIEhUVFAgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLkhUVFB9IG1lc3NhZ2UgSFRUUFxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEhUVFAudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMub2JqZWN0cyB8fCBvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RIZWFkZXJzID0ge307XG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlc3BvbnNlSGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QubWV0aG9kID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJVTktOT1dOXCIgOiAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdGF0dXNDb2RlID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1ldGhvZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJtZXRob2RcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm1ldGhvZCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/ICRyb290LlRyYWNlLkhUVFAuTWV0aG9kW21lc3NhZ2UubWV0aG9kXSA6IG1lc3NhZ2UubWV0aG9kO1xuICAgICAgICAgICAgdmFyIGtleXMyO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdEhlYWRlcnMgJiYgKGtleXMyID0gT2JqZWN0LmtleXMobWVzc2FnZS5yZXF1ZXN0SGVhZGVycykpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0SGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5czIubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0SGVhZGVyc1trZXlzMltqXV0gPSAkcm9vdC5UcmFjZS5IVFRQLlZhbHVlcy50b09iamVjdChtZXNzYWdlLnJlcXVlc3RIZWFkZXJzW2tleXMyW2pdXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZUhlYWRlcnMgJiYgKGtleXMyID0gT2JqZWN0LmtleXMobWVzc2FnZS5yZXNwb25zZUhlYWRlcnMpKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QucmVzcG9uc2VIZWFkZXJzID0ge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzMi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlc3BvbnNlSGVhZGVyc1trZXlzMltqXV0gPSAkcm9vdC5UcmFjZS5IVFRQLlZhbHVlcy50b09iamVjdChtZXNzYWdlLnJlc3BvbnNlSGVhZGVyc1trZXlzMltqXV0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzQ29kZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGF0dXNDb2RlXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5zdGF0dXNDb2RlID0gbWVzc2FnZS5zdGF0dXNDb2RlO1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydHMgdGhpcyBIVFRQIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEhUVFAucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIEhUVFAuVmFsdWVzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBWYWx1ZXMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUFxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJVmFsdWVzXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxzdHJpbmc+fG51bGx9IFt2YWx1ZV0gVmFsdWVzIHZhbHVlXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFZhbHVlcy5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBWYWx1ZXMuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVmFsdWVzXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSFRUUC5JVmFsdWVzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIFZhbHVlcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmFsdWVzIHZhbHVlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHN0cmluZz59IHZhbHVlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUC5WYWx1ZXNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBWYWx1ZXMucHJvdG90eXBlLnZhbHVlID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFZhbHVlcyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUC5WYWx1ZXNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSFRUUC5JVmFsdWVzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuSFRUUC5WYWx1ZXN9IFZhbHVlcyBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBWYWx1ZXMuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZhbHVlcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFZhbHVlcyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5IVFRQLlZhbHVlcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQLlZhbHVlc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5IVFRQLklWYWx1ZXN9IG1lc3NhZ2UgVmFsdWVzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFZhbHVlcy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT0gbnVsbCAmJiBtZXNzYWdlLnZhbHVlLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnZhbHVlLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS52YWx1ZVtpXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFZhbHVlcyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5IVFRQLlZhbHVlcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQLlZhbHVlc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5IVFRQLklWYWx1ZXN9IG1lc3NhZ2UgVmFsdWVzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFZhbHVlcy5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBWYWx1ZXMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQLlZhbHVlc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLkhUVFAuVmFsdWVzfSBWYWx1ZXNcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVmFsdWVzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLkhUVFAuVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS52YWx1ZSAmJiBtZXNzYWdlLnZhbHVlLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZS5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgVmFsdWVzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUC5WYWx1ZXNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLkhUVFAuVmFsdWVzfSBWYWx1ZXNcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVmFsdWVzLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFZhbHVlcyBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFAuVmFsdWVzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFZhbHVlcy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS52YWx1ZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS52YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ2YWx1ZTogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnZhbHVlLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnZhbHVlW2ldKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ2YWx1ZTogc3RyaW5nW10gZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFZhbHVlcyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQLlZhbHVlc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5IVFRQLlZhbHVlc30gbWVzc2FnZSBWYWx1ZXNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVmFsdWVzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hcnJheXMgfHwgb3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnZhbHVlID0gW107XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgJiYgbWVzc2FnZS52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnZhbHVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS52YWx1ZS5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC52YWx1ZVtqXSA9IG1lc3NhZ2UudmFsdWVbal07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgVmFsdWVzIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUC5WYWx1ZXNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBWYWx1ZXMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBWYWx1ZXM7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1ldGhvZCBlbnVtLlxuICAgICAgICAgKiBAbmFtZSBUcmFjZS5IVFRQLk1ldGhvZFxuICAgICAgICAgKiBAZW51bSB7c3RyaW5nfVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gVU5LTk9XTj0wIFVOS05PV04gdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE9QVElPTlM9MSBPUFRJT05TIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHRVQ9MiBHRVQgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEhFQUQ9MyBIRUFEIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBQT1NUPTQgUE9TVCB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUFVUPTUgUFVUIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBERUxFVEU9NiBERUxFVEUgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFRSQUNFPTcgVFJBQ0UgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IENPTk5FQ1Q9OCBDT05ORUNUIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBQQVRDSD05IFBBVENIIHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLk1ldGhvZCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiVU5LTk9XTlwiXSA9IDA7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiT1BUSU9OU1wiXSA9IDE7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiR0VUXCJdID0gMjtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzNdID0gXCJIRUFEXCJdID0gMztcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzRdID0gXCJQT1NUXCJdID0gNDtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzVdID0gXCJQVVRcIl0gPSA1O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNl0gPSBcIkRFTEVURVwiXSA9IDY7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs3XSA9IFwiVFJBQ0VcIl0gPSA3O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbOF0gPSBcIkNPTk5FQ1RcIl0gPSA4O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbOV0gPSBcIlBBVENIXCJdID0gOTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgcmV0dXJuIEhUVFA7XG4gICAgfSkoKTtcblxuICAgIFRyYWNlLkxvY2F0aW9uID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgTG9jYXRpb24uXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAgICAgKiBAaW50ZXJmYWNlIElMb2NhdGlvblxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbbGluZV0gTG9jYXRpb24gbGluZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbY29sdW1uXSBMb2NhdGlvbiBjb2x1bW5cbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTG9jYXRpb24uXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBMb2NhdGlvbi5cbiAgICAgICAgICogQGltcGxlbWVudHMgSUxvY2F0aW9uXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklMb2NhdGlvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gTG9jYXRpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2NhdGlvbiBsaW5lLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGxpbmVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkxvY2F0aW9uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgTG9jYXRpb24ucHJvdG90eXBlLmxpbmUgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2NhdGlvbiBjb2x1bW4uXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gY29sdW1uXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Mb2NhdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIExvY2F0aW9uLnByb3RvdHlwZS5jb2x1bW4gPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IExvY2F0aW9uIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTG9jYXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklMb2NhdGlvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuTG9jYXRpb259IExvY2F0aW9uIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBMb2NhdGlvbi5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIExvY2F0aW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkxvY2F0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Mb2NhdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUxvY2F0aW9ufSBtZXNzYWdlIExvY2F0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgTG9jYXRpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxpbmUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxpbmVcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLnVpbnQzMihtZXNzYWdlLmxpbmUpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29sdW1uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjb2x1bW5cIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS51aW50MzIobWVzc2FnZS5jb2x1bW4pO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIExvY2F0aW9uIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkxvY2F0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Mb2NhdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUxvY2F0aW9ufSBtZXNzYWdlIExvY2F0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgTG9jYXRpb24uZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBMb2NhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Mb2NhdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuTG9jYXRpb259IExvY2F0aW9uXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgTG9jYXRpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuTG9jYXRpb24oKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5saW5lID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29sdW1uID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgTG9jYXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTG9jYXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkxvY2F0aW9ufSBMb2NhdGlvblxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIExvY2F0aW9uLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhIExvY2F0aW9uIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkxvY2F0aW9uXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAqL1xuICAgICAgICBMb2NhdGlvbi52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5saW5lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxpbmVcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5saW5lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibGluZTogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29sdW1uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbHVtblwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmNvbHVtbikpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbHVtbjogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIExvY2F0aW9uIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Mb2NhdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuTG9jYXRpb259IG1lc3NhZ2UgTG9jYXRpb25cbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBMb2NhdGlvbi50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5saW5lID0gMDtcbiAgICAgICAgICAgICAgICBvYmplY3QuY29sdW1uID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxpbmUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibGluZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QubGluZSA9IG1lc3NhZ2UubGluZTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbHVtbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb2x1bW5cIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNvbHVtbiA9IG1lc3NhZ2UuY29sdW1uO1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydHMgdGhpcyBMb2NhdGlvbiB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Mb2NhdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgTG9jYXRpb24ucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBMb2NhdGlvbjtcbiAgICB9KSgpO1xuXG4gICAgVHJhY2UuTm9kZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhIE5vZGUuXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAgICAgKiBAaW50ZXJmYWNlIElOb2RlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtyZXNwb25zZU5hbWVdIE5vZGUgcmVzcG9uc2VOYW1lXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtpbmRleF0gTm9kZSBpbmRleFxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbb3JpZ2luYWxGaWVsZE5hbWVdIE5vZGUgb3JpZ2luYWxGaWVsZE5hbWVcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3R5cGVdIE5vZGUgdHlwZVxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbcGFyZW50VHlwZV0gTm9kZSBwYXJlbnRUeXBlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSUNhY2hlUG9saWN5fG51bGx9IFtjYWNoZVBvbGljeV0gTm9kZSBjYWNoZVBvbGljeVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbc3RhcnRUaW1lXSBOb2RlIHN0YXJ0VGltZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZW5kVGltZV0gTm9kZSBlbmRUaW1lXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPFRyYWNlLklFcnJvcj58bnVsbH0gW2Vycm9yXSBOb2RlIGVycm9yXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPFRyYWNlLklOb2RlPnxudWxsfSBbY2hpbGRdIE5vZGUgY2hpbGRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTm9kZS5cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIE5vZGUuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElOb2RlXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklOb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBOb2RlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGQgPSBbXTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSByZXNwb25zZU5hbWUuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gcmVzcG9uc2VOYW1lXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS5wcm90b3R5cGUucmVzcG9uc2VOYW1lID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBpbmRleC5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBpbmRleFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUucHJvdG90eXBlLmluZGV4ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBvcmlnaW5hbEZpZWxkTmFtZS5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBvcmlnaW5hbEZpZWxkTmFtZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUucHJvdG90eXBlLm9yaWdpbmFsRmllbGROYW1lID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSB0eXBlLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHR5cGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnByb3RvdHlwZS50eXBlID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBwYXJlbnRUeXBlLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHBhcmVudFR5cGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnByb3RvdHlwZS5wYXJlbnRUeXBlID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBjYWNoZVBvbGljeS5cbiAgICAgICAgICogQG1lbWJlciB7VHJhY2UuSUNhY2hlUG9saWN5fG51bGx8dW5kZWZpbmVkfSBjYWNoZVBvbGljeVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUucHJvdG90eXBlLmNhY2hlUG9saWN5ID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBzdGFydFRpbWUuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gc3RhcnRUaW1lXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS5wcm90b3R5cGUuc3RhcnRUaW1lID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBlbmRUaW1lLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGVuZFRpbWVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnByb3RvdHlwZS5lbmRUaW1lID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBlcnJvci5cbiAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPFRyYWNlLklFcnJvcj59IGVycm9yXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS5wcm90b3R5cGUuZXJyb3IgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOb2RlIGNoaWxkLlxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48VHJhY2UuSU5vZGU+fSBjaGlsZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUucHJvdG90eXBlLmNoaWxkID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAvLyBPbmVPZiBmaWVsZCBuYW1lcyBib3VuZCB0byB2aXJ0dWFsIGdldHRlcnMgYW5kIHNldHRlcnNcbiAgICAgICAgdmFyICRvbmVPZkZpZWxkcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBpZC5cbiAgICAgICAgICogQG1lbWJlciB7XCJyZXNwb25zZU5hbWVcInxcImluZGV4XCJ8dW5kZWZpbmVkfSBpZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb2RlLnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgICAgICBnZXQ6ICR1dGlsLm9uZU9mR2V0dGVyKCRvbmVPZkZpZWxkcyA9IFtcInJlc3BvbnNlTmFtZVwiLCBcImluZGV4XCJdKSxcbiAgICAgICAgICAgIHNldDogJHV0aWwub25lT2ZTZXR0ZXIoJG9uZU9mRmllbGRzKVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBOb2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSU5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLk5vZGV9IE5vZGUgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9kZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE5vZGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSU5vZGV9IG1lc3NhZ2UgTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlc3BvbnNlTmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVzcG9uc2VOYW1lXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UucmVzcG9uc2VOYW1lKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbmRleFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLnVpbnQzMihtZXNzYWdlLmluZGV4KTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInR5cGVcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5zdHJpbmcobWVzc2FnZS50eXBlKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNhY2hlUG9saWN5ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjYWNoZVBvbGljeVwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5DYWNoZVBvbGljeS5lbmNvZGUobWVzc2FnZS5jYWNoZVBvbGljeSwgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRUaW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydFRpbWVcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAwID0qLzY0KS51aW50NjQobWVzc2FnZS5zdGFydFRpbWUpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZW5kVGltZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDksIHdpcmVUeXBlIDAgPSovNzIpLnVpbnQ2NChtZXNzYWdlLmVuZFRpbWUpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3IgIT0gbnVsbCAmJiBtZXNzYWdlLmVycm9yLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuZXJyb3IubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLkVycm9yLmVuY29kZShtZXNzYWdlLmVycm9yW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDExLCB3aXJlVHlwZSAyID0qLzkwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2hpbGQgIT0gbnVsbCAmJiBtZXNzYWdlLmNoaWxkLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuY2hpbGQubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLk5vZGUuZW5jb2RlKG1lc3NhZ2UuY2hpbGRbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMTIsIHdpcmVUeXBlIDIgPSovOTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wYXJlbnRUeXBlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwYXJlbnRUeXBlXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTMsIHdpcmVUeXBlIDIgPSovMTA2KS5zdHJpbmcobWVzc2FnZS5wYXJlbnRUeXBlKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9yaWdpbmFsRmllbGROYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJvcmlnaW5hbEZpZWxkTmFtZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDE0LCB3aXJlVHlwZSAyID0qLzExNCkuc3RyaW5nKG1lc3NhZ2Uub3JpZ2luYWxGaWVsZE5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE5vZGUgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSU5vZGV9IG1lc3NhZ2UgTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBOb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLk5vZGV9IE5vZGVcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLk5vZGUoKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXNwb25zZU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vcmlnaW5hbEZpZWxkTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnR5cGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFyZW50VHlwZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhY2hlUG9saWN5ID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0VGltZSA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZFRpbWUgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UuZXJyb3IgJiYgbWVzc2FnZS5lcnJvci5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yLnB1c2goJHJvb3QuVHJhY2UuRXJyb3IuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UuY2hpbGQgJiYgbWVzc2FnZS5jaGlsZC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jaGlsZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNoaWxkLnB1c2goJHJvb3QuVHJhY2UuTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIE5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuTm9kZX0gTm9kZVxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgTm9kZSBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZU5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVzcG9uc2VOYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5pZCA9IDE7XG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnJlc3BvbnNlTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlc3BvbnNlTmFtZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmlkID09PSAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpZDogbXVsdGlwbGUgdmFsdWVzXCI7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5pZCA9IDE7XG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5pbmRleCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5vcmlnaW5hbEZpZWxkTmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJvcmlnaW5hbEZpZWxkTmFtZVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uub3JpZ2luYWxGaWVsZE5hbWUpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvcmlnaW5hbEZpZWxkTmFtZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInR5cGVcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnR5cGUpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0eXBlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhcmVudFR5cGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGFyZW50VHlwZVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UucGFyZW50VHlwZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInBhcmVudFR5cGU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVQb2xpY3kgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2FjaGVQb2xpY3lcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5UcmFjZS5DYWNoZVBvbGljeS52ZXJpZnkobWVzc2FnZS5jYWNoZVBvbGljeSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjYWNoZVBvbGljeS5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0VGltZVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnN0YXJ0VGltZSkgJiYgIShtZXNzYWdlLnN0YXJ0VGltZSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zdGFydFRpbWUubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zdGFydFRpbWUuaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGFydFRpbWU6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRUaW1lXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZW5kVGltZSkgJiYgIShtZXNzYWdlLmVuZFRpbWUgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZW5kVGltZS5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVuZFRpbWUuaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmRUaW1lOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVycm9yICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVycm9yXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UuZXJyb3IpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvcjogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuZXJyb3IubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuRXJyb3IudmVyaWZ5KG1lc3NhZ2UuZXJyb3JbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvci5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNoaWxkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNoaWxkXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UuY2hpbGQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjaGlsZDogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuY2hpbGQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuTm9kZS52ZXJpZnkobWVzc2FnZS5jaGlsZFtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNoaWxkLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIE5vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLk5vZGV9IG1lc3NhZ2UgTm9kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuZXJyb3IgPSBbXTtcbiAgICAgICAgICAgICAgICBvYmplY3QuY2hpbGQgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnR5cGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG9iamVjdC5jYWNoZVBvbGljeSA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0VGltZSA9IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmVuZFRpbWUgPSAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5wYXJlbnRUeXBlID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3Qub3JpZ2luYWxGaWVsZE5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVzcG9uc2VOYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlc3BvbnNlTmFtZVwiKSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5yZXNwb25zZU5hbWUgPSBtZXNzYWdlLnJlc3BvbnNlTmFtZTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pZCA9IFwicmVzcG9uc2VOYW1lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5pbmRleCA9IG1lc3NhZ2UuaW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaWQgPSBcImluZGV4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInR5cGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnR5cGUgPSBtZXNzYWdlLnR5cGU7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jYWNoZVBvbGljeSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjYWNoZVBvbGljeVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuY2FjaGVQb2xpY3kgPSAkcm9vdC5UcmFjZS5DYWNoZVBvbGljeS50b09iamVjdChtZXNzYWdlLmNhY2hlUG9saWN5LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGFydFRpbWVcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnN0YXJ0VGltZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0VGltZSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnN0YXJ0VGltZSkgOiBtZXNzYWdlLnN0YXJ0VGltZTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdGFydFRpbWUgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2Uuc3RhcnRUaW1lKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnN0YXJ0VGltZS5sb3cgPj4+IDAsIG1lc3NhZ2Uuc3RhcnRUaW1lLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5zdGFydFRpbWU7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5lbmRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVuZFRpbWVcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmVuZFRpbWUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmRUaW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UuZW5kVGltZSkgOiBtZXNzYWdlLmVuZFRpbWU7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW5kVGltZSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5lbmRUaW1lKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLmVuZFRpbWUubG93ID4+PiAwLCBtZXNzYWdlLmVuZFRpbWUuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLmVuZFRpbWU7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5lcnJvciAmJiBtZXNzYWdlLmVycm9yLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5lcnJvciA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5lcnJvci5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVycm9yW2pdID0gJHJvb3QuVHJhY2UuRXJyb3IudG9PYmplY3QobWVzc2FnZS5lcnJvcltqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jaGlsZCAmJiBtZXNzYWdlLmNoaWxkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5jaGlsZCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5jaGlsZC5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNoaWxkW2pdID0gJHJvb3QuVHJhY2UuTm9kZS50b09iamVjdChtZXNzYWdlLmNoaWxkW2pdLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhcmVudFR5cGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGFyZW50VHlwZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QucGFyZW50VHlwZSA9IG1lc3NhZ2UucGFyZW50VHlwZTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9yaWdpbmFsRmllbGROYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9yaWdpbmFsRmllbGROYW1lXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5vcmlnaW5hbEZpZWxkTmFtZSA9IG1lc3NhZ2Uub3JpZ2luYWxGaWVsZE5hbWU7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIE5vZGUgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIE5vZGU7XG4gICAgfSkoKTtcblxuICAgIFRyYWNlLlF1ZXJ5UGxhbk5vZGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBRdWVyeVBsYW5Ob2RlLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGludGVyZmFjZSBJUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSVNlcXVlbmNlTm9kZXxudWxsfSBbc2VxdWVuY2VdIFF1ZXJ5UGxhbk5vZGUgc2VxdWVuY2VcbiAgICAgICAgICogQHByb3BlcnR5IHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklQYXJhbGxlbE5vZGV8bnVsbH0gW3BhcmFsbGVsXSBRdWVyeVBsYW5Ob2RlIHBhcmFsbGVsXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRmV0Y2hOb2RlfG51bGx9IFtmZXRjaF0gUXVlcnlQbGFuTm9kZSBmZXRjaFxuICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUZsYXR0ZW5Ob2RlfG51bGx9IFtmbGF0dGVuXSBRdWVyeVBsYW5Ob2RlIGZsYXR0ZW5cbiAgICAgICAgICogQHByb3BlcnR5IHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGV8bnVsbH0gW2RlZmVyXSBRdWVyeVBsYW5Ob2RlIGRlZmVyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JQ29uZGl0aW9uTm9kZXxudWxsfSBbY29uZGl0aW9uXSBRdWVyeVBsYW5Ob2RlIGNvbmRpdGlvblxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBRdWVyeVBsYW5Ob2RlLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUXVlcnlQbGFuTm9kZS5cbiAgICAgICAgICogQGltcGxlbWVudHMgSVF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIFF1ZXJ5UGxhbk5vZGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBRdWVyeVBsYW5Ob2RlIHNlcXVlbmNlLlxuICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklTZXF1ZW5jZU5vZGV8bnVsbHx1bmRlZmluZWR9IHNlcXVlbmNlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5wcm90b3R5cGUuc2VxdWVuY2UgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBRdWVyeVBsYW5Ob2RlIHBhcmFsbGVsLlxuICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklQYXJhbGxlbE5vZGV8bnVsbHx1bmRlZmluZWR9IHBhcmFsbGVsXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5wcm90b3R5cGUucGFyYWxsZWwgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBRdWVyeVBsYW5Ob2RlIGZldGNoLlxuICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGZXRjaE5vZGV8bnVsbHx1bmRlZmluZWR9IGZldGNoXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5wcm90b3R5cGUuZmV0Y2ggPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBRdWVyeVBsYW5Ob2RlIGZsYXR0ZW4uXG4gICAgICAgICAqIEBtZW1iZXIge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUZsYXR0ZW5Ob2RlfG51bGx8dW5kZWZpbmVkfSBmbGF0dGVuXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5wcm90b3R5cGUuZmxhdHRlbiA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFF1ZXJ5UGxhbk5vZGUgZGVmZXIuXG4gICAgICAgICAqIEBtZW1iZXIge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVyTm9kZXxudWxsfHVuZGVmaW5lZH0gZGVmZXJcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBRdWVyeVBsYW5Ob2RlLnByb3RvdHlwZS5kZWZlciA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFF1ZXJ5UGxhbk5vZGUgY29uZGl0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklDb25kaXRpb25Ob2RlfG51bGx8dW5kZWZpbmVkfSBjb25kaXRpb25cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBRdWVyeVBsYW5Ob2RlLnByb3RvdHlwZS5jb25kaXRpb24gPSBudWxsO1xuXG4gICAgICAgIC8vIE9uZU9mIGZpZWxkIG5hbWVzIGJvdW5kIHRvIHZpcnR1YWwgZ2V0dGVycyBhbmQgc2V0dGVyc1xuICAgICAgICB2YXIgJG9uZU9mRmllbGRzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBRdWVyeVBsYW5Ob2RlIG5vZGUuXG4gICAgICAgICAqIEBtZW1iZXIge1wic2VxdWVuY2VcInxcInBhcmFsbGVsXCJ8XCJmZXRjaFwifFwiZmxhdHRlblwifFwiZGVmZXJcInxcImNvbmRpdGlvblwifHVuZGVmaW5lZH0gbm9kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVBsYW5Ob2RlLnByb3RvdHlwZSwgXCJub2RlXCIsIHtcbiAgICAgICAgICAgIGdldDogJHV0aWwub25lT2ZHZXR0ZXIoJG9uZU9mRmllbGRzID0gW1wic2VxdWVuY2VcIiwgXCJwYXJhbGxlbFwiLCBcImZldGNoXCIsIFwiZmxhdHRlblwiLCBcImRlZmVyXCIsIFwiY29uZGl0aW9uXCJdKSxcbiAgICAgICAgICAgIHNldDogJHV0aWwub25lT2ZTZXR0ZXIoJG9uZU9mRmllbGRzKVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBRdWVyeVBsYW5Ob2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGV9IFF1ZXJ5UGxhbk5vZGUgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnlQbGFuTm9kZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5UGxhbk5vZGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGV9IG1lc3NhZ2UgUXVlcnlQbGFuTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcXVlbmNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzZXF1ZW5jZVwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZS5lbmNvZGUobWVzc2FnZS5zZXF1ZW5jZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGFyYWxsZWwgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBhcmFsbGVsXCIpKVxuICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlLmVuY29kZShtZXNzYWdlLnBhcmFsbGVsLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5mZXRjaCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZmV0Y2hcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGUuZW5jb2RlKG1lc3NhZ2UuZmV0Y2gsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmZsYXR0ZW4gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImZsYXR0ZW5cIikpXG4gICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZS5lbmNvZGUobWVzc2FnZS5mbGF0dGVuLCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kZWZlciAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGVmZXJcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGUuZW5jb2RlKG1lc3NhZ2UuZGVmZXIsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbmRpdGlvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY29uZGl0aW9uXCIpKVxuICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZS5lbmNvZGUobWVzc2FnZS5jb25kaXRpb24sIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeVBsYW5Ob2RlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklRdWVyeVBsYW5Ob2RlfSBtZXNzYWdlIFF1ZXJ5UGxhbk5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBRdWVyeVBsYW5Ob2RlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlQbGFuTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlfSBRdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VxdWVuY2UgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFyYWxsZWwgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmV0Y2ggPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmxhdHRlbiA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlZmVyID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbmRpdGlvbiA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlQbGFuTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlfSBRdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBRdWVyeVBsYW5Ob2RlIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcXVlbmNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNlcXVlbmNlXCIpKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5ub2RlID0gMTtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlLnZlcmlmeShtZXNzYWdlLnNlcXVlbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2VxdWVuY2UuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wYXJhbGxlbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwYXJhbGxlbFwiKSkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm5vZGUgPT09IDEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGU6IG11bHRpcGxlIHZhbHVlc1wiO1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubm9kZSA9IDE7XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZS52ZXJpZnkobWVzc2FnZS5wYXJhbGxlbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInBhcmFsbGVsLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZmV0Y2ggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZmV0Y2hcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5ub2RlID09PSAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlOiBtdWx0aXBsZSB2YWx1ZXNcIjtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm5vZGUgPSAxO1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGUudmVyaWZ5KG1lc3NhZ2UuZmV0Y2gpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmZXRjaC5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmZsYXR0ZW4gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZmxhdHRlblwiKSkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm5vZGUgPT09IDEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGU6IG11bHRpcGxlIHZhbHVlc1wiO1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubm9kZSA9IDE7XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlLnZlcmlmeShtZXNzYWdlLmZsYXR0ZW4pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmbGF0dGVuLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVmZXIgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGVmZXJcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5ub2RlID09PSAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlOiBtdWx0aXBsZSB2YWx1ZXNcIjtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm5vZGUgPSAxO1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGUudmVyaWZ5KG1lc3NhZ2UuZGVmZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZWZlci5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbmRpdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb25kaXRpb25cIikpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5ub2RlID09PSAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlOiBtdWx0aXBsZSB2YWx1ZXNcIjtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm5vZGUgPSAxO1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlLnZlcmlmeShtZXNzYWdlLmNvbmRpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbmRpdGlvbi5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBRdWVyeVBsYW5Ob2RlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlfSBtZXNzYWdlIFF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBRdWVyeVBsYW5Ob2RlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcXVlbmNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNlcXVlbmNlXCIpKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnNlcXVlbmNlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGUudG9PYmplY3QobWVzc2FnZS5zZXF1ZW5jZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZSA9IFwic2VxdWVuY2VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhcmFsbGVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBhcmFsbGVsXCIpKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnBhcmFsbGVsID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGUudG9PYmplY3QobWVzc2FnZS5wYXJhbGxlbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZSA9IFwicGFyYWxsZWxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmZldGNoICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZldGNoXCIpKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmZldGNoID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGUudG9PYmplY3QobWVzc2FnZS5mZXRjaCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZSA9IFwiZmV0Y2hcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmZsYXR0ZW4gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZmxhdHRlblwiKSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5mbGF0dGVuID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZS50b09iamVjdChtZXNzYWdlLmZsYXR0ZW4sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSBcImZsYXR0ZW5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlZmVyICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlZmVyXCIpKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmRlZmVyID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGUudG9PYmplY3QobWVzc2FnZS5kZWZlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZSA9IFwiZGVmZXJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbmRpdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb25kaXRpb25cIikpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuY29uZGl0aW9uID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlLnRvT2JqZWN0KG1lc3NhZ2UuY29uZGl0aW9uLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlID0gXCJjb25kaXRpb25cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgUXVlcnlQbGFuTm9kZSB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBRdWVyeVBsYW5Ob2RlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICBRdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU2VxdWVuY2VOb2RlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48VHJhY2UuSVF1ZXJ5UGxhbk5vZGU+fG51bGx9IFtub2Rlc10gU2VxdWVuY2VOb2RlIG5vZGVzXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFNlcXVlbmNlTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBTZXF1ZW5jZU5vZGUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JU2VxdWVuY2VOb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIFNlcXVlbmNlTm9kZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2VxdWVuY2VOb2RlIG5vZGVzLlxuICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPFRyYWNlLklRdWVyeVBsYW5Ob2RlPn0gbm9kZXNcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS5wcm90b3R5cGUubm9kZXMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgU2VxdWVuY2VOb2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklTZXF1ZW5jZU5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZX0gU2VxdWVuY2VOb2RlIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2VxdWVuY2VOb2RlKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU2VxdWVuY2VOb2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSVNlcXVlbmNlTm9kZX0gbWVzc2FnZSBTZXF1ZW5jZU5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VxdWVuY2VOb2RlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlcyAhPSBudWxsICYmIG1lc3NhZ2Uubm9kZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2Uubm9kZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmVuY29kZShtZXNzYWdlLm5vZGVzW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFNlcXVlbmNlTm9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklTZXF1ZW5jZU5vZGV9IG1lc3NhZ2UgU2VxdWVuY2VOb2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBTZXF1ZW5jZU5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlfSBTZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VxdWVuY2VOb2RlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5ub2RlcyAmJiBtZXNzYWdlLm5vZGVzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2Rlcy5wdXNoKCRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU2VxdWVuY2VOb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlfSBTZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VxdWVuY2VOb2RlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFNlcXVlbmNlTm9kZSBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJub2Rlc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5ub2RlcykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlczogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLm5vZGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnZlcmlmeShtZXNzYWdlLm5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2Rlcy5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBTZXF1ZW5jZU5vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGV9IG1lc3NhZ2UgU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGVzICYmIG1lc3NhZ2Uubm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2Uubm9kZXMubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZXNbal0gPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnRvT2JqZWN0KG1lc3NhZ2Uubm9kZXNbal0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFNlcXVlbmNlTm9kZSB0byBKU09OLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VxdWVuY2VOb2RlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gU2VxdWVuY2VOb2RlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBQYXJhbGxlbE5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxUcmFjZS5JUXVlcnlQbGFuTm9kZT58bnVsbH0gW25vZGVzXSBQYXJhbGxlbE5vZGUgbm9kZXNcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUGFyYWxsZWxOb2RlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFBhcmFsbGVsTm9kZS5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElQYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklQYXJhbGxlbE5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gUGFyYWxsZWxOb2RlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQYXJhbGxlbE5vZGUgbm9kZXMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48VHJhY2UuSVF1ZXJ5UGxhbk5vZGU+fSBub2Rlc1xuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLnByb3RvdHlwZS5ub2RlcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBQYXJhbGxlbE5vZGUgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSVBhcmFsbGVsTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlfSBQYXJhbGxlbE5vZGUgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhbGxlbE5vZGUocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBQYXJhbGxlbE5vZGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JUGFyYWxsZWxOb2RlfSBtZXNzYWdlIFBhcmFsbGVsTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBQYXJhbGxlbE5vZGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGVzICE9IG51bGwgJiYgbWVzc2FnZS5ub2Rlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5ub2Rlcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZW5jb2RlKG1lc3NhZ2Uubm9kZXNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUGFyYWxsZWxOb2RlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSVBhcmFsbGVsTm9kZX0gbWVzc2FnZSBQYXJhbGxlbE5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFBhcmFsbGVsTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGV9IFBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBQYXJhbGxlbE5vZGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGUoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLm5vZGVzICYmIG1lc3NhZ2Uubm9kZXMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5vZGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5vZGVzLnB1c2goJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBQYXJhbGxlbE5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGV9IFBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBQYXJhbGxlbE5vZGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgUGFyYWxsZWxOb2RlIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGVzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm5vZGVzXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLm5vZGVzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGVzOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2Uubm9kZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUudmVyaWZ5KG1lc3NhZ2Uubm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGVzLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFBhcmFsbGVsTm9kZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZX0gbWVzc2FnZSBQYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hcnJheXMgfHwgb3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGVzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZXMgJiYgbWVzc2FnZS5ub2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5ub2Rlcy5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2Rlc1tqXSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUudG9PYmplY3QobWVzc2FnZS5ub2Rlc1tqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgUGFyYWxsZWxOb2RlIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBQYXJhbGxlbE5vZGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBQYXJhbGxlbE5vZGU7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEZldGNoTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElGZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtzZXJ2aWNlTmFtZV0gRmV0Y2hOb2RlIHNlcnZpY2VOYW1lXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW3RyYWNlUGFyc2luZ0ZhaWxlZF0gRmV0Y2hOb2RlIHRyYWNlUGFyc2luZ0ZhaWxlZFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtJVHJhY2V8bnVsbH0gW3RyYWNlXSBGZXRjaE5vZGUgdHJhY2VcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtzZW50VGltZU9mZnNldF0gRmV0Y2hOb2RlIHNlbnRUaW1lT2Zmc2V0XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfG51bGx9IFtzZW50VGltZV0gRmV0Y2hOb2RlIHNlbnRUaW1lXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfG51bGx9IFtyZWNlaXZlZFRpbWVdIEZldGNoTm9kZSByZWNlaXZlZFRpbWVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRmV0Y2hOb2RlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEZldGNoTm9kZS5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElGZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGZXRjaE5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gRmV0Y2hOb2RlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZldGNoTm9kZSBzZXJ2aWNlTmFtZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gc2VydmljZU5hbWVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS5wcm90b3R5cGUuc2VydmljZU5hbWUgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZldGNoTm9kZSB0cmFjZVBhcnNpbmdGYWlsZWQuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufSB0cmFjZVBhcnNpbmdGYWlsZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS5wcm90b3R5cGUudHJhY2VQYXJzaW5nRmFpbGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmV0Y2hOb2RlIHRyYWNlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7SVRyYWNlfG51bGx8dW5kZWZpbmVkfSB0cmFjZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLnByb3RvdHlwZS50cmFjZSA9IG51bGw7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmV0Y2hOb2RlIHNlbnRUaW1lT2Zmc2V0LlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBzZW50VGltZU9mZnNldFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLnByb3RvdHlwZS5zZW50VGltZU9mZnNldCA9IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmV0Y2hOb2RlIHNlbnRUaW1lLlxuICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB8bnVsbHx1bmRlZmluZWR9IHNlbnRUaW1lXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUucHJvdG90eXBlLnNlbnRUaW1lID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBGZXRjaE5vZGUgcmVjZWl2ZWRUaW1lLlxuICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB8bnVsbHx1bmRlZmluZWR9IHJlY2VpdmVkVGltZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLnByb3RvdHlwZS5yZWNlaXZlZFRpbWUgPSBudWxsO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRmV0Y2hOb2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGZXRjaE5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZX0gRmV0Y2hOb2RlIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmV0Y2hOb2RlKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmV0Y2hOb2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUZldGNoTm9kZX0gbWVzc2FnZSBGZXRjaE5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZXJ2aWNlTmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2VydmljZU5hbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2Uuc2VydmljZU5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYWNlUGFyc2luZ0ZhaWxlZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidHJhY2VQYXJzaW5nRmFpbGVkXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmJvb2wobWVzc2FnZS50cmFjZVBhcnNpbmdGYWlsZWQpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYWNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmFjZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuZW5jb2RlKG1lc3NhZ2UudHJhY2UsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZW50VGltZU9mZnNldCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2VudFRpbWVPZmZzZXRcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikudWludDY0KG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlbnRUaW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzZW50VGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5lbmNvZGUobWVzc2FnZS5zZW50VGltZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlY2VpdmVkVGltZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVjZWl2ZWRUaW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmVuY29kZShtZXNzYWdlLnJlY2VpdmVkVGltZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAyID0qLzUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBGZXRjaE5vZGUgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRmV0Y2hOb2RlfSBtZXNzYWdlIEZldGNoTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRmV0Y2hOb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZX0gRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZSgpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VydmljZU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjZVBhcnNpbmdGYWlsZWQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2UgPSAkcm9vdC5UcmFjZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZW50VGltZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlY2VpdmVkVGltZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBGZXRjaE5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGV9IEZldGNoTm9kZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgRmV0Y2hOb2RlIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcnZpY2VOYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNlcnZpY2VOYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uuc2VydmljZU5hbWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2VydmljZU5hbWU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYWNlUGFyc2luZ0ZhaWxlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmFjZVBhcnNpbmdGYWlsZWRcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS50cmFjZVBhcnNpbmdGYWlsZWQgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhY2VQYXJzaW5nRmFpbGVkOiBib29sZWFuIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJhY2VcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UudmVyaWZ5KG1lc3NhZ2UudHJhY2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFjZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZW50VGltZU9mZnNldCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZW50VGltZU9mZnNldFwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zZW50VGltZU9mZnNldCkgJiYgIShtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0ICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0LmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQuaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2VudFRpbWVPZmZzZXQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlbnRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNlbnRUaW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudmVyaWZ5KG1lc3NhZ2Uuc2VudFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzZW50VGltZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWNlaXZlZFRpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVjZWl2ZWRUaW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudmVyaWZ5KG1lc3NhZ2UucmVjZWl2ZWRUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVjZWl2ZWRUaW1lLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBGZXRjaE5vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGV9IG1lc3NhZ2UgRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNlcnZpY2VOYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRyYWNlUGFyc2luZ0ZhaWxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJhY2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2VudFRpbWVPZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2VudFRpbWUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVjZWl2ZWRUaW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZU5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VydmljZU5hbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZXJ2aWNlTmFtZSA9IG1lc3NhZ2Uuc2VydmljZU5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2VQYXJzaW5nRmFpbGVkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRyYWNlUGFyc2luZ0ZhaWxlZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRyYWNlUGFyc2luZ0ZhaWxlZCA9IG1lc3NhZ2UudHJhY2VQYXJzaW5nRmFpbGVkO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYWNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRyYWNlXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJhY2UgPSAkcm9vdC5UcmFjZS50b09iamVjdChtZXNzYWdlLnRyYWNlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZW50VGltZU9mZnNldCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZW50VGltZU9mZnNldFwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNlbnRUaW1lT2Zmc2V0ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQpIDogbWVzc2FnZS5zZW50VGltZU9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNlbnRUaW1lT2Zmc2V0ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0KSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0LmxvdyA+Pj4gMCwgbWVzc2FnZS5zZW50VGltZU9mZnNldC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQ7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VudFRpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VudFRpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZW50VGltZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QobWVzc2FnZS5zZW50VGltZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVjZWl2ZWRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlY2VpdmVkVGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlY2VpdmVkVGltZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QobWVzc2FnZS5yZWNlaXZlZFRpbWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRmV0Y2hOb2RlIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBGZXRjaE5vZGU7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRmxhdHRlbk5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPFRyYWNlLlF1ZXJ5UGxhbk5vZGUuSVJlc3BvbnNlUGF0aEVsZW1lbnQ+fG51bGx9IFtyZXNwb25zZVBhdGhdIEZsYXR0ZW5Ob2RlIHJlc3BvbnNlUGF0aFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfSBbbm9kZV0gRmxhdHRlbk5vZGUgbm9kZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBGbGF0dGVuTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBGbGF0dGVuTm9kZS5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElGbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUZsYXR0ZW5Ob2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIEZsYXR0ZW5Ob2RlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlUGF0aCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmxhdHRlbk5vZGUgcmVzcG9uc2VQYXRoLlxuICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPFRyYWNlLlF1ZXJ5UGxhbk5vZGUuSVJlc3BvbnNlUGF0aEVsZW1lbnQ+fSByZXNwb25zZVBhdGhcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmxhdHRlbk5vZGUucHJvdG90eXBlLnJlc3BvbnNlUGF0aCA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmxhdHRlbk5vZGUgbm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge1RyYWNlLklRdWVyeVBsYW5Ob2RlfG51bGx8dW5kZWZpbmVkfSBub2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZsYXR0ZW5Ob2RlLnByb3RvdHlwZS5ub2RlID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEZsYXR0ZW5Ob2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUZsYXR0ZW5Ob2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZX0gRmxhdHRlbk5vZGUgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmxhdHRlbk5vZGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZsYXR0ZW5Ob2RlKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmxhdHRlbk5vZGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUZsYXR0ZW5Ob2RlfSBtZXNzYWdlIEZsYXR0ZW5Ob2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZsYXR0ZW5Ob2RlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZVBhdGggIT0gbnVsbCAmJiBtZXNzYWdlLnJlc3BvbnNlUGF0aC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5yZXNwb25zZVBhdGgubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnQuZW5jb2RlKG1lc3NhZ2UucmVzcG9uc2VQYXRoW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibm9kZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5lbmNvZGUobWVzc2FnZS5ub2RlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZsYXR0ZW5Ob2RlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGbGF0dGVuTm9kZX0gbWVzc2FnZSBGbGF0dGVuTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbGF0dGVuTm9kZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBGbGF0dGVuTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlfSBGbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbGF0dGVuTm9kZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5yZXNwb25zZVBhdGggJiYgbWVzc2FnZS5yZXNwb25zZVBhdGgubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3BvbnNlUGF0aCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXNwb25zZVBhdGgucHVzaCgkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2RlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIEZsYXR0ZW5Ob2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZX0gRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmxhdHRlbk5vZGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgRmxhdHRlbk5vZGUgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZsYXR0ZW5Ob2RlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlc3BvbnNlUGF0aCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXNwb25zZVBhdGhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UucmVzcG9uc2VQYXRoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlc3BvbnNlUGF0aDogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnJlc3BvbnNlUGF0aC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50LnZlcmlmeShtZXNzYWdlLnJlc3BvbnNlUGF0aFtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVzcG9uc2VQYXRoLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJub2RlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUudmVyaWZ5KG1lc3NhZ2Uubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGUuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIEZsYXR0ZW5Ob2RlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZX0gbWVzc2FnZSBGbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbGF0dGVuTm9kZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZXNwb25zZVBhdGggPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlc3BvbnNlUGF0aCAmJiBtZXNzYWdlLnJlc3BvbnNlUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlc3BvbnNlUGF0aCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UucmVzcG9uc2VQYXRoLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlc3BvbnNlUGF0aFtqXSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudC50b09iamVjdChtZXNzYWdlLnJlc3BvbnNlUGF0aFtqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibm9kZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnRvT2JqZWN0KG1lc3NhZ2Uubm9kZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBGbGF0dGVuTm9kZSB0byBKU09OLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbGF0dGVuTm9kZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIEZsYXR0ZW5Ob2RlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZWZlck5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVyTm9kZVByaW1hcnl8bnVsbH0gW3ByaW1hcnldIERlZmVyTm9kZSBwcmltYXJ5XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGU+fG51bGx9IFtkZWZlcnJlZF0gRGVmZXJOb2RlIGRlZmVycmVkXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlZmVyTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBEZWZlck5vZGUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJOb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIERlZmVyTm9kZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVmZXJOb2RlIHByaW1hcnkuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGVQcmltYXJ5fG51bGx8dW5kZWZpbmVkfSBwcmltYXJ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGUucHJvdG90eXBlLnByaW1hcnkgPSBudWxsO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlZmVyTm9kZSBkZWZlcnJlZC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGU+fSBkZWZlcnJlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlLnByb3RvdHlwZS5kZWZlcnJlZCA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBEZWZlck5vZGUgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVyTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlfSBEZWZlck5vZGUgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWZlck5vZGUocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWZlck5vZGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJOb2RlfSBtZXNzYWdlIERlZmVyTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnByaW1hcnkgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInByaW1hcnlcIikpXG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeS5lbmNvZGUobWVzc2FnZS5wcmltYXJ5LCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVmZXJyZWQgIT0gbnVsbCAmJiBtZXNzYWdlLmRlZmVycmVkLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmRlZmVycmVkLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGUuZW5jb2RlKG1lc3NhZ2UuZGVmZXJyZWRbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVmZXJOb2RlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVyTm9kZX0gbWVzc2FnZSBEZWZlck5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIERlZmVyTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGV9IERlZmVyTm9kZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGUoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByaW1hcnkgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnkuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmRlZmVycmVkICYmIG1lc3NhZ2UuZGVmZXJyZWQubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlZmVycmVkID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlZmVycmVkLnB1c2goJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVmZXJOb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlfSBEZWZlck5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIERlZmVyTm9kZSBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wcmltYXJ5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInByaW1hcnlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5LnZlcmlmeShtZXNzYWdlLnByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwcmltYXJ5LlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlZmVycmVkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlZmVycmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLmRlZmVycmVkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRlZmVycmVkOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuZGVmZXJyZWQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlLnZlcmlmeShtZXNzYWdlLmRlZmVycmVkW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZWZlcnJlZC5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBEZWZlck5vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGV9IG1lc3NhZ2UgRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZWZlcnJlZCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucHJpbWFyeSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucHJpbWFyeSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwcmltYXJ5XCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucHJpbWFyeSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeS50b09iamVjdChtZXNzYWdlLnByaW1hcnksIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlZmVycmVkICYmIG1lc3NhZ2UuZGVmZXJyZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZWZlcnJlZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UuZGVmZXJyZWQubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVmZXJyZWRbal0gPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZS50b09iamVjdChtZXNzYWdlLmRlZmVycmVkW2pdLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBEZWZlck5vZGUgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIERlZmVyTm9kZTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBRdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIENvbmRpdGlvbk5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2NvbmRpdGlvbl0gQ29uZGl0aW9uTm9kZSBjb25kaXRpb25cbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGV8bnVsbH0gW2lmQ2xhdXNlXSBDb25kaXRpb25Ob2RlIGlmQ2xhdXNlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLklRdWVyeVBsYW5Ob2RlfG51bGx9IFtlbHNlQ2xhdXNlXSBDb25kaXRpb25Ob2RlIGVsc2VDbGF1c2VcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29uZGl0aW9uTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBDb25kaXRpb25Ob2RlLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUNvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklDb25kaXRpb25Ob2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIENvbmRpdGlvbk5vZGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uZGl0aW9uTm9kZSBjb25kaXRpb24uXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGNvbmRpdGlvblxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUucHJvdG90eXBlLmNvbmRpdGlvbiA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uZGl0aW9uTm9kZSBpZkNsYXVzZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge1RyYWNlLklRdWVyeVBsYW5Ob2RlfG51bGx8dW5kZWZpbmVkfSBpZkNsYXVzZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUucHJvdG90eXBlLmlmQ2xhdXNlID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25kaXRpb25Ob2RlIGVsc2VDbGF1c2UuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfHVuZGVmaW5lZH0gZWxzZUNsYXVzZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUucHJvdG90eXBlLmVsc2VDbGF1c2UgPSBudWxsO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQ29uZGl0aW9uTm9kZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUNvbmRpdGlvbk5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGV9IENvbmRpdGlvbk5vZGUgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ29uZGl0aW9uTm9kZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29uZGl0aW9uTm9kZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbmRpdGlvbk5vZGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklDb25kaXRpb25Ob2RlfSBtZXNzYWdlIENvbmRpdGlvbk5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ29uZGl0aW9uTm9kZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29uZGl0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjb25kaXRpb25cIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UuY29uZGl0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZkNsYXVzZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaWZDbGF1c2VcIikpXG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZW5jb2RlKG1lc3NhZ2UuaWZDbGF1c2UsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbHNlQ2xhdXNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlbHNlQ2xhdXNlXCIpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmVuY29kZShtZXNzYWdlLmVsc2VDbGF1c2UsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ29uZGl0aW9uTm9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUNvbmRpdGlvbk5vZGV9IG1lc3NhZ2UgQ29uZGl0aW9uTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDb25kaXRpb25Ob2RlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIENvbmRpdGlvbk5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGV9IENvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ29uZGl0aW9uTm9kZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGUoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbmRpdGlvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlmQ2xhdXNlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWxzZUNsYXVzZSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBDb25kaXRpb25Ob2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGV9IENvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ29uZGl0aW9uTm9kZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBDb25kaXRpb25Ob2RlIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29uZGl0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbmRpdGlvblwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmNvbmRpdGlvbikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb25kaXRpb246IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlmQ2xhdXNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlmQ2xhdXNlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUudmVyaWZ5KG1lc3NhZ2UuaWZDbGF1c2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpZkNsYXVzZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbHNlQ2xhdXNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVsc2VDbGF1c2VcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS52ZXJpZnkobWVzc2FnZS5lbHNlQ2xhdXNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZWxzZUNsYXVzZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29uZGl0aW9uTm9kZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlfSBtZXNzYWdlIENvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ29uZGl0aW9uTm9kZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNvbmRpdGlvbiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pZkNsYXVzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbHNlQ2xhdXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29uZGl0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbmRpdGlvblwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNvbmRpdGlvbiA9IG1lc3NhZ2UuY29uZGl0aW9uO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlmQ2xhdXNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlmQ2xhdXNlXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaWZDbGF1c2UgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnRvT2JqZWN0KG1lc3NhZ2UuaWZDbGF1c2UsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVsc2VDbGF1c2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZWxzZUNsYXVzZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVsc2VDbGF1c2UgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnRvT2JqZWN0KG1lc3NhZ2UuZWxzZUNsYXVzZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBDb25kaXRpb25Ob2RlIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ29uZGl0aW9uTm9kZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIENvbmRpdGlvbk5vZGU7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZWZlck5vZGVQcmltYXJ5LlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGV8bnVsbH0gW25vZGVdIERlZmVyTm9kZVByaW1hcnkgbm9kZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEZWZlck5vZGVQcmltYXJ5LlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERlZmVyTm9kZVByaW1hcnkuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVyTm9kZVByaW1hcnk9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gRGVmZXJOb2RlUHJpbWFyeShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWZlck5vZGVQcmltYXJ5IG5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfHVuZGVmaW5lZH0gbm9kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZVByaW1hcnkucHJvdG90eXBlLm5vZGUgPSBudWxsO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRGVmZXJOb2RlUHJpbWFyeSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVyTm9kZVByaW1hcnk9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnl9IERlZmVyTm9kZVByaW1hcnkgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlUHJpbWFyeS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGVmZXJOb2RlUHJpbWFyeShwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlZmVyTm9kZVByaW1hcnkgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGVQcmltYXJ5fSBtZXNzYWdlIERlZmVyTm9kZVByaW1hcnkgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlUHJpbWFyeS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibm9kZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5lbmNvZGUobWVzc2FnZS5ub2RlLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlZmVyTm9kZVByaW1hcnkgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGVQcmltYXJ5fSBtZXNzYWdlIERlZmVyTm9kZVByaW1hcnkgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlUHJpbWFyeS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWZlck5vZGVQcmltYXJ5IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5fSBEZWZlck5vZGVQcmltYXJ5XG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZVByaW1hcnkuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5KCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2RlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIERlZmVyTm9kZVByaW1hcnkgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeX0gRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGVQcmltYXJ5LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIERlZmVyTm9kZVByaW1hcnkgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlUHJpbWFyeS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm5vZGVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS52ZXJpZnkobWVzc2FnZS5ub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGVmZXJOb2RlUHJpbWFyeSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5fSBtZXNzYWdlIERlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlUHJpbWFyeS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm5vZGVcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS50b09iamVjdChtZXNzYWdlLm5vZGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRGVmZXJOb2RlUHJpbWFyeSB0byBKU09OLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZVByaW1hcnkucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBEZWZlck5vZGVQcmltYXJ5O1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZWZlcnJlZE5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGVEZXBlbmRzPnxudWxsfSBbZGVwZW5kc10gRGVmZXJyZWROb2RlIGRlcGVuZHNcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtsYWJlbF0gRGVmZXJyZWROb2RlIGxhYmVsXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxUcmFjZS5RdWVyeVBsYW5Ob2RlLklSZXNwb25zZVBhdGhFbGVtZW50PnxudWxsfSBbcGF0aF0gRGVmZXJyZWROb2RlIHBhdGhcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGV8bnVsbH0gW25vZGVdIERlZmVycmVkTm9kZSBub2RlXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlZmVycmVkTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBEZWZlcnJlZE5vZGUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIERlZmVycmVkTm9kZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXBlbmRzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5wYXRoID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWZlcnJlZE5vZGUgZGVwZW5kcy5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGVEZXBlbmRzPn0gZGVwZW5kc1xuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLnByb3RvdHlwZS5kZXBlbmRzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWZlcnJlZE5vZGUgbGFiZWwuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGxhYmVsXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGUucHJvdG90eXBlLmxhYmVsID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWZlcnJlZE5vZGUgcGF0aC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxUcmFjZS5RdWVyeVBsYW5Ob2RlLklSZXNwb25zZVBhdGhFbGVtZW50Pn0gcGF0aFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLnByb3RvdHlwZS5wYXRoID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWZlcnJlZE5vZGUgbm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge1RyYWNlLklRdWVyeVBsYW5Ob2RlfG51bGx8dW5kZWZpbmVkfSBub2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGUucHJvdG90eXBlLm5vZGUgPSBudWxsO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRGVmZXJyZWROb2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZX0gRGVmZXJyZWROb2RlIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGVmZXJyZWROb2RlKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVmZXJyZWROb2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVycmVkTm9kZX0gbWVzc2FnZSBEZWZlcnJlZE5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXBlbmRzICE9IG51bGwgJiYgbWVzc2FnZS5kZXBlbmRzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmRlcGVuZHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHMuZW5jb2RlKG1lc3NhZ2UuZGVwZW5kc1tpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhYmVsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYWJlbFwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5sYWJlbCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGF0aCAhPSBudWxsICYmIG1lc3NhZ2UucGF0aC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5wYXRoLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50LmVuY29kZShtZXNzYWdlLnBhdGhbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJub2RlXCIpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmVuY29kZShtZXNzYWdlLm5vZGUsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVmZXJyZWROb2RlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVycmVkTm9kZX0gbWVzc2FnZSBEZWZlcnJlZE5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIERlZmVycmVkTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGV9IERlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGUoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmRlcGVuZHMgJiYgbWVzc2FnZS5kZXBlbmRzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXBlbmRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlcGVuZHMucHVzaCgkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYWJlbCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnBhdGggJiYgbWVzc2FnZS5wYXRoLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXRoID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhdGgucHVzaCgkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2RlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIERlZmVycmVkTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZX0gRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBEZWZlcnJlZE5vZGUgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVwZW5kcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXBlbmRzXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLmRlcGVuZHMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVwZW5kczogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmRlcGVuZHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kcy52ZXJpZnkobWVzc2FnZS5kZXBlbmRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXBlbmRzLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFiZWwgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibGFiZWxcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5sYWJlbCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsYWJlbDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGF0aCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwYXRoXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnBhdGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicGF0aDogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnBhdGgubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudC52ZXJpZnkobWVzc2FnZS5wYXRoW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwYXRoLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJub2RlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUudmVyaWZ5KG1lc3NhZ2Uubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGUuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIERlZmVycmVkTm9kZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZX0gbWVzc2FnZSBEZWZlcnJlZE5vZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hcnJheXMgfHwgb3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVwZW5kcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QucGF0aCA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGFiZWwgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlcGVuZHMgJiYgbWVzc2FnZS5kZXBlbmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVwZW5kcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UuZGVwZW5kcy5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZXBlbmRzW2pdID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzLnRvT2JqZWN0KG1lc3NhZ2UuZGVwZW5kc1tqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhYmVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhYmVsXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGFiZWwgPSBtZXNzYWdlLmxhYmVsO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhdGggJiYgbWVzc2FnZS5wYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QucGF0aCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UucGF0aC5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5wYXRoW2pdID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50LnRvT2JqZWN0KG1lc3NhZ2UucGF0aFtqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibm9kZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnRvT2JqZWN0KG1lc3NhZ2Uubm9kZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBEZWZlcnJlZE5vZGUgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIERlZmVycmVkTm9kZTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBRdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIERlZmVycmVkTm9kZURlcGVuZHMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2lkXSBEZWZlcnJlZE5vZGVEZXBlbmRzIGlkXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZGVmZXJMYWJlbF0gRGVmZXJyZWROb2RlRGVwZW5kcyBkZWZlckxhYmVsXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlZmVycmVkTm9kZURlcGVuZHMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGVmZXJyZWROb2RlRGVwZW5kcy5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElEZWZlcnJlZE5vZGVEZXBlbmRzXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlRGVwZW5kcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBEZWZlcnJlZE5vZGVEZXBlbmRzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlZmVycmVkTm9kZURlcGVuZHMgaWQuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGlkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlRGVwZW5kcy5wcm90b3R5cGUuaWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlZmVycmVkTm9kZURlcGVuZHMgZGVmZXJMYWJlbC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZGVmZXJMYWJlbFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZURlcGVuZHMucHJvdG90eXBlLmRlZmVyTGFiZWwgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRGVmZXJyZWROb2RlRGVwZW5kcyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVycmVkTm9kZURlcGVuZHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHN9IERlZmVycmVkTm9kZURlcGVuZHMgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlRGVwZW5kcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGVmZXJyZWROb2RlRGVwZW5kcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlZmVycmVkTm9kZURlcGVuZHMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGVEZXBlbmRzfSBtZXNzYWdlIERlZmVycmVkTm9kZURlcGVuZHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlRGVwZW5kcy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWZlckxhYmVsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZWZlckxhYmVsXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLmRlZmVyTGFiZWwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWZlcnJlZE5vZGVEZXBlbmRzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlRGVwZW5kc30gbWVzc2FnZSBEZWZlcnJlZE5vZGVEZXBlbmRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZURlcGVuZHMuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVmZXJyZWROb2RlRGVwZW5kcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc30gRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGVEZXBlbmRzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kcygpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWZlckxhYmVsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIERlZmVycmVkTm9kZURlcGVuZHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc30gRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGVEZXBlbmRzLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIERlZmVycmVkTm9kZURlcGVuZHMgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlRGVwZW5kcy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmlkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImlkOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWZlckxhYmVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlZmVyTGFiZWxcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5kZWZlckxhYmVsKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRlZmVyTGFiZWw6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBEZWZlcnJlZE5vZGVEZXBlbmRzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHN9IG1lc3NhZ2UgRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGVEZXBlbmRzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVmZXJMYWJlbCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaWQgPSBtZXNzYWdlLmlkO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlZmVyTGFiZWwgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGVmZXJMYWJlbFwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlZmVyTGFiZWwgPSBtZXNzYWdlLmRlZmVyTGFiZWw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBEZWZlcnJlZE5vZGVEZXBlbmRzIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlRGVwZW5kcy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIERlZmVycmVkTm9kZURlcGVuZHM7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBSZXNwb25zZVBhdGhFbGVtZW50LlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtmaWVsZE5hbWVdIFJlc3BvbnNlUGF0aEVsZW1lbnQgZmllbGROYW1lXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaW5kZXhdIFJlc3BvbnNlUGF0aEVsZW1lbnQgaW5kZXhcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUmVzcG9uc2VQYXRoRWxlbWVudC5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBSZXNwb25zZVBhdGhFbGVtZW50LlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklSZXNwb25zZVBhdGhFbGVtZW50PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIFJlc3BvbnNlUGF0aEVsZW1lbnQocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVzcG9uc2VQYXRoRWxlbWVudCBmaWVsZE5hbWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGZpZWxkTmFtZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudFxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFJlc3BvbnNlUGF0aEVsZW1lbnQucHJvdG90eXBlLmZpZWxkTmFtZSA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVzcG9uc2VQYXRoRWxlbWVudCBpbmRleC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gaW5kZXhcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBSZXNwb25zZVBhdGhFbGVtZW50LnByb3RvdHlwZS5pbmRleCA9IDA7XG5cbiAgICAgICAgICAgIC8vIE9uZU9mIGZpZWxkIG5hbWVzIGJvdW5kIHRvIHZpcnR1YWwgZ2V0dGVycyBhbmQgc2V0dGVyc1xuICAgICAgICAgICAgdmFyICRvbmVPZkZpZWxkcztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXNwb25zZVBhdGhFbGVtZW50IGlkLlxuICAgICAgICAgICAgICogQG1lbWJlciB7XCJmaWVsZE5hbWVcInxcImluZGV4XCJ8dW5kZWZpbmVkfSBpZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudFxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXNwb25zZVBhdGhFbGVtZW50LnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiAkdXRpbC5vbmVPZkdldHRlcigkb25lT2ZGaWVsZHMgPSBbXCJmaWVsZE5hbWVcIiwgXCJpbmRleFwiXSksXG4gICAgICAgICAgICAgICAgc2V0OiAkdXRpbC5vbmVPZlNldHRlcigkb25lT2ZGaWVsZHMpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFJlc3BvbnNlUGF0aEVsZW1lbnQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklSZXNwb25zZVBhdGhFbGVtZW50PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50fSBSZXNwb25zZVBhdGhFbGVtZW50IGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFJlc3BvbnNlUGF0aEVsZW1lbnQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlUGF0aEVsZW1lbnQocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSZXNwb25zZVBhdGhFbGVtZW50IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JUmVzcG9uc2VQYXRoRWxlbWVudH0gbWVzc2FnZSBSZXNwb25zZVBhdGhFbGVtZW50IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFJlc3BvbnNlUGF0aEVsZW1lbnQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmZpZWxkTmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZmllbGROYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLmZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImluZGV4XCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLnVpbnQzMihtZXNzYWdlLmluZGV4KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUmVzcG9uc2VQYXRoRWxlbWVudCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSVJlc3BvbnNlUGF0aEVsZW1lbnR9IG1lc3NhZ2UgUmVzcG9uc2VQYXRoRWxlbWVudCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBSZXNwb25zZVBhdGhFbGVtZW50LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFJlc3BvbnNlUGF0aEVsZW1lbnQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnR9IFJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUmVzcG9uc2VQYXRoRWxlbWVudC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpZWxkTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFJlc3BvbnNlUGF0aEVsZW1lbnQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudH0gUmVzcG9uc2VQYXRoRWxlbWVudFxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBSZXNwb25zZVBhdGhFbGVtZW50LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFJlc3BvbnNlUGF0aEVsZW1lbnQgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUmVzcG9uc2VQYXRoRWxlbWVudC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmZpZWxkTmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmaWVsZE5hbWVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5pZCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5maWVsZE5hbWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZmllbGROYW1lOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuaWQgPT09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpZDogbXVsdGlwbGUgdmFsdWVzXCI7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuaWQgPSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmluZGV4KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBSZXNwb25zZVBhdGhFbGVtZW50IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnR9IG1lc3NhZ2UgUmVzcG9uc2VQYXRoRWxlbWVudFxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBSZXNwb25zZVBhdGhFbGVtZW50LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5maWVsZE5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZmllbGROYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5maWVsZE5hbWUgPSBtZXNzYWdlLmZpZWxkTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gXCJmaWVsZE5hbWVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmluZGV4ID0gbWVzc2FnZS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gXCJpbmRleFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFJlc3BvbnNlUGF0aEVsZW1lbnQgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBSZXNwb25zZVBhdGhFbGVtZW50LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gUmVzcG9uc2VQYXRoRWxlbWVudDtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gUXVlcnlQbGFuTm9kZTtcbiAgICB9KSgpO1xuXG4gICAgcmV0dXJuIFRyYWNlO1xufSkoKTtcblxuJHJvb3QuUmVwb3J0SGVhZGVyID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIFJlcG9ydEhlYWRlci5cbiAgICAgKiBAZXhwb3J0cyBJUmVwb3J0SGVhZGVyXG4gICAgICogQGludGVyZmFjZSBJUmVwb3J0SGVhZGVyXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyYXBoUmVmXSBSZXBvcnRIZWFkZXIgZ3JhcGhSZWZcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbaG9zdG5hbWVdIFJlcG9ydEhlYWRlciBob3N0bmFtZVxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFthZ2VudFZlcnNpb25dIFJlcG9ydEhlYWRlciBhZ2VudFZlcnNpb25cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc2VydmljZVZlcnNpb25dIFJlcG9ydEhlYWRlciBzZXJ2aWNlVmVyc2lvblxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtydW50aW1lVmVyc2lvbl0gUmVwb3J0SGVhZGVyIHJ1bnRpbWVWZXJzaW9uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VuYW1lXSBSZXBvcnRIZWFkZXIgdW5hbWVcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZXhlY3V0YWJsZVNjaGVtYUlkXSBSZXBvcnRIZWFkZXIgZXhlY3V0YWJsZVNjaGVtYUlkXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJlcG9ydEhlYWRlci5cbiAgICAgKiBAZXhwb3J0cyBSZXBvcnRIZWFkZXJcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBSZXBvcnRIZWFkZXIuXG4gICAgICogQGltcGxlbWVudHMgSVJlcG9ydEhlYWRlclxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SVJlcG9ydEhlYWRlcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlcG9ydEhlYWRlcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwb3J0SGVhZGVyIGdyYXBoUmVmLlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3JhcGhSZWZcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0SGVhZGVyLnByb3RvdHlwZS5ncmFwaFJlZiA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBSZXBvcnRIZWFkZXIgaG9zdG5hbWUuXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBob3N0bmFtZVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIucHJvdG90eXBlLmhvc3RuYW1lID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFJlcG9ydEhlYWRlciBhZ2VudFZlcnNpb24uXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBhZ2VudFZlcnNpb25cbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0SGVhZGVyLnByb3RvdHlwZS5hZ2VudFZlcnNpb24gPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0SGVhZGVyIHNlcnZpY2VWZXJzaW9uLlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gc2VydmljZVZlcnNpb25cbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0SGVhZGVyLnByb3RvdHlwZS5zZXJ2aWNlVmVyc2lvbiA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBSZXBvcnRIZWFkZXIgcnVudGltZVZlcnNpb24uXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBydW50aW1lVmVyc2lvblxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIucHJvdG90eXBlLnJ1bnRpbWVWZXJzaW9uID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFJlcG9ydEhlYWRlciB1bmFtZS5cbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHVuYW1lXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydEhlYWRlclxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5wcm90b3R5cGUudW5hbWUgPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0SGVhZGVyIGV4ZWN1dGFibGVTY2hlbWFJZC5cbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGV4ZWN1dGFibGVTY2hlbWFJZFxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIucHJvdG90eXBlLmV4ZWN1dGFibGVTY2hlbWFJZCA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFJlcG9ydEhlYWRlciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVwb3J0SGVhZGVyPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1JlcG9ydEhlYWRlcn0gUmVwb3J0SGVhZGVyIGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0SGVhZGVyLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVwb3J0SGVhZGVyKHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUmVwb3J0SGVhZGVyIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFJlcG9ydEhlYWRlci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydEhlYWRlclxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lSZXBvcnRIZWFkZXJ9IG1lc3NhZ2UgUmVwb3J0SGVhZGVyIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmhvc3RuYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJob3N0bmFtZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80Mikuc3RyaW5nKG1lc3NhZ2UuaG9zdG5hbWUpO1xuICAgICAgICBpZiAobWVzc2FnZS5hZ2VudFZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFnZW50VmVyc2lvblwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuc3RyaW5nKG1lc3NhZ2UuYWdlbnRWZXJzaW9uKTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZVZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNlcnZpY2VWZXJzaW9uXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAyID0qLzU4KS5zdHJpbmcobWVzc2FnZS5zZXJ2aWNlVmVyc2lvbik7XG4gICAgICAgIGlmIChtZXNzYWdlLnJ1bnRpbWVWZXJzaW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJydW50aW1lVmVyc2lvblwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMiA9Ki82Nikuc3RyaW5nKG1lc3NhZ2UucnVudGltZVZlcnNpb24pO1xuICAgICAgICBpZiAobWVzc2FnZS51bmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidW5hbWVcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDksIHdpcmVUeXBlIDIgPSovNzQpLnN0cmluZyhtZXNzYWdlLnVuYW1lKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXhlY3V0YWJsZVNjaGVtYUlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJleGVjdXRhYmxlU2NoZW1hSWRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDExLCB3aXJlVHlwZSAyID0qLzkwKS5zdHJpbmcobWVzc2FnZS5leGVjdXRhYmxlU2NoZW1hSWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5ncmFwaFJlZiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JhcGhSZWZcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEyLCB3aXJlVHlwZSAyID0qLzk4KS5zdHJpbmcobWVzc2FnZS5ncmFwaFJlZik7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSZXBvcnRIZWFkZXIgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgUmVwb3J0SGVhZGVyLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVJlcG9ydEhlYWRlcn0gbWVzc2FnZSBSZXBvcnRIZWFkZXIgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgUmVwb3J0SGVhZGVyIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7UmVwb3J0SGVhZGVyfSBSZXBvcnRIZWFkZXJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5SZXBvcnRIZWFkZXIoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmdyYXBoUmVmID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaG9zdG5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VudFZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXJ2aWNlVmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJ1bnRpbWVWZXJzaW9uID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UudW5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXhlY3V0YWJsZVNjaGVtYUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBSZXBvcnRIZWFkZXIgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydEhlYWRlclxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcmV0dXJucyB7UmVwb3J0SGVhZGVyfSBSZXBvcnRIZWFkZXJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgYSBSZXBvcnRIZWFkZXIgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFJlcG9ydEhlYWRlclxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5ncmFwaFJlZiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJncmFwaFJlZlwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5ncmFwaFJlZikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZ3JhcGhSZWY6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5ob3N0bmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJob3N0bmFtZVwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5ob3N0bmFtZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaG9zdG5hbWU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5hZ2VudFZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiYWdlbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmFnZW50VmVyc2lvbikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYWdlbnRWZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZVZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VydmljZVZlcnNpb25cIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uuc2VydmljZVZlcnNpb24pKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInNlcnZpY2VWZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucnVudGltZVZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicnVudGltZVZlcnNpb25cIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UucnVudGltZVZlcnNpb24pKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJ1bnRpbWVWZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidW5hbWVcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudW5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInVuYW1lOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXhlY3V0YWJsZVNjaGVtYUlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImV4ZWN1dGFibGVTY2hlbWFJZFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5leGVjdXRhYmxlU2NoZW1hSWQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImV4ZWN1dGFibGVTY2hlbWFJZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBSZXBvcnRIZWFkZXIgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtSZXBvcnRIZWFkZXJ9IG1lc3NhZ2UgUmVwb3J0SGVhZGVyXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgb2JqZWN0Lmhvc3RuYW1lID0gXCJcIjtcbiAgICAgICAgICAgIG9iamVjdC5hZ2VudFZlcnNpb24gPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LnNlcnZpY2VWZXJzaW9uID0gXCJcIjtcbiAgICAgICAgICAgIG9iamVjdC5ydW50aW1lVmVyc2lvbiA9IFwiXCI7XG4gICAgICAgICAgICBvYmplY3QudW5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LmV4ZWN1dGFibGVTY2hlbWFJZCA9IFwiXCI7XG4gICAgICAgICAgICBvYmplY3QuZ3JhcGhSZWYgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmhvc3RuYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImhvc3RuYW1lXCIpKVxuICAgICAgICAgICAgb2JqZWN0Lmhvc3RuYW1lID0gbWVzc2FnZS5ob3N0bmFtZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuYWdlbnRWZXJzaW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImFnZW50VmVyc2lvblwiKSlcbiAgICAgICAgICAgIG9iamVjdC5hZ2VudFZlcnNpb24gPSBtZXNzYWdlLmFnZW50VmVyc2lvbjtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZVZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VydmljZVZlcnNpb25cIikpXG4gICAgICAgICAgICBvYmplY3Quc2VydmljZVZlcnNpb24gPSBtZXNzYWdlLnNlcnZpY2VWZXJzaW9uO1xuICAgICAgICBpZiAobWVzc2FnZS5ydW50aW1lVmVyc2lvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJydW50aW1lVmVyc2lvblwiKSlcbiAgICAgICAgICAgIG9iamVjdC5ydW50aW1lVmVyc2lvbiA9IG1lc3NhZ2UucnVudGltZVZlcnNpb247XG4gICAgICAgIGlmIChtZXNzYWdlLnVuYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInVuYW1lXCIpKVxuICAgICAgICAgICAgb2JqZWN0LnVuYW1lID0gbWVzc2FnZS51bmFtZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXhlY3V0YWJsZVNjaGVtYUlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImV4ZWN1dGFibGVTY2hlbWFJZFwiKSlcbiAgICAgICAgICAgIG9iamVjdC5leGVjdXRhYmxlU2NoZW1hSWQgPSBtZXNzYWdlLmV4ZWN1dGFibGVTY2hlbWFJZDtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZ3JhcGhSZWYgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZ3JhcGhSZWZcIikpXG4gICAgICAgICAgICBvYmplY3QuZ3JhcGhSZWYgPSBtZXNzYWdlLmdyYXBoUmVmO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIFJlcG9ydEhlYWRlciB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQGluc3RhbmNlXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcG9ydEhlYWRlcjtcbn0pKCk7XG5cbiRyb290LlBhdGhFcnJvclN0YXRzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIFBhdGhFcnJvclN0YXRzLlxuICAgICAqIEBleHBvcnRzIElQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBpbnRlcmZhY2UgSVBhdGhFcnJvclN0YXRzXG4gICAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZyxJUGF0aEVycm9yU3RhdHM+fG51bGx9IFtjaGlsZHJlbl0gUGF0aEVycm9yU3RhdHMgY2hpbGRyZW5cbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZXJyb3JzQ291bnRdIFBhdGhFcnJvclN0YXRzIGVycm9yc0NvdW50XG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3JlcXVlc3RzV2l0aEVycm9yc0NvdW50XSBQYXRoRXJyb3JTdGF0cyByZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBQYXRoRXJyb3JTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFBhdGhFcnJvclN0YXRzLlxuICAgICAqIEBpbXBsZW1lbnRzIElQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SVBhdGhFcnJvclN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gUGF0aEVycm9yU3RhdHMocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0ge307XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGF0aEVycm9yU3RhdHMgY2hpbGRyZW4uXG4gICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsSVBhdGhFcnJvclN0YXRzPn0gY2hpbGRyZW5cbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy5wcm90b3R5cGUuY2hpbGRyZW4gPSAkdXRpbC5lbXB0eU9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIFBhdGhFcnJvclN0YXRzIGVycm9yc0NvdW50LlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gZXJyb3JzQ291bnRcbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy5wcm90b3R5cGUuZXJyb3JzQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogUGF0aEVycm9yU3RhdHMgcmVxdWVzdHNXaXRoRXJyb3JzQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSByZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFxuICAgICAqIEBtZW1iZXJvZiBQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFBhdGhFcnJvclN0YXRzLnByb3RvdHlwZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFBhdGhFcnJvclN0YXRzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVBhdGhFcnJvclN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1BhdGhFcnJvclN0YXRzfSBQYXRoRXJyb3JTdGF0cyBpbnN0YW5jZVxuICAgICAqL1xuICAgIFBhdGhFcnJvclN0YXRzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGF0aEVycm9yU3RhdHMocHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBQYXRoRXJyb3JTdGF0cyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBQYXRoRXJyb3JTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVBhdGhFcnJvclN0YXRzfSBtZXNzYWdlIFBhdGhFcnJvclN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2hpbGRyZW4gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNoaWxkcmVuXCIpKVxuICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2UuY2hpbGRyZW4pLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKS51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICRyb290LlBhdGhFcnJvclN0YXRzLmVuY29kZShtZXNzYWdlLmNoaWxkcmVuW2tleXNbaV1dLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVycm9yc0NvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikudWludDY0KG1lc3NhZ2UuZXJyb3JzQ291bnQpO1xuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDAgPSovNDApLnVpbnQ2NChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50KTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFBhdGhFcnJvclN0YXRzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFBhdGhFcnJvclN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUGF0aEVycm9yU3RhdHN9IG1lc3NhZ2UgUGF0aEVycm9yU3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFBhdGhFcnJvclN0YXRzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBQYXRoRXJyb3JTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7UGF0aEVycm9yU3RhdHN9IFBhdGhFcnJvclN0YXRzXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5QYXRoRXJyb3JTdGF0cygpLCBrZXk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcCgpLnBvcysrO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNoaWxkcmVuID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jaGlsZHJlbiA9IHt9O1xuICAgICAgICAgICAgICAgIGtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByZWFkZXIucG9zKys7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jaGlsZHJlbltrZXldID0gJHJvb3QuUGF0aEVycm9yU3RhdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yc0NvdW50ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIFBhdGhFcnJvclN0YXRzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcmV0dXJucyB7UGF0aEVycm9yU3RhdHN9IFBhdGhFcnJvclN0YXRzXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgYSBQYXRoRXJyb3JTdGF0cyBtZXNzYWdlLlxuICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5jaGlsZHJlbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjaGlsZHJlblwiKSkge1xuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc09iamVjdChtZXNzYWdlLmNoaWxkcmVuKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjaGlsZHJlbjogb2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICB2YXIga2V5ID0gT2JqZWN0LmtleXMobWVzc2FnZS5jaGlsZHJlbik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlBhdGhFcnJvclN0YXRzLnZlcmlmeShtZXNzYWdlLmNoaWxkcmVuW2tleVtpXV0pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2hpbGRyZW4uXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lcnJvcnNDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZXJyb3JzQ291bnQpICYmICEobWVzc2FnZS5lcnJvcnNDb3VudCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lcnJvcnNDb3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVycm9yc0NvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvcnNDb3VudDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCkgJiYgIShtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQuaGlnaCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFBhdGhFcnJvclN0YXRzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtQYXRoRXJyb3JTdGF0c30gbWVzc2FnZSBQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICovXG4gICAgUGF0aEVycm9yU3RhdHMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QuY2hpbGRyZW4gPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC5lcnJvcnNDb3VudCA9IDA7XG4gICAgICAgICAgICBvYmplY3QucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHZhciBrZXlzMjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2hpbGRyZW4gJiYgKGtleXMyID0gT2JqZWN0LmtleXMobWVzc2FnZS5jaGlsZHJlbikpLmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LmNoaWxkcmVuID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMyLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIG9iamVjdC5jaGlsZHJlbltrZXlzMltqXV0gPSAkcm9vdC5QYXRoRXJyb3JTdGF0cy50b09iamVjdChtZXNzYWdlLmNoaWxkcmVuW2tleXMyW2pdXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3JzQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuZXJyb3JzQ291bnQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmVycm9yc0NvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UuZXJyb3JzQ291bnQpIDogbWVzc2FnZS5lcnJvcnNDb3VudDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QuZXJyb3JzQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UuZXJyb3JzQ291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UuZXJyb3JzQ291bnQubG93ID4+PiAwLCBtZXNzYWdlLmVycm9yc0NvdW50LmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5lcnJvcnNDb3VudDtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpIDogbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQubG93ID4+PiAwLCBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBQYXRoRXJyb3JTdGF0cyB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICovXG4gICAgUGF0aEVycm9yU3RhdHMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXRoRXJyb3JTdGF0cztcbn0pKCk7XG5cbiRyb290LlF1ZXJ5TGF0ZW5jeVN0YXRzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5TGF0ZW5jeVN0YXRzLlxuICAgICAqIEBleHBvcnRzIElRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnRlcmZhY2UgSVF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHByb3BlcnR5IHskcHJvdG9idWYuVG9BcnJheS48bnVtYmVyPnxBcnJheS48bnVtYmVyPnxudWxsfSBbbGF0ZW5jeUNvdW50XSBRdWVyeUxhdGVuY3lTdGF0cyBsYXRlbmN5Q291bnRcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbcmVxdWVzdENvdW50XSBRdWVyeUxhdGVuY3lTdGF0cyByZXF1ZXN0Q291bnRcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbY2FjaGVIaXRzXSBRdWVyeUxhdGVuY3lTdGF0cyBjYWNoZUhpdHNcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbcGVyc2lzdGVkUXVlcnlIaXRzXSBRdWVyeUxhdGVuY3lTdGF0cyBwZXJzaXN0ZWRRdWVyeUhpdHNcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbcGVyc2lzdGVkUXVlcnlNaXNzZXNdIFF1ZXJ5TGF0ZW5jeVN0YXRzIHBlcnNpc3RlZFF1ZXJ5TWlzc2VzXG4gICAgICogQHByb3BlcnR5IHskcHJvdG9idWYuVG9BcnJheS48bnVtYmVyPnxBcnJheS48bnVtYmVyPnxudWxsfSBbY2FjaGVMYXRlbmN5Q291bnRdIFF1ZXJ5TGF0ZW5jeVN0YXRzIGNhY2hlTGF0ZW5jeUNvdW50XG4gICAgICogQHByb3BlcnR5IHtJUGF0aEVycm9yU3RhdHN8bnVsbH0gW3Jvb3RFcnJvclN0YXRzXSBRdWVyeUxhdGVuY3lTdGF0cyByb290RXJyb3JTdGF0c1xuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudF0gUXVlcnlMYXRlbmN5U3RhdHMgcmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcbiAgICAgKiBAcHJvcGVydHkgeyRwcm90b2J1Zi5Ub0FycmF5LjxudW1iZXI+fEFycmF5LjxudW1iZXI+fG51bGx9IFtwdWJsaWNDYWNoZVR0bENvdW50XSBRdWVyeUxhdGVuY3lTdGF0cyBwdWJsaWNDYWNoZVR0bENvdW50XG4gICAgICogQHByb3BlcnR5IHskcHJvdG9idWYuVG9BcnJheS48bnVtYmVyPnxBcnJheS48bnVtYmVyPnxudWxsfSBbcHJpdmF0ZUNhY2hlVHRsQ291bnRdIFF1ZXJ5TGF0ZW5jeVN0YXRzIHByaXZhdGVDYWNoZVR0bENvdW50XG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3JlZ2lzdGVyZWRPcGVyYXRpb25Db3VudF0gUXVlcnlMYXRlbmN5U3RhdHMgcmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50XG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2ZvcmJpZGRlbk9wZXJhdGlvbkNvdW50XSBRdWVyeUxhdGVuY3lTdGF0cyBmb3JiaWRkZW5PcGVyYXRpb25Db3VudFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtyZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbl0gUXVlcnlMYXRlbmN5U3RhdHMgcmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb25cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlMYXRlbmN5U3RhdHMuXG4gICAgICogQGV4cG9ydHMgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeUxhdGVuY3lTdGF0cy5cbiAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lRdWVyeUxhdGVuY3lTdGF0cz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFF1ZXJ5TGF0ZW5jeVN0YXRzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5sYXRlbmN5Q291bnQgPSBbXTtcbiAgICAgICAgdGhpcy5jYWNoZUxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICB0aGlzLnB1YmxpY0NhY2hlVHRsQ291bnQgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2YXRlQ2FjaGVUdGxDb3VudCA9IFtdO1xuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIGxhdGVuY3lDb3VudC5cbiAgICAgKiBAbWVtYmVyIHtBcnJheS48bnVtYmVyPn0gbGF0ZW5jeUNvdW50XG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLmxhdGVuY3lDb3VudCA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeUxhdGVuY3lTdGF0cyByZXF1ZXN0Q291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSByZXF1ZXN0Q291bnRcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUucmVxdWVzdENvdW50ID0gMDtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIGNhY2hlSGl0cy5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGNhY2hlSGl0c1xuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5jYWNoZUhpdHMgPSAwO1xuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgcGVyc2lzdGVkUXVlcnlIaXRzLlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gcGVyc2lzdGVkUXVlcnlIaXRzXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLnBlcnNpc3RlZFF1ZXJ5SGl0cyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeUxhdGVuY3lTdGF0cyBwZXJzaXN0ZWRRdWVyeU1pc3Nlcy5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHBlcnNpc3RlZFF1ZXJ5TWlzc2VzXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzID0gMDtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIGNhY2hlTGF0ZW5jeUNvdW50LlxuICAgICAqIEBtZW1iZXIge0FycmF5LjxudW1iZXI+fSBjYWNoZUxhdGVuY3lDb3VudFxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5jYWNoZUxhdGVuY3lDb3VudCA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeUxhdGVuY3lTdGF0cyByb290RXJyb3JTdGF0cy5cbiAgICAgKiBAbWVtYmVyIHtJUGF0aEVycm9yU3RhdHN8bnVsbHx1bmRlZmluZWR9IHJvb3RFcnJvclN0YXRzXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLnJvb3RFcnJvclN0YXRzID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIHJlcXVlc3RzV2l0aEVycm9yc0NvdW50LlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gcmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgcHVibGljQ2FjaGVUdGxDb3VudC5cbiAgICAgKiBAbWVtYmVyIHtBcnJheS48bnVtYmVyPn0gcHVibGljQ2FjaGVUdGxDb3VudFxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5wdWJsaWNDYWNoZVR0bENvdW50ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIHByaXZhdGVDYWNoZVR0bENvdW50LlxuICAgICAqIEBtZW1iZXIge0FycmF5LjxudW1iZXI+fSBwcml2YXRlQ2FjaGVUdGxDb3VudFxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5wcml2YXRlQ2FjaGVUdGxDb3VudCA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeUxhdGVuY3lTdGF0cyByZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSByZWdpc3RlcmVkT3BlcmF0aW9uQ291bnRcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50ID0gMDtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIGZvcmJpZGRlbk9wZXJhdGlvbkNvdW50LlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gZm9yYmlkZGVuT3BlcmF0aW9uQ291bnRcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgcmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24uXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSByZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvblxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5TGF0ZW5jeVN0YXRzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVF1ZXJ5TGF0ZW5jeVN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1F1ZXJ5TGF0ZW5jeVN0YXRzfSBRdWVyeUxhdGVuY3lTdGF0cyBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlMYXRlbmN5U3RhdHMocHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBRdWVyeUxhdGVuY3lTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVF1ZXJ5TGF0ZW5jeVN0YXRzfSBtZXNzYWdlIFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdENvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZXF1ZXN0Q291bnRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLnVpbnQ2NChtZXNzYWdlLnJlcXVlc3RDb3VudCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNhY2hlSGl0cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY2FjaGVIaXRzXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS51aW50NjQobWVzc2FnZS5jYWNoZUhpdHMpO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlcnNpc3RlZFF1ZXJ5SGl0c1wiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikudWludDY0KG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlcnNpc3RlZFF1ZXJ5TWlzc2VzXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAwID0qLzQwKS51aW50NjQobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3Nlcyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb3RFcnJvclN0YXRzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyb290RXJyb3JTdGF0c1wiKSlcbiAgICAgICAgICAgICRyb290LlBhdGhFcnJvclN0YXRzLmVuY29kZShtZXNzYWdlLnJvb3RFcnJvclN0YXRzLCB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDIgPSovNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMCA9Ki82NCkudWludDY0KG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpO1xuICAgICAgICBpZiAobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTEsIHdpcmVUeXBlIDAgPSovODgpLnVpbnQ2NChtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJmb3JiaWRkZW5PcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTIsIHdpcmVUeXBlIDAgPSovOTYpLnVpbnQ2NChtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50KTtcbiAgICAgICAgdmFyIGFycmF5MTM7XG4gICAgICAgIGlmIChtZXNzYWdlLmxhdGVuY3lDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UubGF0ZW5jeUNvdW50LnRvQXJyYXkpXG4gICAgICAgICAgICBhcnJheTEzID0gbWVzc2FnZS5sYXRlbmN5Q291bnQudG9BcnJheSgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheTEzID0gbWVzc2FnZS5sYXRlbmN5Q291bnQ7XG4gICAgICAgIGlmIChhcnJheTEzICE9IG51bGwgJiYgYXJyYXkxMy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTMsIHdpcmVUeXBlIDIgPSovMTA2KS5mb3JrKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5MTMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnNpbnQ2NChhcnJheTEzW2ldKTtcbiAgICAgICAgICAgIHdyaXRlci5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJyYXkxNDtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50LnRvQXJyYXkpXG4gICAgICAgICAgICBhcnJheTE0ID0gbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudC50b0FycmF5KCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFycmF5MTQgPSBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50O1xuICAgICAgICBpZiAoYXJyYXkxNCAhPSBudWxsICYmIGFycmF5MTQubGVuZ3RoKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDE0LCB3aXJlVHlwZSAyID0qLzExNCkuZm9yaygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheTE0Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIHdyaXRlci5zaW50NjQoYXJyYXkxNFtpXSk7XG4gICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFycmF5MTU7XG4gICAgICAgIGlmIChtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQudG9BcnJheSlcbiAgICAgICAgICAgIGFycmF5MTUgPSBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQudG9BcnJheSgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheTE1ID0gbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50O1xuICAgICAgICBpZiAoYXJyYXkxNSAhPSBudWxsICYmIGFycmF5MTUubGVuZ3RoKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDE1LCB3aXJlVHlwZSAyID0qLzEyMikuZm9yaygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheTE1Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIHdyaXRlci5zaW50NjQoYXJyYXkxNVtpXSk7XG4gICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFycmF5MTY7XG4gICAgICAgIGlmIChtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudC50b0FycmF5KVxuICAgICAgICAgICAgYXJyYXkxNiA9IG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQudG9BcnJheSgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheTE2ID0gbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudDtcbiAgICAgICAgaWYgKGFycmF5MTYgIT0gbnVsbCAmJiBhcnJheTE2Lmxlbmd0aCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxNiwgd2lyZVR5cGUgMiA9Ki8xMzApLmZvcmsoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkxNi5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICB3cml0ZXIuc2ludDY0KGFycmF5MTZbaV0pO1xuICAgICAgICAgICAgd3JpdGVyLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvblwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTcsIHdpcmVUeXBlIDAgPSovMTM2KS51aW50NjQobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbik7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBRdWVyeUxhdGVuY3lTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVF1ZXJ5TGF0ZW5jeVN0YXRzfSBtZXNzYWdlIFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICogQHJldHVybnMge1F1ZXJ5TGF0ZW5jeVN0YXRzfSBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuUXVlcnlMYXRlbmN5U3RhdHMoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmxhdGVuY3lDb3VudCAmJiBtZXNzYWdlLmxhdGVuY3lDb3VudC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhdGVuY3lDb3VudC5wdXNoKHJlYWRlci5zaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF0ZW5jeUNvdW50LnB1c2gocmVhZGVyLnNpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RDb3VudCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhY2hlSGl0cyA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0cyA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50ICYmIG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50LnB1c2gocmVhZGVyLnNpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudC5wdXNoKHJlYWRlci5zaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yb290RXJyb3JTdGF0cyA9ICRyb290LlBhdGhFcnJvclN0YXRzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50ICYmIG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50LnB1c2gocmVhZGVyLnNpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50LnB1c2gocmVhZGVyLnNpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudCAmJiBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50Lmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudC5wdXNoKHJlYWRlci5zaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQucHVzaChyZWFkZXIuc2ludDY0KCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEByZXR1cm5zIHtRdWVyeUxhdGVuY3lTdGF0c30gUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyBhIFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2UuXG4gICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLmxhdGVuY3lDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYXRlbmN5Q291bnRcIikpIHtcbiAgICAgICAgICAgIHZhciBhcnJheTEzO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGF0ZW5jeUNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5sYXRlbmN5Q291bnQudG9BcnJheSlcbiAgICAgICAgICAgICAgICBhcnJheTEzID0gbWVzc2FnZS5sYXRlbmN5Q291bnQudG9BcnJheSgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGFycmF5MTMgPSBtZXNzYWdlLmxhdGVuY3lDb3VudDtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheTEzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJsYXRlbmN5Q291bnQ6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5MTMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIoYXJyYXkxM1tpXSkgJiYgIShhcnJheTEzW2ldICYmICR1dGlsLmlzSW50ZWdlcihhcnJheTEzW2ldLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKGFycmF5MTNbaV0uaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsYXRlbmN5Q291bnQ6IGludGVnZXJ8TG9uZ1tdIGV4cGVjdGVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdENvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdENvdW50KSAmJiAhKG1lc3NhZ2UucmVxdWVzdENvdW50ICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RDb3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RDb3VudC5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicmVxdWVzdENvdW50OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVIaXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNhY2hlSGl0c1wiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuY2FjaGVIaXRzKSAmJiAhKG1lc3NhZ2UuY2FjaGVIaXRzICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmNhY2hlSGl0cy5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmNhY2hlSGl0cy5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2FjaGVIaXRzOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBlcnNpc3RlZFF1ZXJ5SGl0c1wiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzKSAmJiAhKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0cy5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0cy5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicGVyc2lzdGVkUXVlcnlIaXRzOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGVyc2lzdGVkUXVlcnlNaXNzZXNcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzKSAmJiAhKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3Nlcy5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicGVyc2lzdGVkUXVlcnlNaXNzZXM6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjYWNoZUxhdGVuY3lDb3VudFwiKSkge1xuICAgICAgICAgICAgdmFyIGFycmF5MTQ7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQudG9BcnJheSlcbiAgICAgICAgICAgICAgICBhcnJheTE0ID0gbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudC50b0FycmF5KCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYXJyYXkxNCA9IG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQ7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkxNCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2FjaGVMYXRlbmN5Q291bnQ6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5MTQubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIoYXJyYXkxNFtpXSkgJiYgIShhcnJheTE0W2ldICYmICR1dGlsLmlzSW50ZWdlcihhcnJheTE0W2ldLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKGFycmF5MTRbaV0uaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjYWNoZUxhdGVuY3lDb3VudDogaW50ZWdlcnxMb25nW10gZXhwZWN0ZWRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yb290RXJyb3JTdGF0cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb290RXJyb3JTdGF0c1wiKSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuUGF0aEVycm9yU3RhdHMudmVyaWZ5KG1lc3NhZ2Uucm9vdEVycm9yU3RhdHMpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJvb3RFcnJvclN0YXRzLlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50KSAmJiAhKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudC5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicmVxdWVzdHNXaXRoRXJyb3JzQ291bnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInB1YmxpY0NhY2hlVHRsQ291bnRcIikpIHtcbiAgICAgICAgICAgIHZhciBhcnJheTE1O1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudC50b0FycmF5KVxuICAgICAgICAgICAgICAgIGFycmF5MTUgPSBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQudG9BcnJheSgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGFycmF5MTUgPSBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQ7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkxNSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicHVibGljQ2FjaGVUdGxDb3VudDogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkxNS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihhcnJheTE1W2ldKSAmJiAhKGFycmF5MTVbaV0gJiYgJHV0aWwuaXNJbnRlZ2VyKGFycmF5MTVbaV0ubG93KSAmJiAkdXRpbC5pc0ludGVnZXIoYXJyYXkxNVtpXS5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInB1YmxpY0NhY2hlVHRsQ291bnQ6IGludGVnZXJ8TG9uZ1tdIGV4cGVjdGVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicHJpdmF0ZUNhY2hlVHRsQ291bnRcIikpIHtcbiAgICAgICAgICAgIHZhciBhcnJheTE2O1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50LnRvQXJyYXkpXG4gICAgICAgICAgICAgICAgYXJyYXkxNiA9IG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQudG9BcnJheSgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGFycmF5MTYgPSBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50O1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5MTYpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInByaXZhdGVDYWNoZVR0bENvdW50OiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheTE2Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKGFycmF5MTZbaV0pICYmICEoYXJyYXkxNltpXSAmJiAkdXRpbC5pc0ludGVnZXIoYXJyYXkxNltpXS5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihhcnJheTE2W2ldLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicHJpdmF0ZUNhY2hlVHRsQ291bnQ6IGludGVnZXJ8TG9uZ1tdIGV4cGVjdGVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50KSAmJiAhKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50ICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudC5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZm9yYmlkZGVuT3BlcmF0aW9uQ291bnRcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50KSAmJiAhKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudC5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvblwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24pICYmICEobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbi5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbjogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7UXVlcnlMYXRlbmN5U3RhdHN9IG1lc3NhZ2UgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC5sYXRlbmN5Q291bnQgPSBbXTtcbiAgICAgICAgICAgIG9iamVjdC5jYWNoZUxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICAgICAgb2JqZWN0LnB1YmxpY0NhY2hlVHRsQ291bnQgPSBbXTtcbiAgICAgICAgICAgIG9iamVjdC5wcml2YXRlQ2FjaGVUdGxDb3VudCA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICBvYmplY3QucmVxdWVzdENvdW50ID0gMDtcbiAgICAgICAgICAgIG9iamVjdC5jYWNoZUhpdHMgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LnBlcnNpc3RlZFF1ZXJ5SGl0cyA9IDA7XG4gICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlNaXNzZXMgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LnJvb3RFcnJvclN0YXRzID0gbnVsbDtcbiAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IDA7XG4gICAgICAgICAgICBvYmplY3QucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50ID0gMDtcbiAgICAgICAgICAgIG9iamVjdC5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCA9IDA7XG4gICAgICAgICAgICBvYmplY3QucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXF1ZXN0Q291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UucmVxdWVzdENvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0Q291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5yZXF1ZXN0Q291bnQpIDogbWVzc2FnZS5yZXF1ZXN0Q291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RDb3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5yZXF1ZXN0Q291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UucmVxdWVzdENvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5yZXF1ZXN0Q291bnQuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLnJlcXVlc3RDb3VudDtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVIaXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNhY2hlSGl0c1wiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5jYWNoZUhpdHMgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNhY2hlSGl0cyA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLmNhY2hlSGl0cykgOiBtZXNzYWdlLmNhY2hlSGl0cztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QuY2FjaGVIaXRzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmNhY2hlSGl0cykgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5jYWNoZUhpdHMubG93ID4+PiAwLCBtZXNzYWdlLmNhY2hlSGl0cy5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UuY2FjaGVIaXRzO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGVyc2lzdGVkUXVlcnlIaXRzXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0cyA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlIaXRzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzKSA6IG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5wZXJzaXN0ZWRRdWVyeUhpdHMgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0cy5sb3cgPj4+IDAsIG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHM7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBlcnNpc3RlZFF1ZXJ5TWlzc2VzXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5wZXJzaXN0ZWRRdWVyeU1pc3NlcyA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzKSA6IG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXM7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LnBlcnNpc3RlZFF1ZXJ5TWlzc2VzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzLmxvdyA+Pj4gMCwgbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3Nlcy5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXM7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb3RFcnJvclN0YXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJvb3RFcnJvclN0YXRzXCIpKVxuICAgICAgICAgICAgb2JqZWN0LnJvb3RFcnJvclN0YXRzID0gJHJvb3QuUGF0aEVycm9yU3RhdHMudG9PYmplY3QobWVzc2FnZS5yb290RXJyb3JTdGF0cywgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50KSA6IG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50KSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQ7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZWdpc3RlcmVkT3BlcmF0aW9uQ291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQpIDogbWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudDtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZm9yYmlkZGVuT3BlcmF0aW9uQ291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQpIDogbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQubG93ID4+PiAwLCBtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50LmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudDtcbiAgICAgICAgaWYgKG1lc3NhZ2UubGF0ZW5jeUNvdW50ICYmIG1lc3NhZ2UubGF0ZW5jeUNvdW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LmxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLmxhdGVuY3lDb3VudC5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGF0ZW5jeUNvdW50W2pdID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdKSA6IG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmxhdGVuY3lDb3VudFtqXSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5sYXRlbmN5Q291bnRbal0pIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdLmxvdyA+Pj4gMCwgbWVzc2FnZS5sYXRlbmN5Q291bnRbal0uaGlnaCA+Pj4gMCkudG9OdW1iZXIoKSA6IG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50ICYmIG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QuY2FjaGVMYXRlbmN5Q291bnQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudC5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnRbal0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jYWNoZUxhdGVuY3lDb3VudFtqXSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50W2pdKSA6IG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnRbal07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuY2FjaGVMYXRlbmN5Q291bnRbal0gPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnRbal0pIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnRbal0ubG93ID4+PiAwLCBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50W2pdLmhpZ2ggPj4+IDApLnRvTnVtYmVyKCkgOiBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50W2pdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQgJiYgbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LnB1YmxpY0NhY2hlVHRsQ291bnQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50Lmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50W2pdID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucHVibGljQ2FjaGVUdGxDb3VudFtqXSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnRbal0pIDogbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50W2pdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnB1YmxpY0NhY2hlVHRsQ291bnRbal0gPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudFtqXSkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50W2pdLmxvdyA+Pj4gMCwgbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50W2pdLmhpZ2ggPj4+IDApLnRvTnVtYmVyKCkgOiBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnRbal07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQgJiYgbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iamVjdC5wcml2YXRlQ2FjaGVUdGxDb3VudCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50Lmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudFtqXSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnByaXZhdGVDYWNoZVR0bENvdW50W2pdID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnRbal0pIDogbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudFtqXTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wcml2YXRlQ2FjaGVUdGxDb3VudFtqXSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudFtqXSkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudFtqXS5sb3cgPj4+IDAsIG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnRbal0uaGlnaCA+Pj4gMCkudG9OdW1iZXIoKSA6IG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnRbal07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb25cIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24pIDogbWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbjtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24gPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24pIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24ubG93ID4+PiAwLCBtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbjtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBRdWVyeUxhdGVuY3lTdGF0cyB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBRdWVyeUxhdGVuY3lTdGF0cztcbn0pKCk7XG5cbiRyb290LlN0YXRzQ29udGV4dCA9IChmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgYSBTdGF0c0NvbnRleHQuXG4gICAgICogQGV4cG9ydHMgSVN0YXRzQ29udGV4dFxuICAgICAqIEBpbnRlcmZhY2UgSVN0YXRzQ29udGV4dFxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtjbGllbnROYW1lXSBTdGF0c0NvbnRleHQgY2xpZW50TmFtZVxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtjbGllbnRWZXJzaW9uXSBTdGF0c0NvbnRleHQgY2xpZW50VmVyc2lvblxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBTdGF0c0NvbnRleHQuXG4gICAgICogQGV4cG9ydHMgU3RhdHNDb250ZXh0XG4gICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgU3RhdHNDb250ZXh0LlxuICAgICAqIEBpbXBsZW1lbnRzIElTdGF0c0NvbnRleHRcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lTdGF0c0NvbnRleHQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdGF0c0NvbnRleHQocHJvcGVydGllcykge1xuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXRzQ29udGV4dCBjbGllbnROYW1lLlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gY2xpZW50TmFtZVxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBTdGF0c0NvbnRleHQucHJvdG90eXBlLmNsaWVudE5hbWUgPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogU3RhdHNDb250ZXh0IGNsaWVudFZlcnNpb24uXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBjbGllbnRWZXJzaW9uXG4gICAgICogQG1lbWJlcm9mIFN0YXRzQ29udGV4dFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFN0YXRzQ29udGV4dC5wcm90b3R5cGUuY2xpZW50VmVyc2lvbiA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFN0YXRzQ29udGV4dCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJU3RhdHNDb250ZXh0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1N0YXRzQ29udGV4dH0gU3RhdHNDb250ZXh0IGluc3RhbmNlXG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhdHNDb250ZXh0KHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU3RhdHNDb250ZXh0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFN0YXRzQ29udGV4dC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFN0YXRzQ29udGV4dFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lTdGF0c0NvbnRleHR9IG1lc3NhZ2UgU3RhdHNDb250ZXh0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBTdGF0c0NvbnRleHQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNsaWVudE5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNsaWVudE5hbWVcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLmNsaWVudE5hbWUpO1xuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnRWZXJzaW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjbGllbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5zdHJpbmcobWVzc2FnZS5jbGllbnRWZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFN0YXRzQ29udGV4dCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBTdGF0c0NvbnRleHQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJU3RhdHNDb250ZXh0fSBtZXNzYWdlIFN0YXRzQ29udGV4dCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBTdGF0c0NvbnRleHQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICogQG1lbWJlcm9mIFN0YXRzQ29udGV4dFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAqIEByZXR1cm5zIHtTdGF0c0NvbnRleHR9IFN0YXRzQ29udGV4dFxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlN0YXRzQ29udGV4dCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jbGllbnROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2xpZW50VmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgU3RhdHNDb250ZXh0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1N0YXRzQ29udGV4dH0gU3RhdHNDb250ZXh0XG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBTdGF0c0NvbnRleHQuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgU3RhdHNDb250ZXh0IG1lc3NhZ2UuXG4gICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgKi9cbiAgICBTdGF0c0NvbnRleHQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2xpZW50TmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjbGllbnROYW1lXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmNsaWVudE5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImNsaWVudE5hbWU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnRWZXJzaW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudFZlcnNpb25cIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuY2xpZW50VmVyc2lvbikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2xpZW50VmVyc2lvbjogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBTdGF0c0NvbnRleHQgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtTdGF0c0NvbnRleHR9IG1lc3NhZ2UgU3RhdHNDb250ZXh0XG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgKi9cbiAgICBTdGF0c0NvbnRleHQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgb2JqZWN0LmNsaWVudE5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LmNsaWVudFZlcnNpb24gPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNsaWVudE5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2xpZW50TmFtZVwiKSlcbiAgICAgICAgICAgIG9iamVjdC5jbGllbnROYW1lID0gbWVzc2FnZS5jbGllbnROYW1lO1xuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnRWZXJzaW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudFZlcnNpb25cIikpXG4gICAgICAgICAgICBvYmplY3QuY2xpZW50VmVyc2lvbiA9IG1lc3NhZ2UuY2xpZW50VmVyc2lvbjtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBTdGF0c0NvbnRleHQgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIFN0YXRzQ29udGV4dFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBTdGF0c0NvbnRleHQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBTdGF0c0NvbnRleHQ7XG59KSgpO1xuXG4kcm9vdC5Db250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMuXG4gICAgICogQGV4cG9ydHMgSUNvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW50ZXJmYWNlIElDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHByb3BlcnR5IHtJUXVlcnlMYXRlbmN5U3RhdHN8bnVsbH0gW3F1ZXJ5TGF0ZW5jeVN0YXRzXSBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIHF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHByb3BlcnR5IHtJU3RhdHNDb250ZXh0fG51bGx9IFtjb250ZXh0XSBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIGNvbnRleHRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy5cbiAgICAgKiBAaW1wbGVtZW50cyBJQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIHF1ZXJ5TGF0ZW5jeVN0YXRzLlxuICAgICAqIEBtZW1iZXIge0lRdWVyeUxhdGVuY3lTdGF0c3xudWxsfHVuZGVmaW5lZH0gcXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLnF1ZXJ5TGF0ZW5jeVN0YXRzID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgY29udGV4dC5cbiAgICAgKiBAbWVtYmVyIHtJU3RhdHNDb250ZXh0fG51bGx8dW5kZWZpbmVkfSBjb250ZXh0XG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5jb250ZXh0ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7Q29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c30gQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBpbnN0YW5jZVxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzKHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzfSBtZXNzYWdlIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJxdWVyeUxhdGVuY3lTdGF0c1wiKSlcbiAgICAgICAgICAgICRyb290LlF1ZXJ5TGF0ZW5jeVN0YXRzLmVuY29kZShtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNvbnRleHQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNvbnRleHRcIikpXG4gICAgICAgICAgICAkcm9vdC5TdGF0c0NvbnRleHQuZW5jb2RlKG1lc3NhZ2UuY29udGV4dCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzfSBtZXNzYWdlIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7Q29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c30gQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5Db250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzID0gJHJvb3QuUXVlcnlMYXRlbmN5U3RhdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRleHQgPSAkcm9vdC5TdGF0c0NvbnRleHQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcmV0dXJucyB7Q29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c30gQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgYSBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2UuXG4gICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJxdWVyeUxhdGVuY3lTdGF0c1wiKSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuUXVlcnlMYXRlbmN5U3RhdHMudmVyaWZ5KG1lc3NhZ2UucXVlcnlMYXRlbmN5U3RhdHMpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInF1ZXJ5TGF0ZW5jeVN0YXRzLlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuY29udGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb250ZXh0XCIpKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5TdGF0c0NvbnRleHQudmVyaWZ5KG1lc3NhZ2UuY29udGV4dCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGV4dC5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0NvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHN9IG1lc3NhZ2UgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICBvYmplY3QucXVlcnlMYXRlbmN5U3RhdHMgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmNvbnRleHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInF1ZXJ5TGF0ZW5jeVN0YXRzXCIpKVxuICAgICAgICAgICAgb2JqZWN0LnF1ZXJ5TGF0ZW5jeVN0YXRzID0gJHJvb3QuUXVlcnlMYXRlbmN5U3RhdHMudG9PYmplY3QobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cywgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNvbnRleHQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY29udGV4dFwiKSlcbiAgICAgICAgICAgIG9iamVjdC5jb250ZXh0ID0gJHJvb3QuU3RhdHNDb250ZXh0LnRvT2JqZWN0KG1lc3NhZ2UuY29udGV4dCwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cztcbn0pKCk7XG5cbiRyb290LkNvbnRleHR1YWxpemVkVHlwZVN0YXRzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLlxuICAgICAqIEBleHBvcnRzIElDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEBpbnRlcmZhY2UgSUNvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQHByb3BlcnR5IHtJU3RhdHNDb250ZXh0fG51bGx9IFtjb250ZXh0XSBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBjb250ZXh0XG4gICAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZyxJVHlwZVN0YXQ+fG51bGx9IFtwZXJUeXBlU3RhdF0gQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgcGVyVHlwZVN0YXRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMuXG4gICAgICogQGV4cG9ydHMgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy5cbiAgICAgKiBAaW1wbGVtZW50cyBJQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFR5cGVTdGF0cz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbnRleHR1YWxpemVkVHlwZVN0YXRzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5wZXJUeXBlU3RhdCA9IHt9O1xuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIGNvbnRleHQuXG4gICAgICogQG1lbWJlciB7SVN0YXRzQ29udGV4dHxudWxsfHVuZGVmaW5lZH0gY29udGV4dFxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLnByb3RvdHlwZS5jb250ZXh0ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIHBlclR5cGVTdGF0LlxuICAgICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLElUeXBlU3RhdD59IHBlclR5cGVTdGF0XG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMucHJvdG90eXBlLnBlclR5cGVTdGF0ID0gJHV0aWwuZW1wdHlPYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IENvbnRleHR1YWxpemVkVHlwZVN0YXRzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkVHlwZVN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkVHlwZVN0YXRzfSBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBpbnN0YW5jZVxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMocHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkVHlwZVN0YXRzfSBtZXNzYWdlIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY29udGV4dCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY29udGV4dFwiKSlcbiAgICAgICAgICAgICRyb290LlN0YXRzQ29udGV4dC5lbmNvZGUobWVzc2FnZS5jb250ZXh0LCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlclR5cGVTdGF0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwZXJUeXBlU3RhdFwiKSlcbiAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnBlclR5cGVTdGF0KSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICAkcm9vdC5UeXBlU3RhdC5lbmNvZGUobWVzc2FnZS5wZXJUeXBlU3RhdFtrZXlzW2ldXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFR5cGVTdGF0c30gbWVzc2FnZSBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAqIEByZXR1cm5zIHtDb250ZXh0dWFsaXplZFR5cGVTdGF0c30gQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkNvbnRleHR1YWxpemVkVHlwZVN0YXRzKCksIGtleTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGV4dCA9ICRyb290LlN0YXRzQ29udGV4dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwKCkucG9zKys7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGVyVHlwZVN0YXQgPT09ICR1dGlsLmVtcHR5T2JqZWN0KVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBlclR5cGVTdGF0ID0ge307XG4gICAgICAgICAgICAgICAga2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIHJlYWRlci5wb3MrKztcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBlclR5cGVTdGF0W2tleV0gPSAkcm9vdC5UeXBlU3RhdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkVHlwZVN0YXRzfSBDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY29udGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb250ZXh0XCIpKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5TdGF0c0NvbnRleHQudmVyaWZ5KG1lc3NhZ2UuY29udGV4dCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGV4dC5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBlclR5cGVTdGF0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBlclR5cGVTdGF0XCIpKSB7XG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzT2JqZWN0KG1lc3NhZ2UucGVyVHlwZVN0YXQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInBlclR5cGVTdGF0OiBvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnBlclR5cGVTdGF0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHlwZVN0YXQudmVyaWZ5KG1lc3NhZ2UucGVyVHlwZVN0YXRba2V5W2ldXSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwZXJUeXBlU3RhdC5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7Q29udGV4dHVhbGl6ZWRUeXBlU3RhdHN9IG1lc3NhZ2UgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMub2JqZWN0cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgb2JqZWN0LnBlclR5cGVTdGF0ID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgb2JqZWN0LmNvbnRleHQgPSBudWxsO1xuICAgICAgICBpZiAobWVzc2FnZS5jb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbnRleHRcIikpXG4gICAgICAgICAgICBvYmplY3QuY29udGV4dCA9ICRyb290LlN0YXRzQ29udGV4dC50b09iamVjdChtZXNzYWdlLmNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgICB2YXIga2V5czI7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlclR5cGVTdGF0ICYmIChrZXlzMiA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucGVyVHlwZVN0YXQpKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iamVjdC5wZXJUeXBlU3RhdCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzMi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBvYmplY3QucGVyVHlwZVN0YXRba2V5czJbal1dID0gJHJvb3QuVHlwZVN0YXQudG9PYmplY3QobWVzc2FnZS5wZXJUeXBlU3RhdFtrZXlzMltqXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHM7XG59KSgpO1xuXG4kcm9vdC5GaWVsZFN0YXQgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRmllbGRTdGF0LlxuICAgICAqIEBleHBvcnRzIElGaWVsZFN0YXRcbiAgICAgKiBAaW50ZXJmYWNlIElGaWVsZFN0YXRcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbcmV0dXJuVHlwZV0gRmllbGRTdGF0IHJldHVyblR5cGVcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZXJyb3JzQ291bnRdIEZpZWxkU3RhdCBlcnJvcnNDb3VudFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtvYnNlcnZlZEV4ZWN1dGlvbkNvdW50XSBGaWVsZFN0YXQgb2JzZXJ2ZWRFeGVjdXRpb25Db3VudFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtlc3RpbWF0ZWRFeGVjdXRpb25Db3VudF0gRmllbGRTdGF0IGVzdGltYXRlZEV4ZWN1dGlvbkNvdW50XG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3JlcXVlc3RzV2l0aEVycm9yc0NvdW50XSBGaWVsZFN0YXQgcmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcbiAgICAgKiBAcHJvcGVydHkgeyRwcm90b2J1Zi5Ub0FycmF5LjxudW1iZXI+fEFycmF5LjxudW1iZXI+fG51bGx9IFtsYXRlbmN5Q291bnRdIEZpZWxkU3RhdCBsYXRlbmN5Q291bnRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRmllbGRTdGF0LlxuICAgICAqIEBleHBvcnRzIEZpZWxkU3RhdFxuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEZpZWxkU3RhdC5cbiAgICAgKiBAaW1wbGVtZW50cyBJRmllbGRTdGF0XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtJRmllbGRTdGF0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gRmllbGRTdGF0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5sYXRlbmN5Q291bnQgPSBbXTtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWVsZFN0YXQgcmV0dXJuVHlwZS5cbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHJldHVyblR5cGVcbiAgICAgKiBAbWVtYmVyb2YgRmllbGRTdGF0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgRmllbGRTdGF0LnByb3RvdHlwZS5yZXR1cm5UeXBlID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIEZpZWxkU3RhdCBlcnJvcnNDb3VudC5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGVycm9yc0NvdW50XG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIEZpZWxkU3RhdC5wcm90b3R5cGUuZXJyb3JzQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogRmllbGRTdGF0IG9ic2VydmVkRXhlY3V0aW9uQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBvYnNlcnZlZEV4ZWN1dGlvbkNvdW50XG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIEZpZWxkU3RhdC5wcm90b3R5cGUub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBGaWVsZFN0YXQgZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBlc3RpbWF0ZWRFeGVjdXRpb25Db3VudFxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQucHJvdG90eXBlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ID0gMDtcblxuICAgIC8qKlxuICAgICAqIEZpZWxkU3RhdCByZXF1ZXN0c1dpdGhFcnJvcnNDb3VudC5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHJlcXVlc3RzV2l0aEVycm9yc0NvdW50XG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIEZpZWxkU3RhdC5wcm90b3R5cGUucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogRmllbGRTdGF0IGxhdGVuY3lDb3VudC5cbiAgICAgKiBAbWVtYmVyIHtBcnJheS48bnVtYmVyPn0gbGF0ZW5jeUNvdW50XG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIEZpZWxkU3RhdC5wcm90b3R5cGUubGF0ZW5jeUNvdW50ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgRmllbGRTdGF0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lGaWVsZFN0YXQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7RmllbGRTdGF0fSBGaWVsZFN0YXQgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFN0YXQocHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBGaWVsZFN0YXQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgRmllbGRTdGF0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgRmllbGRTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SUZpZWxkU3RhdH0gbWVzc2FnZSBGaWVsZFN0YXQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIEZpZWxkU3RhdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmV0dXJuVHlwZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmV0dXJuVHlwZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuc3RyaW5nKG1lc3NhZ2UucmV0dXJuVHlwZSk7XG4gICAgICAgIGlmIChtZXNzYWdlLmVycm9yc0NvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikudWludDY0KG1lc3NhZ2UuZXJyb3JzQ291bnQpO1xuICAgICAgICBpZiAobWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJvYnNlcnZlZEV4ZWN1dGlvbkNvdW50XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAwID0qLzQwKS51aW50NjQobWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50KTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAwID0qLzQ4KS51aW50NjQobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCk7XG4gICAgICAgIHZhciBhcnJheTk7XG4gICAgICAgIGlmIChtZXNzYWdlLmxhdGVuY3lDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UubGF0ZW5jeUNvdW50LnRvQXJyYXkpXG4gICAgICAgICAgICBhcnJheTkgPSBtZXNzYWdlLmxhdGVuY3lDb3VudC50b0FycmF5KCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFycmF5OSA9IG1lc3NhZ2UubGF0ZW5jeUNvdW50O1xuICAgICAgICBpZiAoYXJyYXk5ICE9IG51bGwgJiYgYXJyYXk5Lmxlbmd0aCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA5LCB3aXJlVHlwZSAyID0qLzc0KS5mb3JrKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5OS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICB3cml0ZXIuc2ludDY0KGFycmF5OVtpXSk7XG4gICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVzdGltYXRlZEV4ZWN1dGlvbkNvdW50XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxMCwgd2lyZVR5cGUgMCA9Ki84MCkudWludDY0KG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQpO1xuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmllbGRTdGF0IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEZpZWxkU3RhdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lGaWVsZFN0YXR9IG1lc3NhZ2UgRmllbGRTdGF0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIEZpZWxkU3RhdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgRmllbGRTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICogQHJldHVybnMge0ZpZWxkU3RhdH0gRmllbGRTdGF0XG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuRmllbGRTdGF0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJldHVyblR5cGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvcnNDb3VudCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmxhdGVuY3lDb3VudCAmJiBtZXNzYWdlLmxhdGVuY3lDb3VudC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhdGVuY3lDb3VudC5wdXNoKHJlYWRlci5zaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF0ZW5jeUNvdW50LnB1c2gocmVhZGVyLnNpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgRmllbGRTdGF0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge0ZpZWxkU3RhdH0gRmllbGRTdGF0XG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgRmllbGRTdGF0IG1lc3NhZ2UuXG4gICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmV0dXJuVHlwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXR1cm5UeXBlXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnJldHVyblR5cGUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJldHVyblR5cGU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5lcnJvcnNDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZXJyb3JzQ291bnQpICYmICEobWVzc2FnZS5lcnJvcnNDb3VudCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lcnJvcnNDb3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVycm9yc0NvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvcnNDb3VudDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2JzZXJ2ZWRFeGVjdXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCkgJiYgIShtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQuaGlnaCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9ic2VydmVkRXhlY3V0aW9uQ291bnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlc3RpbWF0ZWRFeGVjdXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQpICYmICEobWVzc2FnZS5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJlc3RpbWF0ZWRFeGVjdXRpb25Db3VudDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCkgJiYgIShtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQuaGlnaCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UubGF0ZW5jeUNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhdGVuY3lDb3VudFwiKSkge1xuICAgICAgICAgICAgdmFyIGFycmF5OTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhdGVuY3lDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UubGF0ZW5jeUNvdW50LnRvQXJyYXkpXG4gICAgICAgICAgICAgICAgYXJyYXk5ID0gbWVzc2FnZS5sYXRlbmN5Q291bnQudG9BcnJheSgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGFycmF5OSA9IG1lc3NhZ2UubGF0ZW5jeUNvdW50O1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5OSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibGF0ZW5jeUNvdW50OiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheTkubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIoYXJyYXk5W2ldKSAmJiAhKGFycmF5OVtpXSAmJiAkdXRpbC5pc0ludGVnZXIoYXJyYXk5W2ldLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKGFycmF5OVtpXS5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxhdGVuY3lDb3VudDogaW50ZWdlcnxMb25nW10gZXhwZWN0ZWRcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRmllbGRTdGF0IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgRmllbGRTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7RmllbGRTdGF0fSBtZXNzYWdlIEZpZWxkU3RhdFxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICovXG4gICAgRmllbGRTdGF0LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QubGF0ZW5jeUNvdW50ID0gW107XG4gICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICBvYmplY3QucmV0dXJuVHlwZSA9IFwiXCI7XG4gICAgICAgICAgICBvYmplY3QuZXJyb3JzQ291bnQgPSAwO1xuICAgICAgICAgICAgb2JqZWN0Lm9ic2VydmVkRXhlY3V0aW9uQ291bnQgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gMDtcbiAgICAgICAgICAgIG9iamVjdC5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmV0dXJuVHlwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXR1cm5UeXBlXCIpKVxuICAgICAgICAgICAgb2JqZWN0LnJldHVyblR5cGUgPSBtZXNzYWdlLnJldHVyblR5cGU7XG4gICAgICAgIGlmIChtZXNzYWdlLmVycm9yc0NvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmVycm9yc0NvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5lcnJvcnNDb3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLmVycm9yc0NvdW50KSA6IG1lc3NhZ2UuZXJyb3JzQ291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LmVycm9yc0NvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmVycm9yc0NvdW50KSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLmVycm9yc0NvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5lcnJvcnNDb3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UuZXJyb3JzQ291bnQ7XG4gICAgICAgIGlmIChtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2JzZXJ2ZWRFeGVjdXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCkgOiBtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm9ic2VydmVkRXhlY3V0aW9uQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50LmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50O1xuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3QucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCkgOiBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudC5sb3cgPj4+IDAsIG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50O1xuICAgICAgICBpZiAobWVzc2FnZS5sYXRlbmN5Q291bnQgJiYgbWVzc2FnZS5sYXRlbmN5Q291bnQubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QubGF0ZW5jeUNvdW50ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UubGF0ZW5jeUNvdW50Lmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5sYXRlbmN5Q291bnRbal0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5sYXRlbmN5Q291bnRbal0gPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5sYXRlbmN5Q291bnRbal0pIDogbWVzc2FnZS5sYXRlbmN5Q291bnRbal07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGF0ZW5jeUNvdW50W2pdID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmxhdGVuY3lDb3VudFtqXSkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5sYXRlbmN5Q291bnRbal0ubG93ID4+PiAwLCBtZXNzYWdlLmxhdGVuY3lDb3VudFtqXS5oaWdoID4+PiAwKS50b051bWJlcigpIDogbWVzc2FnZS5sYXRlbmN5Q291bnRbal07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZXN0aW1hdGVkRXhlY3V0aW9uQ291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQpIDogbWVzc2FnZS5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQubG93ID4+PiAwLCBtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50LmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudDtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBGaWVsZFN0YXQgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBGaWVsZFN0YXQ7XG59KSgpO1xuXG4kcm9vdC5UeXBlU3RhdCA9IChmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgYSBUeXBlU3RhdC5cbiAgICAgKiBAZXhwb3J0cyBJVHlwZVN0YXRcbiAgICAgKiBAaW50ZXJmYWNlIElUeXBlU3RhdFxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsSUZpZWxkU3RhdD58bnVsbH0gW3BlckZpZWxkU3RhdF0gVHlwZVN0YXQgcGVyRmllbGRTdGF0XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFR5cGVTdGF0LlxuICAgICAqIEBleHBvcnRzIFR5cGVTdGF0XG4gICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVHlwZVN0YXQuXG4gICAgICogQGltcGxlbWVudHMgSVR5cGVTdGF0XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtJVHlwZVN0YXQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUeXBlU3RhdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucGVyRmllbGRTdGF0ID0ge307XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHlwZVN0YXQgcGVyRmllbGRTdGF0LlxuICAgICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLElGaWVsZFN0YXQ+fSBwZXJGaWVsZFN0YXRcbiAgICAgKiBAbWVtYmVyb2YgVHlwZVN0YXRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUeXBlU3RhdC5wcm90b3R5cGUucGVyRmllbGRTdGF0ID0gJHV0aWwuZW1wdHlPYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFR5cGVTdGF0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICogQG1lbWJlcm9mIFR5cGVTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVR5cGVTdGF0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1R5cGVTdGF0fSBUeXBlU3RhdCBpbnN0YW5jZVxuICAgICAqL1xuICAgIFR5cGVTdGF0LmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHlwZVN0YXQocHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUeXBlU3RhdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUeXBlU3RhdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFR5cGVTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVR5cGVTdGF0fSBtZXNzYWdlIFR5cGVTdGF0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBUeXBlU3RhdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyRmllbGRTdGF0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwZXJGaWVsZFN0YXRcIikpXG4gICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMobWVzc2FnZS5wZXJGaWVsZFN0YXQpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKS51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICRyb290LkZpZWxkU3RhdC5lbmNvZGUobWVzc2FnZS5wZXJGaWVsZFN0YXRba2V5c1tpXV0sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFR5cGVTdGF0IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFR5cGVTdGF0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHlwZVN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJVHlwZVN0YXR9IG1lc3NhZ2UgVHlwZVN0YXQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFR5cGVTdGF0LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUeXBlU3RhdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgVHlwZVN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7VHlwZVN0YXR9IFR5cGVTdGF0XG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBUeXBlU3RhdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UeXBlU3RhdCgpLCBrZXk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcCgpLnBvcysrO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBlckZpZWxkU3RhdCA9PT0gJHV0aWwuZW1wdHlPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVyRmllbGRTdGF0ID0ge307XG4gICAgICAgICAgICAgICAga2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIHJlYWRlci5wb3MrKztcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBlckZpZWxkU3RhdFtrZXldID0gJHJvb3QuRmllbGRTdGF0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIFR5cGVTdGF0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBUeXBlU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcmV0dXJucyB7VHlwZVN0YXR9IFR5cGVTdGF0XG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBUeXBlU3RhdC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgYSBUeXBlU3RhdCBtZXNzYWdlLlxuICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgKiBAbWVtYmVyb2YgVHlwZVN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgKi9cbiAgICBUeXBlU3RhdC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJGaWVsZFN0YXQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGVyRmllbGRTdGF0XCIpKSB7XG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzT2JqZWN0KG1lc3NhZ2UucGVyRmllbGRTdGF0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwZXJGaWVsZFN0YXQ6IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgdmFyIGtleSA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucGVyRmllbGRTdGF0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuRmllbGRTdGF0LnZlcmlmeShtZXNzYWdlLnBlckZpZWxkU3RhdFtrZXlbaV1dKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInBlckZpZWxkU3RhdC5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUeXBlU3RhdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIFR5cGVTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7VHlwZVN0YXR9IG1lc3NhZ2UgVHlwZVN0YXRcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIFR5cGVTdGF0LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMub2JqZWN0cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgb2JqZWN0LnBlckZpZWxkU3RhdCA9IHt9O1xuICAgICAgICB2YXIga2V5czI7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlckZpZWxkU3RhdCAmJiAoa2V5czIgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnBlckZpZWxkU3RhdCkpLmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LnBlckZpZWxkU3RhdCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzMi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBvYmplY3QucGVyRmllbGRTdGF0W2tleXMyW2pdXSA9ICRyb290LkZpZWxkU3RhdC50b09iamVjdChtZXNzYWdlLnBlckZpZWxkU3RhdFtrZXlzMltqXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgVHlwZVN0YXQgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIFR5cGVTdGF0XG4gICAgICogQGluc3RhbmNlXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAqL1xuICAgIFR5cGVTdGF0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVHlwZVN0YXQ7XG59KSgpO1xuXG4kcm9vdC5SZWZlcmVuY2VkRmllbGRzRm9yVHlwZSA9IChmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgYSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5cbiAgICAgKiBAZXhwb3J0cyBJUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAaW50ZXJmYWNlIElSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW2ZpZWxkTmFtZXNdIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIGZpZWxkTmFtZXNcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2lzSW50ZXJmYWNlXSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSBpc0ludGVyZmFjZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5cbiAgICAgKiBAZXhwb3J0cyBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLlxuICAgICAqIEBpbXBsZW1lbnRzIElSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SVJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLmZpZWxkTmFtZXMgPSBbXTtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSBmaWVsZE5hbWVzLlxuICAgICAqIEBtZW1iZXIge0FycmF5LjxzdHJpbmc+fSBmaWVsZE5hbWVzXG4gICAgICogQG1lbWJlcm9mIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUucHJvdG90eXBlLmZpZWxkTmFtZXMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgLyoqXG4gICAgICogUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgaXNJbnRlcmZhY2UuXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn0gaXNJbnRlcmZhY2VcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5wcm90b3R5cGUuaXNJbnRlcmZhY2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7UmVmZXJlbmNlZEZpZWxkc0ZvclR5cGV9IFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIGluc3RhbmNlXG4gICAgICovXG4gICAgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZShwcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGV9IG1lc3NhZ2UgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5maWVsZE5hbWVzICE9IG51bGwgJiYgbWVzc2FnZS5maWVsZE5hbWVzLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5maWVsZE5hbWVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UuZmllbGROYW1lc1tpXSk7XG4gICAgICAgIGlmIChtZXNzYWdlLmlzSW50ZXJmYWNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpc0ludGVyZmFjZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuYm9vbChtZXNzYWdlLmlzSW50ZXJmYWNlKTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGV9IG1lc3NhZ2UgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7UmVmZXJlbmNlZEZpZWxkc0ZvclR5cGV9IFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5SZWZlcmVuY2VkRmllbGRzRm9yVHlwZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5maWVsZE5hbWVzICYmIG1lc3NhZ2UuZmllbGROYW1lcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpZWxkTmFtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmZpZWxkTmFtZXMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNJbnRlcmZhY2UgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1JlZmVyZW5jZWRGaWVsZHNGb3JUeXBlfSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmllbGROYW1lcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmaWVsZE5hbWVzXCIpKSB7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5maWVsZE5hbWVzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWVsZE5hbWVzOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmZpZWxkTmFtZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmZpZWxkTmFtZXNbaV0pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWVsZE5hbWVzOiBzdHJpbmdbXSBleHBlY3RlZFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmlzSW50ZXJmYWNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlzSW50ZXJmYWNlXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmlzSW50ZXJmYWNlICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpc0ludGVyZmFjZTogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAqIEBtZW1iZXJvZiBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge1JlZmVyZW5jZWRGaWVsZHNGb3JUeXBlfSBtZXNzYWdlIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgKi9cbiAgICBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgb2JqZWN0LmZpZWxkTmFtZXMgPSBbXTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QuaXNJbnRlcmZhY2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmllbGROYW1lcyAmJiBtZXNzYWdlLmZpZWxkTmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QuZmllbGROYW1lcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLmZpZWxkTmFtZXMubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgb2JqZWN0LmZpZWxkTmFtZXNbal0gPSBtZXNzYWdlLmZpZWxkTmFtZXNbal07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaXNJbnRlcmZhY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaXNJbnRlcmZhY2VcIikpXG4gICAgICAgICAgICBvYmplY3QuaXNJbnRlcmZhY2UgPSBtZXNzYWdlLmlzSW50ZXJmYWNlO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIHRvIEpTT04uXG4gICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAqIEBtZW1iZXJvZiBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlO1xufSkoKTtcblxuJHJvb3QuUmVwb3J0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIFJlcG9ydC5cbiAgICAgKiBAZXhwb3J0cyBJUmVwb3J0XG4gICAgICogQGludGVyZmFjZSBJUmVwb3J0XG4gICAgICogQHByb3BlcnR5IHtJUmVwb3J0SGVhZGVyfG51bGx9IFtoZWFkZXJdIFJlcG9ydCBoZWFkZXJcbiAgICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLElUcmFjZXNBbmRTdGF0cz58bnVsbH0gW3RyYWNlc1BlclF1ZXJ5XSBSZXBvcnQgdHJhY2VzUGVyUXVlcnlcbiAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfG51bGx9IFtlbmRUaW1lXSBSZXBvcnQgZW5kVGltZVxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtvcGVyYXRpb25Db3VudF0gUmVwb3J0IG9wZXJhdGlvbkNvdW50XG4gICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFt0cmFjZXNQcmVBZ2dyZWdhdGVkXSBSZXBvcnQgdHJhY2VzUHJlQWdncmVnYXRlZFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBSZXBvcnQuXG4gICAgICogQGV4cG9ydHMgUmVwb3J0XG4gICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUmVwb3J0LlxuICAgICAqIEBpbXBsZW1lbnRzIElSZXBvcnRcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lSZXBvcnQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZXBvcnQocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLnRyYWNlc1BlclF1ZXJ5ID0ge307XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwb3J0IGhlYWRlci5cbiAgICAgKiBAbWVtYmVyIHtJUmVwb3J0SGVhZGVyfG51bGx8dW5kZWZpbmVkfSBoZWFkZXJcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0LnByb3RvdHlwZS5oZWFkZXIgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0IHRyYWNlc1BlclF1ZXJ5LlxuICAgICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLElUcmFjZXNBbmRTdGF0cz59IHRyYWNlc1BlclF1ZXJ5XG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFJlcG9ydC5wcm90b3R5cGUudHJhY2VzUGVyUXVlcnkgPSAkdXRpbC5lbXB0eU9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIFJlcG9ydCBlbmRUaW1lLlxuICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfG51bGx8dW5kZWZpbmVkfSBlbmRUaW1lXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFJlcG9ydC5wcm90b3R5cGUuZW5kVGltZSA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBSZXBvcnQgb3BlcmF0aW9uQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBvcGVyYXRpb25Db3VudFxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnQucHJvdG90eXBlLm9wZXJhdGlvbkNvdW50ID0gMDtcblxuICAgIC8qKlxuICAgICAqIFJlcG9ydCB0cmFjZXNQcmVBZ2dyZWdhdGVkLlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IHRyYWNlc1ByZUFnZ3JlZ2F0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0LnByb3RvdHlwZS50cmFjZXNQcmVBZ2dyZWdhdGVkID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFJlcG9ydCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVwb3J0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1JlcG9ydH0gUmVwb3J0IGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0LmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVwb3J0KHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUmVwb3J0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFJlcG9ydC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lSZXBvcnR9IG1lc3NhZ2UgUmVwb3J0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBSZXBvcnQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmhlYWRlciAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaGVhZGVyXCIpKVxuICAgICAgICAgICAgJHJvb3QuUmVwb3J0SGVhZGVyLmVuY29kZShtZXNzYWdlLmhlYWRlciwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5lbmRUaW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlbmRUaW1lXCIpKVxuICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5lbmNvZGUobWVzc2FnZS5lbmRUaW1lLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNlc1BlclF1ZXJ5ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmFjZXNQZXJRdWVyeVwiKSlcbiAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnRyYWNlc1BlclF1ZXJ5KSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZXNBbmRTdGF0cy5lbmNvZGUobWVzc2FnZS50cmFjZXNQZXJRdWVyeVtrZXlzW2ldXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5vcGVyYXRpb25Db3VudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwib3BlcmF0aW9uQ291bnRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDAgPSovNDgpLnVpbnQ2NChtZXNzYWdlLm9wZXJhdGlvbkNvdW50KTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2VzUHJlQWdncmVnYXRlZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidHJhY2VzUHJlQWdncmVnYXRlZFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMCA9Ki81NikuYm9vbChtZXNzYWdlLnRyYWNlc1ByZUFnZ3JlZ2F0ZWQpO1xuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUmVwb3J0IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFJlcG9ydC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lSZXBvcnR9IG1lc3NhZ2UgUmVwb3J0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBSZXBvcnQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIFJlcG9ydCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICogQHJldHVybnMge1JlcG9ydH0gUmVwb3J0XG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBSZXBvcnQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuUmVwb3J0KCksIGtleTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGVhZGVyID0gJHJvb3QuUmVwb3J0SGVhZGVyLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmFjZXNQZXJRdWVyeSA9PT0gJHV0aWwuZW1wdHlPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2VzUGVyUXVlcnkgPSB7fTtcbiAgICAgICAgICAgICAgICBrZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2VzUGVyUXVlcnlba2V5XSA9ICRyb290LlRyYWNlc0FuZFN0YXRzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uub3BlcmF0aW9uQ291bnQgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjZXNQcmVBZ2dyZWdhdGVkID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgUmVwb3J0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1JlcG9ydH0gUmVwb3J0XG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBSZXBvcnQuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgUmVwb3J0IG1lc3NhZ2UuXG4gICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgKi9cbiAgICBSZXBvcnQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVhZGVyICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImhlYWRlclwiKSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuUmVwb3J0SGVhZGVyLnZlcmlmeShtZXNzYWdlLmhlYWRlcik7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaGVhZGVyLlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2VzUGVyUXVlcnkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJhY2VzUGVyUXVlcnlcIikpIHtcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNPYmplY3QobWVzc2FnZS50cmFjZXNQZXJRdWVyeSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhY2VzUGVyUXVlcnk6IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgdmFyIGtleSA9IE9iamVjdC5rZXlzKG1lc3NhZ2UudHJhY2VzUGVyUXVlcnkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5UcmFjZXNBbmRTdGF0cy52ZXJpZnkobWVzc2FnZS50cmFjZXNQZXJRdWVyeVtrZXlbaV1dKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYWNlc1BlclF1ZXJ5LlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRUaW1lXCIpKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnZlcmlmeShtZXNzYWdlLmVuZFRpbWUpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImVuZFRpbWUuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5vcGVyYXRpb25Db3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJvcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uub3BlcmF0aW9uQ291bnQpICYmICEobWVzc2FnZS5vcGVyYXRpb25Db3VudCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5vcGVyYXRpb25Db3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLm9wZXJhdGlvbkNvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcGVyYXRpb25Db3VudDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNlc1ByZUFnZ3JlZ2F0ZWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJhY2VzUHJlQWdncmVnYXRlZFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS50cmFjZXNQcmVBZ2dyZWdhdGVkICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFjZXNQcmVBZ2dyZWdhdGVkOiBib29sZWFuIGV4cGVjdGVkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBSZXBvcnQgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtSZXBvcnR9IG1lc3NhZ2UgUmVwb3J0XG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgKi9cbiAgICBSZXBvcnQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QudHJhY2VzUGVyUXVlcnkgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC5oZWFkZXIgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmVuZFRpbWUgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0Lm9wZXJhdGlvbkNvdW50ID0gMDtcbiAgICAgICAgICAgIG9iamVjdC50cmFjZXNQcmVBZ2dyZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVhZGVyICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImhlYWRlclwiKSlcbiAgICAgICAgICAgIG9iamVjdC5oZWFkZXIgPSAkcm9vdC5SZXBvcnRIZWFkZXIudG9PYmplY3QobWVzc2FnZS5oZWFkZXIsIG9wdGlvbnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5lbmRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVuZFRpbWVcIikpXG4gICAgICAgICAgICBvYmplY3QuZW5kVGltZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QobWVzc2FnZS5lbmRUaW1lLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIGtleXMyO1xuICAgICAgICBpZiAobWVzc2FnZS50cmFjZXNQZXJRdWVyeSAmJiAoa2V5czIgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnRyYWNlc1BlclF1ZXJ5KSkubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QudHJhY2VzUGVyUXVlcnkgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5czIubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyYWNlc1BlclF1ZXJ5W2tleXMyW2pdXSA9ICRyb290LlRyYWNlc0FuZFN0YXRzLnRvT2JqZWN0KG1lc3NhZ2UudHJhY2VzUGVyUXVlcnlba2V5czJbal1dLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5vcGVyYXRpb25Db3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJvcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5vcGVyYXRpb25Db3VudCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3Qub3BlcmF0aW9uQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5vcGVyYXRpb25Db3VudCkgOiBtZXNzYWdlLm9wZXJhdGlvbkNvdW50O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5vcGVyYXRpb25Db3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5vcGVyYXRpb25Db3VudCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5vcGVyYXRpb25Db3VudC5sb3cgPj4+IDAsIG1lc3NhZ2Uub3BlcmF0aW9uQ291bnQuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLm9wZXJhdGlvbkNvdW50O1xuICAgICAgICBpZiAobWVzc2FnZS50cmFjZXNQcmVBZ2dyZWdhdGVkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRyYWNlc1ByZUFnZ3JlZ2F0ZWRcIikpXG4gICAgICAgICAgICBvYmplY3QudHJhY2VzUHJlQWdncmVnYXRlZCA9IG1lc3NhZ2UudHJhY2VzUHJlQWdncmVnYXRlZDtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBSZXBvcnQgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBSZXBvcnQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZXBvcnQ7XG59KSgpO1xuXG4kcm9vdC5Db250ZXh0dWFsaXplZFN0YXRzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIENvbnRleHR1YWxpemVkU3RhdHMuXG4gICAgICogQGV4cG9ydHMgSUNvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAaW50ZXJmYWNlIElDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQHByb3BlcnR5IHtJU3RhdHNDb250ZXh0fG51bGx9IFtjb250ZXh0XSBDb250ZXh0dWFsaXplZFN0YXRzIGNvbnRleHRcbiAgICAgKiBAcHJvcGVydHkge0lRdWVyeUxhdGVuY3lTdGF0c3xudWxsfSBbcXVlcnlMYXRlbmN5U3RhdHNdIENvbnRleHR1YWxpemVkU3RhdHMgcXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLElUeXBlU3RhdD58bnVsbH0gW3BlclR5cGVTdGF0XSBDb250ZXh0dWFsaXplZFN0YXRzIHBlclR5cGVTdGF0XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvbnRleHR1YWxpemVkU3RhdHMuXG4gICAgICogQGV4cG9ydHMgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENvbnRleHR1YWxpemVkU3RhdHMuXG4gICAgICogQGltcGxlbWVudHMgSUNvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29udGV4dHVhbGl6ZWRTdGF0cyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucGVyVHlwZVN0YXQgPSB7fTtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0dWFsaXplZFN0YXRzIGNvbnRleHQuXG4gICAgICogQG1lbWJlciB7SVN0YXRzQ29udGV4dHxudWxsfHVuZGVmaW5lZH0gY29udGV4dFxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRTdGF0cy5wcm90b3R5cGUuY29udGV4dCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0dWFsaXplZFN0YXRzIHF1ZXJ5TGF0ZW5jeVN0YXRzLlxuICAgICAqIEBtZW1iZXIge0lRdWVyeUxhdGVuY3lTdGF0c3xudWxsfHVuZGVmaW5lZH0gcXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkU3RhdHMucHJvdG90eXBlLnF1ZXJ5TGF0ZW5jeVN0YXRzID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIENvbnRleHR1YWxpemVkU3RhdHMgcGVyVHlwZVN0YXQuXG4gICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsSVR5cGVTdGF0Pn0gcGVyVHlwZVN0YXRcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkU3RhdHMucHJvdG90eXBlLnBlclR5cGVTdGF0ID0gJHV0aWwuZW1wdHlPYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IENvbnRleHR1YWxpemVkU3RhdHMgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkU3RhdHN9IENvbnRleHR1YWxpemVkU3RhdHMgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFN0YXRzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29udGV4dHVhbGl6ZWRTdGF0cyhwcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbnRleHR1YWxpemVkU3RhdHMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQ29udGV4dHVhbGl6ZWRTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJQ29udGV4dHVhbGl6ZWRTdGF0c30gbWVzc2FnZSBDb250ZXh0dWFsaXplZFN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFN0YXRzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5jb250ZXh0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjb250ZXh0XCIpKVxuICAgICAgICAgICAgJHJvb3QuU3RhdHNDb250ZXh0LmVuY29kZShtZXNzYWdlLmNvbnRleHQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlMYXRlbmN5U3RhdHMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5TGF0ZW5jeVN0YXRzXCIpKVxuICAgICAgICAgICAgJHJvb3QuUXVlcnlMYXRlbmN5U3RhdHMuZW5jb2RlKG1lc3NhZ2UucXVlcnlMYXRlbmN5U3RhdHMsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyVHlwZVN0YXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlclR5cGVTdGF0XCIpKVxuICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucGVyVHlwZVN0YXQpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKS51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICRyb290LlR5cGVTdGF0LmVuY29kZShtZXNzYWdlLnBlclR5cGVTdGF0W2tleXNbaV1dLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb250ZXh0dWFsaXplZFN0YXRzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIENvbnRleHR1YWxpemVkU3RhdHMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkU3RhdHN9IG1lc3NhZ2UgQ29udGV4dHVhbGl6ZWRTdGF0cyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRTdGF0cy5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgQ29udGV4dHVhbGl6ZWRTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAqIEByZXR1cm5zIHtDb250ZXh0dWFsaXplZFN0YXRzfSBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFN0YXRzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkNvbnRleHR1YWxpemVkU3RhdHMoKSwga2V5O1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZXh0ID0gJHJvb3QuU3RhdHNDb250ZXh0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cyA9ICRyb290LlF1ZXJ5TGF0ZW5jeVN0YXRzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wZXJUeXBlU3RhdCA9PT0gJHV0aWwuZW1wdHlPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVyVHlwZVN0YXQgPSB7fTtcbiAgICAgICAgICAgICAgICBrZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVyVHlwZVN0YXRba2V5XSA9ICRyb290LlR5cGVTdGF0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIENvbnRleHR1YWxpemVkU3RhdHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkU3RhdHN9IENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkU3RhdHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgQ29udGV4dHVhbGl6ZWRTdGF0cyBtZXNzYWdlLlxuICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkU3RhdHMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY29udGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb250ZXh0XCIpKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5TdGF0c0NvbnRleHQudmVyaWZ5KG1lc3NhZ2UuY29udGV4dCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGV4dC5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInF1ZXJ5TGF0ZW5jeVN0YXRzXCIpKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5RdWVyeUxhdGVuY3lTdGF0cy52ZXJpZnkobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cyk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicXVlcnlMYXRlbmN5U3RhdHMuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wZXJUeXBlU3RhdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwZXJUeXBlU3RhdFwiKSkge1xuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc09iamVjdChtZXNzYWdlLnBlclR5cGVTdGF0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwZXJUeXBlU3RhdDogb2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICB2YXIga2V5ID0gT2JqZWN0LmtleXMobWVzc2FnZS5wZXJUeXBlU3RhdCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlR5cGVTdGF0LnZlcmlmeShtZXNzYWdlLnBlclR5cGVTdGF0W2tleVtpXV0pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicGVyVHlwZVN0YXQuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29udGV4dHVhbGl6ZWRTdGF0cyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtDb250ZXh0dWFsaXplZFN0YXRzfSBtZXNzYWdlIENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkU3RhdHMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QucGVyVHlwZVN0YXQgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgIG9iamVjdC5xdWVyeUxhdGVuY3lTdGF0cyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuY29udGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb250ZXh0XCIpKVxuICAgICAgICAgICAgb2JqZWN0LmNvbnRleHQgPSAkcm9vdC5TdGF0c0NvbnRleHQudG9PYmplY3QobWVzc2FnZS5jb250ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlMYXRlbmN5U3RhdHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicXVlcnlMYXRlbmN5U3RhdHNcIikpXG4gICAgICAgICAgICBvYmplY3QucXVlcnlMYXRlbmN5U3RhdHMgPSAkcm9vdC5RdWVyeUxhdGVuY3lTdGF0cy50b09iamVjdChtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIGtleXMyO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJUeXBlU3RhdCAmJiAoa2V5czIgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnBlclR5cGVTdGF0KSkubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QucGVyVHlwZVN0YXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5czIubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgb2JqZWN0LnBlclR5cGVTdGF0W2tleXMyW2pdXSA9ICRyb290LlR5cGVTdGF0LnRvT2JqZWN0KG1lc3NhZ2UucGVyVHlwZVN0YXRba2V5czJbal1dLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIENvbnRleHR1YWxpemVkU3RhdHMgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRTdGF0cy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbnRleHR1YWxpemVkU3RhdHM7XG59KSgpO1xuXG4kcm9vdC5UcmFjZXNBbmRTdGF0cyA9IChmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgYSBUcmFjZXNBbmRTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBJVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAaW50ZXJmYWNlIElUcmFjZXNBbmRTdGF0c1xuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPElUcmFjZXxVaW50OEFycmF5PnxudWxsfSBbdHJhY2VdIFRyYWNlc0FuZFN0YXRzIHRyYWNlXG4gICAgICogQHByb3BlcnR5IHskcHJvdG9idWYuVG9BcnJheS48SUNvbnRleHR1YWxpemVkU3RhdHM+fEFycmF5LjxJQ29udGV4dHVhbGl6ZWRTdGF0cz58bnVsbH0gW3N0YXRzV2l0aENvbnRleHRdIFRyYWNlc0FuZFN0YXRzIHN0YXRzV2l0aENvbnRleHRcbiAgICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLElSZWZlcmVuY2VkRmllbGRzRm9yVHlwZT58bnVsbH0gW3JlZmVyZW5jZWRGaWVsZHNCeVR5cGVdIFRyYWNlc0FuZFN0YXRzIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGVcbiAgICAgKiBAcHJvcGVydHkge0FycmF5LjxJVHJhY2V8VWludDhBcnJheT58bnVsbH0gW2ludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0c10gVHJhY2VzQW5kU3RhdHMgaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRyYWNlc0FuZFN0YXRzLlxuICAgICAqIEBleHBvcnRzIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVHJhY2VzQW5kU3RhdHMuXG4gICAgICogQGltcGxlbWVudHMgSVRyYWNlc0FuZFN0YXRzXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtJVHJhY2VzQW5kU3RhdHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmFjZXNBbmRTdGF0cyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMudHJhY2UgPSBbXTtcbiAgICAgICAgdGhpcy5zdGF0c1dpdGhDb250ZXh0ID0gW107XG4gICAgICAgIHRoaXMucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IHt9O1xuICAgICAgICB0aGlzLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cyA9IFtdO1xuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYWNlc0FuZFN0YXRzIHRyYWNlLlxuICAgICAqIEBtZW1iZXIge0FycmF5LjxJVHJhY2V8VWludDhBcnJheT59IHRyYWNlXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2VzQW5kU3RhdHMucHJvdG90eXBlLnRyYWNlID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlc0FuZFN0YXRzIHN0YXRzV2l0aENvbnRleHQuXG4gICAgICogQG1lbWJlciB7QXJyYXkuPElDb250ZXh0dWFsaXplZFN0YXRzPn0gc3RhdHNXaXRoQ29udGV4dFxuICAgICAqIEBtZW1iZXJvZiBUcmFjZXNBbmRTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLnByb3RvdHlwZS5zdGF0c1dpdGhDb250ZXh0ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlc0FuZFN0YXRzIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGUuXG4gICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsSVJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlPn0gcmVmZXJlbmNlZEZpZWxkc0J5VHlwZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZXNBbmRTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLnByb3RvdHlwZS5yZWZlcmVuY2VkRmllbGRzQnlUeXBlID0gJHV0aWwuZW1wdHlPYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZXNBbmRTdGF0cyBpbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMuXG4gICAgICogQG1lbWJlciB7QXJyYXkuPElUcmFjZXxVaW50OEFycmF5Pn0gaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2VzQW5kU3RhdHMucHJvdG90eXBlLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFRyYWNlc0FuZFN0YXRzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVRyYWNlc0FuZFN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1RyYWNlc0FuZFN0YXRzfSBUcmFjZXNBbmRTdGF0cyBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2VzQW5kU3RhdHMocHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUcmFjZXNBbmRTdGF0cyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZXNBbmRTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVRyYWNlc0FuZFN0YXRzfSBtZXNzYWdlIFRyYWNlc0FuZFN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBUcmFjZXNBbmRTdGF0cy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2UgIT0gbnVsbCAmJiBtZXNzYWdlLnRyYWNlLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS50cmFjZS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmFjZVtpXSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKTtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmJ5dGVzKG1lc3NhZ2UudHJhY2VbaV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5lbmNvZGUobWVzc2FnZS50cmFjZVtpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB2YXIgYXJyYXkyO1xuICAgICAgICBpZiAobWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0LnRvQXJyYXkpXG4gICAgICAgICAgICBhcnJheTIgPSBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQudG9BcnJheSgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheTIgPSBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQ7XG4gICAgICAgIGlmIChhcnJheTIgIT0gbnVsbCAmJiBhcnJheTIubGVuZ3RoKVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheTIubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgJHJvb3QuQ29udGV4dHVhbGl6ZWRTdGF0cy5lbmNvZGUoYXJyYXkyW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cyAhPSBudWxsICYmIG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzW2ldIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpO1xuICAgICAgICAgICAgICAgICAgICB3cml0ZXIuYnl0ZXMobWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHNbaV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5lbmNvZGUobWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVmZXJlbmNlZEZpZWxkc0J5VHlwZVwiKSlcbiAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGUpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKS51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmVuY29kZShtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGVba2V5c1tpXV0sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRyYWNlc0FuZFN0YXRzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlc0FuZFN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJVHJhY2VzQW5kU3RhdHN9IG1lc3NhZ2UgVHJhY2VzQW5kU3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUcmFjZXNBbmRTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7VHJhY2VzQW5kU3RhdHN9IFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBUcmFjZXNBbmRTdGF0cy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZXNBbmRTdGF0cygpLCBrZXk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnRyYWNlICYmIG1lc3NhZ2UudHJhY2UubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjZSA9IFtdO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2UucHVzaCgkcm9vdC5UcmFjZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQgJiYgbWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0Lmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhdHNXaXRoQ29udGV4dCA9IFtdO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhdHNXaXRoQ29udGV4dC5wdXNoKCRyb290LkNvbnRleHR1YWxpemVkU3RhdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWZlcmVuY2VkRmllbGRzQnlUeXBlID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWZlcmVuY2VkRmllbGRzQnlUeXBlID0ge307XG4gICAgICAgICAgICAgICAga2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIHJlYWRlci5wb3MrKztcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGVba2V5XSA9ICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMgJiYgbWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMgPSBbXTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cy5wdXNoKCRyb290LlRyYWNlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUcmFjZXNBbmRTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1RyYWNlc0FuZFN0YXRzfSBUcmFjZXNBbmRTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgVHJhY2VzQW5kU3RhdHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgVHJhY2VzQW5kU3RhdHMgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgVHJhY2VzQW5kU3RhdHMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJhY2VcIikpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnRyYWNlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFjZTogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS50cmFjZS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnRyYWNlW2ldIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UudmVyaWZ5KG1lc3NhZ2UudHJhY2VbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFjZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXRzV2l0aENvbnRleHRcIikpIHtcbiAgICAgICAgICAgIHZhciBhcnJheTI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0LnRvQXJyYXkpXG4gICAgICAgICAgICAgICAgYXJyYXkyID0gbWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0LnRvQXJyYXkoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhcnJheTIgPSBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQ7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkyKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGF0c1dpdGhDb250ZXh0OiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheTIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5Db250ZXh0dWFsaXplZFN0YXRzLnZlcmlmeShhcnJheTJbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RhdHNXaXRoQ29udGV4dC5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVmZXJlbmNlZEZpZWxkc0J5VHlwZVwiKSkge1xuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc09iamVjdChtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJlZmVyZW5jZWRGaWVsZHNCeVR5cGU6IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgdmFyIGtleSA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLnZlcmlmeShtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGVba2V5W2ldXSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZWZlcmVuY2VkRmllbGRzQnlUeXBlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0c1wiKSkge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHM6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzW2ldIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuVHJhY2UudmVyaWZ5KG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUcmFjZXNBbmRTdGF0cyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7VHJhY2VzQW5kU3RhdHN9IG1lc3NhZ2UgVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC50cmFjZSA9IFtdO1xuICAgICAgICAgICAgb2JqZWN0LnN0YXRzV2l0aENvbnRleHQgPSBbXTtcbiAgICAgICAgICAgIG9iamVjdC5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS50cmFjZSAmJiBtZXNzYWdlLnRyYWNlLmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LnRyYWNlID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UudHJhY2UubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyYWNlW2pdID0gJHJvb3QuVHJhY2UudG9PYmplY3QobWVzc2FnZS50cmFjZVtqXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHNXaXRoQ29udGV4dCAmJiBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3Quc3RhdHNXaXRoQ29udGV4dCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXRzV2l0aENvbnRleHRbal0gPSAkcm9vdC5Db250ZXh0dWFsaXplZFN0YXRzLnRvT2JqZWN0KG1lc3NhZ2Uuc3RhdHNXaXRoQ29udGV4dFtqXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzICYmIG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cy5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBvYmplY3QuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzW2pdID0gJHJvb3QuVHJhY2UudG9PYmplY3QobWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHNbal0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBrZXlzMjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSAmJiAoa2V5czIgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGUpKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iamVjdC5yZWZlcmVuY2VkRmllbGRzQnlUeXBlID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMyLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIG9iamVjdC5yZWZlcmVuY2VkRmllbGRzQnlUeXBlW2tleXMyW2pdXSA9ICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLnRvT2JqZWN0KG1lc3NhZ2UucmVmZXJlbmNlZEZpZWxkc0J5VHlwZVtrZXlzMltqXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgVHJhY2VzQW5kU3RhdHMgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVHJhY2VzQW5kU3RhdHM7XG59KSgpO1xuXG4kcm9vdC5nb29nbGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBOYW1lc3BhY2UgZ29vZ2xlLlxuICAgICAqIEBleHBvcnRzIGdvb2dsZVxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKi9cbiAgICB2YXIgZ29vZ2xlID0ge307XG5cbiAgICBnb29nbGUucHJvdG9idWYgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5hbWVzcGFjZSBwcm90b2J1Zi5cbiAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZVxuICAgICAgICAgKiBAbmFtZXNwYWNlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcHJvdG9idWYgPSB7fTtcblxuICAgICAgICBwcm90b2J1Zi5UaW1lc3RhbXAgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFRpbWVzdGFtcC5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWZcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3NlY29uZHNdIFRpbWVzdGFtcCBzZWNvbmRzXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbbmFub3NdIFRpbWVzdGFtcCBuYW5vc1xuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUaW1lc3RhbXAuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUaW1lc3RhbXAuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVGltZXN0YW1wXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXA9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gVGltZXN0YW1wKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRpbWVzdGFtcCBzZWNvbmRzLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBzZWNvbmRzXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRpbWVzdGFtcC5wcm90b3R5cGUuc2Vjb25kcyA9IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGltZXN0YW1wIG5hbm9zLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBuYW5vc1xuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAucHJvdG90eXBlLm5hbm9zID0gMDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFRpbWVzdGFtcCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtnb29nbGUucHJvdG9idWYuSVRpbWVzdGFtcD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXB9IFRpbWVzdGFtcCBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcChwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRpbWVzdGFtcCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB9IG1lc3NhZ2UgVGltZXN0YW1wIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRpbWVzdGFtcC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2Vjb25kcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2Vjb25kc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2Uuc2Vjb25kcyk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFub3MgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm5hbm9zXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmludDMyKG1lc3NhZ2UubmFub3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUaW1lc3RhbXAgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfSBtZXNzYWdlIFRpbWVzdGFtcCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgVGltZXN0YW1wIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXB9IFRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCgpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2Vjb25kcyA9IHJlYWRlci5pbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFub3MgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBUaW1lc3RhbXAgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtnb29nbGUucHJvdG9idWYuVGltZXN0YW1wfSBUaW1lc3RhbXBcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVGltZXN0YW1wLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFRpbWVzdGFtcCBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVGltZXN0YW1wLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlY29uZHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2Vjb25kc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zZWNvbmRzKSAmJiAhKG1lc3NhZ2Uuc2Vjb25kcyAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zZWNvbmRzLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uuc2Vjb25kcy5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzZWNvbmRzOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5uYW5vcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJuYW5vc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5uYW5vcykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJuYW5vczogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUaW1lc3RhbXAgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtnb29nbGUucHJvdG9idWYuVGltZXN0YW1wfSBtZXNzYWdlIFRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZWNvbmRzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5hbm9zID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2Vjb25kcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZWNvbmRzXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2Uuc2Vjb25kcyA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZWNvbmRzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2Uuc2Vjb25kcykgOiBtZXNzYWdlLnNlY29uZHM7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZWNvbmRzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnNlY29uZHMpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2Uuc2Vjb25kcy5sb3cgPj4+IDAsIG1lc3NhZ2Uuc2Vjb25kcy5oaWdoID4+PiAwKS50b051bWJlcigpIDogbWVzc2FnZS5zZWNvbmRzO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5hbm9zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm5hbm9zXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubmFub3MgPSBtZXNzYWdlLm5hbm9zO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgVGltZXN0YW1wIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRpbWVzdGFtcC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFRpbWVzdGFtcDtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gcHJvdG9idWY7XG4gICAgfSkoKTtcblxuICAgIHJldHVybiBnb29nbGU7XG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICRyb290O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/cjs/protobuf.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/ApolloServer.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/ApolloServer.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServer: () => (/* binding */ ApolloServer),\n/* harmony export */   MEDIA_TYPES: () => (/* binding */ MEDIA_TYPES),\n/* harmony export */   chooseContentTypeForSingleResultResponse: () => (/* binding */ chooseContentTypeForSingleResultResponse),\n/* harmony export */   internalExecuteOperation: () => (/* binding */ internalExecuteOperation),\n/* harmony export */   isImplicitlyInstallablePlugin: () => (/* binding */ isImplicitlyInstallablePlugin)\n/* harmony export */ });\n/* harmony import */ var _apollo_utils_isnodelike__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/utils.isnodelike */ \"(rsc)/./node_modules/@apollo/utils.isnodelike/dist/index.js\");\n/* harmony import */ var _apollo_utils_keyvaluecache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @apollo/utils.keyvaluecache */ \"(rsc)/./node_modules/@apollo/utils.keyvaluecache/dist/index.js\");\n/* harmony import */ var _graphql_tools_schema__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @graphql-tools/schema */ \"(rsc)/./node_modules/@graphql-tools/schema/esm/makeExecutableSchema.js\");\n/* harmony import */ var _utils_resolvable_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/resolvable.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/resolvable.js\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/type/validate.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/utilities/printSchema.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/error/GraphQLError.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/language/printer.mjs\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! loglevel */ \"(rsc)/./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var negotiator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! negotiator */ \"(rsc)/./node_modules/negotiator/index.js\");\n/* harmony import */ var _cachePolicy_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cachePolicy.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/cachePolicy.js\");\n/* harmony import */ var _determineApolloConfig_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./determineApolloConfig.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/determineApolloConfig.js\");\n/* harmony import */ var _errorNormalize_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./errorNormalize.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/errorNormalize.js\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/errors/index.js\");\n/* harmony import */ var _httpBatching_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./httpBatching.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/httpBatching.js\");\n/* harmony import */ var _internalPlugin_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalPlugin.js\");\n/* harmony import */ var _preventCsrf_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./preventCsrf.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/preventCsrf.js\");\n/* harmony import */ var _requestPipeline_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./requestPipeline.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/requestPipeline.js\");\n/* harmony import */ var _runHttpQuery_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/runHttpQuery.js\");\n/* harmony import */ var _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js\");\n/* harmony import */ var _utils_UnreachableCaseError_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils/UnreachableCaseError.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/UnreachableCaseError.js\");\n/* harmony import */ var _utils_computeCoreSchemaHash_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils/computeCoreSchemaHash.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/computeCoreSchemaHash.js\");\n/* harmony import */ var _utils_isDefined_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils/isDefined.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/isDefined.js\");\n/* harmony import */ var _utils_schemaManager_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./utils/schemaManager.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/schemaManager.js\");\n/* harmony import */ var _validationRules_index_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./validationRules/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction defaultLogger() {\n    const loglevelLogger = loglevel__WEBPACK_IMPORTED_MODULE_3__.getLogger('apollo-server');\n    loglevelLogger.setLevel(loglevel__WEBPACK_IMPORTED_MODULE_3__.levels.INFO);\n    return loglevelLogger;\n}\nclass ApolloServer {\n    constructor(config) {\n        const nodeEnv = config.nodeEnv ?? \"development\" ?? '';\n        this.logger = config.logger ?? defaultLogger();\n        const apolloConfig = (0,_determineApolloConfig_js__WEBPACK_IMPORTED_MODULE_6__.determineApolloConfig)(config.apollo, this.logger);\n        const isDev = nodeEnv !== 'production';\n        if (config.cache &&\n            config.cache !== 'bounded' &&\n            _apollo_utils_keyvaluecache__WEBPACK_IMPORTED_MODULE_1__.PrefixingKeyValueCache.prefixesAreUnnecessaryForIsolation(config.cache)) {\n            throw new Error('You cannot pass a cache returned from ' +\n                '`PrefixingKeyValueCache.cacheDangerouslyDoesNotNeedPrefixesForIsolation`' +\n                'to `new ApolloServer({ cache })`, because Apollo Server may use it for ' +\n                'multiple features whose cache keys must be distinct from each other.');\n        }\n        const state = config.gateway\n            ?\n                {\n                    phase: 'initialized',\n                    schemaManager: new _utils_schemaManager_js__WEBPACK_IMPORTED_MODULE_18__.SchemaManager({\n                        gateway: config.gateway,\n                        apolloConfig,\n                        schemaDerivedDataProvider: (schema) => ApolloServer.generateSchemaDerivedData(schema, config.documentStore),\n                        logger: this.logger,\n                    }),\n                }\n            :\n                {\n                    phase: 'initialized',\n                    schemaManager: new _utils_schemaManager_js__WEBPACK_IMPORTED_MODULE_18__.SchemaManager({\n                        apiSchema: ApolloServer.constructSchema(config),\n                        schemaDerivedDataProvider: (schema) => ApolloServer.generateSchemaDerivedData(schema, config.documentStore),\n                        logger: this.logger,\n                    }),\n                };\n        const introspectionEnabled = config.introspection ?? isDev;\n        const hideSchemaDetailsFromClientErrors = config.hideSchemaDetailsFromClientErrors ?? false;\n        this.cache =\n            config.cache === undefined || config.cache === 'bounded'\n                ? new _apollo_utils_keyvaluecache__WEBPACK_IMPORTED_MODULE_1__.InMemoryLRUCache()\n                : config.cache;\n        const maxRecursiveSelectionsRule = config.maxRecursiveSelections === true\n            ? [(0,_validationRules_index_js__WEBPACK_IMPORTED_MODULE_19__.createMaxRecursiveSelectionsRule)(_validationRules_index_js__WEBPACK_IMPORTED_MODULE_19__.DEFAULT_MAX_RECURSIVE_SELECTIONS)]\n            : typeof config.maxRecursiveSelections === 'number'\n                ? [(0,_validationRules_index_js__WEBPACK_IMPORTED_MODULE_19__.createMaxRecursiveSelectionsRule)(config.maxRecursiveSelections)]\n                : [];\n        const validationRules = [\n            ...(introspectionEnabled ? [] : [_validationRules_index_js__WEBPACK_IMPORTED_MODULE_19__.NoIntrospection]),\n            ...maxRecursiveSelectionsRule,\n        ];\n        let laterValidationRules;\n        if (maxRecursiveSelectionsRule.length > 0) {\n            laterValidationRules = config.validationRules;\n        }\n        else {\n            validationRules.push(...(config.validationRules ?? []));\n        }\n        this.internals = {\n            formatError: config.formatError,\n            rootValue: config.rootValue,\n            validationRules,\n            laterValidationRules,\n            hideSchemaDetailsFromClientErrors,\n            dangerouslyDisableValidation: config.dangerouslyDisableValidation ?? false,\n            fieldResolver: config.fieldResolver,\n            includeStacktraceInErrorResponses: config.includeStacktraceInErrorResponses ??\n                (nodeEnv !== 'production' && nodeEnv !== 'test'),\n            persistedQueries: config.persistedQueries === false\n                ? undefined\n                : {\n                    ...config.persistedQueries,\n                    cache: new _apollo_utils_keyvaluecache__WEBPACK_IMPORTED_MODULE_1__.PrefixingKeyValueCache(config.persistedQueries?.cache ?? this.cache, _requestPipeline_js__WEBPACK_IMPORTED_MODULE_12__.APQ_CACHE_PREFIX),\n                },\n            nodeEnv,\n            allowBatchedHttpRequests: config.allowBatchedHttpRequests ?? false,\n            apolloConfig,\n            plugins: config.plugins ?? [],\n            parseOptions: config.parseOptions ?? {},\n            state,\n            stopOnTerminationSignals: config.stopOnTerminationSignals,\n            gatewayExecutor: null,\n            csrfPreventionRequestHeaders: config.csrfPrevention === true || config.csrfPrevention === undefined\n                ? _preventCsrf_js__WEBPACK_IMPORTED_MODULE_11__.recommendedCsrfPreventionRequestHeaders\n                : config.csrfPrevention === false\n                    ? null\n                    : (config.csrfPrevention.requestHeaders ??\n                        _preventCsrf_js__WEBPACK_IMPORTED_MODULE_11__.recommendedCsrfPreventionRequestHeaders),\n            status400ForVariableCoercionErrors: config.status400ForVariableCoercionErrors ?? false,\n            __testing_incrementalExecutionResults: config.__testing_incrementalExecutionResults,\n            stringifyResult: config.stringifyResult ?? _runHttpQuery_js__WEBPACK_IMPORTED_MODULE_13__.prettyJSONStringify,\n        };\n    }\n    async start() {\n        return await this._start(false);\n    }\n    startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests() {\n        this._start(true).catch((e) => this.logStartupError(e));\n    }\n    async _start(startedInBackground) {\n        if (this.internals.state.phase !== 'initialized') {\n            throw new Error(`You should only call 'start()' or ` +\n                `'startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests()' ` +\n                `once on your ApolloServer.`);\n        }\n        const schemaManager = this.internals.state.schemaManager;\n        const barrier = (0,_utils_resolvable_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        this.internals.state = {\n            phase: 'starting',\n            barrier,\n            schemaManager,\n            startedInBackground,\n        };\n        try {\n            await this.addDefaultPlugins();\n            const toDispose = [];\n            const executor = await schemaManager.start();\n            if (executor) {\n                this.internals.gatewayExecutor = executor;\n            }\n            toDispose.push(async () => {\n                await schemaManager.stop();\n            });\n            const schemaDerivedData = schemaManager.getSchemaDerivedData();\n            const service = {\n                logger: this.logger,\n                cache: this.cache,\n                schema: schemaDerivedData.schema,\n                apollo: this.internals.apolloConfig,\n                startedInBackground,\n            };\n            const taggedServerListeners = (await Promise.all(this.internals.plugins.map(async (plugin) => ({\n                serverListener: plugin.serverWillStart && (await plugin.serverWillStart(service)),\n                installedImplicitly: isImplicitlyInstallablePlugin(plugin) &&\n                    plugin.__internal_installed_implicitly__,\n            })))).filter((maybeTaggedServerListener) => typeof maybeTaggedServerListener.serverListener === 'object');\n            taggedServerListeners.forEach(({ serverListener: { schemaDidLoadOrUpdate } }) => {\n                if (schemaDidLoadOrUpdate) {\n                    schemaManager.onSchemaLoadOrUpdate(schemaDidLoadOrUpdate);\n                }\n            });\n            const serverWillStops = taggedServerListeners\n                .map((l) => l.serverListener.serverWillStop)\n                .filter(_utils_isDefined_js__WEBPACK_IMPORTED_MODULE_17__.isDefined);\n            if (serverWillStops.length) {\n                toDispose.push(async () => {\n                    await Promise.all(serverWillStops.map((serverWillStop) => serverWillStop()));\n                });\n            }\n            const drainServerCallbacks = taggedServerListeners\n                .map((l) => l.serverListener.drainServer)\n                .filter(_utils_isDefined_js__WEBPACK_IMPORTED_MODULE_17__.isDefined);\n            const drainServers = drainServerCallbacks.length\n                ? async () => {\n                    await Promise.all(drainServerCallbacks.map((drainServer) => drainServer()));\n                }\n                : null;\n            let taggedServerListenersWithRenderLandingPage = taggedServerListeners.filter((l) => l.serverListener.renderLandingPage);\n            if (taggedServerListenersWithRenderLandingPage.length > 1) {\n                taggedServerListenersWithRenderLandingPage =\n                    taggedServerListenersWithRenderLandingPage.filter((l) => !l.installedImplicitly);\n            }\n            let landingPage = null;\n            if (taggedServerListenersWithRenderLandingPage.length > 1) {\n                throw Error('Only one plugin can implement renderLandingPage.');\n            }\n            else if (taggedServerListenersWithRenderLandingPage.length) {\n                landingPage =\n                    await taggedServerListenersWithRenderLandingPage[0].serverListener\n                        .renderLandingPage();\n            }\n            const toDisposeLast = this.maybeRegisterTerminationSignalHandlers(['SIGINT', 'SIGTERM'], startedInBackground);\n            this.internals.state = {\n                phase: 'started',\n                schemaManager,\n                drainServers,\n                landingPage,\n                toDispose,\n                toDisposeLast,\n            };\n        }\n        catch (maybeError) {\n            const error = (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_7__.ensureError)(maybeError);\n            try {\n                await Promise.all(this.internals.plugins.map(async (plugin) => plugin.startupDidFail?.({ error })));\n            }\n            catch (pluginError) {\n                this.logger.error(`startupDidFail hook threw: ${pluginError}`);\n            }\n            this.internals.state = {\n                phase: 'failed to start',\n                error,\n            };\n            throw error;\n        }\n        finally {\n            barrier.resolve();\n        }\n    }\n    maybeRegisterTerminationSignalHandlers(signals, startedInBackground) {\n        const toDisposeLast = [];\n        if (this.internals.stopOnTerminationSignals === false ||\n            (this.internals.stopOnTerminationSignals === undefined &&\n                !(_apollo_utils_isnodelike__WEBPACK_IMPORTED_MODULE_0__.isNodeLike &&\n                    this.internals.nodeEnv !== 'test' &&\n                    !startedInBackground))) {\n            return toDisposeLast;\n        }\n        let receivedSignal = false;\n        const signalHandler = async (signal) => {\n            if (receivedSignal) {\n                return;\n            }\n            receivedSignal = true;\n            try {\n                await this.stop();\n            }\n            catch (e) {\n                this.logger.error(`stop() threw during ${signal} shutdown`);\n                this.logger.error(e);\n                process.exit(1);\n            }\n            process.kill(process.pid, signal);\n        };\n        signals.forEach((signal) => {\n            process.on(signal, signalHandler);\n            toDisposeLast.push(async () => {\n                process.removeListener(signal, signalHandler);\n            });\n        });\n        return toDisposeLast;\n    }\n    async _ensureStarted() {\n        while (true) {\n            switch (this.internals.state.phase) {\n                case 'initialized':\n                    throw new Error('You need to call `server.start()` before using your Apollo Server.');\n                case 'starting':\n                    await this.internals.state.barrier;\n                    break;\n                case 'failed to start':\n                    this.logStartupError(this.internals.state.error);\n                    throw new Error('This data graph is missing a valid configuration. More details may be available in the server logs.');\n                case 'started':\n                case 'draining':\n                    return this.internals.state;\n                case 'stopping':\n                case 'stopped':\n                    this.logger.warn('A GraphQL operation was received during server shutdown. The ' +\n                        'operation will fail. Consider draining the HTTP server on shutdown; ' +\n                        'see https://go.apollo.dev/s/drain for details.');\n                    throw new Error(`Cannot execute GraphQL operations ${this.internals.state.phase === 'stopping'\n                        ? 'while the server is stopping'\n                        : 'after the server has stopped'}.'`);\n                default:\n                    throw new _utils_UnreachableCaseError_js__WEBPACK_IMPORTED_MODULE_15__.UnreachableCaseError(this.internals.state);\n            }\n        }\n    }\n    assertStarted(expressionForError) {\n        if (this.internals.state.phase !== 'started' &&\n            this.internals.state.phase !== 'draining' &&\n            !(this.internals.state.phase === 'starting' &&\n                this.internals.state.startedInBackground)) {\n            throw new Error('You must `await server.start()` before calling `' +\n                expressionForError +\n                '`');\n        }\n    }\n    logStartupError(err) {\n        this.logger.error('An error occurred during Apollo Server startup. All GraphQL requests ' +\n            'will now fail. The startup error was: ' +\n            (err?.message || err));\n    }\n    static constructSchema(config) {\n        if (config.schema) {\n            return config.schema;\n        }\n        const { typeDefs, resolvers } = config;\n        const augmentedTypeDefs = Array.isArray(typeDefs) ? typeDefs : [typeDefs];\n        return (0,_graphql_tools_schema__WEBPACK_IMPORTED_MODULE_20__.makeExecutableSchema)({\n            typeDefs: augmentedTypeDefs,\n            resolvers,\n        });\n    }\n    static generateSchemaDerivedData(schema, providedDocumentStore) {\n        (0,graphql__WEBPACK_IMPORTED_MODULE_21__.assertValidSchema)(schema);\n        return {\n            schema,\n            documentStore: providedDocumentStore === undefined\n                ? new _apollo_utils_keyvaluecache__WEBPACK_IMPORTED_MODULE_1__.InMemoryLRUCache()\n                : providedDocumentStore,\n            documentStoreKeyPrefix: providedDocumentStore\n                ? `${(0,_utils_computeCoreSchemaHash_js__WEBPACK_IMPORTED_MODULE_16__.computeCoreSchemaHash)((0,graphql__WEBPACK_IMPORTED_MODULE_22__.printSchema)(schema))}:`\n                : '',\n        };\n    }\n    async stop() {\n        switch (this.internals.state.phase) {\n            case 'initialized':\n            case 'starting':\n            case 'failed to start':\n                throw Error('apolloServer.stop() should only be called after `await apolloServer.start()` has succeeded');\n            case 'stopped':\n                if (this.internals.state.stopError) {\n                    throw this.internals.state.stopError;\n                }\n                return;\n            case 'stopping':\n            case 'draining': {\n                await this.internals.state.barrier;\n                const state = this.internals.state;\n                if (state.phase !== 'stopped') {\n                    throw Error(`Surprising post-stopping state ${state.phase}`);\n                }\n                if (state.stopError) {\n                    throw state.stopError;\n                }\n                return;\n            }\n            case 'started':\n                break;\n            default:\n                throw new _utils_UnreachableCaseError_js__WEBPACK_IMPORTED_MODULE_15__.UnreachableCaseError(this.internals.state);\n        }\n        const barrier = (0,_utils_resolvable_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        const { schemaManager, drainServers, landingPage, toDispose, toDisposeLast, } = this.internals.state;\n        this.internals.state = {\n            phase: 'draining',\n            barrier,\n            schemaManager,\n            landingPage,\n        };\n        try {\n            await drainServers?.();\n            this.internals.state = { phase: 'stopping', barrier };\n            await Promise.all([...toDispose].map((dispose) => dispose()));\n            await Promise.all([...toDisposeLast].map((dispose) => dispose()));\n        }\n        catch (stopError) {\n            this.internals.state = {\n                phase: 'stopped',\n                stopError: stopError,\n            };\n            barrier.resolve();\n            throw stopError;\n        }\n        this.internals.state = { phase: 'stopped', stopError: null };\n    }\n    async addDefaultPlugins() {\n        const { plugins, apolloConfig, nodeEnv, hideSchemaDetailsFromClientErrors, } = this.internals;\n        const isDev = nodeEnv !== 'production';\n        const alreadyHavePluginWithInternalId = (id) => plugins.some((p) => (0,_internalPlugin_js__WEBPACK_IMPORTED_MODULE_10__.pluginIsInternal)(p) && p.__internal_plugin_id__ === id);\n        const pluginsByInternalID = new Map();\n        for (const p of plugins) {\n            if ((0,_internalPlugin_js__WEBPACK_IMPORTED_MODULE_10__.pluginIsInternal)(p)) {\n                const id = p.__internal_plugin_id__;\n                if (!pluginsByInternalID.has(id)) {\n                    pluginsByInternalID.set(id, {\n                        sawDisabled: false,\n                        sawNonDisabled: false,\n                    });\n                }\n                const seen = pluginsByInternalID.get(id);\n                if (p.__is_disabled_plugin__) {\n                    seen.sawDisabled = true;\n                }\n                else {\n                    seen.sawNonDisabled = true;\n                }\n                if (seen.sawDisabled && seen.sawNonDisabled) {\n                    throw new Error(`You have tried to install both ApolloServerPlugin${id} and ` +\n                        `ApolloServerPlugin${id}Disabled in your server. Please choose ` +\n                        `whether or not you want to disable the feature and install the ` +\n                        `appropriate plugin for your use case.`);\n                }\n            }\n        }\n        {\n            if (!alreadyHavePluginWithInternalId('CacheControl')) {\n                const { ApolloServerPluginCacheControl } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@apollo\"), __webpack_require__.e(\"vendor-chunks/lru-cache\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/cacheControl/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/cacheControl/index.js\"));\n                plugins.push(ApolloServerPluginCacheControl());\n            }\n        }\n        {\n            const alreadyHavePlugin = alreadyHavePluginWithInternalId('UsageReporting');\n            if (!alreadyHavePlugin && apolloConfig.key) {\n                if (apolloConfig.graphRef) {\n                    const { ApolloServerPluginUsageReporting } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@apollo\"), __webpack_require__.e(\"vendor-chunks/lru-cache\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/usageReporting/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/index.js\"));\n                    plugins.unshift(ApolloServerPluginUsageReporting({\n                        __onlyIfSchemaIsNotSubgraph: true,\n                    }));\n                }\n                else {\n                    this.logger.warn('You have specified an Apollo key but have not specified a graph ref; usage ' +\n                        'reporting is disabled. To enable usage reporting, set the `APOLLO_GRAPH_REF` ' +\n                        'environment variable to `your-graph-id@your-graph-variant`. To disable this ' +\n                        'warning, install `ApolloServerPluginUsageReportingDisabled`.');\n                }\n            }\n        }\n        {\n            const alreadyHavePlugin = alreadyHavePluginWithInternalId('SchemaReporting');\n            const enabledViaEnvVar = process.env.APOLLO_SCHEMA_REPORTING === 'true';\n            if (!alreadyHavePlugin && enabledViaEnvVar) {\n                if (apolloConfig.key) {\n                    const { ApolloServerPluginSchemaReporting } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@apollo\").then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/schemaReporting/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaReporting/index.js\"));\n                    plugins.push(ApolloServerPluginSchemaReporting());\n                }\n                else {\n                    throw new Error(\"You've enabled schema reporting by setting the APOLLO_SCHEMA_REPORTING \" +\n                        'environment variable to true, but you also need to provide your ' +\n                        'Apollo API key, via the APOLLO_KEY environment ' +\n                        'variable or via `new ApolloServer({apollo: {key})');\n                }\n            }\n        }\n        {\n            const alreadyHavePlugin = alreadyHavePluginWithInternalId('InlineTrace');\n            if (!alreadyHavePlugin) {\n                const { ApolloServerPluginInlineTrace } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@apollo\").then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/inlineTrace/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/inlineTrace/index.js\"));\n                plugins.push(ApolloServerPluginInlineTrace({ __onlyIfSchemaIsSubgraph: true }));\n            }\n        }\n        const alreadyHavePlugin = alreadyHavePluginWithInternalId('LandingPageDisabled');\n        if (!alreadyHavePlugin) {\n            const { ApolloServerPluginLandingPageLocalDefault, ApolloServerPluginLandingPageProductionDefault, } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@apollo\").then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/landingPage/default/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/landingPage/default/index.js\"));\n            const plugin = isDev\n                ? ApolloServerPluginLandingPageLocalDefault()\n                : ApolloServerPluginLandingPageProductionDefault();\n            if (!isImplicitlyInstallablePlugin(plugin)) {\n                throw Error('default landing page plugin should be implicitly installable?');\n            }\n            plugin.__internal_installed_implicitly__ = true;\n            plugins.push(plugin);\n        }\n        {\n            const alreadyHavePlugin = alreadyHavePluginWithInternalId('DisableSuggestions');\n            if (hideSchemaDetailsFromClientErrors && !alreadyHavePlugin) {\n                const { ApolloServerPluginDisableSuggestions } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@apollo\").then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/disableSuggestions/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/disableSuggestions/index.js\"));\n                plugins.push(ApolloServerPluginDisableSuggestions());\n            }\n        }\n    }\n    addPlugin(plugin) {\n        if (this.internals.state.phase !== 'initialized') {\n            throw new Error(\"Can't add plugins after the server has started\");\n        }\n        this.internals.plugins.push(plugin);\n    }\n    async executeHTTPGraphQLRequest({ httpGraphQLRequest, context, }) {\n        try {\n            let runningServerState;\n            try {\n                runningServerState = await this._ensureStarted();\n            }\n            catch (error) {\n                return await this.errorResponse(error, httpGraphQLRequest);\n            }\n            if (runningServerState.landingPage &&\n                this.prefersHTML(httpGraphQLRequest)) {\n                let renderedHtml;\n                if (typeof runningServerState.landingPage.html === 'string') {\n                    renderedHtml = runningServerState.landingPage.html;\n                }\n                else {\n                    try {\n                        renderedHtml = await runningServerState.landingPage.html();\n                    }\n                    catch (maybeError) {\n                        const error = (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_7__.ensureError)(maybeError);\n                        this.logger.error(`Landing page \\`html\\` function threw: ${error}`);\n                        return await this.errorResponse(error, httpGraphQLRequest);\n                    }\n                }\n                return {\n                    headers: new _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_14__.HeaderMap([['content-type', 'text/html']]),\n                    body: {\n                        kind: 'complete',\n                        string: renderedHtml,\n                    },\n                };\n            }\n            if (this.internals.csrfPreventionRequestHeaders) {\n                (0,_preventCsrf_js__WEBPACK_IMPORTED_MODULE_11__.preventCsrf)(httpGraphQLRequest.headers, this.internals.csrfPreventionRequestHeaders);\n            }\n            let contextValue;\n            try {\n                contextValue = await context();\n            }\n            catch (maybeError) {\n                const error = (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_7__.ensureError)(maybeError);\n                try {\n                    await Promise.all(this.internals.plugins.map(async (plugin) => plugin.contextCreationDidFail?.({\n                        error,\n                    })));\n                }\n                catch (pluginError) {\n                    this.logger.error(`contextCreationDidFail hook threw: ${pluginError}`);\n                }\n                return await this.errorResponse((0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_7__.ensureGraphQLError)(error, 'Context creation failed: '), httpGraphQLRequest);\n            }\n            return await (0,_httpBatching_js__WEBPACK_IMPORTED_MODULE_9__.runPotentiallyBatchedHttpQuery)(this, httpGraphQLRequest, contextValue, runningServerState.schemaManager.getSchemaDerivedData(), this.internals);\n        }\n        catch (maybeError_) {\n            const maybeError = maybeError_;\n            if (maybeError instanceof graphql__WEBPACK_IMPORTED_MODULE_23__.GraphQLError &&\n                maybeError.extensions.code === _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.ApolloServerErrorCode.BAD_REQUEST) {\n                try {\n                    await Promise.all(this.internals.plugins.map(async (plugin) => plugin.invalidRequestWasReceived?.({ error: maybeError })));\n                }\n                catch (pluginError) {\n                    this.logger.error(`invalidRequestWasReceived hook threw: ${pluginError}`);\n                }\n            }\n            return await this.errorResponse(maybeError, httpGraphQLRequest);\n        }\n    }\n    async errorResponse(error, requestHead) {\n        const { formattedErrors, httpFromErrors } = (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_7__.normalizeAndFormatErrors)([error], {\n            includeStacktraceInErrorResponses: this.internals.includeStacktraceInErrorResponses,\n            formatError: this.internals.formatError,\n        });\n        return {\n            status: httpFromErrors.status ?? 500,\n            headers: new _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_14__.HeaderMap([\n                ...httpFromErrors.headers,\n                [\n                    'content-type',\n                    chooseContentTypeForSingleResultResponse(requestHead) ??\n                        MEDIA_TYPES.APPLICATION_JSON,\n                ],\n            ]),\n            body: {\n                kind: 'complete',\n                string: await this.internals.stringifyResult({\n                    errors: formattedErrors,\n                }),\n            },\n        };\n    }\n    prefersHTML(request) {\n        const acceptHeader = request.headers.get('accept');\n        return (request.method === 'GET' &&\n            !!acceptHeader &&\n            new negotiator__WEBPACK_IMPORTED_MODULE_4__({\n                headers: { accept: acceptHeader },\n            }).mediaType([\n                MEDIA_TYPES.APPLICATION_JSON,\n                MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON,\n                MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL,\n                MEDIA_TYPES.MULTIPART_MIXED_NO_DEFER_SPEC,\n                MEDIA_TYPES.TEXT_HTML,\n            ]) === MEDIA_TYPES.TEXT_HTML);\n    }\n    async executeOperation(request, options = {}) {\n        if (this.internals.state.phase === 'initialized') {\n            await this.start();\n        }\n        const schemaDerivedData = (await this._ensureStarted()).schemaManager.getSchemaDerivedData();\n        const graphQLRequest = {\n            ...request,\n            query: request.query && typeof request.query !== 'string'\n                ? (0,graphql__WEBPACK_IMPORTED_MODULE_24__.print)(request.query)\n                : request.query,\n        };\n        const response = await internalExecuteOperation({\n            server: this,\n            graphQLRequest,\n            internals: this.internals,\n            schemaDerivedData,\n            sharedResponseHTTPGraphQLHead: null,\n        }, options);\n        return response;\n    }\n}\nasync function internalExecuteOperation({ server, graphQLRequest, internals, schemaDerivedData, sharedResponseHTTPGraphQLHead, }, options) {\n    const requestContext = {\n        logger: server.logger,\n        cache: server.cache,\n        schema: schemaDerivedData.schema,\n        request: graphQLRequest,\n        response: {\n            http: sharedResponseHTTPGraphQLHead ?? (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_13__.newHTTPGraphQLHead)(),\n        },\n        contextValue: cloneObject(options?.contextValue ?? {}),\n        metrics: {},\n        overallCachePolicy: (0,_cachePolicy_js__WEBPACK_IMPORTED_MODULE_5__.newCachePolicy)(),\n        requestIsBatched: sharedResponseHTTPGraphQLHead !== null,\n    };\n    try {\n        return await (0,_requestPipeline_js__WEBPACK_IMPORTED_MODULE_12__.processGraphQLRequest)(schemaDerivedData, server, internals, requestContext);\n    }\n    catch (maybeError) {\n        const error = (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_7__.ensureError)(maybeError);\n        await Promise.all(internals.plugins.map(async (plugin) => plugin.unexpectedErrorProcessingRequest?.({\n            requestContext,\n            error,\n        })));\n        server.logger.error(`Unexpected error processing request: ${error}`);\n        throw new Error('Internal server error');\n    }\n}\nfunction isImplicitlyInstallablePlugin(p) {\n    return '__internal_installed_implicitly__' in p;\n}\nconst MEDIA_TYPES = {\n    APPLICATION_JSON: 'application/json; charset=utf-8',\n    APPLICATION_JSON_GRAPHQL_CALLBACK: 'application/json; callbackSpec=1.0; charset=utf-8',\n    APPLICATION_GRAPHQL_RESPONSE_JSON: 'application/graphql-response+json; charset=utf-8',\n    MULTIPART_MIXED_NO_DEFER_SPEC: 'multipart/mixed',\n    MULTIPART_MIXED_EXPERIMENTAL: 'multipart/mixed; deferSpec=20220824',\n    TEXT_HTML: 'text/html',\n};\nfunction chooseContentTypeForSingleResultResponse(head) {\n    const acceptHeader = head.headers.get('accept');\n    if (!acceptHeader) {\n        return MEDIA_TYPES.APPLICATION_JSON;\n    }\n    else {\n        const preferred = new negotiator__WEBPACK_IMPORTED_MODULE_4__({\n            headers: { accept: head.headers.get('accept') },\n        }).mediaType([\n            MEDIA_TYPES.APPLICATION_JSON,\n            MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON,\n            MEDIA_TYPES.APPLICATION_JSON_GRAPHQL_CALLBACK,\n        ]);\n        if (preferred) {\n            return preferred;\n        }\n        else {\n            return null;\n        }\n    }\n}\nfunction cloneObject(object) {\n    return Object.assign(Object.create(Object.getPrototypeOf(object)), object);\n}\n//# sourceMappingURL=ApolloServer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vQXBvbGxvU2VydmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUNrQztBQUMzQjtBQUNkO0FBQ2dDO0FBQy9DO0FBQ0k7QUFDYztBQUNpQjtBQUM4QjtBQUN2QztBQUNTO0FBQ1o7QUFDa0M7QUFDVjtBQUNIO0FBQzNCO0FBQ3NCO0FBQ0U7QUFDeEI7QUFDUTtBQUN5RTtBQUNsSTtBQUNBLDJCQUEyQiwrQ0FBa0I7QUFDN0MsNEJBQTRCLDRDQUFlO0FBQzNDO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMENBQTBDLGFBQW9CO0FBQzlEO0FBQ0EsNkJBQTZCLGdGQUFxQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtFQUFzQjtBQUNsQztBQUNBO0FBQ0Esd0NBQXdDLE9BQU87QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLG1FQUFhO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLG1FQUFhO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHlFQUFnQjtBQUN0QztBQUNBO0FBQ0EsZUFBZSw0RkFBZ0MsQ0FBQyx3RkFBZ0M7QUFDaEY7QUFDQSxtQkFBbUIsNEZBQWdDO0FBQ25EO0FBQ0E7QUFDQSw2Q0FBNkMsdUVBQWU7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwrRUFBc0IsK0NBQStDLGtFQUFnQjtBQUNwSCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFB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QTZEO0FBQzdELG1CQUFtQjtBQUNuQiw0QkFBNEIsK0RBQWM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJFQUFxQjtBQUMxQztBQUNBO0FBQ0Esc0JBQXNCLCtEQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxvRUFBb0UsTUFBTTtBQUMxRTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQLHlDQUF5QztBQUN6QywwREFBMEQsa0JBQWtCO0FBQzVFLDJFQUEyRTtBQUMzRTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHVDQUFVO0FBQ3hDLHVCQUF1QixvQ0FBb0M7QUFDM0QsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9BcG9sbG9TZXJ2ZXIuanM/OTFiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc05vZGVMaWtlIH0gZnJvbSAnQGFwb2xsby91dGlscy5pc25vZGVsaWtlJztcbmltcG9ydCB7IEluTWVtb3J5TFJVQ2FjaGUsIFByZWZpeGluZ0tleVZhbHVlQ2FjaGUsIH0gZnJvbSAnQGFwb2xsby91dGlscy5rZXl2YWx1ZWNhY2hlJztcbmltcG9ydCB7IG1ha2VFeGVjdXRhYmxlU2NoZW1hIH0gZnJvbSAnQGdyYXBocWwtdG9vbHMvc2NoZW1hJztcbmltcG9ydCByZXNvbHZhYmxlIGZyb20gJy4vdXRpbHMvcmVzb2x2YWJsZS5qcyc7XG5pbXBvcnQgeyBHcmFwaFFMRXJyb3IsIGFzc2VydFZhbGlkU2NoZW1hLCBwcmludCwgcHJpbnRTY2hlbWEsIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgbG9nbGV2ZWwgZnJvbSAnbG9nbGV2ZWwnO1xuaW1wb3J0IE5lZ290aWF0b3IgZnJvbSAnbmVnb3RpYXRvcic7XG5pbXBvcnQgeyBuZXdDYWNoZVBvbGljeSB9IGZyb20gJy4vY2FjaGVQb2xpY3kuanMnO1xuaW1wb3J0IHsgZGV0ZXJtaW5lQXBvbGxvQ29uZmlnIH0gZnJvbSAnLi9kZXRlcm1pbmVBcG9sbG9Db25maWcuanMnO1xuaW1wb3J0IHsgZW5zdXJlRXJyb3IsIGVuc3VyZUdyYXBoUUxFcnJvciwgbm9ybWFsaXplQW5kRm9ybWF0RXJyb3JzLCB9IGZyb20gJy4vZXJyb3JOb3JtYWxpemUuanMnO1xuaW1wb3J0IHsgQXBvbGxvU2VydmVyRXJyb3JDb2RlIH0gZnJvbSAnLi9lcnJvcnMvaW5kZXguanMnO1xuaW1wb3J0IHsgcnVuUG90ZW50aWFsbHlCYXRjaGVkSHR0cFF1ZXJ5IH0gZnJvbSAnLi9odHRwQmF0Y2hpbmcuanMnO1xuaW1wb3J0IHsgcGx1Z2luSXNJbnRlcm5hbCB9IGZyb20gJy4vaW50ZXJuYWxQbHVnaW4uanMnO1xuaW1wb3J0IHsgcHJldmVudENzcmYsIHJlY29tbWVuZGVkQ3NyZlByZXZlbnRpb25SZXF1ZXN0SGVhZGVycywgfSBmcm9tICcuL3ByZXZlbnRDc3JmLmpzJztcbmltcG9ydCB7IEFQUV9DQUNIRV9QUkVGSVgsIHByb2Nlc3NHcmFwaFFMUmVxdWVzdCB9IGZyb20gJy4vcmVxdWVzdFBpcGVsaW5lLmpzJztcbmltcG9ydCB7IG5ld0hUVFBHcmFwaFFMSGVhZCwgcHJldHR5SlNPTlN0cmluZ2lmeSB9IGZyb20gJy4vcnVuSHR0cFF1ZXJ5LmpzJztcbmltcG9ydCB7IEhlYWRlck1hcCB9IGZyb20gJy4vdXRpbHMvSGVhZGVyTWFwLmpzJztcbmltcG9ydCB7IFVucmVhY2hhYmxlQ2FzZUVycm9yIH0gZnJvbSAnLi91dGlscy9VbnJlYWNoYWJsZUNhc2VFcnJvci5qcyc7XG5pbXBvcnQgeyBjb21wdXRlQ29yZVNjaGVtYUhhc2ggfSBmcm9tICcuL3V0aWxzL2NvbXB1dGVDb3JlU2NoZW1hSGFzaC5qcyc7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tICcuL3V0aWxzL2lzRGVmaW5lZC5qcyc7XG5pbXBvcnQgeyBTY2hlbWFNYW5hZ2VyIH0gZnJvbSAnLi91dGlscy9zY2hlbWFNYW5hZ2VyLmpzJztcbmltcG9ydCB7IE5vSW50cm9zcGVjdGlvbiwgY3JlYXRlTWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUsIERFRkFVTFRfTUFYX1JFQ1VSU0lWRV9TRUxFQ1RJT05TLCB9IGZyb20gJy4vdmFsaWRhdGlvblJ1bGVzL2luZGV4LmpzJztcbmZ1bmN0aW9uIGRlZmF1bHRMb2dnZXIoKSB7XG4gICAgY29uc3QgbG9nbGV2ZWxMb2dnZXIgPSBsb2dsZXZlbC5nZXRMb2dnZXIoJ2Fwb2xsby1zZXJ2ZXInKTtcbiAgICBsb2dsZXZlbExvZ2dlci5zZXRMZXZlbChsb2dsZXZlbC5sZXZlbHMuSU5GTyk7XG4gICAgcmV0dXJuIGxvZ2xldmVsTG9nZ2VyO1xufVxuZXhwb3J0IGNsYXNzIEFwb2xsb1NlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IG5vZGVFbnYgPSBjb25maWcubm9kZUVudiA/PyBwcm9jZXNzLmVudi5OT0RFX0VOViA/PyAnJztcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBjb25maWcubG9nZ2VyID8/IGRlZmF1bHRMb2dnZXIoKTtcbiAgICAgICAgY29uc3QgYXBvbGxvQ29uZmlnID0gZGV0ZXJtaW5lQXBvbGxvQ29uZmlnKGNvbmZpZy5hcG9sbG8sIHRoaXMubG9nZ2VyKTtcbiAgICAgICAgY29uc3QgaXNEZXYgPSBub2RlRW52ICE9PSAncHJvZHVjdGlvbic7XG4gICAgICAgIGlmIChjb25maWcuY2FjaGUgJiZcbiAgICAgICAgICAgIGNvbmZpZy5jYWNoZSAhPT0gJ2JvdW5kZWQnICYmXG4gICAgICAgICAgICBQcmVmaXhpbmdLZXlWYWx1ZUNhY2hlLnByZWZpeGVzQXJlVW5uZWNlc3NhcnlGb3JJc29sYXRpb24oY29uZmlnLmNhY2hlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgY2Fubm90IHBhc3MgYSBjYWNoZSByZXR1cm5lZCBmcm9tICcgK1xuICAgICAgICAgICAgICAgICdgUHJlZml4aW5nS2V5VmFsdWVDYWNoZS5jYWNoZURhbmdlcm91c2x5RG9lc05vdE5lZWRQcmVmaXhlc0Zvcklzb2xhdGlvbmAnICtcbiAgICAgICAgICAgICAgICAndG8gYG5ldyBBcG9sbG9TZXJ2ZXIoeyBjYWNoZSB9KWAsIGJlY2F1c2UgQXBvbGxvIFNlcnZlciBtYXkgdXNlIGl0IGZvciAnICtcbiAgICAgICAgICAgICAgICAnbXVsdGlwbGUgZmVhdHVyZXMgd2hvc2UgY2FjaGUga2V5cyBtdXN0IGJlIGRpc3RpbmN0IGZyb20gZWFjaCBvdGhlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZSA9IGNvbmZpZy5nYXRld2F5XG4gICAgICAgICAgICA/XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwaGFzZTogJ2luaXRpYWxpemVkJyxcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hTWFuYWdlcjogbmV3IFNjaGVtYU1hbmFnZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheTogY29uZmlnLmdhdGV3YXksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcG9sbG9Db25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWFEZXJpdmVkRGF0YVByb3ZpZGVyOiAoc2NoZW1hKSA9PiBBcG9sbG9TZXJ2ZXIuZ2VuZXJhdGVTY2hlbWFEZXJpdmVkRGF0YShzY2hlbWEsIGNvbmZpZy5kb2N1bWVudFN0b3JlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlcjogdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBoYXNlOiAnaW5pdGlhbGl6ZWQnLFxuICAgICAgICAgICAgICAgICAgICBzY2hlbWFNYW5hZ2VyOiBuZXcgU2NoZW1hTWFuYWdlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlTY2hlbWE6IEFwb2xsb1NlcnZlci5jb25zdHJ1Y3RTY2hlbWEoY29uZmlnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYURlcml2ZWREYXRhUHJvdmlkZXI6IChzY2hlbWEpID0+IEFwb2xsb1NlcnZlci5nZW5lcmF0ZVNjaGVtYURlcml2ZWREYXRhKHNjaGVtYSwgY29uZmlnLmRvY3VtZW50U3RvcmUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyOiB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaW50cm9zcGVjdGlvbkVuYWJsZWQgPSBjb25maWcuaW50cm9zcGVjdGlvbiA/PyBpc0RldjtcbiAgICAgICAgY29uc3QgaGlkZVNjaGVtYURldGFpbHNGcm9tQ2xpZW50RXJyb3JzID0gY29uZmlnLmhpZGVTY2hlbWFEZXRhaWxzRnJvbUNsaWVudEVycm9ycyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy5jYWNoZSA9XG4gICAgICAgICAgICBjb25maWcuY2FjaGUgPT09IHVuZGVmaW5lZCB8fCBjb25maWcuY2FjaGUgPT09ICdib3VuZGVkJ1xuICAgICAgICAgICAgICAgID8gbmV3IEluTWVtb3J5TFJVQ2FjaGUoKVxuICAgICAgICAgICAgICAgIDogY29uZmlnLmNhY2hlO1xuICAgICAgICBjb25zdCBtYXhSZWN1cnNpdmVTZWxlY3Rpb25zUnVsZSA9IGNvbmZpZy5tYXhSZWN1cnNpdmVTZWxlY3Rpb25zID09PSB0cnVlXG4gICAgICAgICAgICA/IFtjcmVhdGVNYXhSZWN1cnNpdmVTZWxlY3Rpb25zUnVsZShERUZBVUxUX01BWF9SRUNVUlNJVkVfU0VMRUNUSU9OUyldXG4gICAgICAgICAgICA6IHR5cGVvZiBjb25maWcubWF4UmVjdXJzaXZlU2VsZWN0aW9ucyA9PT0gJ251bWJlcidcbiAgICAgICAgICAgICAgICA/IFtjcmVhdGVNYXhSZWN1cnNpdmVTZWxlY3Rpb25zUnVsZShjb25maWcubWF4UmVjdXJzaXZlU2VsZWN0aW9ucyldXG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvblJ1bGVzID0gW1xuICAgICAgICAgICAgLi4uKGludHJvc3BlY3Rpb25FbmFibGVkID8gW10gOiBbTm9JbnRyb3NwZWN0aW9uXSksXG4gICAgICAgICAgICAuLi5tYXhSZWN1cnNpdmVTZWxlY3Rpb25zUnVsZSxcbiAgICAgICAgXTtcbiAgICAgICAgbGV0IGxhdGVyVmFsaWRhdGlvblJ1bGVzO1xuICAgICAgICBpZiAobWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGF0ZXJWYWxpZGF0aW9uUnVsZXMgPSBjb25maWcudmFsaWRhdGlvblJ1bGVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdGlvblJ1bGVzLnB1c2goLi4uKGNvbmZpZy52YWxpZGF0aW9uUnVsZXMgPz8gW10pKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmludGVybmFscyA9IHtcbiAgICAgICAgICAgIGZvcm1hdEVycm9yOiBjb25maWcuZm9ybWF0RXJyb3IsXG4gICAgICAgICAgICByb290VmFsdWU6IGNvbmZpZy5yb290VmFsdWUsXG4gICAgICAgICAgICB2YWxpZGF0aW9uUnVsZXMsXG4gICAgICAgICAgICBsYXRlclZhbGlkYXRpb25SdWxlcyxcbiAgICAgICAgICAgIGhpZGVTY2hlbWFEZXRhaWxzRnJvbUNsaWVudEVycm9ycyxcbiAgICAgICAgICAgIGRhbmdlcm91c2x5RGlzYWJsZVZhbGlkYXRpb246IGNvbmZpZy5kYW5nZXJvdXNseURpc2FibGVWYWxpZGF0aW9uID8/IGZhbHNlLFxuICAgICAgICAgICAgZmllbGRSZXNvbHZlcjogY29uZmlnLmZpZWxkUmVzb2x2ZXIsXG4gICAgICAgICAgICBpbmNsdWRlU3RhY2t0cmFjZUluRXJyb3JSZXNwb25zZXM6IGNvbmZpZy5pbmNsdWRlU3RhY2t0cmFjZUluRXJyb3JSZXNwb25zZXMgPz9cbiAgICAgICAgICAgICAgICAobm9kZUVudiAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5vZGVFbnYgIT09ICd0ZXN0JyksXG4gICAgICAgICAgICBwZXJzaXN0ZWRRdWVyaWVzOiBjb25maWcucGVyc2lzdGVkUXVlcmllcyA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcucGVyc2lzdGVkUXVlcmllcyxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IG5ldyBQcmVmaXhpbmdLZXlWYWx1ZUNhY2hlKGNvbmZpZy5wZXJzaXN0ZWRRdWVyaWVzPy5jYWNoZSA/PyB0aGlzLmNhY2hlLCBBUFFfQ0FDSEVfUFJFRklYKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgbm9kZUVudixcbiAgICAgICAgICAgIGFsbG93QmF0Y2hlZEh0dHBSZXF1ZXN0czogY29uZmlnLmFsbG93QmF0Y2hlZEh0dHBSZXF1ZXN0cyA/PyBmYWxzZSxcbiAgICAgICAgICAgIGFwb2xsb0NvbmZpZyxcbiAgICAgICAgICAgIHBsdWdpbnM6IGNvbmZpZy5wbHVnaW5zID8/IFtdLFxuICAgICAgICAgICAgcGFyc2VPcHRpb25zOiBjb25maWcucGFyc2VPcHRpb25zID8/IHt9LFxuICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICBzdG9wT25UZXJtaW5hdGlvblNpZ25hbHM6IGNvbmZpZy5zdG9wT25UZXJtaW5hdGlvblNpZ25hbHMsXG4gICAgICAgICAgICBnYXRld2F5RXhlY3V0b3I6IG51bGwsXG4gICAgICAgICAgICBjc3JmUHJldmVudGlvblJlcXVlc3RIZWFkZXJzOiBjb25maWcuY3NyZlByZXZlbnRpb24gPT09IHRydWUgfHwgY29uZmlnLmNzcmZQcmV2ZW50aW9uID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHJlY29tbWVuZGVkQ3NyZlByZXZlbnRpb25SZXF1ZXN0SGVhZGVyc1xuICAgICAgICAgICAgICAgIDogY29uZmlnLmNzcmZQcmV2ZW50aW9uID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgOiAoY29uZmlnLmNzcmZQcmV2ZW50aW9uLnJlcXVlc3RIZWFkZXJzID8/XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvbW1lbmRlZENzcmZQcmV2ZW50aW9uUmVxdWVzdEhlYWRlcnMpLFxuICAgICAgICAgICAgc3RhdHVzNDAwRm9yVmFyaWFibGVDb2VyY2lvbkVycm9yczogY29uZmlnLnN0YXR1czQwMEZvclZhcmlhYmxlQ29lcmNpb25FcnJvcnMgPz8gZmFsc2UsXG4gICAgICAgICAgICBfX3Rlc3RpbmdfaW5jcmVtZW50YWxFeGVjdXRpb25SZXN1bHRzOiBjb25maWcuX190ZXN0aW5nX2luY3JlbWVudGFsRXhlY3V0aW9uUmVzdWx0cyxcbiAgICAgICAgICAgIHN0cmluZ2lmeVJlc3VsdDogY29uZmlnLnN0cmluZ2lmeVJlc3VsdCA/PyBwcmV0dHlKU09OU3RyaW5naWZ5LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0KGZhbHNlKTtcbiAgICB9XG4gICAgc3RhcnRJbkJhY2tncm91bmRIYW5kbGluZ1N0YXJ0dXBFcnJvcnNCeUxvZ2dpbmdBbmRGYWlsaW5nQWxsUmVxdWVzdHMoKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0KHRydWUpLmNhdGNoKChlKSA9PiB0aGlzLmxvZ1N0YXJ0dXBFcnJvcihlKSk7XG4gICAgfVxuICAgIGFzeW5jIF9zdGFydChzdGFydGVkSW5CYWNrZ3JvdW5kKSB7XG4gICAgICAgIGlmICh0aGlzLmludGVybmFscy5zdGF0ZS5waGFzZSAhPT0gJ2luaXRpYWxpemVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBZb3Ugc2hvdWxkIG9ubHkgY2FsbCAnc3RhcnQoKScgb3IgYCArXG4gICAgICAgICAgICAgICAgYCdzdGFydEluQmFja2dyb3VuZEhhbmRsaW5nU3RhcnR1cEVycm9yc0J5TG9nZ2luZ0FuZEZhaWxpbmdBbGxSZXF1ZXN0cygpJyBgICtcbiAgICAgICAgICAgICAgICBgb25jZSBvbiB5b3VyIEFwb2xsb1NlcnZlci5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2hlbWFNYW5hZ2VyID0gdGhpcy5pbnRlcm5hbHMuc3RhdGUuc2NoZW1hTWFuYWdlcjtcbiAgICAgICAgY29uc3QgYmFycmllciA9IHJlc29sdmFibGUoKTtcbiAgICAgICAgdGhpcy5pbnRlcm5hbHMuc3RhdGUgPSB7XG4gICAgICAgICAgICBwaGFzZTogJ3N0YXJ0aW5nJyxcbiAgICAgICAgICAgIGJhcnJpZXIsXG4gICAgICAgICAgICBzY2hlbWFNYW5hZ2VyLFxuICAgICAgICAgICAgc3RhcnRlZEluQmFja2dyb3VuZCxcbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkRGVmYXVsdFBsdWdpbnMoKTtcbiAgICAgICAgICAgIGNvbnN0IHRvRGlzcG9zZSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgZXhlY3V0b3IgPSBhd2FpdCBzY2hlbWFNYW5hZ2VyLnN0YXJ0KCk7XG4gICAgICAgICAgICBpZiAoZXhlY3V0b3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVybmFscy5nYXRld2F5RXhlY3V0b3IgPSBleGVjdXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvRGlzcG9zZS5wdXNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzY2hlbWFNYW5hZ2VyLnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2NoZW1hRGVyaXZlZERhdGEgPSBzY2hlbWFNYW5hZ2VyLmdldFNjaGVtYURlcml2ZWREYXRhKCk7XG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0ge1xuICAgICAgICAgICAgICAgIGxvZ2dlcjogdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgY2FjaGU6IHRoaXMuY2FjaGUsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiBzY2hlbWFEZXJpdmVkRGF0YS5zY2hlbWEsXG4gICAgICAgICAgICAgICAgYXBvbGxvOiB0aGlzLmludGVybmFscy5hcG9sbG9Db25maWcsXG4gICAgICAgICAgICAgICAgc3RhcnRlZEluQmFja2dyb3VuZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCB0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnMgPSAoYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5pbnRlcm5hbHMucGx1Z2lucy5tYXAoYXN5bmMgKHBsdWdpbikgPT4gKHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJMaXN0ZW5lcjogcGx1Z2luLnNlcnZlcldpbGxTdGFydCAmJiAoYXdhaXQgcGx1Z2luLnNlcnZlcldpbGxTdGFydChzZXJ2aWNlKSksXG4gICAgICAgICAgICAgICAgaW5zdGFsbGVkSW1wbGljaXRseTogaXNJbXBsaWNpdGx5SW5zdGFsbGFibGVQbHVnaW4ocGx1Z2luKSAmJlxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uX19pbnRlcm5hbF9pbnN0YWxsZWRfaW1wbGljaXRseV9fLFxuICAgICAgICAgICAgfSkpKSkuZmlsdGVyKChtYXliZVRhZ2dlZFNlcnZlckxpc3RlbmVyKSA9PiB0eXBlb2YgbWF5YmVUYWdnZWRTZXJ2ZXJMaXN0ZW5lci5zZXJ2ZXJMaXN0ZW5lciA9PT0gJ29iamVjdCcpO1xuICAgICAgICAgICAgdGFnZ2VkU2VydmVyTGlzdGVuZXJzLmZvckVhY2goKHsgc2VydmVyTGlzdGVuZXI6IHsgc2NoZW1hRGlkTG9hZE9yVXBkYXRlIH0gfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzY2hlbWFEaWRMb2FkT3JVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hTWFuYWdlci5vblNjaGVtYUxvYWRPclVwZGF0ZShzY2hlbWFEaWRMb2FkT3JVcGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyV2lsbFN0b3BzID0gdGFnZ2VkU2VydmVyTGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgLm1hcCgobCkgPT4gbC5zZXJ2ZXJMaXN0ZW5lci5zZXJ2ZXJXaWxsU3RvcClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGlzRGVmaW5lZCk7XG4gICAgICAgICAgICBpZiAoc2VydmVyV2lsbFN0b3BzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRvRGlzcG9zZS5wdXNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoc2VydmVyV2lsbFN0b3BzLm1hcCgoc2VydmVyV2lsbFN0b3ApID0+IHNlcnZlcldpbGxTdG9wKCkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRyYWluU2VydmVyQ2FsbGJhY2tzID0gdGFnZ2VkU2VydmVyTGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgLm1hcCgobCkgPT4gbC5zZXJ2ZXJMaXN0ZW5lci5kcmFpblNlcnZlcilcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGlzRGVmaW5lZCk7XG4gICAgICAgICAgICBjb25zdCBkcmFpblNlcnZlcnMgPSBkcmFpblNlcnZlckNhbGxiYWNrcy5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZHJhaW5TZXJ2ZXJDYWxsYmFja3MubWFwKChkcmFpblNlcnZlcikgPT4gZHJhaW5TZXJ2ZXIoKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBsZXQgdGFnZ2VkU2VydmVyTGlzdGVuZXJzV2l0aFJlbmRlckxhbmRpbmdQYWdlID0gdGFnZ2VkU2VydmVyTGlzdGVuZXJzLmZpbHRlcigobCkgPT4gbC5zZXJ2ZXJMaXN0ZW5lci5yZW5kZXJMYW5kaW5nUGFnZSk7XG4gICAgICAgICAgICBpZiAodGFnZ2VkU2VydmVyTGlzdGVuZXJzV2l0aFJlbmRlckxhbmRpbmdQYWdlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnNXaXRoUmVuZGVyTGFuZGluZ1BhZ2UgPVxuICAgICAgICAgICAgICAgICAgICB0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnNXaXRoUmVuZGVyTGFuZGluZ1BhZ2UuZmlsdGVyKChsKSA9PiAhbC5pbnN0YWxsZWRJbXBsaWNpdGx5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBsYW5kaW5nUGFnZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGFnZ2VkU2VydmVyTGlzdGVuZXJzV2l0aFJlbmRlckxhbmRpbmdQYWdlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignT25seSBvbmUgcGx1Z2luIGNhbiBpbXBsZW1lbnQgcmVuZGVyTGFuZGluZ1BhZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnNXaXRoUmVuZGVyTGFuZGluZ1BhZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGFuZGluZ1BhZ2UgPVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0YWdnZWRTZXJ2ZXJMaXN0ZW5lcnNXaXRoUmVuZGVyTGFuZGluZ1BhZ2VbMF0uc2VydmVyTGlzdGVuZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW5kZXJMYW5kaW5nUGFnZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdG9EaXNwb3NlTGFzdCA9IHRoaXMubWF5YmVSZWdpc3RlclRlcm1pbmF0aW9uU2lnbmFsSGFuZGxlcnMoWydTSUdJTlQnLCAnU0lHVEVSTSddLCBzdGFydGVkSW5CYWNrZ3JvdW5kKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxzLnN0YXRlID0ge1xuICAgICAgICAgICAgICAgIHBoYXNlOiAnc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgc2NoZW1hTWFuYWdlcixcbiAgICAgICAgICAgICAgICBkcmFpblNlcnZlcnMsXG4gICAgICAgICAgICAgICAgbGFuZGluZ1BhZ2UsXG4gICAgICAgICAgICAgICAgdG9EaXNwb3NlLFxuICAgICAgICAgICAgICAgIHRvRGlzcG9zZUxhc3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChtYXliZUVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGVuc3VyZUVycm9yKG1heWJlRXJyb3IpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmludGVybmFscy5wbHVnaW5zLm1hcChhc3luYyAocGx1Z2luKSA9PiBwbHVnaW4uc3RhcnR1cERpZEZhaWw/Lih7IGVycm9yIH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAocGx1Z2luRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgc3RhcnR1cERpZEZhaWwgaG9vayB0aHJldzogJHtwbHVnaW5FcnJvcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxzLnN0YXRlID0ge1xuICAgICAgICAgICAgICAgIHBoYXNlOiAnZmFpbGVkIHRvIHN0YXJ0JyxcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGJhcnJpZXIucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1heWJlUmVnaXN0ZXJUZXJtaW5hdGlvblNpZ25hbEhhbmRsZXJzKHNpZ25hbHMsIHN0YXJ0ZWRJbkJhY2tncm91bmQpIHtcbiAgICAgICAgY29uc3QgdG9EaXNwb3NlTGFzdCA9IFtdO1xuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbHMuc3RvcE9uVGVybWluYXRpb25TaWduYWxzID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgKHRoaXMuaW50ZXJuYWxzLnN0b3BPblRlcm1pbmF0aW9uU2lnbmFscyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgIShpc05vZGVMaWtlICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxzLm5vZGVFbnYgIT09ICd0ZXN0JyAmJlxuICAgICAgICAgICAgICAgICAgICAhc3RhcnRlZEluQmFja2dyb3VuZCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9EaXNwb3NlTGFzdDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVjZWl2ZWRTaWduYWwgPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgc2lnbmFsSGFuZGxlciA9IGFzeW5jIChzaWduYWwpID0+IHtcbiAgICAgICAgICAgIGlmIChyZWNlaXZlZFNpZ25hbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY2VpdmVkU2lnbmFsID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBzdG9wKCkgdGhyZXcgZHVyaW5nICR7c2lnbmFsfSBzaHV0ZG93bmApO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb2Nlc3Mua2lsbChwcm9jZXNzLnBpZCwgc2lnbmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgc2lnbmFscy5mb3JFYWNoKChzaWduYWwpID0+IHtcbiAgICAgICAgICAgIHByb2Nlc3Mub24oc2lnbmFsLCBzaWduYWxIYW5kbGVyKTtcbiAgICAgICAgICAgIHRvRGlzcG9zZUxhc3QucHVzaChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5yZW1vdmVMaXN0ZW5lcihzaWduYWwsIHNpZ25hbEhhbmRsZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdG9EaXNwb3NlTGFzdDtcbiAgICB9XG4gICAgYXN5bmMgX2Vuc3VyZVN0YXJ0ZWQoKSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaW50ZXJuYWxzLnN0YXRlLnBoYXNlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5pdGlhbGl6ZWQnOlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBuZWVkIHRvIGNhbGwgYHNlcnZlci5zdGFydCgpYCBiZWZvcmUgdXNpbmcgeW91ciBBcG9sbG8gU2VydmVyLicpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5pbnRlcm5hbHMuc3RhdGUuYmFycmllcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFpbGVkIHRvIHN0YXJ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dTdGFydHVwRXJyb3IodGhpcy5pbnRlcm5hbHMuc3RhdGUuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgZGF0YSBncmFwaCBpcyBtaXNzaW5nIGEgdmFsaWQgY29uZmlndXJhdGlvbi4gTW9yZSBkZXRhaWxzIG1heSBiZSBhdmFpbGFibGUgaW4gdGhlIHNlcnZlciBsb2dzLicpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0ZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2RyYWluaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxzLnN0YXRlO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0b3BwaW5nJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzdG9wcGVkJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybignQSBHcmFwaFFMIG9wZXJhdGlvbiB3YXMgcmVjZWl2ZWQgZHVyaW5nIHNlcnZlciBzaHV0ZG93bi4gVGhlICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ29wZXJhdGlvbiB3aWxsIGZhaWwuIENvbnNpZGVyIGRyYWluaW5nIHRoZSBIVFRQIHNlcnZlciBvbiBzaHV0ZG93bjsgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnc2VlIGh0dHBzOi8vZ28uYXBvbGxvLmRldi9zL2RyYWluIGZvciBkZXRhaWxzLicpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBleGVjdXRlIEdyYXBoUUwgb3BlcmF0aW9ucyAke3RoaXMuaW50ZXJuYWxzLnN0YXRlLnBoYXNlID09PSAnc3RvcHBpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICd3aGlsZSB0aGUgc2VydmVyIGlzIHN0b3BwaW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnYWZ0ZXIgdGhlIHNlcnZlciBoYXMgc3RvcHBlZCd9LidgKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5yZWFjaGFibGVDYXNlRXJyb3IodGhpcy5pbnRlcm5hbHMuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzc2VydFN0YXJ0ZWQoZXhwcmVzc2lvbkZvckVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLmludGVybmFscy5zdGF0ZS5waGFzZSAhPT0gJ3N0YXJ0ZWQnICYmXG4gICAgICAgICAgICB0aGlzLmludGVybmFscy5zdGF0ZS5waGFzZSAhPT0gJ2RyYWluaW5nJyAmJlxuICAgICAgICAgICAgISh0aGlzLmludGVybmFscy5zdGF0ZS5waGFzZSA9PT0gJ3N0YXJ0aW5nJyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxzLnN0YXRlLnN0YXJ0ZWRJbkJhY2tncm91bmQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IGBhd2FpdCBzZXJ2ZXIuc3RhcnQoKWAgYmVmb3JlIGNhbGxpbmcgYCcgK1xuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25Gb3JFcnJvciArXG4gICAgICAgICAgICAgICAgJ2AnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2dTdGFydHVwRXJyb3IoZXJyKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgQXBvbGxvIFNlcnZlciBzdGFydHVwLiBBbGwgR3JhcGhRTCByZXF1ZXN0cyAnICtcbiAgICAgICAgICAgICd3aWxsIG5vdyBmYWlsLiBUaGUgc3RhcnR1cCBlcnJvciB3YXM6ICcgK1xuICAgICAgICAgICAgKGVycj8ubWVzc2FnZSB8fCBlcnIpKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbnN0cnVjdFNjaGVtYShjb25maWcpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25maWcuc2NoZW1hO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdHlwZURlZnMsIHJlc29sdmVycyB9ID0gY29uZmlnO1xuICAgICAgICBjb25zdCBhdWdtZW50ZWRUeXBlRGVmcyA9IEFycmF5LmlzQXJyYXkodHlwZURlZnMpID8gdHlwZURlZnMgOiBbdHlwZURlZnNdO1xuICAgICAgICByZXR1cm4gbWFrZUV4ZWN1dGFibGVTY2hlbWEoe1xuICAgICAgICAgICAgdHlwZURlZnM6IGF1Z21lbnRlZFR5cGVEZWZzLFxuICAgICAgICAgICAgcmVzb2x2ZXJzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdlbmVyYXRlU2NoZW1hRGVyaXZlZERhdGEoc2NoZW1hLCBwcm92aWRlZERvY3VtZW50U3RvcmUpIHtcbiAgICAgICAgYXNzZXJ0VmFsaWRTY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNjaGVtYSxcbiAgICAgICAgICAgIGRvY3VtZW50U3RvcmU6IHByb3ZpZGVkRG9jdW1lbnRTdG9yZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBuZXcgSW5NZW1vcnlMUlVDYWNoZSgpXG4gICAgICAgICAgICAgICAgOiBwcm92aWRlZERvY3VtZW50U3RvcmUsXG4gICAgICAgICAgICBkb2N1bWVudFN0b3JlS2V5UHJlZml4OiBwcm92aWRlZERvY3VtZW50U3RvcmVcbiAgICAgICAgICAgICAgICA/IGAke2NvbXB1dGVDb3JlU2NoZW1hSGFzaChwcmludFNjaGVtYShzY2hlbWEpKX06YFxuICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5pbnRlcm5hbHMuc3RhdGUucGhhc2UpIHtcbiAgICAgICAgICAgIGNhc2UgJ2luaXRpYWxpemVkJzpcbiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0aW5nJzpcbiAgICAgICAgICAgIGNhc2UgJ2ZhaWxlZCB0byBzdGFydCc6XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2Fwb2xsb1NlcnZlci5zdG9wKCkgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGFmdGVyIGBhd2FpdCBhcG9sbG9TZXJ2ZXIuc3RhcnQoKWAgaGFzIHN1Y2NlZWRlZCcpO1xuICAgICAgICAgICAgY2FzZSAnc3RvcHBlZCc6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxzLnN0YXRlLnN0b3BFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmludGVybmFscy5zdGF0ZS5zdG9wRXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgJ3N0b3BwaW5nJzpcbiAgICAgICAgICAgIGNhc2UgJ2RyYWluaW5nJzoge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaW50ZXJuYWxzLnN0YXRlLmJhcnJpZXI7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmludGVybmFscy5zdGF0ZTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUucGhhc2UgIT09ICdzdG9wcGVkJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU3VycHJpc2luZyBwb3N0LXN0b3BwaW5nIHN0YXRlICR7c3RhdGUucGhhc2V9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zdG9wRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc3RhdGUuc3RvcEVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdzdGFydGVkJzpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVucmVhY2hhYmxlQ2FzZUVycm9yKHRoaXMuaW50ZXJuYWxzLnN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYXJyaWVyID0gcmVzb2x2YWJsZSgpO1xuICAgICAgICBjb25zdCB7IHNjaGVtYU1hbmFnZXIsIGRyYWluU2VydmVycywgbGFuZGluZ1BhZ2UsIHRvRGlzcG9zZSwgdG9EaXNwb3NlTGFzdCwgfSA9IHRoaXMuaW50ZXJuYWxzLnN0YXRlO1xuICAgICAgICB0aGlzLmludGVybmFscy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHBoYXNlOiAnZHJhaW5pbmcnLFxuICAgICAgICAgICAgYmFycmllcixcbiAgICAgICAgICAgIHNjaGVtYU1hbmFnZXIsXG4gICAgICAgICAgICBsYW5kaW5nUGFnZSxcbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGRyYWluU2VydmVycz8uKCk7XG4gICAgICAgICAgICB0aGlzLmludGVybmFscy5zdGF0ZSA9IHsgcGhhc2U6ICdzdG9wcGluZycsIGJhcnJpZXIgfTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi50b0Rpc3Bvc2VdLm1hcCgoZGlzcG9zZSkgPT4gZGlzcG9zZSgpKSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbLi4udG9EaXNwb3NlTGFzdF0ubWFwKChkaXNwb3NlKSA9PiBkaXNwb3NlKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoc3RvcEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmludGVybmFscy5zdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBwaGFzZTogJ3N0b3BwZWQnLFxuICAgICAgICAgICAgICAgIHN0b3BFcnJvcjogc3RvcEVycm9yLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJhcnJpZXIucmVzb2x2ZSgpO1xuICAgICAgICAgICAgdGhyb3cgc3RvcEVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW50ZXJuYWxzLnN0YXRlID0geyBwaGFzZTogJ3N0b3BwZWQnLCBzdG9wRXJyb3I6IG51bGwgfTtcbiAgICB9XG4gICAgYXN5bmMgYWRkRGVmYXVsdFBsdWdpbnMoKSB7XG4gICAgICAgIGNvbnN0IHsgcGx1Z2lucywgYXBvbGxvQ29uZmlnLCBub2RlRW52LCBoaWRlU2NoZW1hRGV0YWlsc0Zyb21DbGllbnRFcnJvcnMsIH0gPSB0aGlzLmludGVybmFscztcbiAgICAgICAgY29uc3QgaXNEZXYgPSBub2RlRW52ICE9PSAncHJvZHVjdGlvbic7XG4gICAgICAgIGNvbnN0IGFscmVhZHlIYXZlUGx1Z2luV2l0aEludGVybmFsSWQgPSAoaWQpID0+IHBsdWdpbnMuc29tZSgocCkgPT4gcGx1Z2luSXNJbnRlcm5hbChwKSAmJiBwLl9faW50ZXJuYWxfcGx1Z2luX2lkX18gPT09IGlkKTtcbiAgICAgICAgY29uc3QgcGx1Z2luc0J5SW50ZXJuYWxJRCA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHBsdWdpbnMpIHtcbiAgICAgICAgICAgIGlmIChwbHVnaW5Jc0ludGVybmFsKHApKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwLl9faW50ZXJuYWxfcGx1Z2luX2lkX187XG4gICAgICAgICAgICAgICAgaWYgKCFwbHVnaW5zQnlJbnRlcm5hbElELmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luc0J5SW50ZXJuYWxJRC5zZXQoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhd0Rpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhd05vbkRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBwbHVnaW5zQnlJbnRlcm5hbElELmdldChpZCk7XG4gICAgICAgICAgICAgICAgaWYgKHAuX19pc19kaXNhYmxlZF9wbHVnaW5fXykge1xuICAgICAgICAgICAgICAgICAgICBzZWVuLnNhd0Rpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlZW4uc2F3Tm9uRGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2Vlbi5zYXdEaXNhYmxlZCAmJiBzZWVuLnNhd05vbkRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IGhhdmUgdHJpZWQgdG8gaW5zdGFsbCBib3RoIEFwb2xsb1NlcnZlclBsdWdpbiR7aWR9IGFuZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBBcG9sbG9TZXJ2ZXJQbHVnaW4ke2lkfURpc2FibGVkIGluIHlvdXIgc2VydmVyLiBQbGVhc2UgY2hvb3NlIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHdoZXRoZXIgb3Igbm90IHlvdSB3YW50IHRvIGRpc2FibGUgdGhlIGZlYXR1cmUgYW5kIGluc3RhbGwgdGhlIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGFwcHJvcHJpYXRlIHBsdWdpbiBmb3IgeW91ciB1c2UgY2FzZS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCFhbHJlYWR5SGF2ZVBsdWdpbldpdGhJbnRlcm5hbElkKCdDYWNoZUNvbnRyb2wnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgQXBvbGxvU2VydmVyUGx1Z2luQ2FjaGVDb250cm9sIH0gPSBhd2FpdCBpbXBvcnQoJy4vcGx1Z2luL2NhY2hlQ29udHJvbC9pbmRleC5qcycpO1xuICAgICAgICAgICAgICAgIHBsdWdpbnMucHVzaChBcG9sbG9TZXJ2ZXJQbHVnaW5DYWNoZUNvbnRyb2woKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYWxyZWFkeUhhdmVQbHVnaW4gPSBhbHJlYWR5SGF2ZVBsdWdpbldpdGhJbnRlcm5hbElkKCdVc2FnZVJlcG9ydGluZycpO1xuICAgICAgICAgICAgaWYgKCFhbHJlYWR5SGF2ZVBsdWdpbiAmJiBhcG9sbG9Db25maWcua2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGFwb2xsb0NvbmZpZy5ncmFwaFJlZikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IEFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nIH0gPSBhd2FpdCBpbXBvcnQoJy4vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2luZGV4LmpzJyk7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbnMudW5zaGlmdChBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBfX29ubHlJZlNjaGVtYUlzTm90U3ViZ3JhcGg6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ1lvdSBoYXZlIHNwZWNpZmllZCBhbiBBcG9sbG8ga2V5IGJ1dCBoYXZlIG5vdCBzcGVjaWZpZWQgYSBncmFwaCByZWY7IHVzYWdlICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlcG9ydGluZyBpcyBkaXNhYmxlZC4gVG8gZW5hYmxlIHVzYWdlIHJlcG9ydGluZywgc2V0IHRoZSBgQVBPTExPX0dSQVBIX1JFRmAgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnZW52aXJvbm1lbnQgdmFyaWFibGUgdG8gYHlvdXItZ3JhcGgtaWRAeW91ci1ncmFwaC12YXJpYW50YC4gVG8gZGlzYWJsZSB0aGlzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmcsIGluc3RhbGwgYEFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nRGlzYWJsZWRgLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBhbHJlYWR5SGF2ZVBsdWdpbiA9IGFscmVhZHlIYXZlUGx1Z2luV2l0aEludGVybmFsSWQoJ1NjaGVtYVJlcG9ydGluZycpO1xuICAgICAgICAgICAgY29uc3QgZW5hYmxlZFZpYUVudlZhciA9IHByb2Nlc3MuZW52LkFQT0xMT19TQ0hFTUFfUkVQT1JUSU5HID09PSAndHJ1ZSc7XG4gICAgICAgICAgICBpZiAoIWFscmVhZHlIYXZlUGx1Z2luICYmIGVuYWJsZWRWaWFFbnZWYXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBvbGxvQ29uZmlnLmtleSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IEFwb2xsb1NlcnZlclBsdWdpblNjaGVtYVJlcG9ydGluZyB9ID0gYXdhaXQgaW1wb3J0KCcuL3BsdWdpbi9zY2hlbWFSZXBvcnRpbmcvaW5kZXguanMnKTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2lucy5wdXNoKEFwb2xsb1NlcnZlclBsdWdpblNjaGVtYVJlcG9ydGluZygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSd2ZSBlbmFibGVkIHNjaGVtYSByZXBvcnRpbmcgYnkgc2V0dGluZyB0aGUgQVBPTExPX1NDSEVNQV9SRVBPUlRJTkcgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2Vudmlyb25tZW50IHZhcmlhYmxlIHRvIHRydWUsIGJ1dCB5b3UgYWxzbyBuZWVkIHRvIHByb3ZpZGUgeW91ciAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdBcG9sbG8gQVBJIGtleSwgdmlhIHRoZSBBUE9MTE9fS0VZIGVudmlyb25tZW50ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhcmlhYmxlIG9yIHZpYSBgbmV3IEFwb2xsb1NlcnZlcih7YXBvbGxvOiB7a2V5fSknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYWxyZWFkeUhhdmVQbHVnaW4gPSBhbHJlYWR5SGF2ZVBsdWdpbldpdGhJbnRlcm5hbElkKCdJbmxpbmVUcmFjZScpO1xuICAgICAgICAgICAgaWYgKCFhbHJlYWR5SGF2ZVBsdWdpbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgQXBvbGxvU2VydmVyUGx1Z2luSW5saW5lVHJhY2UgfSA9IGF3YWl0IGltcG9ydCgnLi9wbHVnaW4vaW5saW5lVHJhY2UvaW5kZXguanMnKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5zLnB1c2goQXBvbGxvU2VydmVyUGx1Z2luSW5saW5lVHJhY2UoeyBfX29ubHlJZlNjaGVtYUlzU3ViZ3JhcGg6IHRydWUgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFscmVhZHlIYXZlUGx1Z2luID0gYWxyZWFkeUhhdmVQbHVnaW5XaXRoSW50ZXJuYWxJZCgnTGFuZGluZ1BhZ2VEaXNhYmxlZCcpO1xuICAgICAgICBpZiAoIWFscmVhZHlIYXZlUGx1Z2luKSB7XG4gICAgICAgICAgICBjb25zdCB7IEFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlTG9jYWxEZWZhdWx0LCBBcG9sbG9TZXJ2ZXJQbHVnaW5MYW5kaW5nUGFnZVByb2R1Y3Rpb25EZWZhdWx0LCB9ID0gYXdhaXQgaW1wb3J0KCcuL3BsdWdpbi9sYW5kaW5nUGFnZS9kZWZhdWx0L2luZGV4LmpzJyk7XG4gICAgICAgICAgICBjb25zdCBwbHVnaW4gPSBpc0RldlxuICAgICAgICAgICAgICAgID8gQXBvbGxvU2VydmVyUGx1Z2luTGFuZGluZ1BhZ2VMb2NhbERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIDogQXBvbGxvU2VydmVyUGx1Z2luTGFuZGluZ1BhZ2VQcm9kdWN0aW9uRGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKCFpc0ltcGxpY2l0bHlJbnN0YWxsYWJsZVBsdWdpbihwbHVnaW4pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2RlZmF1bHQgbGFuZGluZyBwYWdlIHBsdWdpbiBzaG91bGQgYmUgaW1wbGljaXRseSBpbnN0YWxsYWJsZT8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsdWdpbi5fX2ludGVybmFsX2luc3RhbGxlZF9pbXBsaWNpdGx5X18gPSB0cnVlO1xuICAgICAgICAgICAgcGx1Z2lucy5wdXNoKHBsdWdpbik7XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYWxyZWFkeUhhdmVQbHVnaW4gPSBhbHJlYWR5SGF2ZVBsdWdpbldpdGhJbnRlcm5hbElkKCdEaXNhYmxlU3VnZ2VzdGlvbnMnKTtcbiAgICAgICAgICAgIGlmIChoaWRlU2NoZW1hRGV0YWlsc0Zyb21DbGllbnRFcnJvcnMgJiYgIWFscmVhZHlIYXZlUGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBBcG9sbG9TZXJ2ZXJQbHVnaW5EaXNhYmxlU3VnZ2VzdGlvbnMgfSA9IGF3YWl0IGltcG9ydCgnLi9wbHVnaW4vZGlzYWJsZVN1Z2dlc3Rpb25zL2luZGV4LmpzJyk7XG4gICAgICAgICAgICAgICAgcGx1Z2lucy5wdXNoKEFwb2xsb1NlcnZlclBsdWdpbkRpc2FibGVTdWdnZXN0aW9ucygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRQbHVnaW4ocGx1Z2luKSB7XG4gICAgICAgIGlmICh0aGlzLmludGVybmFscy5zdGF0ZS5waGFzZSAhPT0gJ2luaXRpYWxpemVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgYWRkIHBsdWdpbnMgYWZ0ZXIgdGhlIHNlcnZlciBoYXMgc3RhcnRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmludGVybmFscy5wbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZUhUVFBHcmFwaFFMUmVxdWVzdCh7IGh0dHBHcmFwaFFMUmVxdWVzdCwgY29udGV4dCwgfSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHJ1bm5pbmdTZXJ2ZXJTdGF0ZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcnVubmluZ1NlcnZlclN0YXRlID0gYXdhaXQgdGhpcy5fZW5zdXJlU3RhcnRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXJyb3JSZXNwb25zZShlcnJvciwgaHR0cEdyYXBoUUxSZXF1ZXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydW5uaW5nU2VydmVyU3RhdGUubGFuZGluZ1BhZ2UgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnByZWZlcnNIVE1MKGh0dHBHcmFwaFFMUmVxdWVzdCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVuZGVyZWRIdG1sO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcnVubmluZ1NlcnZlclN0YXRlLmxhbmRpbmdQYWdlLmh0bWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkSHRtbCA9IHJ1bm5pbmdTZXJ2ZXJTdGF0ZS5sYW5kaW5nUGFnZS5odG1sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkSHRtbCA9IGF3YWl0IHJ1bm5pbmdTZXJ2ZXJTdGF0ZS5sYW5kaW5nUGFnZS5odG1sKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKG1heWJlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZW5zdXJlRXJyb3IobWF5YmVFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgTGFuZGluZyBwYWdlIFxcYGh0bWxcXGAgZnVuY3Rpb24gdGhyZXc6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5lcnJvclJlc3BvbnNlKGVycm9yLCBodHRwR3JhcGhRTFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJNYXAoW1snY29udGVudC10eXBlJywgJ3RleHQvaHRtbCddXSksXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdjb21wbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc6IHJlbmRlcmVkSHRtbCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxzLmNzcmZQcmV2ZW50aW9uUmVxdWVzdEhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50Q3NyZihodHRwR3JhcGhRTFJlcXVlc3QuaGVhZGVycywgdGhpcy5pbnRlcm5hbHMuY3NyZlByZXZlbnRpb25SZXF1ZXN0SGVhZGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY29udGV4dFZhbHVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb250ZXh0VmFsdWUgPSBhd2FpdCBjb250ZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAobWF5YmVFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZW5zdXJlRXJyb3IobWF5YmVFcnJvcik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5pbnRlcm5hbHMucGx1Z2lucy5tYXAoYXN5bmMgKHBsdWdpbikgPT4gcGx1Z2luLmNvbnRleHRDcmVhdGlvbkRpZEZhaWw/Lih7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKHBsdWdpbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBjb250ZXh0Q3JlYXRpb25EaWRGYWlsIGhvb2sgdGhyZXc6ICR7cGx1Z2luRXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmVycm9yUmVzcG9uc2UoZW5zdXJlR3JhcGhRTEVycm9yKGVycm9yLCAnQ29udGV4dCBjcmVhdGlvbiBmYWlsZWQ6ICcpLCBodHRwR3JhcGhRTFJlcXVlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJ1blBvdGVudGlhbGx5QmF0Y2hlZEh0dHBRdWVyeSh0aGlzLCBodHRwR3JhcGhRTFJlcXVlc3QsIGNvbnRleHRWYWx1ZSwgcnVubmluZ1NlcnZlclN0YXRlLnNjaGVtYU1hbmFnZXIuZ2V0U2NoZW1hRGVyaXZlZERhdGEoKSwgdGhpcy5pbnRlcm5hbHMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChtYXliZUVycm9yXykge1xuICAgICAgICAgICAgY29uc3QgbWF5YmVFcnJvciA9IG1heWJlRXJyb3JfO1xuICAgICAgICAgICAgaWYgKG1heWJlRXJyb3IgaW5zdGFuY2VvZiBHcmFwaFFMRXJyb3IgJiZcbiAgICAgICAgICAgICAgICBtYXliZUVycm9yLmV4dGVuc2lvbnMuY29kZSA9PT0gQXBvbGxvU2VydmVyRXJyb3JDb2RlLkJBRF9SRVFVRVNUKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5pbnRlcm5hbHMucGx1Z2lucy5tYXAoYXN5bmMgKHBsdWdpbikgPT4gcGx1Z2luLmludmFsaWRSZXF1ZXN0V2FzUmVjZWl2ZWQ/Lih7IGVycm9yOiBtYXliZUVycm9yIH0pKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChwbHVnaW5FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgaW52YWxpZFJlcXVlc3RXYXNSZWNlaXZlZCBob29rIHRocmV3OiAke3BsdWdpbkVycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmVycm9yUmVzcG9uc2UobWF5YmVFcnJvciwgaHR0cEdyYXBoUUxSZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBlcnJvclJlc3BvbnNlKGVycm9yLCByZXF1ZXN0SGVhZCkge1xuICAgICAgICBjb25zdCB7IGZvcm1hdHRlZEVycm9ycywgaHR0cEZyb21FcnJvcnMgfSA9IG5vcm1hbGl6ZUFuZEZvcm1hdEVycm9ycyhbZXJyb3JdLCB7XG4gICAgICAgICAgICBpbmNsdWRlU3RhY2t0cmFjZUluRXJyb3JSZXNwb25zZXM6IHRoaXMuaW50ZXJuYWxzLmluY2x1ZGVTdGFja3RyYWNlSW5FcnJvclJlc3BvbnNlcyxcbiAgICAgICAgICAgIGZvcm1hdEVycm9yOiB0aGlzLmludGVybmFscy5mb3JtYXRFcnJvcixcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IGh0dHBGcm9tRXJyb3JzLnN0YXR1cyA/PyA1MDAsXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVyTWFwKFtcbiAgICAgICAgICAgICAgICAuLi5odHRwRnJvbUVycm9ycy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZScsXG4gICAgICAgICAgICAgICAgICAgIGNob29zZUNvbnRlbnRUeXBlRm9yU2luZ2xlUmVzdWx0UmVzcG9uc2UocmVxdWVzdEhlYWQpID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBNRURJQV9UWVBFUy5BUFBMSUNBVElPTl9KU09OLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBraW5kOiAnY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHN0cmluZzogYXdhaXQgdGhpcy5pbnRlcm5hbHMuc3RyaW5naWZ5UmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzOiBmb3JtYXR0ZWRFcnJvcnMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcmVmZXJzSFRNTChyZXF1ZXN0KSB7XG4gICAgICAgIGNvbnN0IGFjY2VwdEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2FjY2VwdCcpO1xuICAgICAgICByZXR1cm4gKHJlcXVlc3QubWV0aG9kID09PSAnR0VUJyAmJlxuICAgICAgICAgICAgISFhY2NlcHRIZWFkZXIgJiZcbiAgICAgICAgICAgIG5ldyBOZWdvdGlhdG9yKHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IGFjY2VwdDogYWNjZXB0SGVhZGVyIH0sXG4gICAgICAgICAgICB9KS5tZWRpYVR5cGUoW1xuICAgICAgICAgICAgICAgIE1FRElBX1RZUEVTLkFQUExJQ0FUSU9OX0pTT04sXG4gICAgICAgICAgICAgICAgTUVESUFfVFlQRVMuQVBQTElDQVRJT05fR1JBUEhRTF9SRVNQT05TRV9KU09OLFxuICAgICAgICAgICAgICAgIE1FRElBX1RZUEVTLk1VTFRJUEFSVF9NSVhFRF9FWFBFUklNRU5UQUwsXG4gICAgICAgICAgICAgICAgTUVESUFfVFlQRVMuTVVMVElQQVJUX01JWEVEX05PX0RFRkVSX1NQRUMsXG4gICAgICAgICAgICAgICAgTUVESUFfVFlQRVMuVEVYVF9IVE1MLFxuICAgICAgICAgICAgXSkgPT09IE1FRElBX1RZUEVTLlRFWFRfSFRNTCk7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGVPcGVyYXRpb24ocmVxdWVzdCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLmludGVybmFscy5zdGF0ZS5waGFzZSA9PT0gJ2luaXRpYWxpemVkJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjaGVtYURlcml2ZWREYXRhID0gKGF3YWl0IHRoaXMuX2Vuc3VyZVN0YXJ0ZWQoKSkuc2NoZW1hTWFuYWdlci5nZXRTY2hlbWFEZXJpdmVkRGF0YSgpO1xuICAgICAgICBjb25zdCBncmFwaFFMUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICBxdWVyeTogcmVxdWVzdC5xdWVyeSAmJiB0eXBlb2YgcmVxdWVzdC5xdWVyeSAhPT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHByaW50KHJlcXVlc3QucXVlcnkpXG4gICAgICAgICAgICAgICAgOiByZXF1ZXN0LnF1ZXJ5LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludGVybmFsRXhlY3V0ZU9wZXJhdGlvbih7XG4gICAgICAgICAgICBzZXJ2ZXI6IHRoaXMsXG4gICAgICAgICAgICBncmFwaFFMUmVxdWVzdCxcbiAgICAgICAgICAgIGludGVybmFsczogdGhpcy5pbnRlcm5hbHMsXG4gICAgICAgICAgICBzY2hlbWFEZXJpdmVkRGF0YSxcbiAgICAgICAgICAgIHNoYXJlZFJlc3BvbnNlSFRUUEdyYXBoUUxIZWFkOiBudWxsLFxuICAgICAgICB9LCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnRlcm5hbEV4ZWN1dGVPcGVyYXRpb24oeyBzZXJ2ZXIsIGdyYXBoUUxSZXF1ZXN0LCBpbnRlcm5hbHMsIHNjaGVtYURlcml2ZWREYXRhLCBzaGFyZWRSZXNwb25zZUhUVFBHcmFwaFFMSGVhZCwgfSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJlcXVlc3RDb250ZXh0ID0ge1xuICAgICAgICBsb2dnZXI6IHNlcnZlci5sb2dnZXIsXG4gICAgICAgIGNhY2hlOiBzZXJ2ZXIuY2FjaGUsXG4gICAgICAgIHNjaGVtYTogc2NoZW1hRGVyaXZlZERhdGEuc2NoZW1hLFxuICAgICAgICByZXF1ZXN0OiBncmFwaFFMUmVxdWVzdCxcbiAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgIGh0dHA6IHNoYXJlZFJlc3BvbnNlSFRUUEdyYXBoUUxIZWFkID8/IG5ld0hUVFBHcmFwaFFMSGVhZCgpLFxuICAgICAgICB9LFxuICAgICAgICBjb250ZXh0VmFsdWU6IGNsb25lT2JqZWN0KG9wdGlvbnM/LmNvbnRleHRWYWx1ZSA/PyB7fSksXG4gICAgICAgIG1ldHJpY3M6IHt9LFxuICAgICAgICBvdmVyYWxsQ2FjaGVQb2xpY3k6IG5ld0NhY2hlUG9saWN5KCksXG4gICAgICAgIHJlcXVlc3RJc0JhdGNoZWQ6IHNoYXJlZFJlc3BvbnNlSFRUUEdyYXBoUUxIZWFkICE9PSBudWxsLFxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHByb2Nlc3NHcmFwaFFMUmVxdWVzdChzY2hlbWFEZXJpdmVkRGF0YSwgc2VydmVyLCBpbnRlcm5hbHMsIHJlcXVlc3RDb250ZXh0KTtcbiAgICB9XG4gICAgY2F0Y2ggKG1heWJlRXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBlbnN1cmVFcnJvcihtYXliZUVycm9yKTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaW50ZXJuYWxzLnBsdWdpbnMubWFwKGFzeW5jIChwbHVnaW4pID0+IHBsdWdpbi51bmV4cGVjdGVkRXJyb3JQcm9jZXNzaW5nUmVxdWVzdD8uKHtcbiAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgIH0pKSk7XG4gICAgICAgIHNlcnZlci5sb2dnZXIuZXJyb3IoYFVuZXhwZWN0ZWQgZXJyb3IgcHJvY2Vzc2luZyByZXF1ZXN0OiAke2Vycm9yfWApO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIHNlcnZlciBlcnJvcicpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0ltcGxpY2l0bHlJbnN0YWxsYWJsZVBsdWdpbihwKSB7XG4gICAgcmV0dXJuICdfX2ludGVybmFsX2luc3RhbGxlZF9pbXBsaWNpdGx5X18nIGluIHA7XG59XG5leHBvcnQgY29uc3QgTUVESUFfVFlQRVMgPSB7XG4gICAgQVBQTElDQVRJT05fSlNPTjogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgIEFQUExJQ0FUSU9OX0pTT05fR1JBUEhRTF9DQUxMQkFDSzogJ2FwcGxpY2F0aW9uL2pzb247IGNhbGxiYWNrU3BlYz0xLjA7IGNoYXJzZXQ9dXRmLTgnLFxuICAgIEFQUExJQ0FUSU9OX0dSQVBIUUxfUkVTUE9OU0VfSlNPTjogJ2FwcGxpY2F0aW9uL2dyYXBocWwtcmVzcG9uc2UranNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgTVVMVElQQVJUX01JWEVEX05PX0RFRkVSX1NQRUM6ICdtdWx0aXBhcnQvbWl4ZWQnLFxuICAgIE1VTFRJUEFSVF9NSVhFRF9FWFBFUklNRU5UQUw6ICdtdWx0aXBhcnQvbWl4ZWQ7IGRlZmVyU3BlYz0yMDIyMDgyNCcsXG4gICAgVEVYVF9IVE1MOiAndGV4dC9odG1sJyxcbn07XG5leHBvcnQgZnVuY3Rpb24gY2hvb3NlQ29udGVudFR5cGVGb3JTaW5nbGVSZXN1bHRSZXNwb25zZShoZWFkKSB7XG4gICAgY29uc3QgYWNjZXB0SGVhZGVyID0gaGVhZC5oZWFkZXJzLmdldCgnYWNjZXB0Jyk7XG4gICAgaWYgKCFhY2NlcHRIZWFkZXIpIHtcbiAgICAgICAgcmV0dXJuIE1FRElBX1RZUEVTLkFQUExJQ0FUSU9OX0pTT047XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBwcmVmZXJyZWQgPSBuZXcgTmVnb3RpYXRvcih7XG4gICAgICAgICAgICBoZWFkZXJzOiB7IGFjY2VwdDogaGVhZC5oZWFkZXJzLmdldCgnYWNjZXB0JykgfSxcbiAgICAgICAgfSkubWVkaWFUeXBlKFtcbiAgICAgICAgICAgIE1FRElBX1RZUEVTLkFQUExJQ0FUSU9OX0pTT04sXG4gICAgICAgICAgICBNRURJQV9UWVBFUy5BUFBMSUNBVElPTl9HUkFQSFFMX1JFU1BPTlNFX0pTT04sXG4gICAgICAgICAgICBNRURJQV9UWVBFUy5BUFBMSUNBVElPTl9KU09OX0dSQVBIUUxfQ0FMTEJBQ0ssXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAocHJlZmVycmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJlZmVycmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjbG9uZU9iamVjdChvYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpKSwgb2JqZWN0KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFwb2xsb1NlcnZlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/ApolloServer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/cachePolicy.js":
/*!*************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/cachePolicy.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   newCachePolicy: () => (/* binding */ newCachePolicy)\n/* harmony export */ });\nfunction newCachePolicy() {\n    return {\n        maxAge: undefined,\n        scope: undefined,\n        restrict(hint) {\n            if (hint.maxAge !== undefined &&\n                (this.maxAge === undefined || hint.maxAge < this.maxAge)) {\n                this.maxAge = hint.maxAge;\n            }\n            if (hint.scope !== undefined && this.scope !== 'PRIVATE') {\n                this.scope = hint.scope;\n            }\n        },\n        replace(hint) {\n            if (hint.maxAge !== undefined) {\n                this.maxAge = hint.maxAge;\n            }\n            if (hint.scope !== undefined) {\n                this.scope = hint.scope;\n            }\n        },\n        policyIfCacheable() {\n            if (this.maxAge === undefined || this.maxAge === 0) {\n                return null;\n            }\n            return { maxAge: this.maxAge, scope: this.scope ?? 'PUBLIC' };\n        },\n    };\n}\n//# sourceMappingURL=cachePolicy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vY2FjaGVQb2xpY3kuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9jYWNoZVBvbGljeS5qcz9hZWIzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBuZXdDYWNoZVBvbGljeSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBtYXhBZ2U6IHVuZGVmaW5lZCxcbiAgICAgICAgc2NvcGU6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVzdHJpY3QoaGludCkge1xuICAgICAgICAgICAgaWYgKGhpbnQubWF4QWdlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAodGhpcy5tYXhBZ2UgPT09IHVuZGVmaW5lZCB8fCBoaW50Lm1heEFnZSA8IHRoaXMubWF4QWdlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4QWdlID0gaGludC5tYXhBZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGludC5zY29wZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc2NvcGUgIT09ICdQUklWQVRFJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NvcGUgPSBoaW50LnNjb3BlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXBsYWNlKGhpbnQpIHtcbiAgICAgICAgICAgIGlmIChoaW50Lm1heEFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhBZ2UgPSBoaW50Lm1heEFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoaW50LnNjb3BlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3BlID0gaGludC5zY29wZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcG9saWN5SWZDYWNoZWFibGUoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXhBZ2UgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm1heEFnZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgbWF4QWdlOiB0aGlzLm1heEFnZSwgc2NvcGU6IHRoaXMuc2NvcGUgPz8gJ1BVQkxJQycgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGVQb2xpY3kuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/cachePolicy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/determineApolloConfig.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/determineApolloConfig.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   determineApolloConfig: () => (/* binding */ determineApolloConfig)\n/* harmony export */ });\n/* harmony import */ var _apollo_utils_createhash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/utils.createhash */ \"(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\");\n\nfunction determineApolloConfig(input, logger) {\n    const apolloConfig = {};\n    const { APOLLO_KEY, APOLLO_GRAPH_REF, APOLLO_GRAPH_ID, APOLLO_GRAPH_VARIANT, } = process.env;\n    if (input?.key) {\n        apolloConfig.key = input.key.trim();\n    }\n    else if (APOLLO_KEY) {\n        apolloConfig.key = APOLLO_KEY.trim();\n    }\n    if ((input?.key ?? APOLLO_KEY) !== apolloConfig.key) {\n        logger.warn('The provided API key has unexpected leading or trailing whitespace. ' +\n            'Apollo Server will trim the key value before use.');\n    }\n    if (apolloConfig.key) {\n        assertValidHeaderValue(apolloConfig.key);\n    }\n    if (apolloConfig.key) {\n        apolloConfig.keyHash = (0,_apollo_utils_createhash__WEBPACK_IMPORTED_MODULE_0__.createHash)('sha512')\n            .update(apolloConfig.key)\n            .digest('hex');\n    }\n    if (input?.graphRef) {\n        apolloConfig.graphRef = input.graphRef;\n    }\n    else if (APOLLO_GRAPH_REF) {\n        apolloConfig.graphRef = APOLLO_GRAPH_REF;\n    }\n    const graphId = input?.graphId ?? APOLLO_GRAPH_ID;\n    const graphVariant = input?.graphVariant ?? APOLLO_GRAPH_VARIANT;\n    if (apolloConfig.graphRef) {\n        if (graphId) {\n            throw new Error('Cannot specify both graph ref and graph ID. Please use ' +\n                '`apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph ID.');\n        }\n        if (graphVariant) {\n            throw new Error('Cannot specify both graph ref and graph variant. Please use ' +\n                '`apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph variant.');\n        }\n    }\n    else if (graphId) {\n        apolloConfig.graphRef = graphVariant\n            ? `${graphId}@${graphVariant}`\n            : graphId;\n    }\n    return apolloConfig;\n}\nfunction assertValidHeaderValue(value) {\n    const invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/g;\n    if (invalidHeaderCharRegex.test(value)) {\n        const invalidChars = value.match(invalidHeaderCharRegex);\n        throw new Error(`The API key provided to Apollo Server contains characters which are invalid as HTTP header values. The following characters found in the key are invalid: ${invalidChars.join(', ')}. Valid header values may only contain ASCII visible characters. If you think there is an issue with your key, please contact Apollo support.`);\n    }\n}\n//# sourceMappingURL=determineApolloConfig.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vZGV0ZXJtaW5lQXBvbGxvQ29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXNEO0FBQy9DO0FBQ1A7QUFDQSxZQUFZLHVFQUF1RTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9FQUFVO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUSxHQUFHLGFBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFMQUFxTCx3QkFBd0I7QUFDN007QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9kZXRlcm1pbmVBcG9sbG9Db25maWcuanM/Y2Y0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSAnQGFwb2xsby91dGlscy5jcmVhdGVoYXNoJztcbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmVBcG9sbG9Db25maWcoaW5wdXQsIGxvZ2dlcikge1xuICAgIGNvbnN0IGFwb2xsb0NvbmZpZyA9IHt9O1xuICAgIGNvbnN0IHsgQVBPTExPX0tFWSwgQVBPTExPX0dSQVBIX1JFRiwgQVBPTExPX0dSQVBIX0lELCBBUE9MTE9fR1JBUEhfVkFSSUFOVCwgfSA9IHByb2Nlc3MuZW52O1xuICAgIGlmIChpbnB1dD8ua2V5KSB7XG4gICAgICAgIGFwb2xsb0NvbmZpZy5rZXkgPSBpbnB1dC5rZXkudHJpbSgpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBUE9MTE9fS0VZKSB7XG4gICAgICAgIGFwb2xsb0NvbmZpZy5rZXkgPSBBUE9MTE9fS0VZLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKChpbnB1dD8ua2V5ID8/IEFQT0xMT19LRVkpICE9PSBhcG9sbG9Db25maWcua2V5KSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdUaGUgcHJvdmlkZWQgQVBJIGtleSBoYXMgdW5leHBlY3RlZCBsZWFkaW5nIG9yIHRyYWlsaW5nIHdoaXRlc3BhY2UuICcgK1xuICAgICAgICAgICAgJ0Fwb2xsbyBTZXJ2ZXIgd2lsbCB0cmltIHRoZSBrZXkgdmFsdWUgYmVmb3JlIHVzZS4nKTtcbiAgICB9XG4gICAgaWYgKGFwb2xsb0NvbmZpZy5rZXkpIHtcbiAgICAgICAgYXNzZXJ0VmFsaWRIZWFkZXJWYWx1ZShhcG9sbG9Db25maWcua2V5KTtcbiAgICB9XG4gICAgaWYgKGFwb2xsb0NvbmZpZy5rZXkpIHtcbiAgICAgICAgYXBvbGxvQ29uZmlnLmtleUhhc2ggPSBjcmVhdGVIYXNoKCdzaGE1MTInKVxuICAgICAgICAgICAgLnVwZGF0ZShhcG9sbG9Db25maWcua2V5KVxuICAgICAgICAgICAgLmRpZ2VzdCgnaGV4Jyk7XG4gICAgfVxuICAgIGlmIChpbnB1dD8uZ3JhcGhSZWYpIHtcbiAgICAgICAgYXBvbGxvQ29uZmlnLmdyYXBoUmVmID0gaW5wdXQuZ3JhcGhSZWY7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFQT0xMT19HUkFQSF9SRUYpIHtcbiAgICAgICAgYXBvbGxvQ29uZmlnLmdyYXBoUmVmID0gQVBPTExPX0dSQVBIX1JFRjtcbiAgICB9XG4gICAgY29uc3QgZ3JhcGhJZCA9IGlucHV0Py5ncmFwaElkID8/IEFQT0xMT19HUkFQSF9JRDtcbiAgICBjb25zdCBncmFwaFZhcmlhbnQgPSBpbnB1dD8uZ3JhcGhWYXJpYW50ID8/IEFQT0xMT19HUkFQSF9WQVJJQU5UO1xuICAgIGlmIChhcG9sbG9Db25maWcuZ3JhcGhSZWYpIHtcbiAgICAgICAgaWYgKGdyYXBoSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNwZWNpZnkgYm90aCBncmFwaCByZWYgYW5kIGdyYXBoIElELiBQbGVhc2UgdXNlICcgK1xuICAgICAgICAgICAgICAgICdgYXBvbGxvLmdyYXBoUmVmYCBvciBgQVBPTExPX0dSQVBIX1JFRmAgd2l0aG91dCBhbHNvIHNldHRpbmcgdGhlIGdyYXBoIElELicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmFwaFZhcmlhbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNwZWNpZnkgYm90aCBncmFwaCByZWYgYW5kIGdyYXBoIHZhcmlhbnQuIFBsZWFzZSB1c2UgJyArXG4gICAgICAgICAgICAgICAgJ2BhcG9sbG8uZ3JhcGhSZWZgIG9yIGBBUE9MTE9fR1JBUEhfUkVGYCB3aXRob3V0IGFsc28gc2V0dGluZyB0aGUgZ3JhcGggdmFyaWFudC4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChncmFwaElkKSB7XG4gICAgICAgIGFwb2xsb0NvbmZpZy5ncmFwaFJlZiA9IGdyYXBoVmFyaWFudFxuICAgICAgICAgICAgPyBgJHtncmFwaElkfUAke2dyYXBoVmFyaWFudH1gXG4gICAgICAgICAgICA6IGdyYXBoSWQ7XG4gICAgfVxuICAgIHJldHVybiBhcG9sbG9Db25maWc7XG59XG5mdW5jdGlvbiBhc3NlcnRWYWxpZEhlYWRlclZhbHVlKHZhbHVlKSB7XG4gICAgY29uc3QgaW52YWxpZEhlYWRlckNoYXJSZWdleCA9IC9bXlxcdFxceDIwLVxceDdlXFx4ODAtXFx4ZmZdL2c7XG4gICAgaWYgKGludmFsaWRIZWFkZXJDaGFyUmVnZXgudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgaW52YWxpZENoYXJzID0gdmFsdWUubWF0Y2goaW52YWxpZEhlYWRlckNoYXJSZWdleCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEFQSSBrZXkgcHJvdmlkZWQgdG8gQXBvbGxvIFNlcnZlciBjb250YWlucyBjaGFyYWN0ZXJzIHdoaWNoIGFyZSBpbnZhbGlkIGFzIEhUVFAgaGVhZGVyIHZhbHVlcy4gVGhlIGZvbGxvd2luZyBjaGFyYWN0ZXJzIGZvdW5kIGluIHRoZSBrZXkgYXJlIGludmFsaWQ6ICR7aW52YWxpZENoYXJzLmpvaW4oJywgJyl9LiBWYWxpZCBoZWFkZXIgdmFsdWVzIG1heSBvbmx5IGNvbnRhaW4gQVNDSUkgdmlzaWJsZSBjaGFyYWN0ZXJzLiBJZiB5b3UgdGhpbmsgdGhlcmUgaXMgYW4gaXNzdWUgd2l0aCB5b3VyIGtleSwgcGxlYXNlIGNvbnRhY3QgQXBvbGxvIHN1cHBvcnQuYCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGV0ZXJtaW5lQXBvbGxvQ29uZmlnLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/determineApolloConfig.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/errorNormalize.js":
/*!****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/errorNormalize.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureError: () => (/* binding */ ensureError),\n/* harmony export */   ensureGraphQLError: () => (/* binding */ ensureGraphQLError),\n/* harmony export */   normalizeAndFormatErrors: () => (/* binding */ normalizeAndFormatErrors)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/error/GraphQLError.mjs\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/errors/index.js\");\n/* harmony import */ var _runHttpQuery_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/runHttpQuery.js\");\n/* harmony import */ var _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js\");\n\n\n\n\nfunction normalizeAndFormatErrors(errors, options = {}) {\n    const formatError = options.formatError ?? ((error) => error);\n    const httpFromErrors = (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_1__.newHTTPGraphQLHead)();\n    return {\n        httpFromErrors,\n        formattedErrors: errors.map((error) => {\n            try {\n                return formatError(enrichError(error), error);\n            }\n            catch (formattingError) {\n                if (options.includeStacktraceInErrorResponses) {\n                    return enrichError(formattingError);\n                }\n                else {\n                    return {\n                        message: 'Internal server error',\n                        extensions: { code: _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.INTERNAL_SERVER_ERROR },\n                    };\n                }\n            }\n        }),\n    };\n    function enrichError(maybeError) {\n        const graphqlError = ensureGraphQLError(maybeError);\n        const extensions = {\n            ...graphqlError.extensions,\n            code: graphqlError.extensions.code ??\n                _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.INTERNAL_SERVER_ERROR,\n        };\n        if (isPartialHTTPGraphQLHead(extensions.http)) {\n            (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_1__.mergeHTTPGraphQLHead)(httpFromErrors, {\n                headers: new _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_2__.HeaderMap(),\n                ...extensions.http,\n            });\n            delete extensions.http;\n        }\n        if (options.includeStacktraceInErrorResponses) {\n            extensions.stacktrace = graphqlError.stack?.split('\\n');\n        }\n        return { ...graphqlError.toJSON(), extensions };\n    }\n}\nfunction ensureError(maybeError) {\n    return maybeError instanceof Error\n        ? maybeError\n        : new graphql__WEBPACK_IMPORTED_MODULE_3__.GraphQLError('Unexpected error value: ' + String(maybeError));\n}\nfunction ensureGraphQLError(maybeError, messagePrefixIfNotGraphQLError = '') {\n    const error = ensureError(maybeError);\n    return error instanceof graphql__WEBPACK_IMPORTED_MODULE_3__.GraphQLError\n        ? error\n        : new graphql__WEBPACK_IMPORTED_MODULE_3__.GraphQLError(messagePrefixIfNotGraphQLError + error.message, {\n            originalError: error,\n        });\n}\nfunction isPartialHTTPGraphQLHead(x) {\n    return (!!x &&\n        typeof x === 'object' &&\n        (!('status' in x) || typeof x.status === 'number') &&\n        (!('headers' in x) || x.headers instanceof Map));\n}\n//# sourceMappingURL=errorNormalize.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vZXJyb3JOb3JtYWxpemUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3QztBQUNrQjtBQUNtQjtBQUM1QjtBQUMxQyxzREFBc0Q7QUFDN0Q7QUFDQSwyQkFBMkIsb0VBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLE1BQU0sbUVBQXFCLHdCQUF3QjtBQUN6RjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFxQjtBQUNyQztBQUNBO0FBQ0EsWUFBWSxzRUFBb0I7QUFDaEMsNkJBQTZCLDBEQUFTO0FBQ3RDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGNBQWMsaURBQVk7QUFDMUI7QUFDTztBQUNQO0FBQ0EsNEJBQTRCLGlEQUFZO0FBQ3hDO0FBQ0EsY0FBYyxpREFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9lcnJvck5vcm1hbGl6ZS5qcz8zMmFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdyYXBoUUxFcnJvciwgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IEFwb2xsb1NlcnZlckVycm9yQ29kZSB9IGZyb20gJy4vZXJyb3JzL2luZGV4LmpzJztcbmltcG9ydCB7IG1lcmdlSFRUUEdyYXBoUUxIZWFkLCBuZXdIVFRQR3JhcGhRTEhlYWQgfSBmcm9tICcuL3J1bkh0dHBRdWVyeS5qcyc7XG5pbXBvcnQgeyBIZWFkZXJNYXAgfSBmcm9tICcuL3V0aWxzL0hlYWRlck1hcC5qcyc7XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplQW5kRm9ybWF0RXJyb3JzKGVycm9ycywgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZm9ybWF0RXJyb3IgPSBvcHRpb25zLmZvcm1hdEVycm9yID8/ICgoZXJyb3IpID0+IGVycm9yKTtcbiAgICBjb25zdCBodHRwRnJvbUVycm9ycyA9IG5ld0hUVFBHcmFwaFFMSGVhZCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGh0dHBGcm9tRXJyb3JzLFxuICAgICAgICBmb3JtYXR0ZWRFcnJvcnM6IGVycm9ycy5tYXAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXRFcnJvcihlbnJpY2hFcnJvcihlcnJvciksIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChmb3JtYXR0aW5nRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbmNsdWRlU3RhY2t0cmFjZUluRXJyb3JSZXNwb25zZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVucmljaEVycm9yKGZvcm1hdHRpbmdFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7IGNvZGU6IEFwb2xsb1NlcnZlckVycm9yQ29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IgfSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgIH07XG4gICAgZnVuY3Rpb24gZW5yaWNoRXJyb3IobWF5YmVFcnJvcikge1xuICAgICAgICBjb25zdCBncmFwaHFsRXJyb3IgPSBlbnN1cmVHcmFwaFFMRXJyb3IobWF5YmVFcnJvcik7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSB7XG4gICAgICAgICAgICAuLi5ncmFwaHFsRXJyb3IuZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIGNvZGU6IGdyYXBocWxFcnJvci5leHRlbnNpb25zLmNvZGUgPz9cbiAgICAgICAgICAgICAgICBBcG9sbG9TZXJ2ZXJFcnJvckNvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoaXNQYXJ0aWFsSFRUUEdyYXBoUUxIZWFkKGV4dGVuc2lvbnMuaHR0cCkpIHtcbiAgICAgICAgICAgIG1lcmdlSFRUUEdyYXBoUUxIZWFkKGh0dHBGcm9tRXJyb3JzLCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlck1hcCgpLFxuICAgICAgICAgICAgICAgIC4uLmV4dGVuc2lvbnMuaHR0cCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIGV4dGVuc2lvbnMuaHR0cDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbmNsdWRlU3RhY2t0cmFjZUluRXJyb3JSZXNwb25zZXMpIHtcbiAgICAgICAgICAgIGV4dGVuc2lvbnMuc3RhY2t0cmFjZSA9IGdyYXBocWxFcnJvci5zdGFjaz8uc3BsaXQoJ1xcbicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IC4uLmdyYXBocWxFcnJvci50b0pTT04oKSwgZXh0ZW5zaW9ucyB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVFcnJvcihtYXliZUVycm9yKSB7XG4gICAgcmV0dXJuIG1heWJlRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICA/IG1heWJlRXJyb3JcbiAgICAgICAgOiBuZXcgR3JhcGhRTEVycm9yKCdVbmV4cGVjdGVkIGVycm9yIHZhbHVlOiAnICsgU3RyaW5nKG1heWJlRXJyb3IpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVHcmFwaFFMRXJyb3IobWF5YmVFcnJvciwgbWVzc2FnZVByZWZpeElmTm90R3JhcGhRTEVycm9yID0gJycpIHtcbiAgICBjb25zdCBlcnJvciA9IGVuc3VyZUVycm9yKG1heWJlRXJyb3IpO1xuICAgIHJldHVybiBlcnJvciBpbnN0YW5jZW9mIEdyYXBoUUxFcnJvclxuICAgICAgICA/IGVycm9yXG4gICAgICAgIDogbmV3IEdyYXBoUUxFcnJvcihtZXNzYWdlUHJlZml4SWZOb3RHcmFwaFFMRXJyb3IgKyBlcnJvci5tZXNzYWdlLCB7XG4gICAgICAgICAgICBvcmlnaW5hbEVycm9yOiBlcnJvcixcbiAgICAgICAgfSk7XG59XG5mdW5jdGlvbiBpc1BhcnRpYWxIVFRQR3JhcGhRTEhlYWQoeCkge1xuICAgIHJldHVybiAoISF4ICYmXG4gICAgICAgIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAoISgnc3RhdHVzJyBpbiB4KSB8fCB0eXBlb2YgeC5zdGF0dXMgPT09ICdudW1iZXInKSAmJlxuICAgICAgICAoISgnaGVhZGVycycgaW4geCkgfHwgeC5oZWFkZXJzIGluc3RhbmNlb2YgTWFwKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvck5vcm1hbGl6ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/errorNormalize.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/errors/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/errors/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServerErrorCode: () => (/* binding */ ApolloServerErrorCode),\n/* harmony export */   ApolloServerValidationErrorCode: () => (/* binding */ ApolloServerValidationErrorCode),\n/* harmony export */   unwrapResolverError: () => (/* binding */ unwrapResolverError)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/error/GraphQLError.mjs\");\n\nvar ApolloServerErrorCode;\n(function (ApolloServerErrorCode) {\n    ApolloServerErrorCode[\"INTERNAL_SERVER_ERROR\"] = \"INTERNAL_SERVER_ERROR\";\n    ApolloServerErrorCode[\"GRAPHQL_PARSE_FAILED\"] = \"GRAPHQL_PARSE_FAILED\";\n    ApolloServerErrorCode[\"GRAPHQL_VALIDATION_FAILED\"] = \"GRAPHQL_VALIDATION_FAILED\";\n    ApolloServerErrorCode[\"PERSISTED_QUERY_NOT_FOUND\"] = \"PERSISTED_QUERY_NOT_FOUND\";\n    ApolloServerErrorCode[\"PERSISTED_QUERY_NOT_SUPPORTED\"] = \"PERSISTED_QUERY_NOT_SUPPORTED\";\n    ApolloServerErrorCode[\"BAD_USER_INPUT\"] = \"BAD_USER_INPUT\";\n    ApolloServerErrorCode[\"OPERATION_RESOLUTION_FAILURE\"] = \"OPERATION_RESOLUTION_FAILURE\";\n    ApolloServerErrorCode[\"BAD_REQUEST\"] = \"BAD_REQUEST\";\n})(ApolloServerErrorCode || (ApolloServerErrorCode = {}));\nvar ApolloServerValidationErrorCode;\n(function (ApolloServerValidationErrorCode) {\n    ApolloServerValidationErrorCode[\"INTROSPECTION_DISABLED\"] = \"INTROSPECTION_DISABLED\";\n    ApolloServerValidationErrorCode[\"MAX_RECURSIVE_SELECTIONS_EXCEEDED\"] = \"MAX_RECURSIVE_SELECTIONS_EXCEEDED\";\n})(ApolloServerValidationErrorCode || (ApolloServerValidationErrorCode = {}));\nfunction unwrapResolverError(error) {\n    if (error instanceof graphql__WEBPACK_IMPORTED_MODULE_0__.GraphQLError && error.path && error.originalError) {\n        return error.originalError;\n    }\n    return error;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vZXJyb3JzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUM7QUFDaEM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNEQUFzRDtBQUNoRDtBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUMsMEVBQTBFO0FBQ3BFO0FBQ1AseUJBQXlCLGlEQUFZO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL2Vycm9ycy9pbmRleC5qcz81M2M1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdyYXBoUUxFcnJvciB9IGZyb20gJ2dyYXBocWwnO1xuZXhwb3J0IHZhciBBcG9sbG9TZXJ2ZXJFcnJvckNvZGU7XG4oZnVuY3Rpb24gKEFwb2xsb1NlcnZlckVycm9yQ29kZSkge1xuICAgIEFwb2xsb1NlcnZlckVycm9yQ29kZVtcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiXSA9IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCI7XG4gICAgQXBvbGxvU2VydmVyRXJyb3JDb2RlW1wiR1JBUEhRTF9QQVJTRV9GQUlMRURcIl0gPSBcIkdSQVBIUUxfUEFSU0VfRkFJTEVEXCI7XG4gICAgQXBvbGxvU2VydmVyRXJyb3JDb2RlW1wiR1JBUEhRTF9WQUxJREFUSU9OX0ZBSUxFRFwiXSA9IFwiR1JBUEhRTF9WQUxJREFUSU9OX0ZBSUxFRFwiO1xuICAgIEFwb2xsb1NlcnZlckVycm9yQ29kZVtcIlBFUlNJU1RFRF9RVUVSWV9OT1RfRk9VTkRcIl0gPSBcIlBFUlNJU1RFRF9RVUVSWV9OT1RfRk9VTkRcIjtcbiAgICBBcG9sbG9TZXJ2ZXJFcnJvckNvZGVbXCJQRVJTSVNURURfUVVFUllfTk9UX1NVUFBPUlRFRFwiXSA9IFwiUEVSU0lTVEVEX1FVRVJZX05PVF9TVVBQT1JURURcIjtcbiAgICBBcG9sbG9TZXJ2ZXJFcnJvckNvZGVbXCJCQURfVVNFUl9JTlBVVFwiXSA9IFwiQkFEX1VTRVJfSU5QVVRcIjtcbiAgICBBcG9sbG9TZXJ2ZXJFcnJvckNvZGVbXCJPUEVSQVRJT05fUkVTT0xVVElPTl9GQUlMVVJFXCJdID0gXCJPUEVSQVRJT05fUkVTT0xVVElPTl9GQUlMVVJFXCI7XG4gICAgQXBvbGxvU2VydmVyRXJyb3JDb2RlW1wiQkFEX1JFUVVFU1RcIl0gPSBcIkJBRF9SRVFVRVNUXCI7XG59KShBcG9sbG9TZXJ2ZXJFcnJvckNvZGUgfHwgKEFwb2xsb1NlcnZlckVycm9yQ29kZSA9IHt9KSk7XG5leHBvcnQgdmFyIEFwb2xsb1NlcnZlclZhbGlkYXRpb25FcnJvckNvZGU7XG4oZnVuY3Rpb24gKEFwb2xsb1NlcnZlclZhbGlkYXRpb25FcnJvckNvZGUpIHtcbiAgICBBcG9sbG9TZXJ2ZXJWYWxpZGF0aW9uRXJyb3JDb2RlW1wiSU5UUk9TUEVDVElPTl9ESVNBQkxFRFwiXSA9IFwiSU5UUk9TUEVDVElPTl9ESVNBQkxFRFwiO1xuICAgIEFwb2xsb1NlcnZlclZhbGlkYXRpb25FcnJvckNvZGVbXCJNQVhfUkVDVVJTSVZFX1NFTEVDVElPTlNfRVhDRUVERURcIl0gPSBcIk1BWF9SRUNVUlNJVkVfU0VMRUNUSU9OU19FWENFRURFRFwiO1xufSkoQXBvbGxvU2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZSB8fCAoQXBvbGxvU2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZSA9IHt9KSk7XG5leHBvcnQgZnVuY3Rpb24gdW53cmFwUmVzb2x2ZXJFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEdyYXBoUUxFcnJvciAmJiBlcnJvci5wYXRoICYmIGVycm9yLm9yaWdpbmFsRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yLm9yaWdpbmFsRXJyb3I7XG4gICAgfVxuICAgIHJldHVybiBlcnJvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/errors/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/externalTypes/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/externalTypes/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vZXh0ZXJuYWxUeXBlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiO0FBQVU7QUFDViIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vZXh0ZXJuYWxUeXBlcy9pbmRleC5qcz83NzBjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/externalTypes/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/generated/packageVersion.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/generated/packageVersion.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   packageVersion: () => (/* binding */ packageVersion)\n/* harmony export */ });\nconst packageVersion = \"4.12.2\";\n//# sourceMappingURL=packageVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vZ2VuZXJhdGVkL3BhY2thZ2VWZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9nZW5lcmF0ZWQvcGFja2FnZVZlcnNpb24uanM/N2Q5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgcGFja2FnZVZlcnNpb24gPSBcIjQuMTIuMlwiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFja2FnZVZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/generated/packageVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/httpBatching.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/httpBatching.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runPotentiallyBatchedHttpQuery: () => (/* binding */ runPotentiallyBatchedHttpQuery)\n/* harmony export */ });\n/* harmony import */ var _runHttpQuery_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/runHttpQuery.js\");\n/* harmony import */ var _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./internalErrorClasses.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalErrorClasses.js\");\n\n\nasync function runBatchedHttpQuery({ server, batchRequest, body, contextValue, schemaDerivedData, internals, }) {\n    if (body.length === 0) {\n        throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('No operations found in request.');\n    }\n    const sharedResponseHTTPGraphQLHead = (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_0__.newHTTPGraphQLHead)();\n    const responseBodies = await Promise.all(body.map(async (bodyPiece) => {\n        const singleRequest = {\n            ...batchRequest,\n            body: bodyPiece,\n        };\n        const response = await (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_0__.runHttpQuery)({\n            server,\n            httpRequest: singleRequest,\n            contextValue,\n            schemaDerivedData,\n            internals,\n            sharedResponseHTTPGraphQLHead,\n        });\n        if (response.body.kind === 'chunked') {\n            throw Error('Incremental delivery is not implemented for batch requests');\n        }\n        return response.body.string;\n    }));\n    return {\n        ...sharedResponseHTTPGraphQLHead,\n        body: { kind: 'complete', string: `[${responseBodies.join(',')}]` },\n    };\n}\nasync function runPotentiallyBatchedHttpQuery(server, httpGraphQLRequest, contextValue, schemaDerivedData, internals) {\n    if (!(httpGraphQLRequest.method === 'POST' &&\n        Array.isArray(httpGraphQLRequest.body))) {\n        return await (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_0__.runHttpQuery)({\n            server,\n            httpRequest: httpGraphQLRequest,\n            contextValue,\n            schemaDerivedData,\n            internals,\n            sharedResponseHTTPGraphQLHead: null,\n        });\n    }\n    if (internals.allowBatchedHttpRequests) {\n        return await runBatchedHttpQuery({\n            server,\n            batchRequest: httpGraphQLRequest,\n            body: httpGraphQLRequest.body,\n            contextValue,\n            schemaDerivedData,\n            internals,\n        });\n    }\n    throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('Operation batching disabled.');\n}\n//# sourceMappingURL=httpBatching.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vaHR0cEJhdGNoaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRTtBQUNUO0FBQzVELHFDQUFxQyx5RUFBeUU7QUFDOUc7QUFDQSxrQkFBa0IscUVBQWU7QUFDakM7QUFDQSwwQ0FBMEMsb0VBQWtCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOERBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnQkFBZ0IsOEJBQThCLHlCQUF5QixJQUFJO0FBQzNFO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxxQkFBcUIsOERBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGNBQWMscUVBQWU7QUFDN0I7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vaHR0cEJhdGNoaW5nLmpzP2IyODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbmV3SFRUUEdyYXBoUUxIZWFkLCBydW5IdHRwUXVlcnkgfSBmcm9tICcuL3J1bkh0dHBRdWVyeS5qcyc7XG5pbXBvcnQgeyBCYWRSZXF1ZXN0RXJyb3IgfSBmcm9tICcuL2ludGVybmFsRXJyb3JDbGFzc2VzLmpzJztcbmFzeW5jIGZ1bmN0aW9uIHJ1bkJhdGNoZWRIdHRwUXVlcnkoeyBzZXJ2ZXIsIGJhdGNoUmVxdWVzdCwgYm9keSwgY29udGV4dFZhbHVlLCBzY2hlbWFEZXJpdmVkRGF0YSwgaW50ZXJuYWxzLCB9KSB7XG4gICAgaWYgKGJvZHkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoJ05vIG9wZXJhdGlvbnMgZm91bmQgaW4gcmVxdWVzdC4nKTtcbiAgICB9XG4gICAgY29uc3Qgc2hhcmVkUmVzcG9uc2VIVFRQR3JhcGhRTEhlYWQgPSBuZXdIVFRQR3JhcGhRTEhlYWQoKTtcbiAgICBjb25zdCByZXNwb25zZUJvZGllcyA9IGF3YWl0IFByb21pc2UuYWxsKGJvZHkubWFwKGFzeW5jIChib2R5UGllY2UpID0+IHtcbiAgICAgICAgY29uc3Qgc2luZ2xlUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLmJhdGNoUmVxdWVzdCxcbiAgICAgICAgICAgIGJvZHk6IGJvZHlQaWVjZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBydW5IdHRwUXVlcnkoe1xuICAgICAgICAgICAgc2VydmVyLFxuICAgICAgICAgICAgaHR0cFJlcXVlc3Q6IHNpbmdsZVJlcXVlc3QsXG4gICAgICAgICAgICBjb250ZXh0VmFsdWUsXG4gICAgICAgICAgICBzY2hlbWFEZXJpdmVkRGF0YSxcbiAgICAgICAgICAgIGludGVybmFscyxcbiAgICAgICAgICAgIHNoYXJlZFJlc3BvbnNlSFRUUEdyYXBoUUxIZWFkLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmJvZHkua2luZCA9PT0gJ2NodW5rZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignSW5jcmVtZW50YWwgZGVsaXZlcnkgaXMgbm90IGltcGxlbWVudGVkIGZvciBiYXRjaCByZXF1ZXN0cycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZS5ib2R5LnN0cmluZztcbiAgICB9KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc2hhcmVkUmVzcG9uc2VIVFRQR3JhcGhRTEhlYWQsXG4gICAgICAgIGJvZHk6IHsga2luZDogJ2NvbXBsZXRlJywgc3RyaW5nOiBgWyR7cmVzcG9uc2VCb2RpZXMuam9pbignLCcpfV1gIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5Qb3RlbnRpYWxseUJhdGNoZWRIdHRwUXVlcnkoc2VydmVyLCBodHRwR3JhcGhRTFJlcXVlc3QsIGNvbnRleHRWYWx1ZSwgc2NoZW1hRGVyaXZlZERhdGEsIGludGVybmFscykge1xuICAgIGlmICghKGh0dHBHcmFwaFFMUmVxdWVzdC5tZXRob2QgPT09ICdQT1NUJyAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KGh0dHBHcmFwaFFMUmVxdWVzdC5ib2R5KSkpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJ1bkh0dHBRdWVyeSh7XG4gICAgICAgICAgICBzZXJ2ZXIsXG4gICAgICAgICAgICBodHRwUmVxdWVzdDogaHR0cEdyYXBoUUxSZXF1ZXN0LFxuICAgICAgICAgICAgY29udGV4dFZhbHVlLFxuICAgICAgICAgICAgc2NoZW1hRGVyaXZlZERhdGEsXG4gICAgICAgICAgICBpbnRlcm5hbHMsXG4gICAgICAgICAgICBzaGFyZWRSZXNwb25zZUhUVFBHcmFwaFFMSGVhZDogbnVsbCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpbnRlcm5hbHMuYWxsb3dCYXRjaGVkSHR0cFJlcXVlc3RzKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5CYXRjaGVkSHR0cFF1ZXJ5KHtcbiAgICAgICAgICAgIHNlcnZlcixcbiAgICAgICAgICAgIGJhdGNoUmVxdWVzdDogaHR0cEdyYXBoUUxSZXF1ZXN0LFxuICAgICAgICAgICAgYm9keTogaHR0cEdyYXBoUUxSZXF1ZXN0LmJvZHksXG4gICAgICAgICAgICBjb250ZXh0VmFsdWUsXG4gICAgICAgICAgICBzY2hlbWFEZXJpdmVkRGF0YSxcbiAgICAgICAgICAgIGludGVybmFscyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoJ09wZXJhdGlvbiBiYXRjaGluZyBkaXNhYmxlZC4nKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0dHBCYXRjaGluZy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/httpBatching.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/incrementalDeliveryPolyfill.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/incrementalDeliveryPolyfill.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   executeIncrementally: () => (/* binding */ executeIncrementally)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/execution/execute.mjs\");\n\nlet graphqlExperimentalExecuteIncrementally = undefined;\nasync function tryToLoadGraphQL17() {\n    if (graphqlExperimentalExecuteIncrementally !== undefined) {\n        return;\n    }\n    const graphql = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! graphql */ \"(rsc)/./node_modules/graphql/index.mjs\"));\n    if ('experimentalExecuteIncrementally' in graphql) {\n        graphqlExperimentalExecuteIncrementally = graphql\n            .experimentalExecuteIncrementally;\n    }\n    else {\n        graphqlExperimentalExecuteIncrementally = null;\n    }\n}\nasync function executeIncrementally(args) {\n    await tryToLoadGraphQL17();\n    if (graphqlExperimentalExecuteIncrementally) {\n        return graphqlExperimentalExecuteIncrementally(args);\n    }\n    return (0,graphql__WEBPACK_IMPORTED_MODULE_0__.execute)(args);\n}\n//# sourceMappingURL=incrementalDeliveryPolyfill.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vaW5jcmVtZW50YWxEZWxpdmVyeVBvbHlmaWxsLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNklBQWlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnREFBTztBQUNsQjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9pbmNyZW1lbnRhbERlbGl2ZXJ5UG9seWZpbGwuanM/MGU4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleGVjdXRlLCB9IGZyb20gJ2dyYXBocWwnO1xubGV0IGdyYXBocWxFeHBlcmltZW50YWxFeGVjdXRlSW5jcmVtZW50YWxseSA9IHVuZGVmaW5lZDtcbmFzeW5jIGZ1bmN0aW9uIHRyeVRvTG9hZEdyYXBoUUwxNygpIHtcbiAgICBpZiAoZ3JhcGhxbEV4cGVyaW1lbnRhbEV4ZWN1dGVJbmNyZW1lbnRhbGx5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBncmFwaHFsID0gYXdhaXQgaW1wb3J0KCdncmFwaHFsJyk7XG4gICAgaWYgKCdleHBlcmltZW50YWxFeGVjdXRlSW5jcmVtZW50YWxseScgaW4gZ3JhcGhxbCkge1xuICAgICAgICBncmFwaHFsRXhwZXJpbWVudGFsRXhlY3V0ZUluY3JlbWVudGFsbHkgPSBncmFwaHFsXG4gICAgICAgICAgICAuZXhwZXJpbWVudGFsRXhlY3V0ZUluY3JlbWVudGFsbHk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBncmFwaHFsRXhwZXJpbWVudGFsRXhlY3V0ZUluY3JlbWVudGFsbHkgPSBudWxsO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSW5jcmVtZW50YWxseShhcmdzKSB7XG4gICAgYXdhaXQgdHJ5VG9Mb2FkR3JhcGhRTDE3KCk7XG4gICAgaWYgKGdyYXBocWxFeHBlcmltZW50YWxFeGVjdXRlSW5jcmVtZW50YWxseSkge1xuICAgICAgICByZXR1cm4gZ3JhcGhxbEV4cGVyaW1lbnRhbEV4ZWN1dGVJbmNyZW1lbnRhbGx5KGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gZXhlY3V0ZShhcmdzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluY3JlbWVudGFsRGVsaXZlcnlQb2x5ZmlsbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/incrementalDeliveryPolyfill.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServer: () => (/* reexport safe */ _ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServer),\n/* harmony export */   HeaderMap: () => (/* reexport safe */ _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_1__.HeaderMap)\n/* harmony export */ });\n/* harmony import */ var _ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ApolloServer.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/ApolloServer.js\");\n/* harmony import */ var _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js\");\n/* harmony import */ var _externalTypes_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./externalTypes/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/externalTypes/index.js\");\n\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBaUQ7QUFDQTtBQUNSO0FBQ3pDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9pbmRleC5qcz9hNjIwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IEFwb2xsb1NlcnZlciB9IGZyb20gJy4vQXBvbGxvU2VydmVyLmpzJztcbmV4cG9ydCB7IEhlYWRlck1hcCB9IGZyb20gJy4vdXRpbHMvSGVhZGVyTWFwLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vZXh0ZXJuYWxUeXBlcy9pbmRleC5qcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/internalErrorClasses.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/internalErrorClasses.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BadRequestError: () => (/* binding */ BadRequestError),\n/* harmony export */   OperationResolutionError: () => (/* binding */ OperationResolutionError),\n/* harmony export */   PersistedQueryNotFoundError: () => (/* binding */ PersistedQueryNotFoundError),\n/* harmony export */   PersistedQueryNotSupportedError: () => (/* binding */ PersistedQueryNotSupportedError),\n/* harmony export */   SyntaxError: () => (/* binding */ SyntaxError),\n/* harmony export */   UserInputError: () => (/* binding */ UserInputError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/error/GraphQLError.mjs\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/errors/index.js\");\n/* harmony import */ var _runHttpQuery_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/runHttpQuery.js\");\n/* harmony import */ var _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js\");\n\n\n\n\nclass GraphQLErrorWithCode extends graphql__WEBPACK_IMPORTED_MODULE_3__.GraphQLError {\n    constructor(message, code, options) {\n        super(message, {\n            ...options,\n            extensions: { ...options?.extensions, code },\n        });\n        this.name = this.constructor.name;\n    }\n}\nclass SyntaxError extends GraphQLErrorWithCode {\n    constructor(graphqlError) {\n        super(graphqlError.message, _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.GRAPHQL_PARSE_FAILED, {\n            source: graphqlError.source,\n            positions: graphqlError.positions,\n            extensions: { http: (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_1__.newHTTPGraphQLHead)(400), ...graphqlError.extensions },\n            originalError: graphqlError,\n        });\n    }\n}\nclass ValidationError extends GraphQLErrorWithCode {\n    constructor(graphqlError) {\n        super(graphqlError.message, _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.GRAPHQL_VALIDATION_FAILED, {\n            nodes: graphqlError.nodes,\n            extensions: {\n                http: (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_1__.newHTTPGraphQLHead)(400),\n                ...graphqlError.extensions,\n            },\n            originalError: graphqlError.originalError ?? graphqlError,\n        });\n    }\n}\nconst getPersistedQueryErrorHttp = () => ({\n    status: 200,\n    headers: new _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_2__.HeaderMap([\n        ['cache-control', 'private, no-cache, must-revalidate'],\n    ]),\n});\nclass PersistedQueryNotFoundError extends GraphQLErrorWithCode {\n    constructor() {\n        super('PersistedQueryNotFound', _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.PERSISTED_QUERY_NOT_FOUND, { extensions: { http: getPersistedQueryErrorHttp() } });\n    }\n}\nclass PersistedQueryNotSupportedError extends GraphQLErrorWithCode {\n    constructor() {\n        super('PersistedQueryNotSupported', _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.PERSISTED_QUERY_NOT_SUPPORTED, { extensions: { http: getPersistedQueryErrorHttp() } });\n    }\n}\nclass UserInputError extends GraphQLErrorWithCode {\n    constructor(graphqlError) {\n        super(graphqlError.message, _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.BAD_USER_INPUT, {\n            nodes: graphqlError.nodes,\n            originalError: graphqlError.originalError ?? graphqlError,\n            extensions: graphqlError.extensions,\n        });\n    }\n}\nclass OperationResolutionError extends GraphQLErrorWithCode {\n    constructor(graphqlError) {\n        super(graphqlError.message, _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.OPERATION_RESOLUTION_FAILURE, {\n            nodes: graphqlError.nodes,\n            originalError: graphqlError.originalError ?? graphqlError,\n            extensions: {\n                http: (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_1__.newHTTPGraphQLHead)(400),\n                ...graphqlError.extensions,\n            },\n        });\n    }\n}\nclass BadRequestError extends GraphQLErrorWithCode {\n    constructor(message, options) {\n        super(message, _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerErrorCode.BAD_REQUEST, {\n            ...options,\n            extensions: { http: (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_1__.newHTTPGraphQLHead)(400), ...options?.extensions },\n        });\n    }\n}\n//# sourceMappingURL=internalErrorClasses.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vaW50ZXJuYWxFcnJvckNsYXNzZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFDbUI7QUFDSDtBQUNOO0FBQ2pELG1DQUFtQyxpREFBWTtBQUMvQztBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOEJBQThCO0FBQ3hELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0NBQW9DLG1FQUFxQjtBQUN6RDtBQUNBO0FBQ0EsMEJBQTBCLE1BQU0sb0VBQWtCLG1DQUFtQztBQUNyRjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ087QUFDUDtBQUNBLG9DQUFvQyxtRUFBcUI7QUFDekQ7QUFDQTtBQUNBLHNCQUFzQixvRUFBa0I7QUFDeEM7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMERBQVM7QUFDMUI7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0Esd0NBQXdDLG1FQUFxQiw4QkFBOEIsY0FBYyxzQ0FBc0M7QUFDL0k7QUFDQTtBQUNPO0FBQ1A7QUFDQSw0Q0FBNEMsbUVBQXFCLGtDQUFrQyxjQUFjLHNDQUFzQztBQUN2SjtBQUNBO0FBQ087QUFDUDtBQUNBLG9DQUFvQyxtRUFBcUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0NBQW9DLG1FQUFxQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0VBQWtCO0FBQ3hDO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ087QUFDUDtBQUNBLHVCQUF1QixtRUFBcUI7QUFDNUM7QUFDQSwwQkFBMEIsTUFBTSxvRUFBa0IsK0JBQStCO0FBQ2pGLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL2ludGVybmFsRXJyb3JDbGFzc2VzLmpzPzExOTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JhcGhRTEVycm9yIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBBcG9sbG9TZXJ2ZXJFcnJvckNvZGUgfSBmcm9tICcuL2Vycm9ycy9pbmRleC5qcyc7XG5pbXBvcnQgeyBuZXdIVFRQR3JhcGhRTEhlYWQgfSBmcm9tICcuL3J1bkh0dHBRdWVyeS5qcyc7XG5pbXBvcnQgeyBIZWFkZXJNYXAgfSBmcm9tICcuL3V0aWxzL0hlYWRlck1hcC5qcyc7XG5jbGFzcyBHcmFwaFFMRXJyb3JXaXRoQ29kZSBleHRlbmRzIEdyYXBoUUxFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczogeyAuLi5vcHRpb25zPy5leHRlbnNpb25zLCBjb2RlIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFN5bnRheEVycm9yIGV4dGVuZHMgR3JhcGhRTEVycm9yV2l0aENvZGUge1xuICAgIGNvbnN0cnVjdG9yKGdyYXBocWxFcnJvcikge1xuICAgICAgICBzdXBlcihncmFwaHFsRXJyb3IubWVzc2FnZSwgQXBvbGxvU2VydmVyRXJyb3JDb2RlLkdSQVBIUUxfUEFSU0VfRkFJTEVELCB7XG4gICAgICAgICAgICBzb3VyY2U6IGdyYXBocWxFcnJvci5zb3VyY2UsXG4gICAgICAgICAgICBwb3NpdGlvbnM6IGdyYXBocWxFcnJvci5wb3NpdGlvbnMsXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7IGh0dHA6IG5ld0hUVFBHcmFwaFFMSGVhZCg0MDApLCAuLi5ncmFwaHFsRXJyb3IuZXh0ZW5zaW9ucyB9LFxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvcjogZ3JhcGhxbEVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgR3JhcGhRTEVycm9yV2l0aENvZGUge1xuICAgIGNvbnN0cnVjdG9yKGdyYXBocWxFcnJvcikge1xuICAgICAgICBzdXBlcihncmFwaHFsRXJyb3IubWVzc2FnZSwgQXBvbGxvU2VydmVyRXJyb3JDb2RlLkdSQVBIUUxfVkFMSURBVElPTl9GQUlMRUQsIHtcbiAgICAgICAgICAgIG5vZGVzOiBncmFwaHFsRXJyb3Iubm9kZXMsXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cDogbmV3SFRUUEdyYXBoUUxIZWFkKDQwMCksXG4gICAgICAgICAgICAgICAgLi4uZ3JhcGhxbEVycm9yLmV4dGVuc2lvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvcjogZ3JhcGhxbEVycm9yLm9yaWdpbmFsRXJyb3IgPz8gZ3JhcGhxbEVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5jb25zdCBnZXRQZXJzaXN0ZWRRdWVyeUVycm9ySHR0cCA9ICgpID0+ICh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgaGVhZGVyczogbmV3IEhlYWRlck1hcChbXG4gICAgICAgIFsnY2FjaGUtY29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbXVzdC1yZXZhbGlkYXRlJ10sXG4gICAgXSksXG59KTtcbmV4cG9ydCBjbGFzcyBQZXJzaXN0ZWRRdWVyeU5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBHcmFwaFFMRXJyb3JXaXRoQ29kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdQZXJzaXN0ZWRRdWVyeU5vdEZvdW5kJywgQXBvbGxvU2VydmVyRXJyb3JDb2RlLlBFUlNJU1RFRF9RVUVSWV9OT1RfRk9VTkQsIHsgZXh0ZW5zaW9uczogeyBodHRwOiBnZXRQZXJzaXN0ZWRRdWVyeUVycm9ySHR0cCgpIH0gfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFBlcnNpc3RlZFF1ZXJ5Tm90U3VwcG9ydGVkRXJyb3IgZXh0ZW5kcyBHcmFwaFFMRXJyb3JXaXRoQ29kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdQZXJzaXN0ZWRRdWVyeU5vdFN1cHBvcnRlZCcsIEFwb2xsb1NlcnZlckVycm9yQ29kZS5QRVJTSVNURURfUVVFUllfTk9UX1NVUFBPUlRFRCwgeyBleHRlbnNpb25zOiB7IGh0dHA6IGdldFBlcnNpc3RlZFF1ZXJ5RXJyb3JIdHRwKCkgfSB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgVXNlcklucHV0RXJyb3IgZXh0ZW5kcyBHcmFwaFFMRXJyb3JXaXRoQ29kZSB7XG4gICAgY29uc3RydWN0b3IoZ3JhcGhxbEVycm9yKSB7XG4gICAgICAgIHN1cGVyKGdyYXBocWxFcnJvci5tZXNzYWdlLCBBcG9sbG9TZXJ2ZXJFcnJvckNvZGUuQkFEX1VTRVJfSU5QVVQsIHtcbiAgICAgICAgICAgIG5vZGVzOiBncmFwaHFsRXJyb3Iubm9kZXMsXG4gICAgICAgICAgICBvcmlnaW5hbEVycm9yOiBncmFwaHFsRXJyb3Iub3JpZ2luYWxFcnJvciA/PyBncmFwaHFsRXJyb3IsXG4gICAgICAgICAgICBleHRlbnNpb25zOiBncmFwaHFsRXJyb3IuZXh0ZW5zaW9ucyxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9wZXJhdGlvblJlc29sdXRpb25FcnJvciBleHRlbmRzIEdyYXBoUUxFcnJvcldpdGhDb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihncmFwaHFsRXJyb3IpIHtcbiAgICAgICAgc3VwZXIoZ3JhcGhxbEVycm9yLm1lc3NhZ2UsIEFwb2xsb1NlcnZlckVycm9yQ29kZS5PUEVSQVRJT05fUkVTT0xVVElPTl9GQUlMVVJFLCB7XG4gICAgICAgICAgICBub2RlczogZ3JhcGhxbEVycm9yLm5vZGVzLFxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvcjogZ3JhcGhxbEVycm9yLm9yaWdpbmFsRXJyb3IgPz8gZ3JhcGhxbEVycm9yLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgIGh0dHA6IG5ld0hUVFBHcmFwaFFMSGVhZCg0MDApLFxuICAgICAgICAgICAgICAgIC4uLmdyYXBocWxFcnJvci5leHRlbnNpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhZFJlcXVlc3RFcnJvciBleHRlbmRzIEdyYXBoUUxFcnJvcldpdGhDb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIEFwb2xsb1NlcnZlckVycm9yQ29kZS5CQURfUkVRVUVTVCwge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IHsgaHR0cDogbmV3SFRUUEdyYXBoUUxIZWFkKDQwMCksIC4uLm9wdGlvbnM/LmV4dGVuc2lvbnMgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJuYWxFcnJvckNsYXNzZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/internalErrorClasses.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/internalPlugin.js":
/*!****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/internalPlugin.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   internalPlugin: () => (/* binding */ internalPlugin),\n/* harmony export */   pluginIsInternal: () => (/* binding */ pluginIsInternal)\n/* harmony export */ });\nfunction internalPlugin(p) {\n    return p;\n}\nfunction pluginIsInternal(plugin) {\n    return '__internal_plugin_id__' in plugin;\n}\n//# sourceMappingURL=internalPlugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vaW50ZXJuYWxQbHVnaW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vaW50ZXJuYWxQbHVnaW4uanM/MjZhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaW50ZXJuYWxQbHVnaW4ocCkge1xuICAgIHJldHVybiBwO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBsdWdpbklzSW50ZXJuYWwocGx1Z2luKSB7XG4gICAgcmV0dXJuICdfX2ludGVybmFsX3BsdWdpbl9pZF9fJyBpbiBwbHVnaW47XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcm5hbFBsdWdpbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/internalPlugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/cacheControl/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/cacheControl/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServerPluginCacheControl: () => (/* binding */ ApolloServerPluginCacheControl)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/type/definition.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/jsutils/Path.mjs\");\n/* harmony import */ var _cachePolicy_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cachePolicy.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/cachePolicy.js\");\n/* harmony import */ var _internalPlugin_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalPlugin.js\");\n/* harmony import */ var lru_cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lru-cache */ \"(rsc)/./node_modules/lru-cache/index.mjs\");\n\n\n\n\nfunction ApolloServerPluginCacheControl(options = Object.create(null)) {\n    let typeAnnotationCache;\n    let fieldAnnotationCache;\n    return (0,_internalPlugin_js__WEBPACK_IMPORTED_MODULE_1__.internalPlugin)({\n        __internal_plugin_id__: 'CacheControl',\n        __is_disabled_plugin__: false,\n        async serverWillStart({ schema }) {\n            typeAnnotationCache = new lru_cache__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n                max: Object.values(schema.getTypeMap()).filter(graphql__WEBPACK_IMPORTED_MODULE_3__.isCompositeType)\n                    .length,\n            });\n            fieldAnnotationCache = new lru_cache__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n                max: Object.values(schema.getTypeMap())\n                    .filter(graphql__WEBPACK_IMPORTED_MODULE_3__.isObjectType)\n                    .flatMap((t) => Object.values(t.getFields())).length +\n                    Object.values(schema.getTypeMap())\n                        .filter(graphql__WEBPACK_IMPORTED_MODULE_3__.isInterfaceType)\n                        .flatMap((t) => Object.values(t.getFields())).length,\n            });\n            return undefined;\n        },\n        async requestDidStart(requestContext) {\n            function memoizedCacheAnnotationFromType(t) {\n                const existing = typeAnnotationCache.get(t);\n                if (existing) {\n                    return existing;\n                }\n                const annotation = cacheAnnotationFromType(t);\n                typeAnnotationCache.set(t, annotation);\n                return annotation;\n            }\n            function memoizedCacheAnnotationFromField(field) {\n                const existing = fieldAnnotationCache.get(field);\n                if (existing) {\n                    return existing;\n                }\n                const annotation = cacheAnnotationFromField(field);\n                fieldAnnotationCache.set(field, annotation);\n                return annotation;\n            }\n            const defaultMaxAge = options.defaultMaxAge ?? 0;\n            const calculateHttpHeaders = options.calculateHttpHeaders ?? true;\n            const { __testing__cacheHints } = options;\n            return {\n                async executionDidStart() {\n                    if (isRestricted(requestContext.overallCachePolicy)) {\n                        const fakeFieldPolicy = (0,_cachePolicy_js__WEBPACK_IMPORTED_MODULE_0__.newCachePolicy)();\n                        return {\n                            willResolveField({ info }) {\n                                info.cacheControl = {\n                                    setCacheHint: (dynamicHint) => {\n                                        fakeFieldPolicy.replace(dynamicHint);\n                                    },\n                                    cacheHint: fakeFieldPolicy,\n                                    cacheHintFromType: memoizedCacheAnnotationFromType,\n                                };\n                            },\n                        };\n                    }\n                    return {\n                        willResolveField({ info }) {\n                            const fieldPolicy = (0,_cachePolicy_js__WEBPACK_IMPORTED_MODULE_0__.newCachePolicy)();\n                            let inheritMaxAge = false;\n                            const targetType = (0,graphql__WEBPACK_IMPORTED_MODULE_3__.getNamedType)(info.returnType);\n                            if ((0,graphql__WEBPACK_IMPORTED_MODULE_3__.isCompositeType)(targetType)) {\n                                const typeAnnotation = memoizedCacheAnnotationFromType(targetType);\n                                fieldPolicy.replace(typeAnnotation);\n                                inheritMaxAge = !!typeAnnotation.inheritMaxAge;\n                            }\n                            const fieldAnnotation = memoizedCacheAnnotationFromField(info.parentType.getFields()[info.fieldName]);\n                            if (fieldAnnotation.inheritMaxAge &&\n                                fieldPolicy.maxAge === undefined) {\n                                inheritMaxAge = true;\n                                if (fieldAnnotation.scope) {\n                                    fieldPolicy.replace({ scope: fieldAnnotation.scope });\n                                }\n                            }\n                            else {\n                                fieldPolicy.replace(fieldAnnotation);\n                            }\n                            info.cacheControl = {\n                                setCacheHint: (dynamicHint) => {\n                                    fieldPolicy.replace(dynamicHint);\n                                },\n                                cacheHint: fieldPolicy,\n                                cacheHintFromType: memoizedCacheAnnotationFromType,\n                            };\n                            return () => {\n                                if (fieldPolicy.maxAge === undefined &&\n                                    (((0,graphql__WEBPACK_IMPORTED_MODULE_3__.isCompositeType)(targetType) && !inheritMaxAge) ||\n                                        !info.path.prev)) {\n                                    fieldPolicy.restrict({ maxAge: defaultMaxAge });\n                                }\n                                if (__testing__cacheHints && isRestricted(fieldPolicy)) {\n                                    const path = (0,graphql__WEBPACK_IMPORTED_MODULE_4__.pathToArray)(info.path).join('.');\n                                    if (__testing__cacheHints.has(path)) {\n                                        throw Error(\"shouldn't happen: addHint should only be called once per path\");\n                                    }\n                                    __testing__cacheHints.set(path, {\n                                        maxAge: fieldPolicy.maxAge,\n                                        scope: fieldPolicy.scope,\n                                    });\n                                }\n                                requestContext.overallCachePolicy.restrict(fieldPolicy);\n                            };\n                        },\n                    };\n                },\n                async willSendResponse(requestContext) {\n                    if (!calculateHttpHeaders) {\n                        return;\n                    }\n                    const { response, overallCachePolicy } = requestContext;\n                    const existingCacheControlHeader = parseExistingCacheControlHeader(response.http.headers.get('cache-control'));\n                    if (existingCacheControlHeader.kind === 'unparsable') {\n                        return;\n                    }\n                    const cachePolicy = (0,_cachePolicy_js__WEBPACK_IMPORTED_MODULE_0__.newCachePolicy)();\n                    cachePolicy.replace(overallCachePolicy);\n                    if (existingCacheControlHeader.kind === 'parsable-and-cacheable') {\n                        cachePolicy.restrict(existingCacheControlHeader.hint);\n                    }\n                    const policyIfCacheable = cachePolicy.policyIfCacheable();\n                    if (policyIfCacheable &&\n                        existingCacheControlHeader.kind !== 'uncacheable' &&\n                        response.body.kind === 'single' &&\n                        !response.body.singleResult.errors) {\n                        response.http.headers.set('cache-control', `max-age=${policyIfCacheable.maxAge}, ${policyIfCacheable.scope.toLowerCase()}`);\n                    }\n                    else if (calculateHttpHeaders !== 'if-cacheable') {\n                        response.http.headers.set('cache-control', CACHE_CONTROL_HEADER_UNCACHEABLE);\n                    }\n                },\n            };\n        },\n    });\n}\nconst CACHE_CONTROL_HEADER_CACHEABLE_REGEXP = /^max-age=(\\d+), (public|private)$/;\nconst CACHE_CONTROL_HEADER_UNCACHEABLE = 'no-store';\nfunction parseExistingCacheControlHeader(header) {\n    if (!header) {\n        return { kind: 'no-header' };\n    }\n    if (header === CACHE_CONTROL_HEADER_UNCACHEABLE) {\n        return { kind: 'uncacheable' };\n    }\n    const match = CACHE_CONTROL_HEADER_CACHEABLE_REGEXP.exec(header);\n    if (!match) {\n        return { kind: 'unparsable' };\n    }\n    return {\n        kind: 'parsable-and-cacheable',\n        hint: {\n            maxAge: +match[1],\n            scope: match[2] === 'public' ? 'PUBLIC' : 'PRIVATE',\n        },\n    };\n}\nfunction cacheAnnotationFromDirectives(directives) {\n    if (!directives)\n        return undefined;\n    const cacheControlDirective = directives.find((directive) => directive.name.value === 'cacheControl');\n    if (!cacheControlDirective)\n        return undefined;\n    if (!cacheControlDirective.arguments)\n        return undefined;\n    const maxAgeArgument = cacheControlDirective.arguments.find((argument) => argument.name.value === 'maxAge');\n    const scopeArgument = cacheControlDirective.arguments.find((argument) => argument.name.value === 'scope');\n    const inheritMaxAgeArgument = cacheControlDirective.arguments.find((argument) => argument.name.value === 'inheritMaxAge');\n    const scopeString = scopeArgument?.value?.kind === 'EnumValue'\n        ? scopeArgument.value.value\n        : undefined;\n    const scope = scopeString === 'PUBLIC' || scopeString === 'PRIVATE'\n        ? scopeString\n        : undefined;\n    if (inheritMaxAgeArgument?.value?.kind === 'BooleanValue' &&\n        inheritMaxAgeArgument.value.value) {\n        return { inheritMaxAge: true, scope };\n    }\n    return {\n        maxAge: maxAgeArgument?.value?.kind === 'IntValue'\n            ? parseInt(maxAgeArgument.value.value)\n            : undefined,\n        scope,\n    };\n}\nfunction cacheAnnotationFromType(t) {\n    if (t.astNode) {\n        const hint = cacheAnnotationFromDirectives(t.astNode.directives);\n        if (hint) {\n            return hint;\n        }\n    }\n    if (t.extensionASTNodes) {\n        for (const node of t.extensionASTNodes) {\n            const hint = cacheAnnotationFromDirectives(node.directives);\n            if (hint) {\n                return hint;\n            }\n        }\n    }\n    return {};\n}\nfunction cacheAnnotationFromField(field) {\n    if (field.astNode) {\n        const hint = cacheAnnotationFromDirectives(field.astNode.directives);\n        if (hint) {\n            return hint;\n        }\n    }\n    return {};\n}\nfunction isRestricted(hint) {\n    return hint.maxAge !== undefined || hint.scope !== undefined;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2NhY2hlQ29udHJvbC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkc7QUFDdkQ7QUFDRztBQUN4QjtBQUMxQjtBQUNQO0FBQ0E7QUFDQSxXQUFXLGtFQUFjO0FBQ3pCO0FBQ0E7QUFDQSxnQ0FBZ0MsUUFBUTtBQUN4QyxzQ0FBc0MsaURBQVE7QUFDOUMsK0RBQStELG9EQUFlO0FBQzlFO0FBQ0EsYUFBYTtBQUNiLHVDQUF1QyxpREFBUTtBQUMvQztBQUNBLDRCQUE0QixpREFBWTtBQUN4QztBQUNBO0FBQ0EsZ0NBQWdDLG9EQUFlO0FBQy9DO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3QkFBd0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELCtEQUFjO0FBQzlEO0FBQ0EsK0NBQStDLE1BQU07QUFDckQ7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsTUFBTTtBQUNqRCxnREFBZ0QsK0RBQWM7QUFDOUQ7QUFDQSwrQ0FBK0MscURBQVk7QUFDM0QsZ0NBQWdDLHdEQUFlO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCw4QkFBOEI7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHdEQUFlO0FBQ3JEO0FBQ0EsMkRBQTJELHVCQUF1QjtBQUNsRjtBQUNBO0FBQ0EsaURBQWlELG9EQUFtQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtCQUErQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywrREFBYztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUseUJBQXlCLElBQUksc0NBQXNDO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2NhY2hlQ29udHJvbC9pbmRleC5qcz81M2RmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE5hbWVkVHlwZSwgaXNDb21wb3NpdGVUeXBlLCBpc0ludGVyZmFjZVR5cGUsIGlzT2JqZWN0VHlwZSwgcmVzcG9uc2VQYXRoQXNBcnJheSwgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IG5ld0NhY2hlUG9saWN5IH0gZnJvbSAnLi4vLi4vY2FjaGVQb2xpY3kuanMnO1xuaW1wb3J0IHsgaW50ZXJuYWxQbHVnaW4gfSBmcm9tICcuLi8uLi9pbnRlcm5hbFBsdWdpbi5qcyc7XG5pbXBvcnQgTFJVQ2FjaGUgZnJvbSAnbHJ1LWNhY2hlJztcbmV4cG9ydCBmdW5jdGlvbiBBcG9sbG9TZXJ2ZXJQbHVnaW5DYWNoZUNvbnRyb2wob3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCkpIHtcbiAgICBsZXQgdHlwZUFubm90YXRpb25DYWNoZTtcbiAgICBsZXQgZmllbGRBbm5vdGF0aW9uQ2FjaGU7XG4gICAgcmV0dXJuIGludGVybmFsUGx1Z2luKHtcbiAgICAgICAgX19pbnRlcm5hbF9wbHVnaW5faWRfXzogJ0NhY2hlQ29udHJvbCcsXG4gICAgICAgIF9faXNfZGlzYWJsZWRfcGx1Z2luX186IGZhbHNlLFxuICAgICAgICBhc3luYyBzZXJ2ZXJXaWxsU3RhcnQoeyBzY2hlbWEgfSkge1xuICAgICAgICAgICAgdHlwZUFubm90YXRpb25DYWNoZSA9IG5ldyBMUlVDYWNoZSh7XG4gICAgICAgICAgICAgICAgbWF4OiBPYmplY3QudmFsdWVzKHNjaGVtYS5nZXRUeXBlTWFwKCkpLmZpbHRlcihpc0NvbXBvc2l0ZVR5cGUpXG4gICAgICAgICAgICAgICAgICAgIC5sZW5ndGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZpZWxkQW5ub3RhdGlvbkNhY2hlID0gbmV3IExSVUNhY2hlKHtcbiAgICAgICAgICAgICAgICBtYXg6IE9iamVjdC52YWx1ZXMoc2NoZW1hLmdldFR5cGVNYXAoKSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihpc09iamVjdFR5cGUpXG4gICAgICAgICAgICAgICAgICAgIC5mbGF0TWFwKCh0KSA9PiBPYmplY3QudmFsdWVzKHQuZ2V0RmllbGRzKCkpKS5sZW5ndGggK1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHNjaGVtYS5nZXRUeXBlTWFwKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGlzSW50ZXJmYWNlVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mbGF0TWFwKCh0KSA9PiBPYmplY3QudmFsdWVzKHQuZ2V0RmllbGRzKCkpKS5sZW5ndGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHJlcXVlc3REaWRTdGFydChyZXF1ZXN0Q29udGV4dCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gbWVtb2l6ZWRDYWNoZUFubm90YXRpb25Gcm9tVHlwZSh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0eXBlQW5ub3RhdGlvbkNhY2hlLmdldCh0KTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uID0gY2FjaGVBbm5vdGF0aW9uRnJvbVR5cGUodCk7XG4gICAgICAgICAgICAgICAgdHlwZUFubm90YXRpb25DYWNoZS5zZXQodCwgYW5ub3RhdGlvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFubm90YXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBtZW1vaXplZENhY2hlQW5ub3RhdGlvbkZyb21GaWVsZChmaWVsZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZmllbGRBbm5vdGF0aW9uQ2FjaGUuZ2V0KGZpZWxkKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uID0gY2FjaGVBbm5vdGF0aW9uRnJvbUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgICAgICBmaWVsZEFubm90YXRpb25DYWNoZS5zZXQoZmllbGQsIGFubm90YXRpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhbm5vdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdE1heEFnZSA9IG9wdGlvbnMuZGVmYXVsdE1heEFnZSA/PyAwO1xuICAgICAgICAgICAgY29uc3QgY2FsY3VsYXRlSHR0cEhlYWRlcnMgPSBvcHRpb25zLmNhbGN1bGF0ZUh0dHBIZWFkZXJzID8/IHRydWU7XG4gICAgICAgICAgICBjb25zdCB7IF9fdGVzdGluZ19fY2FjaGVIaW50cyB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXN5bmMgZXhlY3V0aW9uRGlkU3RhcnQoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1Jlc3RyaWN0ZWQocmVxdWVzdENvbnRleHQub3ZlcmFsbENhY2hlUG9saWN5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFrZUZpZWxkUG9saWN5ID0gbmV3Q2FjaGVQb2xpY3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lsbFJlc29sdmVGaWVsZCh7IGluZm8gfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmNhY2hlQ29udHJvbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldENhY2hlSGludDogKGR5bmFtaWNIaW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFrZUZpZWxkUG9saWN5LnJlcGxhY2UoZHluYW1pY0hpbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlSGludDogZmFrZUZpZWxkUG9saWN5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVIaW50RnJvbVR5cGU6IG1lbW9pemVkQ2FjaGVBbm5vdGF0aW9uRnJvbVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbGxSZXNvbHZlRmllbGQoeyBpbmZvIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFBvbGljeSA9IG5ld0NhY2hlUG9saWN5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluaGVyaXRNYXhBZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRUeXBlID0gZ2V0TmFtZWRUeXBlKGluZm8ucmV0dXJuVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ29tcG9zaXRlVHlwZSh0YXJnZXRUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQW5ub3RhdGlvbiA9IG1lbW9pemVkQ2FjaGVBbm5vdGF0aW9uRnJvbVR5cGUodGFyZ2V0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkUG9saWN5LnJlcGxhY2UodHlwZUFubm90YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0TWF4QWdlID0gISF0eXBlQW5ub3RhdGlvbi5pbmhlcml0TWF4QWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZEFubm90YXRpb24gPSBtZW1vaXplZENhY2hlQW5ub3RhdGlvbkZyb21GaWVsZChpbmZvLnBhcmVudFR5cGUuZ2V0RmllbGRzKClbaW5mby5maWVsZE5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRBbm5vdGF0aW9uLmluaGVyaXRNYXhBZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRQb2xpY3kubWF4QWdlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdE1heEFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZEFubm90YXRpb24uc2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkUG9saWN5LnJlcGxhY2UoeyBzY29wZTogZmllbGRBbm5vdGF0aW9uLnNjb3BlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFBvbGljeS5yZXBsYWNlKGZpZWxkQW5ub3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDYWNoZUhpbnQ6IChkeW5hbWljSGludCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRQb2xpY3kucmVwbGFjZShkeW5hbWljSGludCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlSGludDogZmllbGRQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlSGludEZyb21UeXBlOiBtZW1vaXplZENhY2hlQW5ub3RhdGlvbkZyb21UeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkUG9saWN5Lm1heEFnZSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGlzQ29tcG9zaXRlVHlwZSh0YXJnZXRUeXBlKSAmJiAhaW5oZXJpdE1heEFnZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaW5mby5wYXRoLnByZXYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFBvbGljeS5yZXN0cmljdCh7IG1heEFnZTogZGVmYXVsdE1heEFnZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX190ZXN0aW5nX19jYWNoZUhpbnRzICYmIGlzUmVzdHJpY3RlZChmaWVsZFBvbGljeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSByZXNwb25zZVBhdGhBc0FycmF5KGluZm8ucGF0aCkuam9pbignLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fdGVzdGluZ19fY2FjaGVIaW50cy5oYXMocGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcInNob3VsZG4ndCBoYXBwZW46IGFkZEhpbnQgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UgcGVyIHBhdGhcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3Rlc3RpbmdfX2NhY2hlSGludHMuc2V0KHBhdGgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBZ2U6IGZpZWxkUG9saWN5Lm1heEFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogZmllbGRQb2xpY3kuc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Q29udGV4dC5vdmVyYWxsQ2FjaGVQb2xpY3kucmVzdHJpY3QoZmllbGRQb2xpY3kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXN5bmMgd2lsbFNlbmRSZXNwb25zZShyZXF1ZXN0Q29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGN1bGF0ZUh0dHBIZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyByZXNwb25zZSwgb3ZlcmFsbENhY2hlUG9saWN5IH0gPSByZXF1ZXN0Q29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDYWNoZUNvbnRyb2xIZWFkZXIgPSBwYXJzZUV4aXN0aW5nQ2FjaGVDb250cm9sSGVhZGVyKHJlc3BvbnNlLmh0dHAuaGVhZGVycy5nZXQoJ2NhY2hlLWNvbnRyb2wnKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0NhY2hlQ29udHJvbEhlYWRlci5raW5kID09PSAndW5wYXJzYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZVBvbGljeSA9IG5ld0NhY2hlUG9saWN5KCk7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlUG9saWN5LnJlcGxhY2Uob3ZlcmFsbENhY2hlUG9saWN5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nQ2FjaGVDb250cm9sSGVhZGVyLmtpbmQgPT09ICdwYXJzYWJsZS1hbmQtY2FjaGVhYmxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVQb2xpY3kucmVzdHJpY3QoZXhpc3RpbmdDYWNoZUNvbnRyb2xIZWFkZXIuaGludCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5SWZDYWNoZWFibGUgPSBjYWNoZVBvbGljeS5wb2xpY3lJZkNhY2hlYWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9saWN5SWZDYWNoZWFibGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQ2FjaGVDb250cm9sSGVhZGVyLmtpbmQgIT09ICd1bmNhY2hlYWJsZScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmJvZHkua2luZCA9PT0gJ3NpbmdsZScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFyZXNwb25zZS5ib2R5LnNpbmdsZVJlc3VsdC5lcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmh0dHAuaGVhZGVycy5zZXQoJ2NhY2hlLWNvbnRyb2wnLCBgbWF4LWFnZT0ke3BvbGljeUlmQ2FjaGVhYmxlLm1heEFnZX0sICR7cG9saWN5SWZDYWNoZWFibGUuc2NvcGUudG9Mb3dlckNhc2UoKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjYWxjdWxhdGVIdHRwSGVhZGVycyAhPT0gJ2lmLWNhY2hlYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmh0dHAuaGVhZGVycy5zZXQoJ2NhY2hlLWNvbnRyb2wnLCBDQUNIRV9DT05UUk9MX0hFQURFUl9VTkNBQ0hFQUJMRSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmNvbnN0IENBQ0hFX0NPTlRST0xfSEVBREVSX0NBQ0hFQUJMRV9SRUdFWFAgPSAvXm1heC1hZ2U9KFxcZCspLCAocHVibGljfHByaXZhdGUpJC87XG5jb25zdCBDQUNIRV9DT05UUk9MX0hFQURFUl9VTkNBQ0hFQUJMRSA9ICduby1zdG9yZSc7XG5mdW5jdGlvbiBwYXJzZUV4aXN0aW5nQ2FjaGVDb250cm9sSGVhZGVyKGhlYWRlcikge1xuICAgIGlmICghaGVhZGVyKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICduby1oZWFkZXInIH07XG4gICAgfVxuICAgIGlmIChoZWFkZXIgPT09IENBQ0hFX0NPTlRST0xfSEVBREVSX1VOQ0FDSEVBQkxFKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICd1bmNhY2hlYWJsZScgfTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2ggPSBDQUNIRV9DT05UUk9MX0hFQURFUl9DQUNIRUFCTEVfUkVHRVhQLmV4ZWMoaGVhZGVyKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICd1bnBhcnNhYmxlJyB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiAncGFyc2FibGUtYW5kLWNhY2hlYWJsZScsXG4gICAgICAgIGhpbnQ6IHtcbiAgICAgICAgICAgIG1heEFnZTogK21hdGNoWzFdLFxuICAgICAgICAgICAgc2NvcGU6IG1hdGNoWzJdID09PSAncHVibGljJyA/ICdQVUJMSUMnIDogJ1BSSVZBVEUnLFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBjYWNoZUFubm90YXRpb25Gcm9tRGlyZWN0aXZlcyhkaXJlY3RpdmVzKSB7XG4gICAgaWYgKCFkaXJlY3RpdmVzKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGNhY2hlQ29udHJvbERpcmVjdGl2ZSA9IGRpcmVjdGl2ZXMuZmluZCgoZGlyZWN0aXZlKSA9PiBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gJ2NhY2hlQ29udHJvbCcpO1xuICAgIGlmICghY2FjaGVDb250cm9sRGlyZWN0aXZlKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICghY2FjaGVDb250cm9sRGlyZWN0aXZlLmFyZ3VtZW50cylcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCBtYXhBZ2VBcmd1bWVudCA9IGNhY2hlQ29udHJvbERpcmVjdGl2ZS5hcmd1bWVudHMuZmluZCgoYXJndW1lbnQpID0+IGFyZ3VtZW50Lm5hbWUudmFsdWUgPT09ICdtYXhBZ2UnKTtcbiAgICBjb25zdCBzY29wZUFyZ3VtZW50ID0gY2FjaGVDb250cm9sRGlyZWN0aXZlLmFyZ3VtZW50cy5maW5kKChhcmd1bWVudCkgPT4gYXJndW1lbnQubmFtZS52YWx1ZSA9PT0gJ3Njb3BlJyk7XG4gICAgY29uc3QgaW5oZXJpdE1heEFnZUFyZ3VtZW50ID0gY2FjaGVDb250cm9sRGlyZWN0aXZlLmFyZ3VtZW50cy5maW5kKChhcmd1bWVudCkgPT4gYXJndW1lbnQubmFtZS52YWx1ZSA9PT0gJ2luaGVyaXRNYXhBZ2UnKTtcbiAgICBjb25zdCBzY29wZVN0cmluZyA9IHNjb3BlQXJndW1lbnQ/LnZhbHVlPy5raW5kID09PSAnRW51bVZhbHVlJ1xuICAgICAgICA/IHNjb3BlQXJndW1lbnQudmFsdWUudmFsdWVcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc2NvcGUgPSBzY29wZVN0cmluZyA9PT0gJ1BVQkxJQycgfHwgc2NvcGVTdHJpbmcgPT09ICdQUklWQVRFJ1xuICAgICAgICA/IHNjb3BlU3RyaW5nXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmIChpbmhlcml0TWF4QWdlQXJndW1lbnQ/LnZhbHVlPy5raW5kID09PSAnQm9vbGVhblZhbHVlJyAmJlxuICAgICAgICBpbmhlcml0TWF4QWdlQXJndW1lbnQudmFsdWUudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHsgaW5oZXJpdE1heEFnZTogdHJ1ZSwgc2NvcGUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWF4QWdlOiBtYXhBZ2VBcmd1bWVudD8udmFsdWU/LmtpbmQgPT09ICdJbnRWYWx1ZSdcbiAgICAgICAgICAgID8gcGFyc2VJbnQobWF4QWdlQXJndW1lbnQudmFsdWUudmFsdWUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgc2NvcGUsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNhY2hlQW5ub3RhdGlvbkZyb21UeXBlKHQpIHtcbiAgICBpZiAodC5hc3ROb2RlKSB7XG4gICAgICAgIGNvbnN0IGhpbnQgPSBjYWNoZUFubm90YXRpb25Gcm9tRGlyZWN0aXZlcyh0LmFzdE5vZGUuZGlyZWN0aXZlcyk7XG4gICAgICAgIGlmIChoaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gaGludDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodC5leHRlbnNpb25BU1ROb2Rlcykge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgdC5leHRlbnNpb25BU1ROb2Rlcykge1xuICAgICAgICAgICAgY29uc3QgaGludCA9IGNhY2hlQW5ub3RhdGlvbkZyb21EaXJlY3RpdmVzKG5vZGUuZGlyZWN0aXZlcyk7XG4gICAgICAgICAgICBpZiAoaGludCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoaW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7fTtcbn1cbmZ1bmN0aW9uIGNhY2hlQW5ub3RhdGlvbkZyb21GaWVsZChmaWVsZCkge1xuICAgIGlmIChmaWVsZC5hc3ROb2RlKSB7XG4gICAgICAgIGNvbnN0IGhpbnQgPSBjYWNoZUFubm90YXRpb25Gcm9tRGlyZWN0aXZlcyhmaWVsZC5hc3ROb2RlLmRpcmVjdGl2ZXMpO1xuICAgICAgICBpZiAoaGludCkge1xuICAgICAgICAgICAgcmV0dXJuIGhpbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHt9O1xufVxuZnVuY3Rpb24gaXNSZXN0cmljdGVkKGhpbnQpIHtcbiAgICByZXR1cm4gaGludC5tYXhBZ2UgIT09IHVuZGVmaW5lZCB8fCBoaW50LnNjb3BlICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/cacheControl/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/disableSuggestions/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/disableSuggestions/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServerPluginDisableSuggestions: () => (/* binding */ ApolloServerPluginDisableSuggestions)\n/* harmony export */ });\n/* harmony import */ var _internalPlugin_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalPlugin.js\");\n\nfunction ApolloServerPluginDisableSuggestions() {\n    return (0,_internalPlugin_js__WEBPACK_IMPORTED_MODULE_0__.internalPlugin)({\n        __internal_plugin_id__: 'DisableSuggestions',\n        __is_disabled_plugin__: false,\n        async requestDidStart() {\n            return {\n                async validationDidStart() {\n                    return async (validationErrors) => {\n                        validationErrors?.forEach((error) => {\n                            error.message = error.message.replace(/ ?Did you mean(.+?)\\?$/, '');\n                        });\n                    };\n                },\n            };\n        },\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2Rpc2FibGVTdWdnZXN0aW9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5RDtBQUNsRDtBQUNQLFdBQVcsa0VBQWM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2Rpc2FibGVTdWdnZXN0aW9ucy9pbmRleC5qcz9jMjczIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGludGVybmFsUGx1Z2luIH0gZnJvbSAnLi4vLi4vaW50ZXJuYWxQbHVnaW4uanMnO1xuZXhwb3J0IGZ1bmN0aW9uIEFwb2xsb1NlcnZlclBsdWdpbkRpc2FibGVTdWdnZXN0aW9ucygpIHtcbiAgICByZXR1cm4gaW50ZXJuYWxQbHVnaW4oe1xuICAgICAgICBfX2ludGVybmFsX3BsdWdpbl9pZF9fOiAnRGlzYWJsZVN1Z2dlc3Rpb25zJyxcbiAgICAgICAgX19pc19kaXNhYmxlZF9wbHVnaW5fXzogZmFsc2UsXG4gICAgICAgIGFzeW5jIHJlcXVlc3REaWRTdGFydCgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXN5bmMgdmFsaWRhdGlvbkRpZFN0YXJ0KCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXN5bmMgKHZhbGlkYXRpb25FcnJvcnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM/LmZvckVhY2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UucmVwbGFjZSgvID9EaWQgeW91IG1lYW4oLis/KVxcPyQvLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/disableSuggestions/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/inlineTrace/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/inlineTrace/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServerPluginInlineTrace: () => (/* binding */ ApolloServerPluginInlineTrace)\n/* harmony export */ });\n/* harmony import */ var _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/esm/protobuf.js\");\n/* harmony import */ var _traceTreeBuilder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../traceTreeBuilder.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/traceTreeBuilder.js\");\n/* harmony import */ var _internalPlugin_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalPlugin.js\");\n/* harmony import */ var _schemaIsSubgraph_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../schemaIsSubgraph.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaIsSubgraph.js\");\n\n\n\n\nfunction ApolloServerPluginInlineTrace(options = Object.create(null)) {\n    let enabled = options.__onlyIfSchemaIsSubgraph ? null : true;\n    return (0,_internalPlugin_js__WEBPACK_IMPORTED_MODULE_2__.internalPlugin)({\n        __internal_plugin_id__: 'InlineTrace',\n        __is_disabled_plugin__: false,\n        async serverWillStart({ schema, logger }) {\n            if (enabled === null) {\n                enabled = (0,_schemaIsSubgraph_js__WEBPACK_IMPORTED_MODULE_3__.schemaIsSubgraph)(schema);\n                if (enabled) {\n                    logger.info('Enabling inline tracing for this subgraph. To disable, use ' +\n                        'ApolloServerPluginInlineTraceDisabled.');\n                }\n            }\n        },\n        async requestDidStart({ request: { http }, metrics }) {\n            if (!enabled) {\n                return;\n            }\n            const treeBuilder = new _traceTreeBuilder_js__WEBPACK_IMPORTED_MODULE_1__.TraceTreeBuilder({\n                maskedBy: 'ApolloServerPluginInlineTrace',\n                sendErrors: options.includeErrors,\n            });\n            if (http?.headers.get('apollo-federation-include-trace') !== 'ftv1') {\n                return;\n            }\n            if (metrics.captureTraces === false) {\n                return;\n            }\n            metrics.captureTraces = true;\n            treeBuilder.startTiming();\n            return {\n                async executionDidStart() {\n                    return {\n                        willResolveField({ info }) {\n                            return treeBuilder.willResolveField(info);\n                        },\n                    };\n                },\n                async didEncounterErrors({ errors }) {\n                    treeBuilder.didEncounterErrors(errors);\n                },\n                async willSendResponse({ response }) {\n                    treeBuilder.stopTiming();\n                    if (response.body.kind === 'incremental') {\n                        return;\n                    }\n                    if (metrics.queryPlanTrace) {\n                        treeBuilder.trace.queryPlan = metrics.queryPlanTrace;\n                    }\n                    const encodedUint8Array = _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.encode(treeBuilder.trace).finish();\n                    const encodedBuffer = Buffer.from(encodedUint8Array, encodedUint8Array.byteOffset, encodedUint8Array.byteLength);\n                    const extensions = response.body.singleResult.extensions ||\n                        (response.body.singleResult.extensions = Object.create(null));\n                    if (typeof extensions.ftv1 !== 'undefined') {\n                        throw new Error('The `ftv1` extension was already present.');\n                    }\n                    extensions.ftv1 = encodedBuffer.toString('base64');\n                },\n            };\n        },\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2lubGluZVRyYWNlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlEO0FBQ0M7QUFDRDtBQUNDO0FBQ25EO0FBQ1A7QUFDQSxXQUFXLGtFQUFjO0FBQ3pCO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0EsMEJBQTBCLHNFQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGdDQUFnQyxXQUFXLE1BQU0sV0FBVztBQUM1RDtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msa0VBQWdCO0FBQ3BEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxNQUFNO0FBQ2pEO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCO0FBQ2pCLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0EsaUJBQWlCO0FBQ2pCLHlDQUF5QyxVQUFVO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLG1FQUFLO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9wbHVnaW4vaW5saW5lVHJhY2UvaW5kZXguanM/NTViNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmFjZSB9IGZyb20gJ0BhcG9sbG8vdXNhZ2UtcmVwb3J0aW5nLXByb3RvYnVmJztcbmltcG9ydCB7IFRyYWNlVHJlZUJ1aWxkZXIgfSBmcm9tICcuLi90cmFjZVRyZWVCdWlsZGVyLmpzJztcbmltcG9ydCB7IGludGVybmFsUGx1Z2luIH0gZnJvbSAnLi4vLi4vaW50ZXJuYWxQbHVnaW4uanMnO1xuaW1wb3J0IHsgc2NoZW1hSXNTdWJncmFwaCB9IGZyb20gJy4uL3NjaGVtYUlzU3ViZ3JhcGguanMnO1xuZXhwb3J0IGZ1bmN0aW9uIEFwb2xsb1NlcnZlclBsdWdpbklubGluZVRyYWNlKG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpKSB7XG4gICAgbGV0IGVuYWJsZWQgPSBvcHRpb25zLl9fb25seUlmU2NoZW1hSXNTdWJncmFwaCA/IG51bGwgOiB0cnVlO1xuICAgIHJldHVybiBpbnRlcm5hbFBsdWdpbih7XG4gICAgICAgIF9faW50ZXJuYWxfcGx1Z2luX2lkX186ICdJbmxpbmVUcmFjZScsXG4gICAgICAgIF9faXNfZGlzYWJsZWRfcGx1Z2luX186IGZhbHNlLFxuICAgICAgICBhc3luYyBzZXJ2ZXJXaWxsU3RhcnQoeyBzY2hlbWEsIGxvZ2dlciB9KSB7XG4gICAgICAgICAgICBpZiAoZW5hYmxlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQgPSBzY2hlbWFJc1N1YmdyYXBoKHNjaGVtYSk7XG4gICAgICAgICAgICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0VuYWJsaW5nIGlubGluZSB0cmFjaW5nIGZvciB0aGlzIHN1YmdyYXBoLiBUbyBkaXNhYmxlLCB1c2UgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnQXBvbGxvU2VydmVyUGx1Z2luSW5saW5lVHJhY2VEaXNhYmxlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHJlcXVlc3REaWRTdGFydCh7IHJlcXVlc3Q6IHsgaHR0cCB9LCBtZXRyaWNzIH0pIHtcbiAgICAgICAgICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRyZWVCdWlsZGVyID0gbmV3IFRyYWNlVHJlZUJ1aWxkZXIoe1xuICAgICAgICAgICAgICAgIG1hc2tlZEJ5OiAnQXBvbGxvU2VydmVyUGx1Z2luSW5saW5lVHJhY2UnLFxuICAgICAgICAgICAgICAgIHNlbmRFcnJvcnM6IG9wdGlvbnMuaW5jbHVkZUVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGh0dHA/LmhlYWRlcnMuZ2V0KCdhcG9sbG8tZmVkZXJhdGlvbi1pbmNsdWRlLXRyYWNlJykgIT09ICdmdHYxJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXRyaWNzLmNhcHR1cmVUcmFjZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWV0cmljcy5jYXB0dXJlVHJhY2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyZWVCdWlsZGVyLnN0YXJ0VGltaW5nKCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFzeW5jIGV4ZWN1dGlvbkRpZFN0YXJ0KCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lsbFJlc29sdmVGaWVsZCh7IGluZm8gfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmVlQnVpbGRlci53aWxsUmVzb2x2ZUZpZWxkKGluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFzeW5jIGRpZEVuY291bnRlckVycm9ycyh7IGVycm9ycyB9KSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLmRpZEVuY291bnRlckVycm9ycyhlcnJvcnMpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXN5bmMgd2lsbFNlbmRSZXNwb25zZSh7IHJlc3BvbnNlIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIuc3RvcFRpbWluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuYm9keS5raW5kID09PSAnaW5jcmVtZW50YWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldHJpY3MucXVlcnlQbGFuVHJhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLnF1ZXJ5UGxhbiA9IG1ldHJpY3MucXVlcnlQbGFuVHJhY2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jb2RlZFVpbnQ4QXJyYXkgPSBUcmFjZS5lbmNvZGUodHJlZUJ1aWxkZXIudHJhY2UpLmZpbmlzaCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkQnVmZmVyID0gQnVmZmVyLmZyb20oZW5jb2RlZFVpbnQ4QXJyYXksIGVuY29kZWRVaW50OEFycmF5LmJ5dGVPZmZzZXQsIGVuY29kZWRVaW50OEFycmF5LmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleHRlbnNpb25zID0gcmVzcG9uc2UuYm9keS5zaW5nbGVSZXN1bHQuZXh0ZW5zaW9ucyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlc3BvbnNlLmJvZHkuc2luZ2xlUmVzdWx0LmV4dGVuc2lvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleHRlbnNpb25zLmZ0djEgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgZnR2MWAgZXh0ZW5zaW9uIHdhcyBhbHJlYWR5IHByZXNlbnQuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9ucy5mdHYxID0gZW5jb2RlZEJ1ZmZlci50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/inlineTrace/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/landingPage/default/getEmbeddedHTML.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/landingPage/default/getEmbeddedHTML.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEmbeddedExplorerHTML: () => (/* binding */ getEmbeddedExplorerHTML),\n/* harmony export */   getEmbeddedSandboxHTML: () => (/* binding */ getEmbeddedSandboxHTML)\n/* harmony export */ });\nfunction getConfigStringForHtml(config) {\n    return JSON.stringify(config)\n        .replace('<', '\\\\u003c')\n        .replace('>', '\\\\u003e')\n        .replace('&', '\\\\u0026')\n        .replace(\"'\", '\\\\u0027');\n}\nconst getEmbeddedExplorerHTML = (explorerCdnVersion, config, apolloServerVersion, nonce) => {\n    const productionLandingPageEmbedConfigOrDefault = {\n        displayOptions: {},\n        persistExplorerState: false,\n        runTelemetry: true,\n        ...(typeof config.embed === 'boolean' ? {} : config.embed),\n    };\n    const embeddedExplorerParams = {\n        graphRef: config.graphRef,\n        target: '#embeddableExplorer',\n        initialState: {\n            ...('document' in config || 'headers' in config || 'variables' in config\n                ? {\n                    document: config.document,\n                    headers: config.headers,\n                    variables: config.variables,\n                }\n                : {}),\n            ...('collectionId' in config\n                ? {\n                    collectionId: config.collectionId,\n                    operationId: config.operationId,\n                }\n                : {}),\n            displayOptions: {\n                ...productionLandingPageEmbedConfigOrDefault.displayOptions,\n            },\n        },\n        persistExplorerState: productionLandingPageEmbedConfigOrDefault.persistExplorerState,\n        includeCookies: config.includeCookies,\n        runtime: apolloServerVersion,\n        runTelemetry: productionLandingPageEmbedConfigOrDefault.runTelemetry,\n        allowDynamicStyles: false,\n    };\n    return `\n<div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>Apollo Explorer cannot be loaded; it appears that you might be offline.</p>\n</div>\n<style nonce=${nonce}>\n  iframe {\n    background-color: white;\n    height: 100%;\n    width: 100%;\n    border: none;\n  }\n  #embeddableExplorer {\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    top: 0;\n  }\n</style>\n<div id=\"embeddableExplorer\"></div>\n<script nonce=\"${nonce}\" src=\"https://embeddable-explorer.cdn.apollographql.com/${encodeURIComponent(explorerCdnVersion)}/embeddable-explorer.umd.production.min.js?runtime=${encodeURIComponent(apolloServerVersion)}\"></script>\n<script nonce=\"${nonce}\">\n  var endpointUrl = window.location.href;\n  var embeddedExplorerConfig = ${getConfigStringForHtml(embeddedExplorerParams)};\n  new window.EmbeddedExplorer({\n    ...embeddedExplorerConfig,\n    endpointUrl,\n  });\n</script>\n`;\n};\nconst getEmbeddedSandboxHTML = (sandboxCdnVersion, config, apolloServerVersion, nonce) => {\n    const localDevelopmentEmbedConfigOrDefault = {\n        runTelemetry: true,\n        endpointIsEditable: false,\n        initialState: {},\n        ...(typeof config.embed === 'boolean' ? {} : (config.embed ?? {})),\n    };\n    const embeddedSandboxConfig = {\n        target: '#embeddableSandbox',\n        initialState: {\n            ...('document' in config || 'headers' in config || 'variables' in config\n                ? {\n                    document: config.document,\n                    variables: config.variables,\n                    headers: config.headers,\n                }\n                : {}),\n            ...('collectionId' in config\n                ? {\n                    collectionId: config.collectionId,\n                    operationId: config.operationId,\n                }\n                : {}),\n            includeCookies: config.includeCookies,\n            ...localDevelopmentEmbedConfigOrDefault.initialState,\n        },\n        hideCookieToggle: false,\n        endpointIsEditable: localDevelopmentEmbedConfigOrDefault.endpointIsEditable,\n        runtime: apolloServerVersion,\n        runTelemetry: localDevelopmentEmbedConfigOrDefault.runTelemetry,\n        allowDynamicStyles: false,\n    };\n    return `\n<div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>Apollo Sandbox cannot be loaded; it appears that you might be offline.</p>\n</div>\n<style nonce=${nonce}>\n  iframe {\n    background-color: white;\n    height: 100%;\n    width: 100%;\n    border: none;\n  }\n  #embeddableSandbox {\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    top: 0;\n  }\n</style>\n<div id=\"embeddableSandbox\"></div>\n<script nonce=\"${nonce}\" src=\"https://embeddable-sandbox.cdn.apollographql.com/${encodeURIComponent(sandboxCdnVersion)}/embeddable-sandbox.umd.production.min.js?runtime=${encodeURIComponent(apolloServerVersion)}\"></script>\n<script nonce=\"${nonce}\">\n  var initialEndpoint = window.location.href;\n  var embeddedSandboxConfig = ${getConfigStringForHtml(embeddedSandboxConfig)};\n  new window.EmbeddedSandbox(\n    {\n      ...embeddedSandboxConfig,\n      initialEndpoint,\n    }\n  );\n</script>\n`;\n};\n//# sourceMappingURL=getEmbeddedHTML.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2xhbmRpbmdQYWdlL2RlZmF1bHQvZ2V0RW1iZWRkZWRIVE1MLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBLGVBQWUsTUFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU0sMkRBQTJELHVDQUF1QyxxREFBcUQsd0NBQXdDO0FBQ3ROLGlCQUFpQixNQUFNO0FBQ3ZCO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixtREFBbUQscUJBQXFCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQSxlQUFlLE1BQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixNQUFNLDBEQUEwRCxzQ0FBc0Msb0RBQW9ELHdDQUF3QztBQUNuTixpQkFBaUIsTUFBTTtBQUN2QjtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2xhbmRpbmdQYWdlL2RlZmF1bHQvZ2V0RW1iZWRkZWRIVE1MLmpzPzM3ODIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2V0Q29uZmlnU3RyaW5nRm9ySHRtbChjb25maWcpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29uZmlnKVxuICAgICAgICAucmVwbGFjZSgnPCcsICdcXFxcdTAwM2MnKVxuICAgICAgICAucmVwbGFjZSgnPicsICdcXFxcdTAwM2UnKVxuICAgICAgICAucmVwbGFjZSgnJicsICdcXFxcdTAwMjYnKVxuICAgICAgICAucmVwbGFjZShcIidcIiwgJ1xcXFx1MDAyNycpO1xufVxuZXhwb3J0IGNvbnN0IGdldEVtYmVkZGVkRXhwbG9yZXJIVE1MID0gKGV4cGxvcmVyQ2RuVmVyc2lvbiwgY29uZmlnLCBhcG9sbG9TZXJ2ZXJWZXJzaW9uLCBub25jZSkgPT4ge1xuICAgIGNvbnN0IHByb2R1Y3Rpb25MYW5kaW5nUGFnZUVtYmVkQ29uZmlnT3JEZWZhdWx0ID0ge1xuICAgICAgICBkaXNwbGF5T3B0aW9uczoge30sXG4gICAgICAgIHBlcnNpc3RFeHBsb3JlclN0YXRlOiBmYWxzZSxcbiAgICAgICAgcnVuVGVsZW1ldHJ5OiB0cnVlLFxuICAgICAgICAuLi4odHlwZW9mIGNvbmZpZy5lbWJlZCA9PT0gJ2Jvb2xlYW4nID8ge30gOiBjb25maWcuZW1iZWQpLFxuICAgIH07XG4gICAgY29uc3QgZW1iZWRkZWRFeHBsb3JlclBhcmFtcyA9IHtcbiAgICAgICAgZ3JhcGhSZWY6IGNvbmZpZy5ncmFwaFJlZixcbiAgICAgICAgdGFyZ2V0OiAnI2VtYmVkZGFibGVFeHBsb3JlcicsXG4gICAgICAgIGluaXRpYWxTdGF0ZToge1xuICAgICAgICAgICAgLi4uKCdkb2N1bWVudCcgaW4gY29uZmlnIHx8ICdoZWFkZXJzJyBpbiBjb25maWcgfHwgJ3ZhcmlhYmxlcycgaW4gY29uZmlnXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBjb25maWcuZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGNvbmZpZy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgLi4uKCdjb2xsZWN0aW9uSWQnIGluIGNvbmZpZ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGNvbmZpZy5jb2xsZWN0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbklkOiBjb25maWcub3BlcmF0aW9uSWQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgZGlzcGxheU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAuLi5wcm9kdWN0aW9uTGFuZGluZ1BhZ2VFbWJlZENvbmZpZ09yRGVmYXVsdC5kaXNwbGF5T3B0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHBlcnNpc3RFeHBsb3JlclN0YXRlOiBwcm9kdWN0aW9uTGFuZGluZ1BhZ2VFbWJlZENvbmZpZ09yRGVmYXVsdC5wZXJzaXN0RXhwbG9yZXJTdGF0ZSxcbiAgICAgICAgaW5jbHVkZUNvb2tpZXM6IGNvbmZpZy5pbmNsdWRlQ29va2llcyxcbiAgICAgICAgcnVudGltZTogYXBvbGxvU2VydmVyVmVyc2lvbixcbiAgICAgICAgcnVuVGVsZW1ldHJ5OiBwcm9kdWN0aW9uTGFuZGluZ1BhZ2VFbWJlZENvbmZpZ09yRGVmYXVsdC5ydW5UZWxlbWV0cnksXG4gICAgICAgIGFsbG93RHluYW1pY1N0eWxlczogZmFsc2UsXG4gICAgfTtcbiAgICByZXR1cm4gYFxuPGRpdiBjbGFzcz1cImZhbGxiYWNrXCI+XG4gIDxoMT5XZWxjb21lIHRvIEFwb2xsbyBTZXJ2ZXI8L2gxPlxuICA8cD5BcG9sbG8gRXhwbG9yZXIgY2Fubm90IGJlIGxvYWRlZDsgaXQgYXBwZWFycyB0aGF0IHlvdSBtaWdodCBiZSBvZmZsaW5lLjwvcD5cbjwvZGl2PlxuPHN0eWxlIG5vbmNlPSR7bm9uY2V9PlxuICBpZnJhbWUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbiAgI2VtYmVkZGFibGVFeHBsb3JlciB7XG4gICAgd2lkdGg6IDEwMHZ3O1xuICAgIGhlaWdodDogMTAwdmg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgfVxuPC9zdHlsZT5cbjxkaXYgaWQ9XCJlbWJlZGRhYmxlRXhwbG9yZXJcIj48L2Rpdj5cbjxzY3JpcHQgbm9uY2U9XCIke25vbmNlfVwiIHNyYz1cImh0dHBzOi8vZW1iZWRkYWJsZS1leHBsb3Jlci5jZG4uYXBvbGxvZ3JhcGhxbC5jb20vJHtlbmNvZGVVUklDb21wb25lbnQoZXhwbG9yZXJDZG5WZXJzaW9uKX0vZW1iZWRkYWJsZS1leHBsb3Jlci51bWQucHJvZHVjdGlvbi5taW4uanM/cnVudGltZT0ke2VuY29kZVVSSUNvbXBvbmVudChhcG9sbG9TZXJ2ZXJWZXJzaW9uKX1cIj48L3NjcmlwdD5cbjxzY3JpcHQgbm9uY2U9XCIke25vbmNlfVwiPlxuICB2YXIgZW5kcG9pbnRVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgdmFyIGVtYmVkZGVkRXhwbG9yZXJDb25maWcgPSAke2dldENvbmZpZ1N0cmluZ0Zvckh0bWwoZW1iZWRkZWRFeHBsb3JlclBhcmFtcyl9O1xuICBuZXcgd2luZG93LkVtYmVkZGVkRXhwbG9yZXIoe1xuICAgIC4uLmVtYmVkZGVkRXhwbG9yZXJDb25maWcsXG4gICAgZW5kcG9pbnRVcmwsXG4gIH0pO1xuPC9zY3JpcHQ+XG5gO1xufTtcbmV4cG9ydCBjb25zdCBnZXRFbWJlZGRlZFNhbmRib3hIVE1MID0gKHNhbmRib3hDZG5WZXJzaW9uLCBjb25maWcsIGFwb2xsb1NlcnZlclZlcnNpb24sIG5vbmNlKSA9PiB7XG4gICAgY29uc3QgbG9jYWxEZXZlbG9wbWVudEVtYmVkQ29uZmlnT3JEZWZhdWx0ID0ge1xuICAgICAgICBydW5UZWxlbWV0cnk6IHRydWUsXG4gICAgICAgIGVuZHBvaW50SXNFZGl0YWJsZTogZmFsc2UsXG4gICAgICAgIGluaXRpYWxTdGF0ZToge30sXG4gICAgICAgIC4uLih0eXBlb2YgY29uZmlnLmVtYmVkID09PSAnYm9vbGVhbicgPyB7fSA6IChjb25maWcuZW1iZWQgPz8ge30pKSxcbiAgICB9O1xuICAgIGNvbnN0IGVtYmVkZGVkU2FuZGJveENvbmZpZyA9IHtcbiAgICAgICAgdGFyZ2V0OiAnI2VtYmVkZGFibGVTYW5kYm94JyxcbiAgICAgICAgaW5pdGlhbFN0YXRlOiB7XG4gICAgICAgICAgICAuLi4oJ2RvY3VtZW50JyBpbiBjb25maWcgfHwgJ2hlYWRlcnMnIGluIGNvbmZpZyB8fCAndmFyaWFibGVzJyBpbiBjb25maWdcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IGNvbmZpZy5kb2N1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBjb25maWcudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAuLi4oJ2NvbGxlY3Rpb25JZCcgaW4gY29uZmlnXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogY29uZmlnLmNvbGxlY3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uSWQ6IGNvbmZpZy5vcGVyYXRpb25JZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICBpbmNsdWRlQ29va2llczogY29uZmlnLmluY2x1ZGVDb29raWVzLFxuICAgICAgICAgICAgLi4ubG9jYWxEZXZlbG9wbWVudEVtYmVkQ29uZmlnT3JEZWZhdWx0LmluaXRpYWxTdGF0ZSxcbiAgICAgICAgfSxcbiAgICAgICAgaGlkZUNvb2tpZVRvZ2dsZTogZmFsc2UsXG4gICAgICAgIGVuZHBvaW50SXNFZGl0YWJsZTogbG9jYWxEZXZlbG9wbWVudEVtYmVkQ29uZmlnT3JEZWZhdWx0LmVuZHBvaW50SXNFZGl0YWJsZSxcbiAgICAgICAgcnVudGltZTogYXBvbGxvU2VydmVyVmVyc2lvbixcbiAgICAgICAgcnVuVGVsZW1ldHJ5OiBsb2NhbERldmVsb3BtZW50RW1iZWRDb25maWdPckRlZmF1bHQucnVuVGVsZW1ldHJ5LFxuICAgICAgICBhbGxvd0R5bmFtaWNTdHlsZXM6IGZhbHNlLFxuICAgIH07XG4gICAgcmV0dXJuIGBcbjxkaXYgY2xhc3M9XCJmYWxsYmFja1wiPlxuICA8aDE+V2VsY29tZSB0byBBcG9sbG8gU2VydmVyPC9oMT5cbiAgPHA+QXBvbGxvIFNhbmRib3ggY2Fubm90IGJlIGxvYWRlZDsgaXQgYXBwZWFycyB0aGF0IHlvdSBtaWdodCBiZSBvZmZsaW5lLjwvcD5cbjwvZGl2PlxuPHN0eWxlIG5vbmNlPSR7bm9uY2V9PlxuICBpZnJhbWUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbiAgI2VtYmVkZGFibGVTYW5kYm94IHtcbiAgICB3aWR0aDogMTAwdnc7XG4gICAgaGVpZ2h0OiAxMDB2aDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICB9XG48L3N0eWxlPlxuPGRpdiBpZD1cImVtYmVkZGFibGVTYW5kYm94XCI+PC9kaXY+XG48c2NyaXB0IG5vbmNlPVwiJHtub25jZX1cIiBzcmM9XCJodHRwczovL2VtYmVkZGFibGUtc2FuZGJveC5jZG4uYXBvbGxvZ3JhcGhxbC5jb20vJHtlbmNvZGVVUklDb21wb25lbnQoc2FuZGJveENkblZlcnNpb24pfS9lbWJlZGRhYmxlLXNhbmRib3gudW1kLnByb2R1Y3Rpb24ubWluLmpzP3J1bnRpbWU9JHtlbmNvZGVVUklDb21wb25lbnQoYXBvbGxvU2VydmVyVmVyc2lvbil9XCI+PC9zY3JpcHQ+XG48c2NyaXB0IG5vbmNlPVwiJHtub25jZX1cIj5cbiAgdmFyIGluaXRpYWxFbmRwb2ludCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICB2YXIgZW1iZWRkZWRTYW5kYm94Q29uZmlnID0gJHtnZXRDb25maWdTdHJpbmdGb3JIdG1sKGVtYmVkZGVkU2FuZGJveENvbmZpZyl9O1xuICBuZXcgd2luZG93LkVtYmVkZGVkU2FuZGJveChcbiAgICB7XG4gICAgICAuLi5lbWJlZGRlZFNhbmRib3hDb25maWcsXG4gICAgICBpbml0aWFsRW5kcG9pbnQsXG4gICAgfVxuICApO1xuPC9zY3JpcHQ+XG5gO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldEVtYmVkZGVkSFRNTC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/landingPage/default/getEmbeddedHTML.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/landingPage/default/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/landingPage/default/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServerPluginLandingPageLocalDefault: () => (/* binding */ ApolloServerPluginLandingPageLocalDefault),\n/* harmony export */   ApolloServerPluginLandingPageProductionDefault: () => (/* binding */ ApolloServerPluginLandingPageProductionDefault),\n/* harmony export */   DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION: () => (/* binding */ DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION),\n/* harmony export */   DEFAULT_EMBEDDED_EXPLORER_VERSION: () => (/* binding */ DEFAULT_EMBEDDED_EXPLORER_VERSION),\n/* harmony export */   DEFAULT_EMBEDDED_SANDBOX_VERSION: () => (/* binding */ DEFAULT_EMBEDDED_SANDBOX_VERSION)\n/* harmony export */ });\n/* harmony import */ var _getEmbeddedHTML_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getEmbeddedHTML.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/landingPage/default/getEmbeddedHTML.js\");\n/* harmony import */ var _generated_packageVersion_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../generated/packageVersion.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/generated/packageVersion.js\");\n/* harmony import */ var _apollo_utils_createhash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @apollo/utils.createhash */ \"(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\nfunction ApolloServerPluginLandingPageLocalDefault(options = {}) {\n    const { version, __internal_apolloStudioEnv__, ...rest } = {\n        embed: true,\n        ...options,\n    };\n    return ApolloServerPluginLandingPageDefault(version, {\n        isProd: false,\n        apolloStudioEnv: __internal_apolloStudioEnv__,\n        ...rest,\n    });\n}\nfunction ApolloServerPluginLandingPageProductionDefault(options = {}) {\n    const { version, __internal_apolloStudioEnv__, ...rest } = options;\n    return ApolloServerPluginLandingPageDefault(version, {\n        isProd: true,\n        apolloStudioEnv: __internal_apolloStudioEnv__,\n        ...rest,\n    });\n}\nfunction encodeConfig(config) {\n    return JSON.stringify(encodeURIComponent(JSON.stringify(config)));\n}\nconst getNonEmbeddedLandingPageHTML = (cdnVersion, config, apolloServerVersion, nonce) => {\n    const encodedConfig = encodeConfig(config);\n    return `\n <div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>The full landing page cannot be loaded; it appears that you might be offline.</p>\n</div>\n<script nonce=\"${nonce}\">window.landingPage = ${encodedConfig};</script>\n<script nonce=\"${nonce}\" src=\"https://apollo-server-landing-page.cdn.apollographql.com/${encodeURIComponent(cdnVersion)}/static/js/main.js?runtime=${apolloServerVersion}\"></script>`;\n};\nconst DEFAULT_EMBEDDED_EXPLORER_VERSION = 'v3';\nconst DEFAULT_EMBEDDED_SANDBOX_VERSION = 'v2';\nconst DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION = '_latest';\nfunction ApolloServerPluginLandingPageDefault(maybeVersion, config) {\n    const explorerVersion = maybeVersion ?? DEFAULT_EMBEDDED_EXPLORER_VERSION;\n    const sandboxVersion = maybeVersion ?? DEFAULT_EMBEDDED_SANDBOX_VERSION;\n    const apolloServerLandingPageVersion = maybeVersion ?? DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION;\n    const apolloServerVersion = `@apollo/server@${_generated_packageVersion_js__WEBPACK_IMPORTED_MODULE_1__.packageVersion}`;\n    const scriptSafeList = [\n        'https://apollo-server-landing-page.cdn.apollographql.com',\n        'https://embeddable-sandbox.cdn.apollographql.com',\n        'https://embeddable-explorer.cdn.apollographql.com',\n    ].join(' ');\n    const styleSafeList = [\n        'https://apollo-server-landing-page.cdn.apollographql.com',\n        'https://embeddable-sandbox.cdn.apollographql.com',\n        'https://embeddable-explorer.cdn.apollographql.com',\n        'https://fonts.googleapis.com',\n    ].join(' ');\n    const iframeSafeList = [\n        'https://explorer.embed.apollographql.com',\n        'https://sandbox.embed.apollographql.com',\n        'https://embed.apollo.local:3000',\n    ].join(' ');\n    return {\n        __internal_installed_implicitly__: false,\n        async serverWillStart(server) {\n            if (config.precomputedNonce) {\n                server.logger.warn(\"The `precomputedNonce` landing page configuration option is deprecated. Removing this option is strictly an improvement to Apollo Server's landing page Content Security Policy (CSP) implementation for preventing XSS attacks.\");\n            }\n            return {\n                async renderLandingPage() {\n                    const encodedASLandingPageVersion = encodeURIComponent(apolloServerLandingPageVersion);\n                    async function html() {\n                        const nonce = config.precomputedNonce ??\n                            (0,_apollo_utils_createhash__WEBPACK_IMPORTED_MODULE_2__.createHash)('sha256').update((0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])()).digest('hex');\n                        const scriptCsp = `script-src 'self' 'nonce-${nonce}' ${scriptSafeList}`;\n                        const styleCsp = `style-src 'nonce-${nonce}' ${styleSafeList}`;\n                        const imageCsp = `img-src https://apollo-server-landing-page.cdn.apollographql.com`;\n                        const manifestCsp = `manifest-src https://apollo-server-landing-page.cdn.apollographql.com`;\n                        const frameCsp = `frame-src ${iframeSafeList}`;\n                        return `\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"Content-Security-Policy\" content=\"${scriptCsp}; ${styleCsp}; ${imageCsp}; ${manifestCsp}; ${frameCsp}\" />\n    <link\n      rel=\"icon\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${encodedASLandingPageVersion}/assets/favicon.png\"\n    />\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" />\n    <link\n      href=\"https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap\"\n      rel=\"stylesheet\"\n    />\n    <meta name=\"theme-color\" content=\"#000000\" />\n    <meta name=\"description\" content=\"Apollo server landing page\" />\n    <link\n      rel=\"apple-touch-icon\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${encodedASLandingPageVersion}/assets/favicon.png\"\n    />\n    <link\n      rel=\"manifest\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${encodedASLandingPageVersion}/manifest.json\"\n    />\n    <title>Apollo Server</title>\n  </head>\n  <body>\n    <noscript>You need to enable JavaScript to run this app.</noscript>\n    <div id=\"react-root\">\n      <style nonce=${nonce}>\n        body {\n          margin: 0;\n          overflow-x: hidden;\n          overflow-y: hidden;\n        }\n        .fallback {\n          opacity: 0;\n          animation: fadeIn 1s 1s;\n          animation-iteration-count: 1;\n          animation-fill-mode: forwards;\n          padding: 1em;\n        }\n        @keyframes fadeIn {\n          0% {opacity:0;}\n          100% {opacity:1; }\n        }\n      </style>\n    ${config.embed\n                            ? 'graphRef' in config && config.graphRef\n                                ? (0,_getEmbeddedHTML_js__WEBPACK_IMPORTED_MODULE_0__.getEmbeddedExplorerHTML)(explorerVersion, config, apolloServerVersion, nonce)\n                                : !('graphRef' in config)\n                                    ? (0,_getEmbeddedHTML_js__WEBPACK_IMPORTED_MODULE_0__.getEmbeddedSandboxHTML)(sandboxVersion, config, apolloServerVersion, nonce)\n                                    : getNonEmbeddedLandingPageHTML(apolloServerLandingPageVersion, config, apolloServerVersion, nonce)\n                            : getNonEmbeddedLandingPageHTML(apolloServerLandingPageVersion, config, apolloServerVersion, nonce)}\n    </div>\n  </body>\n</html>\n          `;\n                    }\n                    return { html };\n                },\n            };\n        },\n    };\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2xhbmRpbmdQYWdlL2RlZmF1bHQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdGO0FBQ2xCO0FBQ2hCO0FBQ2xCO0FBQzdCLCtEQUErRDtBQUN0RSxZQUFZLGlEQUFpRDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLG9FQUFvRTtBQUMzRSxZQUFZLGlEQUFpRDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSxpQkFBaUIsTUFBTSx5QkFBeUIsZUFBZTtBQUMvRCxpQkFBaUIsTUFBTSxrRUFBa0UsK0JBQStCLDZCQUE2QixvQkFBb0I7QUFDeks7QUFDTztBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx3RUFBYyxDQUFDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixvRUFBVSxrQkFBa0IsZ0RBQU07QUFDOUQsc0VBQXNFLE1BQU0sSUFBSSxlQUFlO0FBQy9GLDZEQUE2RCxNQUFNLElBQUksY0FBYztBQUNyRjtBQUNBO0FBQ0Esc0RBQXNELGVBQWU7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxZQUFZLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsU0FBUztBQUMzSDtBQUNBO0FBQ0EsdUVBQXVFLDRCQUE0QjtBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLDRCQUE0QjtBQUNuRztBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsNEJBQTRCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixNQUFNO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0Esa0NBQWtDLDRFQUF1QjtBQUN6RDtBQUNBLHNDQUFzQywyRUFBc0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL2xhbmRpbmdQYWdlL2RlZmF1bHQvaW5kZXguanM/MDhjNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRFbWJlZGRlZEV4cGxvcmVySFRNTCwgZ2V0RW1iZWRkZWRTYW5kYm94SFRNTCwgfSBmcm9tICcuL2dldEVtYmVkZGVkSFRNTC5qcyc7XG5pbXBvcnQgeyBwYWNrYWdlVmVyc2lvbiB9IGZyb20gJy4uLy4uLy4uL2dlbmVyYXRlZC9wYWNrYWdlVmVyc2lvbi5qcyc7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSAnQGFwb2xsby91dGlscy5jcmVhdGVoYXNoJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuZXhwb3J0IGZ1bmN0aW9uIEFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlTG9jYWxEZWZhdWx0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgdmVyc2lvbiwgX19pbnRlcm5hbF9hcG9sbG9TdHVkaW9FbnZfXywgLi4ucmVzdCB9ID0ge1xuICAgICAgICBlbWJlZDogdHJ1ZSxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICB9O1xuICAgIHJldHVybiBBcG9sbG9TZXJ2ZXJQbHVnaW5MYW5kaW5nUGFnZURlZmF1bHQodmVyc2lvbiwge1xuICAgICAgICBpc1Byb2Q6IGZhbHNlLFxuICAgICAgICBhcG9sbG9TdHVkaW9FbnY6IF9faW50ZXJuYWxfYXBvbGxvU3R1ZGlvRW52X18sXG4gICAgICAgIC4uLnJlc3QsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gQXBvbGxvU2VydmVyUGx1Z2luTGFuZGluZ1BhZ2VQcm9kdWN0aW9uRGVmYXVsdChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IHZlcnNpb24sIF9faW50ZXJuYWxfYXBvbGxvU3R1ZGlvRW52X18sIC4uLnJlc3QgfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIEFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlRGVmYXVsdCh2ZXJzaW9uLCB7XG4gICAgICAgIGlzUHJvZDogdHJ1ZSxcbiAgICAgICAgYXBvbGxvU3R1ZGlvRW52OiBfX2ludGVybmFsX2Fwb2xsb1N0dWRpb0Vudl9fLFxuICAgICAgICAuLi5yZXN0LFxuICAgIH0pO1xufVxuZnVuY3Rpb24gZW5jb2RlQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSkpO1xufVxuY29uc3QgZ2V0Tm9uRW1iZWRkZWRMYW5kaW5nUGFnZUhUTUwgPSAoY2RuVmVyc2lvbiwgY29uZmlnLCBhcG9sbG9TZXJ2ZXJWZXJzaW9uLCBub25jZSkgPT4ge1xuICAgIGNvbnN0IGVuY29kZWRDb25maWcgPSBlbmNvZGVDb25maWcoY29uZmlnKTtcbiAgICByZXR1cm4gYFxuIDxkaXYgY2xhc3M9XCJmYWxsYmFja1wiPlxuICA8aDE+V2VsY29tZSB0byBBcG9sbG8gU2VydmVyPC9oMT5cbiAgPHA+VGhlIGZ1bGwgbGFuZGluZyBwYWdlIGNhbm5vdCBiZSBsb2FkZWQ7IGl0IGFwcGVhcnMgdGhhdCB5b3UgbWlnaHQgYmUgb2ZmbGluZS48L3A+XG48L2Rpdj5cbjxzY3JpcHQgbm9uY2U9XCIke25vbmNlfVwiPndpbmRvdy5sYW5kaW5nUGFnZSA9ICR7ZW5jb2RlZENvbmZpZ307PC9zY3JpcHQ+XG48c2NyaXB0IG5vbmNlPVwiJHtub25jZX1cIiBzcmM9XCJodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbS8ke2VuY29kZVVSSUNvbXBvbmVudChjZG5WZXJzaW9uKX0vc3RhdGljL2pzL21haW4uanM/cnVudGltZT0ke2Fwb2xsb1NlcnZlclZlcnNpb259XCI+PC9zY3JpcHQ+YDtcbn07XG5leHBvcnQgY29uc3QgREVGQVVMVF9FTUJFRERFRF9FWFBMT1JFUl9WRVJTSU9OID0gJ3YzJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX0VNQkVEREVEX1NBTkRCT1hfVkVSU0lPTiA9ICd2Mic7XG5leHBvcnQgY29uc3QgREVGQVVMVF9BUE9MTE9fU0VSVkVSX0xBTkRJTkdfUEFHRV9WRVJTSU9OID0gJ19sYXRlc3QnO1xuZnVuY3Rpb24gQXBvbGxvU2VydmVyUGx1Z2luTGFuZGluZ1BhZ2VEZWZhdWx0KG1heWJlVmVyc2lvbiwgY29uZmlnKSB7XG4gICAgY29uc3QgZXhwbG9yZXJWZXJzaW9uID0gbWF5YmVWZXJzaW9uID8/IERFRkFVTFRfRU1CRURERURfRVhQTE9SRVJfVkVSU0lPTjtcbiAgICBjb25zdCBzYW5kYm94VmVyc2lvbiA9IG1heWJlVmVyc2lvbiA/PyBERUZBVUxUX0VNQkVEREVEX1NBTkRCT1hfVkVSU0lPTjtcbiAgICBjb25zdCBhcG9sbG9TZXJ2ZXJMYW5kaW5nUGFnZVZlcnNpb24gPSBtYXliZVZlcnNpb24gPz8gREVGQVVMVF9BUE9MTE9fU0VSVkVSX0xBTkRJTkdfUEFHRV9WRVJTSU9OO1xuICAgIGNvbnN0IGFwb2xsb1NlcnZlclZlcnNpb24gPSBgQGFwb2xsby9zZXJ2ZXJAJHtwYWNrYWdlVmVyc2lvbn1gO1xuICAgIGNvbnN0IHNjcmlwdFNhZmVMaXN0ID0gW1xuICAgICAgICAnaHR0cHM6Ly9hcG9sbG8tc2VydmVyLWxhbmRpbmctcGFnZS5jZG4uYXBvbGxvZ3JhcGhxbC5jb20nLFxuICAgICAgICAnaHR0cHM6Ly9lbWJlZGRhYmxlLXNhbmRib3guY2RuLmFwb2xsb2dyYXBocWwuY29tJyxcbiAgICAgICAgJ2h0dHBzOi8vZW1iZWRkYWJsZS1leHBsb3Jlci5jZG4uYXBvbGxvZ3JhcGhxbC5jb20nLFxuICAgIF0uam9pbignICcpO1xuICAgIGNvbnN0IHN0eWxlU2FmZUxpc3QgPSBbXG4gICAgICAgICdodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbScsXG4gICAgICAgICdodHRwczovL2VtYmVkZGFibGUtc2FuZGJveC5jZG4uYXBvbGxvZ3JhcGhxbC5jb20nLFxuICAgICAgICAnaHR0cHM6Ly9lbWJlZGRhYmxlLWV4cGxvcmVyLmNkbi5hcG9sbG9ncmFwaHFsLmNvbScsXG4gICAgICAgICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tJyxcbiAgICBdLmpvaW4oJyAnKTtcbiAgICBjb25zdCBpZnJhbWVTYWZlTGlzdCA9IFtcbiAgICAgICAgJ2h0dHBzOi8vZXhwbG9yZXIuZW1iZWQuYXBvbGxvZ3JhcGhxbC5jb20nLFxuICAgICAgICAnaHR0cHM6Ly9zYW5kYm94LmVtYmVkLmFwb2xsb2dyYXBocWwuY29tJyxcbiAgICAgICAgJ2h0dHBzOi8vZW1iZWQuYXBvbGxvLmxvY2FsOjMwMDAnLFxuICAgIF0uam9pbignICcpO1xuICAgIHJldHVybiB7XG4gICAgICAgIF9faW50ZXJuYWxfaW5zdGFsbGVkX2ltcGxpY2l0bHlfXzogZmFsc2UsXG4gICAgICAgIGFzeW5jIHNlcnZlcldpbGxTdGFydChzZXJ2ZXIpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcucHJlY29tcHV0ZWROb25jZSkge1xuICAgICAgICAgICAgICAgIHNlcnZlci5sb2dnZXIud2FybihcIlRoZSBgcHJlY29tcHV0ZWROb25jZWAgbGFuZGluZyBwYWdlIGNvbmZpZ3VyYXRpb24gb3B0aW9uIGlzIGRlcHJlY2F0ZWQuIFJlbW92aW5nIHRoaXMgb3B0aW9uIGlzIHN0cmljdGx5IGFuIGltcHJvdmVtZW50IHRvIEFwb2xsbyBTZXJ2ZXIncyBsYW5kaW5nIHBhZ2UgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgKENTUCkgaW1wbGVtZW50YXRpb24gZm9yIHByZXZlbnRpbmcgWFNTIGF0dGFja3MuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhc3luYyByZW5kZXJMYW5kaW5nUGFnZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jb2RlZEFTTGFuZGluZ1BhZ2VWZXJzaW9uID0gZW5jb2RlVVJJQ29tcG9uZW50KGFwb2xsb1NlcnZlckxhbmRpbmdQYWdlVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGh0bWwoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub25jZSA9IGNvbmZpZy5wcmVjb21wdXRlZE5vbmNlID8/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHV1aWR2NCgpKS5kaWdlc3QoJ2hleCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NyaXB0Q3NwID0gYHNjcmlwdC1zcmMgJ3NlbGYnICdub25jZS0ke25vbmNlfScgJHtzY3JpcHRTYWZlTGlzdH1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVDc3AgPSBgc3R5bGUtc3JjICdub25jZS0ke25vbmNlfScgJHtzdHlsZVNhZmVMaXN0fWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZUNzcCA9IGBpbWctc3JjIGh0dHBzOi8vYXBvbGxvLXNlcnZlci1sYW5kaW5nLXBhZ2UuY2RuLmFwb2xsb2dyYXBocWwuY29tYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hbmlmZXN0Q3NwID0gYG1hbmlmZXN0LXNyYyBodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFtZUNzcCA9IGBmcmFtZS1zcmMgJHtpZnJhbWVTYWZlTGlzdH1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBcbjwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cImVuXCI+XG4gIDxoZWFkPlxuICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiIC8+XG4gICAgPG1ldGEgaHR0cC1lcXVpdj1cIkNvbnRlbnQtU2VjdXJpdHktUG9saWN5XCIgY29udGVudD1cIiR7c2NyaXB0Q3NwfTsgJHtzdHlsZUNzcH07ICR7aW1hZ2VDc3B9OyAke21hbmlmZXN0Q3NwfTsgJHtmcmFtZUNzcH1cIiAvPlxuICAgIDxsaW5rXG4gICAgICByZWw9XCJpY29uXCJcbiAgICAgIGhyZWY9XCJodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbS8ke2VuY29kZWRBU0xhbmRpbmdQYWdlVmVyc2lvbn0vYXNzZXRzL2Zhdmljb24ucG5nXCJcbiAgICAvPlxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsaW5pdGlhbC1zY2FsZT0xXCIgLz5cbiAgICA8bGluayByZWw9XCJwcmVjb25uZWN0XCIgaHJlZj1cImh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb21cIiAvPlxuICAgIDxsaW5rXG4gICAgICBocmVmPVwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Tb3VyY2UrU2FucytQcm8mZGlzcGxheT1zd2FwXCJcbiAgICAgIHJlbD1cInN0eWxlc2hlZXRcIlxuICAgIC8+XG4gICAgPG1ldGEgbmFtZT1cInRoZW1lLWNvbG9yXCIgY29udGVudD1cIiMwMDAwMDBcIiAvPlxuICAgIDxtZXRhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCJBcG9sbG8gc2VydmVyIGxhbmRpbmcgcGFnZVwiIC8+XG4gICAgPGxpbmtcbiAgICAgIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIlxuICAgICAgaHJlZj1cImh0dHBzOi8vYXBvbGxvLXNlcnZlci1sYW5kaW5nLXBhZ2UuY2RuLmFwb2xsb2dyYXBocWwuY29tLyR7ZW5jb2RlZEFTTGFuZGluZ1BhZ2VWZXJzaW9ufS9hc3NldHMvZmF2aWNvbi5wbmdcIlxuICAgIC8+XG4gICAgPGxpbmtcbiAgICAgIHJlbD1cIm1hbmlmZXN0XCJcbiAgICAgIGhyZWY9XCJodHRwczovL2Fwb2xsby1zZXJ2ZXItbGFuZGluZy1wYWdlLmNkbi5hcG9sbG9ncmFwaHFsLmNvbS8ke2VuY29kZWRBU0xhbmRpbmdQYWdlVmVyc2lvbn0vbWFuaWZlc3QuanNvblwiXG4gICAgLz5cbiAgICA8dGl0bGU+QXBvbGxvIFNlcnZlcjwvdGl0bGU+XG4gIDwvaGVhZD5cbiAgPGJvZHk+XG4gICAgPG5vc2NyaXB0PllvdSBuZWVkIHRvIGVuYWJsZSBKYXZhU2NyaXB0IHRvIHJ1biB0aGlzIGFwcC48L25vc2NyaXB0PlxuICAgIDxkaXYgaWQ9XCJyZWFjdC1yb290XCI+XG4gICAgICA8c3R5bGUgbm9uY2U9JHtub25jZX0+XG4gICAgICAgIGJvZHkge1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgICAgICAgb3ZlcmZsb3cteTogaGlkZGVuO1xuICAgICAgICB9XG4gICAgICAgIC5mYWxsYmFjayB7XG4gICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICBhbmltYXRpb246IGZhZGVJbiAxcyAxcztcbiAgICAgICAgICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiAxO1xuICAgICAgICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xuICAgICAgICAgIHBhZGRpbmc6IDFlbTtcbiAgICAgICAgfVxuICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7XG4gICAgICAgICAgMCUge29wYWNpdHk6MDt9XG4gICAgICAgICAgMTAwJSB7b3BhY2l0eToxOyB9XG4gICAgICAgIH1cbiAgICAgIDwvc3R5bGU+XG4gICAgJHtjb25maWcuZW1iZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdncmFwaFJlZicgaW4gY29uZmlnICYmIGNvbmZpZy5ncmFwaFJlZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdldEVtYmVkZGVkRXhwbG9yZXJIVE1MKGV4cGxvcmVyVmVyc2lvbiwgY29uZmlnLCBhcG9sbG9TZXJ2ZXJWZXJzaW9uLCBub25jZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAhKCdncmFwaFJlZicgaW4gY29uZmlnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRFbWJlZGRlZFNhbmRib3hIVE1MKHNhbmRib3hWZXJzaW9uLCBjb25maWcsIGFwb2xsb1NlcnZlclZlcnNpb24sIG5vbmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXROb25FbWJlZGRlZExhbmRpbmdQYWdlSFRNTChhcG9sbG9TZXJ2ZXJMYW5kaW5nUGFnZVZlcnNpb24sIGNvbmZpZywgYXBvbGxvU2VydmVyVmVyc2lvbiwgbm9uY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXROb25FbWJlZGRlZExhbmRpbmdQYWdlSFRNTChhcG9sbG9TZXJ2ZXJMYW5kaW5nUGFnZVZlcnNpb24sIGNvbmZpZywgYXBvbGxvU2VydmVyVmVyc2lvbiwgbm9uY2UpfVxuICAgIDwvZGl2PlxuICA8L2JvZHk+XG48L2h0bWw+XG4gICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBodG1sIH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/landingPage/default/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaIsSubgraph.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/schemaIsSubgraph.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schemaIsSubgraph: () => (/* binding */ schemaIsSubgraph)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/type/definition.mjs\");\n\nfunction schemaIsSubgraph(schema) {\n    const serviceType = schema.getType('_Service');\n    if (!(0,graphql__WEBPACK_IMPORTED_MODULE_0__.isObjectType)(serviceType)) {\n        return false;\n    }\n    const sdlField = serviceType.getFields().sdl;\n    if (!sdlField) {\n        return false;\n    }\n    let sdlFieldType = sdlField.type;\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_0__.isNonNullType)(sdlFieldType)) {\n        sdlFieldType = sdlFieldType.ofType;\n    }\n    if (!(0,graphql__WEBPACK_IMPORTED_MODULE_0__.isScalarType)(sdlFieldType)) {\n        return false;\n    }\n    return sdlFieldType.name == 'String';\n}\n//# sourceMappingURL=schemaIsSubgraph.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3NjaGVtYUlzU3ViZ3JhcGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUU7QUFDOUQ7QUFDUDtBQUNBLFNBQVMscURBQVk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFhO0FBQ3JCO0FBQ0E7QUFDQSxTQUFTLHFEQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL3BsdWdpbi9zY2hlbWFJc1N1YmdyYXBoLmpzPzFlNmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNPYmplY3RUeXBlLCBpc1NjYWxhclR5cGUsIGlzTm9uTnVsbFR5cGUsIH0gZnJvbSAnZ3JhcGhxbCc7XG5leHBvcnQgZnVuY3Rpb24gc2NoZW1hSXNTdWJncmFwaChzY2hlbWEpIHtcbiAgICBjb25zdCBzZXJ2aWNlVHlwZSA9IHNjaGVtYS5nZXRUeXBlKCdfU2VydmljZScpO1xuICAgIGlmICghaXNPYmplY3RUeXBlKHNlcnZpY2VUeXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHNkbEZpZWxkID0gc2VydmljZVR5cGUuZ2V0RmllbGRzKCkuc2RsO1xuICAgIGlmICghc2RsRmllbGQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBsZXQgc2RsRmllbGRUeXBlID0gc2RsRmllbGQudHlwZTtcbiAgICBpZiAoaXNOb25OdWxsVHlwZShzZGxGaWVsZFR5cGUpKSB7XG4gICAgICAgIHNkbEZpZWxkVHlwZSA9IHNkbEZpZWxkVHlwZS5vZlR5cGU7XG4gICAgfVxuICAgIGlmICghaXNTY2FsYXJUeXBlKHNkbEZpZWxkVHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc2RsRmllbGRUeXBlLm5hbWUgPT0gJ1N0cmluZyc7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWFJc1N1YmdyYXBoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaIsSubgraph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaReporting/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/schemaReporting/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServerPluginSchemaReporting: () => (/* binding */ ApolloServerPluginSchemaReporting)\n/* harmony export */ });\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! os */ \"os\");\n/* harmony import */ var _internalPlugin_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalPlugin.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/type/validate.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/utilities/buildASTSchema.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/utilities/printSchema.mjs\");\n/* harmony import */ var _schemaReporter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schemaReporter.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaReporting/schemaReporter.js\");\n/* harmony import */ var _schemaIsSubgraph_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../schemaIsSubgraph.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaIsSubgraph.js\");\n/* harmony import */ var _generated_packageVersion_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../generated/packageVersion.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/generated/packageVersion.js\");\n/* harmony import */ var _utils_computeCoreSchemaHash_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/computeCoreSchemaHash.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/computeCoreSchemaHash.js\");\n\n\n\n\n\n\n\n\nfunction ApolloServerPluginSchemaReporting({ initialDelayMaxMs, overrideReportedSchema, endpointUrl, fetcher, } = Object.create(null)) {\n    const bootId = (0,uuid__WEBPACK_IMPORTED_MODULE_6__[\"default\"])();\n    return (0,_internalPlugin_js__WEBPACK_IMPORTED_MODULE_1__.internalPlugin)({\n        __internal_plugin_id__: 'SchemaReporting',\n        __is_disabled_plugin__: false,\n        async serverWillStart({ apollo, schema, logger }) {\n            const { key, graphRef } = apollo;\n            if (!key) {\n                throw Error('To use ApolloServerPluginSchemaReporting, you must provide an Apollo API ' +\n                    'key, via the APOLLO_KEY environment variable or via `new ApolloServer({apollo: {key})`');\n            }\n            if (!graphRef) {\n                throw Error('To use ApolloServerPluginSchemaReporting, you must provide your graph ref (eg, ' +\n                    \"'my-graph-id@my-graph-variant'). Try setting the APOLLO_GRAPH_REF environment \" +\n                    'variable or passing `new ApolloServer({apollo: {graphRef}})`.');\n            }\n            if (overrideReportedSchema) {\n                try {\n                    const validationErrors = (0,graphql__WEBPACK_IMPORTED_MODULE_7__.validateSchema)((0,graphql__WEBPACK_IMPORTED_MODULE_8__.buildSchema)(overrideReportedSchema, { noLocation: true }));\n                    if (validationErrors.length) {\n                        throw new Error(validationErrors.map((error) => error.message).join('\\n'));\n                    }\n                }\n                catch (err) {\n                    throw new Error('The schema provided to overrideReportedSchema failed to parse or ' +\n                        `validate: ${err.message}`);\n                }\n            }\n            if ((0,_schemaIsSubgraph_js__WEBPACK_IMPORTED_MODULE_3__.schemaIsSubgraph)(schema)) {\n                throw Error([\n                    'Schema reporting is not yet compatible with Apollo Federation subgraphs.',\n                    \"If you're interested in using schema reporting with subgraphs,\",\n                    'please contact Apollo support. To set up managed federation, see',\n                    'https://go.apollo.dev/s/managed-federation',\n                ].join(' '));\n            }\n            if (endpointUrl !== undefined) {\n                logger.info(`Apollo schema reporting: schema reporting URL override: ${endpointUrl}`);\n            }\n            const baseSchemaReport = {\n                bootId,\n                graphRef,\n                platform: process.env.APOLLO_SERVER_PLATFORM || 'local',\n                runtimeVersion: `node ${process.version}`,\n                userVersion: process.env.APOLLO_SERVER_USER_VERSION,\n                serverId: process.env.APOLLO_SERVER_ID || process.env.HOSTNAME || os__WEBPACK_IMPORTED_MODULE_0__.hostname(),\n                libraryVersion: `@apollo/server@${_generated_packageVersion_js__WEBPACK_IMPORTED_MODULE_4__.packageVersion}`,\n            };\n            let currentSchemaReporter;\n            return {\n                schemaDidLoadOrUpdate({ apiSchema, coreSupergraphSdl }) {\n                    if (overrideReportedSchema !== undefined) {\n                        if (currentSchemaReporter) {\n                            return;\n                        }\n                        else {\n                            logger.info('Apollo schema reporting: schema to report has been overridden');\n                        }\n                    }\n                    const coreSchema = overrideReportedSchema ??\n                        coreSupergraphSdl ??\n                        (0,graphql__WEBPACK_IMPORTED_MODULE_9__.printSchema)(apiSchema);\n                    const coreSchemaHash = (0,_utils_computeCoreSchemaHash_js__WEBPACK_IMPORTED_MODULE_5__.computeCoreSchemaHash)(coreSchema);\n                    const schemaReport = {\n                        ...baseSchemaReport,\n                        coreSchemaHash,\n                    };\n                    currentSchemaReporter?.stop();\n                    currentSchemaReporter = new _schemaReporter_js__WEBPACK_IMPORTED_MODULE_2__.SchemaReporter({\n                        schemaReport,\n                        coreSchema,\n                        apiKey: key,\n                        endpointUrl,\n                        logger,\n                        initialReportingDelayInMs: Math.floor(Math.random() * (initialDelayMaxMs ?? 10000)),\n                        fallbackReportingDelayInMs: 20000,\n                        fetcher,\n                    });\n                    currentSchemaReporter.start();\n                    logger.info('Apollo schema reporting: reporting a new schema to Studio! See your graph at ' +\n                        `https://studio.apollographql.com/graph/${encodeURI(graphRef)}/ with server info ${JSON.stringify(schemaReport)}`);\n                },\n                async serverWillStop() {\n                    currentSchemaReporter?.stop();\n                },\n            };\n        },\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3NjaGVtYVJlcG9ydGluZy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNxQztBQUNyQjtBQUMrQjtBQUNkO0FBQ0s7QUFDUztBQUNVO0FBQ3RFLDZDQUE2QyxtRUFBbUU7QUFDdkgsbUJBQW1CLGdEQUFNO0FBQ3pCLFdBQVcsa0VBQWM7QUFDekI7QUFDQTtBQUNBLGdDQUFnQyx3QkFBd0I7QUFDeEQsb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0EsNEZBQTRGLFNBQVMsSUFBSTtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxTQUFTLFVBQVU7QUFDL0U7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHVEQUFjLENBQUMsb0RBQVcsMkJBQTJCLGtCQUFrQjtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsWUFBWTtBQUNqRDtBQUNBO0FBQ0EsZ0JBQWdCLHNFQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLFlBQVk7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnQkFBZ0I7QUFDeEQ7QUFDQSxrRkFBa0Ysd0NBQVc7QUFDN0Ysa0RBQWtELHdFQUFjLENBQUM7QUFDakU7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDhCQUE4QjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvREFBVztBQUNuQywyQ0FBMkMsc0ZBQXFCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsOERBQWM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0Esa0VBQWtFLG9CQUFvQixxQkFBcUIsNkJBQTZCO0FBQ3hJLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9wbHVnaW4vc2NoZW1hUmVwb3J0aW5nL2luZGV4LmpzPzdlMTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9zIGZyb20gJ29zJztcbmltcG9ydCB7IGludGVybmFsUGx1Z2luIH0gZnJvbSAnLi4vLi4vaW50ZXJuYWxQbHVnaW4uanMnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBwcmludFNjaGVtYSwgdmFsaWRhdGVTY2hlbWEsIGJ1aWxkU2NoZW1hIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBTY2hlbWFSZXBvcnRlciB9IGZyb20gJy4vc2NoZW1hUmVwb3J0ZXIuanMnO1xuaW1wb3J0IHsgc2NoZW1hSXNTdWJncmFwaCB9IGZyb20gJy4uL3NjaGVtYUlzU3ViZ3JhcGguanMnO1xuaW1wb3J0IHsgcGFja2FnZVZlcnNpb24gfSBmcm9tICcuLi8uLi9nZW5lcmF0ZWQvcGFja2FnZVZlcnNpb24uanMnO1xuaW1wb3J0IHsgY29tcHV0ZUNvcmVTY2hlbWFIYXNoIH0gZnJvbSAnLi4vLi4vdXRpbHMvY29tcHV0ZUNvcmVTY2hlbWFIYXNoLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBBcG9sbG9TZXJ2ZXJQbHVnaW5TY2hlbWFSZXBvcnRpbmcoeyBpbml0aWFsRGVsYXlNYXhNcywgb3ZlcnJpZGVSZXBvcnRlZFNjaGVtYSwgZW5kcG9pbnRVcmwsIGZldGNoZXIsIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpKSB7XG4gICAgY29uc3QgYm9vdElkID0gdXVpZHY0KCk7XG4gICAgcmV0dXJuIGludGVybmFsUGx1Z2luKHtcbiAgICAgICAgX19pbnRlcm5hbF9wbHVnaW5faWRfXzogJ1NjaGVtYVJlcG9ydGluZycsXG4gICAgICAgIF9faXNfZGlzYWJsZWRfcGx1Z2luX186IGZhbHNlLFxuICAgICAgICBhc3luYyBzZXJ2ZXJXaWxsU3RhcnQoeyBhcG9sbG8sIHNjaGVtYSwgbG9nZ2VyIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCBncmFwaFJlZiB9ID0gYXBvbGxvO1xuICAgICAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignVG8gdXNlIEFwb2xsb1NlcnZlclBsdWdpblNjaGVtYVJlcG9ydGluZywgeW91IG11c3QgcHJvdmlkZSBhbiBBcG9sbG8gQVBJICcgK1xuICAgICAgICAgICAgICAgICAgICAna2V5LCB2aWEgdGhlIEFQT0xMT19LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgb3IgdmlhIGBuZXcgQXBvbGxvU2VydmVyKHthcG9sbG86IHtrZXl9KWAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ3JhcGhSZWYpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignVG8gdXNlIEFwb2xsb1NlcnZlclBsdWdpblNjaGVtYVJlcG9ydGluZywgeW91IG11c3QgcHJvdmlkZSB5b3VyIGdyYXBoIHJlZiAoZWcsICcgK1xuICAgICAgICAgICAgICAgICAgICBcIidteS1ncmFwaC1pZEBteS1ncmFwaC12YXJpYW50JykuIFRyeSBzZXR0aW5nIHRoZSBBUE9MTE9fR1JBUEhfUkVGIGVudmlyb25tZW50IFwiICtcbiAgICAgICAgICAgICAgICAgICAgJ3ZhcmlhYmxlIG9yIHBhc3NpbmcgYG5ldyBBcG9sbG9TZXJ2ZXIoe2Fwb2xsbzoge2dyYXBoUmVmfX0pYC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdmVycmlkZVJlcG9ydGVkU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IHZhbGlkYXRlU2NoZW1hKGJ1aWxkU2NoZW1hKG92ZXJyaWRlUmVwb3J0ZWRTY2hlbWEsIHsgbm9Mb2NhdGlvbjogdHJ1ZSB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHZhbGlkYXRpb25FcnJvcnMubWFwKChlcnJvcikgPT4gZXJyb3IubWVzc2FnZSkuam9pbignXFxuJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2NoZW1hIHByb3ZpZGVkIHRvIG92ZXJyaWRlUmVwb3J0ZWRTY2hlbWEgZmFpbGVkIHRvIHBhcnNlIG9yICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHZhbGlkYXRlOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzY2hlbWFJc1N1YmdyYXBoKHNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihbXG4gICAgICAgICAgICAgICAgICAgICdTY2hlbWEgcmVwb3J0aW5nIGlzIG5vdCB5ZXQgY29tcGF0aWJsZSB3aXRoIEFwb2xsbyBGZWRlcmF0aW9uIHN1YmdyYXBocy4nLFxuICAgICAgICAgICAgICAgICAgICBcIklmIHlvdSdyZSBpbnRlcmVzdGVkIGluIHVzaW5nIHNjaGVtYSByZXBvcnRpbmcgd2l0aCBzdWJncmFwaHMsXCIsXG4gICAgICAgICAgICAgICAgICAgICdwbGVhc2UgY29udGFjdCBBcG9sbG8gc3VwcG9ydC4gVG8gc2V0IHVwIG1hbmFnZWQgZmVkZXJhdGlvbiwgc2VlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vZ28uYXBvbGxvLmRldi9zL21hbmFnZWQtZmVkZXJhdGlvbicsXG4gICAgICAgICAgICAgICAgXS5qb2luKCcgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVuZHBvaW50VXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgQXBvbGxvIHNjaGVtYSByZXBvcnRpbmc6IHNjaGVtYSByZXBvcnRpbmcgVVJMIG92ZXJyaWRlOiAke2VuZHBvaW50VXJsfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYmFzZVNjaGVtYVJlcG9ydCA9IHtcbiAgICAgICAgICAgICAgICBib290SWQsXG4gICAgICAgICAgICAgICAgZ3JhcGhSZWYsXG4gICAgICAgICAgICAgICAgcGxhdGZvcm06IHByb2Nlc3MuZW52LkFQT0xMT19TRVJWRVJfUExBVEZPUk0gfHwgJ2xvY2FsJyxcbiAgICAgICAgICAgICAgICBydW50aW1lVmVyc2lvbjogYG5vZGUgJHtwcm9jZXNzLnZlcnNpb259YCxcbiAgICAgICAgICAgICAgICB1c2VyVmVyc2lvbjogcHJvY2Vzcy5lbnYuQVBPTExPX1NFUlZFUl9VU0VSX1ZFUlNJT04sXG4gICAgICAgICAgICAgICAgc2VydmVySWQ6IHByb2Nlc3MuZW52LkFQT0xMT19TRVJWRVJfSUQgfHwgcHJvY2Vzcy5lbnYuSE9TVE5BTUUgfHwgb3MuaG9zdG5hbWUoKSxcbiAgICAgICAgICAgICAgICBsaWJyYXJ5VmVyc2lvbjogYEBhcG9sbG8vc2VydmVyQCR7cGFja2FnZVZlcnNpb259YCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgY3VycmVudFNjaGVtYVJlcG9ydGVyO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzY2hlbWFEaWRMb2FkT3JVcGRhdGUoeyBhcGlTY2hlbWEsIGNvcmVTdXBlcmdyYXBoU2RsIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJyaWRlUmVwb3J0ZWRTY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTY2hlbWFSZXBvcnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdBcG9sbG8gc2NoZW1hIHJlcG9ydGluZzogc2NoZW1hIHRvIHJlcG9ydCBoYXMgYmVlbiBvdmVycmlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29yZVNjaGVtYSA9IG92ZXJyaWRlUmVwb3J0ZWRTY2hlbWEgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVTdXBlcmdyYXBoU2RsID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmludFNjaGVtYShhcGlTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3JlU2NoZW1hSGFzaCA9IGNvbXB1dGVDb3JlU2NoZW1hSGFzaChjb3JlU2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NoZW1hUmVwb3J0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uYmFzZVNjaGVtYVJlcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVTY2hlbWFIYXNoLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NoZW1hUmVwb3J0ZXI/LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjaGVtYVJlcG9ydGVyID0gbmV3IFNjaGVtYVJlcG9ydGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYVJlcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXk6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50VXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFJlcG9ydGluZ0RlbGF5SW5NczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGluaXRpYWxEZWxheU1heE1zID8/IDEwMDAwKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWxsYmFja1JlcG9ydGluZ0RlbGF5SW5NczogMjAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGVyLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjaGVtYVJlcG9ydGVyLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdBcG9sbG8gc2NoZW1hIHJlcG9ydGluZzogcmVwb3J0aW5nIGEgbmV3IHNjaGVtYSB0byBTdHVkaW8hIFNlZSB5b3VyIGdyYXBoIGF0ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGh0dHBzOi8vc3R1ZGlvLmFwb2xsb2dyYXBocWwuY29tL2dyYXBoLyR7ZW5jb2RlVVJJKGdyYXBoUmVmKX0vIHdpdGggc2VydmVyIGluZm8gJHtKU09OLnN0cmluZ2lmeShzY2hlbWFSZXBvcnQpfWApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXN5bmMgc2VydmVyV2lsbFN0b3AoKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlbWFSZXBvcnRlcj8uc3RvcCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaReporting/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaReporting/schemaReporter.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/schemaReporting/schemaReporter.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SchemaReporter: () => (/* binding */ SchemaReporter),\n/* harmony export */   schemaReportGql: () => (/* binding */ schemaReportGql)\n/* harmony export */ });\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node-fetch */ \"(rsc)/./node_modules/node-fetch/lib/index.mjs\");\n/* harmony import */ var _generated_packageVersion_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../generated/packageVersion.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/generated/packageVersion.js\");\n\n\nconst schemaReportGql = `#graphql\n  mutation SchemaReport($report: SchemaReport!, $coreSchema: String) {\n    reportSchema(report: $report, coreSchema: $coreSchema) {\n      __typename\n      ... on ReportSchemaError {\n        message\n        code\n      }\n      ... on ReportSchemaResponse {\n        inSeconds\n        withCoreSchema\n      }\n    }\n  }\n`;\nclass SchemaReporter {\n    constructor(options) {\n        this.headers = {\n            'Content-Type': 'application/json',\n            'x-api-key': options.apiKey,\n            'apollographql-client-name': 'ApolloServerPluginSchemaReporting',\n            'apollographql-client-version': _generated_packageVersion_js__WEBPACK_IMPORTED_MODULE_1__.packageVersion,\n        };\n        this.endpointUrl =\n            options.endpointUrl ||\n                'https://schema-reporting.api.apollographql.com/api/graphql';\n        this.schemaReport = options.schemaReport;\n        this.coreSchema = options.coreSchema;\n        this.isStopped = false;\n        this.logger = options.logger;\n        this.initialReportingDelayInMs = options.initialReportingDelayInMs;\n        this.fallbackReportingDelayInMs = options.fallbackReportingDelayInMs;\n        this.fetcher = options.fetcher ?? node_fetch__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n    }\n    stopped() {\n        return this.isStopped;\n    }\n    start() {\n        this.pollTimer = setTimeout(() => this.sendOneReportAndScheduleNext(false), this.initialReportingDelayInMs);\n    }\n    stop() {\n        this.isStopped = true;\n        if (this.pollTimer) {\n            clearTimeout(this.pollTimer);\n            this.pollTimer = undefined;\n        }\n    }\n    async sendOneReportAndScheduleNext(sendNextWithCoreSchema) {\n        this.pollTimer = undefined;\n        if (this.stopped())\n            return;\n        try {\n            const result = await this.reportSchema(sendNextWithCoreSchema);\n            if (!result) {\n                return;\n            }\n            if (!this.stopped()) {\n                this.pollTimer = setTimeout(() => this.sendOneReportAndScheduleNext(result.withCoreSchema), result.inSeconds * 1000);\n            }\n            return;\n        }\n        catch (error) {\n            this.logger.error(`Error reporting server info to Apollo during schema reporting: ${error}`);\n            if (!this.stopped()) {\n                this.pollTimer = setTimeout(() => this.sendOneReportAndScheduleNext(false), this.fallbackReportingDelayInMs);\n            }\n        }\n    }\n    async reportSchema(withCoreSchema) {\n        const { data, errors } = await this.apolloQuery({\n            report: this.schemaReport,\n            coreSchema: withCoreSchema ? this.coreSchema : null,\n        });\n        if (errors) {\n            throw new Error(errors.map((x) => x.message).join('\\n'));\n        }\n        function msgForUnexpectedResponse(data) {\n            return [\n                'Unexpected response shape from Apollo when',\n                'reporting schema. If this continues, please reach',\n                'out to support@apollographql.com.',\n                'Received response:',\n                JSON.stringify(data),\n            ].join(' ');\n        }\n        if (!data || !data.reportSchema) {\n            throw new Error(msgForUnexpectedResponse(data));\n        }\n        if (data.reportSchema.__typename === 'ReportSchemaResponse') {\n            return data.reportSchema;\n        }\n        else if (data.reportSchema.__typename === 'ReportSchemaError') {\n            this.logger.error([\n                'Received input validation error from Apollo:',\n                data.reportSchema.message,\n                'Stopping reporting. Please fix the input errors.',\n            ].join(' '));\n            this.stop();\n            return null;\n        }\n        throw new Error(msgForUnexpectedResponse(data));\n    }\n    async apolloQuery(variables) {\n        const request = {\n            query: schemaReportGql,\n            variables,\n        };\n        const httpResponse = await this.fetcher(this.endpointUrl, {\n            method: 'POST',\n            headers: this.headers,\n            body: JSON.stringify(request),\n        });\n        if (!httpResponse.ok) {\n            throw new Error([\n                `An unexpected HTTP status code (${httpResponse.status}) was`,\n                'encountered during schema reporting.',\n            ].join(' '));\n        }\n        try {\n            return await httpResponse.json();\n        }\n        catch (error) {\n            throw new Error([\n                \"Couldn't report schema to Apollo.\",\n                'Parsing response as JSON failed.',\n                'If this continues please reach out to support@apollographql.com',\n                error,\n            ].join(' '));\n        }\n    }\n}\n//# sourceMappingURL=schemaReporter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3NjaGVtYVJlcG9ydGluZy9zY2hlbWFSZXBvcnRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQStCO0FBQ29DO0FBQzVEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx3RUFBYztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxrREFBSztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLE1BQU07QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxtREFBbUQsb0JBQW9CO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL3BsdWdpbi9zY2hlbWFSZXBvcnRpbmcvc2NoZW1hUmVwb3J0ZXIuanM/NDU1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XG5pbXBvcnQgeyBwYWNrYWdlVmVyc2lvbiB9IGZyb20gJy4uLy4uL2dlbmVyYXRlZC9wYWNrYWdlVmVyc2lvbi5qcyc7XG5leHBvcnQgY29uc3Qgc2NoZW1hUmVwb3J0R3FsID0gYCNncmFwaHFsXG4gIG11dGF0aW9uIFNjaGVtYVJlcG9ydCgkcmVwb3J0OiBTY2hlbWFSZXBvcnQhLCAkY29yZVNjaGVtYTogU3RyaW5nKSB7XG4gICAgcmVwb3J0U2NoZW1hKHJlcG9ydDogJHJlcG9ydCwgY29yZVNjaGVtYTogJGNvcmVTY2hlbWEpIHtcbiAgICAgIF9fdHlwZW5hbWVcbiAgICAgIC4uLiBvbiBSZXBvcnRTY2hlbWFFcnJvciB7XG4gICAgICAgIG1lc3NhZ2VcbiAgICAgICAgY29kZVxuICAgICAgfVxuICAgICAgLi4uIG9uIFJlcG9ydFNjaGVtYVJlc3BvbnNlIHtcbiAgICAgICAgaW5TZWNvbmRzXG4gICAgICAgIHdpdGhDb3JlU2NoZW1hXG4gICAgICB9XG4gICAgfVxuICB9XG5gO1xuZXhwb3J0IGNsYXNzIFNjaGVtYVJlcG9ydGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAneC1hcGkta2V5Jzogb3B0aW9ucy5hcGlLZXksXG4gICAgICAgICAgICAnYXBvbGxvZ3JhcGhxbC1jbGllbnQtbmFtZSc6ICdBcG9sbG9TZXJ2ZXJQbHVnaW5TY2hlbWFSZXBvcnRpbmcnLFxuICAgICAgICAgICAgJ2Fwb2xsb2dyYXBocWwtY2xpZW50LXZlcnNpb24nOiBwYWNrYWdlVmVyc2lvbixcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbmRwb2ludFVybCA9XG4gICAgICAgICAgICBvcHRpb25zLmVuZHBvaW50VXJsIHx8XG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vc2NoZW1hLXJlcG9ydGluZy5hcGkuYXBvbGxvZ3JhcGhxbC5jb20vYXBpL2dyYXBocWwnO1xuICAgICAgICB0aGlzLnNjaGVtYVJlcG9ydCA9IG9wdGlvbnMuc2NoZW1hUmVwb3J0O1xuICAgICAgICB0aGlzLmNvcmVTY2hlbWEgPSBvcHRpb25zLmNvcmVTY2hlbWE7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gb3B0aW9ucy5sb2dnZXI7XG4gICAgICAgIHRoaXMuaW5pdGlhbFJlcG9ydGluZ0RlbGF5SW5NcyA9IG9wdGlvbnMuaW5pdGlhbFJlcG9ydGluZ0RlbGF5SW5NcztcbiAgICAgICAgdGhpcy5mYWxsYmFja1JlcG9ydGluZ0RlbGF5SW5NcyA9IG9wdGlvbnMuZmFsbGJhY2tSZXBvcnRpbmdEZWxheUluTXM7XG4gICAgICAgIHRoaXMuZmV0Y2hlciA9IG9wdGlvbnMuZmV0Y2hlciA/PyBmZXRjaDtcbiAgICB9XG4gICAgc3RvcHBlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNTdG9wcGVkO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VuZE9uZVJlcG9ydEFuZFNjaGVkdWxlTmV4dChmYWxzZSksIHRoaXMuaW5pdGlhbFJlcG9ydGluZ0RlbGF5SW5Ncyk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wb2xsVGltZXIpO1xuICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2VuZE9uZVJlcG9ydEFuZFNjaGVkdWxlTmV4dChzZW5kTmV4dFdpdGhDb3JlU2NoZW1hKSB7XG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5zdG9wcGVkKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlcG9ydFNjaGVtYShzZW5kTmV4dFdpdGhDb3JlU2NoZW1hKTtcbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0b3BwZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9sbFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRPbmVSZXBvcnRBbmRTY2hlZHVsZU5leHQocmVzdWx0LndpdGhDb3JlU2NoZW1hKSwgcmVzdWx0LmluU2Vjb25kcyAqIDEwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIHJlcG9ydGluZyBzZXJ2ZXIgaW5mbyB0byBBcG9sbG8gZHVyaW5nIHNjaGVtYSByZXBvcnRpbmc6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcHBlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VuZE9uZVJlcG9ydEFuZFNjaGVkdWxlTmV4dChmYWxzZSksIHRoaXMuZmFsbGJhY2tSZXBvcnRpbmdEZWxheUluTXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHJlcG9ydFNjaGVtYSh3aXRoQ29yZVNjaGVtYSkge1xuICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9ycyB9ID0gYXdhaXQgdGhpcy5hcG9sbG9RdWVyeSh7XG4gICAgICAgICAgICByZXBvcnQ6IHRoaXMuc2NoZW1hUmVwb3J0LFxuICAgICAgICAgICAgY29yZVNjaGVtYTogd2l0aENvcmVTY2hlbWEgPyB0aGlzLmNvcmVTY2hlbWEgOiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVycm9ycykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9ycy5tYXAoKHgpID0+IHgubWVzc2FnZSkuam9pbignXFxuJykpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1zZ0ZvclVuZXhwZWN0ZWRSZXNwb25zZShkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICdVbmV4cGVjdGVkIHJlc3BvbnNlIHNoYXBlIGZyb20gQXBvbGxvIHdoZW4nLFxuICAgICAgICAgICAgICAgICdyZXBvcnRpbmcgc2NoZW1hLiBJZiB0aGlzIGNvbnRpbnVlcywgcGxlYXNlIHJlYWNoJyxcbiAgICAgICAgICAgICAgICAnb3V0IHRvIHN1cHBvcnRAYXBvbGxvZ3JhcGhxbC5jb20uJyxcbiAgICAgICAgICAgICAgICAnUmVjZWl2ZWQgcmVzcG9uc2U6JyxcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgICAgIF0uam9pbignICcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5yZXBvcnRTY2hlbWEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2dGb3JVbmV4cGVjdGVkUmVzcG9uc2UoZGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhLnJlcG9ydFNjaGVtYS5fX3R5cGVuYW1lID09PSAnUmVwb3J0U2NoZW1hUmVzcG9uc2UnKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5yZXBvcnRTY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YS5yZXBvcnRTY2hlbWEuX190eXBlbmFtZSA9PT0gJ1JlcG9ydFNjaGVtYUVycm9yJykge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoW1xuICAgICAgICAgICAgICAgICdSZWNlaXZlZCBpbnB1dCB2YWxpZGF0aW9uIGVycm9yIGZyb20gQXBvbGxvOicsXG4gICAgICAgICAgICAgICAgZGF0YS5yZXBvcnRTY2hlbWEubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAnU3RvcHBpbmcgcmVwb3J0aW5nLiBQbGVhc2UgZml4IHRoZSBpbnB1dCBlcnJvcnMuJyxcbiAgICAgICAgICAgIF0uam9pbignICcpKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZ0ZvclVuZXhwZWN0ZWRSZXNwb25zZShkYXRhKSk7XG4gICAgfVxuICAgIGFzeW5jIGFwb2xsb1F1ZXJ5KHZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgcXVlcnk6IHNjaGVtYVJlcG9ydEdxbCxcbiAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaHR0cFJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaGVyKHRoaXMuZW5kcG9pbnRVcmwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWh0dHBSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFtcbiAgICAgICAgICAgICAgICBgQW4gdW5leHBlY3RlZCBIVFRQIHN0YXR1cyBjb2RlICgke2h0dHBSZXNwb25zZS5zdGF0dXN9KSB3YXNgLFxuICAgICAgICAgICAgICAgICdlbmNvdW50ZXJlZCBkdXJpbmcgc2NoZW1hIHJlcG9ydGluZy4nLFxuICAgICAgICAgICAgXS5qb2luKCcgJykpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgaHR0cFJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihbXG4gICAgICAgICAgICAgICAgXCJDb3VsZG4ndCByZXBvcnQgc2NoZW1hIHRvIEFwb2xsby5cIixcbiAgICAgICAgICAgICAgICAnUGFyc2luZyByZXNwb25zZSBhcyBKU09OIGZhaWxlZC4nLFxuICAgICAgICAgICAgICAgICdJZiB0aGlzIGNvbnRpbnVlcyBwbGVhc2UgcmVhY2ggb3V0IHRvIHN1cHBvcnRAYXBvbGxvZ3JhcGhxbC5jb20nLFxuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgXS5qb2luKCcgJykpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hUmVwb3J0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaReporting/schemaReporter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/traceTreeBuilder.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/traceTreeBuilder.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TraceTreeBuilder: () => (/* binding */ TraceTreeBuilder),\n/* harmony export */   dateToProtoTimestamp: () => (/* binding */ dateToProtoTimestamp)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/error/GraphQLError.mjs\");\n/* harmony import */ var _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/esm/protobuf.js\");\n/* harmony import */ var _utils_UnreachableCaseError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/UnreachableCaseError.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/UnreachableCaseError.js\");\n\n\n\nfunction internalError(message) {\n    return new Error(`[internal apollo-server error] ${message}`);\n}\nclass TraceTreeBuilder {\n    constructor(options) {\n        this.rootNode = new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.Node();\n        this.trace = new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace({\n            root: this.rootNode,\n            fieldExecutionWeight: 1,\n        });\n        this.stopped = false;\n        this.nodes = new Map([\n            [responsePathAsString(), this.rootNode],\n        ]);\n        const { sendErrors, maskedBy } = options;\n        if (!sendErrors || 'masked' in sendErrors) {\n            this.transformError = () => new graphql__WEBPACK_IMPORTED_MODULE_2__.GraphQLError('<masked>', {\n                extensions: { maskedBy },\n            });\n        }\n        else if ('transform' in sendErrors) {\n            this.transformError = sendErrors.transform;\n        }\n        else if ('unmodified' in sendErrors) {\n            this.transformError = null;\n        }\n        else {\n            throw new _utils_UnreachableCaseError_js__WEBPACK_IMPORTED_MODULE_1__.UnreachableCaseError(sendErrors);\n        }\n    }\n    startTiming() {\n        if (this.startHrTime) {\n            throw internalError('startTiming called twice!');\n        }\n        if (this.stopped) {\n            throw internalError('startTiming called after stopTiming!');\n        }\n        this.trace.startTime = dateToProtoTimestamp(new Date());\n        this.startHrTime = process.hrtime();\n    }\n    stopTiming() {\n        if (!this.startHrTime) {\n            throw internalError('stopTiming called before startTiming!');\n        }\n        if (this.stopped) {\n            throw internalError('stopTiming called twice!');\n        }\n        this.trace.durationNs = durationHrTimeToNanos(process.hrtime(this.startHrTime));\n        this.trace.endTime = dateToProtoTimestamp(new Date());\n        this.stopped = true;\n    }\n    willResolveField(info) {\n        if (!this.startHrTime) {\n            throw internalError('willResolveField called before startTiming!');\n        }\n        if (this.stopped) {\n            return () => { };\n        }\n        const path = info.path;\n        const node = this.newNode(path);\n        node.type = info.returnType.toString();\n        node.parentType = info.parentType.toString();\n        node.startTime = durationHrTimeToNanos(process.hrtime(this.startHrTime));\n        if (typeof path.key === 'string' && path.key !== info.fieldName) {\n            node.originalFieldName = info.fieldName;\n        }\n        return () => {\n            node.endTime = durationHrTimeToNanos(process.hrtime(this.startHrTime));\n        };\n    }\n    didEncounterErrors(errors) {\n        errors.forEach((err) => {\n            if (err.extensions?.serviceName) {\n                return;\n            }\n            const errorForReporting = this.transformAndNormalizeError(err);\n            if (errorForReporting === null) {\n                return;\n            }\n            this.addProtobufError(errorForReporting.path, errorToProtobufError(errorForReporting));\n        });\n    }\n    addProtobufError(path, error) {\n        if (!this.startHrTime) {\n            throw internalError('addProtobufError called before startTiming!');\n        }\n        if (this.stopped) {\n            throw internalError('addProtobufError called after stopTiming!');\n        }\n        let node = this.rootNode;\n        if (Array.isArray(path)) {\n            const specificNode = this.nodes.get(path.join('.'));\n            if (specificNode) {\n                node = specificNode;\n            }\n            else {\n                const responsePath = responsePathFromArray(path, this.rootNode);\n                if (!responsePath) {\n                    throw internalError('addProtobufError called with invalid path!');\n                }\n                node = this.newNode(responsePath);\n            }\n        }\n        node.error.push(error);\n    }\n    newNode(path) {\n        const node = new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.Node();\n        const id = path.key;\n        if (typeof id === 'number') {\n            node.index = id;\n        }\n        else {\n            node.responseName = id;\n        }\n        this.nodes.set(responsePathAsString(path), node);\n        const parentNode = this.ensureParentNode(path);\n        parentNode.child.push(node);\n        return node;\n    }\n    ensureParentNode(path) {\n        const parentPath = responsePathAsString(path.prev);\n        const parentNode = this.nodes.get(parentPath);\n        if (parentNode) {\n            return parentNode;\n        }\n        return this.newNode(path.prev);\n    }\n    transformAndNormalizeError(err) {\n        if (this.transformError) {\n            const clonedError = Object.assign(Object.create(Object.getPrototypeOf(err)), err);\n            const rewrittenError = this.transformError(clonedError);\n            if (rewrittenError === null) {\n                return null;\n            }\n            if (!(rewrittenError instanceof graphql__WEBPACK_IMPORTED_MODULE_2__.GraphQLError)) {\n                return err;\n            }\n            return new graphql__WEBPACK_IMPORTED_MODULE_2__.GraphQLError(rewrittenError.message, {\n                nodes: err.nodes,\n                source: err.source,\n                positions: err.positions,\n                path: err.path,\n                originalError: err.originalError,\n                extensions: rewrittenError.extensions || err.extensions,\n            });\n        }\n        return err;\n    }\n}\nfunction durationHrTimeToNanos(hrtime) {\n    return hrtime[0] * 1e9 + hrtime[1];\n}\nfunction responsePathAsString(p) {\n    if (p === undefined) {\n        return '';\n    }\n    let res = String(p.key);\n    while ((p = p.prev) !== undefined) {\n        res = `${p.key}.${res}`;\n    }\n    return res;\n}\nfunction responsePathFromArray(path, node) {\n    let responsePath;\n    let nodePtr = node;\n    for (const key of path) {\n        nodePtr = nodePtr?.child?.find((child) => child.responseName === key);\n        responsePath = {\n            key,\n            prev: responsePath,\n            typename: nodePtr?.type ?? undefined,\n        };\n    }\n    return responsePath;\n}\nfunction errorToProtobufError(error) {\n    return new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.Error({\n        message: error.message,\n        location: (error.locations || []).map(({ line, column }) => new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.Location({ line, column })),\n        json: JSON.stringify(error),\n    });\n}\nfunction dateToProtoTimestamp(date) {\n    const totalMillis = +date;\n    const millis = totalMillis % 1000;\n    return new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.google.protobuf.Timestamp({\n        seconds: (totalMillis - millis) / 1000,\n        nanos: millis * 1e6,\n    });\n}\n//# sourceMappingURL=traceTreeBuilder.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3RyYWNlVHJlZUJ1aWxkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDeUI7QUFDTztBQUN4RTtBQUNBLHVEQUF1RCxRQUFRO0FBQy9EO0FBQ087QUFDUDtBQUNBLDRCQUE0QixtRUFBSztBQUNqQyx5QkFBeUIsbUVBQUs7QUFDOUI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1QkFBdUI7QUFDdkM7QUFDQSw0Q0FBNEMsaURBQVk7QUFDeEQsOEJBQThCLFVBQVU7QUFDeEMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsZ0ZBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1FQUFLO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxpREFBWTtBQUN4RDtBQUNBO0FBQ0EsdUJBQXVCLGlEQUFZO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixNQUFNLEdBQUcsSUFBSTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtRUFBSztBQUNwQjtBQUNBLGlEQUFpRCxjQUFjLFNBQVMsbUVBQUssWUFBWSxjQUFjO0FBQ3ZHO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0EsZUFBZSxvRUFBTTtBQUNyQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL3BsdWdpbi90cmFjZVRyZWVCdWlsZGVyLmpzPzU5Y2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JhcGhRTEVycm9yLCB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgVHJhY2UsIGdvb2dsZSB9IGZyb20gJ0BhcG9sbG8vdXNhZ2UtcmVwb3J0aW5nLXByb3RvYnVmJztcbmltcG9ydCB7IFVucmVhY2hhYmxlQ2FzZUVycm9yIH0gZnJvbSAnLi4vdXRpbHMvVW5yZWFjaGFibGVDYXNlRXJyb3IuanMnO1xuZnVuY3Rpb24gaW50ZXJuYWxFcnJvcihtZXNzYWdlKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihgW2ludGVybmFsIGFwb2xsby1zZXJ2ZXIgZXJyb3JdICR7bWVzc2FnZX1gKTtcbn1cbmV4cG9ydCBjbGFzcyBUcmFjZVRyZWVCdWlsZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMucm9vdE5vZGUgPSBuZXcgVHJhY2UuTm9kZSgpO1xuICAgICAgICB0aGlzLnRyYWNlID0gbmV3IFRyYWNlKHtcbiAgICAgICAgICAgIHJvb3Q6IHRoaXMucm9vdE5vZGUsXG4gICAgICAgICAgICBmaWVsZEV4ZWN1dGlvbldlaWdodDogMSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5vZGVzID0gbmV3IE1hcChbXG4gICAgICAgICAgICBbcmVzcG9uc2VQYXRoQXNTdHJpbmcoKSwgdGhpcy5yb290Tm9kZV0sXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCB7IHNlbmRFcnJvcnMsIG1hc2tlZEJ5IH0gPSBvcHRpb25zO1xuICAgICAgICBpZiAoIXNlbmRFcnJvcnMgfHwgJ21hc2tlZCcgaW4gc2VuZEVycm9ycykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1FcnJvciA9ICgpID0+IG5ldyBHcmFwaFFMRXJyb3IoJzxtYXNrZWQ+Jywge1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHsgbWFza2VkQnkgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCd0cmFuc2Zvcm0nIGluIHNlbmRFcnJvcnMpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRXJyb3IgPSBzZW5kRXJyb3JzLnRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgndW5tb2RpZmllZCcgaW4gc2VuZEVycm9ycykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1FcnJvciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5yZWFjaGFibGVDYXNlRXJyb3Ioc2VuZEVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnRUaW1pbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0SHJUaW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBpbnRlcm5hbEVycm9yKCdzdGFydFRpbWluZyBjYWxsZWQgdHdpY2UhJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignc3RhcnRUaW1pbmcgY2FsbGVkIGFmdGVyIHN0b3BUaW1pbmchJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFjZS5zdGFydFRpbWUgPSBkYXRlVG9Qcm90b1RpbWVzdGFtcChuZXcgRGF0ZSgpKTtcbiAgICAgICAgdGhpcy5zdGFydEhyVGltZSA9IHByb2Nlc3MuaHJ0aW1lKCk7XG4gICAgfVxuICAgIHN0b3BUaW1pbmcoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydEhyVGltZSkge1xuICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignc3RvcFRpbWluZyBjYWxsZWQgYmVmb3JlIHN0YXJ0VGltaW5nIScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHRocm93IGludGVybmFsRXJyb3IoJ3N0b3BUaW1pbmcgY2FsbGVkIHR3aWNlIScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhY2UuZHVyYXRpb25OcyA9IGR1cmF0aW9uSHJUaW1lVG9OYW5vcyhwcm9jZXNzLmhydGltZSh0aGlzLnN0YXJ0SHJUaW1lKSk7XG4gICAgICAgIHRoaXMudHJhY2UuZW5kVGltZSA9IGRhdGVUb1Byb3RvVGltZXN0YW1wKG5ldyBEYXRlKCkpO1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgIH1cbiAgICB3aWxsUmVzb2x2ZUZpZWxkKGluZm8pIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0SHJUaW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBpbnRlcm5hbEVycm9yKCd3aWxsUmVzb2x2ZUZpZWxkIGNhbGxlZCBiZWZvcmUgc3RhcnRUaW1pbmchJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRoID0gaW5mby5wYXRoO1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5uZXdOb2RlKHBhdGgpO1xuICAgICAgICBub2RlLnR5cGUgPSBpbmZvLnJldHVyblR5cGUudG9TdHJpbmcoKTtcbiAgICAgICAgbm9kZS5wYXJlbnRUeXBlID0gaW5mby5wYXJlbnRUeXBlLnRvU3RyaW5nKCk7XG4gICAgICAgIG5vZGUuc3RhcnRUaW1lID0gZHVyYXRpb25IclRpbWVUb05hbm9zKHByb2Nlc3MuaHJ0aW1lKHRoaXMuc3RhcnRIclRpbWUpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXRoLmtleSA9PT0gJ3N0cmluZycgJiYgcGF0aC5rZXkgIT09IGluZm8uZmllbGROYW1lKSB7XG4gICAgICAgICAgICBub2RlLm9yaWdpbmFsRmllbGROYW1lID0gaW5mby5maWVsZE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIG5vZGUuZW5kVGltZSA9IGR1cmF0aW9uSHJUaW1lVG9OYW5vcyhwcm9jZXNzLmhydGltZSh0aGlzLnN0YXJ0SHJUaW1lKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGRpZEVuY291bnRlckVycm9ycyhlcnJvcnMpIHtcbiAgICAgICAgZXJyb3JzLmZvckVhY2goKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGVyci5leHRlbnNpb25zPy5zZXJ2aWNlTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVycm9yRm9yUmVwb3J0aW5nID0gdGhpcy50cmFuc2Zvcm1BbmROb3JtYWxpemVFcnJvcihlcnIpO1xuICAgICAgICAgICAgaWYgKGVycm9yRm9yUmVwb3J0aW5nID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRQcm90b2J1ZkVycm9yKGVycm9yRm9yUmVwb3J0aW5nLnBhdGgsIGVycm9yVG9Qcm90b2J1ZkVycm9yKGVycm9yRm9yUmVwb3J0aW5nKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRQcm90b2J1ZkVycm9yKHBhdGgsIGVycm9yKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydEhyVGltZSkge1xuICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignYWRkUHJvdG9idWZFcnJvciBjYWxsZWQgYmVmb3JlIHN0YXJ0VGltaW5nIScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHRocm93IGludGVybmFsRXJyb3IoJ2FkZFByb3RvYnVmRXJyb3IgY2FsbGVkIGFmdGVyIHN0b3BUaW1pbmchJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLnJvb3ROb2RlO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXRoKSkge1xuICAgICAgICAgICAgY29uc3Qgc3BlY2lmaWNOb2RlID0gdGhpcy5ub2Rlcy5nZXQocGF0aC5qb2luKCcuJykpO1xuICAgICAgICAgICAgaWYgKHNwZWNpZmljTm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBzcGVjaWZpY05vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZVBhdGggPSByZXNwb25zZVBhdGhGcm9tQXJyYXkocGF0aCwgdGhpcy5yb290Tm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignYWRkUHJvdG9idWZFcnJvciBjYWxsZWQgd2l0aCBpbnZhbGlkIHBhdGghJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUgPSB0aGlzLm5ld05vZGUocmVzcG9uc2VQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBub2RlLmVycm9yLnB1c2goZXJyb3IpO1xuICAgIH1cbiAgICBuZXdOb2RlKHBhdGgpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5ldyBUcmFjZS5Ob2RlKCk7XG4gICAgICAgIGNvbnN0IGlkID0gcGF0aC5rZXk7XG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBub2RlLmluZGV4ID0gaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlLnJlc3BvbnNlTmFtZSA9IGlkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm9kZXMuc2V0KHJlc3BvbnNlUGF0aEFzU3RyaW5nKHBhdGgpLCBub2RlKTtcbiAgICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IHRoaXMuZW5zdXJlUGFyZW50Tm9kZShwYXRoKTtcbiAgICAgICAgcGFyZW50Tm9kZS5jaGlsZC5wdXNoKG5vZGUpO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgZW5zdXJlUGFyZW50Tm9kZShwYXRoKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSByZXNwb25zZVBhdGhBc1N0cmluZyhwYXRoLnByZXYpO1xuICAgICAgICBjb25zdCBwYXJlbnROb2RlID0gdGhpcy5ub2Rlcy5nZXQocGFyZW50UGF0aCk7XG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uZXdOb2RlKHBhdGgucHJldik7XG4gICAgfVxuICAgIHRyYW5zZm9ybUFuZE5vcm1hbGl6ZUVycm9yKGVycikge1xuICAgICAgICBpZiAodGhpcy50cmFuc2Zvcm1FcnJvcikge1xuICAgICAgICAgICAgY29uc3QgY2xvbmVkRXJyb3IgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKGVycikpLCBlcnIpO1xuICAgICAgICAgICAgY29uc3QgcmV3cml0dGVuRXJyb3IgPSB0aGlzLnRyYW5zZm9ybUVycm9yKGNsb25lZEVycm9yKTtcbiAgICAgICAgICAgIGlmIChyZXdyaXR0ZW5FcnJvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEocmV3cml0dGVuRXJyb3IgaW5zdGFuY2VvZiBHcmFwaFFMRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGhRTEVycm9yKHJld3JpdHRlbkVycm9yLm1lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICBub2RlczogZXJyLm5vZGVzLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogZXJyLnNvdXJjZSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnM6IGVyci5wb3NpdGlvbnMsXG4gICAgICAgICAgICAgICAgcGF0aDogZXJyLnBhdGgsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvcjogZXJyLm9yaWdpbmFsRXJyb3IsXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogcmV3cml0dGVuRXJyb3IuZXh0ZW5zaW9ucyB8fCBlcnIuZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgfVxufVxuZnVuY3Rpb24gZHVyYXRpb25IclRpbWVUb05hbm9zKGhydGltZSkge1xuICAgIHJldHVybiBocnRpbWVbMF0gKiAxZTkgKyBocnRpbWVbMV07XG59XG5mdW5jdGlvbiByZXNwb25zZVBhdGhBc1N0cmluZyhwKSB7XG4gICAgaWYgKHAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGxldCByZXMgPSBTdHJpbmcocC5rZXkpO1xuICAgIHdoaWxlICgocCA9IHAucHJldikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXMgPSBgJHtwLmtleX0uJHtyZXN9YDtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIHJlc3BvbnNlUGF0aEZyb21BcnJheShwYXRoLCBub2RlKSB7XG4gICAgbGV0IHJlc3BvbnNlUGF0aDtcbiAgICBsZXQgbm9kZVB0ciA9IG5vZGU7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgcGF0aCkge1xuICAgICAgICBub2RlUHRyID0gbm9kZVB0cj8uY2hpbGQ/LmZpbmQoKGNoaWxkKSA9PiBjaGlsZC5yZXNwb25zZU5hbWUgPT09IGtleSk7XG4gICAgICAgIHJlc3BvbnNlUGF0aCA9IHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHByZXY6IHJlc3BvbnNlUGF0aCxcbiAgICAgICAgICAgIHR5cGVuYW1lOiBub2RlUHRyPy50eXBlID8/IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlUGF0aDtcbn1cbmZ1bmN0aW9uIGVycm9yVG9Qcm90b2J1ZkVycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIG5ldyBUcmFjZS5FcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGxvY2F0aW9uOiAoZXJyb3IubG9jYXRpb25zIHx8IFtdKS5tYXAoKHsgbGluZSwgY29sdW1uIH0pID0+IG5ldyBUcmFjZS5Mb2NhdGlvbih7IGxpbmUsIGNvbHVtbiB9KSksXG4gICAgICAgIGpzb246IEpTT04uc3RyaW5naWZ5KGVycm9yKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkYXRlVG9Qcm90b1RpbWVzdGFtcChkYXRlKSB7XG4gICAgY29uc3QgdG90YWxNaWxsaXMgPSArZGF0ZTtcbiAgICBjb25zdCBtaWxsaXMgPSB0b3RhbE1pbGxpcyAlIDEwMDA7XG4gICAgcmV0dXJuIG5ldyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wKHtcbiAgICAgICAgc2Vjb25kczogKHRvdGFsTWlsbGlzIC0gbWlsbGlzKSAvIDEwMDAsXG4gICAgICAgIG5hbm9zOiBtaWxsaXMgKiAxZTYsXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZVRyZWVCdWlsZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/traceTreeBuilder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/defaultSendOperationsAsTrace.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/usageReporting/defaultSendOperationsAsTrace.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultSendOperationsAsTrace: () => (/* binding */ defaultSendOperationsAsTrace)\n/* harmony export */ });\n/* harmony import */ var lru_cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lru-cache */ \"(rsc)/./node_modules/lru-cache/index.mjs\");\n/* harmony import */ var _iterateOverTrace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./iterateOverTrace.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/iterateOverTrace.js\");\n/* harmony import */ var _durationHistogram_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./durationHistogram.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/durationHistogram.js\");\n\n\n\nfunction defaultSendOperationsAsTrace() {\n    const cache = new lru_cache__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        maxSize: Math.pow(2, 20),\n        sizeCalculation: (_val, key) => {\n            return (key && Buffer.byteLength(key)) || 0;\n        },\n    });\n    return (trace, statsReportKey) => {\n        const endTimeSeconds = trace.endTime?.seconds;\n        if (endTimeSeconds == null) {\n            throw Error('programming error: endTime not set on trace');\n        }\n        const hasErrors = traceHasErrors(trace);\n        const cacheKey = JSON.stringify([\n            statsReportKey,\n            _durationHistogram_js__WEBPACK_IMPORTED_MODULE_1__.DurationHistogram.durationToBucket(trace.durationNs),\n            Math.floor(endTimeSeconds / 60),\n            hasErrors ? Math.floor(endTimeSeconds / 5) : '',\n        ]);\n        if (cache.get(cacheKey)) {\n            return false;\n        }\n        cache.set(cacheKey, true);\n        return true;\n    };\n}\nfunction traceHasErrors(trace) {\n    let hasErrors = false;\n    function traceNodeStats(node) {\n        if ((node.error?.length ?? 0) > 0) {\n            hasErrors = true;\n        }\n        return hasErrors;\n    }\n    (0,_iterateOverTrace_js__WEBPACK_IMPORTED_MODULE_0__.iterateOverTrace)(trace, traceNodeStats, false);\n    return hasErrors;\n}\n//# sourceMappingURL=defaultSendOperationsAsTrace.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2RlZmF1bHRTZW5kT3BlcmF0aW9uc0FzVHJhY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUN3QjtBQUNFO0FBQ3BEO0FBQ1Asc0JBQXNCLGlEQUFRO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0VBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksc0VBQWdCO0FBQ3BCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2RlZmF1bHRTZW5kT3BlcmF0aW9uc0FzVHJhY2UuanM/NTc1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTFJVQ2FjaGUgZnJvbSAnbHJ1LWNhY2hlJztcbmltcG9ydCB7IGl0ZXJhdGVPdmVyVHJhY2UgfSBmcm9tICcuL2l0ZXJhdGVPdmVyVHJhY2UuanMnO1xuaW1wb3J0IHsgRHVyYXRpb25IaXN0b2dyYW0gfSBmcm9tICcuL2R1cmF0aW9uSGlzdG9ncmFtLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0U2VuZE9wZXJhdGlvbnNBc1RyYWNlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gbmV3IExSVUNhY2hlKHtcbiAgICAgICAgbWF4U2l6ZTogTWF0aC5wb3coMiwgMjApLFxuICAgICAgICBzaXplQ2FsY3VsYXRpb246IChfdmFsLCBrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoa2V5ICYmIEJ1ZmZlci5ieXRlTGVuZ3RoKGtleSkpIHx8IDA7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuICh0cmFjZSwgc3RhdHNSZXBvcnRLZXkpID0+IHtcbiAgICAgICAgY29uc3QgZW5kVGltZVNlY29uZHMgPSB0cmFjZS5lbmRUaW1lPy5zZWNvbmRzO1xuICAgICAgICBpZiAoZW5kVGltZVNlY29uZHMgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ3Byb2dyYW1taW5nIGVycm9yOiBlbmRUaW1lIG5vdCBzZXQgb24gdHJhY2UnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNFcnJvcnMgPSB0cmFjZUhhc0Vycm9ycyh0cmFjZSk7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgICAgICAgc3RhdHNSZXBvcnRLZXksXG4gICAgICAgICAgICBEdXJhdGlvbkhpc3RvZ3JhbS5kdXJhdGlvblRvQnVja2V0KHRyYWNlLmR1cmF0aW9uTnMpLFxuICAgICAgICAgICAgTWF0aC5mbG9vcihlbmRUaW1lU2Vjb25kcyAvIDYwKSxcbiAgICAgICAgICAgIGhhc0Vycm9ycyA/IE1hdGguZmxvb3IoZW5kVGltZVNlY29uZHMgLyA1KSA6ICcnLFxuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGNhY2hlLmdldChjYWNoZUtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYWNoZS5zZXQoY2FjaGVLZXksIHRydWUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhY2VIYXNFcnJvcnModHJhY2UpIHtcbiAgICBsZXQgaGFzRXJyb3JzID0gZmFsc2U7XG4gICAgZnVuY3Rpb24gdHJhY2VOb2RlU3RhdHMobm9kZSkge1xuICAgICAgICBpZiAoKG5vZGUuZXJyb3I/Lmxlbmd0aCA/PyAwKSA+IDApIHtcbiAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhc0Vycm9ycztcbiAgICB9XG4gICAgaXRlcmF0ZU92ZXJUcmFjZSh0cmFjZSwgdHJhY2VOb2RlU3RhdHMsIGZhbHNlKTtcbiAgICByZXR1cm4gaGFzRXJyb3JzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmYXVsdFNlbmRPcGVyYXRpb25zQXNUcmFjZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/defaultSendOperationsAsTrace.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/durationHistogram.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/usageReporting/durationHistogram.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DurationHistogram: () => (/* binding */ DurationHistogram)\n/* harmony export */ });\nclass DurationHistogram {\n    toArray() {\n        let bufferedZeroes = 0;\n        const outputArray = [];\n        for (const value of this.buckets) {\n            if (value === 0) {\n                bufferedZeroes++;\n            }\n            else {\n                if (bufferedZeroes === 1) {\n                    outputArray.push(0);\n                }\n                else if (bufferedZeroes !== 0) {\n                    outputArray.push(-bufferedZeroes);\n                }\n                outputArray.push(Math.floor(value));\n                bufferedZeroes = 0;\n            }\n        }\n        return outputArray;\n    }\n    static durationToBucket(durationNs) {\n        const log = Math.log(durationNs / 1000.0);\n        const unboundedBucket = Math.ceil(log / DurationHistogram.EXPONENT_LOG);\n        return unboundedBucket <= 0 || Number.isNaN(unboundedBucket)\n            ? 0\n            : unboundedBucket >= DurationHistogram.BUCKET_COUNT\n                ? DurationHistogram.BUCKET_COUNT - 1\n                : unboundedBucket;\n    }\n    incrementDuration(durationNs, value = 1) {\n        this.incrementBucket(DurationHistogram.durationToBucket(durationNs), value);\n        return this;\n    }\n    incrementBucket(bucket, value = 1) {\n        if (bucket >= DurationHistogram.BUCKET_COUNT) {\n            throw Error('Bucket is out of bounds of the buckets array');\n        }\n        if (bucket >= this.buckets.length) {\n            const oldLength = this.buckets.length;\n            this.buckets.length = bucket + 1;\n            this.buckets.fill(0, oldLength);\n        }\n        this.buckets[bucket] += value;\n    }\n    combine(otherHistogram) {\n        for (let i = 0; i < otherHistogram.buckets.length; i++) {\n            this.incrementBucket(i, otherHistogram.buckets[i]);\n        }\n    }\n    constructor(options) {\n        const initSize = options?.initSize || 74;\n        const buckets = options?.buckets;\n        const arrayInitSize = Math.max(buckets?.length || 0, initSize);\n        this.buckets = Array(arrayInitSize).fill(0);\n        if (buckets) {\n            buckets.forEach((val, index) => (this.buckets[index] = val));\n        }\n    }\n}\nDurationHistogram.BUCKET_COUNT = 384;\nDurationHistogram.EXPONENT_LOG = Math.log(1.1);\n//# sourceMappingURL=durationHistogram.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2R1cmF0aW9uSGlzdG9ncmFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtQ0FBbUM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL3BsdWdpbi91c2FnZVJlcG9ydGluZy9kdXJhdGlvbkhpc3RvZ3JhbS5qcz8wN2M3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBEdXJhdGlvbkhpc3RvZ3JhbSB7XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgbGV0IGJ1ZmZlcmVkWmVyb2VzID0gMDtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLmJ1Y2tldHMpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcmVkWmVyb2VzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyZWRaZXJvZXMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYnVmZmVyZWRaZXJvZXMgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCgtYnVmZmVyZWRaZXJvZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKE1hdGguZmxvb3IodmFsdWUpKTtcbiAgICAgICAgICAgICAgICBidWZmZXJlZFplcm9lcyA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dEFycmF5O1xuICAgIH1cbiAgICBzdGF0aWMgZHVyYXRpb25Ub0J1Y2tldChkdXJhdGlvbk5zKSB7XG4gICAgICAgIGNvbnN0IGxvZyA9IE1hdGgubG9nKGR1cmF0aW9uTnMgLyAxMDAwLjApO1xuICAgICAgICBjb25zdCB1bmJvdW5kZWRCdWNrZXQgPSBNYXRoLmNlaWwobG9nIC8gRHVyYXRpb25IaXN0b2dyYW0uRVhQT05FTlRfTE9HKTtcbiAgICAgICAgcmV0dXJuIHVuYm91bmRlZEJ1Y2tldCA8PSAwIHx8IE51bWJlci5pc05hTih1bmJvdW5kZWRCdWNrZXQpXG4gICAgICAgICAgICA/IDBcbiAgICAgICAgICAgIDogdW5ib3VuZGVkQnVja2V0ID49IER1cmF0aW9uSGlzdG9ncmFtLkJVQ0tFVF9DT1VOVFxuICAgICAgICAgICAgICAgID8gRHVyYXRpb25IaXN0b2dyYW0uQlVDS0VUX0NPVU5UIC0gMVxuICAgICAgICAgICAgICAgIDogdW5ib3VuZGVkQnVja2V0O1xuICAgIH1cbiAgICBpbmNyZW1lbnREdXJhdGlvbihkdXJhdGlvbk5zLCB2YWx1ZSA9IDEpIHtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRCdWNrZXQoRHVyYXRpb25IaXN0b2dyYW0uZHVyYXRpb25Ub0J1Y2tldChkdXJhdGlvbk5zKSwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaW5jcmVtZW50QnVja2V0KGJ1Y2tldCwgdmFsdWUgPSAxKSB7XG4gICAgICAgIGlmIChidWNrZXQgPj0gRHVyYXRpb25IaXN0b2dyYW0uQlVDS0VUX0NPVU5UKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignQnVja2V0IGlzIG91dCBvZiBib3VuZHMgb2YgdGhlIGJ1Y2tldHMgYXJyYXknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnVja2V0ID49IHRoaXMuYnVja2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZExlbmd0aCA9IHRoaXMuYnVja2V0cy5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmJ1Y2tldHMubGVuZ3RoID0gYnVja2V0ICsgMTtcbiAgICAgICAgICAgIHRoaXMuYnVja2V0cy5maWxsKDAsIG9sZExlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWNrZXRzW2J1Y2tldF0gKz0gdmFsdWU7XG4gICAgfVxuICAgIGNvbWJpbmUob3RoZXJIaXN0b2dyYW0pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdGhlckhpc3RvZ3JhbS5idWNrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudEJ1Y2tldChpLCBvdGhlckhpc3RvZ3JhbS5idWNrZXRzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGluaXRTaXplID0gb3B0aW9ucz8uaW5pdFNpemUgfHwgNzQ7XG4gICAgICAgIGNvbnN0IGJ1Y2tldHMgPSBvcHRpb25zPy5idWNrZXRzO1xuICAgICAgICBjb25zdCBhcnJheUluaXRTaXplID0gTWF0aC5tYXgoYnVja2V0cz8ubGVuZ3RoIHx8IDAsIGluaXRTaXplKTtcbiAgICAgICAgdGhpcy5idWNrZXRzID0gQXJyYXkoYXJyYXlJbml0U2l6ZSkuZmlsbCgwKTtcbiAgICAgICAgaWYgKGJ1Y2tldHMpIHtcbiAgICAgICAgICAgIGJ1Y2tldHMuZm9yRWFjaCgodmFsLCBpbmRleCkgPT4gKHRoaXMuYnVja2V0c1tpbmRleF0gPSB2YWwpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbkR1cmF0aW9uSGlzdG9ncmFtLkJVQ0tFVF9DT1VOVCA9IDM4NDtcbkR1cmF0aW9uSGlzdG9ncmFtLkVYUE9ORU5UX0xPRyA9IE1hdGgubG9nKDEuMSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kdXJhdGlvbkhpc3RvZ3JhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/durationHistogram.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/usageReporting/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServerPluginUsageReporting: () => (/* reexport safe */ _plugin_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerPluginUsageReporting)\n/* harmony export */ });\n/* harmony import */ var _plugin_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./plugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/plugin.js\");\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStEO0FBQy9EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9wbHVnaW4vdXNhZ2VSZXBvcnRpbmcvaW5kZXguanM/OTA0MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZyB9IGZyb20gJy4vcGx1Z2luLmpzJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/iterateOverTrace.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/usageReporting/iterateOverTrace.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   iterateOverTrace: () => (/* binding */ iterateOverTrace)\n/* harmony export */ });\nfunction iterateOverTrace(trace, f, includePath) {\n    const rootPath = includePath\n        ? new RootCollectingPathsResponseNamePath()\n        : notCollectingPathsResponseNamePath;\n    if (trace.root) {\n        if (iterateOverTraceNode(trace.root, rootPath, f))\n            return;\n    }\n    if (trace.queryPlan) {\n        if (iterateOverQueryPlan(trace.queryPlan, rootPath, f))\n            return;\n    }\n}\nfunction iterateOverQueryPlan(node, rootPath, f) {\n    if (!node)\n        return false;\n    if (node.fetch?.trace?.root && node.fetch.serviceName) {\n        return iterateOverTraceNode(node.fetch.trace.root, rootPath.child(`service:${node.fetch.serviceName}`), f);\n    }\n    if (node.flatten?.node) {\n        return iterateOverQueryPlan(node.flatten.node, rootPath, f);\n    }\n    if (node.parallel?.nodes) {\n        return node.parallel.nodes.some((node) => iterateOverQueryPlan(node, rootPath, f));\n    }\n    if (node.sequence?.nodes) {\n        return node.sequence.nodes.some((node) => iterateOverQueryPlan(node, rootPath, f));\n    }\n    return false;\n}\nfunction iterateOverTraceNode(node, path, f) {\n    if (f(node, path)) {\n        return true;\n    }\n    return (node.child?.some((child) => {\n        const childPath = child.responseName\n            ? path.child(child.responseName)\n            : path;\n        return iterateOverTraceNode(child, childPath, f);\n    }) ?? false);\n}\nconst notCollectingPathsResponseNamePath = {\n    toArray() {\n        throw Error('not collecting paths!');\n    },\n    child() {\n        return this;\n    },\n};\nclass RootCollectingPathsResponseNamePath {\n    toArray() {\n        return [];\n    }\n    child(responseName) {\n        return new ChildCollectingPathsResponseNamePath(responseName, this);\n    }\n}\nclass ChildCollectingPathsResponseNamePath {\n    constructor(responseName, prev) {\n        this.responseName = responseName;\n        this.prev = prev;\n    }\n    toArray() {\n        const out = [];\n        let curr = this;\n        while (curr instanceof ChildCollectingPathsResponseNamePath) {\n            out.push(curr.responseName);\n            curr = curr.prev;\n        }\n        return out.reverse();\n    }\n    child(responseName) {\n        return new ChildCollectingPathsResponseNamePath(responseName, this);\n    }\n}\n//# sourceMappingURL=iterateOverTrace.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL2l0ZXJhdGVPdmVyVHJhY2UuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRkFBcUYsdUJBQXVCO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9wbHVnaW4vdXNhZ2VSZXBvcnRpbmcvaXRlcmF0ZU92ZXJUcmFjZS5qcz8yODg1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBpdGVyYXRlT3ZlclRyYWNlKHRyYWNlLCBmLCBpbmNsdWRlUGF0aCkge1xuICAgIGNvbnN0IHJvb3RQYXRoID0gaW5jbHVkZVBhdGhcbiAgICAgICAgPyBuZXcgUm9vdENvbGxlY3RpbmdQYXRoc1Jlc3BvbnNlTmFtZVBhdGgoKVxuICAgICAgICA6IG5vdENvbGxlY3RpbmdQYXRoc1Jlc3BvbnNlTmFtZVBhdGg7XG4gICAgaWYgKHRyYWNlLnJvb3QpIHtcbiAgICAgICAgaWYgKGl0ZXJhdGVPdmVyVHJhY2VOb2RlKHRyYWNlLnJvb3QsIHJvb3RQYXRoLCBmKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRyYWNlLnF1ZXJ5UGxhbikge1xuICAgICAgICBpZiAoaXRlcmF0ZU92ZXJRdWVyeVBsYW4odHJhY2UucXVlcnlQbGFuLCByb290UGF0aCwgZikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgfVxufVxuZnVuY3Rpb24gaXRlcmF0ZU92ZXJRdWVyeVBsYW4obm9kZSwgcm9vdFBhdGgsIGYpIHtcbiAgICBpZiAoIW5vZGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAobm9kZS5mZXRjaD8udHJhY2U/LnJvb3QgJiYgbm9kZS5mZXRjaC5zZXJ2aWNlTmFtZSkge1xuICAgICAgICByZXR1cm4gaXRlcmF0ZU92ZXJUcmFjZU5vZGUobm9kZS5mZXRjaC50cmFjZS5yb290LCByb290UGF0aC5jaGlsZChgc2VydmljZToke25vZGUuZmV0Y2guc2VydmljZU5hbWV9YCksIGYpO1xuICAgIH1cbiAgICBpZiAobm9kZS5mbGF0dGVuPy5ub2RlKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRlT3ZlclF1ZXJ5UGxhbihub2RlLmZsYXR0ZW4ubm9kZSwgcm9vdFBhdGgsIGYpO1xuICAgIH1cbiAgICBpZiAobm9kZS5wYXJhbGxlbD8ubm9kZXMpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUucGFyYWxsZWwubm9kZXMuc29tZSgobm9kZSkgPT4gaXRlcmF0ZU92ZXJRdWVyeVBsYW4obm9kZSwgcm9vdFBhdGgsIGYpKTtcbiAgICB9XG4gICAgaWYgKG5vZGUuc2VxdWVuY2U/Lm5vZGVzKSB7XG4gICAgICAgIHJldHVybiBub2RlLnNlcXVlbmNlLm5vZGVzLnNvbWUoKG5vZGUpID0+IGl0ZXJhdGVPdmVyUXVlcnlQbGFuKG5vZGUsIHJvb3RQYXRoLCBmKSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGl0ZXJhdGVPdmVyVHJhY2VOb2RlKG5vZGUsIHBhdGgsIGYpIHtcbiAgICBpZiAoZihub2RlLCBwYXRoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChub2RlLmNoaWxkPy5zb21lKChjaGlsZCkgPT4ge1xuICAgICAgICBjb25zdCBjaGlsZFBhdGggPSBjaGlsZC5yZXNwb25zZU5hbWVcbiAgICAgICAgICAgID8gcGF0aC5jaGlsZChjaGlsZC5yZXNwb25zZU5hbWUpXG4gICAgICAgICAgICA6IHBhdGg7XG4gICAgICAgIHJldHVybiBpdGVyYXRlT3ZlclRyYWNlTm9kZShjaGlsZCwgY2hpbGRQYXRoLCBmKTtcbiAgICB9KSA/PyBmYWxzZSk7XG59XG5jb25zdCBub3RDb2xsZWN0aW5nUGF0aHNSZXNwb25zZU5hbWVQYXRoID0ge1xuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdub3QgY29sbGVjdGluZyBwYXRocyEnKTtcbiAgICB9LFxuICAgIGNoaWxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxufTtcbmNsYXNzIFJvb3RDb2xsZWN0aW5nUGF0aHNSZXNwb25zZU5hbWVQYXRoIHtcbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNoaWxkKHJlc3BvbnNlTmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IENoaWxkQ29sbGVjdGluZ1BhdGhzUmVzcG9uc2VOYW1lUGF0aChyZXNwb25zZU5hbWUsIHRoaXMpO1xuICAgIH1cbn1cbmNsYXNzIENoaWxkQ29sbGVjdGluZ1BhdGhzUmVzcG9uc2VOYW1lUGF0aCB7XG4gICAgY29uc3RydWN0b3IocmVzcG9uc2VOYW1lLCBwcmV2KSB7XG4gICAgICAgIHRoaXMucmVzcG9uc2VOYW1lID0gcmVzcG9uc2VOYW1lO1xuICAgICAgICB0aGlzLnByZXYgPSBwcmV2O1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCBvdXQgPSBbXTtcbiAgICAgICAgbGV0IGN1cnIgPSB0aGlzO1xuICAgICAgICB3aGlsZSAoY3VyciBpbnN0YW5jZW9mIENoaWxkQ29sbGVjdGluZ1BhdGhzUmVzcG9uc2VOYW1lUGF0aCkge1xuICAgICAgICAgICAgb3V0LnB1c2goY3Vyci5yZXNwb25zZU5hbWUpO1xuICAgICAgICAgICAgY3VyciA9IGN1cnIucHJldjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0LnJldmVyc2UoKTtcbiAgICB9XG4gICAgY2hpbGQocmVzcG9uc2VOYW1lKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hpbGRDb2xsZWN0aW5nUGF0aHNSZXNwb25zZU5hbWVQYXRoKHJlc3BvbnNlTmFtZSwgdGhpcyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlcmF0ZU92ZXJUcmFjZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/iterateOverTrace.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/operationDerivedDataCache.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/usageReporting/operationDerivedDataCache.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createOperationDerivedDataCache: () => (/* binding */ createOperationDerivedDataCache),\n/* harmony export */   operationDerivedDataCacheKey: () => (/* binding */ operationDerivedDataCacheKey)\n/* harmony export */ });\n/* harmony import */ var lru_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lru-cache */ \"(rsc)/./node_modules/lru-cache/index.mjs\");\n\nfunction createOperationDerivedDataCache({ logger, }) {\n    let lastWarn;\n    let lastDisposals = 0;\n    return new lru_cache__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        sizeCalculation(obj) {\n            return Buffer.byteLength(JSON.stringify(obj), 'utf8');\n        },\n        maxSize: Math.pow(2, 20) * 10,\n        dispose() {\n            lastDisposals++;\n            if (!lastWarn || new Date().getTime() - lastWarn.getTime() > 60000) {\n                lastWarn = new Date();\n                logger.warn([\n                    'This server is processing a high number of unique operations.  ',\n                    `A total of ${lastDisposals} records have been `,\n                    'ejected from the ApolloServerPluginUsageReporting signature cache in the past ',\n                    'interval.  If you see this warning frequently, please open an ',\n                    'issue on the Apollo Server repository.',\n                ].join(''));\n                lastDisposals = 0;\n            }\n        },\n    });\n}\nfunction operationDerivedDataCacheKey(queryHash, operationName) {\n    return `${queryHash}${operationName && ':' + operationName}`;\n}\n//# sourceMappingURL=operationDerivedDataCache.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL29wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQzFCLDJDQUEyQyxTQUFTO0FBQzNEO0FBQ0E7QUFDQSxlQUFlLGlEQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZUFBZTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxjQUFjLFVBQVUsRUFBRSxxQ0FBcUM7QUFDL0Q7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL29wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUuanM/ZTAzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTFJVQ2FjaGUgZnJvbSAnbHJ1LWNhY2hlJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlKHsgbG9nZ2VyLCB9KSB7XG4gICAgbGV0IGxhc3RXYXJuO1xuICAgIGxldCBsYXN0RGlzcG9zYWxzID0gMDtcbiAgICByZXR1cm4gbmV3IExSVUNhY2hlKHtcbiAgICAgICAgc2l6ZUNhbGN1bGF0aW9uKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIEJ1ZmZlci5ieXRlTGVuZ3RoKEpTT04uc3RyaW5naWZ5KG9iaiksICd1dGY4Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIG1heFNpemU6IE1hdGgucG93KDIsIDIwKSAqIDEwLFxuICAgICAgICBkaXNwb3NlKCkge1xuICAgICAgICAgICAgbGFzdERpc3Bvc2FscysrO1xuICAgICAgICAgICAgaWYgKCFsYXN0V2FybiB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxhc3RXYXJuLmdldFRpbWUoKSA+IDYwMDAwKSB7XG4gICAgICAgICAgICAgICAgbGFzdFdhcm4gPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFtcbiAgICAgICAgICAgICAgICAgICAgJ1RoaXMgc2VydmVyIGlzIHByb2Nlc3NpbmcgYSBoaWdoIG51bWJlciBvZiB1bmlxdWUgb3BlcmF0aW9ucy4gICcsXG4gICAgICAgICAgICAgICAgICAgIGBBIHRvdGFsIG9mICR7bGFzdERpc3Bvc2Fsc30gcmVjb3JkcyBoYXZlIGJlZW4gYCxcbiAgICAgICAgICAgICAgICAgICAgJ2VqZWN0ZWQgZnJvbSB0aGUgQXBvbGxvU2VydmVyUGx1Z2luVXNhZ2VSZXBvcnRpbmcgc2lnbmF0dXJlIGNhY2hlIGluIHRoZSBwYXN0ICcsXG4gICAgICAgICAgICAgICAgICAgICdpbnRlcnZhbC4gIElmIHlvdSBzZWUgdGhpcyB3YXJuaW5nIGZyZXF1ZW50bHksIHBsZWFzZSBvcGVuIGFuICcsXG4gICAgICAgICAgICAgICAgICAgICdpc3N1ZSBvbiB0aGUgQXBvbGxvIFNlcnZlciByZXBvc2l0b3J5LicsXG4gICAgICAgICAgICAgICAgXS5qb2luKCcnKSk7XG4gICAgICAgICAgICAgICAgbGFzdERpc3Bvc2FscyA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZUtleShxdWVyeUhhc2gsIG9wZXJhdGlvbk5hbWUpIHtcbiAgICByZXR1cm4gYCR7cXVlcnlIYXNofSR7b3BlcmF0aW9uTmFtZSAmJiAnOicgKyBvcGVyYXRpb25OYW1lfWA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/operationDerivedDataCache.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/plugin.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/usageReporting/plugin.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApolloServerPluginUsageReporting: () => (/* binding */ ApolloServerPluginUsageReporting),\n/* harmony export */   makeHTTPRequestHeaders: () => (/* binding */ makeHTTPRequestHeaders)\n/* harmony export */ });\n/* harmony import */ var _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/esm/protobuf.js\");\n/* harmony import */ var _apollo_utils_usagereporting__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @apollo/utils.usagereporting */ \"(rsc)/./node_modules/@apollo/utils.usagereporting/dist/index.js\");\n/* harmony import */ var async_retry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! async-retry */ \"(rsc)/./node_modules/async-retry/lib/index.js\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/utilities/printSchema.mjs\");\n/* harmony import */ var node_abort_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node-abort-controller */ \"(rsc)/./node_modules/node-abort-controller/index.js\");\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node-fetch */ \"(rsc)/./node_modules/node-fetch/lib/index.mjs\");\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! os */ \"os\");\n/* harmony import */ var zlib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zlib */ \"zlib\");\n/* harmony import */ var _internalPlugin_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../internalPlugin.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalPlugin.js\");\n/* harmony import */ var _traceTreeBuilder_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../traceTreeBuilder.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/traceTreeBuilder.js\");\n/* harmony import */ var _defaultSendOperationsAsTrace_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./defaultSendOperationsAsTrace.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/defaultSendOperationsAsTrace.js\");\n/* harmony import */ var _operationDerivedDataCache_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./operationDerivedDataCache.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/operationDerivedDataCache.js\");\n/* harmony import */ var _stats_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./stats.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/stats.js\");\n/* harmony import */ var _traceDetails_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./traceDetails.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/traceDetails.js\");\n/* harmony import */ var _generated_packageVersion_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../generated/packageVersion.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/generated/packageVersion.js\");\n/* harmony import */ var _utils_computeCoreSchemaHash_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../utils/computeCoreSchemaHash.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/computeCoreSchemaHash.js\");\n/* harmony import */ var _schemaIsSubgraph_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../schemaIsSubgraph.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/schemaIsSubgraph.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst reportHeaderDefaults = {\n    hostname: os__WEBPACK_IMPORTED_MODULE_5__.hostname(),\n    agentVersion: `@apollo/server@${_generated_packageVersion_js__WEBPACK_IMPORTED_MODULE_13__.packageVersion}`,\n    runtimeVersion: `node ${process.version}`,\n    uname: `${os__WEBPACK_IMPORTED_MODULE_5__.platform()}, ${os__WEBPACK_IMPORTED_MODULE_5__.type()}, ${os__WEBPACK_IMPORTED_MODULE_5__.release()}, ${os__WEBPACK_IMPORTED_MODULE_5__.arch()})`,\n};\nfunction ApolloServerPluginUsageReporting(options = Object.create(null)) {\n    const fieldLevelInstrumentationOption = options.fieldLevelInstrumentation;\n    const fieldLevelInstrumentation = typeof fieldLevelInstrumentationOption === 'number'\n        ? async () => Math.random() < fieldLevelInstrumentationOption\n            ? 1 / fieldLevelInstrumentationOption\n            : 0\n        : fieldLevelInstrumentationOption\n            ? fieldLevelInstrumentationOption\n            : async () => true;\n    let requestDidStartHandler = null;\n    return (0,_internalPlugin_js__WEBPACK_IMPORTED_MODULE_7__.internalPlugin)({\n        __internal_plugin_id__: 'UsageReporting',\n        __is_disabled_plugin__: false,\n        async requestDidStart(requestContext) {\n            if (requestDidStartHandler) {\n                return requestDidStartHandler(requestContext);\n            }\n            return {};\n        },\n        async serverWillStart({ logger: serverLogger, apollo, startedInBackground, schema, }) {\n            const logger = options.logger ?? serverLogger;\n            const { key, graphRef } = apollo;\n            if (!(key && graphRef)) {\n                throw new Error(\"You've enabled usage reporting via ApolloServerPluginUsageReporting, \" +\n                    'but you also need to provide your Apollo API key and graph ref, via ' +\n                    'the APOLLO_KEY/APOLLO_GRAPH_REF environment ' +\n                    'variables or via `new ApolloServer({apollo: {key, graphRef})`.');\n            }\n            if ((0,_schemaIsSubgraph_js__WEBPACK_IMPORTED_MODULE_15__.schemaIsSubgraph)(schema)) {\n                if (options.__onlyIfSchemaIsNotSubgraph) {\n                    logger.warn('You have specified an Apollo API key and graph ref but this server appears ' +\n                        'to be a subgraph. Typically usage reports are sent to Apollo by your Router ' +\n                        'or Gateway, not directly from your subgraph; usage reporting is disabled. To ' +\n                        'enable usage reporting anyway, explicitly install `ApolloServerPluginUsageReporting`. ' +\n                        'To disable this warning, install `ApolloServerPluginUsageReportingDisabled`.');\n                    return {};\n                }\n                else {\n                    logger.warn('You have installed `ApolloServerPluginUsageReporting` but this server appears to ' +\n                        'be a subgraph. Typically usage reports are sent to Apollo by your Router ' +\n                        'or Gateway, not directly from your subgraph. If this was unintentional, remove ' +\n                        \"`ApolloServerPluginUsageReporting` from your server's `plugins` array.\");\n                }\n            }\n            logger.info('Apollo usage reporting starting! See your graph at ' +\n                `https://studio.apollographql.com/graph/${encodeURI(graphRef)}/`);\n            const sendReportsImmediately = options.sendReportsImmediately ?? startedInBackground;\n            let operationDerivedDataCache = null;\n            const reportByExecutableSchemaId = new Map();\n            const getReportWhichMustBeUsedImmediately = (executableSchemaId) => {\n                const existing = reportByExecutableSchemaId.get(executableSchemaId);\n                if (existing) {\n                    return existing;\n                }\n                const report = new _stats_js__WEBPACK_IMPORTED_MODULE_11__.OurReport(new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.ReportHeader({\n                    ...reportHeaderDefaults,\n                    executableSchemaId,\n                    graphRef,\n                }));\n                reportByExecutableSchemaId.set(executableSchemaId, report);\n                return report;\n            };\n            const getAndDeleteReport = (executableSchemaId) => {\n                const report = reportByExecutableSchemaId.get(executableSchemaId);\n                if (report) {\n                    reportByExecutableSchemaId.delete(executableSchemaId);\n                    return report;\n                }\n                return null;\n            };\n            const overriddenExecutableSchemaId = options.overrideReportedSchema\n                ? (0,_utils_computeCoreSchemaHash_js__WEBPACK_IMPORTED_MODULE_14__.computeCoreSchemaHash)(options.overrideReportedSchema)\n                : undefined;\n            let lastSeenExecutableSchemaToId;\n            let reportTimer;\n            if (!sendReportsImmediately) {\n                reportTimer = setInterval(() => sendAllReportsAndReportErrors(), options.reportIntervalMs || 10 * 1000);\n            }\n            let sendTraces = options.sendTraces ?? true;\n            const sendOperationAsTrace = options.experimental_sendOperationAsTrace ??\n                (0,_defaultSendOperationsAsTrace_js__WEBPACK_IMPORTED_MODULE_9__.defaultSendOperationsAsTrace)();\n            let stopped = false;\n            function executableSchemaIdForSchema(schema) {\n                if (lastSeenExecutableSchemaToId?.executableSchema === schema) {\n                    return lastSeenExecutableSchemaToId.executableSchemaId;\n                }\n                const id = (0,_utils_computeCoreSchemaHash_js__WEBPACK_IMPORTED_MODULE_14__.computeCoreSchemaHash)((0,graphql__WEBPACK_IMPORTED_MODULE_16__.printSchema)(schema));\n                lastSeenExecutableSchemaToId = {\n                    executableSchema: schema,\n                    executableSchemaId: id,\n                };\n                return id;\n            }\n            async function sendAllReportsAndReportErrors() {\n                await Promise.all([...reportByExecutableSchemaId.keys()].map((executableSchemaId) => sendReportAndReportErrors(executableSchemaId)));\n            }\n            async function sendReportAndReportErrors(executableSchemaId) {\n                return sendReport(executableSchemaId).catch((err) => {\n                    if (options.reportErrorFunction) {\n                        options.reportErrorFunction(err);\n                    }\n                    else {\n                        logger.error(err.message);\n                    }\n                });\n            }\n            const sendReport = async (executableSchemaId) => {\n                let report = getAndDeleteReport(executableSchemaId);\n                if (!report ||\n                    (Object.keys(report.tracesPerQuery).length === 0 &&\n                        report.operationCount === 0)) {\n                    return;\n                }\n                report.endTime = (0,_traceTreeBuilder_js__WEBPACK_IMPORTED_MODULE_8__.dateToProtoTimestamp)(new Date());\n                report.ensureCountsAreIntegers();\n                const protobufError = _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Report.verify(report);\n                if (protobufError) {\n                    throw new Error(`Error verifying report: ${protobufError}`);\n                }\n                let message = _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Report.encode(report).finish();\n                report = null;\n                if (options.debugPrintReports) {\n                    const decodedReport = _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Report.decode(message);\n                    logger.info(`Apollo usage report: ${JSON.stringify(decodedReport.toJSON())}`);\n                }\n                const compressed = await new Promise((resolve, reject) => {\n                    (0,zlib__WEBPACK_IMPORTED_MODULE_6__.gzip)(message, (error, result) => {\n                        error ? reject(error) : resolve(result);\n                    });\n                });\n                message = null;\n                const fetcher = options.fetcher ?? node_fetch__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\n                const response = await async_retry__WEBPACK_IMPORTED_MODULE_2__(async () => {\n                    const controller = new node_abort_controller__WEBPACK_IMPORTED_MODULE_3__.AbortController();\n                    const abortTimeout = setTimeout(() => {\n                        controller.abort();\n                    }, options.requestTimeoutMs ?? 30000);\n                    let curResponse;\n                    try {\n                        curResponse = await fetcher((options.endpointUrl ||\n                            'https://usage-reporting.api.apollographql.com') +\n                            '/api/ingress/traces', {\n                            method: 'POST',\n                            headers: {\n                                'user-agent': 'ApolloServerPluginUsageReporting',\n                                'x-api-key': key,\n                                'content-encoding': 'gzip',\n                                accept: 'application/json',\n                            },\n                            body: compressed,\n                            signal: controller.signal,\n                        });\n                    }\n                    finally {\n                        clearTimeout(abortTimeout);\n                    }\n                    if (curResponse.status >= 500 && curResponse.status < 600) {\n                        throw new Error(`HTTP status ${curResponse.status}, ${(await curResponse.text()) || '(no body)'}`);\n                    }\n                    else {\n                        return curResponse;\n                    }\n                }, {\n                    retries: (options.maxAttempts || 5) - 1,\n                    minTimeout: options.minimumRetryDelayMs || 100,\n                    factor: 2,\n                }).catch((err) => {\n                    throw new Error(`Error sending report to Apollo servers: ${err.message}`);\n                });\n                if (response.status < 200 || response.status >= 300) {\n                    throw new Error(`Error sending report to Apollo servers: HTTP status ${response.status}, ${(await response.text()) || '(no body)'}`);\n                }\n                if (sendTraces &&\n                    response.status === 200 &&\n                    response.headers\n                        .get('content-type')\n                        ?.match(/^\\s*application\\/json\\s*(?:;|$)/i)) {\n                    const body = await response.text();\n                    let parsedBody;\n                    try {\n                        parsedBody = JSON.parse(body);\n                    }\n                    catch (e) {\n                        throw new Error(`Error parsing response from Apollo servers: ${e}`);\n                    }\n                    if (parsedBody.tracesIgnored === true) {\n                        logger.debug(\"This graph's organization does not have access to traces; sending all \" +\n                            'subsequent operations as stats.');\n                        sendTraces = false;\n                    }\n                }\n                if (options.debugPrintReports) {\n                    logger.info(`Apollo usage report: status ${response.status}`);\n                }\n            };\n            requestDidStartHandler = ({ metrics, schema, request: { http, variables }, }) => {\n                const treeBuilder = new _traceTreeBuilder_js__WEBPACK_IMPORTED_MODULE_8__.TraceTreeBuilder({\n                    maskedBy: 'ApolloServerPluginUsageReporting',\n                    sendErrors: options.sendErrors,\n                });\n                treeBuilder.startTiming();\n                metrics.startHrTime = treeBuilder.startHrTime;\n                let graphqlValidationFailure = false;\n                let graphqlUnknownOperationName = false;\n                let includeOperationInUsageReporting = null;\n                if (http) {\n                    treeBuilder.trace.http = new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.HTTP({\n                        method: _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.HTTP.Method[http.method] || _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.HTTP.Method.UNKNOWN,\n                    });\n                    if (options.sendHeaders) {\n                        makeHTTPRequestHeaders(treeBuilder.trace.http, http.headers, options.sendHeaders);\n                    }\n                }\n                async function maybeCallIncludeRequestHook(requestContext) {\n                    if (includeOperationInUsageReporting !== null)\n                        return;\n                    if (typeof options.includeRequest !== 'function') {\n                        includeOperationInUsageReporting = true;\n                        return;\n                    }\n                    includeOperationInUsageReporting =\n                        await options.includeRequest(requestContext);\n                    if (typeof includeOperationInUsageReporting !== 'boolean') {\n                        logger.warn(\"The 'includeRequest' async predicate function must return a boolean value.\");\n                        includeOperationInUsageReporting = true;\n                    }\n                }\n                let didResolveSource = false;\n                return {\n                    async didResolveSource(requestContext) {\n                        didResolveSource = true;\n                        if (metrics.persistedQueryHit) {\n                            treeBuilder.trace.persistedQueryHit = true;\n                        }\n                        if (metrics.persistedQueryRegister) {\n                            treeBuilder.trace.persistedQueryRegister = true;\n                        }\n                        if (variables) {\n                            treeBuilder.trace.details = (0,_traceDetails_js__WEBPACK_IMPORTED_MODULE_12__.makeTraceDetails)(variables, options.sendVariableValues, requestContext.source);\n                        }\n                        const clientInfo = (options.generateClientInfo || defaultGenerateClientInfo)(requestContext);\n                        if (clientInfo) {\n                            const { clientName, clientVersion } = clientInfo;\n                            treeBuilder.trace.clientVersion = clientVersion || '';\n                            treeBuilder.trace.clientName = clientName || '';\n                        }\n                    },\n                    async validationDidStart() {\n                        return async (validationErrors) => {\n                            graphqlValidationFailure = validationErrors\n                                ? validationErrors.length !== 0\n                                : false;\n                        };\n                    },\n                    async didResolveOperation(requestContext) {\n                        graphqlUnknownOperationName =\n                            requestContext.operation === undefined;\n                        await maybeCallIncludeRequestHook(requestContext);\n                        if (includeOperationInUsageReporting &&\n                            !graphqlUnknownOperationName) {\n                            if (metrics.captureTraces === undefined) {\n                                const rawWeight = await fieldLevelInstrumentation(requestContext);\n                                treeBuilder.trace.fieldExecutionWeight =\n                                    typeof rawWeight === 'number' ? rawWeight : rawWeight ? 1 : 0;\n                                metrics.captureTraces =\n                                    !!treeBuilder.trace.fieldExecutionWeight;\n                            }\n                        }\n                    },\n                    async executionDidStart() {\n                        if (!metrics.captureTraces)\n                            return;\n                        return {\n                            willResolveField({ info }) {\n                                return treeBuilder.willResolveField(info);\n                            },\n                        };\n                    },\n                    async didEncounterSubsequentErrors(_requestContext, errors) {\n                        treeBuilder.didEncounterErrors(errors);\n                    },\n                    async willSendSubsequentPayload(requestContext, payload) {\n                        if (!payload.hasNext) {\n                            await operationFinished(requestContext);\n                        }\n                    },\n                    async willSendResponse(requestContext) {\n                        if (!didResolveSource)\n                            return;\n                        if (requestContext.errors) {\n                            treeBuilder.didEncounterErrors(requestContext.errors);\n                        }\n                        if (requestContext.response.body.kind === 'single') {\n                            await operationFinished(requestContext);\n                        }\n                    },\n                };\n                async function operationFinished(requestContext) {\n                    const resolvedOperation = !!requestContext.operation;\n                    await maybeCallIncludeRequestHook(requestContext);\n                    treeBuilder.stopTiming();\n                    const executableSchemaId = overriddenExecutableSchemaId ?? executableSchemaIdForSchema(schema);\n                    if (includeOperationInUsageReporting === false) {\n                        if (resolvedOperation) {\n                            getReportWhichMustBeUsedImmediately(executableSchemaId)\n                                .operationCount++;\n                        }\n                        return;\n                    }\n                    treeBuilder.trace.fullQueryCacheHit = !!metrics.responseCacheHit;\n                    treeBuilder.trace.forbiddenOperation = !!metrics.forbiddenOperation;\n                    treeBuilder.trace.registeredOperation = !!metrics.registeredOperation;\n                    const policyIfCacheable = requestContext.overallCachePolicy.policyIfCacheable();\n                    if (policyIfCacheable) {\n                        treeBuilder.trace.cachePolicy = new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.CachePolicy({\n                            scope: policyIfCacheable.scope === 'PRIVATE'\n                                ? _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.CachePolicy.Scope.PRIVATE\n                                : policyIfCacheable.scope === 'PUBLIC'\n                                    ? _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.CachePolicy.Scope.PUBLIC\n                                    : _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.CachePolicy.Scope.UNKNOWN,\n                            maxAgeNs: policyIfCacheable.maxAge * 1e9,\n                        });\n                    }\n                    if (metrics.queryPlanTrace) {\n                        treeBuilder.trace.queryPlan = metrics.queryPlanTrace;\n                    }\n                    addTrace().catch(logger.error);\n                    async function addTrace() {\n                        if (stopped) {\n                            return;\n                        }\n                        await new Promise((res) => setImmediate(res));\n                        const executableSchemaId = overriddenExecutableSchemaId ??\n                            executableSchemaIdForSchema(schema);\n                        const { trace } = treeBuilder;\n                        let statsReportKey = undefined;\n                        let referencedFieldsByType;\n                        if (!requestContext.document) {\n                            statsReportKey = `## GraphQLParseFailure\\n`;\n                        }\n                        else if (graphqlValidationFailure) {\n                            statsReportKey = `## GraphQLValidationFailure\\n`;\n                        }\n                        else if (graphqlUnknownOperationName) {\n                            statsReportKey = `## GraphQLUnknownOperationName\\n`;\n                        }\n                        const isExecutable = statsReportKey === undefined;\n                        if (statsReportKey) {\n                            if (options.sendUnexecutableOperationDocuments) {\n                                trace.unexecutedOperationBody = requestContext.source;\n                                trace.unexecutedOperationName =\n                                    requestContext.request.operationName || '';\n                            }\n                            referencedFieldsByType = Object.create(null);\n                        }\n                        else {\n                            const operationDerivedData = getOperationDerivedData();\n                            statsReportKey = `# ${requestContext.operationName || '-'}\\n${operationDerivedData.signature}`;\n                            referencedFieldsByType =\n                                operationDerivedData.referencedFieldsByType;\n                        }\n                        const protobufError = _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.verify(trace);\n                        if (protobufError) {\n                            throw new Error(`Error encoding trace: ${protobufError}`);\n                        }\n                        if (resolvedOperation) {\n                            getReportWhichMustBeUsedImmediately(executableSchemaId)\n                                .operationCount++;\n                        }\n                        getReportWhichMustBeUsedImmediately(executableSchemaId).addTrace({\n                            statsReportKey,\n                            trace,\n                            asTrace: sendTraces &&\n                                (!isExecutable || !!metrics.captureTraces) &&\n                                !metrics.nonFtv1ErrorPaths?.length &&\n                                sendOperationAsTrace(trace, statsReportKey),\n                            referencedFieldsByType,\n                            nonFtv1ErrorPaths: metrics.nonFtv1ErrorPaths ?? [],\n                        });\n                        if (sendReportsImmediately ||\n                            getReportWhichMustBeUsedImmediately(executableSchemaId)\n                                .sizeEstimator.bytes >=\n                                (options.maxUncompressedReportSize || 4 * 1024 * 1024)) {\n                            await sendReportAndReportErrors(executableSchemaId);\n                        }\n                    }\n                    function getOperationDerivedData() {\n                        if (!requestContext.document) {\n                            throw new Error('No document?');\n                        }\n                        const cacheKey = (0,_operationDerivedDataCache_js__WEBPACK_IMPORTED_MODULE_10__.operationDerivedDataCacheKey)(requestContext.queryHash, requestContext.operationName || '');\n                        if (!operationDerivedDataCache ||\n                            operationDerivedDataCache.forSchema !== schema) {\n                            operationDerivedDataCache = {\n                                forSchema: schema,\n                                cache: (0,_operationDerivedDataCache_js__WEBPACK_IMPORTED_MODULE_10__.createOperationDerivedDataCache)({ logger }),\n                            };\n                        }\n                        const cachedOperationDerivedData = operationDerivedDataCache.cache.get(cacheKey);\n                        if (cachedOperationDerivedData) {\n                            return cachedOperationDerivedData;\n                        }\n                        const generatedSignature = (options.calculateSignature || _apollo_utils_usagereporting__WEBPACK_IMPORTED_MODULE_1__.usageReportingSignature)(requestContext.document, requestContext.operationName || '');\n                        const generatedOperationDerivedData = {\n                            signature: generatedSignature,\n                            referencedFieldsByType: (0,_apollo_utils_usagereporting__WEBPACK_IMPORTED_MODULE_1__.calculateReferencedFieldsByType)({\n                                document: requestContext.document,\n                                schema,\n                                resolvedOperationName: requestContext.operationName ?? null,\n                            }),\n                        };\n                        operationDerivedDataCache.cache.set(cacheKey, generatedOperationDerivedData);\n                        return generatedOperationDerivedData;\n                    }\n                }\n            };\n            return {\n                async serverWillStop() {\n                    if (reportTimer) {\n                        clearInterval(reportTimer);\n                        reportTimer = undefined;\n                    }\n                    stopped = true;\n                    await sendAllReportsAndReportErrors();\n                },\n            };\n        },\n    });\n}\nfunction makeHTTPRequestHeaders(http, headers, sendHeaders) {\n    if (!sendHeaders ||\n        ('none' in sendHeaders && sendHeaders.none) ||\n        ('all' in sendHeaders && !sendHeaders.all)) {\n        return;\n    }\n    for (const [key, value] of headers) {\n        if (('exceptNames' in sendHeaders &&\n            sendHeaders.exceptNames.some((exceptHeader) => {\n                return exceptHeader.toLowerCase() === key;\n            })) ||\n            ('onlyNames' in sendHeaders &&\n                !sendHeaders.onlyNames.some((header) => {\n                    return header.toLowerCase() === key;\n                }))) {\n            continue;\n        }\n        switch (key) {\n            case 'authorization':\n            case 'cookie':\n            case 'set-cookie':\n                break;\n            default:\n                http.requestHeaders[key] = new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.HTTP.Values({\n                    value: [value],\n                });\n        }\n    }\n}\nfunction defaultGenerateClientInfo({ request, }) {\n    const clientNameHeaderKey = 'apollographql-client-name';\n    const clientVersionHeaderKey = 'apollographql-client-version';\n    if (request.http?.headers?.get(clientNameHeaderKey) ||\n        request.http?.headers?.get(clientVersionHeaderKey)) {\n        return {\n            clientName: request.http?.headers?.get(clientNameHeaderKey),\n            clientVersion: request.http?.headers?.get(clientVersionHeaderKey),\n        };\n    }\n    else if (request.extensions?.clientInfo) {\n        return request.extensions.clientInfo;\n    }\n    else {\n        return {};\n    }\n}\n//# sourceMappingURL=plugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3BsdWdpbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStFO0FBQzBCO0FBQ3pFO0FBQ007QUFDa0I7QUFDekI7QUFDWDtBQUNRO0FBQzZCO0FBQ3VCO0FBQ0M7QUFDK0I7QUFDekU7QUFDYztBQUNjO0FBQ1U7QUFDbkI7QUFDMUQ7QUFDQSxjQUFjLHdDQUFXO0FBQ3pCLG9DQUFvQyx5RUFBYyxDQUFDO0FBQ25ELDRCQUE0QixnQkFBZ0I7QUFDNUMsY0FBYyx3Q0FBVyxHQUFHLElBQUksb0NBQU8sR0FBRyxJQUFJLHVDQUFVLEdBQUcsSUFBSSxvQ0FBTyxHQUFHO0FBQ3pFO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtFQUFjO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGdDQUFnQyw0REFBNEQ7QUFDNUY7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELFNBQVMsY0FBYztBQUNoRjtBQUNBLGdCQUFnQix1RUFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxvQkFBb0I7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxpREFBUyxLQUFLLDBFQUFZO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUZBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNB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QUFDQSwrQ0FBK0MsbUVBQUs7QUFDcEQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFVBQVU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3BsdWdpbi5qcz9hMTBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcG9ydCwgUmVwb3J0SGVhZGVyLCBUcmFjZSB9IGZyb20gJ0BhcG9sbG8vdXNhZ2UtcmVwb3J0aW5nLXByb3RvYnVmJztcbmltcG9ydCB7IHVzYWdlUmVwb3J0aW5nU2lnbmF0dXJlLCBjYWxjdWxhdGVSZWZlcmVuY2VkRmllbGRzQnlUeXBlLCB9IGZyb20gJ0BhcG9sbG8vdXRpbHMudXNhZ2VyZXBvcnRpbmcnO1xuaW1wb3J0IHJldHJ5IGZyb20gJ2FzeW5jLXJldHJ5JztcbmltcG9ydCB7IHByaW50U2NoZW1hIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBBYm9ydENvbnRyb2xsZXIgfSBmcm9tICdub2RlLWFib3J0LWNvbnRyb2xsZXInO1xuaW1wb3J0IGZldGNoIGZyb20gJ25vZGUtZmV0Y2gnO1xuaW1wb3J0IG9zIGZyb20gJ29zJztcbmltcG9ydCB7IGd6aXAgfSBmcm9tICd6bGliJztcbmltcG9ydCB7IGludGVybmFsUGx1Z2luIH0gZnJvbSAnLi4vLi4vaW50ZXJuYWxQbHVnaW4uanMnO1xuaW1wb3J0IHsgZGF0ZVRvUHJvdG9UaW1lc3RhbXAsIFRyYWNlVHJlZUJ1aWxkZXIgfSBmcm9tICcuLi90cmFjZVRyZWVCdWlsZGVyLmpzJztcbmltcG9ydCB7IGRlZmF1bHRTZW5kT3BlcmF0aW9uc0FzVHJhY2UgfSBmcm9tICcuL2RlZmF1bHRTZW5kT3BlcmF0aW9uc0FzVHJhY2UuanMnO1xuaW1wb3J0IHsgY3JlYXRlT3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZSwgb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZUtleSwgfSBmcm9tICcuL29wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUuanMnO1xuaW1wb3J0IHsgT3VyUmVwb3J0IH0gZnJvbSAnLi9zdGF0cy5qcyc7XG5pbXBvcnQgeyBtYWtlVHJhY2VEZXRhaWxzIH0gZnJvbSAnLi90cmFjZURldGFpbHMuanMnO1xuaW1wb3J0IHsgcGFja2FnZVZlcnNpb24gfSBmcm9tICcuLi8uLi9nZW5lcmF0ZWQvcGFja2FnZVZlcnNpb24uanMnO1xuaW1wb3J0IHsgY29tcHV0ZUNvcmVTY2hlbWFIYXNoIH0gZnJvbSAnLi4vLi4vdXRpbHMvY29tcHV0ZUNvcmVTY2hlbWFIYXNoLmpzJztcbmltcG9ydCB7IHNjaGVtYUlzU3ViZ3JhcGggfSBmcm9tICcuLi9zY2hlbWFJc1N1YmdyYXBoLmpzJztcbmNvbnN0IHJlcG9ydEhlYWRlckRlZmF1bHRzID0ge1xuICAgIGhvc3RuYW1lOiBvcy5ob3N0bmFtZSgpLFxuICAgIGFnZW50VmVyc2lvbjogYEBhcG9sbG8vc2VydmVyQCR7cGFja2FnZVZlcnNpb259YCxcbiAgICBydW50aW1lVmVyc2lvbjogYG5vZGUgJHtwcm9jZXNzLnZlcnNpb259YCxcbiAgICB1bmFtZTogYCR7b3MucGxhdGZvcm0oKX0sICR7b3MudHlwZSgpfSwgJHtvcy5yZWxlYXNlKCl9LCAke29zLmFyY2goKX0pYCxcbn07XG5leHBvcnQgZnVuY3Rpb24gQXBvbGxvU2VydmVyUGx1Z2luVXNhZ2VSZXBvcnRpbmcob3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCkpIHtcbiAgICBjb25zdCBmaWVsZExldmVsSW5zdHJ1bWVudGF0aW9uT3B0aW9uID0gb3B0aW9ucy5maWVsZExldmVsSW5zdHJ1bWVudGF0aW9uO1xuICAgIGNvbnN0IGZpZWxkTGV2ZWxJbnN0cnVtZW50YXRpb24gPSB0eXBlb2YgZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbk9wdGlvbiA9PT0gJ251bWJlcidcbiAgICAgICAgPyBhc3luYyAoKSA9PiBNYXRoLnJhbmRvbSgpIDwgZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbk9wdGlvblxuICAgICAgICAgICAgPyAxIC8gZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbk9wdGlvblxuICAgICAgICAgICAgOiAwXG4gICAgICAgIDogZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbk9wdGlvblxuICAgICAgICAgICAgPyBmaWVsZExldmVsSW5zdHJ1bWVudGF0aW9uT3B0aW9uXG4gICAgICAgICAgICA6IGFzeW5jICgpID0+IHRydWU7XG4gICAgbGV0IHJlcXVlc3REaWRTdGFydEhhbmRsZXIgPSBudWxsO1xuICAgIHJldHVybiBpbnRlcm5hbFBsdWdpbih7XG4gICAgICAgIF9faW50ZXJuYWxfcGx1Z2luX2lkX186ICdVc2FnZVJlcG9ydGluZycsXG4gICAgICAgIF9faXNfZGlzYWJsZWRfcGx1Z2luX186IGZhbHNlLFxuICAgICAgICBhc3luYyByZXF1ZXN0RGlkU3RhcnQocmVxdWVzdENvbnRleHQpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0RGlkU3RhcnRIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3REaWRTdGFydEhhbmRsZXIocmVxdWVzdENvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBzZXJ2ZXJXaWxsU3RhcnQoeyBsb2dnZXI6IHNlcnZlckxvZ2dlciwgYXBvbGxvLCBzdGFydGVkSW5CYWNrZ3JvdW5kLCBzY2hlbWEsIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IGxvZ2dlciA9IG9wdGlvbnMubG9nZ2VyID8/IHNlcnZlckxvZ2dlcjtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCBncmFwaFJlZiB9ID0gYXBvbGxvO1xuICAgICAgICAgICAgaWYgKCEoa2V5ICYmIGdyYXBoUmVmKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSd2ZSBlbmFibGVkIHVzYWdlIHJlcG9ydGluZyB2aWEgQXBvbGxvU2VydmVyUGx1Z2luVXNhZ2VSZXBvcnRpbmcsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgJ2J1dCB5b3UgYWxzbyBuZWVkIHRvIHByb3ZpZGUgeW91ciBBcG9sbG8gQVBJIGtleSBhbmQgZ3JhcGggcmVmLCB2aWEgJyArXG4gICAgICAgICAgICAgICAgICAgICd0aGUgQVBPTExPX0tFWS9BUE9MTE9fR1JBUEhfUkVGIGVudmlyb25tZW50ICcgK1xuICAgICAgICAgICAgICAgICAgICAndmFyaWFibGVzIG9yIHZpYSBgbmV3IEFwb2xsb1NlcnZlcih7YXBvbGxvOiB7a2V5LCBncmFwaFJlZn0pYC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzY2hlbWFJc1N1YmdyYXBoKHNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5fX29ubHlJZlNjaGVtYUlzTm90U3ViZ3JhcGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1lvdSBoYXZlIHNwZWNpZmllZCBhbiBBcG9sbG8gQVBJIGtleSBhbmQgZ3JhcGggcmVmIGJ1dCB0aGlzIHNlcnZlciBhcHBlYXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3RvIGJlIGEgc3ViZ3JhcGguIFR5cGljYWxseSB1c2FnZSByZXBvcnRzIGFyZSBzZW50IHRvIEFwb2xsbyBieSB5b3VyIFJvdXRlciAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvciBHYXRld2F5LCBub3QgZGlyZWN0bHkgZnJvbSB5b3VyIHN1YmdyYXBoOyB1c2FnZSByZXBvcnRpbmcgaXMgZGlzYWJsZWQuIFRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2VuYWJsZSB1c2FnZSByZXBvcnRpbmcgYW55d2F5LCBleHBsaWNpdGx5IGluc3RhbGwgYEFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nYC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnVG8gZGlzYWJsZSB0aGlzIHdhcm5pbmcsIGluc3RhbGwgYEFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nRGlzYWJsZWRgLicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignWW91IGhhdmUgaW5zdGFsbGVkIGBBcG9sbG9TZXJ2ZXJQbHVnaW5Vc2FnZVJlcG9ydGluZ2AgYnV0IHRoaXMgc2VydmVyIGFwcGVhcnMgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmUgYSBzdWJncmFwaC4gVHlwaWNhbGx5IHVzYWdlIHJlcG9ydHMgYXJlIHNlbnQgdG8gQXBvbGxvIGJ5IHlvdXIgUm91dGVyICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ29yIEdhdGV3YXksIG5vdCBkaXJlY3RseSBmcm9tIHlvdXIgc3ViZ3JhcGguIElmIHRoaXMgd2FzIHVuaW50ZW50aW9uYWwsIHJlbW92ZSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYEFwb2xsb1NlcnZlclBsdWdpblVzYWdlUmVwb3J0aW5nYCBmcm9tIHlvdXIgc2VydmVyJ3MgYHBsdWdpbnNgIGFycmF5LlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnQXBvbGxvIHVzYWdlIHJlcG9ydGluZyBzdGFydGluZyEgU2VlIHlvdXIgZ3JhcGggYXQgJyArXG4gICAgICAgICAgICAgICAgYGh0dHBzOi8vc3R1ZGlvLmFwb2xsb2dyYXBocWwuY29tL2dyYXBoLyR7ZW5jb2RlVVJJKGdyYXBoUmVmKX0vYCk7XG4gICAgICAgICAgICBjb25zdCBzZW5kUmVwb3J0c0ltbWVkaWF0ZWx5ID0gb3B0aW9ucy5zZW5kUmVwb3J0c0ltbWVkaWF0ZWx5ID8/IHN0YXJ0ZWRJbkJhY2tncm91bmQ7XG4gICAgICAgICAgICBsZXQgb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZSA9IG51bGw7XG4gICAgICAgICAgICBjb25zdCByZXBvcnRCeUV4ZWN1dGFibGVTY2hlbWFJZCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGNvbnN0IGdldFJlcG9ydFdoaWNoTXVzdEJlVXNlZEltbWVkaWF0ZWx5ID0gKGV4ZWN1dGFibGVTY2hlbWFJZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcmVwb3J0QnlFeGVjdXRhYmxlU2NoZW1hSWQuZ2V0KGV4ZWN1dGFibGVTY2hlbWFJZCk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwb3J0ID0gbmV3IE91clJlcG9ydChuZXcgUmVwb3J0SGVhZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVwb3J0SGVhZGVyRGVmYXVsdHMsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGFibGVTY2hlbWFJZCxcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGhSZWYsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJlcG9ydEJ5RXhlY3V0YWJsZVNjaGVtYUlkLnNldChleGVjdXRhYmxlU2NoZW1hSWQsIHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBnZXRBbmREZWxldGVSZXBvcnQgPSAoZXhlY3V0YWJsZVNjaGVtYUlkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwb3J0ID0gcmVwb3J0QnlFeGVjdXRhYmxlU2NoZW1hSWQuZ2V0KGV4ZWN1dGFibGVTY2hlbWFJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRCeUV4ZWN1dGFibGVTY2hlbWFJZC5kZWxldGUoZXhlY3V0YWJsZVNjaGVtYUlkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgb3ZlcnJpZGRlbkV4ZWN1dGFibGVTY2hlbWFJZCA9IG9wdGlvbnMub3ZlcnJpZGVSZXBvcnRlZFNjaGVtYVxuICAgICAgICAgICAgICAgID8gY29tcHV0ZUNvcmVTY2hlbWFIYXNoKG9wdGlvbnMub3ZlcnJpZGVSZXBvcnRlZFNjaGVtYSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGxldCBsYXN0U2VlbkV4ZWN1dGFibGVTY2hlbWFUb0lkO1xuICAgICAgICAgICAgbGV0IHJlcG9ydFRpbWVyO1xuICAgICAgICAgICAgaWYgKCFzZW5kUmVwb3J0c0ltbWVkaWF0ZWx5KSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0VGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiBzZW5kQWxsUmVwb3J0c0FuZFJlcG9ydEVycm9ycygpLCBvcHRpb25zLnJlcG9ydEludGVydmFsTXMgfHwgMTAgKiAxMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzZW5kVHJhY2VzID0gb3B0aW9ucy5zZW5kVHJhY2VzID8/IHRydWU7XG4gICAgICAgICAgICBjb25zdCBzZW5kT3BlcmF0aW9uQXNUcmFjZSA9IG9wdGlvbnMuZXhwZXJpbWVudGFsX3NlbmRPcGVyYXRpb25Bc1RyYWNlID8/XG4gICAgICAgICAgICAgICAgZGVmYXVsdFNlbmRPcGVyYXRpb25zQXNUcmFjZSgpO1xuICAgICAgICAgICAgbGV0IHN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGFibGVTY2hlbWFJZEZvclNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdFNlZW5FeGVjdXRhYmxlU2NoZW1hVG9JZD8uZXhlY3V0YWJsZVNjaGVtYSA9PT0gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0U2VlbkV4ZWN1dGFibGVTY2hlbWFUb0lkLmV4ZWN1dGFibGVTY2hlbWFJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBjb21wdXRlQ29yZVNjaGVtYUhhc2gocHJpbnRTY2hlbWEoc2NoZW1hKSk7XG4gICAgICAgICAgICAgICAgbGFzdFNlZW5FeGVjdXRhYmxlU2NoZW1hVG9JZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0YWJsZVNjaGVtYTogc2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRhYmxlU2NoZW1hSWQ6IGlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2VuZEFsbFJlcG9ydHNBbmRSZXBvcnRFcnJvcnMoKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoWy4uLnJlcG9ydEJ5RXhlY3V0YWJsZVNjaGVtYUlkLmtleXMoKV0ubWFwKChleGVjdXRhYmxlU2NoZW1hSWQpID0+IHNlbmRSZXBvcnRBbmRSZXBvcnRFcnJvcnMoZXhlY3V0YWJsZVNjaGVtYUlkKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2VuZFJlcG9ydEFuZFJlcG9ydEVycm9ycyhleGVjdXRhYmxlU2NoZW1hSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlcG9ydChleGVjdXRhYmxlU2NoZW1hSWQpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVwb3J0RXJyb3JGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXBvcnRFcnJvckZ1bmN0aW9uKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZW5kUmVwb3J0ID0gYXN5bmMgKGV4ZWN1dGFibGVTY2hlbWFJZCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByZXBvcnQgPSBnZXRBbmREZWxldGVSZXBvcnQoZXhlY3V0YWJsZVNjaGVtYUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlcG9ydCB8fFxuICAgICAgICAgICAgICAgICAgICAoT2JqZWN0LmtleXMocmVwb3J0LnRyYWNlc1BlclF1ZXJ5KS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydC5vcGVyYXRpb25Db3VudCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXBvcnQuZW5kVGltZSA9IGRhdGVUb1Byb3RvVGltZXN0YW1wKG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgICAgIHJlcG9ydC5lbnN1cmVDb3VudHNBcmVJbnRlZ2VycygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3RvYnVmRXJyb3IgPSBSZXBvcnQudmVyaWZ5KHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgaWYgKHByb3RvYnVmRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciB2ZXJpZnlpbmcgcmVwb3J0OiAke3Byb3RvYnVmRXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gUmVwb3J0LmVuY29kZShyZXBvcnQpLmZpbmlzaCgpO1xuICAgICAgICAgICAgICAgIHJlcG9ydCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVidWdQcmludFJlcG9ydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjb2RlZFJlcG9ydCA9IFJlcG9ydC5kZWNvZGUobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBBcG9sbG8gdXNhZ2UgcmVwb3J0OiAke0pTT04uc3RyaW5naWZ5KGRlY29kZWRSZXBvcnQudG9KU09OKCkpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb21wcmVzc2VkID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBnemlwKG1lc3NhZ2UsIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA/IHJlamVjdChlcnJvcikgOiByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZldGNoZXIgPSBvcHRpb25zLmZldGNoZXIgPz8gZmV0Y2g7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFib3J0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zLnJlcXVlc3RUaW1lb3V0TXMgPz8gMzAwMDApO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJSZXNwb25zZSA9IGF3YWl0IGZldGNoZXIoKG9wdGlvbnMuZW5kcG9pbnRVcmwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly91c2FnZS1yZXBvcnRpbmcuYXBpLmFwb2xsb2dyYXBocWwuY29tJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcvYXBpL2luZ3Jlc3MvdHJhY2VzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3VzZXItYWdlbnQnOiAnQXBvbGxvU2VydmVyUGx1Z2luVXNhZ2VSZXBvcnRpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneC1hcGkta2V5Jzoga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29udGVudC1lbmNvZGluZyc6ICdnemlwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBjb21wcmVzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhYm9ydFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJSZXNwb25zZS5zdGF0dXMgPj0gNTAwICYmIGN1clJlc3BvbnNlLnN0YXR1cyA8IDYwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIHN0YXR1cyAke2N1clJlc3BvbnNlLnN0YXR1c30sICR7KGF3YWl0IGN1clJlc3BvbnNlLnRleHQoKSkgfHwgJyhubyBib2R5KSd9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VyUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXM6IChvcHRpb25zLm1heEF0dGVtcHRzIHx8IDUpIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgbWluVGltZW91dDogb3B0aW9ucy5taW5pbXVtUmV0cnlEZWxheU1zIHx8IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgZmFjdG9yOiAyLFxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBzZW5kaW5nIHJlcG9ydCB0byBBcG9sbG8gc2VydmVyczogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzIDwgMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBzZW5kaW5nIHJlcG9ydCB0byBBcG9sbG8gc2VydmVyczogSFRUUCBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9LCAkeyhhd2FpdCByZXNwb25zZS50ZXh0KCkpIHx8ICcobm8gYm9keSknfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VuZFRyYWNlcyAmJlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPT09IDIwMCAmJlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KCdjb250ZW50LXR5cGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgPy5tYXRjaCgvXlxccyphcHBsaWNhdGlvblxcL2pzb25cXHMqKD86O3wkKS9pKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkQm9keTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZEJvZHkgPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHBhcnNpbmcgcmVzcG9uc2UgZnJvbSBBcG9sbG8gc2VydmVyczogJHtlfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRCb2R5LnRyYWNlc0lnbm9yZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlRoaXMgZ3JhcGgncyBvcmdhbml6YXRpb24gZG9lcyBub3QgaGF2ZSBhY2Nlc3MgdG8gdHJhY2VzOyBzZW5kaW5nIGFsbCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N1YnNlcXVlbnQgb3BlcmF0aW9ucyBhcyBzdGF0cy4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUcmFjZXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWJ1Z1ByaW50UmVwb3J0cykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgQXBvbGxvIHVzYWdlIHJlcG9ydDogc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0RGlkU3RhcnRIYW5kbGVyID0gKHsgbWV0cmljcywgc2NoZW1hLCByZXF1ZXN0OiB7IGh0dHAsIHZhcmlhYmxlcyB9LCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZUJ1aWxkZXIgPSBuZXcgVHJhY2VUcmVlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgICAgIG1hc2tlZEJ5OiAnQXBvbGxvU2VydmVyUGx1Z2luVXNhZ2VSZXBvcnRpbmcnLFxuICAgICAgICAgICAgICAgICAgICBzZW5kRXJyb3JzOiBvcHRpb25zLnNlbmRFcnJvcnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIuc3RhcnRUaW1pbmcoKTtcbiAgICAgICAgICAgICAgICBtZXRyaWNzLnN0YXJ0SHJUaW1lID0gdHJlZUJ1aWxkZXIuc3RhcnRIclRpbWU7XG4gICAgICAgICAgICAgICAgbGV0IGdyYXBocWxWYWxpZGF0aW9uRmFpbHVyZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxldCBncmFwaHFsVW5rbm93bk9wZXJhdGlvbk5hbWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBsZXQgaW5jbHVkZU9wZXJhdGlvbkluVXNhZ2VSZXBvcnRpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChodHRwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLmh0dHAgPSBuZXcgVHJhY2UuSFRUUCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFRyYWNlLkhUVFAuTWV0aG9kW2h0dHAubWV0aG9kXSB8fCBUcmFjZS5IVFRQLk1ldGhvZC5VTktOT1dOLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2VuZEhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VIVFRQUmVxdWVzdEhlYWRlcnModHJlZUJ1aWxkZXIudHJhY2UuaHR0cCwgaHR0cC5oZWFkZXJzLCBvcHRpb25zLnNlbmRIZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBtYXliZUNhbGxJbmNsdWRlUmVxdWVzdEhvb2socmVxdWVzdENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVPcGVyYXRpb25JblVzYWdlUmVwb3J0aW5nICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuaW5jbHVkZVJlcXVlc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVPcGVyYXRpb25JblVzYWdlUmVwb3J0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlT3BlcmF0aW9uSW5Vc2FnZVJlcG9ydGluZyA9XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBvcHRpb25zLmluY2x1ZGVSZXF1ZXN0KHJlcXVlc3RDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmNsdWRlT3BlcmF0aW9uSW5Vc2FnZVJlcG9ydGluZyAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIlRoZSAnaW5jbHVkZVJlcXVlc3QnIGFzeW5jIHByZWRpY2F0ZSBmdW5jdGlvbiBtdXN0IHJldHVybiBhIGJvb2xlYW4gdmFsdWUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZU9wZXJhdGlvbkluVXNhZ2VSZXBvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBkaWRSZXNvbHZlU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgZGlkUmVzb2x2ZVNvdXJjZShyZXF1ZXN0Q29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlkUmVzb2x2ZVNvdXJjZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0cmljcy5wZXJzaXN0ZWRRdWVyeUhpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLnBlcnNpc3RlZFF1ZXJ5SGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRyaWNzLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5kZXRhaWxzID0gbWFrZVRyYWNlRGV0YWlscyh2YXJpYWJsZXMsIG9wdGlvbnMuc2VuZFZhcmlhYmxlVmFsdWVzLCByZXF1ZXN0Q29udGV4dC5zb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xpZW50SW5mbyA9IChvcHRpb25zLmdlbmVyYXRlQ2xpZW50SW5mbyB8fCBkZWZhdWx0R2VuZXJhdGVDbGllbnRJbmZvKShyZXF1ZXN0Q29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xpZW50SW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY2xpZW50TmFtZSwgY2xpZW50VmVyc2lvbiB9ID0gY2xpZW50SW5mbztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5jbGllbnRWZXJzaW9uID0gY2xpZW50VmVyc2lvbiB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5jbGllbnROYW1lID0gY2xpZW50TmFtZSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgdmFsaWRhdGlvbkRpZFN0YXJ0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFzeW5jICh2YWxpZGF0aW9uRXJyb3JzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGhxbFZhbGlkYXRpb25GYWlsdXJlID0gdmFsaWRhdGlvbkVycm9yc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoICE9PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhc3luYyBkaWRSZXNvbHZlT3BlcmF0aW9uKHJlcXVlc3RDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaHFsVW5rbm93bk9wZXJhdGlvbk5hbWUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0Lm9wZXJhdGlvbiA9PT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWF5YmVDYWxsSW5jbHVkZVJlcXVlc3RIb29rKHJlcXVlc3RDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlT3BlcmF0aW9uSW5Vc2FnZVJlcG9ydGluZyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFncmFwaHFsVW5rbm93bk9wZXJhdGlvbk5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0cmljcy5jYXB0dXJlVHJhY2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3V2VpZ2h0ID0gYXdhaXQgZmllbGRMZXZlbEluc3RydW1lbnRhdGlvbihyZXF1ZXN0Q29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLmZpZWxkRXhlY3V0aW9uV2VpZ2h0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiByYXdXZWlnaHQgPT09ICdudW1iZXInID8gcmF3V2VpZ2h0IDogcmF3V2VpZ2h0ID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldHJpY3MuY2FwdHVyZVRyYWNlcyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIXRyZWVCdWlsZGVyLnRyYWNlLmZpZWxkRXhlY3V0aW9uV2VpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgZXhlY3V0aW9uRGlkU3RhcnQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1ldHJpY3MuY2FwdHVyZVRyYWNlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGxSZXNvbHZlRmllbGQoeyBpbmZvIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyZWVCdWlsZGVyLndpbGxSZXNvbHZlRmllbGQoaW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIGRpZEVuY291bnRlclN1YnNlcXVlbnRFcnJvcnMoX3JlcXVlc3RDb250ZXh0LCBlcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLmRpZEVuY291bnRlckVycm9ycyhlcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhc3luYyB3aWxsU2VuZFN1YnNlcXVlbnRQYXlsb2FkKHJlcXVlc3RDb250ZXh0LCBwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBheWxvYWQuaGFzTmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG9wZXJhdGlvbkZpbmlzaGVkKHJlcXVlc3RDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2lsbFNlbmRSZXNwb25zZShyZXF1ZXN0Q29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkaWRSZXNvbHZlU291cmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Q29udGV4dC5lcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci5kaWRFbmNvdW50ZXJFcnJvcnMocmVxdWVzdENvbnRleHQuZXJyb3JzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5ib2R5LmtpbmQgPT09ICdzaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgb3BlcmF0aW9uRmluaXNoZWQocmVxdWVzdENvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gb3BlcmF0aW9uRmluaXNoZWQocmVxdWVzdENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRPcGVyYXRpb24gPSAhIXJlcXVlc3RDb250ZXh0Lm9wZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWF5YmVDYWxsSW5jbHVkZVJlcXVlc3RIb29rKHJlcXVlc3RDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIuc3RvcFRpbWluZygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGVjdXRhYmxlU2NoZW1hSWQgPSBvdmVycmlkZGVuRXhlY3V0YWJsZVNjaGVtYUlkID8/IGV4ZWN1dGFibGVTY2hlbWFJZEZvclNjaGVtYShzY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZU9wZXJhdGlvbkluVXNhZ2VSZXBvcnRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzb2x2ZWRPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRSZXBvcnRXaGljaE11c3RCZVVzZWRJbW1lZGlhdGVseShleGVjdXRhYmxlU2NoZW1hSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vcGVyYXRpb25Db3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLmZ1bGxRdWVyeUNhY2hlSGl0ID0gISFtZXRyaWNzLnJlc3BvbnNlQ2FjaGVIaXQ7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLmZvcmJpZGRlbk9wZXJhdGlvbiA9ICEhbWV0cmljcy5mb3JiaWRkZW5PcGVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRyZWVCdWlsZGVyLnRyYWNlLnJlZ2lzdGVyZWRPcGVyYXRpb24gPSAhIW1ldHJpY3MucmVnaXN0ZXJlZE9wZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5SWZDYWNoZWFibGUgPSByZXF1ZXN0Q29udGV4dC5vdmVyYWxsQ2FjaGVQb2xpY3kucG9saWN5SWZDYWNoZWFibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeUlmQ2FjaGVhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVlQnVpbGRlci50cmFjZS5jYWNoZVBvbGljeSA9IG5ldyBUcmFjZS5DYWNoZVBvbGljeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU6IHBvbGljeUlmQ2FjaGVhYmxlLnNjb3BlID09PSAnUFJJVkFURSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBUcmFjZS5DYWNoZVBvbGljeS5TY29wZS5QUklWQVRFXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcG9saWN5SWZDYWNoZWFibGUuc2NvcGUgPT09ICdQVUJMSUMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFRyYWNlLkNhY2hlUG9saWN5LlNjb3BlLlBVQkxJQ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBUcmFjZS5DYWNoZVBvbGljeS5TY29wZS5VTktOT1dOLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEFnZU5zOiBwb2xpY3lJZkNhY2hlYWJsZS5tYXhBZ2UgKiAxZTksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWV0cmljcy5xdWVyeVBsYW5UcmFjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUJ1aWxkZXIudHJhY2UucXVlcnlQbGFuID0gbWV0cmljcy5xdWVyeVBsYW5UcmFjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhZGRUcmFjZSgpLmNhdGNoKGxvZ2dlci5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGFkZFRyYWNlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRJbW1lZGlhdGUocmVzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGVjdXRhYmxlU2NoZW1hSWQgPSBvdmVycmlkZGVuRXhlY3V0YWJsZVNjaGVtYUlkID8/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0YWJsZVNjaGVtYUlkRm9yU2NoZW1hKHNjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHRyYWNlIH0gPSB0cmVlQnVpbGRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGF0c1JlcG9ydEtleSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWZlcmVuY2VkRmllbGRzQnlUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0Q29udGV4dC5kb2N1bWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzUmVwb3J0S2V5ID0gYCMjIEdyYXBoUUxQYXJzZUZhaWx1cmVcXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZ3JhcGhxbFZhbGlkYXRpb25GYWlsdXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHNSZXBvcnRLZXkgPSBgIyMgR3JhcGhRTFZhbGlkYXRpb25GYWlsdXJlXFxuYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdyYXBocWxVbmtub3duT3BlcmF0aW9uTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzUmVwb3J0S2V5ID0gYCMjIEdyYXBoUUxVbmtub3duT3BlcmF0aW9uTmFtZVxcbmA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0V4ZWN1dGFibGUgPSBzdGF0c1JlcG9ydEtleSA9PT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRzUmVwb3J0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2VuZFVuZXhlY3V0YWJsZU9wZXJhdGlvbkRvY3VtZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjZS51bmV4ZWN1dGVkT3BlcmF0aW9uQm9keSA9IHJlcXVlc3RDb250ZXh0LnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdENvbnRleHQucmVxdWVzdC5vcGVyYXRpb25OYW1lIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VkRmllbGRzQnlUeXBlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvbkRlcml2ZWREYXRhID0gZ2V0T3BlcmF0aW9uRGVyaXZlZERhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0c1JlcG9ydEtleSA9IGAjICR7cmVxdWVzdENvbnRleHQub3BlcmF0aW9uTmFtZSB8fCAnLSd9XFxuJHtvcGVyYXRpb25EZXJpdmVkRGF0YS5zaWduYXR1cmV9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VkRmllbGRzQnlUeXBlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGVyaXZlZERhdGEucmVmZXJlbmNlZEZpZWxkc0J5VHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3RvYnVmRXJyb3IgPSBUcmFjZS52ZXJpZnkodHJhY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3RvYnVmRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGVuY29kaW5nIHRyYWNlOiAke3Byb3RvYnVmRXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzb2x2ZWRPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRSZXBvcnRXaGljaE11c3RCZVVzZWRJbW1lZGlhdGVseShleGVjdXRhYmxlU2NoZW1hSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vcGVyYXRpb25Db3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmVwb3J0V2hpY2hNdXN0QmVVc2VkSW1tZWRpYXRlbHkoZXhlY3V0YWJsZVNjaGVtYUlkKS5hZGRUcmFjZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHNSZXBvcnRLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNUcmFjZTogc2VuZFRyYWNlcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWlzRXhlY3V0YWJsZSB8fCAhIW1ldHJpY3MuY2FwdHVyZVRyYWNlcykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIW1ldHJpY3Mubm9uRnR2MUVycm9yUGF0aHM/Lmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kT3BlcmF0aW9uQXNUcmFjZSh0cmFjZSwgc3RhdHNSZXBvcnRLZXkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uRnR2MUVycm9yUGF0aHM6IG1ldHJpY3Mubm9uRnR2MUVycm9yUGF0aHMgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZW5kUmVwb3J0c0ltbWVkaWF0ZWx5IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmVwb3J0V2hpY2hNdXN0QmVVc2VkSW1tZWRpYXRlbHkoZXhlY3V0YWJsZVNjaGVtYUlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2l6ZUVzdGltYXRvci5ieXRlcyA+PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob3B0aW9ucy5tYXhVbmNvbXByZXNzZWRSZXBvcnRTaXplIHx8IDQgKiAxMDI0ICogMTAyNCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVwb3J0QW5kUmVwb3J0RXJyb3JzKGV4ZWN1dGFibGVTY2hlbWFJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0T3BlcmF0aW9uRGVyaXZlZERhdGEoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3RDb250ZXh0LmRvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkb2N1bWVudD8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZUtleShyZXF1ZXN0Q29udGV4dC5xdWVyeUhhc2gsIHJlcXVlc3RDb250ZXh0Lm9wZXJhdGlvbk5hbWUgfHwgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZS5mb3JTY2hlbWEgIT09IHNjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRlcml2ZWREYXRhQ2FjaGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvclNjaGVtYTogc2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZTogY3JlYXRlT3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZSh7IGxvZ2dlciB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkT3BlcmF0aW9uRGVyaXZlZERhdGEgPSBvcGVyYXRpb25EZXJpdmVkRGF0YUNhY2hlLmNhY2hlLmdldChjYWNoZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVkT3BlcmF0aW9uRGVyaXZlZERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkT3BlcmF0aW9uRGVyaXZlZERhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW5lcmF0ZWRTaWduYXR1cmUgPSAob3B0aW9ucy5jYWxjdWxhdGVTaWduYXR1cmUgfHwgdXNhZ2VSZXBvcnRpbmdTaWduYXR1cmUpKHJlcXVlc3RDb250ZXh0LmRvY3VtZW50LCByZXF1ZXN0Q29udGV4dC5vcGVyYXRpb25OYW1lIHx8ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZE9wZXJhdGlvbkRlcml2ZWREYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogZ2VuZXJhdGVkU2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGU6IGNhbGN1bGF0ZVJlZmVyZW5jZWRGaWVsZHNCeVR5cGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogcmVxdWVzdENvbnRleHQuZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRPcGVyYXRpb25OYW1lOiByZXF1ZXN0Q29udGV4dC5vcGVyYXRpb25OYW1lID8/IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGVyaXZlZERhdGFDYWNoZS5jYWNoZS5zZXQoY2FjaGVLZXksIGdlbmVyYXRlZE9wZXJhdGlvbkRlcml2ZWREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZWRPcGVyYXRpb25EZXJpdmVkRGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFzeW5jIHNlcnZlcldpbGxTdG9wKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVwb3J0VGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocmVwb3J0VGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0VGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRBbGxSZXBvcnRzQW5kUmVwb3J0RXJyb3JzKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZUhUVFBSZXF1ZXN0SGVhZGVycyhodHRwLCBoZWFkZXJzLCBzZW5kSGVhZGVycykge1xuICAgIGlmICghc2VuZEhlYWRlcnMgfHxcbiAgICAgICAgKCdub25lJyBpbiBzZW5kSGVhZGVycyAmJiBzZW5kSGVhZGVycy5ub25lKSB8fFxuICAgICAgICAoJ2FsbCcgaW4gc2VuZEhlYWRlcnMgJiYgIXNlbmRIZWFkZXJzLmFsbCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBoZWFkZXJzKSB7XG4gICAgICAgIGlmICgoJ2V4Y2VwdE5hbWVzJyBpbiBzZW5kSGVhZGVycyAmJlxuICAgICAgICAgICAgc2VuZEhlYWRlcnMuZXhjZXB0TmFtZXMuc29tZSgoZXhjZXB0SGVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4Y2VwdEhlYWRlci50b0xvd2VyQ2FzZSgpID09PSBrZXk7XG4gICAgICAgICAgICB9KSkgfHxcbiAgICAgICAgICAgICgnb25seU5hbWVzJyBpbiBzZW5kSGVhZGVycyAmJlxuICAgICAgICAgICAgICAgICFzZW5kSGVhZGVycy5vbmx5TmFtZXMuc29tZSgoaGVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWFkZXIudG9Mb3dlckNhc2UoKSA9PT0ga2V5O1xuICAgICAgICAgICAgICAgIH0pKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJ2F1dGhvcml6YXRpb24nOlxuICAgICAgICAgICAgY2FzZSAnY29va2llJzpcbiAgICAgICAgICAgIGNhc2UgJ3NldC1jb29raWUnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBodHRwLnJlcXVlc3RIZWFkZXJzW2tleV0gPSBuZXcgVHJhY2UuSFRUUC5WYWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGRlZmF1bHRHZW5lcmF0ZUNsaWVudEluZm8oeyByZXF1ZXN0LCB9KSB7XG4gICAgY29uc3QgY2xpZW50TmFtZUhlYWRlcktleSA9ICdhcG9sbG9ncmFwaHFsLWNsaWVudC1uYW1lJztcbiAgICBjb25zdCBjbGllbnRWZXJzaW9uSGVhZGVyS2V5ID0gJ2Fwb2xsb2dyYXBocWwtY2xpZW50LXZlcnNpb24nO1xuICAgIGlmIChyZXF1ZXN0Lmh0dHA/LmhlYWRlcnM/LmdldChjbGllbnROYW1lSGVhZGVyS2V5KSB8fFxuICAgICAgICByZXF1ZXN0Lmh0dHA/LmhlYWRlcnM/LmdldChjbGllbnRWZXJzaW9uSGVhZGVyS2V5KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xpZW50TmFtZTogcmVxdWVzdC5odHRwPy5oZWFkZXJzPy5nZXQoY2xpZW50TmFtZUhlYWRlcktleSksXG4gICAgICAgICAgICBjbGllbnRWZXJzaW9uOiByZXF1ZXN0Lmh0dHA/LmhlYWRlcnM/LmdldChjbGllbnRWZXJzaW9uSGVhZGVyS2V5KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVxdWVzdC5leHRlbnNpb25zPy5jbGllbnRJbmZvKSB7XG4gICAgICAgIHJldHVybiByZXF1ZXN0LmV4dGVuc2lvbnMuY2xpZW50SW5mbztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbHVnaW4uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/plugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/stats.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/usageReporting/stats.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OurContextualizedStats: () => (/* binding */ OurContextualizedStats),\n/* harmony export */   OurReport: () => (/* binding */ OurReport),\n/* harmony export */   SizeEstimator: () => (/* binding */ SizeEstimator)\n/* harmony export */ });\n/* harmony import */ var _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/esm/protobuf.js\");\n/* harmony import */ var _durationHistogram_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./durationHistogram.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/durationHistogram.js\");\n/* harmony import */ var _iterateOverTrace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./iterateOverTrace.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/iterateOverTrace.js\");\n\n\n\nclass SizeEstimator {\n    constructor() {\n        this.bytes = 0;\n    }\n}\nclass OurReport {\n    constructor(header) {\n        this.header = header;\n        this.tracesPreAggregated = false;\n        this.tracesPerQuery = Object.create(null);\n        this.endTime = null;\n        this.operationCount = 0;\n        this.sizeEstimator = new SizeEstimator();\n    }\n    ensureCountsAreIntegers() {\n        for (const tracesAndStats of Object.values(this.tracesPerQuery)) {\n            tracesAndStats.ensureCountsAreIntegers();\n        }\n    }\n    addTrace({ statsReportKey, trace, asTrace, referencedFieldsByType, maxTraceBytes = 10 * 1024 * 1024, nonFtv1ErrorPaths, }) {\n        const tracesAndStats = this.getTracesAndStats({\n            statsReportKey,\n            referencedFieldsByType,\n        });\n        if (asTrace) {\n            const encodedTrace = _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.encode(trace).finish();\n            if (!isNaN(maxTraceBytes) && encodedTrace.length > maxTraceBytes) {\n                tracesAndStats.statsWithContext.addTrace(trace, this.sizeEstimator, nonFtv1ErrorPaths);\n            }\n            else {\n                tracesAndStats.trace.push(encodedTrace);\n                this.sizeEstimator.bytes += 2 + encodedTrace.length;\n            }\n        }\n        else {\n            tracesAndStats.statsWithContext.addTrace(trace, this.sizeEstimator, nonFtv1ErrorPaths);\n        }\n    }\n    getTracesAndStats({ statsReportKey, referencedFieldsByType, }) {\n        const existing = this.tracesPerQuery[statsReportKey];\n        if (existing) {\n            return existing;\n        }\n        this.sizeEstimator.bytes += estimatedBytesForString(statsReportKey);\n        for (const [typeName, referencedFieldsForType] of Object.entries(referencedFieldsByType)) {\n            this.sizeEstimator.bytes += 2 + 2;\n            if (referencedFieldsForType.isInterface) {\n                this.sizeEstimator.bytes += 2;\n            }\n            this.sizeEstimator.bytes += estimatedBytesForString(typeName);\n            for (const fieldName of referencedFieldsForType.fieldNames) {\n                this.sizeEstimator.bytes += estimatedBytesForString(fieldName);\n            }\n        }\n        return (this.tracesPerQuery[statsReportKey] = new OurTracesAndStats(referencedFieldsByType));\n    }\n}\nclass OurTracesAndStats {\n    constructor(referencedFieldsByType) {\n        this.referencedFieldsByType = referencedFieldsByType;\n        this.trace = [];\n        this.statsWithContext = new StatsByContext();\n        this.internalTracesContributingToStats = [];\n    }\n    ensureCountsAreIntegers() {\n        this.statsWithContext.ensureCountsAreIntegers();\n    }\n}\nclass StatsByContext {\n    constructor() {\n        this.map = Object.create(null);\n    }\n    toArray() {\n        return Object.values(this.map);\n    }\n    ensureCountsAreIntegers() {\n        for (const contextualizedStats of Object.values(this.map)) {\n            contextualizedStats.ensureCountsAreIntegers();\n        }\n    }\n    addTrace(trace, sizeEstimator, nonFtv1ErrorPaths) {\n        this.getContextualizedStats(trace, sizeEstimator).addTrace(trace, sizeEstimator, nonFtv1ErrorPaths);\n    }\n    getContextualizedStats(trace, sizeEstimator) {\n        const statsContext = {\n            clientName: trace.clientName,\n            clientVersion: trace.clientVersion,\n        };\n        const statsContextKey = JSON.stringify(statsContext);\n        const existing = this.map[statsContextKey];\n        if (existing) {\n            return existing;\n        }\n        sizeEstimator.bytes +=\n            20 +\n                estimatedBytesForString(trace.clientName) +\n                estimatedBytesForString(trace.clientVersion);\n        const contextualizedStats = new OurContextualizedStats(statsContext);\n        this.map[statsContextKey] = contextualizedStats;\n        return contextualizedStats;\n    }\n}\nclass OurContextualizedStats {\n    constructor(context) {\n        this.context = context;\n        this.queryLatencyStats = new OurQueryLatencyStats();\n        this.perTypeStat = Object.create(null);\n    }\n    ensureCountsAreIntegers() {\n        for (const typeStat of Object.values(this.perTypeStat)) {\n            typeStat.ensureCountsAreIntegers();\n        }\n    }\n    addTrace(trace, sizeEstimator, nonFtv1ErrorPaths = []) {\n        const { fieldExecutionWeight } = trace;\n        if (!fieldExecutionWeight) {\n            this.queryLatencyStats.requestsWithoutFieldInstrumentation++;\n        }\n        this.queryLatencyStats.requestCount++;\n        if (trace.fullQueryCacheHit) {\n            this.queryLatencyStats.cacheLatencyCount.incrementDuration(trace.durationNs);\n            this.queryLatencyStats.cacheHits++;\n        }\n        else {\n            this.queryLatencyStats.latencyCount.incrementDuration(trace.durationNs);\n        }\n        if (!trace.fullQueryCacheHit && trace.cachePolicy?.maxAgeNs != null) {\n            switch (trace.cachePolicy.scope) {\n                case _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.CachePolicy.Scope.PRIVATE:\n                    this.queryLatencyStats.privateCacheTtlCount.incrementDuration(trace.cachePolicy.maxAgeNs);\n                    break;\n                case _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.CachePolicy.Scope.PUBLIC:\n                    this.queryLatencyStats.publicCacheTtlCount.incrementDuration(trace.cachePolicy.maxAgeNs);\n                    break;\n            }\n        }\n        if (trace.persistedQueryHit) {\n            this.queryLatencyStats.persistedQueryHits++;\n        }\n        if (trace.persistedQueryRegister) {\n            this.queryLatencyStats.persistedQueryMisses++;\n        }\n        if (trace.forbiddenOperation) {\n            this.queryLatencyStats.forbiddenOperationCount++;\n        }\n        if (trace.registeredOperation) {\n            this.queryLatencyStats.registeredOperationCount++;\n        }\n        let hasError = false;\n        const errorPathStats = new Set();\n        const traceNodeStats = (node, path) => {\n            if (node.error?.length) {\n                hasError = true;\n                let currPathErrorStats = this.queryLatencyStats.rootErrorStats;\n                path.toArray().forEach((subPath) => {\n                    currPathErrorStats = currPathErrorStats.getChild(subPath, sizeEstimator);\n                });\n                errorPathStats.add(currPathErrorStats);\n                currPathErrorStats.errorsCount += node.error.length;\n            }\n            if (fieldExecutionWeight) {\n                const fieldName = node.originalFieldName || node.responseName;\n                if (node.parentType &&\n                    fieldName &&\n                    node.type &&\n                    node.endTime != null &&\n                    node.startTime != null &&\n                    node.endTime >= node.startTime) {\n                    const typeStat = this.getTypeStat(node.parentType, sizeEstimator);\n                    const fieldStat = typeStat.getFieldStat(fieldName, node.type, sizeEstimator);\n                    fieldStat.errorsCount += node.error?.length ?? 0;\n                    fieldStat.observedExecutionCount++;\n                    fieldStat.estimatedExecutionCount += fieldExecutionWeight;\n                    fieldStat.requestsWithErrorsCount +=\n                        (node.error?.length ?? 0) > 0 ? 1 : 0;\n                    fieldStat.latencyCount.incrementDuration(node.endTime - node.startTime, fieldExecutionWeight);\n                }\n            }\n            return false;\n        };\n        (0,_iterateOverTrace_js__WEBPACK_IMPORTED_MODULE_2__.iterateOverTrace)(trace, traceNodeStats, true);\n        for (const { subgraph, path } of nonFtv1ErrorPaths) {\n            hasError = true;\n            if (path) {\n                let currPathErrorStats = this.queryLatencyStats.rootErrorStats.getChild(`service:${subgraph}`, sizeEstimator);\n                path.forEach((subPath) => {\n                    if (typeof subPath === 'string') {\n                        currPathErrorStats = currPathErrorStats.getChild(subPath, sizeEstimator);\n                    }\n                });\n                errorPathStats.add(currPathErrorStats);\n                currPathErrorStats.errorsCount += 1;\n            }\n        }\n        for (const errorPath of errorPathStats) {\n            errorPath.requestsWithErrorsCount += 1;\n        }\n        if (hasError) {\n            this.queryLatencyStats.requestsWithErrorsCount++;\n        }\n    }\n    getTypeStat(parentType, sizeEstimator) {\n        const existing = this.perTypeStat[parentType];\n        if (existing) {\n            return existing;\n        }\n        sizeEstimator.bytes += estimatedBytesForString(parentType);\n        const typeStat = new OurTypeStat();\n        this.perTypeStat[parentType] = typeStat;\n        return typeStat;\n    }\n}\nclass OurQueryLatencyStats {\n    constructor() {\n        this.latencyCount = new _durationHistogram_js__WEBPACK_IMPORTED_MODULE_1__.DurationHistogram();\n        this.requestCount = 0;\n        this.requestsWithoutFieldInstrumentation = 0;\n        this.cacheHits = 0;\n        this.persistedQueryHits = 0;\n        this.persistedQueryMisses = 0;\n        this.cacheLatencyCount = new _durationHistogram_js__WEBPACK_IMPORTED_MODULE_1__.DurationHistogram();\n        this.rootErrorStats = new OurPathErrorStats();\n        this.requestsWithErrorsCount = 0;\n        this.publicCacheTtlCount = new _durationHistogram_js__WEBPACK_IMPORTED_MODULE_1__.DurationHistogram();\n        this.privateCacheTtlCount = new _durationHistogram_js__WEBPACK_IMPORTED_MODULE_1__.DurationHistogram();\n        this.registeredOperationCount = 0;\n        this.forbiddenOperationCount = 0;\n    }\n}\nclass OurPathErrorStats {\n    constructor() {\n        this.children = Object.create(null);\n        this.errorsCount = 0;\n        this.requestsWithErrorsCount = 0;\n    }\n    getChild(subPath, sizeEstimator) {\n        const existing = this.children[subPath];\n        if (existing) {\n            return existing;\n        }\n        const child = new OurPathErrorStats();\n        this.children[subPath] = child;\n        sizeEstimator.bytes += estimatedBytesForString(subPath) + 4;\n        return child;\n    }\n}\nclass OurTypeStat {\n    constructor() {\n        this.perFieldStat = Object.create(null);\n    }\n    getFieldStat(fieldName, returnType, sizeEstimator) {\n        const existing = this.perFieldStat[fieldName];\n        if (existing) {\n            return existing;\n        }\n        sizeEstimator.bytes +=\n            estimatedBytesForString(fieldName) +\n                estimatedBytesForString(returnType) +\n                10;\n        const fieldStat = new OurFieldStat(returnType);\n        this.perFieldStat[fieldName] = fieldStat;\n        return fieldStat;\n    }\n    ensureCountsAreIntegers() {\n        for (const fieldStat of Object.values(this.perFieldStat)) {\n            fieldStat.ensureCountsAreIntegers();\n        }\n    }\n}\nclass OurFieldStat {\n    constructor(returnType) {\n        this.returnType = returnType;\n        this.errorsCount = 0;\n        this.observedExecutionCount = 0;\n        this.estimatedExecutionCount = 0;\n        this.requestsWithErrorsCount = 0;\n        this.latencyCount = new _durationHistogram_js__WEBPACK_IMPORTED_MODULE_1__.DurationHistogram();\n    }\n    ensureCountsAreIntegers() {\n        this.estimatedExecutionCount = Math.floor(this.estimatedExecutionCount);\n    }\n}\nfunction estimatedBytesForString(s) {\n    return 2 + Buffer.byteLength(s);\n}\n//# sourceMappingURL=stats.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3N0YXRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwRDtBQUNDO0FBQ0Y7QUFDbEQ7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhHQUE4RztBQUM3SDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxpQ0FBaUMsbUVBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlDQUF5QztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUJBQXVCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1FQUFLO0FBQzFCO0FBQ0E7QUFDQSxxQkFBcUIsbUVBQUs7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNFQUFnQjtBQUN4QixxQkFBcUIsaUJBQWlCO0FBQ3RDO0FBQ0E7QUFDQSxtR0FBbUcsU0FBUztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0VBQWlCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsb0VBQWlCO0FBQ3REO0FBQ0E7QUFDQSx1Q0FBdUMsb0VBQWlCO0FBQ3hELHdDQUF3QyxvRUFBaUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG9FQUFpQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL3BsdWdpbi91c2FnZVJlcG9ydGluZy9zdGF0cy5qcz80ZjVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYWNlLCB9IGZyb20gJ0BhcG9sbG8vdXNhZ2UtcmVwb3J0aW5nLXByb3RvYnVmJztcbmltcG9ydCB7IER1cmF0aW9uSGlzdG9ncmFtIH0gZnJvbSAnLi9kdXJhdGlvbkhpc3RvZ3JhbS5qcyc7XG5pbXBvcnQgeyBpdGVyYXRlT3ZlclRyYWNlIH0gZnJvbSAnLi9pdGVyYXRlT3ZlclRyYWNlLmpzJztcbmV4cG9ydCBjbGFzcyBTaXplRXN0aW1hdG9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ieXRlcyA9IDA7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE91clJlcG9ydCB7XG4gICAgY29uc3RydWN0b3IoaGVhZGVyKSB7XG4gICAgICAgIHRoaXMuaGVhZGVyID0gaGVhZGVyO1xuICAgICAgICB0aGlzLnRyYWNlc1ByZUFnZ3JlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50cmFjZXNQZXJRdWVyeSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuZW5kVGltZSA9IG51bGw7XG4gICAgICAgIHRoaXMub3BlcmF0aW9uQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnNpemVFc3RpbWF0b3IgPSBuZXcgU2l6ZUVzdGltYXRvcigpO1xuICAgIH1cbiAgICBlbnN1cmVDb3VudHNBcmVJbnRlZ2VycygpIHtcbiAgICAgICAgZm9yIChjb25zdCB0cmFjZXNBbmRTdGF0cyBvZiBPYmplY3QudmFsdWVzKHRoaXMudHJhY2VzUGVyUXVlcnkpKSB7XG4gICAgICAgICAgICB0cmFjZXNBbmRTdGF0cy5lbnN1cmVDb3VudHNBcmVJbnRlZ2VycygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFRyYWNlKHsgc3RhdHNSZXBvcnRLZXksIHRyYWNlLCBhc1RyYWNlLCByZWZlcmVuY2VkRmllbGRzQnlUeXBlLCBtYXhUcmFjZUJ5dGVzID0gMTAgKiAxMDI0ICogMTAyNCwgbm9uRnR2MUVycm9yUGF0aHMsIH0pIHtcbiAgICAgICAgY29uc3QgdHJhY2VzQW5kU3RhdHMgPSB0aGlzLmdldFRyYWNlc0FuZFN0YXRzKHtcbiAgICAgICAgICAgIHN0YXRzUmVwb3J0S2V5LFxuICAgICAgICAgICAgcmVmZXJlbmNlZEZpZWxkc0J5VHlwZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhc1RyYWNlKSB7XG4gICAgICAgICAgICBjb25zdCBlbmNvZGVkVHJhY2UgPSBUcmFjZS5lbmNvZGUodHJhY2UpLmZpbmlzaCgpO1xuICAgICAgICAgICAgaWYgKCFpc05hTihtYXhUcmFjZUJ5dGVzKSAmJiBlbmNvZGVkVHJhY2UubGVuZ3RoID4gbWF4VHJhY2VCeXRlcykge1xuICAgICAgICAgICAgICAgIHRyYWNlc0FuZFN0YXRzLnN0YXRzV2l0aENvbnRleHQuYWRkVHJhY2UodHJhY2UsIHRoaXMuc2l6ZUVzdGltYXRvciwgbm9uRnR2MUVycm9yUGF0aHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJhY2VzQW5kU3RhdHMudHJhY2UucHVzaChlbmNvZGVkVHJhY2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZUVzdGltYXRvci5ieXRlcyArPSAyICsgZW5jb2RlZFRyYWNlLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyYWNlc0FuZFN0YXRzLnN0YXRzV2l0aENvbnRleHQuYWRkVHJhY2UodHJhY2UsIHRoaXMuc2l6ZUVzdGltYXRvciwgbm9uRnR2MUVycm9yUGF0aHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFRyYWNlc0FuZFN0YXRzKHsgc3RhdHNSZXBvcnRLZXksIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGUsIH0pIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnRyYWNlc1BlclF1ZXJ5W3N0YXRzUmVwb3J0S2V5XTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaXplRXN0aW1hdG9yLmJ5dGVzICs9IGVzdGltYXRlZEJ5dGVzRm9yU3RyaW5nKHN0YXRzUmVwb3J0S2V5KTtcbiAgICAgICAgZm9yIChjb25zdCBbdHlwZU5hbWUsIHJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXSBvZiBPYmplY3QuZW50cmllcyhyZWZlcmVuY2VkRmllbGRzQnlUeXBlKSkge1xuICAgICAgICAgICAgdGhpcy5zaXplRXN0aW1hdG9yLmJ5dGVzICs9IDIgKyAyO1xuICAgICAgICAgICAgaWYgKHJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmlzSW50ZXJmYWNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaXplRXN0aW1hdG9yLmJ5dGVzICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNpemVFc3RpbWF0b3IuYnl0ZXMgKz0gZXN0aW1hdGVkQnl0ZXNGb3JTdHJpbmcodHlwZU5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWVsZE5hbWUgb2YgcmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUuZmllbGROYW1lcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZUVzdGltYXRvci5ieXRlcyArPSBlc3RpbWF0ZWRCeXRlc0ZvclN0cmluZyhmaWVsZE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAodGhpcy50cmFjZXNQZXJRdWVyeVtzdGF0c1JlcG9ydEtleV0gPSBuZXcgT3VyVHJhY2VzQW5kU3RhdHMocmVmZXJlbmNlZEZpZWxkc0J5VHlwZSkpO1xuICAgIH1cbn1cbmNsYXNzIE91clRyYWNlc0FuZFN0YXRzIHtcbiAgICBjb25zdHJ1Y3RvcihyZWZlcmVuY2VkRmllbGRzQnlUeXBlKSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IHJlZmVyZW5jZWRGaWVsZHNCeVR5cGU7XG4gICAgICAgIHRoaXMudHJhY2UgPSBbXTtcbiAgICAgICAgdGhpcy5zdGF0c1dpdGhDb250ZXh0ID0gbmV3IFN0YXRzQnlDb250ZXh0KCk7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzID0gW107XG4gICAgfVxuICAgIGVuc3VyZUNvdW50c0FyZUludGVnZXJzKCkge1xuICAgICAgICB0aGlzLnN0YXRzV2l0aENvbnRleHQuZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKTtcbiAgICB9XG59XG5jbGFzcyBTdGF0c0J5Q29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5tYXApO1xuICAgIH1cbiAgICBlbnN1cmVDb3VudHNBcmVJbnRlZ2VycygpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb250ZXh0dWFsaXplZFN0YXRzIG9mIE9iamVjdC52YWx1ZXModGhpcy5tYXApKSB7XG4gICAgICAgICAgICBjb250ZXh0dWFsaXplZFN0YXRzLmVuc3VyZUNvdW50c0FyZUludGVnZXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVHJhY2UodHJhY2UsIHNpemVFc3RpbWF0b3IsIG5vbkZ0djFFcnJvclBhdGhzKSB7XG4gICAgICAgIHRoaXMuZ2V0Q29udGV4dHVhbGl6ZWRTdGF0cyh0cmFjZSwgc2l6ZUVzdGltYXRvcikuYWRkVHJhY2UodHJhY2UsIHNpemVFc3RpbWF0b3IsIG5vbkZ0djFFcnJvclBhdGhzKTtcbiAgICB9XG4gICAgZ2V0Q29udGV4dHVhbGl6ZWRTdGF0cyh0cmFjZSwgc2l6ZUVzdGltYXRvcikge1xuICAgICAgICBjb25zdCBzdGF0c0NvbnRleHQgPSB7XG4gICAgICAgICAgICBjbGllbnROYW1lOiB0cmFjZS5jbGllbnROYW1lLFxuICAgICAgICAgICAgY2xpZW50VmVyc2lvbjogdHJhY2UuY2xpZW50VmVyc2lvbixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RhdHNDb250ZXh0S2V5ID0gSlNPTi5zdHJpbmdpZnkoc3RhdHNDb250ZXh0KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLm1hcFtzdGF0c0NvbnRleHRLZXldO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgfVxuICAgICAgICBzaXplRXN0aW1hdG9yLmJ5dGVzICs9XG4gICAgICAgICAgICAyMCArXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkQnl0ZXNGb3JTdHJpbmcodHJhY2UuY2xpZW50TmFtZSkgK1xuICAgICAgICAgICAgICAgIGVzdGltYXRlZEJ5dGVzRm9yU3RyaW5nKHRyYWNlLmNsaWVudFZlcnNpb24pO1xuICAgICAgICBjb25zdCBjb250ZXh0dWFsaXplZFN0YXRzID0gbmV3IE91ckNvbnRleHR1YWxpemVkU3RhdHMoc3RhdHNDb250ZXh0KTtcbiAgICAgICAgdGhpcy5tYXBbc3RhdHNDb250ZXh0S2V5XSA9IGNvbnRleHR1YWxpemVkU3RhdHM7XG4gICAgICAgIHJldHVybiBjb250ZXh0dWFsaXplZFN0YXRzO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPdXJDb250ZXh0dWFsaXplZFN0YXRzIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMgPSBuZXcgT3VyUXVlcnlMYXRlbmN5U3RhdHMoKTtcbiAgICAgICAgdGhpcy5wZXJUeXBlU3RhdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICAgIGVuc3VyZUNvdW50c0FyZUludGVnZXJzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGVTdGF0IG9mIE9iamVjdC52YWx1ZXModGhpcy5wZXJUeXBlU3RhdCkpIHtcbiAgICAgICAgICAgIHR5cGVTdGF0LmVuc3VyZUNvdW50c0FyZUludGVnZXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVHJhY2UodHJhY2UsIHNpemVFc3RpbWF0b3IsIG5vbkZ0djFFcnJvclBhdGhzID0gW10pIHtcbiAgICAgICAgY29uc3QgeyBmaWVsZEV4ZWN1dGlvbldlaWdodCB9ID0gdHJhY2U7XG4gICAgICAgIGlmICghZmllbGRFeGVjdXRpb25XZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24rKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJ5TGF0ZW5jeVN0YXRzLnJlcXVlc3RDb3VudCsrO1xuICAgICAgICBpZiAodHJhY2UuZnVsbFF1ZXJ5Q2FjaGVIaXQpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMuY2FjaGVMYXRlbmN5Q291bnQuaW5jcmVtZW50RHVyYXRpb24odHJhY2UuZHVyYXRpb25Ocyk7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5TGF0ZW5jeVN0YXRzLmNhY2hlSGl0cysrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cy5sYXRlbmN5Q291bnQuaW5jcmVtZW50RHVyYXRpb24odHJhY2UuZHVyYXRpb25Ocyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0cmFjZS5mdWxsUXVlcnlDYWNoZUhpdCAmJiB0cmFjZS5jYWNoZVBvbGljeT8ubWF4QWdlTnMgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3dpdGNoICh0cmFjZS5jYWNoZVBvbGljeS5zY29wZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgVHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGUuUFJJVkFURTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeUxhdGVuY3lTdGF0cy5wcml2YXRlQ2FjaGVUdGxDb3VudC5pbmNyZW1lbnREdXJhdGlvbih0cmFjZS5jYWNoZVBvbGljeS5tYXhBZ2VOcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgVHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGUuUFVCTElDOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5TGF0ZW5jeVN0YXRzLnB1YmxpY0NhY2hlVHRsQ291bnQuaW5jcmVtZW50RHVyYXRpb24odHJhY2UuY2FjaGVQb2xpY3kubWF4QWdlTnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2UucGVyc2lzdGVkUXVlcnlIaXQpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucGVyc2lzdGVkUXVlcnlIaXRzKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNlLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucGVyc2lzdGVkUXVlcnlNaXNzZXMrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2UuZm9yYmlkZGVuT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5TGF0ZW5jeVN0YXRzLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNlLnJlZ2lzdGVyZWRPcGVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGhhc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGVycm9yUGF0aFN0YXRzID0gbmV3IFNldCgpO1xuICAgICAgICBjb25zdCB0cmFjZU5vZGVTdGF0cyA9IChub2RlLCBwYXRoKSA9PiB7XG4gICAgICAgICAgICBpZiAobm9kZS5lcnJvcj8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxldCBjdXJyUGF0aEVycm9yU3RhdHMgPSB0aGlzLnF1ZXJ5TGF0ZW5jeVN0YXRzLnJvb3RFcnJvclN0YXRzO1xuICAgICAgICAgICAgICAgIHBhdGgudG9BcnJheSgpLmZvckVhY2goKHN1YlBhdGgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3VyclBhdGhFcnJvclN0YXRzID0gY3VyclBhdGhFcnJvclN0YXRzLmdldENoaWxkKHN1YlBhdGgsIHNpemVFc3RpbWF0b3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVycm9yUGF0aFN0YXRzLmFkZChjdXJyUGF0aEVycm9yU3RhdHMpO1xuICAgICAgICAgICAgICAgIGN1cnJQYXRoRXJyb3JTdGF0cy5lcnJvcnNDb3VudCArPSBub2RlLmVycm9yLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWVsZEV4ZWN1dGlvbldlaWdodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IG5vZGUub3JpZ2luYWxGaWVsZE5hbWUgfHwgbm9kZS5yZXNwb25zZU5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50VHlwZSAmJlxuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWUgJiZcbiAgICAgICAgICAgICAgICAgICAgbm9kZS50eXBlICYmXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZW5kVGltZSAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc3RhcnRUaW1lICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5lbmRUaW1lID49IG5vZGUuc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVTdGF0ID0gdGhpcy5nZXRUeXBlU3RhdChub2RlLnBhcmVudFR5cGUsIHNpemVFc3RpbWF0b3IpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFN0YXQgPSB0eXBlU3RhdC5nZXRGaWVsZFN0YXQoZmllbGROYW1lLCBub2RlLnR5cGUsIHNpemVFc3RpbWF0b3IpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFN0YXQuZXJyb3JzQ291bnQgKz0gbm9kZS5lcnJvcj8ubGVuZ3RoID8/IDA7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkU3RhdC5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkU3RhdC5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudCArPSBmaWVsZEV4ZWN1dGlvbldlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRTdGF0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICs9XG4gICAgICAgICAgICAgICAgICAgICAgICAobm9kZS5lcnJvcj8ubGVuZ3RoID8/IDApID4gMCA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFN0YXQubGF0ZW5jeUNvdW50LmluY3JlbWVudER1cmF0aW9uKG5vZGUuZW5kVGltZSAtIG5vZGUuc3RhcnRUaW1lLCBmaWVsZEV4ZWN1dGlvbldlaWdodCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBpdGVyYXRlT3ZlclRyYWNlKHRyYWNlLCB0cmFjZU5vZGVTdGF0cywgdHJ1ZSk7XG4gICAgICAgIGZvciAoY29uc3QgeyBzdWJncmFwaCwgcGF0aCB9IG9mIG5vbkZ0djFFcnJvclBhdGhzKSB7XG4gICAgICAgICAgICBoYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgICAgIGxldCBjdXJyUGF0aEVycm9yU3RhdHMgPSB0aGlzLnF1ZXJ5TGF0ZW5jeVN0YXRzLnJvb3RFcnJvclN0YXRzLmdldENoaWxkKGBzZXJ2aWNlOiR7c3ViZ3JhcGh9YCwgc2l6ZUVzdGltYXRvcik7XG4gICAgICAgICAgICAgICAgcGF0aC5mb3JFYWNoKChzdWJQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3ViUGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJQYXRoRXJyb3JTdGF0cyA9IGN1cnJQYXRoRXJyb3JTdGF0cy5nZXRDaGlsZChzdWJQYXRoLCBzaXplRXN0aW1hdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVycm9yUGF0aFN0YXRzLmFkZChjdXJyUGF0aEVycm9yU3RhdHMpO1xuICAgICAgICAgICAgICAgIGN1cnJQYXRoRXJyb3JTdGF0cy5lcnJvcnNDb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZXJyb3JQYXRoIG9mIGVycm9yUGF0aFN0YXRzKSB7XG4gICAgICAgICAgICBlcnJvclBhdGgucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlMYXRlbmN5U3RhdHMucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRUeXBlU3RhdChwYXJlbnRUeXBlLCBzaXplRXN0aW1hdG9yKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5wZXJUeXBlU3RhdFtwYXJlbnRUeXBlXTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgICAgIH1cbiAgICAgICAgc2l6ZUVzdGltYXRvci5ieXRlcyArPSBlc3RpbWF0ZWRCeXRlc0ZvclN0cmluZyhwYXJlbnRUeXBlKTtcbiAgICAgICAgY29uc3QgdHlwZVN0YXQgPSBuZXcgT3VyVHlwZVN0YXQoKTtcbiAgICAgICAgdGhpcy5wZXJUeXBlU3RhdFtwYXJlbnRUeXBlXSA9IHR5cGVTdGF0O1xuICAgICAgICByZXR1cm4gdHlwZVN0YXQ7XG4gICAgfVxufVxuY2xhc3MgT3VyUXVlcnlMYXRlbmN5U3RhdHMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxhdGVuY3lDb3VudCA9IG5ldyBEdXJhdGlvbkhpc3RvZ3JhbSgpO1xuICAgICAgICB0aGlzLnJlcXVlc3RDb3VudCA9IDA7XG4gICAgICAgIHRoaXMucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24gPSAwO1xuICAgICAgICB0aGlzLmNhY2hlSGl0cyA9IDA7XG4gICAgICAgIHRoaXMucGVyc2lzdGVkUXVlcnlIaXRzID0gMDtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZWRRdWVyeU1pc3NlcyA9IDA7XG4gICAgICAgIHRoaXMuY2FjaGVMYXRlbmN5Q291bnQgPSBuZXcgRHVyYXRpb25IaXN0b2dyYW0oKTtcbiAgICAgICAgdGhpcy5yb290RXJyb3JTdGF0cyA9IG5ldyBPdXJQYXRoRXJyb3JTdGF0cygpO1xuICAgICAgICB0aGlzLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5wdWJsaWNDYWNoZVR0bENvdW50ID0gbmV3IER1cmF0aW9uSGlzdG9ncmFtKCk7XG4gICAgICAgIHRoaXMucHJpdmF0ZUNhY2hlVHRsQ291bnQgPSBuZXcgRHVyYXRpb25IaXN0b2dyYW0oKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50ID0gMDtcbiAgICB9XG59XG5jbGFzcyBPdXJQYXRoRXJyb3JTdGF0cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLmVycm9yc0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IDA7XG4gICAgfVxuICAgIGdldENoaWxkKHN1YlBhdGgsIHNpemVFc3RpbWF0b3IpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmNoaWxkcmVuW3N1YlBhdGhdO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGlsZCA9IG5ldyBPdXJQYXRoRXJyb3JTdGF0cygpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuW3N1YlBhdGhdID0gY2hpbGQ7XG4gICAgICAgIHNpemVFc3RpbWF0b3IuYnl0ZXMgKz0gZXN0aW1hdGVkQnl0ZXNGb3JTdHJpbmcoc3ViUGF0aCkgKyA0O1xuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxufVxuY2xhc3MgT3VyVHlwZVN0YXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBlckZpZWxkU3RhdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICAgIGdldEZpZWxkU3RhdChmaWVsZE5hbWUsIHJldHVyblR5cGUsIHNpemVFc3RpbWF0b3IpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnBlckZpZWxkU3RhdFtmaWVsZE5hbWVdO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgfVxuICAgICAgICBzaXplRXN0aW1hdG9yLmJ5dGVzICs9XG4gICAgICAgICAgICBlc3RpbWF0ZWRCeXRlc0ZvclN0cmluZyhmaWVsZE5hbWUpICtcbiAgICAgICAgICAgICAgICBlc3RpbWF0ZWRCeXRlc0ZvclN0cmluZyhyZXR1cm5UeXBlKSArXG4gICAgICAgICAgICAgICAgMTA7XG4gICAgICAgIGNvbnN0IGZpZWxkU3RhdCA9IG5ldyBPdXJGaWVsZFN0YXQocmV0dXJuVHlwZSk7XG4gICAgICAgIHRoaXMucGVyRmllbGRTdGF0W2ZpZWxkTmFtZV0gPSBmaWVsZFN0YXQ7XG4gICAgICAgIHJldHVybiBmaWVsZFN0YXQ7XG4gICAgfVxuICAgIGVuc3VyZUNvdW50c0FyZUludGVnZXJzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGZpZWxkU3RhdCBvZiBPYmplY3QudmFsdWVzKHRoaXMucGVyRmllbGRTdGF0KSkge1xuICAgICAgICAgICAgZmllbGRTdGF0LmVuc3VyZUNvdW50c0FyZUludGVnZXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jbGFzcyBPdXJGaWVsZFN0YXQge1xuICAgIGNvbnN0cnVjdG9yKHJldHVyblR5cGUpIHtcbiAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gcmV0dXJuVHlwZTtcbiAgICAgICAgdGhpcy5lcnJvcnNDb3VudCA9IDA7XG4gICAgICAgIHRoaXMub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCA9IDA7XG4gICAgICAgIHRoaXMuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5sYXRlbmN5Q291bnQgPSBuZXcgRHVyYXRpb25IaXN0b2dyYW0oKTtcbiAgICB9XG4gICAgZW5zdXJlQ291bnRzQXJlSW50ZWdlcnMoKSB7XG4gICAgICAgIHRoaXMuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgPSBNYXRoLmZsb29yKHRoaXMuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVzdGltYXRlZEJ5dGVzRm9yU3RyaW5nKHMpIHtcbiAgICByZXR1cm4gMiArIEJ1ZmZlci5ieXRlTGVuZ3RoKHMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/stats.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/traceDetails.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/plugin/usageReporting/traceDetails.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeTraceDetails: () => (/* binding */ makeTraceDetails)\n/* harmony export */ });\n/* harmony import */ var _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/usage-reporting-protobuf */ \"(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/esm/protobuf.js\");\n\nfunction makeTraceDetails(variables, sendVariableValues, operationString) {\n    const details = new _apollo_usage_reporting_protobuf__WEBPACK_IMPORTED_MODULE_0__.Trace.Details();\n    const variablesToRecord = (() => {\n        if (sendVariableValues && 'transform' in sendVariableValues) {\n            const originalKeys = Object.keys(variables);\n            try {\n                const modifiedVariables = sendVariableValues.transform({\n                    variables: variables,\n                    operationString: operationString,\n                });\n                return cleanModifiedVariables(originalKeys, modifiedVariables);\n            }\n            catch (e) {\n                return handleVariableValueTransformError(originalKeys);\n            }\n        }\n        else {\n            return variables;\n        }\n    })();\n    Object.keys(variablesToRecord).forEach((name) => {\n        if (!sendVariableValues ||\n            ('none' in sendVariableValues && sendVariableValues.none) ||\n            ('all' in sendVariableValues && !sendVariableValues.all) ||\n            ('exceptNames' in sendVariableValues &&\n                sendVariableValues.exceptNames.includes(name)) ||\n            ('onlyNames' in sendVariableValues &&\n                !sendVariableValues.onlyNames.includes(name))) {\n            details.variablesJson[name] = '';\n        }\n        else {\n            try {\n                details.variablesJson[name] =\n                    typeof variablesToRecord[name] === 'undefined'\n                        ? ''\n                        : JSON.stringify(variablesToRecord[name]);\n            }\n            catch (e) {\n                details.variablesJson[name] = JSON.stringify('[Unable to convert value to JSON]');\n            }\n        }\n    });\n    return details;\n}\nfunction handleVariableValueTransformError(variableNames) {\n    const modifiedVariables = Object.create(null);\n    variableNames.forEach((name) => {\n        modifiedVariables[name] = '[PREDICATE_FUNCTION_ERROR]';\n    });\n    return modifiedVariables;\n}\nfunction cleanModifiedVariables(originalKeys, modifiedVariables) {\n    const cleanedVariables = Object.create(null);\n    originalKeys.forEach((name) => {\n        cleanedVariables[name] = modifiedVariables[name];\n    });\n    return cleanedVariables;\n}\n//# sourceMappingURL=traceDetails.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcGx1Z2luL3VzYWdlUmVwb3J0aW5nL3RyYWNlRGV0YWlscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5RDtBQUNsRDtBQUNQLHdCQUF3QixtRUFBSztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS9wbHVnaW4vdXNhZ2VSZXBvcnRpbmcvdHJhY2VEZXRhaWxzLmpzPzBjNjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHJhY2UgfSBmcm9tICdAYXBvbGxvL3VzYWdlLXJlcG9ydGluZy1wcm90b2J1Zic7XG5leHBvcnQgZnVuY3Rpb24gbWFrZVRyYWNlRGV0YWlscyh2YXJpYWJsZXMsIHNlbmRWYXJpYWJsZVZhbHVlcywgb3BlcmF0aW9uU3RyaW5nKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IG5ldyBUcmFjZS5EZXRhaWxzKCk7XG4gICAgY29uc3QgdmFyaWFibGVzVG9SZWNvcmQgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoc2VuZFZhcmlhYmxlVmFsdWVzICYmICd0cmFuc2Zvcm0nIGluIHNlbmRWYXJpYWJsZVZhbHVlcykge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxLZXlzID0gT2JqZWN0LmtleXModmFyaWFibGVzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kaWZpZWRWYXJpYWJsZXMgPSBzZW5kVmFyaWFibGVWYWx1ZXMudHJhbnNmb3JtKHtcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvblN0cmluZzogb3BlcmF0aW9uU3RyaW5nLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGVhbk1vZGlmaWVkVmFyaWFibGVzKG9yaWdpbmFsS2V5cywgbW9kaWZpZWRWYXJpYWJsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlVmFyaWFibGVWYWx1ZVRyYW5zZm9ybUVycm9yKG9yaWdpbmFsS2V5cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdmFyaWFibGVzO1xuICAgICAgICB9XG4gICAgfSkoKTtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZXNUb1JlY29yZCkuZm9yRWFjaCgobmFtZSkgPT4ge1xuICAgICAgICBpZiAoIXNlbmRWYXJpYWJsZVZhbHVlcyB8fFxuICAgICAgICAgICAgKCdub25lJyBpbiBzZW5kVmFyaWFibGVWYWx1ZXMgJiYgc2VuZFZhcmlhYmxlVmFsdWVzLm5vbmUpIHx8XG4gICAgICAgICAgICAoJ2FsbCcgaW4gc2VuZFZhcmlhYmxlVmFsdWVzICYmICFzZW5kVmFyaWFibGVWYWx1ZXMuYWxsKSB8fFxuICAgICAgICAgICAgKCdleGNlcHROYW1lcycgaW4gc2VuZFZhcmlhYmxlVmFsdWVzICYmXG4gICAgICAgICAgICAgICAgc2VuZFZhcmlhYmxlVmFsdWVzLmV4Y2VwdE5hbWVzLmluY2x1ZGVzKG5hbWUpKSB8fFxuICAgICAgICAgICAgKCdvbmx5TmFtZXMnIGluIHNlbmRWYXJpYWJsZVZhbHVlcyAmJlxuICAgICAgICAgICAgICAgICFzZW5kVmFyaWFibGVWYWx1ZXMub25seU5hbWVzLmluY2x1ZGVzKG5hbWUpKSkge1xuICAgICAgICAgICAgZGV0YWlscy52YXJpYWJsZXNKc29uW25hbWVdID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRldGFpbHMudmFyaWFibGVzSnNvbltuYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB2YXJpYWJsZXNUb1JlY29yZFtuYW1lXSA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJydcbiAgICAgICAgICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkodmFyaWFibGVzVG9SZWNvcmRbbmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBkZXRhaWxzLnZhcmlhYmxlc0pzb25bbmFtZV0gPSBKU09OLnN0cmluZ2lmeSgnW1VuYWJsZSB0byBjb252ZXJ0IHZhbHVlIHRvIEpTT05dJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGV0YWlscztcbn1cbmZ1bmN0aW9uIGhhbmRsZVZhcmlhYmxlVmFsdWVUcmFuc2Zvcm1FcnJvcih2YXJpYWJsZU5hbWVzKSB7XG4gICAgY29uc3QgbW9kaWZpZWRWYXJpYWJsZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhcmlhYmxlTmFtZXMuZm9yRWFjaCgobmFtZSkgPT4ge1xuICAgICAgICBtb2RpZmllZFZhcmlhYmxlc1tuYW1lXSA9ICdbUFJFRElDQVRFX0ZVTkNUSU9OX0VSUk9SXSc7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1vZGlmaWVkVmFyaWFibGVzO1xufVxuZnVuY3Rpb24gY2xlYW5Nb2RpZmllZFZhcmlhYmxlcyhvcmlnaW5hbEtleXMsIG1vZGlmaWVkVmFyaWFibGVzKSB7XG4gICAgY29uc3QgY2xlYW5lZFZhcmlhYmxlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgb3JpZ2luYWxLZXlzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgY2xlYW5lZFZhcmlhYmxlc1tuYW1lXSA9IG1vZGlmaWVkVmFyaWFibGVzW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBjbGVhbmVkVmFyaWFibGVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2VEZXRhaWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/plugin/usageReporting/traceDetails.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/preventCsrf.js":
/*!*************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/preventCsrf.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   preventCsrf: () => (/* binding */ preventCsrf),\n/* harmony export */   recommendedCsrfPreventionRequestHeaders: () => (/* binding */ recommendedCsrfPreventionRequestHeaders)\n/* harmony export */ });\n/* harmony import */ var whatwg_mimetype__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! whatwg-mimetype */ \"(rsc)/./node_modules/whatwg-mimetype/lib/mime-type.js\");\n/* harmony import */ var _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./internalErrorClasses.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalErrorClasses.js\");\n\n\nconst recommendedCsrfPreventionRequestHeaders = [\n    'x-apollo-operation-name',\n    'apollo-require-preflight',\n];\nconst NON_PREFLIGHTED_CONTENT_TYPES = [\n    'application/x-www-form-urlencoded',\n    'multipart/form-data',\n    'text/plain',\n];\nfunction preventCsrf(headers, csrfPreventionRequestHeaders) {\n    const contentType = headers.get('content-type');\n    if (contentType !== undefined) {\n        const contentTypeParsed = whatwg_mimetype__WEBPACK_IMPORTED_MODULE_0__.parse(contentType);\n        if (contentTypeParsed === null) {\n            return;\n        }\n        if (!NON_PREFLIGHTED_CONTENT_TYPES.includes(contentTypeParsed.essence)) {\n            return;\n        }\n    }\n    if (csrfPreventionRequestHeaders.some((header) => {\n        const value = headers.get(header);\n        return value !== undefined && value.length > 0;\n    })) {\n        return;\n    }\n    throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError(`This operation has been blocked as a potential Cross-Site Request Forgery ` +\n        `(CSRF). Please either specify a 'content-type' header (with a type that ` +\n        `is not one of ${NON_PREFLIGHTED_CONTENT_TYPES.join(', ')}) or provide ` +\n        `a non-empty value for one of the following headers: ${csrfPreventionRequestHeaders.join(', ')}\\n`);\n}\n//# sourceMappingURL=preventCsrf.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcHJldmVudENzcmYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1QztBQUNxQjtBQUNyRDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxrQ0FBa0Msa0RBQWM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGNBQWMscUVBQWU7QUFDN0I7QUFDQSx5QkFBeUIseUNBQXlDO0FBQ2xFLCtEQUErRCx3Q0FBd0M7QUFDdkc7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcHJldmVudENzcmYuanM/ZWZhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTUlNRVR5cGUgZnJvbSAnd2hhdHdnLW1pbWV0eXBlJztcbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciB9IGZyb20gJy4vaW50ZXJuYWxFcnJvckNsYXNzZXMuanMnO1xuZXhwb3J0IGNvbnN0IHJlY29tbWVuZGVkQ3NyZlByZXZlbnRpb25SZXF1ZXN0SGVhZGVycyA9IFtcbiAgICAneC1hcG9sbG8tb3BlcmF0aW9uLW5hbWUnLFxuICAgICdhcG9sbG8tcmVxdWlyZS1wcmVmbGlnaHQnLFxuXTtcbmNvbnN0IE5PTl9QUkVGTElHSFRFRF9DT05URU5UX1RZUEVTID0gW1xuICAgICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICdtdWx0aXBhcnQvZm9ybS1kYXRhJyxcbiAgICAndGV4dC9wbGFpbicsXG5dO1xuZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnRDc3JmKGhlYWRlcnMsIGNzcmZQcmV2ZW50aW9uUmVxdWVzdEhlYWRlcnMpIHtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IGhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICBpZiAoY29udGVudFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBjb250ZW50VHlwZVBhcnNlZCA9IE1JTUVUeXBlLnBhcnNlKGNvbnRlbnRUeXBlKTtcbiAgICAgICAgaWYgKGNvbnRlbnRUeXBlUGFyc2VkID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOT05fUFJFRkxJR0hURURfQ09OVEVOVF9UWVBFUy5pbmNsdWRlcyhjb250ZW50VHlwZVBhcnNlZC5lc3NlbmNlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjc3JmUHJldmVudGlvblJlcXVlc3RIZWFkZXJzLnNvbWUoKGhlYWRlcikgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGhlYWRlcnMuZ2V0KGhlYWRlcik7XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLmxlbmd0aCA+IDA7XG4gICAgfSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEVycm9yKGBUaGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBibG9ja2VkIGFzIGEgcG90ZW50aWFsIENyb3NzLVNpdGUgUmVxdWVzdCBGb3JnZXJ5IGAgK1xuICAgICAgICBgKENTUkYpLiBQbGVhc2UgZWl0aGVyIHNwZWNpZnkgYSAnY29udGVudC10eXBlJyBoZWFkZXIgKHdpdGggYSB0eXBlIHRoYXQgYCArXG4gICAgICAgIGBpcyBub3Qgb25lIG9mICR7Tk9OX1BSRUZMSUdIVEVEX0NPTlRFTlRfVFlQRVMuam9pbignLCAnKX0pIG9yIHByb3ZpZGUgYCArXG4gICAgICAgIGBhIG5vbi1lbXB0eSB2YWx1ZSBmb3Igb25lIG9mIHRoZSBmb2xsb3dpbmcgaGVhZGVyczogJHtjc3JmUHJldmVudGlvblJlcXVlc3RIZWFkZXJzLmpvaW4oJywgJyl9XFxuYCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcmV2ZW50Q3NyZi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/preventCsrf.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/requestPipeline.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/requestPipeline.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APQ_CACHE_PREFIX: () => (/* binding */ APQ_CACHE_PREFIX),\n/* harmony export */   processGraphQLRequest: () => (/* binding */ processGraphQLRequest)\n/* harmony export */ });\n/* harmony import */ var _apollo_utils_createhash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/utils.createhash */ \"(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/language/kinds.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/error/GraphQLError.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/language/parser.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/validation/validate.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/validation/specifiedRules.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/utilities/getOperationAST.mjs\");\n/* harmony import */ var _utils_schemaInstrumentation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/schemaInstrumentation.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/schemaInstrumentation.js\");\n/* harmony import */ var _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./internalErrorClasses.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalErrorClasses.js\");\n/* harmony import */ var _errorNormalize_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errorNormalize.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/errorNormalize.js\");\n/* harmony import */ var _utils_invokeHooks_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/invokeHooks.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/invokeHooks.js\");\n/* harmony import */ var _utils_makeGatewayGraphQLRequestContext_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/makeGatewayGraphQLRequestContext.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/makeGatewayGraphQLRequestContext.js\");\n/* harmony import */ var _runHttpQuery_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./runHttpQuery.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/runHttpQuery.js\");\n/* harmony import */ var _utils_isDefined_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/isDefined.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/isDefined.js\");\n/* harmony import */ var _incrementalDeliveryPolyfill_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./incrementalDeliveryPolyfill.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/incrementalDeliveryPolyfill.js\");\n/* harmony import */ var _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js\");\n\n\n\n\n\n\n\n\n\n\n\nconst APQ_CACHE_PREFIX = 'apq:';\nfunction computeQueryHash(query) {\n    return (0,_apollo_utils_createhash__WEBPACK_IMPORTED_MODULE_0__.createHash)('sha256').update(query).digest('hex');\n}\nfunction isBadUserInputGraphQLError(error) {\n    return (error.nodes?.length === 1 &&\n        error.nodes[0].kind === graphql__WEBPACK_IMPORTED_MODULE_10__.Kind.VARIABLE_DEFINITION &&\n        (error.message.startsWith(`Variable \"$${error.nodes[0].variable.name.value}\" got invalid value `) ||\n            error.message.startsWith(`Variable \"$${error.nodes[0].variable.name.value}\" of required type `) ||\n            error.message.startsWith(`Variable \"$${error.nodes[0].variable.name.value}\" of non-null type `)));\n}\nasync function processGraphQLRequest(schemaDerivedData, server, internals, requestContext) {\n    const requestListeners = (await Promise.all(internals.plugins.map((p) => p.requestDidStart?.(requestContext)))).filter(_utils_isDefined_js__WEBPACK_IMPORTED_MODULE_7__.isDefined);\n    const request = requestContext.request;\n    let { query, extensions } = request;\n    let queryHash;\n    requestContext.metrics.persistedQueryHit = false;\n    requestContext.metrics.persistedQueryRegister = false;\n    if (extensions?.persistedQuery) {\n        if (!internals.persistedQueries) {\n            return await sendErrorResponse([new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__.PersistedQueryNotSupportedError()]);\n        }\n        else if (extensions.persistedQuery.version !== 1) {\n            return await sendErrorResponse([\n                new graphql__WEBPACK_IMPORTED_MODULE_11__.GraphQLError('Unsupported persisted query version', {\n                    extensions: { http: (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_6__.newHTTPGraphQLHead)(400) },\n                }),\n            ]);\n        }\n        queryHash = extensions.persistedQuery.sha256Hash;\n        if (query === undefined) {\n            query = await internals.persistedQueries.cache.get(queryHash);\n            if (query) {\n                requestContext.metrics.persistedQueryHit = true;\n            }\n            else {\n                return await sendErrorResponse([new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__.PersistedQueryNotFoundError()]);\n            }\n        }\n        else {\n            const computedQueryHash = computeQueryHash(query);\n            if (queryHash !== computedQueryHash) {\n                return await sendErrorResponse([\n                    new graphql__WEBPACK_IMPORTED_MODULE_11__.GraphQLError('provided sha does not match query', {\n                        extensions: { http: (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_6__.newHTTPGraphQLHead)(400) },\n                    }),\n                ]);\n            }\n            requestContext.metrics.persistedQueryRegister = true;\n        }\n    }\n    else if (query) {\n        queryHash = computeQueryHash(query);\n    }\n    else {\n        return await sendErrorResponse([\n            new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__.BadRequestError('GraphQL operations must contain a non-empty `query` or a `persistedQuery` extension.'),\n        ]);\n    }\n    requestContext.queryHash = queryHash;\n    requestContext.source = query;\n    await Promise.all(requestListeners.map((l) => l.didResolveSource?.(requestContext)));\n    if (schemaDerivedData.documentStore) {\n        try {\n            requestContext.document = await schemaDerivedData.documentStore.get(schemaDerivedData.documentStoreKeyPrefix + queryHash);\n        }\n        catch (err) {\n            server.logger.warn('An error occurred while attempting to read from the documentStore. ' +\n                (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_3__.ensureError)(err).message);\n        }\n    }\n    if (!requestContext.document) {\n        const parsingDidEnd = await (0,_utils_invokeHooks_js__WEBPACK_IMPORTED_MODULE_4__.invokeDidStartHook)(requestListeners, async (l) => l.parsingDidStart?.(requestContext));\n        try {\n            requestContext.document = (0,graphql__WEBPACK_IMPORTED_MODULE_12__.parse)(query, internals.parseOptions);\n        }\n        catch (syntaxMaybeError) {\n            const error = (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_3__.ensureError)(syntaxMaybeError);\n            await parsingDidEnd(error);\n            return await sendErrorResponse([\n                new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__.SyntaxError((0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_3__.ensureGraphQLError)(error)),\n            ]);\n        }\n        await parsingDidEnd();\n        if (internals.dangerouslyDisableValidation !== true) {\n            const validationDidEnd = await (0,_utils_invokeHooks_js__WEBPACK_IMPORTED_MODULE_4__.invokeDidStartHook)(requestListeners, async (l) => l.validationDidStart?.(requestContext));\n            let validationErrors = (0,graphql__WEBPACK_IMPORTED_MODULE_13__.validate)(schemaDerivedData.schema, requestContext.document, [...graphql__WEBPACK_IMPORTED_MODULE_14__.specifiedRules, ...internals.validationRules]);\n            if (validationErrors.length === 0 && internals.laterValidationRules) {\n                validationErrors = (0,graphql__WEBPACK_IMPORTED_MODULE_13__.validate)(schemaDerivedData.schema, requestContext.document, internals.laterValidationRules);\n            }\n            if (validationErrors.length === 0) {\n                await validationDidEnd();\n            }\n            else {\n                await validationDidEnd(validationErrors);\n                return await sendErrorResponse(validationErrors.map((error) => new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__.ValidationError(error)));\n            }\n        }\n        if (schemaDerivedData.documentStore) {\n            Promise.resolve(schemaDerivedData.documentStore.set(schemaDerivedData.documentStoreKeyPrefix + queryHash, requestContext.document)).catch((err) => server.logger.warn('Could not store validated document. ' + err?.message || 0));\n        }\n    }\n    const operation = (0,graphql__WEBPACK_IMPORTED_MODULE_15__.getOperationAST)(requestContext.document, request.operationName);\n    requestContext.operation = operation || undefined;\n    requestContext.operationName = operation?.name?.value || null;\n    if (request.http?.method === 'GET' &&\n        operation?.operation &&\n        operation.operation !== 'query') {\n        return await sendErrorResponse([\n            new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__.BadRequestError(`GET requests only support query operations, not ${operation.operation} operations`, {\n                extensions: {\n                    http: { status: 405, headers: new _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_9__.HeaderMap([['allow', 'POST']]) },\n                },\n            }),\n        ]);\n    }\n    try {\n        await Promise.all(requestListeners.map((l) => l.didResolveOperation?.(requestContext)));\n    }\n    catch (err) {\n        return await sendErrorResponse([(0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_3__.ensureGraphQLError)(err)]);\n    }\n    if (requestContext.metrics.persistedQueryRegister &&\n        internals.persistedQueries) {\n        const ttl = internals.persistedQueries?.ttl;\n        Promise.resolve(internals.persistedQueries.cache.set(queryHash, query, ttl !== undefined\n            ? { ttl: internals.persistedQueries?.ttl }\n            : undefined)).catch(server.logger.warn);\n    }\n    const responseFromPlugin = await (0,_utils_invokeHooks_js__WEBPACK_IMPORTED_MODULE_4__.invokeHooksUntilDefinedAndNonNull)(requestListeners, async (l) => await l.responseForOperation?.(requestContext));\n    if (responseFromPlugin !== null) {\n        requestContext.response.body = responseFromPlugin.body;\n        (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_6__.mergeHTTPGraphQLHead)(requestContext.response.http, responseFromPlugin.http);\n    }\n    else {\n        const executionListeners = (await Promise.all(requestListeners.map((l) => l.executionDidStart?.(requestContext)))).filter(_utils_isDefined_js__WEBPACK_IMPORTED_MODULE_7__.isDefined);\n        executionListeners.reverse();\n        if (executionListeners.some((l) => l.willResolveField)) {\n            const invokeWillResolveField = (...args) => (0,_utils_invokeHooks_js__WEBPACK_IMPORTED_MODULE_4__.invokeSyncDidStartHook)(executionListeners, (l) => l.willResolveField?.(...args));\n            Object.defineProperty(requestContext.contextValue, _utils_schemaInstrumentation_js__WEBPACK_IMPORTED_MODULE_1__.symbolExecutionDispatcherWillResolveField, { value: invokeWillResolveField });\n            if (internals.fieldResolver) {\n                Object.defineProperty(requestContext.contextValue, _utils_schemaInstrumentation_js__WEBPACK_IMPORTED_MODULE_1__.symbolUserFieldResolver, {\n                    value: internals.fieldResolver,\n                });\n            }\n            (0,_utils_schemaInstrumentation_js__WEBPACK_IMPORTED_MODULE_1__.enablePluginsForSchemaResolvers)(schemaDerivedData.schema);\n        }\n        try {\n            const fullResult = await execute(requestContext);\n            const result = 'singleResult' in fullResult\n                ? fullResult.singleResult\n                : fullResult.initialResult;\n            if (!requestContext.operation) {\n                if (!result.errors?.length) {\n                    throw new Error('Unexpected error: Apollo Server did not resolve an operation but execute did not return errors');\n                }\n                throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__.OperationResolutionError(result.errors[0]);\n            }\n            const resultErrors = result.errors?.map((e) => {\n                if (isBadUserInputGraphQLError(e) && e.extensions?.code == null) {\n                    return new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_2__.UserInputError(e);\n                }\n                return e;\n            });\n            if (resultErrors) {\n                await didEncounterErrors(resultErrors);\n            }\n            const { formattedErrors, httpFromErrors } = resultErrors\n                ? formatErrors(resultErrors)\n                : { formattedErrors: undefined, httpFromErrors: (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_6__.newHTTPGraphQLHead)() };\n            if (internals.status400ForVariableCoercionErrors &&\n                resultErrors?.length &&\n                result.data === undefined &&\n                !httpFromErrors.status) {\n                httpFromErrors.status = 400;\n            }\n            (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_6__.mergeHTTPGraphQLHead)(requestContext.response.http, httpFromErrors);\n            if ('singleResult' in fullResult) {\n                requestContext.response.body = {\n                    kind: 'single',\n                    singleResult: {\n                        ...result,\n                        errors: formattedErrors,\n                    },\n                };\n            }\n            else {\n                requestContext.response.body = {\n                    kind: 'incremental',\n                    initialResult: {\n                        ...fullResult.initialResult,\n                        errors: formattedErrors,\n                    },\n                    subsequentResults: fullResult.subsequentResults,\n                };\n            }\n        }\n        catch (executionMaybeError) {\n            const executionError = (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_3__.ensureError)(executionMaybeError);\n            await Promise.all(executionListeners.map((l) => l.executionDidEnd?.(executionError)));\n            return await sendErrorResponse([(0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_3__.ensureGraphQLError)(executionError)]);\n        }\n        await Promise.all(executionListeners.map((l) => l.executionDidEnd?.()));\n    }\n    await invokeWillSendResponse();\n    if (!requestContext.response.body) {\n        throw Error('got to end of processGraphQLRequest without setting body?');\n    }\n    return requestContext.response;\n    async function execute(requestContext) {\n        const { request, document } = requestContext;\n        if (internals.__testing_incrementalExecutionResults) {\n            return internals.__testing_incrementalExecutionResults;\n        }\n        else if (internals.gatewayExecutor) {\n            const result = await internals.gatewayExecutor((0,_utils_makeGatewayGraphQLRequestContext_js__WEBPACK_IMPORTED_MODULE_5__.makeGatewayGraphQLRequestContext)(requestContext, server, internals));\n            return { singleResult: result };\n        }\n        else {\n            const resultOrResults = await (0,_incrementalDeliveryPolyfill_js__WEBPACK_IMPORTED_MODULE_8__.executeIncrementally)({\n                schema: schemaDerivedData.schema,\n                document,\n                rootValue: typeof internals.rootValue === 'function'\n                    ? internals.rootValue(document)\n                    : internals.rootValue,\n                contextValue: requestContext.contextValue,\n                variableValues: request.variables,\n                operationName: request.operationName,\n                fieldResolver: internals.fieldResolver,\n            });\n            if ('initialResult' in resultOrResults) {\n                return {\n                    initialResult: resultOrResults.initialResult,\n                    subsequentResults: formatErrorsInSubsequentResults(resultOrResults.subsequentResults),\n                };\n            }\n            else {\n                return { singleResult: resultOrResults };\n            }\n        }\n    }\n    async function* formatErrorsInSubsequentResults(results) {\n        for await (const result of results) {\n            const payload = result.incremental\n                ? {\n                    ...result,\n                    incremental: await seriesAsyncMap(result.incremental, async (incrementalResult) => {\n                        const { errors } = incrementalResult;\n                        if (errors) {\n                            await Promise.all(requestListeners.map((l) => l.didEncounterSubsequentErrors?.(requestContext, errors)));\n                            return {\n                                ...incrementalResult,\n                                errors: formatErrors(errors).formattedErrors,\n                            };\n                        }\n                        return incrementalResult;\n                    }),\n                }\n                : result;\n            await Promise.all(requestListeners.map((l) => l.willSendSubsequentPayload?.(requestContext, payload)));\n            yield payload;\n        }\n    }\n    async function invokeWillSendResponse() {\n        await Promise.all(requestListeners.map((l) => l.willSendResponse?.(requestContext)));\n    }\n    async function didEncounterErrors(errors) {\n        requestContext.errors = errors;\n        return await Promise.all(requestListeners.map((l) => l.didEncounterErrors?.(requestContext)));\n    }\n    async function sendErrorResponse(errors) {\n        await didEncounterErrors(errors);\n        const { formattedErrors, httpFromErrors } = formatErrors(errors);\n        requestContext.response.body = {\n            kind: 'single',\n            singleResult: {\n                errors: formattedErrors,\n            },\n        };\n        (0,_runHttpQuery_js__WEBPACK_IMPORTED_MODULE_6__.mergeHTTPGraphQLHead)(requestContext.response.http, httpFromErrors);\n        if (!requestContext.response.http.status) {\n            requestContext.response.http.status = 500;\n        }\n        await invokeWillSendResponse();\n        return requestContext.response;\n    }\n    function formatErrors(errors) {\n        return (0,_errorNormalize_js__WEBPACK_IMPORTED_MODULE_3__.normalizeAndFormatErrors)(errors, {\n            formatError: internals.formatError,\n            includeStacktraceInErrorResponses: internals.includeStacktraceInErrorResponses,\n        });\n    }\n}\nasync function seriesAsyncMap(ts, fn) {\n    const us = [];\n    for (const t of ts) {\n        const u = await fn(t);\n        us.push(u);\n    }\n    return us;\n}\n//# sourceMappingURL=requestPipeline.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcmVxdWVzdFBpcGVsaW5lLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUMwQztBQUN3RDtBQUMyQztBQUNsRztBQUN1QjtBQUN6QjtBQUNsQjtBQUM1QjtBQUN3QjtBQUN4QjtBQUMxQztBQUNQO0FBQ0EsV0FBVyxvRUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMENBQUk7QUFDcEMsZ0RBQWdELG1DQUFtQztBQUNuRixtREFBbUQsbUNBQW1DO0FBQ3RGLG1EQUFtRCxtQ0FBbUM7QUFDdEY7QUFDTztBQUNQLDJIQUEySCwwREFBUztBQUNwSTtBQUNBLFVBQVUsb0JBQW9CO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QscUZBQStCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrREFBWTtBQUNoQyxrQ0FBa0MsTUFBTSxvRUFBa0IsT0FBTztBQUNqRSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGlGQUEyQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQVk7QUFDcEMsc0NBQXNDLE1BQU0sb0VBQWtCLE9BQU87QUFDckUscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFFQUFlO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsK0RBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHlFQUFrQjtBQUN0RDtBQUNBLHNDQUFzQywrQ0FBSztBQUMzQztBQUNBO0FBQ0EsMEJBQTBCLCtEQUFXO0FBQ3JDO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVcsQ0FBQyxzRUFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMseUVBQWtCO0FBQzdELG1DQUFtQyxrREFBUSx3REFBd0Qsb0RBQWM7QUFDakg7QUFDQSxtQ0FBbUMsa0RBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GLHFFQUFlO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLDJPQUEyTyxDQUFHO0FBQzlPO0FBQ0E7QUFDQSxzQkFBc0IseURBQWU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFFQUFlLG9EQUFvRCxxQkFBcUI7QUFDeEc7QUFDQSw0QkFBNEIsMEJBQTBCLDBEQUFTLHVCQUF1QjtBQUN0RixpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxzRUFBa0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0EscUNBQXFDLHdGQUFpQztBQUN0RTtBQUNBO0FBQ0EsUUFBUSxzRUFBb0I7QUFDNUI7QUFDQTtBQUNBLGtJQUFrSSwwREFBUztBQUMzSTtBQUNBO0FBQ0Esd0RBQXdELDZFQUFzQjtBQUM5RSwrREFBK0Qsc0dBQXlDLElBQUksK0JBQStCO0FBQzNJO0FBQ0EsbUVBQW1FLG9GQUF1QjtBQUMxRjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFlBQVksZ0dBQStCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhFQUF3QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isb0VBQWM7QUFDN0M7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0NBQWtDO0FBQ3REO0FBQ0Esb0JBQW9CLDRDQUE0QyxvRUFBa0I7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzRUFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrREFBVztBQUM5QztBQUNBLDRDQUE0QyxzRUFBa0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9CQUFvQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCw0R0FBZ0M7QUFDM0YscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSwwQ0FBMEMscUZBQW9CO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrQ0FBa0M7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxRQUFRLHNFQUFvQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNEVBQXdCO0FBQ3ZDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcmVxdWVzdFBpcGVsaW5lLmpzPzBlMTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ0BhcG9sbG8vdXRpbHMuY3JlYXRlaGFzaCc7XG5pbXBvcnQgeyBzcGVjaWZpZWRSdWxlcywgZ2V0T3BlcmF0aW9uQVNULCBHcmFwaFFMRXJyb3IsIHZhbGlkYXRlLCBwYXJzZSwgS2luZCwgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IHN5bWJvbEV4ZWN1dGlvbkRpc3BhdGNoZXJXaWxsUmVzb2x2ZUZpZWxkLCBlbmFibGVQbHVnaW5zRm9yU2NoZW1hUmVzb2x2ZXJzLCBzeW1ib2xVc2VyRmllbGRSZXNvbHZlciwgfSBmcm9tICcuL3V0aWxzL3NjaGVtYUluc3RydW1lbnRhdGlvbi5qcyc7XG5pbXBvcnQgeyBQZXJzaXN0ZWRRdWVyeU5vdFN1cHBvcnRlZEVycm9yLCBQZXJzaXN0ZWRRdWVyeU5vdEZvdW5kRXJyb3IsIFVzZXJJbnB1dEVycm9yLCBCYWRSZXF1ZXN0RXJyb3IsIFZhbGlkYXRpb25FcnJvciwgU3ludGF4RXJyb3IsIE9wZXJhdGlvblJlc29sdXRpb25FcnJvciwgfSBmcm9tICcuL2ludGVybmFsRXJyb3JDbGFzc2VzLmpzJztcbmltcG9ydCB7IGVuc3VyZUVycm9yLCBub3JtYWxpemVBbmRGb3JtYXRFcnJvcnMsIGVuc3VyZUdyYXBoUUxFcnJvciwgfSBmcm9tICcuL2Vycm9yTm9ybWFsaXplLmpzJztcbmltcG9ydCB7IGludm9rZURpZFN0YXJ0SG9vaywgaW52b2tlSG9va3NVbnRpbERlZmluZWRBbmROb25OdWxsLCBpbnZva2VTeW5jRGlkU3RhcnRIb29rLCB9IGZyb20gJy4vdXRpbHMvaW52b2tlSG9va3MuanMnO1xuaW1wb3J0IHsgbWFrZUdhdGV3YXlHcmFwaFFMUmVxdWVzdENvbnRleHQgfSBmcm9tICcuL3V0aWxzL21ha2VHYXRld2F5R3JhcGhRTFJlcXVlc3RDb250ZXh0LmpzJztcbmltcG9ydCB7IG1lcmdlSFRUUEdyYXBoUUxIZWFkLCBuZXdIVFRQR3JhcGhRTEhlYWQgfSBmcm9tICcuL3J1bkh0dHBRdWVyeS5qcyc7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tICcuL3V0aWxzL2lzRGVmaW5lZC5qcyc7XG5pbXBvcnQgeyBleGVjdXRlSW5jcmVtZW50YWxseSwgfSBmcm9tICcuL2luY3JlbWVudGFsRGVsaXZlcnlQb2x5ZmlsbC5qcyc7XG5pbXBvcnQgeyBIZWFkZXJNYXAgfSBmcm9tICcuL3V0aWxzL0hlYWRlck1hcC5qcyc7XG5leHBvcnQgY29uc3QgQVBRX0NBQ0hFX1BSRUZJWCA9ICdhcHE6JztcbmZ1bmN0aW9uIGNvbXB1dGVRdWVyeUhhc2gocXVlcnkpIHtcbiAgICByZXR1cm4gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHF1ZXJ5KS5kaWdlc3QoJ2hleCcpO1xufVxuZnVuY3Rpb24gaXNCYWRVc2VySW5wdXRHcmFwaFFMRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4gKGVycm9yLm5vZGVzPy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgZXJyb3Iubm9kZXNbMF0ua2luZCA9PT0gS2luZC5WQVJJQUJMRV9ERUZJTklUSU9OICYmXG4gICAgICAgIChlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoYFZhcmlhYmxlIFwiJCR7ZXJyb3Iubm9kZXNbMF0udmFyaWFibGUubmFtZS52YWx1ZX1cIiBnb3QgaW52YWxpZCB2YWx1ZSBgKSB8fFxuICAgICAgICAgICAgZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKGBWYXJpYWJsZSBcIiQke2Vycm9yLm5vZGVzWzBdLnZhcmlhYmxlLm5hbWUudmFsdWV9XCIgb2YgcmVxdWlyZWQgdHlwZSBgKSB8fFxuICAgICAgICAgICAgZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKGBWYXJpYWJsZSBcIiQke2Vycm9yLm5vZGVzWzBdLnZhcmlhYmxlLm5hbWUudmFsdWV9XCIgb2Ygbm9uLW51bGwgdHlwZSBgKSkpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NHcmFwaFFMUmVxdWVzdChzY2hlbWFEZXJpdmVkRGF0YSwgc2VydmVyLCBpbnRlcm5hbHMsIHJlcXVlc3RDb250ZXh0KSB7XG4gICAgY29uc3QgcmVxdWVzdExpc3RlbmVycyA9IChhd2FpdCBQcm9taXNlLmFsbChpbnRlcm5hbHMucGx1Z2lucy5tYXAoKHApID0+IHAucmVxdWVzdERpZFN0YXJ0Py4ocmVxdWVzdENvbnRleHQpKSkpLmZpbHRlcihpc0RlZmluZWQpO1xuICAgIGNvbnN0IHJlcXVlc3QgPSByZXF1ZXN0Q29udGV4dC5yZXF1ZXN0O1xuICAgIGxldCB7IHF1ZXJ5LCBleHRlbnNpb25zIH0gPSByZXF1ZXN0O1xuICAgIGxldCBxdWVyeUhhc2g7XG4gICAgcmVxdWVzdENvbnRleHQubWV0cmljcy5wZXJzaXN0ZWRRdWVyeUhpdCA9IGZhbHNlO1xuICAgIHJlcXVlc3RDb250ZXh0Lm1ldHJpY3MucGVyc2lzdGVkUXVlcnlSZWdpc3RlciA9IGZhbHNlO1xuICAgIGlmIChleHRlbnNpb25zPy5wZXJzaXN0ZWRRdWVyeSkge1xuICAgICAgICBpZiAoIWludGVybmFscy5wZXJzaXN0ZWRRdWVyaWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VuZEVycm9yUmVzcG9uc2UoW25ldyBQZXJzaXN0ZWRRdWVyeU5vdFN1cHBvcnRlZEVycm9yKCldKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHRlbnNpb25zLnBlcnNpc3RlZFF1ZXJ5LnZlcnNpb24gIT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZW5kRXJyb3JSZXNwb25zZShbXG4gICAgICAgICAgICAgICAgbmV3IEdyYXBoUUxFcnJvcignVW5zdXBwb3J0ZWQgcGVyc2lzdGVkIHF1ZXJ5IHZlcnNpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHsgaHR0cDogbmV3SFRUUEdyYXBoUUxIZWFkKDQwMCkgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHF1ZXJ5SGFzaCA9IGV4dGVuc2lvbnMucGVyc2lzdGVkUXVlcnkuc2hhMjU2SGFzaDtcbiAgICAgICAgaWYgKHF1ZXJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5ID0gYXdhaXQgaW50ZXJuYWxzLnBlcnNpc3RlZFF1ZXJpZXMuY2FjaGUuZ2V0KHF1ZXJ5SGFzaCk7XG4gICAgICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Q29udGV4dC5tZXRyaWNzLnBlcnNpc3RlZFF1ZXJ5SGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZW5kRXJyb3JSZXNwb25zZShbbmV3IFBlcnNpc3RlZFF1ZXJ5Tm90Rm91bmRFcnJvcigpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlZFF1ZXJ5SGFzaCA9IGNvbXB1dGVRdWVyeUhhc2gocXVlcnkpO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5SGFzaCAhPT0gY29tcHV0ZWRRdWVyeUhhc2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VuZEVycm9yUmVzcG9uc2UoW1xuICAgICAgICAgICAgICAgICAgICBuZXcgR3JhcGhRTEVycm9yKCdwcm92aWRlZCBzaGEgZG9lcyBub3QgbWF0Y2ggcXVlcnknLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7IGh0dHA6IG5ld0hUVFBHcmFwaFFMSGVhZCg0MDApIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxdWVzdENvbnRleHQubWV0cmljcy5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChxdWVyeSkge1xuICAgICAgICBxdWVyeUhhc2ggPSBjb21wdXRlUXVlcnlIYXNoKHF1ZXJ5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBzZW5kRXJyb3JSZXNwb25zZShbXG4gICAgICAgICAgICBuZXcgQmFkUmVxdWVzdEVycm9yKCdHcmFwaFFMIG9wZXJhdGlvbnMgbXVzdCBjb250YWluIGEgbm9uLWVtcHR5IGBxdWVyeWAgb3IgYSBgcGVyc2lzdGVkUXVlcnlgIGV4dGVuc2lvbi4nKSxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIHJlcXVlc3RDb250ZXh0LnF1ZXJ5SGFzaCA9IHF1ZXJ5SGFzaDtcbiAgICByZXF1ZXN0Q29udGV4dC5zb3VyY2UgPSBxdWVyeTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0TGlzdGVuZXJzLm1hcCgobCkgPT4gbC5kaWRSZXNvbHZlU291cmNlPy4ocmVxdWVzdENvbnRleHQpKSk7XG4gICAgaWYgKHNjaGVtYURlcml2ZWREYXRhLmRvY3VtZW50U3RvcmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LmRvY3VtZW50ID0gYXdhaXQgc2NoZW1hRGVyaXZlZERhdGEuZG9jdW1lbnRTdG9yZS5nZXQoc2NoZW1hRGVyaXZlZERhdGEuZG9jdW1lbnRTdG9yZUtleVByZWZpeCArIHF1ZXJ5SGFzaCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2VydmVyLmxvZ2dlci53YXJuKCdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBhdHRlbXB0aW5nIHRvIHJlYWQgZnJvbSB0aGUgZG9jdW1lbnRTdG9yZS4gJyArXG4gICAgICAgICAgICAgICAgZW5zdXJlRXJyb3IoZXJyKS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXJlcXVlc3RDb250ZXh0LmRvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHBhcnNpbmdEaWRFbmQgPSBhd2FpdCBpbnZva2VEaWRTdGFydEhvb2socmVxdWVzdExpc3RlbmVycywgYXN5bmMgKGwpID0+IGwucGFyc2luZ0RpZFN0YXJ0Py4ocmVxdWVzdENvbnRleHQpKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LmRvY3VtZW50ID0gcGFyc2UocXVlcnksIGludGVybmFscy5wYXJzZU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChzeW50YXhNYXliZUVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGVuc3VyZUVycm9yKHN5bnRheE1heWJlRXJyb3IpO1xuICAgICAgICAgICAgYXdhaXQgcGFyc2luZ0RpZEVuZChlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VuZEVycm9yUmVzcG9uc2UoW1xuICAgICAgICAgICAgICAgIG5ldyBTeW50YXhFcnJvcihlbnN1cmVHcmFwaFFMRXJyb3IoZXJyb3IpKSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHBhcnNpbmdEaWRFbmQoKTtcbiAgICAgICAgaWYgKGludGVybmFscy5kYW5nZXJvdXNseURpc2FibGVWYWxpZGF0aW9uICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uRGlkRW5kID0gYXdhaXQgaW52b2tlRGlkU3RhcnRIb29rKHJlcXVlc3RMaXN0ZW5lcnMsIGFzeW5jIChsKSA9PiBsLnZhbGlkYXRpb25EaWRTdGFydD8uKHJlcXVlc3RDb250ZXh0KSk7XG4gICAgICAgICAgICBsZXQgdmFsaWRhdGlvbkVycm9ycyA9IHZhbGlkYXRlKHNjaGVtYURlcml2ZWREYXRhLnNjaGVtYSwgcmVxdWVzdENvbnRleHQuZG9jdW1lbnQsIFsuLi5zcGVjaWZpZWRSdWxlcywgLi4uaW50ZXJuYWxzLnZhbGlkYXRpb25SdWxlc10pO1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoID09PSAwICYmIGludGVybmFscy5sYXRlclZhbGlkYXRpb25SdWxlcykge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnMgPSB2YWxpZGF0ZShzY2hlbWFEZXJpdmVkRGF0YS5zY2hlbWEsIHJlcXVlc3RDb250ZXh0LmRvY3VtZW50LCBpbnRlcm5hbHMubGF0ZXJWYWxpZGF0aW9uUnVsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdmFsaWRhdGlvbkRpZEVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdmFsaWRhdGlvbkRpZEVuZCh2YWxpZGF0aW9uRXJyb3JzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VuZEVycm9yUmVzcG9uc2UodmFsaWRhdGlvbkVycm9ycy5tYXAoKGVycm9yKSA9PiBuZXcgVmFsaWRhdGlvbkVycm9yKGVycm9yKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWFEZXJpdmVkRGF0YS5kb2N1bWVudFN0b3JlKSB7XG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoc2NoZW1hRGVyaXZlZERhdGEuZG9jdW1lbnRTdG9yZS5zZXQoc2NoZW1hRGVyaXZlZERhdGEuZG9jdW1lbnRTdG9yZUtleVByZWZpeCArIHF1ZXJ5SGFzaCwgcmVxdWVzdENvbnRleHQuZG9jdW1lbnQpKS5jYXRjaCgoZXJyKSA9PiBzZXJ2ZXIubG9nZ2VyLndhcm4oJ0NvdWxkIG5vdCBzdG9yZSB2YWxpZGF0ZWQgZG9jdW1lbnQuICcgKyBlcnI/Lm1lc3NhZ2UgfHwgZXJyKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgb3BlcmF0aW9uID0gZ2V0T3BlcmF0aW9uQVNUKHJlcXVlc3RDb250ZXh0LmRvY3VtZW50LCByZXF1ZXN0Lm9wZXJhdGlvbk5hbWUpO1xuICAgIHJlcXVlc3RDb250ZXh0Lm9wZXJhdGlvbiA9IG9wZXJhdGlvbiB8fCB1bmRlZmluZWQ7XG4gICAgcmVxdWVzdENvbnRleHQub3BlcmF0aW9uTmFtZSA9IG9wZXJhdGlvbj8ubmFtZT8udmFsdWUgfHwgbnVsbDtcbiAgICBpZiAocmVxdWVzdC5odHRwPy5tZXRob2QgPT09ICdHRVQnICYmXG4gICAgICAgIG9wZXJhdGlvbj8ub3BlcmF0aW9uICYmXG4gICAgICAgIG9wZXJhdGlvbi5vcGVyYXRpb24gIT09ICdxdWVyeScpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbmRFcnJvclJlc3BvbnNlKFtcbiAgICAgICAgICAgIG5ldyBCYWRSZXF1ZXN0RXJyb3IoYEdFVCByZXF1ZXN0cyBvbmx5IHN1cHBvcnQgcXVlcnkgb3BlcmF0aW9ucywgbm90ICR7b3BlcmF0aW9uLm9wZXJhdGlvbn0gb3BlcmF0aW9uc2AsIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGh0dHA6IHsgc3RhdHVzOiA0MDUsIGhlYWRlcnM6IG5ldyBIZWFkZXJNYXAoW1snYWxsb3cnLCAnUE9TVCddXSkgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0TGlzdGVuZXJzLm1hcCgobCkgPT4gbC5kaWRSZXNvbHZlT3BlcmF0aW9uPy4ocmVxdWVzdENvbnRleHQpKSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbmRFcnJvclJlc3BvbnNlKFtlbnN1cmVHcmFwaFFMRXJyb3IoZXJyKV0pO1xuICAgIH1cbiAgICBpZiAocmVxdWVzdENvbnRleHQubWV0cmljcy5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyICYmXG4gICAgICAgIGludGVybmFscy5wZXJzaXN0ZWRRdWVyaWVzKSB7XG4gICAgICAgIGNvbnN0IHR0bCA9IGludGVybmFscy5wZXJzaXN0ZWRRdWVyaWVzPy50dGw7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShpbnRlcm5hbHMucGVyc2lzdGVkUXVlcmllcy5jYWNoZS5zZXQocXVlcnlIYXNoLCBxdWVyeSwgdHRsICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8geyB0dGw6IGludGVybmFscy5wZXJzaXN0ZWRRdWVyaWVzPy50dGwgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQpKS5jYXRjaChzZXJ2ZXIubG9nZ2VyLndhcm4pO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZUZyb21QbHVnaW4gPSBhd2FpdCBpbnZva2VIb29rc1VudGlsRGVmaW5lZEFuZE5vbk51bGwocmVxdWVzdExpc3RlbmVycywgYXN5bmMgKGwpID0+IGF3YWl0IGwucmVzcG9uc2VGb3JPcGVyYXRpb24/LihyZXF1ZXN0Q29udGV4dCkpO1xuICAgIGlmIChyZXNwb25zZUZyb21QbHVnaW4gIT09IG51bGwpIHtcbiAgICAgICAgcmVxdWVzdENvbnRleHQucmVzcG9uc2UuYm9keSA9IHJlc3BvbnNlRnJvbVBsdWdpbi5ib2R5O1xuICAgICAgICBtZXJnZUhUVFBHcmFwaFFMSGVhZChyZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5odHRwLCByZXNwb25zZUZyb21QbHVnaW4uaHR0cCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBleGVjdXRpb25MaXN0ZW5lcnMgPSAoYXdhaXQgUHJvbWlzZS5hbGwocmVxdWVzdExpc3RlbmVycy5tYXAoKGwpID0+IGwuZXhlY3V0aW9uRGlkU3RhcnQ/LihyZXF1ZXN0Q29udGV4dCkpKSkuZmlsdGVyKGlzRGVmaW5lZCk7XG4gICAgICAgIGV4ZWN1dGlvbkxpc3RlbmVycy5yZXZlcnNlKCk7XG4gICAgICAgIGlmIChleGVjdXRpb25MaXN0ZW5lcnMuc29tZSgobCkgPT4gbC53aWxsUmVzb2x2ZUZpZWxkKSkge1xuICAgICAgICAgICAgY29uc3QgaW52b2tlV2lsbFJlc29sdmVGaWVsZCA9ICguLi5hcmdzKSA9PiBpbnZva2VTeW5jRGlkU3RhcnRIb29rKGV4ZWN1dGlvbkxpc3RlbmVycywgKGwpID0+IGwud2lsbFJlc29sdmVGaWVsZD8uKC4uLmFyZ3MpKTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXF1ZXN0Q29udGV4dC5jb250ZXh0VmFsdWUsIHN5bWJvbEV4ZWN1dGlvbkRpc3BhdGNoZXJXaWxsUmVzb2x2ZUZpZWxkLCB7IHZhbHVlOiBpbnZva2VXaWxsUmVzb2x2ZUZpZWxkIH0pO1xuICAgICAgICAgICAgaWYgKGludGVybmFscy5maWVsZFJlc29sdmVyKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVlc3RDb250ZXh0LmNvbnRleHRWYWx1ZSwgc3ltYm9sVXNlckZpZWxkUmVzb2x2ZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGludGVybmFscy5maWVsZFJlc29sdmVyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW5hYmxlUGx1Z2luc0ZvclNjaGVtYVJlc29sdmVycyhzY2hlbWFEZXJpdmVkRGF0YS5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZShyZXF1ZXN0Q29udGV4dCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAnc2luZ2xlUmVzdWx0JyBpbiBmdWxsUmVzdWx0XG4gICAgICAgICAgICAgICAgPyBmdWxsUmVzdWx0LnNpbmdsZVJlc3VsdFxuICAgICAgICAgICAgICAgIDogZnVsbFJlc3VsdC5pbml0aWFsUmVzdWx0O1xuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0Q29udGV4dC5vcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5lcnJvcnM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3I6IEFwb2xsbyBTZXJ2ZXIgZGlkIG5vdCByZXNvbHZlIGFuIG9wZXJhdGlvbiBidXQgZXhlY3V0ZSBkaWQgbm90IHJldHVybiBlcnJvcnMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9wZXJhdGlvblJlc29sdXRpb25FcnJvcihyZXN1bHQuZXJyb3JzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdEVycm9ycyA9IHJlc3VsdC5lcnJvcnM/Lm1hcCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc0JhZFVzZXJJbnB1dEdyYXBoUUxFcnJvcihlKSAmJiBlLmV4dGVuc2lvbnM/LmNvZGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVzZXJJbnB1dEVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdEVycm9ycykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGRpZEVuY291bnRlckVycm9ycyhyZXN1bHRFcnJvcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBmb3JtYXR0ZWRFcnJvcnMsIGh0dHBGcm9tRXJyb3JzIH0gPSByZXN1bHRFcnJvcnNcbiAgICAgICAgICAgICAgICA/IGZvcm1hdEVycm9ycyhyZXN1bHRFcnJvcnMpXG4gICAgICAgICAgICAgICAgOiB7IGZvcm1hdHRlZEVycm9yczogdW5kZWZpbmVkLCBodHRwRnJvbUVycm9yczogbmV3SFRUUEdyYXBoUUxIZWFkKCkgfTtcbiAgICAgICAgICAgIGlmIChpbnRlcm5hbHMuc3RhdHVzNDAwRm9yVmFyaWFibGVDb2VyY2lvbkVycm9ycyAmJlxuICAgICAgICAgICAgICAgIHJlc3VsdEVycm9ycz8ubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICFodHRwRnJvbUVycm9ycy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBodHRwRnJvbUVycm9ycy5zdGF0dXMgPSA0MDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZUhUVFBHcmFwaFFMSGVhZChyZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5odHRwLCBodHRwRnJvbUVycm9ycyk7XG4gICAgICAgICAgICBpZiAoJ3NpbmdsZVJlc3VsdCcgaW4gZnVsbFJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdzaW5nbGUnLFxuICAgICAgICAgICAgICAgICAgICBzaW5nbGVSZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogZm9ybWF0dGVkRXJyb3JzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBraW5kOiAnaW5jcmVtZW50YWwnLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsUmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5mdWxsUmVzdWx0LmluaXRpYWxSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IGZvcm1hdHRlZEVycm9ycyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3Vic2VxdWVudFJlc3VsdHM6IGZ1bGxSZXN1bHQuc3Vic2VxdWVudFJlc3VsdHMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXhlY3V0aW9uTWF5YmVFcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXhlY3V0aW9uRXJyb3IgPSBlbnN1cmVFcnJvcihleGVjdXRpb25NYXliZUVycm9yKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGV4ZWN1dGlvbkxpc3RlbmVycy5tYXAoKGwpID0+IGwuZXhlY3V0aW9uRGlkRW5kPy4oZXhlY3V0aW9uRXJyb3IpKSk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VuZEVycm9yUmVzcG9uc2UoW2Vuc3VyZUdyYXBoUUxFcnJvcihleGVjdXRpb25FcnJvcildKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChleGVjdXRpb25MaXN0ZW5lcnMubWFwKChsKSA9PiBsLmV4ZWN1dGlvbkRpZEVuZD8uKCkpKTtcbiAgICB9XG4gICAgYXdhaXQgaW52b2tlV2lsbFNlbmRSZXNwb25zZSgpO1xuICAgIGlmICghcmVxdWVzdENvbnRleHQucmVzcG9uc2UuYm9keSkge1xuICAgICAgICB0aHJvdyBFcnJvcignZ290IHRvIGVuZCBvZiBwcm9jZXNzR3JhcGhRTFJlcXVlc3Qgd2l0aG91dCBzZXR0aW5nIGJvZHk/Jyk7XG4gICAgfVxuICAgIHJldHVybiByZXF1ZXN0Q29udGV4dC5yZXNwb25zZTtcbiAgICBhc3luYyBmdW5jdGlvbiBleGVjdXRlKHJlcXVlc3RDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHsgcmVxdWVzdCwgZG9jdW1lbnQgfSA9IHJlcXVlc3RDb250ZXh0O1xuICAgICAgICBpZiAoaW50ZXJuYWxzLl9fdGVzdGluZ19pbmNyZW1lbnRhbEV4ZWN1dGlvblJlc3VsdHMpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcm5hbHMuX190ZXN0aW5nX2luY3JlbWVudGFsRXhlY3V0aW9uUmVzdWx0cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnRlcm5hbHMuZ2F0ZXdheUV4ZWN1dG9yKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnRlcm5hbHMuZ2F0ZXdheUV4ZWN1dG9yKG1ha2VHYXRld2F5R3JhcGhRTFJlcXVlc3RDb250ZXh0KHJlcXVlc3RDb250ZXh0LCBzZXJ2ZXIsIGludGVybmFscykpO1xuICAgICAgICAgICAgcmV0dXJuIHsgc2luZ2xlUmVzdWx0OiByZXN1bHQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdE9yUmVzdWx0cyA9IGF3YWl0IGV4ZWN1dGVJbmNyZW1lbnRhbGx5KHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHNjaGVtYURlcml2ZWREYXRhLnNjaGVtYSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudCxcbiAgICAgICAgICAgICAgICByb290VmFsdWU6IHR5cGVvZiBpbnRlcm5hbHMucm9vdFZhbHVlID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gaW50ZXJuYWxzLnJvb3RWYWx1ZShkb2N1bWVudClcbiAgICAgICAgICAgICAgICAgICAgOiBpbnRlcm5hbHMucm9vdFZhbHVlLFxuICAgICAgICAgICAgICAgIGNvbnRleHRWYWx1ZTogcmVxdWVzdENvbnRleHQuY29udGV4dFZhbHVlLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlVmFsdWVzOiByZXF1ZXN0LnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25OYW1lOiByZXF1ZXN0Lm9wZXJhdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgZmllbGRSZXNvbHZlcjogaW50ZXJuYWxzLmZpZWxkUmVzb2x2ZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICgnaW5pdGlhbFJlc3VsdCcgaW4gcmVzdWx0T3JSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFJlc3VsdDogcmVzdWx0T3JSZXN1bHRzLmluaXRpYWxSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIHN1YnNlcXVlbnRSZXN1bHRzOiBmb3JtYXRFcnJvcnNJblN1YnNlcXVlbnRSZXN1bHRzKHJlc3VsdE9yUmVzdWx0cy5zdWJzZXF1ZW50UmVzdWx0cyksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHNpbmdsZVJlc3VsdDogcmVzdWx0T3JSZXN1bHRzIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZnVuY3Rpb24qIGZvcm1hdEVycm9yc0luU3Vic2VxdWVudFJlc3VsdHMocmVzdWx0cykge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gcmVzdWx0LmluY3JlbWVudGFsXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50YWw6IGF3YWl0IHNlcmllc0FzeW5jTWFwKHJlc3VsdC5pbmNyZW1lbnRhbCwgYXN5bmMgKGluY3JlbWVudGFsUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGVycm9ycyB9ID0gaW5jcmVtZW50YWxSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVxdWVzdExpc3RlbmVycy5tYXAoKGwpID0+IGwuZGlkRW5jb3VudGVyU3Vic2VxdWVudEVycm9ycz8uKHJlcXVlc3RDb250ZXh0LCBlcnJvcnMpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uaW5jcmVtZW50YWxSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogZm9ybWF0RXJyb3JzKGVycm9ycykuZm9ybWF0dGVkRXJyb3JzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5jcmVtZW50YWxSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHJlc3VsdDtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlcXVlc3RMaXN0ZW5lcnMubWFwKChsKSA9PiBsLndpbGxTZW5kU3Vic2VxdWVudFBheWxvYWQ/LihyZXF1ZXN0Q29udGV4dCwgcGF5bG9hZCkpKTtcbiAgICAgICAgICAgIHlpZWxkIHBheWxvYWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZnVuY3Rpb24gaW52b2tlV2lsbFNlbmRSZXNwb25zZSgpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVxdWVzdExpc3RlbmVycy5tYXAoKGwpID0+IGwud2lsbFNlbmRSZXNwb25zZT8uKHJlcXVlc3RDb250ZXh0KSkpO1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBkaWRFbmNvdW50ZXJFcnJvcnMoZXJyb3JzKSB7XG4gICAgICAgIHJlcXVlc3RDb250ZXh0LmVycm9ycyA9IGVycm9ycztcbiAgICAgICAgcmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKHJlcXVlc3RMaXN0ZW5lcnMubWFwKChsKSA9PiBsLmRpZEVuY291bnRlckVycm9ycz8uKHJlcXVlc3RDb250ZXh0KSkpO1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBzZW5kRXJyb3JSZXNwb25zZShlcnJvcnMpIHtcbiAgICAgICAgYXdhaXQgZGlkRW5jb3VudGVyRXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNvbnN0IHsgZm9ybWF0dGVkRXJyb3JzLCBodHRwRnJvbUVycm9ycyB9ID0gZm9ybWF0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIHJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmJvZHkgPSB7XG4gICAgICAgICAgICBraW5kOiAnc2luZ2xlJyxcbiAgICAgICAgICAgIHNpbmdsZVJlc3VsdDoge1xuICAgICAgICAgICAgICAgIGVycm9yczogZm9ybWF0dGVkRXJyb3JzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgbWVyZ2VIVFRQR3JhcGhRTEhlYWQocmVxdWVzdENvbnRleHQucmVzcG9uc2UuaHR0cCwgaHR0cEZyb21FcnJvcnMpO1xuICAgICAgICBpZiAoIXJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmh0dHAuc3RhdHVzKSB7XG4gICAgICAgICAgICByZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5odHRwLnN0YXR1cyA9IDUwMDtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBpbnZva2VXaWxsU2VuZFJlc3BvbnNlKCk7XG4gICAgICAgIHJldHVybiByZXF1ZXN0Q29udGV4dC5yZXNwb25zZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZm9ybWF0RXJyb3JzKGVycm9ycykge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplQW5kRm9ybWF0RXJyb3JzKGVycm9ycywge1xuICAgICAgICAgICAgZm9ybWF0RXJyb3I6IGludGVybmFscy5mb3JtYXRFcnJvcixcbiAgICAgICAgICAgIGluY2x1ZGVTdGFja3RyYWNlSW5FcnJvclJlc3BvbnNlczogaW50ZXJuYWxzLmluY2x1ZGVTdGFja3RyYWNlSW5FcnJvclJlc3BvbnNlcyxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gc2VyaWVzQXN5bmNNYXAodHMsIGZuKSB7XG4gICAgY29uc3QgdXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgdHMpIHtcbiAgICAgICAgY29uc3QgdSA9IGF3YWl0IGZuKHQpO1xuICAgICAgICB1cy5wdXNoKHUpO1xuICAgIH1cbiAgICByZXR1cm4gdXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXF1ZXN0UGlwZWxpbmUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/requestPipeline.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/runHttpQuery.js":
/*!**************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/runHttpQuery.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeHTTPGraphQLHead: () => (/* binding */ mergeHTTPGraphQLHead),\n/* harmony export */   newHTTPGraphQLHead: () => (/* binding */ newHTTPGraphQLHead),\n/* harmony export */   prettyJSONStringify: () => (/* binding */ prettyJSONStringify),\n/* harmony export */   runHttpQuery: () => (/* binding */ runHttpQuery)\n/* harmony export */ });\n/* harmony import */ var _ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ApolloServer.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/ApolloServer.js\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/language/kinds.mjs\");\n/* harmony import */ var _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./internalErrorClasses.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/internalErrorClasses.js\");\n/* harmony import */ var negotiator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! negotiator */ \"(rsc)/./node_modules/negotiator/index.js\");\n/* harmony import */ var _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/HeaderMap.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js\");\n\n\n\n\n\nfunction fieldIfString(o, fieldName) {\n    const value = o[fieldName];\n    if (typeof value === 'string') {\n        return value;\n    }\n    return undefined;\n}\nfunction searchParamIfSpecifiedOnce(searchParams, paramName) {\n    const values = searchParams.getAll(paramName);\n    switch (values.length) {\n        case 0:\n            return undefined;\n        case 1:\n            return values[0];\n        default:\n            throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError(`The '${paramName}' search parameter may only be specified once.`);\n    }\n}\nfunction jsonParsedSearchParamIfSpecifiedOnce(searchParams, fieldName) {\n    const value = searchParamIfSpecifiedOnce(searchParams, fieldName);\n    if (value === undefined) {\n        return undefined;\n    }\n    let hopefullyRecord;\n    try {\n        hopefullyRecord = JSON.parse(value);\n    }\n    catch {\n        throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError(`The ${fieldName} search parameter contains invalid JSON.`);\n    }\n    if (!isStringRecord(hopefullyRecord)) {\n        throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError(`The ${fieldName} search parameter should contain a JSON-encoded object.`);\n    }\n    return hopefullyRecord;\n}\nfunction fieldIfRecord(o, fieldName) {\n    const value = o[fieldName];\n    if (isStringRecord(value)) {\n        return value;\n    }\n    return undefined;\n}\nfunction isStringRecord(o) {\n    return (!!o && typeof o === 'object' && !Buffer.isBuffer(o) && !Array.isArray(o));\n}\nfunction isNonEmptyStringRecord(o) {\n    return isStringRecord(o) && Object.keys(o).length > 0;\n}\nfunction ensureQueryIsStringOrMissing(query) {\n    if (!query || typeof query === 'string') {\n        return;\n    }\n    if (query.kind === graphql__WEBPACK_IMPORTED_MODULE_4__.Kind.DOCUMENT) {\n        throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError(\"GraphQL queries must be strings. It looks like you're sending the \" +\n            'internal graphql-js representation of a parsed query in your ' +\n            'request instead of a request in the GraphQL query language. You ' +\n            'can convert an AST to a string using the `print` function from ' +\n            '`graphql`, or use a client like `apollo-client` which converts ' +\n            'the internal representation to a string for you.');\n    }\n    else {\n        throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('GraphQL queries must be strings.');\n    }\n}\nasync function runHttpQuery({ server, httpRequest, contextValue, schemaDerivedData, internals, sharedResponseHTTPGraphQLHead, }) {\n    let graphQLRequest;\n    switch (httpRequest.method) {\n        case 'POST': {\n            if (!isNonEmptyStringRecord(httpRequest.body)) {\n                throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('POST body missing, invalid Content-Type, or JSON object has no keys.');\n            }\n            ensureQueryIsStringOrMissing(httpRequest.body.query);\n            if (typeof httpRequest.body.variables === 'string') {\n                throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('`variables` in a POST body should be provided as an object, not a recursively JSON-encoded string.');\n            }\n            if (typeof httpRequest.body.extensions === 'string') {\n                throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('`extensions` in a POST body should be provided as an object, not a recursively JSON-encoded string.');\n            }\n            if ('extensions' in httpRequest.body &&\n                httpRequest.body.extensions !== null &&\n                !isStringRecord(httpRequest.body.extensions)) {\n                throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('`extensions` in a POST body must be an object if provided.');\n            }\n            if ('variables' in httpRequest.body &&\n                httpRequest.body.variables !== null &&\n                !isStringRecord(httpRequest.body.variables)) {\n                throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('`variables` in a POST body must be an object if provided.');\n            }\n            if ('operationName' in httpRequest.body &&\n                httpRequest.body.operationName !== null &&\n                typeof httpRequest.body.operationName !== 'string') {\n                throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('`operationName` in a POST body must be a string if provided.');\n            }\n            graphQLRequest = {\n                query: fieldIfString(httpRequest.body, 'query'),\n                operationName: fieldIfString(httpRequest.body, 'operationName'),\n                variables: fieldIfRecord(httpRequest.body, 'variables'),\n                extensions: fieldIfRecord(httpRequest.body, 'extensions'),\n                http: httpRequest,\n            };\n            break;\n        }\n        case 'GET': {\n            const searchParams = new URLSearchParams(httpRequest.search);\n            graphQLRequest = {\n                query: searchParamIfSpecifiedOnce(searchParams, 'query'),\n                operationName: searchParamIfSpecifiedOnce(searchParams, 'operationName'),\n                variables: jsonParsedSearchParamIfSpecifiedOnce(searchParams, 'variables'),\n                extensions: jsonParsedSearchParamIfSpecifiedOnce(searchParams, 'extensions'),\n                http: httpRequest,\n            };\n            break;\n        }\n        default:\n            throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('Apollo Server supports only GET/POST requests.', {\n                extensions: {\n                    http: {\n                        status: 405,\n                        headers: new _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_3__.HeaderMap([['allow', 'GET, POST']]),\n                    },\n                },\n            });\n    }\n    const graphQLResponse = await (0,_ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__.internalExecuteOperation)({\n        server,\n        graphQLRequest,\n        internals,\n        schemaDerivedData,\n        sharedResponseHTTPGraphQLHead,\n    }, { contextValue });\n    if (graphQLResponse.body.kind === 'single') {\n        if (!graphQLResponse.http.headers.get('content-type')) {\n            const contentType = (0,_ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__.chooseContentTypeForSingleResultResponse)(httpRequest);\n            if (contentType === null) {\n                throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError(`An 'accept' header was provided for this request which does not accept ` +\n                    `${_ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__.MEDIA_TYPES.APPLICATION_JSON} or ${_ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__.MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON}`, { extensions: { http: { status: 406 } } });\n            }\n            graphQLResponse.http.headers.set('content-type', contentType);\n        }\n        return {\n            ...graphQLResponse.http,\n            body: {\n                kind: 'complete',\n                string: await internals.stringifyResult(orderExecutionResultFields(graphQLResponse.body.singleResult)),\n            },\n        };\n    }\n    const acceptHeader = httpRequest.headers.get('accept');\n    if (!(acceptHeader &&\n        new negotiator__WEBPACK_IMPORTED_MODULE_2__({\n            headers: { accept: httpRequest.headers.get('accept') },\n        }).mediaType([\n            _ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__.MEDIA_TYPES.MULTIPART_MIXED_NO_DEFER_SPEC,\n            _ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL,\n        ]) === _ApolloServer_js__WEBPACK_IMPORTED_MODULE_0__.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL)) {\n        throw new _internalErrorClasses_js__WEBPACK_IMPORTED_MODULE_1__.BadRequestError('Apollo server received an operation that uses incremental delivery ' +\n            '(@defer or @stream), but the client does not accept multipart/mixed ' +\n            'HTTP responses. To enable incremental delivery support, add the HTTP ' +\n            \"header 'Accept: multipart/mixed; deferSpec=20220824'.\", { extensions: { http: { status: 406 } } });\n    }\n    graphQLResponse.http.headers.set('content-type', 'multipart/mixed; boundary=\"-\"; deferSpec=20220824');\n    return {\n        ...graphQLResponse.http,\n        body: {\n            kind: 'chunked',\n            asyncIterator: writeMultipartBody(graphQLResponse.body.initialResult, graphQLResponse.body.subsequentResults),\n        },\n    };\n}\nasync function* writeMultipartBody(initialResult, subsequentResults) {\n    yield `\\r\\n---\\r\\ncontent-type: application/json; charset=utf-8\\r\\n\\r\\n${JSON.stringify(orderInitialIncrementalExecutionResultFields(initialResult))}\\r\\n---${initialResult.hasNext ? '' : '--'}\\r\\n`;\n    for await (const result of subsequentResults) {\n        yield `content-type: application/json; charset=utf-8\\r\\n\\r\\n${JSON.stringify(orderSubsequentIncrementalExecutionResultFields(result))}\\r\\n---${result.hasNext ? '' : '--'}\\r\\n`;\n    }\n}\nfunction orderExecutionResultFields(result) {\n    return {\n        errors: result.errors,\n        data: result.data,\n        extensions: result.extensions,\n    };\n}\nfunction orderInitialIncrementalExecutionResultFields(result) {\n    return {\n        hasNext: result.hasNext,\n        errors: result.errors,\n        data: result.data,\n        incremental: orderIncrementalResultFields(result.incremental),\n        extensions: result.extensions,\n    };\n}\nfunction orderSubsequentIncrementalExecutionResultFields(result) {\n    return {\n        hasNext: result.hasNext,\n        incremental: orderIncrementalResultFields(result.incremental),\n        extensions: result.extensions,\n    };\n}\nfunction orderIncrementalResultFields(incremental) {\n    return incremental?.map((i) => ({\n        hasNext: i.hasNext,\n        errors: i.errors,\n        path: i.path,\n        label: i.label,\n        data: i.data,\n        items: i.items,\n        extensions: i.extensions,\n    }));\n}\nfunction prettyJSONStringify(value) {\n    return JSON.stringify(value) + '\\n';\n}\nfunction newHTTPGraphQLHead(status) {\n    return {\n        status,\n        headers: new _utils_HeaderMap_js__WEBPACK_IMPORTED_MODULE_3__.HeaderMap(),\n    };\n}\nfunction mergeHTTPGraphQLHead(target, source) {\n    if (source.status) {\n        target.status = source.status;\n    }\n    if (source.headers) {\n        for (const [name, value] of source.headers) {\n            target.headers.set(name, value);\n        }\n    }\n}\n//# sourceMappingURL=runHttpQuery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcnVuSHR0cFF1ZXJ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFxSDtBQUN0RjtBQUM2QjtBQUN4QjtBQUNhO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxRUFBZSxTQUFTLFVBQVU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFFQUFlLFFBQVEsV0FBVztBQUNwRDtBQUNBO0FBQ0Esa0JBQWtCLHFFQUFlLFFBQVEsV0FBVztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHlDQUFJO0FBQzNCLGtCQUFrQixxRUFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxRUFBZTtBQUNqQztBQUNBO0FBQ08sOEJBQThCLGlHQUFpRztBQUN0STtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxRUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQSwwQkFBMEIscUVBQWU7QUFDekM7QUFDQTtBQUNBLDBCQUEwQixxRUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxRUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxRUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxRUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxRUFBZTtBQUNyQztBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsMERBQVM7QUFDOUMscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxrQ0FBa0MsMEVBQXdCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUksY0FBYztBQUN2QjtBQUNBO0FBQ0EsZ0NBQWdDLDBGQUF3QztBQUN4RTtBQUNBLDBCQUEwQixxRUFBZTtBQUN6Qyx1QkFBdUIseURBQVcsbUJBQW1CLEtBQUsseURBQVcsbUNBQW1DLEtBQUssY0FBYyxRQUFRLGlCQUFpQjtBQUNwSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1Q0FBVTtBQUN0Qix1QkFBdUIsMkNBQTJDO0FBQ2xFLFNBQVM7QUFDVCxZQUFZLHlEQUFXO0FBQ3ZCLFlBQVkseURBQVc7QUFDdkIsZUFBZSx5REFBVztBQUMxQixrQkFBa0IscUVBQWU7QUFDakM7QUFDQTtBQUNBLDhDQUE4Qyx5QkFBeUIsY0FBYyxRQUFRLGlCQUFpQjtBQUM5RztBQUNBLHVFQUF1RSxjQUFjO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHVCQUF1Qiw0RUFBNEUsU0FBUyxrQ0FBa0M7QUFDcE07QUFDQSwrQ0FBK0MsdUJBQXVCLHdFQUF3RSxTQUFTLDJCQUEyQjtBQUNsTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHFCQUFxQiwwREFBUztBQUM5QjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vcnVuSHR0cFF1ZXJ5LmpzPzI0NGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2hvb3NlQ29udGVudFR5cGVGb3JTaW5nbGVSZXN1bHRSZXNwb25zZSwgaW50ZXJuYWxFeGVjdXRlT3BlcmF0aW9uLCBNRURJQV9UWVBFUywgfSBmcm9tICcuL0Fwb2xsb1NlcnZlci5qcyc7XG5pbXBvcnQgeyBLaW5kIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBCYWRSZXF1ZXN0RXJyb3IgfSBmcm9tICcuL2ludGVybmFsRXJyb3JDbGFzc2VzLmpzJztcbmltcG9ydCBOZWdvdGlhdG9yIGZyb20gJ25lZ290aWF0b3InO1xuaW1wb3J0IHsgSGVhZGVyTWFwIH0gZnJvbSAnLi91dGlscy9IZWFkZXJNYXAuanMnO1xuZnVuY3Rpb24gZmllbGRJZlN0cmluZyhvLCBmaWVsZE5hbWUpIHtcbiAgICBjb25zdCB2YWx1ZSA9IG9bZmllbGROYW1lXTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBzZWFyY2hQYXJhbUlmU3BlY2lmaWVkT25jZShzZWFyY2hQYXJhbXMsIHBhcmFtTmFtZSkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHNlYXJjaFBhcmFtcy5nZXRBbGwocGFyYW1OYW1lKTtcbiAgICBzd2l0Y2ggKHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlc1swXTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoYFRoZSAnJHtwYXJhbU5hbWV9JyBzZWFyY2ggcGFyYW1ldGVyIG1heSBvbmx5IGJlIHNwZWNpZmllZCBvbmNlLmApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGpzb25QYXJzZWRTZWFyY2hQYXJhbUlmU3BlY2lmaWVkT25jZShzZWFyY2hQYXJhbXMsIGZpZWxkTmFtZSkge1xuICAgIGNvbnN0IHZhbHVlID0gc2VhcmNoUGFyYW1JZlNwZWNpZmllZE9uY2Uoc2VhcmNoUGFyYW1zLCBmaWVsZE5hbWUpO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGxldCBob3BlZnVsbHlSZWNvcmQ7XG4gICAgdHJ5IHtcbiAgICAgICAgaG9wZWZ1bGx5UmVjb3JkID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFcnJvcihgVGhlICR7ZmllbGROYW1lfSBzZWFyY2ggcGFyYW1ldGVyIGNvbnRhaW5zIGludmFsaWQgSlNPTi5gKTtcbiAgICB9XG4gICAgaWYgKCFpc1N0cmluZ1JlY29yZChob3BlZnVsbHlSZWNvcmQpKSB7XG4gICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoYFRoZSAke2ZpZWxkTmFtZX0gc2VhcmNoIHBhcmFtZXRlciBzaG91bGQgY29udGFpbiBhIEpTT04tZW5jb2RlZCBvYmplY3QuYCk7XG4gICAgfVxuICAgIHJldHVybiBob3BlZnVsbHlSZWNvcmQ7XG59XG5mdW5jdGlvbiBmaWVsZElmUmVjb3JkKG8sIGZpZWxkTmFtZSkge1xuICAgIGNvbnN0IHZhbHVlID0gb1tmaWVsZE5hbWVdO1xuICAgIGlmIChpc1N0cmluZ1JlY29yZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gaXNTdHJpbmdSZWNvcmQobykge1xuICAgIHJldHVybiAoISFvICYmIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiAhQnVmZmVyLmlzQnVmZmVyKG8pICYmICFBcnJheS5pc0FycmF5KG8pKTtcbn1cbmZ1bmN0aW9uIGlzTm9uRW1wdHlTdHJpbmdSZWNvcmQobykge1xuICAgIHJldHVybiBpc1N0cmluZ1JlY29yZChvKSAmJiBPYmplY3Qua2V5cyhvKS5sZW5ndGggPiAwO1xufVxuZnVuY3Rpb24gZW5zdXJlUXVlcnlJc1N0cmluZ09yTWlzc2luZyhxdWVyeSkge1xuICAgIGlmICghcXVlcnkgfHwgdHlwZW9mIHF1ZXJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChxdWVyeS5raW5kID09PSBLaW5kLkRPQ1VNRU5UKSB7XG4gICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoXCJHcmFwaFFMIHF1ZXJpZXMgbXVzdCBiZSBzdHJpbmdzLiBJdCBsb29rcyBsaWtlIHlvdSdyZSBzZW5kaW5nIHRoZSBcIiArXG4gICAgICAgICAgICAnaW50ZXJuYWwgZ3JhcGhxbC1qcyByZXByZXNlbnRhdGlvbiBvZiBhIHBhcnNlZCBxdWVyeSBpbiB5b3VyICcgK1xuICAgICAgICAgICAgJ3JlcXVlc3QgaW5zdGVhZCBvZiBhIHJlcXVlc3QgaW4gdGhlIEdyYXBoUUwgcXVlcnkgbGFuZ3VhZ2UuIFlvdSAnICtcbiAgICAgICAgICAgICdjYW4gY29udmVydCBhbiBBU1QgdG8gYSBzdHJpbmcgdXNpbmcgdGhlIGBwcmludGAgZnVuY3Rpb24gZnJvbSAnICtcbiAgICAgICAgICAgICdgZ3JhcGhxbGAsIG9yIHVzZSBhIGNsaWVudCBsaWtlIGBhcG9sbG8tY2xpZW50YCB3aGljaCBjb252ZXJ0cyAnICtcbiAgICAgICAgICAgICd0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gdG8gYSBzdHJpbmcgZm9yIHlvdS4nKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoJ0dyYXBoUUwgcXVlcmllcyBtdXN0IGJlIHN0cmluZ3MuJyk7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bkh0dHBRdWVyeSh7IHNlcnZlciwgaHR0cFJlcXVlc3QsIGNvbnRleHRWYWx1ZSwgc2NoZW1hRGVyaXZlZERhdGEsIGludGVybmFscywgc2hhcmVkUmVzcG9uc2VIVFRQR3JhcGhRTEhlYWQsIH0pIHtcbiAgICBsZXQgZ3JhcGhRTFJlcXVlc3Q7XG4gICAgc3dpdGNoIChodHRwUmVxdWVzdC5tZXRob2QpIHtcbiAgICAgICAgY2FzZSAnUE9TVCc6IHtcbiAgICAgICAgICAgIGlmICghaXNOb25FbXB0eVN0cmluZ1JlY29yZChodHRwUmVxdWVzdC5ib2R5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoJ1BPU1QgYm9keSBtaXNzaW5nLCBpbnZhbGlkIENvbnRlbnQtVHlwZSwgb3IgSlNPTiBvYmplY3QgaGFzIG5vIGtleXMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbnN1cmVRdWVyeUlzU3RyaW5nT3JNaXNzaW5nKGh0dHBSZXF1ZXN0LmJvZHkucXVlcnkpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBodHRwUmVxdWVzdC5ib2R5LnZhcmlhYmxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEVycm9yKCdgdmFyaWFibGVzYCBpbiBhIFBPU1QgYm9keSBzaG91bGQgYmUgcHJvdmlkZWQgYXMgYW4gb2JqZWN0LCBub3QgYSByZWN1cnNpdmVseSBKU09OLWVuY29kZWQgc3RyaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBodHRwUmVxdWVzdC5ib2R5LmV4dGVuc2lvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFcnJvcignYGV4dGVuc2lvbnNgIGluIGEgUE9TVCBib2R5IHNob3VsZCBiZSBwcm92aWRlZCBhcyBhbiBvYmplY3QsIG5vdCBhIHJlY3Vyc2l2ZWx5IEpTT04tZW5jb2RlZCBzdHJpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ2V4dGVuc2lvbnMnIGluIGh0dHBSZXF1ZXN0LmJvZHkgJiZcbiAgICAgICAgICAgICAgICBodHRwUmVxdWVzdC5ib2R5LmV4dGVuc2lvbnMgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAhaXNTdHJpbmdSZWNvcmQoaHR0cFJlcXVlc3QuYm9keS5leHRlbnNpb25zKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoJ2BleHRlbnNpb25zYCBpbiBhIFBPU1QgYm9keSBtdXN0IGJlIGFuIG9iamVjdCBpZiBwcm92aWRlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgndmFyaWFibGVzJyBpbiBodHRwUmVxdWVzdC5ib2R5ICYmXG4gICAgICAgICAgICAgICAgaHR0cFJlcXVlc3QuYm9keS52YXJpYWJsZXMgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAhaXNTdHJpbmdSZWNvcmQoaHR0cFJlcXVlc3QuYm9keS52YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFcnJvcignYHZhcmlhYmxlc2AgaW4gYSBQT1NUIGJvZHkgbXVzdCBiZSBhbiBvYmplY3QgaWYgcHJvdmlkZWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ29wZXJhdGlvbk5hbWUnIGluIGh0dHBSZXF1ZXN0LmJvZHkgJiZcbiAgICAgICAgICAgICAgICBodHRwUmVxdWVzdC5ib2R5Lm9wZXJhdGlvbk5hbWUgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgaHR0cFJlcXVlc3QuYm9keS5vcGVyYXRpb25OYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXJyb3IoJ2BvcGVyYXRpb25OYW1lYCBpbiBhIFBPU1QgYm9keSBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3JhcGhRTFJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IGZpZWxkSWZTdHJpbmcoaHR0cFJlcXVlc3QuYm9keSwgJ3F1ZXJ5JyksXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uTmFtZTogZmllbGRJZlN0cmluZyhodHRwUmVxdWVzdC5ib2R5LCAnb3BlcmF0aW9uTmFtZScpLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogZmllbGRJZlJlY29yZChodHRwUmVxdWVzdC5ib2R5LCAndmFyaWFibGVzJyksXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogZmllbGRJZlJlY29yZChodHRwUmVxdWVzdC5ib2R5LCAnZXh0ZW5zaW9ucycpLFxuICAgICAgICAgICAgICAgIGh0dHA6IGh0dHBSZXF1ZXN0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0dFVCc6IHtcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaHR0cFJlcXVlc3Quc2VhcmNoKTtcbiAgICAgICAgICAgIGdyYXBoUUxSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBzZWFyY2hQYXJhbUlmU3BlY2lmaWVkT25jZShzZWFyY2hQYXJhbXMsICdxdWVyeScpLFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbk5hbWU6IHNlYXJjaFBhcmFtSWZTcGVjaWZpZWRPbmNlKHNlYXJjaFBhcmFtcywgJ29wZXJhdGlvbk5hbWUnKSxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGpzb25QYXJzZWRTZWFyY2hQYXJhbUlmU3BlY2lmaWVkT25jZShzZWFyY2hQYXJhbXMsICd2YXJpYWJsZXMnKSxcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiBqc29uUGFyc2VkU2VhcmNoUGFyYW1JZlNwZWNpZmllZE9uY2Uoc2VhcmNoUGFyYW1zLCAnZXh0ZW5zaW9ucycpLFxuICAgICAgICAgICAgICAgIGh0dHA6IGh0dHBSZXF1ZXN0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEVycm9yKCdBcG9sbG8gU2VydmVyIHN1cHBvcnRzIG9ubHkgR0VUL1BPU1QgcmVxdWVzdHMuJywge1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaHR0cDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVyTWFwKFtbJ2FsbG93JywgJ0dFVCwgUE9TVCddXSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBncmFwaFFMUmVzcG9uc2UgPSBhd2FpdCBpbnRlcm5hbEV4ZWN1dGVPcGVyYXRpb24oe1xuICAgICAgICBzZXJ2ZXIsXG4gICAgICAgIGdyYXBoUUxSZXF1ZXN0LFxuICAgICAgICBpbnRlcm5hbHMsXG4gICAgICAgIHNjaGVtYURlcml2ZWREYXRhLFxuICAgICAgICBzaGFyZWRSZXNwb25zZUhUVFBHcmFwaFFMSGVhZCxcbiAgICB9LCB7IGNvbnRleHRWYWx1ZSB9KTtcbiAgICBpZiAoZ3JhcGhRTFJlc3BvbnNlLmJvZHkua2luZCA9PT0gJ3NpbmdsZScpIHtcbiAgICAgICAgaWYgKCFncmFwaFFMUmVzcG9uc2UuaHR0cC5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gY2hvb3NlQ29udGVudFR5cGVGb3JTaW5nbGVSZXN1bHRSZXNwb25zZShodHRwUmVxdWVzdCk7XG4gICAgICAgICAgICBpZiAoY29udGVudFR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEVycm9yKGBBbiAnYWNjZXB0JyBoZWFkZXIgd2FzIHByb3ZpZGVkIGZvciB0aGlzIHJlcXVlc3Qgd2hpY2ggZG9lcyBub3QgYWNjZXB0IGAgK1xuICAgICAgICAgICAgICAgICAgICBgJHtNRURJQV9UWVBFUy5BUFBMSUNBVElPTl9KU09OfSBvciAke01FRElBX1RZUEVTLkFQUExJQ0FUSU9OX0dSQVBIUUxfUkVTUE9OU0VfSlNPTn1gLCB7IGV4dGVuc2lvbnM6IHsgaHR0cDogeyBzdGF0dXM6IDQwNiB9IH0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBncmFwaFFMUmVzcG9uc2UuaHR0cC5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgY29udGVudFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5ncmFwaFFMUmVzcG9uc2UuaHR0cCxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBraW5kOiAnY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHN0cmluZzogYXdhaXQgaW50ZXJuYWxzLnN0cmluZ2lmeVJlc3VsdChvcmRlckV4ZWN1dGlvblJlc3VsdEZpZWxkcyhncmFwaFFMUmVzcG9uc2UuYm9keS5zaW5nbGVSZXN1bHQpKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGFjY2VwdEhlYWRlciA9IGh0dHBSZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhY2NlcHQnKTtcbiAgICBpZiAoIShhY2NlcHRIZWFkZXIgJiZcbiAgICAgICAgbmV3IE5lZ290aWF0b3Ioe1xuICAgICAgICAgICAgaGVhZGVyczogeyBhY2NlcHQ6IGh0dHBSZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhY2NlcHQnKSB9LFxuICAgICAgICB9KS5tZWRpYVR5cGUoW1xuICAgICAgICAgICAgTUVESUFfVFlQRVMuTVVMVElQQVJUX01JWEVEX05PX0RFRkVSX1NQRUMsXG4gICAgICAgICAgICBNRURJQV9UWVBFUy5NVUxUSVBBUlRfTUlYRURfRVhQRVJJTUVOVEFMLFxuICAgICAgICBdKSA9PT0gTUVESUFfVFlQRVMuTVVMVElQQVJUX01JWEVEX0VYUEVSSU1FTlRBTCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFcnJvcignQXBvbGxvIHNlcnZlciByZWNlaXZlZCBhbiBvcGVyYXRpb24gdGhhdCB1c2VzIGluY3JlbWVudGFsIGRlbGl2ZXJ5ICcgK1xuICAgICAgICAgICAgJyhAZGVmZXIgb3IgQHN0cmVhbSksIGJ1dCB0aGUgY2xpZW50IGRvZXMgbm90IGFjY2VwdCBtdWx0aXBhcnQvbWl4ZWQgJyArXG4gICAgICAgICAgICAnSFRUUCByZXNwb25zZXMuIFRvIGVuYWJsZSBpbmNyZW1lbnRhbCBkZWxpdmVyeSBzdXBwb3J0LCBhZGQgdGhlIEhUVFAgJyArXG4gICAgICAgICAgICBcImhlYWRlciAnQWNjZXB0OiBtdWx0aXBhcnQvbWl4ZWQ7IGRlZmVyU3BlYz0yMDIyMDgyNCcuXCIsIHsgZXh0ZW5zaW9uczogeyBodHRwOiB7IHN0YXR1czogNDA2IH0gfSB9KTtcbiAgICB9XG4gICAgZ3JhcGhRTFJlc3BvbnNlLmh0dHAuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICdtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PVwiLVwiOyBkZWZlclNwZWM9MjAyMjA4MjQnKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5ncmFwaFFMUmVzcG9uc2UuaHR0cCxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgICAga2luZDogJ2NodW5rZWQnLFxuICAgICAgICAgICAgYXN5bmNJdGVyYXRvcjogd3JpdGVNdWx0aXBhcnRCb2R5KGdyYXBoUUxSZXNwb25zZS5ib2R5LmluaXRpYWxSZXN1bHQsIGdyYXBoUUxSZXNwb25zZS5ib2R5LnN1YnNlcXVlbnRSZXN1bHRzKSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24qIHdyaXRlTXVsdGlwYXJ0Qm9keShpbml0aWFsUmVzdWx0LCBzdWJzZXF1ZW50UmVzdWx0cykge1xuICAgIHlpZWxkIGBcXHJcXG4tLS1cXHJcXG5jb250ZW50LXR5cGU6IGFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcXHJcXG5cXHJcXG4ke0pTT04uc3RyaW5naWZ5KG9yZGVySW5pdGlhbEluY3JlbWVudGFsRXhlY3V0aW9uUmVzdWx0RmllbGRzKGluaXRpYWxSZXN1bHQpKX1cXHJcXG4tLS0ke2luaXRpYWxSZXN1bHQuaGFzTmV4dCA/ICcnIDogJy0tJ31cXHJcXG5gO1xuICAgIGZvciBhd2FpdCAoY29uc3QgcmVzdWx0IG9mIHN1YnNlcXVlbnRSZXN1bHRzKSB7XG4gICAgICAgIHlpZWxkIGBjb250ZW50LXR5cGU6IGFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcXHJcXG5cXHJcXG4ke0pTT04uc3RyaW5naWZ5KG9yZGVyU3Vic2VxdWVudEluY3JlbWVudGFsRXhlY3V0aW9uUmVzdWx0RmllbGRzKHJlc3VsdCkpfVxcclxcbi0tLSR7cmVzdWx0Lmhhc05leHQgPyAnJyA6ICctLSd9XFxyXFxuYDtcbiAgICB9XG59XG5mdW5jdGlvbiBvcmRlckV4ZWN1dGlvblJlc3VsdEZpZWxkcyhyZXN1bHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBlcnJvcnM6IHJlc3VsdC5lcnJvcnMsXG4gICAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgICBleHRlbnNpb25zOiByZXN1bHQuZXh0ZW5zaW9ucyxcbiAgICB9O1xufVxuZnVuY3Rpb24gb3JkZXJJbml0aWFsSW5jcmVtZW50YWxFeGVjdXRpb25SZXN1bHRGaWVsZHMocmVzdWx0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaGFzTmV4dDogcmVzdWx0Lmhhc05leHQsXG4gICAgICAgIGVycm9yczogcmVzdWx0LmVycm9ycyxcbiAgICAgICAgZGF0YTogcmVzdWx0LmRhdGEsXG4gICAgICAgIGluY3JlbWVudGFsOiBvcmRlckluY3JlbWVudGFsUmVzdWx0RmllbGRzKHJlc3VsdC5pbmNyZW1lbnRhbCksXG4gICAgICAgIGV4dGVuc2lvbnM6IHJlc3VsdC5leHRlbnNpb25zLFxuICAgIH07XG59XG5mdW5jdGlvbiBvcmRlclN1YnNlcXVlbnRJbmNyZW1lbnRhbEV4ZWN1dGlvblJlc3VsdEZpZWxkcyhyZXN1bHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBoYXNOZXh0OiByZXN1bHQuaGFzTmV4dCxcbiAgICAgICAgaW5jcmVtZW50YWw6IG9yZGVySW5jcmVtZW50YWxSZXN1bHRGaWVsZHMocmVzdWx0LmluY3JlbWVudGFsKSxcbiAgICAgICAgZXh0ZW5zaW9uczogcmVzdWx0LmV4dGVuc2lvbnMsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIG9yZGVySW5jcmVtZW50YWxSZXN1bHRGaWVsZHMoaW5jcmVtZW50YWwpIHtcbiAgICByZXR1cm4gaW5jcmVtZW50YWw/Lm1hcCgoaSkgPT4gKHtcbiAgICAgICAgaGFzTmV4dDogaS5oYXNOZXh0LFxuICAgICAgICBlcnJvcnM6IGkuZXJyb3JzLFxuICAgICAgICBwYXRoOiBpLnBhdGgsXG4gICAgICAgIGxhYmVsOiBpLmxhYmVsLFxuICAgICAgICBkYXRhOiBpLmRhdGEsXG4gICAgICAgIGl0ZW1zOiBpLml0ZW1zLFxuICAgICAgICBleHRlbnNpb25zOiBpLmV4dGVuc2lvbnMsXG4gICAgfSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByZXR0eUpTT05TdHJpbmdpZnkodmFsdWUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJ1xcbic7XG59XG5leHBvcnQgZnVuY3Rpb24gbmV3SFRUUEdyYXBoUUxIZWFkKHN0YXR1cykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlck1hcCgpLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VIVFRQR3JhcGhRTEhlYWQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBpZiAoc291cmNlLnN0YXR1cykge1xuICAgICAgICB0YXJnZXQuc3RhdHVzID0gc291cmNlLnN0YXR1cztcbiAgICB9XG4gICAgaWYgKHNvdXJjZS5oZWFkZXJzKSB7XG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBzb3VyY2UuaGVhZGVycykge1xuICAgICAgICAgICAgdGFyZ2V0LmhlYWRlcnMuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkh0dHBRdWVyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/runHttpQuery.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HeaderMap: () => (/* binding */ HeaderMap)\n/* harmony export */ });\nclass HeaderMap extends Map {\n    constructor() {\n        super(...arguments);\n        this.__identity = Symbol('HeaderMap');\n    }\n    set(key, value) {\n        return super.set(key.toLowerCase(), value);\n    }\n    get(key) {\n        return super.get(key.toLowerCase());\n    }\n    delete(key) {\n        return super.delete(key.toLowerCase());\n    }\n    has(key) {\n        return super.has(key.toLowerCase());\n    }\n}\n//# sourceMappingURL=HeaderMap.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvSGVhZGVyTWFwLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvSGVhZGVyTWFwLmpzP2VkMjUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEhlYWRlck1hcCBleHRlbmRzIE1hcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX19pZGVudGl0eSA9IFN5bWJvbCgnSGVhZGVyTWFwJyk7XG4gICAgfVxuICAgIHNldChrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5zZXQoa2V5LnRvTG93ZXJDYXNlKCksIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0KGtleS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gICAgZGVsZXRlKGtleSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGVsZXRlKGtleS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gICAgaGFzKGtleSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuaGFzKGtleS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1IZWFkZXJNYXAuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/HeaderMap.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/UnreachableCaseError.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/UnreachableCaseError.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UnreachableCaseError: () => (/* binding */ UnreachableCaseError)\n/* harmony export */ });\nclass UnreachableCaseError extends Error {\n    constructor(val) {\n        super(`Unreachable case: ${val}`);\n    }\n}\n//# sourceMappingURL=UnreachableCaseError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvVW5yZWFjaGFibGVDYXNlRXJyb3IuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQSxtQ0FBbUMsSUFBSTtBQUN2QztBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL3V0aWxzL1VucmVhY2hhYmxlQ2FzZUVycm9yLmpzPzczMmQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFVucmVhY2hhYmxlQ2FzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHZhbCkge1xuICAgICAgICBzdXBlcihgVW5yZWFjaGFibGUgY2FzZTogJHt2YWx9YCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5yZWFjaGFibGVDYXNlRXJyb3IuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/UnreachableCaseError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/computeCoreSchemaHash.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/computeCoreSchemaHash.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeCoreSchemaHash: () => (/* binding */ computeCoreSchemaHash)\n/* harmony export */ });\n/* harmony import */ var _apollo_utils_createhash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/utils.createhash */ \"(rsc)/./node_modules/@apollo/utils.createhash/dist/index.js\");\n\nfunction computeCoreSchemaHash(schema) {\n    return (0,_apollo_utils_createhash__WEBPACK_IMPORTED_MODULE_0__.createHash)('sha256').update(schema).digest('hex');\n}\n//# sourceMappingURL=computeCoreSchemaHash.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvY29tcHV0ZUNvcmVTY2hlbWFIYXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXNEO0FBQy9DO0FBQ1AsV0FBVyxvRUFBVTtBQUNyQjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS91dGlscy9jb21wdXRlQ29yZVNjaGVtYUhhc2guanM/MjhmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSAnQGFwb2xsby91dGlscy5jcmVhdGVoYXNoJztcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlQ29yZVNjaGVtYUhhc2goc2NoZW1hKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShzY2hlbWEpLmRpZ2VzdCgnaGV4Jyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wdXRlQ29yZVNjaGVtYUhhc2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/computeCoreSchemaHash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/invokeHooks.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/invokeHooks.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invokeDidStartHook: () => (/* binding */ invokeDidStartHook),\n/* harmony export */   invokeHooksUntilDefinedAndNonNull: () => (/* binding */ invokeHooksUntilDefinedAndNonNull),\n/* harmony export */   invokeSyncDidStartHook: () => (/* binding */ invokeSyncDidStartHook)\n/* harmony export */ });\n/* harmony import */ var _isDefined_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isDefined.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/utils/isDefined.js\");\n\nasync function invokeDidStartHook(targets, hook) {\n    const didEndHooks = (await Promise.all(targets.map((target) => hook(target)))).filter(_isDefined_js__WEBPACK_IMPORTED_MODULE_0__.isDefined);\n    didEndHooks.reverse();\n    return async (...args) => {\n        for (const didEndHook of didEndHooks) {\n            didEndHook(...args);\n        }\n    };\n}\nfunction invokeSyncDidStartHook(targets, hook) {\n    const didEndHooks = targets\n        .map((target) => hook(target))\n        .filter(_isDefined_js__WEBPACK_IMPORTED_MODULE_0__.isDefined);\n    didEndHooks.reverse();\n    return (...args) => {\n        for (const didEndHook of didEndHooks) {\n            didEndHook(...args);\n        }\n    };\n}\nasync function invokeHooksUntilDefinedAndNonNull(targets, hook) {\n    for (const target of targets) {\n        const value = await hook(target);\n        if (value != null) {\n            return value;\n        }\n    }\n    return null;\n}\n//# sourceMappingURL=invokeHooks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvaW52b2tlSG9va3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUNwQztBQUNQLDBGQUEwRixvREFBUztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGdCQUFnQixvREFBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS91dGlscy9pbnZva2VIb29rcy5qcz82YWEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gJy4vaXNEZWZpbmVkLmpzJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnZva2VEaWRTdGFydEhvb2sodGFyZ2V0cywgaG9vaykge1xuICAgIGNvbnN0IGRpZEVuZEhvb2tzID0gKGF3YWl0IFByb21pc2UuYWxsKHRhcmdldHMubWFwKCh0YXJnZXQpID0+IGhvb2sodGFyZ2V0KSkpKS5maWx0ZXIoaXNEZWZpbmVkKTtcbiAgICBkaWRFbmRIb29rcy5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZGlkRW5kSG9vayBvZiBkaWRFbmRIb29rcykge1xuICAgICAgICAgICAgZGlkRW5kSG9vayguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaW52b2tlU3luY0RpZFN0YXJ0SG9vayh0YXJnZXRzLCBob29rKSB7XG4gICAgY29uc3QgZGlkRW5kSG9va3MgPSB0YXJnZXRzXG4gICAgICAgIC5tYXAoKHRhcmdldCkgPT4gaG9vayh0YXJnZXQpKVxuICAgICAgICAuZmlsdGVyKGlzRGVmaW5lZCk7XG4gICAgZGlkRW5kSG9va3MucmV2ZXJzZSgpO1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGRpZEVuZEhvb2sgb2YgZGlkRW5kSG9va3MpIHtcbiAgICAgICAgICAgIGRpZEVuZEhvb2soLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGludm9rZUhvb2tzVW50aWxEZWZpbmVkQW5kTm9uTnVsbCh0YXJnZXRzLCBob29rKSB7XG4gICAgZm9yIChjb25zdCB0YXJnZXQgb2YgdGFyZ2V0cykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IGhvb2sodGFyZ2V0KTtcbiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludm9rZUhvb2tzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/invokeHooks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/isDefined.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/isDefined.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDefined: () => (/* binding */ isDefined)\n/* harmony export */ });\nfunction isDefined(t) {\n    return t != null;\n}\n//# sourceMappingURL=isDefined.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvaXNEZWZpbmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvaXNEZWZpbmVkLmpzPzMzYTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGlzRGVmaW5lZCh0KSB7XG4gICAgcmV0dXJuIHQgIT0gbnVsbDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRGVmaW5lZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/isDefined.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/makeGatewayGraphQLRequestContext.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/makeGatewayGraphQLRequestContext.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeGatewayGraphQLRequestContext: () => (/* binding */ makeGatewayGraphQLRequestContext)\n/* harmony export */ });\nfunction makeGatewayGraphQLRequestContext(as4RequestContext, server, internals) {\n    const request = {};\n    if ('query' in as4RequestContext.request) {\n        request.query = as4RequestContext.request.query;\n    }\n    if ('operationName' in as4RequestContext.request) {\n        request.operationName = as4RequestContext.request.operationName;\n    }\n    if ('variables' in as4RequestContext.request) {\n        request.variables = as4RequestContext.request.variables;\n    }\n    if ('extensions' in as4RequestContext.request) {\n        request.extensions = as4RequestContext.request.extensions;\n    }\n    if (as4RequestContext.request.http) {\n        const as4http = as4RequestContext.request.http;\n        const needQuestion = as4http.search !== '' && !as4http.search.startsWith('?');\n        request.http = {\n            method: as4http.method,\n            url: `https://unknown-url.invalid/${needQuestion ? '?' : ''}${as4http.search}`,\n            headers: new FetcherHeadersForHeaderMap(as4http.headers),\n        };\n    }\n    const response = {\n        http: {\n            headers: new FetcherHeadersForHeaderMap(as4RequestContext.response.http.headers),\n            get status() {\n                return as4RequestContext.response.http.status;\n            },\n            set status(newStatus) {\n                as4RequestContext.response.http.status = newStatus;\n            },\n        },\n    };\n    return {\n        request,\n        response,\n        logger: server.logger,\n        schema: as4RequestContext.schema,\n        schemaHash: 'schemaHash no longer exists in Apollo Server 4',\n        context: as4RequestContext.contextValue,\n        cache: server.cache,\n        queryHash: as4RequestContext.queryHash,\n        document: as4RequestContext.document,\n        source: as4RequestContext.source,\n        operationName: as4RequestContext.operationName,\n        operation: as4RequestContext.operation,\n        errors: as4RequestContext.errors,\n        metrics: as4RequestContext.metrics,\n        debug: internals.includeStacktraceInErrorResponses,\n        overallCachePolicy: as4RequestContext.overallCachePolicy,\n        requestIsBatched: as4RequestContext.requestIsBatched,\n    };\n}\nclass FetcherHeadersForHeaderMap {\n    constructor(map) {\n        this.map = map;\n    }\n    append(name, value) {\n        if (this.map.has(name)) {\n            this.map.set(name, this.map.get(name) + ', ' + value);\n        }\n        else {\n            this.map.set(name, value);\n        }\n    }\n    delete(name) {\n        this.map.delete(name);\n    }\n    get(name) {\n        return this.map.get(name) ?? null;\n    }\n    has(name) {\n        return this.map.has(name);\n    }\n    set(name, value) {\n        this.map.set(name, value);\n    }\n    entries() {\n        return this.map.entries();\n    }\n    keys() {\n        return this.map.keys();\n    }\n    values() {\n        return this.map.values();\n    }\n    [Symbol.iterator]() {\n        return this.map.entries();\n    }\n}\n//# sourceMappingURL=makeGatewayGraphQLRequestContext.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvbWFrZUdhdGV3YXlHcmFwaFFMUmVxdWVzdENvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELHdCQUF3QixFQUFFLGVBQWU7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS91dGlscy9tYWtlR2F0ZXdheUdyYXBoUUxSZXF1ZXN0Q29udGV4dC5qcz84Y2I0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBtYWtlR2F0ZXdheUdyYXBoUUxSZXF1ZXN0Q29udGV4dChhczRSZXF1ZXN0Q29udGV4dCwgc2VydmVyLCBpbnRlcm5hbHMpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0ge307XG4gICAgaWYgKCdxdWVyeScgaW4gYXM0UmVxdWVzdENvbnRleHQucmVxdWVzdCkge1xuICAgICAgICByZXF1ZXN0LnF1ZXJ5ID0gYXM0UmVxdWVzdENvbnRleHQucmVxdWVzdC5xdWVyeTtcbiAgICB9XG4gICAgaWYgKCdvcGVyYXRpb25OYW1lJyBpbiBhczRSZXF1ZXN0Q29udGV4dC5yZXF1ZXN0KSB7XG4gICAgICAgIHJlcXVlc3Qub3BlcmF0aW9uTmFtZSA9IGFzNFJlcXVlc3RDb250ZXh0LnJlcXVlc3Qub3BlcmF0aW9uTmFtZTtcbiAgICB9XG4gICAgaWYgKCd2YXJpYWJsZXMnIGluIGFzNFJlcXVlc3RDb250ZXh0LnJlcXVlc3QpIHtcbiAgICAgICAgcmVxdWVzdC52YXJpYWJsZXMgPSBhczRSZXF1ZXN0Q29udGV4dC5yZXF1ZXN0LnZhcmlhYmxlcztcbiAgICB9XG4gICAgaWYgKCdleHRlbnNpb25zJyBpbiBhczRSZXF1ZXN0Q29udGV4dC5yZXF1ZXN0KSB7XG4gICAgICAgIHJlcXVlc3QuZXh0ZW5zaW9ucyA9IGFzNFJlcXVlc3RDb250ZXh0LnJlcXVlc3QuZXh0ZW5zaW9ucztcbiAgICB9XG4gICAgaWYgKGFzNFJlcXVlc3RDb250ZXh0LnJlcXVlc3QuaHR0cCkge1xuICAgICAgICBjb25zdCBhczRodHRwID0gYXM0UmVxdWVzdENvbnRleHQucmVxdWVzdC5odHRwO1xuICAgICAgICBjb25zdCBuZWVkUXVlc3Rpb24gPSBhczRodHRwLnNlYXJjaCAhPT0gJycgJiYgIWFzNGh0dHAuc2VhcmNoLnN0YXJ0c1dpdGgoJz8nKTtcbiAgICAgICAgcmVxdWVzdC5odHRwID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBhczRodHRwLm1ldGhvZCxcbiAgICAgICAgICAgIHVybDogYGh0dHBzOi8vdW5rbm93bi11cmwuaW52YWxpZC8ke25lZWRRdWVzdGlvbiA/ICc/JyA6ICcnfSR7YXM0aHR0cC5zZWFyY2h9YCxcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBGZXRjaGVySGVhZGVyc0ZvckhlYWRlck1hcChhczRodHRwLmhlYWRlcnMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgaHR0cDoge1xuICAgICAgICAgICAgaGVhZGVyczogbmV3IEZldGNoZXJIZWFkZXJzRm9ySGVhZGVyTWFwKGFzNFJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmh0dHAuaGVhZGVycyksXG4gICAgICAgICAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhczRSZXF1ZXN0Q29udGV4dC5yZXNwb25zZS5odHRwLnN0YXR1cztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQgc3RhdHVzKG5ld1N0YXR1cykge1xuICAgICAgICAgICAgICAgIGFzNFJlcXVlc3RDb250ZXh0LnJlc3BvbnNlLmh0dHAuc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIHJlc3BvbnNlLFxuICAgICAgICBsb2dnZXI6IHNlcnZlci5sb2dnZXIsXG4gICAgICAgIHNjaGVtYTogYXM0UmVxdWVzdENvbnRleHQuc2NoZW1hLFxuICAgICAgICBzY2hlbWFIYXNoOiAnc2NoZW1hSGFzaCBubyBsb25nZXIgZXhpc3RzIGluIEFwb2xsbyBTZXJ2ZXIgNCcsXG4gICAgICAgIGNvbnRleHQ6IGFzNFJlcXVlc3RDb250ZXh0LmNvbnRleHRWYWx1ZSxcbiAgICAgICAgY2FjaGU6IHNlcnZlci5jYWNoZSxcbiAgICAgICAgcXVlcnlIYXNoOiBhczRSZXF1ZXN0Q29udGV4dC5xdWVyeUhhc2gsXG4gICAgICAgIGRvY3VtZW50OiBhczRSZXF1ZXN0Q29udGV4dC5kb2N1bWVudCxcbiAgICAgICAgc291cmNlOiBhczRSZXF1ZXN0Q29udGV4dC5zb3VyY2UsXG4gICAgICAgIG9wZXJhdGlvbk5hbWU6IGFzNFJlcXVlc3RDb250ZXh0Lm9wZXJhdGlvbk5hbWUsXG4gICAgICAgIG9wZXJhdGlvbjogYXM0UmVxdWVzdENvbnRleHQub3BlcmF0aW9uLFxuICAgICAgICBlcnJvcnM6IGFzNFJlcXVlc3RDb250ZXh0LmVycm9ycyxcbiAgICAgICAgbWV0cmljczogYXM0UmVxdWVzdENvbnRleHQubWV0cmljcyxcbiAgICAgICAgZGVidWc6IGludGVybmFscy5pbmNsdWRlU3RhY2t0cmFjZUluRXJyb3JSZXNwb25zZXMsXG4gICAgICAgIG92ZXJhbGxDYWNoZVBvbGljeTogYXM0UmVxdWVzdENvbnRleHQub3ZlcmFsbENhY2hlUG9saWN5LFxuICAgICAgICByZXF1ZXN0SXNCYXRjaGVkOiBhczRSZXF1ZXN0Q29udGV4dC5yZXF1ZXN0SXNCYXRjaGVkLFxuICAgIH07XG59XG5jbGFzcyBGZXRjaGVySGVhZGVyc0ZvckhlYWRlck1hcCB7XG4gICAgY29uc3RydWN0b3IobWFwKSB7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgIH1cbiAgICBhcHBlbmQobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMubWFwLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5tYXAuc2V0KG5hbWUsIHRoaXMubWFwLmdldChuYW1lKSArICcsICcgKyB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlbGV0ZShuYW1lKSB7XG4gICAgICAgIHRoaXMubWFwLmRlbGV0ZShuYW1lKTtcbiAgICB9XG4gICAgZ2V0KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmdldChuYW1lKSA/PyBudWxsO1xuICAgIH1cbiAgICBoYXMobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuaGFzKG5hbWUpO1xuICAgIH1cbiAgICBzZXQobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5tYXAuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICB9XG4gICAgZW50cmllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmVudHJpZXMoKTtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmtleXMoKTtcbiAgICB9XG4gICAgdmFsdWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAudmFsdWVzKCk7XG4gICAgfVxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZW50cmllcygpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ha2VHYXRld2F5R3JhcGhRTFJlcXVlc3RDb250ZXh0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/makeGatewayGraphQLRequestContext.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/resolvable.js":
/*!******************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/resolvable.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (() => {\n    let resolve;\n    let reject;\n    const promise = new Promise((_resolve, _reject) => {\n        resolve = _resolve;\n        reject = _reject;\n    });\n    promise.resolve = resolve;\n    promise.reject = reject;\n    return promise;\n});\n//# sourceMappingURL=resolvable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvcmVzb2x2YWJsZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS91dGlscy9yZXNvbHZhYmxlLmpzP2E1MTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKCkgPT4ge1xuICAgIGxldCByZXNvbHZlO1xuICAgIGxldCByZWplY3Q7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xuICAgICAgICByZXNvbHZlID0gX3Jlc29sdmU7XG4gICAgICAgIHJlamVjdCA9IF9yZWplY3Q7XG4gICAgfSk7XG4gICAgcHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICBwcm9taXNlLnJlamVjdCA9IHJlamVjdDtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNvbHZhYmxlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/resolvable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/schemaInstrumentation.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/schemaInstrumentation.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enablePluginsForSchemaResolvers: () => (/* binding */ enablePluginsForSchemaResolvers),\n/* harmony export */   pluginsEnabledForSchemaResolvers: () => (/* binding */ pluginsEnabledForSchemaResolvers),\n/* harmony export */   symbolExecutionDispatcherWillResolveField: () => (/* binding */ symbolExecutionDispatcherWillResolveField),\n/* harmony export */   symbolUserFieldResolver: () => (/* binding */ symbolUserFieldResolver),\n/* harmony export */   whenResultIsFinished: () => (/* binding */ whenResultIsFinished)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/type/definition.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/execution/execute.mjs\");\n\nconst symbolExecutionDispatcherWillResolveField = Symbol('apolloServerExecutionDispatcherWillResolveField');\nconst symbolUserFieldResolver = Symbol('apolloServerUserFieldResolver');\nconst symbolPluginsEnabled = Symbol('apolloServerPluginsEnabled');\nfunction enablePluginsForSchemaResolvers(schema) {\n    if (pluginsEnabledForSchemaResolvers(schema)) {\n        return schema;\n    }\n    Object.defineProperty(schema, symbolPluginsEnabled, {\n        value: true,\n    });\n    const typeMap = schema.getTypeMap();\n    Object.values(typeMap).forEach((type) => {\n        if (!(0,graphql__WEBPACK_IMPORTED_MODULE_0__.getNamedType)(type).name.startsWith('__') &&\n            type instanceof graphql__WEBPACK_IMPORTED_MODULE_0__.GraphQLObjectType) {\n            const fields = type.getFields();\n            Object.values(fields).forEach((field) => {\n                wrapField(field);\n            });\n        }\n    });\n    return schema;\n}\nfunction pluginsEnabledForSchemaResolvers(schema) {\n    return !!schema[symbolPluginsEnabled];\n}\nfunction wrapField(field) {\n    const originalFieldResolve = field.resolve;\n    field.resolve = (source, args, contextValue, info) => {\n        const willResolveField = contextValue?.[symbolExecutionDispatcherWillResolveField];\n        const userFieldResolver = contextValue?.[symbolUserFieldResolver];\n        const didResolveField = typeof willResolveField === 'function' &&\n            willResolveField({ source, args, contextValue, info });\n        const fieldResolver = originalFieldResolve || userFieldResolver || graphql__WEBPACK_IMPORTED_MODULE_1__.defaultFieldResolver;\n        try {\n            const result = fieldResolver(source, args, contextValue, info);\n            if (typeof didResolveField === 'function') {\n                whenResultIsFinished(result, didResolveField);\n            }\n            return result;\n        }\n        catch (error) {\n            if (typeof didResolveField === 'function') {\n                didResolveField(error);\n            }\n            throw error;\n        }\n    };\n}\nfunction isPromise(x) {\n    return x && typeof x.then === 'function';\n}\nfunction whenResultIsFinished(result, callback) {\n    if (isPromise(result)) {\n        result.then((r) => whenResultIsFinished(r, callback), (err) => callback(err));\n    }\n    else if (Array.isArray(result)) {\n        if (result.some(isPromise)) {\n            Promise.all(result).then((r) => callback(null, r), (err) => callback(err));\n        }\n        else {\n            callback(null, result);\n        }\n    }\n    else {\n        callback(null, result);\n    }\n}\n//# sourceMappingURL=schemaInstrumentation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvc2NoZW1hSW5zdHJ1bWVudGF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUY7QUFDMUU7QUFDQTtBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhLHFEQUFZO0FBQ3pCLDRCQUE0QixzREFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0NBQWtDO0FBQ2pFLDJFQUEyRSx5REFBb0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvc2NoZW1hSW5zdHJ1bWVudGF0aW9uLmpzPzNlMGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0TmFtZWRUeXBlLCBHcmFwaFFMT2JqZWN0VHlwZSwgZGVmYXVsdEZpZWxkUmVzb2x2ZXIsIH0gZnJvbSAnZ3JhcGhxbCc7XG5leHBvcnQgY29uc3Qgc3ltYm9sRXhlY3V0aW9uRGlzcGF0Y2hlcldpbGxSZXNvbHZlRmllbGQgPSBTeW1ib2woJ2Fwb2xsb1NlcnZlckV4ZWN1dGlvbkRpc3BhdGNoZXJXaWxsUmVzb2x2ZUZpZWxkJyk7XG5leHBvcnQgY29uc3Qgc3ltYm9sVXNlckZpZWxkUmVzb2x2ZXIgPSBTeW1ib2woJ2Fwb2xsb1NlcnZlclVzZXJGaWVsZFJlc29sdmVyJyk7XG5jb25zdCBzeW1ib2xQbHVnaW5zRW5hYmxlZCA9IFN5bWJvbCgnYXBvbGxvU2VydmVyUGx1Z2luc0VuYWJsZWQnKTtcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVQbHVnaW5zRm9yU2NoZW1hUmVzb2x2ZXJzKHNjaGVtYSkge1xuICAgIGlmIChwbHVnaW5zRW5hYmxlZEZvclNjaGVtYVJlc29sdmVycyhzY2hlbWEpKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzY2hlbWEsIHN5bWJvbFBsdWdpbnNFbmFibGVkLCB7XG4gICAgICAgIHZhbHVlOiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnN0IHR5cGVNYXAgPSBzY2hlbWEuZ2V0VHlwZU1hcCgpO1xuICAgIE9iamVjdC52YWx1ZXModHlwZU1hcCkuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICBpZiAoIWdldE5hbWVkVHlwZSh0eXBlKS5uYW1lLnN0YXJ0c1dpdGgoJ19fJykgJiZcbiAgICAgICAgICAgIHR5cGUgaW5zdGFuY2VvZiBHcmFwaFFMT2JqZWN0VHlwZSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRzID0gdHlwZS5nZXRGaWVsZHMoKTtcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoZmllbGRzKS5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgICAgICAgICAgIHdyYXBGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzY2hlbWE7XG59XG5leHBvcnQgZnVuY3Rpb24gcGx1Z2luc0VuYWJsZWRGb3JTY2hlbWFSZXNvbHZlcnMoc2NoZW1hKSB7XG4gICAgcmV0dXJuICEhc2NoZW1hW3N5bWJvbFBsdWdpbnNFbmFibGVkXTtcbn1cbmZ1bmN0aW9uIHdyYXBGaWVsZChmaWVsZCkge1xuICAgIGNvbnN0IG9yaWdpbmFsRmllbGRSZXNvbHZlID0gZmllbGQucmVzb2x2ZTtcbiAgICBmaWVsZC5yZXNvbHZlID0gKHNvdXJjZSwgYXJncywgY29udGV4dFZhbHVlLCBpbmZvKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpbGxSZXNvbHZlRmllbGQgPSBjb250ZXh0VmFsdWU/LltzeW1ib2xFeGVjdXRpb25EaXNwYXRjaGVyV2lsbFJlc29sdmVGaWVsZF07XG4gICAgICAgIGNvbnN0IHVzZXJGaWVsZFJlc29sdmVyID0gY29udGV4dFZhbHVlPy5bc3ltYm9sVXNlckZpZWxkUmVzb2x2ZXJdO1xuICAgICAgICBjb25zdCBkaWRSZXNvbHZlRmllbGQgPSB0eXBlb2Ygd2lsbFJlc29sdmVGaWVsZCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgd2lsbFJlc29sdmVGaWVsZCh7IHNvdXJjZSwgYXJncywgY29udGV4dFZhbHVlLCBpbmZvIH0pO1xuICAgICAgICBjb25zdCBmaWVsZFJlc29sdmVyID0gb3JpZ2luYWxGaWVsZFJlc29sdmUgfHwgdXNlckZpZWxkUmVzb2x2ZXIgfHwgZGVmYXVsdEZpZWxkUmVzb2x2ZXI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWVsZFJlc29sdmVyKHNvdXJjZSwgYXJncywgY29udGV4dFZhbHVlLCBpbmZvKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGlkUmVzb2x2ZUZpZWxkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgd2hlblJlc3VsdElzRmluaXNoZWQocmVzdWx0LCBkaWRSZXNvbHZlRmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGlkUmVzb2x2ZUZpZWxkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZGlkUmVzb2x2ZUZpZWxkKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGlzUHJvbWlzZSh4KSB7XG4gICAgcmV0dXJuIHggJiYgdHlwZW9mIHgudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydCBmdW5jdGlvbiB3aGVuUmVzdWx0SXNGaW5pc2hlZChyZXN1bHQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgIHJlc3VsdC50aGVuKChyKSA9PiB3aGVuUmVzdWx0SXNGaW5pc2hlZChyLCBjYWxsYmFjayksIChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5zb21lKGlzUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHJlc3VsdCkudGhlbigocikgPT4gY2FsbGJhY2sobnVsbCwgciksIChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWFJbnN0cnVtZW50YXRpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/schemaInstrumentation.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/utils/schemaManager.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/utils/schemaManager.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SchemaManager: () => (/* binding */ SchemaManager)\n/* harmony export */ });\nclass SchemaManager {\n    constructor(options) {\n        this.onSchemaLoadOrUpdateListeners = new Set();\n        this.isStopped = false;\n        this.logger = options.logger;\n        this.schemaDerivedDataProvider = options.schemaDerivedDataProvider;\n        if ('gateway' in options) {\n            this.modeSpecificState = {\n                mode: 'gateway',\n                gateway: options.gateway,\n                apolloConfig: options.apolloConfig,\n            };\n        }\n        else {\n            this.modeSpecificState = {\n                mode: 'schema',\n                apiSchema: options.apiSchema,\n                schemaDerivedData: options.schemaDerivedDataProvider(options.apiSchema),\n            };\n        }\n    }\n    async start() {\n        if (this.modeSpecificState.mode === 'gateway') {\n            const gateway = this.modeSpecificState.gateway;\n            if (gateway.onSchemaLoadOrUpdate) {\n                this.modeSpecificState.unsubscribeFromGateway =\n                    gateway.onSchemaLoadOrUpdate((schemaContext) => {\n                        this.processSchemaLoadOrUpdateEvent(schemaContext);\n                    });\n            }\n            else {\n                throw new Error(\"Unexpectedly couldn't find onSchemaLoadOrUpdate on gateway\");\n            }\n            const config = await this.modeSpecificState.gateway.load({\n                apollo: this.modeSpecificState.apolloConfig,\n            });\n            return config.executor;\n        }\n        else {\n            this.processSchemaLoadOrUpdateEvent({\n                apiSchema: this.modeSpecificState.apiSchema,\n            }, this.modeSpecificState.schemaDerivedData);\n            return null;\n        }\n    }\n    onSchemaLoadOrUpdate(callback) {\n        if (!this.schemaContext) {\n            throw new Error('You must call start() before onSchemaLoadOrUpdate()');\n        }\n        if (!this.isStopped) {\n            try {\n                callback(this.schemaContext);\n            }\n            catch (e) {\n                throw new Error(`An error was thrown from an 'onSchemaLoadOrUpdate' listener: ${e.message}`);\n            }\n        }\n        this.onSchemaLoadOrUpdateListeners.add(callback);\n        return () => {\n            this.onSchemaLoadOrUpdateListeners.delete(callback);\n        };\n    }\n    getSchemaDerivedData() {\n        if (!this.schemaDerivedData) {\n            throw new Error('You must call start() before getSchemaDerivedData()');\n        }\n        return this.schemaDerivedData;\n    }\n    async stop() {\n        this.isStopped = true;\n        if (this.modeSpecificState.mode === 'gateway') {\n            this.modeSpecificState.unsubscribeFromGateway?.();\n            await this.modeSpecificState.gateway.stop?.();\n        }\n    }\n    processSchemaLoadOrUpdateEvent(schemaContext, schemaDerivedData) {\n        if (!this.isStopped) {\n            this.schemaDerivedData =\n                schemaDerivedData ??\n                    this.schemaDerivedDataProvider(schemaContext.apiSchema);\n            this.schemaContext = schemaContext;\n            this.onSchemaLoadOrUpdateListeners.forEach((listener) => {\n                try {\n                    listener(schemaContext);\n                }\n                catch (e) {\n                    this.logger.error(\"An error was thrown from an 'onSchemaLoadOrUpdate' listener\");\n                    this.logger.error(e);\n                }\n            });\n        }\n    }\n}\n//# sourceMappingURL=schemaManager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdXRpbHMvc2NoZW1hTWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLFVBQVU7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL3V0aWxzL3NjaGVtYU1hbmFnZXIuanM/ZTE1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgU2NoZW1hTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLm9uU2NoZW1hTG9hZE9yVXBkYXRlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IG9wdGlvbnMubG9nZ2VyO1xuICAgICAgICB0aGlzLnNjaGVtYURlcml2ZWREYXRhUHJvdmlkZXIgPSBvcHRpb25zLnNjaGVtYURlcml2ZWREYXRhUHJvdmlkZXI7XG4gICAgICAgIGlmICgnZ2F0ZXdheScgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5tb2RlU3BlY2lmaWNTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBtb2RlOiAnZ2F0ZXdheScsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheTogb3B0aW9ucy5nYXRld2F5LFxuICAgICAgICAgICAgICAgIGFwb2xsb0NvbmZpZzogb3B0aW9ucy5hcG9sbG9Db25maWcsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tb2RlU3BlY2lmaWNTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBtb2RlOiAnc2NoZW1hJyxcbiAgICAgICAgICAgICAgICBhcGlTY2hlbWE6IG9wdGlvbnMuYXBpU2NoZW1hLFxuICAgICAgICAgICAgICAgIHNjaGVtYURlcml2ZWREYXRhOiBvcHRpb25zLnNjaGVtYURlcml2ZWREYXRhUHJvdmlkZXIob3B0aW9ucy5hcGlTY2hlbWEpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMubW9kZVNwZWNpZmljU3RhdGUubW9kZSA9PT0gJ2dhdGV3YXknKSB7XG4gICAgICAgICAgICBjb25zdCBnYXRld2F5ID0gdGhpcy5tb2RlU3BlY2lmaWNTdGF0ZS5nYXRld2F5O1xuICAgICAgICAgICAgaWYgKGdhdGV3YXkub25TY2hlbWFMb2FkT3JVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlLnVuc3Vic2NyaWJlRnJvbUdhdGV3YXkgPVxuICAgICAgICAgICAgICAgICAgICBnYXRld2F5Lm9uU2NoZW1hTG9hZE9yVXBkYXRlKChzY2hlbWFDb250ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTY2hlbWFMb2FkT3JVcGRhdGVFdmVudChzY2hlbWFDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkbHkgY291bGRuJ3QgZmluZCBvblNjaGVtYUxvYWRPclVwZGF0ZSBvbiBnYXRld2F5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gYXdhaXQgdGhpcy5tb2RlU3BlY2lmaWNTdGF0ZS5nYXRld2F5LmxvYWQoe1xuICAgICAgICAgICAgICAgIGFwb2xsbzogdGhpcy5tb2RlU3BlY2lmaWNTdGF0ZS5hcG9sbG9Db25maWcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb25maWcuZXhlY3V0b3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NTY2hlbWFMb2FkT3JVcGRhdGVFdmVudCh7XG4gICAgICAgICAgICAgICAgYXBpU2NoZW1hOiB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlLmFwaVNjaGVtYSxcbiAgICAgICAgICAgIH0sIHRoaXMubW9kZVNwZWNpZmljU3RhdGUuc2NoZW1hRGVyaXZlZERhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TY2hlbWFMb2FkT3JVcGRhdGUoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLnNjaGVtYUNvbnRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgY2FsbCBzdGFydCgpIGJlZm9yZSBvblNjaGVtYUxvYWRPclVwZGF0ZSgpJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLnNjaGVtYUNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFuIGVycm9yIHdhcyB0aHJvd24gZnJvbSBhbiAnb25TY2hlbWFMb2FkT3JVcGRhdGUnIGxpc3RlbmVyOiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uU2NoZW1hTG9hZE9yVXBkYXRlTGlzdGVuZXJzLmFkZChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uU2NoZW1hTG9hZE9yVXBkYXRlTGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFNjaGVtYURlcml2ZWREYXRhKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2NoZW1hRGVyaXZlZERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgY2FsbCBzdGFydCgpIGJlZm9yZSBnZXRTY2hlbWFEZXJpdmVkRGF0YSgpJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hRGVyaXZlZERhdGE7XG4gICAgfVxuICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMubW9kZVNwZWNpZmljU3RhdGUubW9kZSA9PT0gJ2dhdGV3YXknKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVTcGVjaWZpY1N0YXRlLnVuc3Vic2NyaWJlRnJvbUdhdGV3YXk/LigpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tb2RlU3BlY2lmaWNTdGF0ZS5nYXRld2F5LnN0b3A/LigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NTY2hlbWFMb2FkT3JVcGRhdGVFdmVudChzY2hlbWFDb250ZXh0LCBzY2hlbWFEZXJpdmVkRGF0YSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYURlcml2ZWREYXRhID1cbiAgICAgICAgICAgICAgICBzY2hlbWFEZXJpdmVkRGF0YSA/P1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVtYURlcml2ZWREYXRhUHJvdmlkZXIoc2NoZW1hQ29udGV4dC5hcGlTY2hlbWEpO1xuICAgICAgICAgICAgdGhpcy5zY2hlbWFDb250ZXh0ID0gc2NoZW1hQ29udGV4dDtcbiAgICAgICAgICAgIHRoaXMub25TY2hlbWFMb2FkT3JVcGRhdGVMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcihzY2hlbWFDb250ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJBbiBlcnJvciB3YXMgdGhyb3duIGZyb20gYW4gJ29uU2NoZW1hTG9hZE9yVXBkYXRlJyBsaXN0ZW5lclwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWFNYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/utils/schemaManager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/NoIntrospection.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/validationRules/NoIntrospection.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NoIntrospection: () => (/* binding */ NoIntrospection)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/error/GraphQLError.mjs\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/errors/index.js\");\n\n\nconst NoIntrospection = (context) => ({\n    Field(node) {\n        if (node.name.value === '__schema' || node.name.value === '__type') {\n            context.reportError(new graphql__WEBPACK_IMPORTED_MODULE_1__.GraphQLError('GraphQL introspection is not allowed by Apollo Server, but the query contained __schema or __type. To enable introspection, pass introspection: true to ApolloServer in production', {\n                nodes: [node],\n                extensions: {\n                    validationErrorCode: _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerValidationErrorCode.INTROSPECTION_DISABLED,\n                },\n            }));\n        }\n    },\n});\n//# sourceMappingURL=NoIntrospection.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdmFsaWRhdGlvblJ1bGVzL05vSW50cm9zcGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0M7QUFDNkI7QUFDOUQ7QUFDUDtBQUNBO0FBQ0Esb0NBQW9DLGlEQUFZO0FBQ2hEO0FBQ0E7QUFDQSx5Q0FBeUMsNkVBQStCO0FBQ3hFLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS92YWxpZGF0aW9uUnVsZXMvTm9JbnRyb3NwZWN0aW9uLmpzP2JkY2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JhcGhRTEVycm9yLCB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgQXBvbGxvU2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZSB9IGZyb20gJy4uL2Vycm9ycy9pbmRleC5qcyc7XG5leHBvcnQgY29uc3QgTm9JbnRyb3NwZWN0aW9uID0gKGNvbnRleHQpID0+ICh7XG4gICAgRmllbGQobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5uYW1lLnZhbHVlID09PSAnX19zY2hlbWEnIHx8IG5vZGUubmFtZS52YWx1ZSA9PT0gJ19fdHlwZScpIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVwb3J0RXJyb3IobmV3IEdyYXBoUUxFcnJvcignR3JhcGhRTCBpbnRyb3NwZWN0aW9uIGlzIG5vdCBhbGxvd2VkIGJ5IEFwb2xsbyBTZXJ2ZXIsIGJ1dCB0aGUgcXVlcnkgY29udGFpbmVkIF9fc2NoZW1hIG9yIF9fdHlwZS4gVG8gZW5hYmxlIGludHJvc3BlY3Rpb24sIHBhc3MgaW50cm9zcGVjdGlvbjogdHJ1ZSB0byBBcG9sbG9TZXJ2ZXIgaW4gcHJvZHVjdGlvbicsIHtcbiAgICAgICAgICAgICAgICBub2RlczogW25vZGVdLFxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yQ29kZTogQXBvbGxvU2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZS5JTlRST1NQRUNUSU9OX0RJU0FCTEVELFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ob0ludHJvc3BlY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/NoIntrospection.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/RecursiveSelectionsLimit.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/validationRules/RecursiveSelectionsLimit.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_MAX_RECURSIVE_SELECTIONS: () => (/* binding */ DEFAULT_MAX_RECURSIVE_SELECTIONS),\n/* harmony export */   createMaxRecursiveSelectionsRule: () => (/* binding */ createMaxRecursiveSelectionsRule)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! graphql */ \"(rsc)/./node_modules/graphql/error/GraphQLError.mjs\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/errors/index.js\");\n\n\nconst DEFAULT_MAX_RECURSIVE_SELECTIONS = 10000000;\nclass RecursiveSelectionValidationContext {\n    constructor(selectionCountLimit, context) {\n        this.selectionCountLimit = selectionCountLimit;\n        this.context = context;\n        this.fragmentInfo = new Map();\n        this.operationInfo = new Map();\n        this.fragmentRecursiveSelectionCount = new Map();\n    }\n    getExecutionDefinitionInfo() {\n        if (this.currentFragment !== undefined) {\n            let entry = this.fragmentInfo.get(this.currentFragment);\n            if (!entry) {\n                entry = {\n                    selectionCount: 0,\n                    fragmentSpreads: new Map(),\n                };\n                this.fragmentInfo.set(this.currentFragment, entry);\n            }\n            return entry;\n        }\n        if (this.currentOperation !== undefined) {\n            let entry = this.operationInfo.get(this.currentOperation);\n            if (!entry) {\n                entry = {\n                    selectionCount: 0,\n                    fragmentSpreads: new Map(),\n                };\n                this.operationInfo.set(this.currentOperation, entry);\n            }\n            return entry;\n        }\n        return undefined;\n    }\n    processSelection(fragmentSpreadName) {\n        const definitionInfo = this.getExecutionDefinitionInfo();\n        if (!definitionInfo) {\n            return;\n        }\n        definitionInfo.selectionCount++;\n        if (fragmentSpreadName !== undefined) {\n            let spreadCount = (definitionInfo.fragmentSpreads.get(fragmentSpreadName) ?? 0) + 1;\n            definitionInfo.fragmentSpreads.set(fragmentSpreadName, spreadCount);\n        }\n    }\n    enterFragment(fragment) {\n        this.currentFragment = fragment;\n    }\n    leaveFragment() {\n        this.currentFragment = undefined;\n    }\n    enterOperation(operation) {\n        this.currentOperation = operation;\n    }\n    leaveOperation() {\n        this.currentOperation = undefined;\n    }\n    computeFragmentRecursiveSelectionsCount(fragment) {\n        const cachedCount = this.fragmentRecursiveSelectionCount.get(fragment);\n        if (cachedCount === null) {\n            return 0;\n        }\n        if (cachedCount !== undefined) {\n            return cachedCount;\n        }\n        this.fragmentRecursiveSelectionCount.set(fragment, null);\n        const definitionInfo = this.fragmentInfo.get(fragment);\n        let count = 0;\n        if (definitionInfo) {\n            count = definitionInfo.selectionCount;\n            for (const [fragment, spreadCount] of definitionInfo.fragmentSpreads) {\n                count +=\n                    spreadCount * this.computeFragmentRecursiveSelectionsCount(fragment);\n            }\n        }\n        this.fragmentRecursiveSelectionCount.set(fragment, count);\n        return count;\n    }\n    reportError(operation) {\n        const operationName = operation\n            ? `Operation \"${operation}\"`\n            : 'Anonymous operation';\n        this.context.reportError(new graphql__WEBPACK_IMPORTED_MODULE_1__.GraphQLError(`${operationName} recursively requests too many selections.`, {\n            nodes: [],\n            extensions: {\n                validationErrorCode: _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.ApolloServerValidationErrorCode.MAX_RECURSIVE_SELECTIONS_EXCEEDED,\n            },\n        }));\n    }\n    checkLimitExceeded() {\n        for (const [operation, definitionInfo] of this.operationInfo) {\n            let count = definitionInfo.selectionCount;\n            for (const [fragment, spreadCount] of definitionInfo.fragmentSpreads) {\n                count +=\n                    spreadCount * this.computeFragmentRecursiveSelectionsCount(fragment);\n            }\n            if (count > this.selectionCountLimit) {\n                this.reportError(operation);\n            }\n        }\n    }\n}\nfunction createMaxRecursiveSelectionsRule(limit) {\n    return (context) => {\n        const selectionContext = new RecursiveSelectionValidationContext(limit, context);\n        return {\n            Field() {\n                selectionContext.processSelection();\n            },\n            InlineFragment() {\n                selectionContext.processSelection();\n            },\n            FragmentSpread(node) {\n                selectionContext.processSelection(node.name.value);\n            },\n            FragmentDefinition: {\n                enter(node) {\n                    selectionContext.enterFragment(node.name.value);\n                },\n                leave() {\n                    selectionContext.leaveFragment();\n                },\n            },\n            OperationDefinition: {\n                enter(node) {\n                    selectionContext.enterOperation(node.name?.value ?? null);\n                },\n                leave() {\n                    selectionContext.leaveOperation();\n                },\n            },\n            Document: {\n                leave() {\n                    selectionContext.checkLimitExceeded();\n                },\n            },\n        };\n    };\n}\n//# sourceMappingURL=RecursiveSelectionsLimit.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdmFsaWRhdGlvblJ1bGVzL1JlY3Vyc2l2ZVNlbGVjdGlvbnNMaW1pdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdDO0FBQzZCO0FBQzlEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVTtBQUN0QztBQUNBLHFDQUFxQyxpREFBWSxJQUFJLGVBQWU7QUFDcEU7QUFDQTtBQUNBLHFDQUFxQyw2RUFBK0I7QUFDcEUsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXItcmVudGFsLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc2VydmVyL2Rpc3QvZXNtL3ZhbGlkYXRpb25SdWxlcy9SZWN1cnNpdmVTZWxlY3Rpb25zTGltaXQuanM/ZjZkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHcmFwaFFMRXJyb3IsIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBBcG9sbG9TZXJ2ZXJWYWxpZGF0aW9uRXJyb3JDb2RlIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX01BWF9SRUNVUlNJVkVfU0VMRUNUSU9OUyA9IDEwMDAwMDAwO1xuY2xhc3MgUmVjdXJzaXZlU2VsZWN0aW9uVmFsaWRhdGlvbkNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdGlvbkNvdW50TGltaXQsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25Db3VudExpbWl0ID0gc2VsZWN0aW9uQ291bnRMaW1pdDtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5mcmFnbWVudEluZm8gPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMub3BlcmF0aW9uSW5mbyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5mcmFnbWVudFJlY3Vyc2l2ZVNlbGVjdGlvbkNvdW50ID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBnZXRFeGVjdXRpb25EZWZpbml0aW9uSW5mbygpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEZyYWdtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBlbnRyeSA9IHRoaXMuZnJhZ21lbnRJbmZvLmdldCh0aGlzLmN1cnJlbnRGcmFnbWVudCk7XG4gICAgICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgICAgICAgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNwcmVhZHM6IG5ldyBNYXAoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZnJhZ21lbnRJbmZvLnNldCh0aGlzLmN1cnJlbnRGcmFnbWVudCwgZW50cnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRPcGVyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IGVudHJ5ID0gdGhpcy5vcGVyYXRpb25JbmZvLmdldCh0aGlzLmN1cnJlbnRPcGVyYXRpb24pO1xuICAgICAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgICAgICAgIGVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db3VudDogMCxcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRTcHJlYWRzOiBuZXcgTWFwKCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdGlvbkluZm8uc2V0KHRoaXMuY3VycmVudE9wZXJhdGlvbiwgZW50cnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHByb2Nlc3NTZWxlY3Rpb24oZnJhZ21lbnRTcHJlYWROYW1lKSB7XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb25JbmZvID0gdGhpcy5nZXRFeGVjdXRpb25EZWZpbml0aW9uSW5mbygpO1xuICAgICAgICBpZiAoIWRlZmluaXRpb25JbmZvKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGVmaW5pdGlvbkluZm8uc2VsZWN0aW9uQ291bnQrKztcbiAgICAgICAgaWYgKGZyYWdtZW50U3ByZWFkTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgc3ByZWFkQ291bnQgPSAoZGVmaW5pdGlvbkluZm8uZnJhZ21lbnRTcHJlYWRzLmdldChmcmFnbWVudFNwcmVhZE5hbWUpID8/IDApICsgMTtcbiAgICAgICAgICAgIGRlZmluaXRpb25JbmZvLmZyYWdtZW50U3ByZWFkcy5zZXQoZnJhZ21lbnRTcHJlYWROYW1lLCBzcHJlYWRDb3VudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW50ZXJGcmFnbWVudChmcmFnbWVudCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFnbWVudCA9IGZyYWdtZW50O1xuICAgIH1cbiAgICBsZWF2ZUZyYWdtZW50KCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFnbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZW50ZXJPcGVyYXRpb24ob3BlcmF0aW9uKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcbiAgICB9XG4gICAgbGVhdmVPcGVyYXRpb24oKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE9wZXJhdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29tcHV0ZUZyYWdtZW50UmVjdXJzaXZlU2VsZWN0aW9uc0NvdW50KGZyYWdtZW50KSB7XG4gICAgICAgIGNvbnN0IGNhY2hlZENvdW50ID0gdGhpcy5mcmFnbWVudFJlY3Vyc2l2ZVNlbGVjdGlvbkNvdW50LmdldChmcmFnbWVudCk7XG4gICAgICAgIGlmIChjYWNoZWRDb3VudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlZENvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDb3VudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYWdtZW50UmVjdXJzaXZlU2VsZWN0aW9uQ291bnQuc2V0KGZyYWdtZW50LCBudWxsKTtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbkluZm8gPSB0aGlzLmZyYWdtZW50SW5mby5nZXQoZnJhZ21lbnQpO1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICBpZiAoZGVmaW5pdGlvbkluZm8pIHtcbiAgICAgICAgICAgIGNvdW50ID0gZGVmaW5pdGlvbkluZm8uc2VsZWN0aW9uQ291bnQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtmcmFnbWVudCwgc3ByZWFkQ291bnRdIG9mIGRlZmluaXRpb25JbmZvLmZyYWdtZW50U3ByZWFkcykge1xuICAgICAgICAgICAgICAgIGNvdW50ICs9XG4gICAgICAgICAgICAgICAgICAgIHNwcmVhZENvdW50ICogdGhpcy5jb21wdXRlRnJhZ21lbnRSZWN1cnNpdmVTZWxlY3Rpb25zQ291bnQoZnJhZ21lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnJhZ21lbnRSZWN1cnNpdmVTZWxlY3Rpb25Db3VudC5zZXQoZnJhZ21lbnQsIGNvdW50KTtcbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cbiAgICByZXBvcnRFcnJvcihvcGVyYXRpb24pIHtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9IG9wZXJhdGlvblxuICAgICAgICAgICAgPyBgT3BlcmF0aW9uIFwiJHtvcGVyYXRpb259XCJgXG4gICAgICAgICAgICA6ICdBbm9ueW1vdXMgb3BlcmF0aW9uJztcbiAgICAgICAgdGhpcy5jb250ZXh0LnJlcG9ydEVycm9yKG5ldyBHcmFwaFFMRXJyb3IoYCR7b3BlcmF0aW9uTmFtZX0gcmVjdXJzaXZlbHkgcmVxdWVzdHMgdG9vIG1hbnkgc2VsZWN0aW9ucy5gLCB7XG4gICAgICAgICAgICBub2RlczogW10sXG4gICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yQ29kZTogQXBvbGxvU2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZS5NQVhfUkVDVVJTSVZFX1NFTEVDVElPTlNfRVhDRUVERUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNoZWNrTGltaXRFeGNlZWRlZCgpIHtcbiAgICAgICAgZm9yIChjb25zdCBbb3BlcmF0aW9uLCBkZWZpbml0aW9uSW5mb10gb2YgdGhpcy5vcGVyYXRpb25JbmZvKSB7XG4gICAgICAgICAgICBsZXQgY291bnQgPSBkZWZpbml0aW9uSW5mby5zZWxlY3Rpb25Db3VudDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2ZyYWdtZW50LCBzcHJlYWRDb3VudF0gb2YgZGVmaW5pdGlvbkluZm8uZnJhZ21lbnRTcHJlYWRzKSB7XG4gICAgICAgICAgICAgICAgY291bnQgKz1cbiAgICAgICAgICAgICAgICAgICAgc3ByZWFkQ291bnQgKiB0aGlzLmNvbXB1dGVGcmFnbWVudFJlY3Vyc2l2ZVNlbGVjdGlvbnNDb3VudChmcmFnbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY291bnQgPiB0aGlzLnNlbGVjdGlvbkNvdW50TGltaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcG9ydEVycm9yKG9wZXJhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUobGltaXQpIHtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uQ29udGV4dCA9IG5ldyBSZWN1cnNpdmVTZWxlY3Rpb25WYWxpZGF0aW9uQ29udGV4dChsaW1pdCwgY29udGV4dCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBGaWVsZCgpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db250ZXh0LnByb2Nlc3NTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBJbmxpbmVGcmFnbWVudCgpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db250ZXh0LnByb2Nlc3NTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBGcmFnbWVudFNwcmVhZChub2RlKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQ29udGV4dC5wcm9jZXNzU2VsZWN0aW9uKG5vZGUubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRnJhZ21lbnREZWZpbml0aW9uOiB7XG4gICAgICAgICAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db250ZXh0LmVudGVyRnJhZ21lbnQobm9kZS5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxlYXZlKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db250ZXh0LmxlYXZlRnJhZ21lbnQoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgICAgICAgICAgICBlbnRlcihub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNvbnRleHQuZW50ZXJPcGVyYXRpb24obm9kZS5uYW1lPy52YWx1ZSA/PyBudWxsKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxlYXZlKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db250ZXh0LmxlYXZlT3BlcmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBEb2N1bWVudDoge1xuICAgICAgICAgICAgICAgIGxlYXZlKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db250ZXh0LmNoZWNrTGltaXRFeGNlZWRlZCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWN1cnNpdmVTZWxlY3Rpb25zTGltaXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/RecursiveSelectionsLimit.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@apollo/server/dist/esm/validationRules/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_MAX_RECURSIVE_SELECTIONS: () => (/* reexport safe */ _RecursiveSelectionsLimit_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MAX_RECURSIVE_SELECTIONS),\n/* harmony export */   NoIntrospection: () => (/* reexport safe */ _NoIntrospection_js__WEBPACK_IMPORTED_MODULE_0__.NoIntrospection),\n/* harmony export */   createMaxRecursiveSelectionsRule: () => (/* reexport safe */ _RecursiveSelectionsLimit_js__WEBPACK_IMPORTED_MODULE_1__.createMaxRecursiveSelectionsRule)\n/* harmony export */ });\n/* harmony import */ var _NoIntrospection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NoIntrospection.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/NoIntrospection.js\");\n/* harmony import */ var _RecursiveSelectionsLimit_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RecursiveSelectionsLimit.js */ \"(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/RecursiveSelectionsLimit.js\");\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zZXJ2ZXIvZGlzdC9lc20vdmFsaWRhdGlvblJ1bGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVEO0FBQzZEO0FBQ3BIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyLXJlbnRhbC1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NlcnZlci9kaXN0L2VzbS92YWxpZGF0aW9uUnVsZXMvaW5kZXguanM/Yjg1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBOb0ludHJvc3BlY3Rpb24gfSBmcm9tICcuL05vSW50cm9zcGVjdGlvbi5qcyc7XG5leHBvcnQgeyBERUZBVUxUX01BWF9SRUNVUlNJVkVfU0VMRUNUSU9OUywgY3JlYXRlTWF4UmVjdXJzaXZlU2VsZWN0aW9uc1J1bGUsIH0gZnJvbSAnLi9SZWN1cnNpdmVTZWxlY3Rpb25zTGltaXQuanMnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/server/dist/esm/validationRules/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/esm/protobuf.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@apollo/usage-reporting-protobuf/generated/esm/protobuf.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextualizedQueryLatencyStats: () => (/* binding */ ContextualizedQueryLatencyStats),\n/* harmony export */   ContextualizedStats: () => (/* binding */ ContextualizedStats),\n/* harmony export */   ContextualizedTypeStats: () => (/* binding */ ContextualizedTypeStats),\n/* harmony export */   FieldStat: () => (/* binding */ FieldStat),\n/* harmony export */   PathErrorStats: () => (/* binding */ PathErrorStats),\n/* harmony export */   QueryLatencyStats: () => (/* binding */ QueryLatencyStats),\n/* harmony export */   ReferencedFieldsForType: () => (/* binding */ ReferencedFieldsForType),\n/* harmony export */   Report: () => (/* binding */ Report),\n/* harmony export */   ReportHeader: () => (/* binding */ ReportHeader),\n/* harmony export */   StatsContext: () => (/* binding */ StatsContext),\n/* harmony export */   Trace: () => (/* binding */ Trace),\n/* harmony export */   TracesAndStats: () => (/* binding */ TracesAndStats),\n/* harmony export */   TypeStat: () => (/* binding */ TypeStat),\n/* harmony export */   \"default\": () => (/* binding */ $root),\n/* harmony export */   google: () => (/* binding */ google)\n/* harmony export */ });\n/* harmony import */ var _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @apollo/protobufjs/minimal */ \"(rsc)/./node_modules/@apollo/protobufjs/minimal.js\");\n/*eslint-disable block-scoped-var, id-length, no-control-regex, no-magic-numbers, no-prototype-builtins, no-redeclare, no-shadow, no-var, sort-vars*/\n\n\n// Common aliases\nconst $Reader = _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.Reader, $Writer = _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.Writer, $util = _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util;\n\n// Exported root namespace\nconst $root = _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.roots[\"default\"] || (_apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.roots[\"default\"] = {});\n\nconst Trace = $root.Trace = (() => {\n\n    /**\n     * Properties of a Trace.\n     * @exports ITrace\n     * @interface ITrace\n     * @property {google.protobuf.ITimestamp|null} [startTime] Trace startTime\n     * @property {google.protobuf.ITimestamp|null} [endTime] Trace endTime\n     * @property {number|null} [durationNs] Trace durationNs\n     * @property {Trace.INode|null} [root] Trace root\n     * @property {boolean|null} [isIncomplete] Trace isIncomplete\n     * @property {string|null} [signature] Trace signature\n     * @property {string|null} [unexecutedOperationBody] Trace unexecutedOperationBody\n     * @property {string|null} [unexecutedOperationName] Trace unexecutedOperationName\n     * @property {Trace.IDetails|null} [details] Trace details\n     * @property {string|null} [clientName] Trace clientName\n     * @property {string|null} [clientVersion] Trace clientVersion\n     * @property {Trace.IHTTP|null} [http] Trace http\n     * @property {Trace.ICachePolicy|null} [cachePolicy] Trace cachePolicy\n     * @property {Trace.IQueryPlanNode|null} [queryPlan] Trace queryPlan\n     * @property {boolean|null} [fullQueryCacheHit] Trace fullQueryCacheHit\n     * @property {boolean|null} [persistedQueryHit] Trace persistedQueryHit\n     * @property {boolean|null} [persistedQueryRegister] Trace persistedQueryRegister\n     * @property {boolean|null} [registeredOperation] Trace registeredOperation\n     * @property {boolean|null} [forbiddenOperation] Trace forbiddenOperation\n     * @property {number|null} [fieldExecutionWeight] Trace fieldExecutionWeight\n     */\n\n    /**\n     * Constructs a new Trace.\n     * @exports Trace\n     * @classdesc Represents a Trace.\n     * @implements ITrace\n     * @constructor\n     * @param {ITrace=} [properties] Properties to set\n     */\n    function Trace(properties) {\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * Trace startTime.\n     * @member {google.protobuf.ITimestamp|null|undefined} startTime\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.startTime = null;\n\n    /**\n     * Trace endTime.\n     * @member {google.protobuf.ITimestamp|null|undefined} endTime\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.endTime = null;\n\n    /**\n     * Trace durationNs.\n     * @member {number} durationNs\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.durationNs = 0;\n\n    /**\n     * Trace root.\n     * @member {Trace.INode|null|undefined} root\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.root = null;\n\n    /**\n     * Trace isIncomplete.\n     * @member {boolean} isIncomplete\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.isIncomplete = false;\n\n    /**\n     * Trace signature.\n     * @member {string} signature\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.signature = \"\";\n\n    /**\n     * Trace unexecutedOperationBody.\n     * @member {string} unexecutedOperationBody\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.unexecutedOperationBody = \"\";\n\n    /**\n     * Trace unexecutedOperationName.\n     * @member {string} unexecutedOperationName\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.unexecutedOperationName = \"\";\n\n    /**\n     * Trace details.\n     * @member {Trace.IDetails|null|undefined} details\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.details = null;\n\n    /**\n     * Trace clientName.\n     * @member {string} clientName\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.clientName = \"\";\n\n    /**\n     * Trace clientVersion.\n     * @member {string} clientVersion\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.clientVersion = \"\";\n\n    /**\n     * Trace http.\n     * @member {Trace.IHTTP|null|undefined} http\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.http = null;\n\n    /**\n     * Trace cachePolicy.\n     * @member {Trace.ICachePolicy|null|undefined} cachePolicy\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.cachePolicy = null;\n\n    /**\n     * Trace queryPlan.\n     * @member {Trace.IQueryPlanNode|null|undefined} queryPlan\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.queryPlan = null;\n\n    /**\n     * Trace fullQueryCacheHit.\n     * @member {boolean} fullQueryCacheHit\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.fullQueryCacheHit = false;\n\n    /**\n     * Trace persistedQueryHit.\n     * @member {boolean} persistedQueryHit\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.persistedQueryHit = false;\n\n    /**\n     * Trace persistedQueryRegister.\n     * @member {boolean} persistedQueryRegister\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.persistedQueryRegister = false;\n\n    /**\n     * Trace registeredOperation.\n     * @member {boolean} registeredOperation\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.registeredOperation = false;\n\n    /**\n     * Trace forbiddenOperation.\n     * @member {boolean} forbiddenOperation\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.forbiddenOperation = false;\n\n    /**\n     * Trace fieldExecutionWeight.\n     * @member {number} fieldExecutionWeight\n     * @memberof Trace\n     * @instance\n     */\n    Trace.prototype.fieldExecutionWeight = 0;\n\n    /**\n     * Creates a new Trace instance using the specified properties.\n     * @function create\n     * @memberof Trace\n     * @static\n     * @param {ITrace=} [properties] Properties to set\n     * @returns {Trace} Trace instance\n     */\n    Trace.create = function create(properties) {\n        return new Trace(properties);\n    };\n\n    /**\n     * Encodes the specified Trace message. Does not implicitly {@link Trace.verify|verify} messages.\n     * @function encode\n     * @memberof Trace\n     * @static\n     * @param {ITrace} message Trace message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Trace.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.endTime != null && Object.hasOwnProperty.call(message, \"endTime\"))\n            $root.google.protobuf.Timestamp.encode(message.endTime, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n        if (message.startTime != null && Object.hasOwnProperty.call(message, \"startTime\"))\n            $root.google.protobuf.Timestamp.encode(message.startTime, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();\n        if (message.details != null && Object.hasOwnProperty.call(message, \"details\"))\n            $root.Trace.Details.encode(message.details, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();\n        if (message.clientName != null && Object.hasOwnProperty.call(message, \"clientName\"))\n            writer.uint32(/* id 7, wireType 2 =*/58).string(message.clientName);\n        if (message.clientVersion != null && Object.hasOwnProperty.call(message, \"clientVersion\"))\n            writer.uint32(/* id 8, wireType 2 =*/66).string(message.clientVersion);\n        if (message.http != null && Object.hasOwnProperty.call(message, \"http\"))\n            $root.Trace.HTTP.encode(message.http, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();\n        if (message.durationNs != null && Object.hasOwnProperty.call(message, \"durationNs\"))\n            writer.uint32(/* id 11, wireType 0 =*/88).uint64(message.durationNs);\n        if (message.root != null && Object.hasOwnProperty.call(message, \"root\"))\n            $root.Trace.Node.encode(message.root, writer.uint32(/* id 14, wireType 2 =*/114).fork()).ldelim();\n        if (message.cachePolicy != null && Object.hasOwnProperty.call(message, \"cachePolicy\"))\n            $root.Trace.CachePolicy.encode(message.cachePolicy, writer.uint32(/* id 18, wireType 2 =*/146).fork()).ldelim();\n        if (message.signature != null && Object.hasOwnProperty.call(message, \"signature\"))\n            writer.uint32(/* id 19, wireType 2 =*/154).string(message.signature);\n        if (message.fullQueryCacheHit != null && Object.hasOwnProperty.call(message, \"fullQueryCacheHit\"))\n            writer.uint32(/* id 20, wireType 0 =*/160).bool(message.fullQueryCacheHit);\n        if (message.persistedQueryHit != null && Object.hasOwnProperty.call(message, \"persistedQueryHit\"))\n            writer.uint32(/* id 21, wireType 0 =*/168).bool(message.persistedQueryHit);\n        if (message.persistedQueryRegister != null && Object.hasOwnProperty.call(message, \"persistedQueryRegister\"))\n            writer.uint32(/* id 22, wireType 0 =*/176).bool(message.persistedQueryRegister);\n        if (message.registeredOperation != null && Object.hasOwnProperty.call(message, \"registeredOperation\"))\n            writer.uint32(/* id 24, wireType 0 =*/192).bool(message.registeredOperation);\n        if (message.forbiddenOperation != null && Object.hasOwnProperty.call(message, \"forbiddenOperation\"))\n            writer.uint32(/* id 25, wireType 0 =*/200).bool(message.forbiddenOperation);\n        if (message.queryPlan != null && Object.hasOwnProperty.call(message, \"queryPlan\"))\n            $root.Trace.QueryPlanNode.encode(message.queryPlan, writer.uint32(/* id 26, wireType 2 =*/210).fork()).ldelim();\n        if (message.unexecutedOperationBody != null && Object.hasOwnProperty.call(message, \"unexecutedOperationBody\"))\n            writer.uint32(/* id 27, wireType 2 =*/218).string(message.unexecutedOperationBody);\n        if (message.unexecutedOperationName != null && Object.hasOwnProperty.call(message, \"unexecutedOperationName\"))\n            writer.uint32(/* id 28, wireType 2 =*/226).string(message.unexecutedOperationName);\n        if (message.fieldExecutionWeight != null && Object.hasOwnProperty.call(message, \"fieldExecutionWeight\"))\n            writer.uint32(/* id 31, wireType 1 =*/249).double(message.fieldExecutionWeight);\n        if (message.isIncomplete != null && Object.hasOwnProperty.call(message, \"isIncomplete\"))\n            writer.uint32(/* id 33, wireType 0 =*/264).bool(message.isIncomplete);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified Trace message, length delimited. Does not implicitly {@link Trace.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof Trace\n     * @static\n     * @param {ITrace} message Trace message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Trace.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a Trace message from the specified reader or buffer.\n     * @function decode\n     * @memberof Trace\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {Trace} Trace\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Trace.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace();\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 4:\n                message.startTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                break;\n            case 3:\n                message.endTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                break;\n            case 11:\n                message.durationNs = reader.uint64();\n                break;\n            case 14:\n                message.root = $root.Trace.Node.decode(reader, reader.uint32());\n                break;\n            case 33:\n                message.isIncomplete = reader.bool();\n                break;\n            case 19:\n                message.signature = reader.string();\n                break;\n            case 27:\n                message.unexecutedOperationBody = reader.string();\n                break;\n            case 28:\n                message.unexecutedOperationName = reader.string();\n                break;\n            case 6:\n                message.details = $root.Trace.Details.decode(reader, reader.uint32());\n                break;\n            case 7:\n                message.clientName = reader.string();\n                break;\n            case 8:\n                message.clientVersion = reader.string();\n                break;\n            case 10:\n                message.http = $root.Trace.HTTP.decode(reader, reader.uint32());\n                break;\n            case 18:\n                message.cachePolicy = $root.Trace.CachePolicy.decode(reader, reader.uint32());\n                break;\n            case 26:\n                message.queryPlan = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                break;\n            case 20:\n                message.fullQueryCacheHit = reader.bool();\n                break;\n            case 21:\n                message.persistedQueryHit = reader.bool();\n                break;\n            case 22:\n                message.persistedQueryRegister = reader.bool();\n                break;\n            case 24:\n                message.registeredOperation = reader.bool();\n                break;\n            case 25:\n                message.forbiddenOperation = reader.bool();\n                break;\n            case 31:\n                message.fieldExecutionWeight = reader.double();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a Trace message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof Trace\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {Trace} Trace\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Trace.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a Trace message.\n     * @function verify\n     * @memberof Trace\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    Trace.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.startTime != null && message.hasOwnProperty(\"startTime\")) {\n            let error = $root.google.protobuf.Timestamp.verify(message.startTime);\n            if (error)\n                return \"startTime.\" + error;\n        }\n        if (message.endTime != null && message.hasOwnProperty(\"endTime\")) {\n            let error = $root.google.protobuf.Timestamp.verify(message.endTime);\n            if (error)\n                return \"endTime.\" + error;\n        }\n        if (message.durationNs != null && message.hasOwnProperty(\"durationNs\"))\n            if (!$util.isInteger(message.durationNs) && !(message.durationNs && $util.isInteger(message.durationNs.low) && $util.isInteger(message.durationNs.high)))\n                return \"durationNs: integer|Long expected\";\n        if (message.root != null && message.hasOwnProperty(\"root\")) {\n            let error = $root.Trace.Node.verify(message.root);\n            if (error)\n                return \"root.\" + error;\n        }\n        if (message.isIncomplete != null && message.hasOwnProperty(\"isIncomplete\"))\n            if (typeof message.isIncomplete !== \"boolean\")\n                return \"isIncomplete: boolean expected\";\n        if (message.signature != null && message.hasOwnProperty(\"signature\"))\n            if (!$util.isString(message.signature))\n                return \"signature: string expected\";\n        if (message.unexecutedOperationBody != null && message.hasOwnProperty(\"unexecutedOperationBody\"))\n            if (!$util.isString(message.unexecutedOperationBody))\n                return \"unexecutedOperationBody: string expected\";\n        if (message.unexecutedOperationName != null && message.hasOwnProperty(\"unexecutedOperationName\"))\n            if (!$util.isString(message.unexecutedOperationName))\n                return \"unexecutedOperationName: string expected\";\n        if (message.details != null && message.hasOwnProperty(\"details\")) {\n            let error = $root.Trace.Details.verify(message.details);\n            if (error)\n                return \"details.\" + error;\n        }\n        if (message.clientName != null && message.hasOwnProperty(\"clientName\"))\n            if (!$util.isString(message.clientName))\n                return \"clientName: string expected\";\n        if (message.clientVersion != null && message.hasOwnProperty(\"clientVersion\"))\n            if (!$util.isString(message.clientVersion))\n                return \"clientVersion: string expected\";\n        if (message.http != null && message.hasOwnProperty(\"http\")) {\n            let error = $root.Trace.HTTP.verify(message.http);\n            if (error)\n                return \"http.\" + error;\n        }\n        if (message.cachePolicy != null && message.hasOwnProperty(\"cachePolicy\")) {\n            let error = $root.Trace.CachePolicy.verify(message.cachePolicy);\n            if (error)\n                return \"cachePolicy.\" + error;\n        }\n        if (message.queryPlan != null && message.hasOwnProperty(\"queryPlan\")) {\n            let error = $root.Trace.QueryPlanNode.verify(message.queryPlan);\n            if (error)\n                return \"queryPlan.\" + error;\n        }\n        if (message.fullQueryCacheHit != null && message.hasOwnProperty(\"fullQueryCacheHit\"))\n            if (typeof message.fullQueryCacheHit !== \"boolean\")\n                return \"fullQueryCacheHit: boolean expected\";\n        if (message.persistedQueryHit != null && message.hasOwnProperty(\"persistedQueryHit\"))\n            if (typeof message.persistedQueryHit !== \"boolean\")\n                return \"persistedQueryHit: boolean expected\";\n        if (message.persistedQueryRegister != null && message.hasOwnProperty(\"persistedQueryRegister\"))\n            if (typeof message.persistedQueryRegister !== \"boolean\")\n                return \"persistedQueryRegister: boolean expected\";\n        if (message.registeredOperation != null && message.hasOwnProperty(\"registeredOperation\"))\n            if (typeof message.registeredOperation !== \"boolean\")\n                return \"registeredOperation: boolean expected\";\n        if (message.forbiddenOperation != null && message.hasOwnProperty(\"forbiddenOperation\"))\n            if (typeof message.forbiddenOperation !== \"boolean\")\n                return \"forbiddenOperation: boolean expected\";\n        if (message.fieldExecutionWeight != null && message.hasOwnProperty(\"fieldExecutionWeight\"))\n            if (typeof message.fieldExecutionWeight !== \"number\")\n                return \"fieldExecutionWeight: number expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a Trace message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Trace\n     * @static\n     * @param {Trace} message Trace\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Trace.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.defaults) {\n            object.endTime = null;\n            object.startTime = null;\n            object.details = null;\n            object.clientName = \"\";\n            object.clientVersion = \"\";\n            object.http = null;\n            object.durationNs = 0;\n            object.root = null;\n            object.cachePolicy = null;\n            object.signature = \"\";\n            object.fullQueryCacheHit = false;\n            object.persistedQueryHit = false;\n            object.persistedQueryRegister = false;\n            object.registeredOperation = false;\n            object.forbiddenOperation = false;\n            object.queryPlan = null;\n            object.unexecutedOperationBody = \"\";\n            object.unexecutedOperationName = \"\";\n            object.fieldExecutionWeight = 0;\n            object.isIncomplete = false;\n        }\n        if (message.endTime != null && message.hasOwnProperty(\"endTime\"))\n            object.endTime = $root.google.protobuf.Timestamp.toObject(message.endTime, options);\n        if (message.startTime != null && message.hasOwnProperty(\"startTime\"))\n            object.startTime = $root.google.protobuf.Timestamp.toObject(message.startTime, options);\n        if (message.details != null && message.hasOwnProperty(\"details\"))\n            object.details = $root.Trace.Details.toObject(message.details, options);\n        if (message.clientName != null && message.hasOwnProperty(\"clientName\"))\n            object.clientName = message.clientName;\n        if (message.clientVersion != null && message.hasOwnProperty(\"clientVersion\"))\n            object.clientVersion = message.clientVersion;\n        if (message.http != null && message.hasOwnProperty(\"http\"))\n            object.http = $root.Trace.HTTP.toObject(message.http, options);\n        if (message.durationNs != null && message.hasOwnProperty(\"durationNs\"))\n            if (typeof message.durationNs === \"number\")\n                object.durationNs = options.longs === String ? String(message.durationNs) : message.durationNs;\n            else\n                object.durationNs = options.longs === String ? $util.Long.prototype.toString.call(message.durationNs) : options.longs === Number ? new $util.LongBits(message.durationNs.low >>> 0, message.durationNs.high >>> 0).toNumber(true) : message.durationNs;\n        if (message.root != null && message.hasOwnProperty(\"root\"))\n            object.root = $root.Trace.Node.toObject(message.root, options);\n        if (message.cachePolicy != null && message.hasOwnProperty(\"cachePolicy\"))\n            object.cachePolicy = $root.Trace.CachePolicy.toObject(message.cachePolicy, options);\n        if (message.signature != null && message.hasOwnProperty(\"signature\"))\n            object.signature = message.signature;\n        if (message.fullQueryCacheHit != null && message.hasOwnProperty(\"fullQueryCacheHit\"))\n            object.fullQueryCacheHit = message.fullQueryCacheHit;\n        if (message.persistedQueryHit != null && message.hasOwnProperty(\"persistedQueryHit\"))\n            object.persistedQueryHit = message.persistedQueryHit;\n        if (message.persistedQueryRegister != null && message.hasOwnProperty(\"persistedQueryRegister\"))\n            object.persistedQueryRegister = message.persistedQueryRegister;\n        if (message.registeredOperation != null && message.hasOwnProperty(\"registeredOperation\"))\n            object.registeredOperation = message.registeredOperation;\n        if (message.forbiddenOperation != null && message.hasOwnProperty(\"forbiddenOperation\"))\n            object.forbiddenOperation = message.forbiddenOperation;\n        if (message.queryPlan != null && message.hasOwnProperty(\"queryPlan\"))\n            object.queryPlan = $root.Trace.QueryPlanNode.toObject(message.queryPlan, options);\n        if (message.unexecutedOperationBody != null && message.hasOwnProperty(\"unexecutedOperationBody\"))\n            object.unexecutedOperationBody = message.unexecutedOperationBody;\n        if (message.unexecutedOperationName != null && message.hasOwnProperty(\"unexecutedOperationName\"))\n            object.unexecutedOperationName = message.unexecutedOperationName;\n        if (message.fieldExecutionWeight != null && message.hasOwnProperty(\"fieldExecutionWeight\"))\n            object.fieldExecutionWeight = options.json && !isFinite(message.fieldExecutionWeight) ? String(message.fieldExecutionWeight) : message.fieldExecutionWeight;\n        if (message.isIncomplete != null && message.hasOwnProperty(\"isIncomplete\"))\n            object.isIncomplete = message.isIncomplete;\n        return object;\n    };\n\n    /**\n     * Converts this Trace to JSON.\n     * @function toJSON\n     * @memberof Trace\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Trace.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    Trace.CachePolicy = (function() {\n\n        /**\n         * Properties of a CachePolicy.\n         * @memberof Trace\n         * @interface ICachePolicy\n         * @property {Trace.CachePolicy.Scope|null} [scope] CachePolicy scope\n         * @property {number|null} [maxAgeNs] CachePolicy maxAgeNs\n         */\n\n        /**\n         * Constructs a new CachePolicy.\n         * @memberof Trace\n         * @classdesc Represents a CachePolicy.\n         * @implements ICachePolicy\n         * @constructor\n         * @param {Trace.ICachePolicy=} [properties] Properties to set\n         */\n        function CachePolicy(properties) {\n            if (properties)\n                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * CachePolicy scope.\n         * @member {Trace.CachePolicy.Scope} scope\n         * @memberof Trace.CachePolicy\n         * @instance\n         */\n        CachePolicy.prototype.scope = 0;\n\n        /**\n         * CachePolicy maxAgeNs.\n         * @member {number} maxAgeNs\n         * @memberof Trace.CachePolicy\n         * @instance\n         */\n        CachePolicy.prototype.maxAgeNs = 0;\n\n        /**\n         * Creates a new CachePolicy instance using the specified properties.\n         * @function create\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Trace.ICachePolicy=} [properties] Properties to set\n         * @returns {Trace.CachePolicy} CachePolicy instance\n         */\n        CachePolicy.create = function create(properties) {\n            return new CachePolicy(properties);\n        };\n\n        /**\n         * Encodes the specified CachePolicy message. Does not implicitly {@link Trace.CachePolicy.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Trace.ICachePolicy} message CachePolicy message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        CachePolicy.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.scope != null && Object.hasOwnProperty.call(message, \"scope\"))\n                writer.uint32(/* id 1, wireType 0 =*/8).int32(message.scope);\n            if (message.maxAgeNs != null && Object.hasOwnProperty.call(message, \"maxAgeNs\"))\n                writer.uint32(/* id 2, wireType 0 =*/16).int64(message.maxAgeNs);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified CachePolicy message, length delimited. Does not implicitly {@link Trace.CachePolicy.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Trace.ICachePolicy} message CachePolicy message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        CachePolicy.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a CachePolicy message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.CachePolicy} CachePolicy\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        CachePolicy.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.CachePolicy();\n            while (reader.pos < end) {\n                let tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.scope = reader.int32();\n                    break;\n                case 2:\n                    message.maxAgeNs = reader.int64();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a CachePolicy message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.CachePolicy} CachePolicy\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        CachePolicy.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a CachePolicy message.\n         * @function verify\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        CachePolicy.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.scope != null && message.hasOwnProperty(\"scope\"))\n                switch (message.scope) {\n                default:\n                    return \"scope: enum value expected\";\n                case 0:\n                case 1:\n                case 2:\n                    break;\n                }\n            if (message.maxAgeNs != null && message.hasOwnProperty(\"maxAgeNs\"))\n                if (!$util.isInteger(message.maxAgeNs) && !(message.maxAgeNs && $util.isInteger(message.maxAgeNs.low) && $util.isInteger(message.maxAgeNs.high)))\n                    return \"maxAgeNs: integer|Long expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a CachePolicy message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.CachePolicy\n         * @static\n         * @param {Trace.CachePolicy} message CachePolicy\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        CachePolicy.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            let object = {};\n            if (options.defaults) {\n                object.scope = options.enums === String ? \"UNKNOWN\" : 0;\n                object.maxAgeNs = 0;\n            }\n            if (message.scope != null && message.hasOwnProperty(\"scope\"))\n                object.scope = options.enums === String ? $root.Trace.CachePolicy.Scope[message.scope] : message.scope;\n            if (message.maxAgeNs != null && message.hasOwnProperty(\"maxAgeNs\"))\n                if (typeof message.maxAgeNs === \"number\")\n                    object.maxAgeNs = options.longs === String ? String(message.maxAgeNs) : message.maxAgeNs;\n                else\n                    object.maxAgeNs = options.longs === String ? $util.Long.prototype.toString.call(message.maxAgeNs) : options.longs === Number ? new $util.LongBits(message.maxAgeNs.low >>> 0, message.maxAgeNs.high >>> 0).toNumber() : message.maxAgeNs;\n            return object;\n        };\n\n        /**\n         * Converts this CachePolicy to JSON.\n         * @function toJSON\n         * @memberof Trace.CachePolicy\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        CachePolicy.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n        };\n\n        /**\n         * Scope enum.\n         * @name Trace.CachePolicy.Scope\n         * @enum {string}\n         * @property {number} UNKNOWN=0 UNKNOWN value\n         * @property {number} PUBLIC=1 PUBLIC value\n         * @property {number} PRIVATE=2 PRIVATE value\n         */\n        CachePolicy.Scope = (function() {\n            const valuesById = {}, values = Object.create(valuesById);\n            values[valuesById[0] = \"UNKNOWN\"] = 0;\n            values[valuesById[1] = \"PUBLIC\"] = 1;\n            values[valuesById[2] = \"PRIVATE\"] = 2;\n            return values;\n        })();\n\n        return CachePolicy;\n    })();\n\n    Trace.Details = (function() {\n\n        /**\n         * Properties of a Details.\n         * @memberof Trace\n         * @interface IDetails\n         * @property {Object.<string,string>|null} [variablesJson] Details variablesJson\n         * @property {string|null} [operationName] Details operationName\n         */\n\n        /**\n         * Constructs a new Details.\n         * @memberof Trace\n         * @classdesc Represents a Details.\n         * @implements IDetails\n         * @constructor\n         * @param {Trace.IDetails=} [properties] Properties to set\n         */\n        function Details(properties) {\n            this.variablesJson = {};\n            if (properties)\n                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * Details variablesJson.\n         * @member {Object.<string,string>} variablesJson\n         * @memberof Trace.Details\n         * @instance\n         */\n        Details.prototype.variablesJson = $util.emptyObject;\n\n        /**\n         * Details operationName.\n         * @member {string} operationName\n         * @memberof Trace.Details\n         * @instance\n         */\n        Details.prototype.operationName = \"\";\n\n        /**\n         * Creates a new Details instance using the specified properties.\n         * @function create\n         * @memberof Trace.Details\n         * @static\n         * @param {Trace.IDetails=} [properties] Properties to set\n         * @returns {Trace.Details} Details instance\n         */\n        Details.create = function create(properties) {\n            return new Details(properties);\n        };\n\n        /**\n         * Encodes the specified Details message. Does not implicitly {@link Trace.Details.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.Details\n         * @static\n         * @param {Trace.IDetails} message Details message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Details.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.operationName != null && Object.hasOwnProperty.call(message, \"operationName\"))\n                writer.uint32(/* id 3, wireType 2 =*/26).string(message.operationName);\n            if (message.variablesJson != null && Object.hasOwnProperty.call(message, \"variablesJson\"))\n                for (let keys = Object.keys(message.variablesJson), i = 0; i < keys.length; ++i)\n                    writer.uint32(/* id 4, wireType 2 =*/34).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]).uint32(/* id 2, wireType 2 =*/18).string(message.variablesJson[keys[i]]).ldelim();\n            return writer;\n        };\n\n        /**\n         * Encodes the specified Details message, length delimited. Does not implicitly {@link Trace.Details.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.Details\n         * @static\n         * @param {Trace.IDetails} message Details message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Details.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a Details message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.Details\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.Details} Details\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Details.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.Details(), key;\n            while (reader.pos < end) {\n                let tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 4:\n                    reader.skip().pos++;\n                    if (message.variablesJson === $util.emptyObject)\n                        message.variablesJson = {};\n                    key = reader.string();\n                    reader.pos++;\n                    message.variablesJson[key] = reader.string();\n                    break;\n                case 3:\n                    message.operationName = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a Details message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.Details\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.Details} Details\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Details.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a Details message.\n         * @function verify\n         * @memberof Trace.Details\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        Details.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.variablesJson != null && message.hasOwnProperty(\"variablesJson\")) {\n                if (!$util.isObject(message.variablesJson))\n                    return \"variablesJson: object expected\";\n                let key = Object.keys(message.variablesJson);\n                for (let i = 0; i < key.length; ++i)\n                    if (!$util.isString(message.variablesJson[key[i]]))\n                        return \"variablesJson: string{k:string} expected\";\n            }\n            if (message.operationName != null && message.hasOwnProperty(\"operationName\"))\n                if (!$util.isString(message.operationName))\n                    return \"operationName: string expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a Details message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.Details\n         * @static\n         * @param {Trace.Details} message Details\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        Details.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            let object = {};\n            if (options.objects || options.defaults)\n                object.variablesJson = {};\n            if (options.defaults)\n                object.operationName = \"\";\n            if (message.operationName != null && message.hasOwnProperty(\"operationName\"))\n                object.operationName = message.operationName;\n            let keys2;\n            if (message.variablesJson && (keys2 = Object.keys(message.variablesJson)).length) {\n                object.variablesJson = {};\n                for (let j = 0; j < keys2.length; ++j)\n                    object.variablesJson[keys2[j]] = message.variablesJson[keys2[j]];\n            }\n            return object;\n        };\n\n        /**\n         * Converts this Details to JSON.\n         * @function toJSON\n         * @memberof Trace.Details\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        Details.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n        };\n\n        return Details;\n    })();\n\n    Trace.Error = (function() {\n\n        /**\n         * Properties of an Error.\n         * @memberof Trace\n         * @interface IError\n         * @property {string|null} [message] Error message\n         * @property {Array.<Trace.ILocation>|null} [location] Error location\n         * @property {number|null} [timeNs] Error timeNs\n         * @property {string|null} [json] Error json\n         */\n\n        /**\n         * Constructs a new Error.\n         * @memberof Trace\n         * @classdesc Represents an Error.\n         * @implements IError\n         * @constructor\n         * @param {Trace.IError=} [properties] Properties to set\n         */\n        function Error(properties) {\n            this.location = [];\n            if (properties)\n                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * Error message.\n         * @member {string} message\n         * @memberof Trace.Error\n         * @instance\n         */\n        Error.prototype.message = \"\";\n\n        /**\n         * Error location.\n         * @member {Array.<Trace.ILocation>} location\n         * @memberof Trace.Error\n         * @instance\n         */\n        Error.prototype.location = $util.emptyArray;\n\n        /**\n         * Error timeNs.\n         * @member {number} timeNs\n         * @memberof Trace.Error\n         * @instance\n         */\n        Error.prototype.timeNs = 0;\n\n        /**\n         * Error json.\n         * @member {string} json\n         * @memberof Trace.Error\n         * @instance\n         */\n        Error.prototype.json = \"\";\n\n        /**\n         * Creates a new Error instance using the specified properties.\n         * @function create\n         * @memberof Trace.Error\n         * @static\n         * @param {Trace.IError=} [properties] Properties to set\n         * @returns {Trace.Error} Error instance\n         */\n        Error.create = function create(properties) {\n            return new Error(properties);\n        };\n\n        /**\n         * Encodes the specified Error message. Does not implicitly {@link Trace.Error.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.Error\n         * @static\n         * @param {Trace.IError} message Error message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Error.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.message != null && Object.hasOwnProperty.call(message, \"message\"))\n                writer.uint32(/* id 1, wireType 2 =*/10).string(message.message);\n            if (message.location != null && message.location.length)\n                for (let i = 0; i < message.location.length; ++i)\n                    $root.Trace.Location.encode(message.location[i], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n            if (message.timeNs != null && Object.hasOwnProperty.call(message, \"timeNs\"))\n                writer.uint32(/* id 3, wireType 0 =*/24).uint64(message.timeNs);\n            if (message.json != null && Object.hasOwnProperty.call(message, \"json\"))\n                writer.uint32(/* id 4, wireType 2 =*/34).string(message.json);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified Error message, length delimited. Does not implicitly {@link Trace.Error.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.Error\n         * @static\n         * @param {Trace.IError} message Error message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Error.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes an Error message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.Error\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.Error} Error\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Error.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.Error();\n            while (reader.pos < end) {\n                let tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.message = reader.string();\n                    break;\n                case 2:\n                    if (!(message.location && message.location.length))\n                        message.location = [];\n                    message.location.push($root.Trace.Location.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.timeNs = reader.uint64();\n                    break;\n                case 4:\n                    message.json = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes an Error message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.Error\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.Error} Error\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Error.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies an Error message.\n         * @function verify\n         * @memberof Trace.Error\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        Error.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.message != null && message.hasOwnProperty(\"message\"))\n                if (!$util.isString(message.message))\n                    return \"message: string expected\";\n            if (message.location != null && message.hasOwnProperty(\"location\")) {\n                if (!Array.isArray(message.location))\n                    return \"location: array expected\";\n                for (let i = 0; i < message.location.length; ++i) {\n                    let error = $root.Trace.Location.verify(message.location[i]);\n                    if (error)\n                        return \"location.\" + error;\n                }\n            }\n            if (message.timeNs != null && message.hasOwnProperty(\"timeNs\"))\n                if (!$util.isInteger(message.timeNs) && !(message.timeNs && $util.isInteger(message.timeNs.low) && $util.isInteger(message.timeNs.high)))\n                    return \"timeNs: integer|Long expected\";\n            if (message.json != null && message.hasOwnProperty(\"json\"))\n                if (!$util.isString(message.json))\n                    return \"json: string expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from an Error message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.Error\n         * @static\n         * @param {Trace.Error} message Error\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        Error.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            let object = {};\n            if (options.arrays || options.defaults)\n                object.location = [];\n            if (options.defaults) {\n                object.message = \"\";\n                object.timeNs = 0;\n                object.json = \"\";\n            }\n            if (message.message != null && message.hasOwnProperty(\"message\"))\n                object.message = message.message;\n            if (message.location && message.location.length) {\n                object.location = [];\n                for (let j = 0; j < message.location.length; ++j)\n                    object.location[j] = $root.Trace.Location.toObject(message.location[j], options);\n            }\n            if (message.timeNs != null && message.hasOwnProperty(\"timeNs\"))\n                if (typeof message.timeNs === \"number\")\n                    object.timeNs = options.longs === String ? String(message.timeNs) : message.timeNs;\n                else\n                    object.timeNs = options.longs === String ? $util.Long.prototype.toString.call(message.timeNs) : options.longs === Number ? new $util.LongBits(message.timeNs.low >>> 0, message.timeNs.high >>> 0).toNumber(true) : message.timeNs;\n            if (message.json != null && message.hasOwnProperty(\"json\"))\n                object.json = message.json;\n            return object;\n        };\n\n        /**\n         * Converts this Error to JSON.\n         * @function toJSON\n         * @memberof Trace.Error\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        Error.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n        };\n\n        return Error;\n    })();\n\n    Trace.HTTP = (function() {\n\n        /**\n         * Properties of a HTTP.\n         * @memberof Trace\n         * @interface IHTTP\n         * @property {Trace.HTTP.Method|null} [method] HTTP method\n         * @property {Object.<string,Trace.HTTP.IValues>|null} [requestHeaders] HTTP requestHeaders\n         * @property {Object.<string,Trace.HTTP.IValues>|null} [responseHeaders] HTTP responseHeaders\n         * @property {number|null} [statusCode] HTTP statusCode\n         */\n\n        /**\n         * Constructs a new HTTP.\n         * @memberof Trace\n         * @classdesc Represents a HTTP.\n         * @implements IHTTP\n         * @constructor\n         * @param {Trace.IHTTP=} [properties] Properties to set\n         */\n        function HTTP(properties) {\n            this.requestHeaders = {};\n            this.responseHeaders = {};\n            if (properties)\n                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * HTTP method.\n         * @member {Trace.HTTP.Method} method\n         * @memberof Trace.HTTP\n         * @instance\n         */\n        HTTP.prototype.method = 0;\n\n        /**\n         * HTTP requestHeaders.\n         * @member {Object.<string,Trace.HTTP.IValues>} requestHeaders\n         * @memberof Trace.HTTP\n         * @instance\n         */\n        HTTP.prototype.requestHeaders = $util.emptyObject;\n\n        /**\n         * HTTP responseHeaders.\n         * @member {Object.<string,Trace.HTTP.IValues>} responseHeaders\n         * @memberof Trace.HTTP\n         * @instance\n         */\n        HTTP.prototype.responseHeaders = $util.emptyObject;\n\n        /**\n         * HTTP statusCode.\n         * @member {number} statusCode\n         * @memberof Trace.HTTP\n         * @instance\n         */\n        HTTP.prototype.statusCode = 0;\n\n        /**\n         * Creates a new HTTP instance using the specified properties.\n         * @function create\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Trace.IHTTP=} [properties] Properties to set\n         * @returns {Trace.HTTP} HTTP instance\n         */\n        HTTP.create = function create(properties) {\n            return new HTTP(properties);\n        };\n\n        /**\n         * Encodes the specified HTTP message. Does not implicitly {@link Trace.HTTP.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Trace.IHTTP} message HTTP message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        HTTP.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.method != null && Object.hasOwnProperty.call(message, \"method\"))\n                writer.uint32(/* id 1, wireType 0 =*/8).int32(message.method);\n            if (message.requestHeaders != null && Object.hasOwnProperty.call(message, \"requestHeaders\"))\n                for (let keys = Object.keys(message.requestHeaders), i = 0; i < keys.length; ++i) {\n                    writer.uint32(/* id 4, wireType 2 =*/34).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                    $root.Trace.HTTP.Values.encode(message.requestHeaders[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n                }\n            if (message.responseHeaders != null && Object.hasOwnProperty.call(message, \"responseHeaders\"))\n                for (let keys = Object.keys(message.responseHeaders), i = 0; i < keys.length; ++i) {\n                    writer.uint32(/* id 5, wireType 2 =*/42).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                    $root.Trace.HTTP.Values.encode(message.responseHeaders[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n                }\n            if (message.statusCode != null && Object.hasOwnProperty.call(message, \"statusCode\"))\n                writer.uint32(/* id 6, wireType 0 =*/48).uint32(message.statusCode);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified HTTP message, length delimited. Does not implicitly {@link Trace.HTTP.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Trace.IHTTP} message HTTP message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        HTTP.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a HTTP message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.HTTP\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.HTTP} HTTP\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        HTTP.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.HTTP(), key;\n            while (reader.pos < end) {\n                let tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.method = reader.int32();\n                    break;\n                case 4:\n                    reader.skip().pos++;\n                    if (message.requestHeaders === $util.emptyObject)\n                        message.requestHeaders = {};\n                    key = reader.string();\n                    reader.pos++;\n                    message.requestHeaders[key] = $root.Trace.HTTP.Values.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    reader.skip().pos++;\n                    if (message.responseHeaders === $util.emptyObject)\n                        message.responseHeaders = {};\n                    key = reader.string();\n                    reader.pos++;\n                    message.responseHeaders[key] = $root.Trace.HTTP.Values.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.statusCode = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a HTTP message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.HTTP\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.HTTP} HTTP\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        HTTP.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a HTTP message.\n         * @function verify\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        HTTP.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.method != null && message.hasOwnProperty(\"method\"))\n                switch (message.method) {\n                default:\n                    return \"method: enum value expected\";\n                case 0:\n                case 1:\n                case 2:\n                case 3:\n                case 4:\n                case 5:\n                case 6:\n                case 7:\n                case 8:\n                case 9:\n                    break;\n                }\n            if (message.requestHeaders != null && message.hasOwnProperty(\"requestHeaders\")) {\n                if (!$util.isObject(message.requestHeaders))\n                    return \"requestHeaders: object expected\";\n                let key = Object.keys(message.requestHeaders);\n                for (let i = 0; i < key.length; ++i) {\n                    let error = $root.Trace.HTTP.Values.verify(message.requestHeaders[key[i]]);\n                    if (error)\n                        return \"requestHeaders.\" + error;\n                }\n            }\n            if (message.responseHeaders != null && message.hasOwnProperty(\"responseHeaders\")) {\n                if (!$util.isObject(message.responseHeaders))\n                    return \"responseHeaders: object expected\";\n                let key = Object.keys(message.responseHeaders);\n                for (let i = 0; i < key.length; ++i) {\n                    let error = $root.Trace.HTTP.Values.verify(message.responseHeaders[key[i]]);\n                    if (error)\n                        return \"responseHeaders.\" + error;\n                }\n            }\n            if (message.statusCode != null && message.hasOwnProperty(\"statusCode\"))\n                if (!$util.isInteger(message.statusCode))\n                    return \"statusCode: integer expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a HTTP message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.HTTP\n         * @static\n         * @param {Trace.HTTP} message HTTP\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        HTTP.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            let object = {};\n            if (options.objects || options.defaults) {\n                object.requestHeaders = {};\n                object.responseHeaders = {};\n            }\n            if (options.defaults) {\n                object.method = options.enums === String ? \"UNKNOWN\" : 0;\n                object.statusCode = 0;\n            }\n            if (message.method != null && message.hasOwnProperty(\"method\"))\n                object.method = options.enums === String ? $root.Trace.HTTP.Method[message.method] : message.method;\n            let keys2;\n            if (message.requestHeaders && (keys2 = Object.keys(message.requestHeaders)).length) {\n                object.requestHeaders = {};\n                for (let j = 0; j < keys2.length; ++j)\n                    object.requestHeaders[keys2[j]] = $root.Trace.HTTP.Values.toObject(message.requestHeaders[keys2[j]], options);\n            }\n            if (message.responseHeaders && (keys2 = Object.keys(message.responseHeaders)).length) {\n                object.responseHeaders = {};\n                for (let j = 0; j < keys2.length; ++j)\n                    object.responseHeaders[keys2[j]] = $root.Trace.HTTP.Values.toObject(message.responseHeaders[keys2[j]], options);\n            }\n            if (message.statusCode != null && message.hasOwnProperty(\"statusCode\"))\n                object.statusCode = message.statusCode;\n            return object;\n        };\n\n        /**\n         * Converts this HTTP to JSON.\n         * @function toJSON\n         * @memberof Trace.HTTP\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        HTTP.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n        };\n\n        HTTP.Values = (function() {\n\n            /**\n             * Properties of a Values.\n             * @memberof Trace.HTTP\n             * @interface IValues\n             * @property {Array.<string>|null} [value] Values value\n             */\n\n            /**\n             * Constructs a new Values.\n             * @memberof Trace.HTTP\n             * @classdesc Represents a Values.\n             * @implements IValues\n             * @constructor\n             * @param {Trace.HTTP.IValues=} [properties] Properties to set\n             */\n            function Values(properties) {\n                this.value = [];\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * Values value.\n             * @member {Array.<string>} value\n             * @memberof Trace.HTTP.Values\n             * @instance\n             */\n            Values.prototype.value = $util.emptyArray;\n\n            /**\n             * Creates a new Values instance using the specified properties.\n             * @function create\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Trace.HTTP.IValues=} [properties] Properties to set\n             * @returns {Trace.HTTP.Values} Values instance\n             */\n            Values.create = function create(properties) {\n                return new Values(properties);\n            };\n\n            /**\n             * Encodes the specified Values message. Does not implicitly {@link Trace.HTTP.Values.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Trace.HTTP.IValues} message Values message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Values.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.value != null && message.value.length)\n                    for (let i = 0; i < message.value.length; ++i)\n                        writer.uint32(/* id 1, wireType 2 =*/10).string(message.value[i]);\n                return writer;\n            };\n\n            /**\n             * Encodes the specified Values message, length delimited. Does not implicitly {@link Trace.HTTP.Values.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Trace.HTTP.IValues} message Values message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Values.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a Values message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.HTTP.Values} Values\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Values.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.HTTP.Values();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.value && message.value.length))\n                            message.value = [];\n                        message.value.push(reader.string());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a Values message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.HTTP.Values} Values\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Values.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a Values message.\n             * @function verify\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            Values.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.value != null && message.hasOwnProperty(\"value\")) {\n                    if (!Array.isArray(message.value))\n                        return \"value: array expected\";\n                    for (let i = 0; i < message.value.length; ++i)\n                        if (!$util.isString(message.value[i]))\n                            return \"value: string[] expected\";\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a Values message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.HTTP.Values\n             * @static\n             * @param {Trace.HTTP.Values} message Values\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            Values.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.arrays || options.defaults)\n                    object.value = [];\n                if (message.value && message.value.length) {\n                    object.value = [];\n                    for (let j = 0; j < message.value.length; ++j)\n                        object.value[j] = message.value[j];\n                }\n                return object;\n            };\n\n            /**\n             * Converts this Values to JSON.\n             * @function toJSON\n             * @memberof Trace.HTTP.Values\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            Values.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return Values;\n        })();\n\n        /**\n         * Method enum.\n         * @name Trace.HTTP.Method\n         * @enum {string}\n         * @property {number} UNKNOWN=0 UNKNOWN value\n         * @property {number} OPTIONS=1 OPTIONS value\n         * @property {number} GET=2 GET value\n         * @property {number} HEAD=3 HEAD value\n         * @property {number} POST=4 POST value\n         * @property {number} PUT=5 PUT value\n         * @property {number} DELETE=6 DELETE value\n         * @property {number} TRACE=7 TRACE value\n         * @property {number} CONNECT=8 CONNECT value\n         * @property {number} PATCH=9 PATCH value\n         */\n        HTTP.Method = (function() {\n            const valuesById = {}, values = Object.create(valuesById);\n            values[valuesById[0] = \"UNKNOWN\"] = 0;\n            values[valuesById[1] = \"OPTIONS\"] = 1;\n            values[valuesById[2] = \"GET\"] = 2;\n            values[valuesById[3] = \"HEAD\"] = 3;\n            values[valuesById[4] = \"POST\"] = 4;\n            values[valuesById[5] = \"PUT\"] = 5;\n            values[valuesById[6] = \"DELETE\"] = 6;\n            values[valuesById[7] = \"TRACE\"] = 7;\n            values[valuesById[8] = \"CONNECT\"] = 8;\n            values[valuesById[9] = \"PATCH\"] = 9;\n            return values;\n        })();\n\n        return HTTP;\n    })();\n\n    Trace.Location = (function() {\n\n        /**\n         * Properties of a Location.\n         * @memberof Trace\n         * @interface ILocation\n         * @property {number|null} [line] Location line\n         * @property {number|null} [column] Location column\n         */\n\n        /**\n         * Constructs a new Location.\n         * @memberof Trace\n         * @classdesc Represents a Location.\n         * @implements ILocation\n         * @constructor\n         * @param {Trace.ILocation=} [properties] Properties to set\n         */\n        function Location(properties) {\n            if (properties)\n                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * Location line.\n         * @member {number} line\n         * @memberof Trace.Location\n         * @instance\n         */\n        Location.prototype.line = 0;\n\n        /**\n         * Location column.\n         * @member {number} column\n         * @memberof Trace.Location\n         * @instance\n         */\n        Location.prototype.column = 0;\n\n        /**\n         * Creates a new Location instance using the specified properties.\n         * @function create\n         * @memberof Trace.Location\n         * @static\n         * @param {Trace.ILocation=} [properties] Properties to set\n         * @returns {Trace.Location} Location instance\n         */\n        Location.create = function create(properties) {\n            return new Location(properties);\n        };\n\n        /**\n         * Encodes the specified Location message. Does not implicitly {@link Trace.Location.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.Location\n         * @static\n         * @param {Trace.ILocation} message Location message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Location.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.line != null && Object.hasOwnProperty.call(message, \"line\"))\n                writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.line);\n            if (message.column != null && Object.hasOwnProperty.call(message, \"column\"))\n                writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.column);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified Location message, length delimited. Does not implicitly {@link Trace.Location.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.Location\n         * @static\n         * @param {Trace.ILocation} message Location message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Location.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a Location message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.Location\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.Location} Location\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Location.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.Location();\n            while (reader.pos < end) {\n                let tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.line = reader.uint32();\n                    break;\n                case 2:\n                    message.column = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a Location message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.Location\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.Location} Location\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Location.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a Location message.\n         * @function verify\n         * @memberof Trace.Location\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        Location.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            if (message.line != null && message.hasOwnProperty(\"line\"))\n                if (!$util.isInteger(message.line))\n                    return \"line: integer expected\";\n            if (message.column != null && message.hasOwnProperty(\"column\"))\n                if (!$util.isInteger(message.column))\n                    return \"column: integer expected\";\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a Location message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.Location\n         * @static\n         * @param {Trace.Location} message Location\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        Location.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            let object = {};\n            if (options.defaults) {\n                object.line = 0;\n                object.column = 0;\n            }\n            if (message.line != null && message.hasOwnProperty(\"line\"))\n                object.line = message.line;\n            if (message.column != null && message.hasOwnProperty(\"column\"))\n                object.column = message.column;\n            return object;\n        };\n\n        /**\n         * Converts this Location to JSON.\n         * @function toJSON\n         * @memberof Trace.Location\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        Location.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n        };\n\n        return Location;\n    })();\n\n    Trace.Node = (function() {\n\n        /**\n         * Properties of a Node.\n         * @memberof Trace\n         * @interface INode\n         * @property {string|null} [responseName] Node responseName\n         * @property {number|null} [index] Node index\n         * @property {string|null} [originalFieldName] Node originalFieldName\n         * @property {string|null} [type] Node type\n         * @property {string|null} [parentType] Node parentType\n         * @property {Trace.ICachePolicy|null} [cachePolicy] Node cachePolicy\n         * @property {number|null} [startTime] Node startTime\n         * @property {number|null} [endTime] Node endTime\n         * @property {Array.<Trace.IError>|null} [error] Node error\n         * @property {Array.<Trace.INode>|null} [child] Node child\n         */\n\n        /**\n         * Constructs a new Node.\n         * @memberof Trace\n         * @classdesc Represents a Node.\n         * @implements INode\n         * @constructor\n         * @param {Trace.INode=} [properties] Properties to set\n         */\n        function Node(properties) {\n            this.error = [];\n            this.child = [];\n            if (properties)\n                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * Node responseName.\n         * @member {string} responseName\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.responseName = \"\";\n\n        /**\n         * Node index.\n         * @member {number} index\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.index = 0;\n\n        /**\n         * Node originalFieldName.\n         * @member {string} originalFieldName\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.originalFieldName = \"\";\n\n        /**\n         * Node type.\n         * @member {string} type\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.type = \"\";\n\n        /**\n         * Node parentType.\n         * @member {string} parentType\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.parentType = \"\";\n\n        /**\n         * Node cachePolicy.\n         * @member {Trace.ICachePolicy|null|undefined} cachePolicy\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.cachePolicy = null;\n\n        /**\n         * Node startTime.\n         * @member {number} startTime\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.startTime = 0;\n\n        /**\n         * Node endTime.\n         * @member {number} endTime\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.endTime = 0;\n\n        /**\n         * Node error.\n         * @member {Array.<Trace.IError>} error\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.error = $util.emptyArray;\n\n        /**\n         * Node child.\n         * @member {Array.<Trace.INode>} child\n         * @memberof Trace.Node\n         * @instance\n         */\n        Node.prototype.child = $util.emptyArray;\n\n        // OneOf field names bound to virtual getters and setters\n        let $oneOfFields;\n\n        /**\n         * Node id.\n         * @member {\"responseName\"|\"index\"|undefined} id\n         * @memberof Trace.Node\n         * @instance\n         */\n        Object.defineProperty(Node.prototype, \"id\", {\n            get: $util.oneOfGetter($oneOfFields = [\"responseName\", \"index\"]),\n            set: $util.oneOfSetter($oneOfFields)\n        });\n\n        /**\n         * Creates a new Node instance using the specified properties.\n         * @function create\n         * @memberof Trace.Node\n         * @static\n         * @param {Trace.INode=} [properties] Properties to set\n         * @returns {Trace.Node} Node instance\n         */\n        Node.create = function create(properties) {\n            return new Node(properties);\n        };\n\n        /**\n         * Encodes the specified Node message. Does not implicitly {@link Trace.Node.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.Node\n         * @static\n         * @param {Trace.INode} message Node message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Node.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.responseName != null && Object.hasOwnProperty.call(message, \"responseName\"))\n                writer.uint32(/* id 1, wireType 2 =*/10).string(message.responseName);\n            if (message.index != null && Object.hasOwnProperty.call(message, \"index\"))\n                writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.index);\n            if (message.type != null && Object.hasOwnProperty.call(message, \"type\"))\n                writer.uint32(/* id 3, wireType 2 =*/26).string(message.type);\n            if (message.cachePolicy != null && Object.hasOwnProperty.call(message, \"cachePolicy\"))\n                $root.Trace.CachePolicy.encode(message.cachePolicy, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();\n            if (message.startTime != null && Object.hasOwnProperty.call(message, \"startTime\"))\n                writer.uint32(/* id 8, wireType 0 =*/64).uint64(message.startTime);\n            if (message.endTime != null && Object.hasOwnProperty.call(message, \"endTime\"))\n                writer.uint32(/* id 9, wireType 0 =*/72).uint64(message.endTime);\n            if (message.error != null && message.error.length)\n                for (let i = 0; i < message.error.length; ++i)\n                    $root.Trace.Error.encode(message.error[i], writer.uint32(/* id 11, wireType 2 =*/90).fork()).ldelim();\n            if (message.child != null && message.child.length)\n                for (let i = 0; i < message.child.length; ++i)\n                    $root.Trace.Node.encode(message.child[i], writer.uint32(/* id 12, wireType 2 =*/98).fork()).ldelim();\n            if (message.parentType != null && Object.hasOwnProperty.call(message, \"parentType\"))\n                writer.uint32(/* id 13, wireType 2 =*/106).string(message.parentType);\n            if (message.originalFieldName != null && Object.hasOwnProperty.call(message, \"originalFieldName\"))\n                writer.uint32(/* id 14, wireType 2 =*/114).string(message.originalFieldName);\n            return writer;\n        };\n\n        /**\n         * Encodes the specified Node message, length delimited. Does not implicitly {@link Trace.Node.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.Node\n         * @static\n         * @param {Trace.INode} message Node message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        Node.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a Node message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.Node\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.Node} Node\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Node.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.Node();\n            while (reader.pos < end) {\n                let tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.responseName = reader.string();\n                    break;\n                case 2:\n                    message.index = reader.uint32();\n                    break;\n                case 14:\n                    message.originalFieldName = reader.string();\n                    break;\n                case 3:\n                    message.type = reader.string();\n                    break;\n                case 13:\n                    message.parentType = reader.string();\n                    break;\n                case 5:\n                    message.cachePolicy = $root.Trace.CachePolicy.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.startTime = reader.uint64();\n                    break;\n                case 9:\n                    message.endTime = reader.uint64();\n                    break;\n                case 11:\n                    if (!(message.error && message.error.length))\n                        message.error = [];\n                    message.error.push($root.Trace.Error.decode(reader, reader.uint32()));\n                    break;\n                case 12:\n                    if (!(message.child && message.child.length))\n                        message.child = [];\n                    message.child.push($root.Trace.Node.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a Node message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.Node\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.Node} Node\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        Node.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a Node message.\n         * @function verify\n         * @memberof Trace.Node\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        Node.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            let properties = {};\n            if (message.responseName != null && message.hasOwnProperty(\"responseName\")) {\n                properties.id = 1;\n                if (!$util.isString(message.responseName))\n                    return \"responseName: string expected\";\n            }\n            if (message.index != null && message.hasOwnProperty(\"index\")) {\n                if (properties.id === 1)\n                    return \"id: multiple values\";\n                properties.id = 1;\n                if (!$util.isInteger(message.index))\n                    return \"index: integer expected\";\n            }\n            if (message.originalFieldName != null && message.hasOwnProperty(\"originalFieldName\"))\n                if (!$util.isString(message.originalFieldName))\n                    return \"originalFieldName: string expected\";\n            if (message.type != null && message.hasOwnProperty(\"type\"))\n                if (!$util.isString(message.type))\n                    return \"type: string expected\";\n            if (message.parentType != null && message.hasOwnProperty(\"parentType\"))\n                if (!$util.isString(message.parentType))\n                    return \"parentType: string expected\";\n            if (message.cachePolicy != null && message.hasOwnProperty(\"cachePolicy\")) {\n                let error = $root.Trace.CachePolicy.verify(message.cachePolicy);\n                if (error)\n                    return \"cachePolicy.\" + error;\n            }\n            if (message.startTime != null && message.hasOwnProperty(\"startTime\"))\n                if (!$util.isInteger(message.startTime) && !(message.startTime && $util.isInteger(message.startTime.low) && $util.isInteger(message.startTime.high)))\n                    return \"startTime: integer|Long expected\";\n            if (message.endTime != null && message.hasOwnProperty(\"endTime\"))\n                if (!$util.isInteger(message.endTime) && !(message.endTime && $util.isInteger(message.endTime.low) && $util.isInteger(message.endTime.high)))\n                    return \"endTime: integer|Long expected\";\n            if (message.error != null && message.hasOwnProperty(\"error\")) {\n                if (!Array.isArray(message.error))\n                    return \"error: array expected\";\n                for (let i = 0; i < message.error.length; ++i) {\n                    let error = $root.Trace.Error.verify(message.error[i]);\n                    if (error)\n                        return \"error.\" + error;\n                }\n            }\n            if (message.child != null && message.hasOwnProperty(\"child\")) {\n                if (!Array.isArray(message.child))\n                    return \"child: array expected\";\n                for (let i = 0; i < message.child.length; ++i) {\n                    let error = $root.Trace.Node.verify(message.child[i]);\n                    if (error)\n                        return \"child.\" + error;\n                }\n            }\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a Node message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.Node\n         * @static\n         * @param {Trace.Node} message Node\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        Node.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            let object = {};\n            if (options.arrays || options.defaults) {\n                object.error = [];\n                object.child = [];\n            }\n            if (options.defaults) {\n                object.type = \"\";\n                object.cachePolicy = null;\n                object.startTime = 0;\n                object.endTime = 0;\n                object.parentType = \"\";\n                object.originalFieldName = \"\";\n            }\n            if (message.responseName != null && message.hasOwnProperty(\"responseName\")) {\n                object.responseName = message.responseName;\n                if (options.oneofs)\n                    object.id = \"responseName\";\n            }\n            if (message.index != null && message.hasOwnProperty(\"index\")) {\n                object.index = message.index;\n                if (options.oneofs)\n                    object.id = \"index\";\n            }\n            if (message.type != null && message.hasOwnProperty(\"type\"))\n                object.type = message.type;\n            if (message.cachePolicy != null && message.hasOwnProperty(\"cachePolicy\"))\n                object.cachePolicy = $root.Trace.CachePolicy.toObject(message.cachePolicy, options);\n            if (message.startTime != null && message.hasOwnProperty(\"startTime\"))\n                if (typeof message.startTime === \"number\")\n                    object.startTime = options.longs === String ? String(message.startTime) : message.startTime;\n                else\n                    object.startTime = options.longs === String ? $util.Long.prototype.toString.call(message.startTime) : options.longs === Number ? new $util.LongBits(message.startTime.low >>> 0, message.startTime.high >>> 0).toNumber(true) : message.startTime;\n            if (message.endTime != null && message.hasOwnProperty(\"endTime\"))\n                if (typeof message.endTime === \"number\")\n                    object.endTime = options.longs === String ? String(message.endTime) : message.endTime;\n                else\n                    object.endTime = options.longs === String ? $util.Long.prototype.toString.call(message.endTime) : options.longs === Number ? new $util.LongBits(message.endTime.low >>> 0, message.endTime.high >>> 0).toNumber(true) : message.endTime;\n            if (message.error && message.error.length) {\n                object.error = [];\n                for (let j = 0; j < message.error.length; ++j)\n                    object.error[j] = $root.Trace.Error.toObject(message.error[j], options);\n            }\n            if (message.child && message.child.length) {\n                object.child = [];\n                for (let j = 0; j < message.child.length; ++j)\n                    object.child[j] = $root.Trace.Node.toObject(message.child[j], options);\n            }\n            if (message.parentType != null && message.hasOwnProperty(\"parentType\"))\n                object.parentType = message.parentType;\n            if (message.originalFieldName != null && message.hasOwnProperty(\"originalFieldName\"))\n                object.originalFieldName = message.originalFieldName;\n            return object;\n        };\n\n        /**\n         * Converts this Node to JSON.\n         * @function toJSON\n         * @memberof Trace.Node\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        Node.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n        };\n\n        return Node;\n    })();\n\n    Trace.QueryPlanNode = (function() {\n\n        /**\n         * Properties of a QueryPlanNode.\n         * @memberof Trace\n         * @interface IQueryPlanNode\n         * @property {Trace.QueryPlanNode.ISequenceNode|null} [sequence] QueryPlanNode sequence\n         * @property {Trace.QueryPlanNode.IParallelNode|null} [parallel] QueryPlanNode parallel\n         * @property {Trace.QueryPlanNode.IFetchNode|null} [fetch] QueryPlanNode fetch\n         * @property {Trace.QueryPlanNode.IFlattenNode|null} [flatten] QueryPlanNode flatten\n         * @property {Trace.QueryPlanNode.IDeferNode|null} [defer] QueryPlanNode defer\n         * @property {Trace.QueryPlanNode.IConditionNode|null} [condition] QueryPlanNode condition\n         */\n\n        /**\n         * Constructs a new QueryPlanNode.\n         * @memberof Trace\n         * @classdesc Represents a QueryPlanNode.\n         * @implements IQueryPlanNode\n         * @constructor\n         * @param {Trace.IQueryPlanNode=} [properties] Properties to set\n         */\n        function QueryPlanNode(properties) {\n            if (properties)\n                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                    if (properties[keys[i]] != null)\n                        this[keys[i]] = properties[keys[i]];\n        }\n\n        /**\n         * QueryPlanNode sequence.\n         * @member {Trace.QueryPlanNode.ISequenceNode|null|undefined} sequence\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.sequence = null;\n\n        /**\n         * QueryPlanNode parallel.\n         * @member {Trace.QueryPlanNode.IParallelNode|null|undefined} parallel\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.parallel = null;\n\n        /**\n         * QueryPlanNode fetch.\n         * @member {Trace.QueryPlanNode.IFetchNode|null|undefined} fetch\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.fetch = null;\n\n        /**\n         * QueryPlanNode flatten.\n         * @member {Trace.QueryPlanNode.IFlattenNode|null|undefined} flatten\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.flatten = null;\n\n        /**\n         * QueryPlanNode defer.\n         * @member {Trace.QueryPlanNode.IDeferNode|null|undefined} defer\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.defer = null;\n\n        /**\n         * QueryPlanNode condition.\n         * @member {Trace.QueryPlanNode.IConditionNode|null|undefined} condition\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        QueryPlanNode.prototype.condition = null;\n\n        // OneOf field names bound to virtual getters and setters\n        let $oneOfFields;\n\n        /**\n         * QueryPlanNode node.\n         * @member {\"sequence\"|\"parallel\"|\"fetch\"|\"flatten\"|\"defer\"|\"condition\"|undefined} node\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         */\n        Object.defineProperty(QueryPlanNode.prototype, \"node\", {\n            get: $util.oneOfGetter($oneOfFields = [\"sequence\", \"parallel\", \"fetch\", \"flatten\", \"defer\", \"condition\"]),\n            set: $util.oneOfSetter($oneOfFields)\n        });\n\n        /**\n         * Creates a new QueryPlanNode instance using the specified properties.\n         * @function create\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Trace.IQueryPlanNode=} [properties] Properties to set\n         * @returns {Trace.QueryPlanNode} QueryPlanNode instance\n         */\n        QueryPlanNode.create = function create(properties) {\n            return new QueryPlanNode(properties);\n        };\n\n        /**\n         * Encodes the specified QueryPlanNode message. Does not implicitly {@link Trace.QueryPlanNode.verify|verify} messages.\n         * @function encode\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Trace.IQueryPlanNode} message QueryPlanNode message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        QueryPlanNode.encode = function encode(message, writer) {\n            if (!writer)\n                writer = $Writer.create();\n            if (message.sequence != null && Object.hasOwnProperty.call(message, \"sequence\"))\n                $root.Trace.QueryPlanNode.SequenceNode.encode(message.sequence, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n            if (message.parallel != null && Object.hasOwnProperty.call(message, \"parallel\"))\n                $root.Trace.QueryPlanNode.ParallelNode.encode(message.parallel, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n            if (message.fetch != null && Object.hasOwnProperty.call(message, \"fetch\"))\n                $root.Trace.QueryPlanNode.FetchNode.encode(message.fetch, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n            if (message.flatten != null && Object.hasOwnProperty.call(message, \"flatten\"))\n                $root.Trace.QueryPlanNode.FlattenNode.encode(message.flatten, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();\n            if (message.defer != null && Object.hasOwnProperty.call(message, \"defer\"))\n                $root.Trace.QueryPlanNode.DeferNode.encode(message.defer, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();\n            if (message.condition != null && Object.hasOwnProperty.call(message, \"condition\"))\n                $root.Trace.QueryPlanNode.ConditionNode.encode(message.condition, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();\n            return writer;\n        };\n\n        /**\n         * Encodes the specified QueryPlanNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.verify|verify} messages.\n         * @function encodeDelimited\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Trace.IQueryPlanNode} message QueryPlanNode message or plain object to encode\n         * @param {$protobuf.Writer} [writer] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        QueryPlanNode.encodeDelimited = function encodeDelimited(message, writer) {\n            return this.encode(message, writer).ldelim();\n        };\n\n        /**\n         * Decodes a QueryPlanNode message from the specified reader or buffer.\n         * @function decode\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @param {number} [length] Message length if known beforehand\n         * @returns {Trace.QueryPlanNode} QueryPlanNode\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        QueryPlanNode.decode = function decode(reader, length) {\n            if (!(reader instanceof $Reader))\n                reader = $Reader.create(reader);\n            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode();\n            while (reader.pos < end) {\n                let tag = reader.uint32();\n                switch (tag >>> 3) {\n                case 1:\n                    message.sequence = $root.Trace.QueryPlanNode.SequenceNode.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.parallel = $root.Trace.QueryPlanNode.ParallelNode.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.fetch = $root.Trace.QueryPlanNode.FetchNode.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.flatten = $root.Trace.QueryPlanNode.FlattenNode.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.defer = $root.Trace.QueryPlanNode.DeferNode.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.condition = $root.Trace.QueryPlanNode.ConditionNode.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n                }\n            }\n            return message;\n        };\n\n        /**\n         * Decodes a QueryPlanNode message from the specified reader or buffer, length delimited.\n         * @function decodeDelimited\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n         * @returns {Trace.QueryPlanNode} QueryPlanNode\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        QueryPlanNode.decodeDelimited = function decodeDelimited(reader) {\n            if (!(reader instanceof $Reader))\n                reader = new $Reader(reader);\n            return this.decode(reader, reader.uint32());\n        };\n\n        /**\n         * Verifies a QueryPlanNode message.\n         * @function verify\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Object.<string,*>} message Plain object to verify\n         * @returns {string|null} `null` if valid, otherwise the reason why it is not\n         */\n        QueryPlanNode.verify = function verify(message) {\n            if (typeof message !== \"object\" || message === null)\n                return \"object expected\";\n            let properties = {};\n            if (message.sequence != null && message.hasOwnProperty(\"sequence\")) {\n                properties.node = 1;\n                {\n                    let error = $root.Trace.QueryPlanNode.SequenceNode.verify(message.sequence);\n                    if (error)\n                        return \"sequence.\" + error;\n                }\n            }\n            if (message.parallel != null && message.hasOwnProperty(\"parallel\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    let error = $root.Trace.QueryPlanNode.ParallelNode.verify(message.parallel);\n                    if (error)\n                        return \"parallel.\" + error;\n                }\n            }\n            if (message.fetch != null && message.hasOwnProperty(\"fetch\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    let error = $root.Trace.QueryPlanNode.FetchNode.verify(message.fetch);\n                    if (error)\n                        return \"fetch.\" + error;\n                }\n            }\n            if (message.flatten != null && message.hasOwnProperty(\"flatten\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    let error = $root.Trace.QueryPlanNode.FlattenNode.verify(message.flatten);\n                    if (error)\n                        return \"flatten.\" + error;\n                }\n            }\n            if (message.defer != null && message.hasOwnProperty(\"defer\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    let error = $root.Trace.QueryPlanNode.DeferNode.verify(message.defer);\n                    if (error)\n                        return \"defer.\" + error;\n                }\n            }\n            if (message.condition != null && message.hasOwnProperty(\"condition\")) {\n                if (properties.node === 1)\n                    return \"node: multiple values\";\n                properties.node = 1;\n                {\n                    let error = $root.Trace.QueryPlanNode.ConditionNode.verify(message.condition);\n                    if (error)\n                        return \"condition.\" + error;\n                }\n            }\n            return null;\n        };\n\n        /**\n         * Creates a plain object from a QueryPlanNode message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof Trace.QueryPlanNode\n         * @static\n         * @param {Trace.QueryPlanNode} message QueryPlanNode\n         * @param {$protobuf.IConversionOptions} [options] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        QueryPlanNode.toObject = function toObject(message, options) {\n            if (!options)\n                options = {};\n            let object = {};\n            if (message.sequence != null && message.hasOwnProperty(\"sequence\")) {\n                object.sequence = $root.Trace.QueryPlanNode.SequenceNode.toObject(message.sequence, options);\n                if (options.oneofs)\n                    object.node = \"sequence\";\n            }\n            if (message.parallel != null && message.hasOwnProperty(\"parallel\")) {\n                object.parallel = $root.Trace.QueryPlanNode.ParallelNode.toObject(message.parallel, options);\n                if (options.oneofs)\n                    object.node = \"parallel\";\n            }\n            if (message.fetch != null && message.hasOwnProperty(\"fetch\")) {\n                object.fetch = $root.Trace.QueryPlanNode.FetchNode.toObject(message.fetch, options);\n                if (options.oneofs)\n                    object.node = \"fetch\";\n            }\n            if (message.flatten != null && message.hasOwnProperty(\"flatten\")) {\n                object.flatten = $root.Trace.QueryPlanNode.FlattenNode.toObject(message.flatten, options);\n                if (options.oneofs)\n                    object.node = \"flatten\";\n            }\n            if (message.defer != null && message.hasOwnProperty(\"defer\")) {\n                object.defer = $root.Trace.QueryPlanNode.DeferNode.toObject(message.defer, options);\n                if (options.oneofs)\n                    object.node = \"defer\";\n            }\n            if (message.condition != null && message.hasOwnProperty(\"condition\")) {\n                object.condition = $root.Trace.QueryPlanNode.ConditionNode.toObject(message.condition, options);\n                if (options.oneofs)\n                    object.node = \"condition\";\n            }\n            return object;\n        };\n\n        /**\n         * Converts this QueryPlanNode to JSON.\n         * @function toJSON\n         * @memberof Trace.QueryPlanNode\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        QueryPlanNode.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n        };\n\n        QueryPlanNode.SequenceNode = (function() {\n\n            /**\n             * Properties of a SequenceNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface ISequenceNode\n             * @property {Array.<Trace.IQueryPlanNode>|null} [nodes] SequenceNode nodes\n             */\n\n            /**\n             * Constructs a new SequenceNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a SequenceNode.\n             * @implements ISequenceNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.ISequenceNode=} [properties] Properties to set\n             */\n            function SequenceNode(properties) {\n                this.nodes = [];\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * SequenceNode nodes.\n             * @member {Array.<Trace.IQueryPlanNode>} nodes\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @instance\n             */\n            SequenceNode.prototype.nodes = $util.emptyArray;\n\n            /**\n             * Creates a new SequenceNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Trace.QueryPlanNode.ISequenceNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.SequenceNode} SequenceNode instance\n             */\n            SequenceNode.create = function create(properties) {\n                return new SequenceNode(properties);\n            };\n\n            /**\n             * Encodes the specified SequenceNode message. Does not implicitly {@link Trace.QueryPlanNode.SequenceNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Trace.QueryPlanNode.ISequenceNode} message SequenceNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            SequenceNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.nodes != null && message.nodes.length)\n                    for (let i = 0; i < message.nodes.length; ++i)\n                        $root.Trace.QueryPlanNode.encode(message.nodes[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified SequenceNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.SequenceNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Trace.QueryPlanNode.ISequenceNode} message SequenceNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            SequenceNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a SequenceNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.SequenceNode} SequenceNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            SequenceNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.SequenceNode();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.nodes && message.nodes.length))\n                            message.nodes = [];\n                        message.nodes.push($root.Trace.QueryPlanNode.decode(reader, reader.uint32()));\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a SequenceNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.SequenceNode} SequenceNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            SequenceNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a SequenceNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            SequenceNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.nodes != null && message.hasOwnProperty(\"nodes\")) {\n                    if (!Array.isArray(message.nodes))\n                        return \"nodes: array expected\";\n                    for (let i = 0; i < message.nodes.length; ++i) {\n                        let error = $root.Trace.QueryPlanNode.verify(message.nodes[i]);\n                        if (error)\n                            return \"nodes.\" + error;\n                    }\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a SequenceNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @static\n             * @param {Trace.QueryPlanNode.SequenceNode} message SequenceNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            SequenceNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.arrays || options.defaults)\n                    object.nodes = [];\n                if (message.nodes && message.nodes.length) {\n                    object.nodes = [];\n                    for (let j = 0; j < message.nodes.length; ++j)\n                        object.nodes[j] = $root.Trace.QueryPlanNode.toObject(message.nodes[j], options);\n                }\n                return object;\n            };\n\n            /**\n             * Converts this SequenceNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.SequenceNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            SequenceNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return SequenceNode;\n        })();\n\n        QueryPlanNode.ParallelNode = (function() {\n\n            /**\n             * Properties of a ParallelNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IParallelNode\n             * @property {Array.<Trace.IQueryPlanNode>|null} [nodes] ParallelNode nodes\n             */\n\n            /**\n             * Constructs a new ParallelNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a ParallelNode.\n             * @implements IParallelNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IParallelNode=} [properties] Properties to set\n             */\n            function ParallelNode(properties) {\n                this.nodes = [];\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * ParallelNode nodes.\n             * @member {Array.<Trace.IQueryPlanNode>} nodes\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @instance\n             */\n            ParallelNode.prototype.nodes = $util.emptyArray;\n\n            /**\n             * Creates a new ParallelNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Trace.QueryPlanNode.IParallelNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.ParallelNode} ParallelNode instance\n             */\n            ParallelNode.create = function create(properties) {\n                return new ParallelNode(properties);\n            };\n\n            /**\n             * Encodes the specified ParallelNode message. Does not implicitly {@link Trace.QueryPlanNode.ParallelNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Trace.QueryPlanNode.IParallelNode} message ParallelNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ParallelNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.nodes != null && message.nodes.length)\n                    for (let i = 0; i < message.nodes.length; ++i)\n                        $root.Trace.QueryPlanNode.encode(message.nodes[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified ParallelNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.ParallelNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Trace.QueryPlanNode.IParallelNode} message ParallelNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ParallelNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a ParallelNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.ParallelNode} ParallelNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ParallelNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.ParallelNode();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.nodes && message.nodes.length))\n                            message.nodes = [];\n                        message.nodes.push($root.Trace.QueryPlanNode.decode(reader, reader.uint32()));\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a ParallelNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.ParallelNode} ParallelNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ParallelNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a ParallelNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            ParallelNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.nodes != null && message.hasOwnProperty(\"nodes\")) {\n                    if (!Array.isArray(message.nodes))\n                        return \"nodes: array expected\";\n                    for (let i = 0; i < message.nodes.length; ++i) {\n                        let error = $root.Trace.QueryPlanNode.verify(message.nodes[i]);\n                        if (error)\n                            return \"nodes.\" + error;\n                    }\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a ParallelNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @static\n             * @param {Trace.QueryPlanNode.ParallelNode} message ParallelNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ParallelNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.arrays || options.defaults)\n                    object.nodes = [];\n                if (message.nodes && message.nodes.length) {\n                    object.nodes = [];\n                    for (let j = 0; j < message.nodes.length; ++j)\n                        object.nodes[j] = $root.Trace.QueryPlanNode.toObject(message.nodes[j], options);\n                }\n                return object;\n            };\n\n            /**\n             * Converts this ParallelNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.ParallelNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ParallelNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return ParallelNode;\n        })();\n\n        QueryPlanNode.FetchNode = (function() {\n\n            /**\n             * Properties of a FetchNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IFetchNode\n             * @property {string|null} [serviceName] FetchNode serviceName\n             * @property {boolean|null} [traceParsingFailed] FetchNode traceParsingFailed\n             * @property {ITrace|null} [trace] FetchNode trace\n             * @property {number|null} [sentTimeOffset] FetchNode sentTimeOffset\n             * @property {google.protobuf.ITimestamp|null} [sentTime] FetchNode sentTime\n             * @property {google.protobuf.ITimestamp|null} [receivedTime] FetchNode receivedTime\n             */\n\n            /**\n             * Constructs a new FetchNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a FetchNode.\n             * @implements IFetchNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IFetchNode=} [properties] Properties to set\n             */\n            function FetchNode(properties) {\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * FetchNode serviceName.\n             * @member {string} serviceName\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.serviceName = \"\";\n\n            /**\n             * FetchNode traceParsingFailed.\n             * @member {boolean} traceParsingFailed\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.traceParsingFailed = false;\n\n            /**\n             * FetchNode trace.\n             * @member {ITrace|null|undefined} trace\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.trace = null;\n\n            /**\n             * FetchNode sentTimeOffset.\n             * @member {number} sentTimeOffset\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.sentTimeOffset = 0;\n\n            /**\n             * FetchNode sentTime.\n             * @member {google.protobuf.ITimestamp|null|undefined} sentTime\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.sentTime = null;\n\n            /**\n             * FetchNode receivedTime.\n             * @member {google.protobuf.ITimestamp|null|undefined} receivedTime\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             */\n            FetchNode.prototype.receivedTime = null;\n\n            /**\n             * Creates a new FetchNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFetchNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.FetchNode} FetchNode instance\n             */\n            FetchNode.create = function create(properties) {\n                return new FetchNode(properties);\n            };\n\n            /**\n             * Encodes the specified FetchNode message. Does not implicitly {@link Trace.QueryPlanNode.FetchNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFetchNode} message FetchNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            FetchNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.serviceName != null && Object.hasOwnProperty.call(message, \"serviceName\"))\n                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.serviceName);\n                if (message.traceParsingFailed != null && Object.hasOwnProperty.call(message, \"traceParsingFailed\"))\n                    writer.uint32(/* id 2, wireType 0 =*/16).bool(message.traceParsingFailed);\n                if (message.trace != null && Object.hasOwnProperty.call(message, \"trace\"))\n                    $root.Trace.encode(message.trace, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n                if (message.sentTimeOffset != null && Object.hasOwnProperty.call(message, \"sentTimeOffset\"))\n                    writer.uint32(/* id 4, wireType 0 =*/32).uint64(message.sentTimeOffset);\n                if (message.sentTime != null && Object.hasOwnProperty.call(message, \"sentTime\"))\n                    $root.google.protobuf.Timestamp.encode(message.sentTime, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();\n                if (message.receivedTime != null && Object.hasOwnProperty.call(message, \"receivedTime\"))\n                    $root.google.protobuf.Timestamp.encode(message.receivedTime, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified FetchNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.FetchNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFetchNode} message FetchNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            FetchNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a FetchNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.FetchNode} FetchNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            FetchNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.FetchNode();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.serviceName = reader.string();\n                        break;\n                    case 2:\n                        message.traceParsingFailed = reader.bool();\n                        break;\n                    case 3:\n                        message.trace = $root.Trace.decode(reader, reader.uint32());\n                        break;\n                    case 4:\n                        message.sentTimeOffset = reader.uint64();\n                        break;\n                    case 5:\n                        message.sentTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                        break;\n                    case 6:\n                        message.receivedTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a FetchNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.FetchNode} FetchNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            FetchNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a FetchNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            FetchNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.serviceName != null && message.hasOwnProperty(\"serviceName\"))\n                    if (!$util.isString(message.serviceName))\n                        return \"serviceName: string expected\";\n                if (message.traceParsingFailed != null && message.hasOwnProperty(\"traceParsingFailed\"))\n                    if (typeof message.traceParsingFailed !== \"boolean\")\n                        return \"traceParsingFailed: boolean expected\";\n                if (message.trace != null && message.hasOwnProperty(\"trace\")) {\n                    let error = $root.Trace.verify(message.trace);\n                    if (error)\n                        return \"trace.\" + error;\n                }\n                if (message.sentTimeOffset != null && message.hasOwnProperty(\"sentTimeOffset\"))\n                    if (!$util.isInteger(message.sentTimeOffset) && !(message.sentTimeOffset && $util.isInteger(message.sentTimeOffset.low) && $util.isInteger(message.sentTimeOffset.high)))\n                        return \"sentTimeOffset: integer|Long expected\";\n                if (message.sentTime != null && message.hasOwnProperty(\"sentTime\")) {\n                    let error = $root.google.protobuf.Timestamp.verify(message.sentTime);\n                    if (error)\n                        return \"sentTime.\" + error;\n                }\n                if (message.receivedTime != null && message.hasOwnProperty(\"receivedTime\")) {\n                    let error = $root.google.protobuf.Timestamp.verify(message.receivedTime);\n                    if (error)\n                        return \"receivedTime.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a FetchNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @static\n             * @param {Trace.QueryPlanNode.FetchNode} message FetchNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            FetchNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.defaults) {\n                    object.serviceName = \"\";\n                    object.traceParsingFailed = false;\n                    object.trace = null;\n                    object.sentTimeOffset = 0;\n                    object.sentTime = null;\n                    object.receivedTime = null;\n                }\n                if (message.serviceName != null && message.hasOwnProperty(\"serviceName\"))\n                    object.serviceName = message.serviceName;\n                if (message.traceParsingFailed != null && message.hasOwnProperty(\"traceParsingFailed\"))\n                    object.traceParsingFailed = message.traceParsingFailed;\n                if (message.trace != null && message.hasOwnProperty(\"trace\"))\n                    object.trace = $root.Trace.toObject(message.trace, options);\n                if (message.sentTimeOffset != null && message.hasOwnProperty(\"sentTimeOffset\"))\n                    if (typeof message.sentTimeOffset === \"number\")\n                        object.sentTimeOffset = options.longs === String ? String(message.sentTimeOffset) : message.sentTimeOffset;\n                    else\n                        object.sentTimeOffset = options.longs === String ? $util.Long.prototype.toString.call(message.sentTimeOffset) : options.longs === Number ? new $util.LongBits(message.sentTimeOffset.low >>> 0, message.sentTimeOffset.high >>> 0).toNumber(true) : message.sentTimeOffset;\n                if (message.sentTime != null && message.hasOwnProperty(\"sentTime\"))\n                    object.sentTime = $root.google.protobuf.Timestamp.toObject(message.sentTime, options);\n                if (message.receivedTime != null && message.hasOwnProperty(\"receivedTime\"))\n                    object.receivedTime = $root.google.protobuf.Timestamp.toObject(message.receivedTime, options);\n                return object;\n            };\n\n            /**\n             * Converts this FetchNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.FetchNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            FetchNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return FetchNode;\n        })();\n\n        QueryPlanNode.FlattenNode = (function() {\n\n            /**\n             * Properties of a FlattenNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IFlattenNode\n             * @property {Array.<Trace.QueryPlanNode.IResponsePathElement>|null} [responsePath] FlattenNode responsePath\n             * @property {Trace.IQueryPlanNode|null} [node] FlattenNode node\n             */\n\n            /**\n             * Constructs a new FlattenNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a FlattenNode.\n             * @implements IFlattenNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IFlattenNode=} [properties] Properties to set\n             */\n            function FlattenNode(properties) {\n                this.responsePath = [];\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * FlattenNode responsePath.\n             * @member {Array.<Trace.QueryPlanNode.IResponsePathElement>} responsePath\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @instance\n             */\n            FlattenNode.prototype.responsePath = $util.emptyArray;\n\n            /**\n             * FlattenNode node.\n             * @member {Trace.IQueryPlanNode|null|undefined} node\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @instance\n             */\n            FlattenNode.prototype.node = null;\n\n            /**\n             * Creates a new FlattenNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFlattenNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.FlattenNode} FlattenNode instance\n             */\n            FlattenNode.create = function create(properties) {\n                return new FlattenNode(properties);\n            };\n\n            /**\n             * Encodes the specified FlattenNode message. Does not implicitly {@link Trace.QueryPlanNode.FlattenNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFlattenNode} message FlattenNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            FlattenNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.responsePath != null && message.responsePath.length)\n                    for (let i = 0; i < message.responsePath.length; ++i)\n                        $root.Trace.QueryPlanNode.ResponsePathElement.encode(message.responsePath[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                if (message.node != null && Object.hasOwnProperty.call(message, \"node\"))\n                    $root.Trace.QueryPlanNode.encode(message.node, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified FlattenNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.FlattenNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Trace.QueryPlanNode.IFlattenNode} message FlattenNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            FlattenNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a FlattenNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.FlattenNode} FlattenNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            FlattenNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.FlattenNode();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.responsePath && message.responsePath.length))\n                            message.responsePath = [];\n                        message.responsePath.push($root.Trace.QueryPlanNode.ResponsePathElement.decode(reader, reader.uint32()));\n                        break;\n                    case 2:\n                        message.node = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a FlattenNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.FlattenNode} FlattenNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            FlattenNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a FlattenNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            FlattenNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.responsePath != null && message.hasOwnProperty(\"responsePath\")) {\n                    if (!Array.isArray(message.responsePath))\n                        return \"responsePath: array expected\";\n                    for (let i = 0; i < message.responsePath.length; ++i) {\n                        let error = $root.Trace.QueryPlanNode.ResponsePathElement.verify(message.responsePath[i]);\n                        if (error)\n                            return \"responsePath.\" + error;\n                    }\n                }\n                if (message.node != null && message.hasOwnProperty(\"node\")) {\n                    let error = $root.Trace.QueryPlanNode.verify(message.node);\n                    if (error)\n                        return \"node.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a FlattenNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @static\n             * @param {Trace.QueryPlanNode.FlattenNode} message FlattenNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            FlattenNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.arrays || options.defaults)\n                    object.responsePath = [];\n                if (options.defaults)\n                    object.node = null;\n                if (message.responsePath && message.responsePath.length) {\n                    object.responsePath = [];\n                    for (let j = 0; j < message.responsePath.length; ++j)\n                        object.responsePath[j] = $root.Trace.QueryPlanNode.ResponsePathElement.toObject(message.responsePath[j], options);\n                }\n                if (message.node != null && message.hasOwnProperty(\"node\"))\n                    object.node = $root.Trace.QueryPlanNode.toObject(message.node, options);\n                return object;\n            };\n\n            /**\n             * Converts this FlattenNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.FlattenNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            FlattenNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return FlattenNode;\n        })();\n\n        QueryPlanNode.DeferNode = (function() {\n\n            /**\n             * Properties of a DeferNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IDeferNode\n             * @property {Trace.QueryPlanNode.IDeferNodePrimary|null} [primary] DeferNode primary\n             * @property {Array.<Trace.QueryPlanNode.IDeferredNode>|null} [deferred] DeferNode deferred\n             */\n\n            /**\n             * Constructs a new DeferNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a DeferNode.\n             * @implements IDeferNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IDeferNode=} [properties] Properties to set\n             */\n            function DeferNode(properties) {\n                this.deferred = [];\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * DeferNode primary.\n             * @member {Trace.QueryPlanNode.IDeferNodePrimary|null|undefined} primary\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @instance\n             */\n            DeferNode.prototype.primary = null;\n\n            /**\n             * DeferNode deferred.\n             * @member {Array.<Trace.QueryPlanNode.IDeferredNode>} deferred\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @instance\n             */\n            DeferNode.prototype.deferred = $util.emptyArray;\n\n            /**\n             * Creates a new DeferNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.DeferNode} DeferNode instance\n             */\n            DeferNode.create = function create(properties) {\n                return new DeferNode(properties);\n            };\n\n            /**\n             * Encodes the specified DeferNode message. Does not implicitly {@link Trace.QueryPlanNode.DeferNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNode} message DeferNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.primary != null && Object.hasOwnProperty.call(message, \"primary\"))\n                    $root.Trace.QueryPlanNode.DeferNodePrimary.encode(message.primary, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                if (message.deferred != null && message.deferred.length)\n                    for (let i = 0; i < message.deferred.length; ++i)\n                        $root.Trace.QueryPlanNode.DeferredNode.encode(message.deferred[i], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified DeferNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.DeferNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNode} message DeferNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a DeferNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.DeferNode} DeferNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.DeferNode();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.primary = $root.Trace.QueryPlanNode.DeferNodePrimary.decode(reader, reader.uint32());\n                        break;\n                    case 2:\n                        if (!(message.deferred && message.deferred.length))\n                            message.deferred = [];\n                        message.deferred.push($root.Trace.QueryPlanNode.DeferredNode.decode(reader, reader.uint32()));\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a DeferNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.DeferNode} DeferNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a DeferNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            DeferNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.primary != null && message.hasOwnProperty(\"primary\")) {\n                    let error = $root.Trace.QueryPlanNode.DeferNodePrimary.verify(message.primary);\n                    if (error)\n                        return \"primary.\" + error;\n                }\n                if (message.deferred != null && message.hasOwnProperty(\"deferred\")) {\n                    if (!Array.isArray(message.deferred))\n                        return \"deferred: array expected\";\n                    for (let i = 0; i < message.deferred.length; ++i) {\n                        let error = $root.Trace.QueryPlanNode.DeferredNode.verify(message.deferred[i]);\n                        if (error)\n                            return \"deferred.\" + error;\n                    }\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a DeferNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @static\n             * @param {Trace.QueryPlanNode.DeferNode} message DeferNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            DeferNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.arrays || options.defaults)\n                    object.deferred = [];\n                if (options.defaults)\n                    object.primary = null;\n                if (message.primary != null && message.hasOwnProperty(\"primary\"))\n                    object.primary = $root.Trace.QueryPlanNode.DeferNodePrimary.toObject(message.primary, options);\n                if (message.deferred && message.deferred.length) {\n                    object.deferred = [];\n                    for (let j = 0; j < message.deferred.length; ++j)\n                        object.deferred[j] = $root.Trace.QueryPlanNode.DeferredNode.toObject(message.deferred[j], options);\n                }\n                return object;\n            };\n\n            /**\n             * Converts this DeferNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.DeferNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            DeferNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return DeferNode;\n        })();\n\n        QueryPlanNode.ConditionNode = (function() {\n\n            /**\n             * Properties of a ConditionNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IConditionNode\n             * @property {string|null} [condition] ConditionNode condition\n             * @property {Trace.IQueryPlanNode|null} [ifClause] ConditionNode ifClause\n             * @property {Trace.IQueryPlanNode|null} [elseClause] ConditionNode elseClause\n             */\n\n            /**\n             * Constructs a new ConditionNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a ConditionNode.\n             * @implements IConditionNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IConditionNode=} [properties] Properties to set\n             */\n            function ConditionNode(properties) {\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * ConditionNode condition.\n             * @member {string} condition\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @instance\n             */\n            ConditionNode.prototype.condition = \"\";\n\n            /**\n             * ConditionNode ifClause.\n             * @member {Trace.IQueryPlanNode|null|undefined} ifClause\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @instance\n             */\n            ConditionNode.prototype.ifClause = null;\n\n            /**\n             * ConditionNode elseClause.\n             * @member {Trace.IQueryPlanNode|null|undefined} elseClause\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @instance\n             */\n            ConditionNode.prototype.elseClause = null;\n\n            /**\n             * Creates a new ConditionNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Trace.QueryPlanNode.IConditionNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.ConditionNode} ConditionNode instance\n             */\n            ConditionNode.create = function create(properties) {\n                return new ConditionNode(properties);\n            };\n\n            /**\n             * Encodes the specified ConditionNode message. Does not implicitly {@link Trace.QueryPlanNode.ConditionNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Trace.QueryPlanNode.IConditionNode} message ConditionNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ConditionNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.condition != null && Object.hasOwnProperty.call(message, \"condition\"))\n                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.condition);\n                if (message.ifClause != null && Object.hasOwnProperty.call(message, \"ifClause\"))\n                    $root.Trace.QueryPlanNode.encode(message.ifClause, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n                if (message.elseClause != null && Object.hasOwnProperty.call(message, \"elseClause\"))\n                    $root.Trace.QueryPlanNode.encode(message.elseClause, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified ConditionNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.ConditionNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Trace.QueryPlanNode.IConditionNode} message ConditionNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ConditionNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a ConditionNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.ConditionNode} ConditionNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ConditionNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.ConditionNode();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.condition = reader.string();\n                        break;\n                    case 2:\n                        message.ifClause = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    case 3:\n                        message.elseClause = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a ConditionNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.ConditionNode} ConditionNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ConditionNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a ConditionNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            ConditionNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.condition != null && message.hasOwnProperty(\"condition\"))\n                    if (!$util.isString(message.condition))\n                        return \"condition: string expected\";\n                if (message.ifClause != null && message.hasOwnProperty(\"ifClause\")) {\n                    let error = $root.Trace.QueryPlanNode.verify(message.ifClause);\n                    if (error)\n                        return \"ifClause.\" + error;\n                }\n                if (message.elseClause != null && message.hasOwnProperty(\"elseClause\")) {\n                    let error = $root.Trace.QueryPlanNode.verify(message.elseClause);\n                    if (error)\n                        return \"elseClause.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a ConditionNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @static\n             * @param {Trace.QueryPlanNode.ConditionNode} message ConditionNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ConditionNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.defaults) {\n                    object.condition = \"\";\n                    object.ifClause = null;\n                    object.elseClause = null;\n                }\n                if (message.condition != null && message.hasOwnProperty(\"condition\"))\n                    object.condition = message.condition;\n                if (message.ifClause != null && message.hasOwnProperty(\"ifClause\"))\n                    object.ifClause = $root.Trace.QueryPlanNode.toObject(message.ifClause, options);\n                if (message.elseClause != null && message.hasOwnProperty(\"elseClause\"))\n                    object.elseClause = $root.Trace.QueryPlanNode.toObject(message.elseClause, options);\n                return object;\n            };\n\n            /**\n             * Converts this ConditionNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.ConditionNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ConditionNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return ConditionNode;\n        })();\n\n        QueryPlanNode.DeferNodePrimary = (function() {\n\n            /**\n             * Properties of a DeferNodePrimary.\n             * @memberof Trace.QueryPlanNode\n             * @interface IDeferNodePrimary\n             * @property {Trace.IQueryPlanNode|null} [node] DeferNodePrimary node\n             */\n\n            /**\n             * Constructs a new DeferNodePrimary.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a DeferNodePrimary.\n             * @implements IDeferNodePrimary\n             * @constructor\n             * @param {Trace.QueryPlanNode.IDeferNodePrimary=} [properties] Properties to set\n             */\n            function DeferNodePrimary(properties) {\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * DeferNodePrimary node.\n             * @member {Trace.IQueryPlanNode|null|undefined} node\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @instance\n             */\n            DeferNodePrimary.prototype.node = null;\n\n            /**\n             * Creates a new DeferNodePrimary instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNodePrimary=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.DeferNodePrimary} DeferNodePrimary instance\n             */\n            DeferNodePrimary.create = function create(properties) {\n                return new DeferNodePrimary(properties);\n            };\n\n            /**\n             * Encodes the specified DeferNodePrimary message. Does not implicitly {@link Trace.QueryPlanNode.DeferNodePrimary.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNodePrimary} message DeferNodePrimary message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferNodePrimary.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.node != null && Object.hasOwnProperty.call(message, \"node\"))\n                    $root.Trace.QueryPlanNode.encode(message.node, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified DeferNodePrimary message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.DeferNodePrimary.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferNodePrimary} message DeferNodePrimary message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferNodePrimary.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a DeferNodePrimary message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.DeferNodePrimary} DeferNodePrimary\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferNodePrimary.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.DeferNodePrimary();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.node = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a DeferNodePrimary message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.DeferNodePrimary} DeferNodePrimary\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferNodePrimary.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a DeferNodePrimary message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            DeferNodePrimary.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.node != null && message.hasOwnProperty(\"node\")) {\n                    let error = $root.Trace.QueryPlanNode.verify(message.node);\n                    if (error)\n                        return \"node.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a DeferNodePrimary message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @static\n             * @param {Trace.QueryPlanNode.DeferNodePrimary} message DeferNodePrimary\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            DeferNodePrimary.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.defaults)\n                    object.node = null;\n                if (message.node != null && message.hasOwnProperty(\"node\"))\n                    object.node = $root.Trace.QueryPlanNode.toObject(message.node, options);\n                return object;\n            };\n\n            /**\n             * Converts this DeferNodePrimary to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.DeferNodePrimary\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            DeferNodePrimary.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return DeferNodePrimary;\n        })();\n\n        QueryPlanNode.DeferredNode = (function() {\n\n            /**\n             * Properties of a DeferredNode.\n             * @memberof Trace.QueryPlanNode\n             * @interface IDeferredNode\n             * @property {Array.<Trace.QueryPlanNode.IDeferredNodeDepends>|null} [depends] DeferredNode depends\n             * @property {string|null} [label] DeferredNode label\n             * @property {Array.<Trace.QueryPlanNode.IResponsePathElement>|null} [path] DeferredNode path\n             * @property {Trace.IQueryPlanNode|null} [node] DeferredNode node\n             */\n\n            /**\n             * Constructs a new DeferredNode.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a DeferredNode.\n             * @implements IDeferredNode\n             * @constructor\n             * @param {Trace.QueryPlanNode.IDeferredNode=} [properties] Properties to set\n             */\n            function DeferredNode(properties) {\n                this.depends = [];\n                this.path = [];\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * DeferredNode depends.\n             * @member {Array.<Trace.QueryPlanNode.IDeferredNodeDepends>} depends\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             */\n            DeferredNode.prototype.depends = $util.emptyArray;\n\n            /**\n             * DeferredNode label.\n             * @member {string} label\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             */\n            DeferredNode.prototype.label = \"\";\n\n            /**\n             * DeferredNode path.\n             * @member {Array.<Trace.QueryPlanNode.IResponsePathElement>} path\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             */\n            DeferredNode.prototype.path = $util.emptyArray;\n\n            /**\n             * DeferredNode node.\n             * @member {Trace.IQueryPlanNode|null|undefined} node\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             */\n            DeferredNode.prototype.node = null;\n\n            /**\n             * Creates a new DeferredNode instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNode=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.DeferredNode} DeferredNode instance\n             */\n            DeferredNode.create = function create(properties) {\n                return new DeferredNode(properties);\n            };\n\n            /**\n             * Encodes the specified DeferredNode message. Does not implicitly {@link Trace.QueryPlanNode.DeferredNode.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNode} message DeferredNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferredNode.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.depends != null && message.depends.length)\n                    for (let i = 0; i < message.depends.length; ++i)\n                        $root.Trace.QueryPlanNode.DeferredNodeDepends.encode(message.depends[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n                if (message.label != null && Object.hasOwnProperty.call(message, \"label\"))\n                    writer.uint32(/* id 2, wireType 2 =*/18).string(message.label);\n                if (message.path != null && message.path.length)\n                    for (let i = 0; i < message.path.length; ++i)\n                        $root.Trace.QueryPlanNode.ResponsePathElement.encode(message.path[i], writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n                if (message.node != null && Object.hasOwnProperty.call(message, \"node\"))\n                    $root.Trace.QueryPlanNode.encode(message.node, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();\n                return writer;\n            };\n\n            /**\n             * Encodes the specified DeferredNode message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.DeferredNode.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNode} message DeferredNode message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferredNode.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a DeferredNode message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.DeferredNode} DeferredNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferredNode.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.DeferredNode();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        if (!(message.depends && message.depends.length))\n                            message.depends = [];\n                        message.depends.push($root.Trace.QueryPlanNode.DeferredNodeDepends.decode(reader, reader.uint32()));\n                        break;\n                    case 2:\n                        message.label = reader.string();\n                        break;\n                    case 3:\n                        if (!(message.path && message.path.length))\n                            message.path = [];\n                        message.path.push($root.Trace.QueryPlanNode.ResponsePathElement.decode(reader, reader.uint32()));\n                        break;\n                    case 4:\n                        message.node = $root.Trace.QueryPlanNode.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a DeferredNode message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.DeferredNode} DeferredNode\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferredNode.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a DeferredNode message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            DeferredNode.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.depends != null && message.hasOwnProperty(\"depends\")) {\n                    if (!Array.isArray(message.depends))\n                        return \"depends: array expected\";\n                    for (let i = 0; i < message.depends.length; ++i) {\n                        let error = $root.Trace.QueryPlanNode.DeferredNodeDepends.verify(message.depends[i]);\n                        if (error)\n                            return \"depends.\" + error;\n                    }\n                }\n                if (message.label != null && message.hasOwnProperty(\"label\"))\n                    if (!$util.isString(message.label))\n                        return \"label: string expected\";\n                if (message.path != null && message.hasOwnProperty(\"path\")) {\n                    if (!Array.isArray(message.path))\n                        return \"path: array expected\";\n                    for (let i = 0; i < message.path.length; ++i) {\n                        let error = $root.Trace.QueryPlanNode.ResponsePathElement.verify(message.path[i]);\n                        if (error)\n                            return \"path.\" + error;\n                    }\n                }\n                if (message.node != null && message.hasOwnProperty(\"node\")) {\n                    let error = $root.Trace.QueryPlanNode.verify(message.node);\n                    if (error)\n                        return \"node.\" + error;\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a DeferredNode message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @static\n             * @param {Trace.QueryPlanNode.DeferredNode} message DeferredNode\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            DeferredNode.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.arrays || options.defaults) {\n                    object.depends = [];\n                    object.path = [];\n                }\n                if (options.defaults) {\n                    object.label = \"\";\n                    object.node = null;\n                }\n                if (message.depends && message.depends.length) {\n                    object.depends = [];\n                    for (let j = 0; j < message.depends.length; ++j)\n                        object.depends[j] = $root.Trace.QueryPlanNode.DeferredNodeDepends.toObject(message.depends[j], options);\n                }\n                if (message.label != null && message.hasOwnProperty(\"label\"))\n                    object.label = message.label;\n                if (message.path && message.path.length) {\n                    object.path = [];\n                    for (let j = 0; j < message.path.length; ++j)\n                        object.path[j] = $root.Trace.QueryPlanNode.ResponsePathElement.toObject(message.path[j], options);\n                }\n                if (message.node != null && message.hasOwnProperty(\"node\"))\n                    object.node = $root.Trace.QueryPlanNode.toObject(message.node, options);\n                return object;\n            };\n\n            /**\n             * Converts this DeferredNode to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.DeferredNode\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            DeferredNode.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return DeferredNode;\n        })();\n\n        QueryPlanNode.DeferredNodeDepends = (function() {\n\n            /**\n             * Properties of a DeferredNodeDepends.\n             * @memberof Trace.QueryPlanNode\n             * @interface IDeferredNodeDepends\n             * @property {string|null} [id] DeferredNodeDepends id\n             * @property {string|null} [deferLabel] DeferredNodeDepends deferLabel\n             */\n\n            /**\n             * Constructs a new DeferredNodeDepends.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a DeferredNodeDepends.\n             * @implements IDeferredNodeDepends\n             * @constructor\n             * @param {Trace.QueryPlanNode.IDeferredNodeDepends=} [properties] Properties to set\n             */\n            function DeferredNodeDepends(properties) {\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * DeferredNodeDepends id.\n             * @member {string} id\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @instance\n             */\n            DeferredNodeDepends.prototype.id = \"\";\n\n            /**\n             * DeferredNodeDepends deferLabel.\n             * @member {string} deferLabel\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @instance\n             */\n            DeferredNodeDepends.prototype.deferLabel = \"\";\n\n            /**\n             * Creates a new DeferredNodeDepends instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNodeDepends=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.DeferredNodeDepends} DeferredNodeDepends instance\n             */\n            DeferredNodeDepends.create = function create(properties) {\n                return new DeferredNodeDepends(properties);\n            };\n\n            /**\n             * Encodes the specified DeferredNodeDepends message. Does not implicitly {@link Trace.QueryPlanNode.DeferredNodeDepends.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNodeDepends} message DeferredNodeDepends message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferredNodeDepends.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.id != null && Object.hasOwnProperty.call(message, \"id\"))\n                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.id);\n                if (message.deferLabel != null && Object.hasOwnProperty.call(message, \"deferLabel\"))\n                    writer.uint32(/* id 2, wireType 2 =*/18).string(message.deferLabel);\n                return writer;\n            };\n\n            /**\n             * Encodes the specified DeferredNodeDepends message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.DeferredNodeDepends.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Trace.QueryPlanNode.IDeferredNodeDepends} message DeferredNodeDepends message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            DeferredNodeDepends.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a DeferredNodeDepends message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.DeferredNodeDepends} DeferredNodeDepends\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferredNodeDepends.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.DeferredNodeDepends();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.id = reader.string();\n                        break;\n                    case 2:\n                        message.deferLabel = reader.string();\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a DeferredNodeDepends message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.DeferredNodeDepends} DeferredNodeDepends\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            DeferredNodeDepends.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a DeferredNodeDepends message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            DeferredNodeDepends.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.id != null && message.hasOwnProperty(\"id\"))\n                    if (!$util.isString(message.id))\n                        return \"id: string expected\";\n                if (message.deferLabel != null && message.hasOwnProperty(\"deferLabel\"))\n                    if (!$util.isString(message.deferLabel))\n                        return \"deferLabel: string expected\";\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a DeferredNodeDepends message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @static\n             * @param {Trace.QueryPlanNode.DeferredNodeDepends} message DeferredNodeDepends\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            DeferredNodeDepends.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.defaults) {\n                    object.id = \"\";\n                    object.deferLabel = \"\";\n                }\n                if (message.id != null && message.hasOwnProperty(\"id\"))\n                    object.id = message.id;\n                if (message.deferLabel != null && message.hasOwnProperty(\"deferLabel\"))\n                    object.deferLabel = message.deferLabel;\n                return object;\n            };\n\n            /**\n             * Converts this DeferredNodeDepends to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.DeferredNodeDepends\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            DeferredNodeDepends.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return DeferredNodeDepends;\n        })();\n\n        QueryPlanNode.ResponsePathElement = (function() {\n\n            /**\n             * Properties of a ResponsePathElement.\n             * @memberof Trace.QueryPlanNode\n             * @interface IResponsePathElement\n             * @property {string|null} [fieldName] ResponsePathElement fieldName\n             * @property {number|null} [index] ResponsePathElement index\n             */\n\n            /**\n             * Constructs a new ResponsePathElement.\n             * @memberof Trace.QueryPlanNode\n             * @classdesc Represents a ResponsePathElement.\n             * @implements IResponsePathElement\n             * @constructor\n             * @param {Trace.QueryPlanNode.IResponsePathElement=} [properties] Properties to set\n             */\n            function ResponsePathElement(properties) {\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * ResponsePathElement fieldName.\n             * @member {string} fieldName\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @instance\n             */\n            ResponsePathElement.prototype.fieldName = \"\";\n\n            /**\n             * ResponsePathElement index.\n             * @member {number} index\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @instance\n             */\n            ResponsePathElement.prototype.index = 0;\n\n            // OneOf field names bound to virtual getters and setters\n            let $oneOfFields;\n\n            /**\n             * ResponsePathElement id.\n             * @member {\"fieldName\"|\"index\"|undefined} id\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @instance\n             */\n            Object.defineProperty(ResponsePathElement.prototype, \"id\", {\n                get: $util.oneOfGetter($oneOfFields = [\"fieldName\", \"index\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Creates a new ResponsePathElement instance using the specified properties.\n             * @function create\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Trace.QueryPlanNode.IResponsePathElement=} [properties] Properties to set\n             * @returns {Trace.QueryPlanNode.ResponsePathElement} ResponsePathElement instance\n             */\n            ResponsePathElement.create = function create(properties) {\n                return new ResponsePathElement(properties);\n            };\n\n            /**\n             * Encodes the specified ResponsePathElement message. Does not implicitly {@link Trace.QueryPlanNode.ResponsePathElement.verify|verify} messages.\n             * @function encode\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Trace.QueryPlanNode.IResponsePathElement} message ResponsePathElement message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ResponsePathElement.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.fieldName != null && Object.hasOwnProperty.call(message, \"fieldName\"))\n                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.fieldName);\n                if (message.index != null && Object.hasOwnProperty.call(message, \"index\"))\n                    writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.index);\n                return writer;\n            };\n\n            /**\n             * Encodes the specified ResponsePathElement message, length delimited. Does not implicitly {@link Trace.QueryPlanNode.ResponsePathElement.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Trace.QueryPlanNode.IResponsePathElement} message ResponsePathElement message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ResponsePathElement.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a ResponsePathElement message from the specified reader or buffer.\n             * @function decode\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {Trace.QueryPlanNode.ResponsePathElement} ResponsePathElement\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ResponsePathElement.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trace.QueryPlanNode.ResponsePathElement();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.fieldName = reader.string();\n                        break;\n                    case 2:\n                        message.index = reader.uint32();\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a ResponsePathElement message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {Trace.QueryPlanNode.ResponsePathElement} ResponsePathElement\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ResponsePathElement.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a ResponsePathElement message.\n             * @function verify\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            ResponsePathElement.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                let properties = {};\n                if (message.fieldName != null && message.hasOwnProperty(\"fieldName\")) {\n                    properties.id = 1;\n                    if (!$util.isString(message.fieldName))\n                        return \"fieldName: string expected\";\n                }\n                if (message.index != null && message.hasOwnProperty(\"index\")) {\n                    if (properties.id === 1)\n                        return \"id: multiple values\";\n                    properties.id = 1;\n                    if (!$util.isInteger(message.index))\n                        return \"index: integer expected\";\n                }\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a ResponsePathElement message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @static\n             * @param {Trace.QueryPlanNode.ResponsePathElement} message ResponsePathElement\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ResponsePathElement.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (message.fieldName != null && message.hasOwnProperty(\"fieldName\")) {\n                    object.fieldName = message.fieldName;\n                    if (options.oneofs)\n                        object.id = \"fieldName\";\n                }\n                if (message.index != null && message.hasOwnProperty(\"index\")) {\n                    object.index = message.index;\n                    if (options.oneofs)\n                        object.id = \"index\";\n                }\n                return object;\n            };\n\n            /**\n             * Converts this ResponsePathElement to JSON.\n             * @function toJSON\n             * @memberof Trace.QueryPlanNode.ResponsePathElement\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ResponsePathElement.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return ResponsePathElement;\n        })();\n\n        return QueryPlanNode;\n    })();\n\n    return Trace;\n})();\n\nconst ReportHeader = $root.ReportHeader = (() => {\n\n    /**\n     * Properties of a ReportHeader.\n     * @exports IReportHeader\n     * @interface IReportHeader\n     * @property {string|null} [graphRef] ReportHeader graphRef\n     * @property {string|null} [hostname] ReportHeader hostname\n     * @property {string|null} [agentVersion] ReportHeader agentVersion\n     * @property {string|null} [serviceVersion] ReportHeader serviceVersion\n     * @property {string|null} [runtimeVersion] ReportHeader runtimeVersion\n     * @property {string|null} [uname] ReportHeader uname\n     * @property {string|null} [executableSchemaId] ReportHeader executableSchemaId\n     */\n\n    /**\n     * Constructs a new ReportHeader.\n     * @exports ReportHeader\n     * @classdesc Represents a ReportHeader.\n     * @implements IReportHeader\n     * @constructor\n     * @param {IReportHeader=} [properties] Properties to set\n     */\n    function ReportHeader(properties) {\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ReportHeader graphRef.\n     * @member {string} graphRef\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.graphRef = \"\";\n\n    /**\n     * ReportHeader hostname.\n     * @member {string} hostname\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.hostname = \"\";\n\n    /**\n     * ReportHeader agentVersion.\n     * @member {string} agentVersion\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.agentVersion = \"\";\n\n    /**\n     * ReportHeader serviceVersion.\n     * @member {string} serviceVersion\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.serviceVersion = \"\";\n\n    /**\n     * ReportHeader runtimeVersion.\n     * @member {string} runtimeVersion\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.runtimeVersion = \"\";\n\n    /**\n     * ReportHeader uname.\n     * @member {string} uname\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.uname = \"\";\n\n    /**\n     * ReportHeader executableSchemaId.\n     * @member {string} executableSchemaId\n     * @memberof ReportHeader\n     * @instance\n     */\n    ReportHeader.prototype.executableSchemaId = \"\";\n\n    /**\n     * Creates a new ReportHeader instance using the specified properties.\n     * @function create\n     * @memberof ReportHeader\n     * @static\n     * @param {IReportHeader=} [properties] Properties to set\n     * @returns {ReportHeader} ReportHeader instance\n     */\n    ReportHeader.create = function create(properties) {\n        return new ReportHeader(properties);\n    };\n\n    /**\n     * Encodes the specified ReportHeader message. Does not implicitly {@link ReportHeader.verify|verify} messages.\n     * @function encode\n     * @memberof ReportHeader\n     * @static\n     * @param {IReportHeader} message ReportHeader message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ReportHeader.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.hostname != null && Object.hasOwnProperty.call(message, \"hostname\"))\n            writer.uint32(/* id 5, wireType 2 =*/42).string(message.hostname);\n        if (message.agentVersion != null && Object.hasOwnProperty.call(message, \"agentVersion\"))\n            writer.uint32(/* id 6, wireType 2 =*/50).string(message.agentVersion);\n        if (message.serviceVersion != null && Object.hasOwnProperty.call(message, \"serviceVersion\"))\n            writer.uint32(/* id 7, wireType 2 =*/58).string(message.serviceVersion);\n        if (message.runtimeVersion != null && Object.hasOwnProperty.call(message, \"runtimeVersion\"))\n            writer.uint32(/* id 8, wireType 2 =*/66).string(message.runtimeVersion);\n        if (message.uname != null && Object.hasOwnProperty.call(message, \"uname\"))\n            writer.uint32(/* id 9, wireType 2 =*/74).string(message.uname);\n        if (message.executableSchemaId != null && Object.hasOwnProperty.call(message, \"executableSchemaId\"))\n            writer.uint32(/* id 11, wireType 2 =*/90).string(message.executableSchemaId);\n        if (message.graphRef != null && Object.hasOwnProperty.call(message, \"graphRef\"))\n            writer.uint32(/* id 12, wireType 2 =*/98).string(message.graphRef);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ReportHeader message, length delimited. Does not implicitly {@link ReportHeader.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ReportHeader\n     * @static\n     * @param {IReportHeader} message ReportHeader message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ReportHeader.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ReportHeader message from the specified reader or buffer.\n     * @function decode\n     * @memberof ReportHeader\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ReportHeader} ReportHeader\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ReportHeader.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.ReportHeader();\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 12:\n                message.graphRef = reader.string();\n                break;\n            case 5:\n                message.hostname = reader.string();\n                break;\n            case 6:\n                message.agentVersion = reader.string();\n                break;\n            case 7:\n                message.serviceVersion = reader.string();\n                break;\n            case 8:\n                message.runtimeVersion = reader.string();\n                break;\n            case 9:\n                message.uname = reader.string();\n                break;\n            case 11:\n                message.executableSchemaId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ReportHeader message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ReportHeader\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ReportHeader} ReportHeader\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ReportHeader.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ReportHeader message.\n     * @function verify\n     * @memberof ReportHeader\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ReportHeader.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.graphRef != null && message.hasOwnProperty(\"graphRef\"))\n            if (!$util.isString(message.graphRef))\n                return \"graphRef: string expected\";\n        if (message.hostname != null && message.hasOwnProperty(\"hostname\"))\n            if (!$util.isString(message.hostname))\n                return \"hostname: string expected\";\n        if (message.agentVersion != null && message.hasOwnProperty(\"agentVersion\"))\n            if (!$util.isString(message.agentVersion))\n                return \"agentVersion: string expected\";\n        if (message.serviceVersion != null && message.hasOwnProperty(\"serviceVersion\"))\n            if (!$util.isString(message.serviceVersion))\n                return \"serviceVersion: string expected\";\n        if (message.runtimeVersion != null && message.hasOwnProperty(\"runtimeVersion\"))\n            if (!$util.isString(message.runtimeVersion))\n                return \"runtimeVersion: string expected\";\n        if (message.uname != null && message.hasOwnProperty(\"uname\"))\n            if (!$util.isString(message.uname))\n                return \"uname: string expected\";\n        if (message.executableSchemaId != null && message.hasOwnProperty(\"executableSchemaId\"))\n            if (!$util.isString(message.executableSchemaId))\n                return \"executableSchemaId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ReportHeader message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ReportHeader\n     * @static\n     * @param {ReportHeader} message ReportHeader\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ReportHeader.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.defaults) {\n            object.hostname = \"\";\n            object.agentVersion = \"\";\n            object.serviceVersion = \"\";\n            object.runtimeVersion = \"\";\n            object.uname = \"\";\n            object.executableSchemaId = \"\";\n            object.graphRef = \"\";\n        }\n        if (message.hostname != null && message.hasOwnProperty(\"hostname\"))\n            object.hostname = message.hostname;\n        if (message.agentVersion != null && message.hasOwnProperty(\"agentVersion\"))\n            object.agentVersion = message.agentVersion;\n        if (message.serviceVersion != null && message.hasOwnProperty(\"serviceVersion\"))\n            object.serviceVersion = message.serviceVersion;\n        if (message.runtimeVersion != null && message.hasOwnProperty(\"runtimeVersion\"))\n            object.runtimeVersion = message.runtimeVersion;\n        if (message.uname != null && message.hasOwnProperty(\"uname\"))\n            object.uname = message.uname;\n        if (message.executableSchemaId != null && message.hasOwnProperty(\"executableSchemaId\"))\n            object.executableSchemaId = message.executableSchemaId;\n        if (message.graphRef != null && message.hasOwnProperty(\"graphRef\"))\n            object.graphRef = message.graphRef;\n        return object;\n    };\n\n    /**\n     * Converts this ReportHeader to JSON.\n     * @function toJSON\n     * @memberof ReportHeader\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ReportHeader.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return ReportHeader;\n})();\n\nconst PathErrorStats = $root.PathErrorStats = (() => {\n\n    /**\n     * Properties of a PathErrorStats.\n     * @exports IPathErrorStats\n     * @interface IPathErrorStats\n     * @property {Object.<string,IPathErrorStats>|null} [children] PathErrorStats children\n     * @property {number|null} [errorsCount] PathErrorStats errorsCount\n     * @property {number|null} [requestsWithErrorsCount] PathErrorStats requestsWithErrorsCount\n     */\n\n    /**\n     * Constructs a new PathErrorStats.\n     * @exports PathErrorStats\n     * @classdesc Represents a PathErrorStats.\n     * @implements IPathErrorStats\n     * @constructor\n     * @param {IPathErrorStats=} [properties] Properties to set\n     */\n    function PathErrorStats(properties) {\n        this.children = {};\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * PathErrorStats children.\n     * @member {Object.<string,IPathErrorStats>} children\n     * @memberof PathErrorStats\n     * @instance\n     */\n    PathErrorStats.prototype.children = $util.emptyObject;\n\n    /**\n     * PathErrorStats errorsCount.\n     * @member {number} errorsCount\n     * @memberof PathErrorStats\n     * @instance\n     */\n    PathErrorStats.prototype.errorsCount = 0;\n\n    /**\n     * PathErrorStats requestsWithErrorsCount.\n     * @member {number} requestsWithErrorsCount\n     * @memberof PathErrorStats\n     * @instance\n     */\n    PathErrorStats.prototype.requestsWithErrorsCount = 0;\n\n    /**\n     * Creates a new PathErrorStats instance using the specified properties.\n     * @function create\n     * @memberof PathErrorStats\n     * @static\n     * @param {IPathErrorStats=} [properties] Properties to set\n     * @returns {PathErrorStats} PathErrorStats instance\n     */\n    PathErrorStats.create = function create(properties) {\n        return new PathErrorStats(properties);\n    };\n\n    /**\n     * Encodes the specified PathErrorStats message. Does not implicitly {@link PathErrorStats.verify|verify} messages.\n     * @function encode\n     * @memberof PathErrorStats\n     * @static\n     * @param {IPathErrorStats} message PathErrorStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    PathErrorStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.children != null && Object.hasOwnProperty.call(message, \"children\"))\n            for (let keys = Object.keys(message.children), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 1, wireType 2 =*/10).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.PathErrorStats.encode(message.children[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        if (message.errorsCount != null && Object.hasOwnProperty.call(message, \"errorsCount\"))\n            writer.uint32(/* id 4, wireType 0 =*/32).uint64(message.errorsCount);\n        if (message.requestsWithErrorsCount != null && Object.hasOwnProperty.call(message, \"requestsWithErrorsCount\"))\n            writer.uint32(/* id 5, wireType 0 =*/40).uint64(message.requestsWithErrorsCount);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified PathErrorStats message, length delimited. Does not implicitly {@link PathErrorStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof PathErrorStats\n     * @static\n     * @param {IPathErrorStats} message PathErrorStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    PathErrorStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a PathErrorStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof PathErrorStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {PathErrorStats} PathErrorStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    PathErrorStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.PathErrorStats(), key;\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                reader.skip().pos++;\n                if (message.children === $util.emptyObject)\n                    message.children = {};\n                key = reader.string();\n                reader.pos++;\n                message.children[key] = $root.PathErrorStats.decode(reader, reader.uint32());\n                break;\n            case 4:\n                message.errorsCount = reader.uint64();\n                break;\n            case 5:\n                message.requestsWithErrorsCount = reader.uint64();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a PathErrorStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof PathErrorStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {PathErrorStats} PathErrorStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    PathErrorStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a PathErrorStats message.\n     * @function verify\n     * @memberof PathErrorStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    PathErrorStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.children != null && message.hasOwnProperty(\"children\")) {\n            if (!$util.isObject(message.children))\n                return \"children: object expected\";\n            let key = Object.keys(message.children);\n            for (let i = 0; i < key.length; ++i) {\n                let error = $root.PathErrorStats.verify(message.children[key[i]]);\n                if (error)\n                    return \"children.\" + error;\n            }\n        }\n        if (message.errorsCount != null && message.hasOwnProperty(\"errorsCount\"))\n            if (!$util.isInteger(message.errorsCount) && !(message.errorsCount && $util.isInteger(message.errorsCount.low) && $util.isInteger(message.errorsCount.high)))\n                return \"errorsCount: integer|Long expected\";\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (!$util.isInteger(message.requestsWithErrorsCount) && !(message.requestsWithErrorsCount && $util.isInteger(message.requestsWithErrorsCount.low) && $util.isInteger(message.requestsWithErrorsCount.high)))\n                return \"requestsWithErrorsCount: integer|Long expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a PathErrorStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof PathErrorStats\n     * @static\n     * @param {PathErrorStats} message PathErrorStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    PathErrorStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.objects || options.defaults)\n            object.children = {};\n        if (options.defaults) {\n            object.errorsCount = 0;\n            object.requestsWithErrorsCount = 0;\n        }\n        let keys2;\n        if (message.children && (keys2 = Object.keys(message.children)).length) {\n            object.children = {};\n            for (let j = 0; j < keys2.length; ++j)\n                object.children[keys2[j]] = $root.PathErrorStats.toObject(message.children[keys2[j]], options);\n        }\n        if (message.errorsCount != null && message.hasOwnProperty(\"errorsCount\"))\n            if (typeof message.errorsCount === \"number\")\n                object.errorsCount = options.longs === String ? String(message.errorsCount) : message.errorsCount;\n            else\n                object.errorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.errorsCount) : options.longs === Number ? new $util.LongBits(message.errorsCount.low >>> 0, message.errorsCount.high >>> 0).toNumber(true) : message.errorsCount;\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (typeof message.requestsWithErrorsCount === \"number\")\n                object.requestsWithErrorsCount = options.longs === String ? String(message.requestsWithErrorsCount) : message.requestsWithErrorsCount;\n            else\n                object.requestsWithErrorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.requestsWithErrorsCount) : options.longs === Number ? new $util.LongBits(message.requestsWithErrorsCount.low >>> 0, message.requestsWithErrorsCount.high >>> 0).toNumber(true) : message.requestsWithErrorsCount;\n        return object;\n    };\n\n    /**\n     * Converts this PathErrorStats to JSON.\n     * @function toJSON\n     * @memberof PathErrorStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    PathErrorStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return PathErrorStats;\n})();\n\nconst QueryLatencyStats = $root.QueryLatencyStats = (() => {\n\n    /**\n     * Properties of a QueryLatencyStats.\n     * @exports IQueryLatencyStats\n     * @interface IQueryLatencyStats\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [latencyCount] QueryLatencyStats latencyCount\n     * @property {number|null} [requestCount] QueryLatencyStats requestCount\n     * @property {number|null} [cacheHits] QueryLatencyStats cacheHits\n     * @property {number|null} [persistedQueryHits] QueryLatencyStats persistedQueryHits\n     * @property {number|null} [persistedQueryMisses] QueryLatencyStats persistedQueryMisses\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [cacheLatencyCount] QueryLatencyStats cacheLatencyCount\n     * @property {IPathErrorStats|null} [rootErrorStats] QueryLatencyStats rootErrorStats\n     * @property {number|null} [requestsWithErrorsCount] QueryLatencyStats requestsWithErrorsCount\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [publicCacheTtlCount] QueryLatencyStats publicCacheTtlCount\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [privateCacheTtlCount] QueryLatencyStats privateCacheTtlCount\n     * @property {number|null} [registeredOperationCount] QueryLatencyStats registeredOperationCount\n     * @property {number|null} [forbiddenOperationCount] QueryLatencyStats forbiddenOperationCount\n     * @property {number|null} [requestsWithoutFieldInstrumentation] QueryLatencyStats requestsWithoutFieldInstrumentation\n     */\n\n    /**\n     * Constructs a new QueryLatencyStats.\n     * @exports QueryLatencyStats\n     * @classdesc Represents a QueryLatencyStats.\n     * @implements IQueryLatencyStats\n     * @constructor\n     * @param {IQueryLatencyStats=} [properties] Properties to set\n     */\n    function QueryLatencyStats(properties) {\n        this.latencyCount = [];\n        this.cacheLatencyCount = [];\n        this.publicCacheTtlCount = [];\n        this.privateCacheTtlCount = [];\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * QueryLatencyStats latencyCount.\n     * @member {Array.<number>} latencyCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.latencyCount = $util.emptyArray;\n\n    /**\n     * QueryLatencyStats requestCount.\n     * @member {number} requestCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.requestCount = 0;\n\n    /**\n     * QueryLatencyStats cacheHits.\n     * @member {number} cacheHits\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.cacheHits = 0;\n\n    /**\n     * QueryLatencyStats persistedQueryHits.\n     * @member {number} persistedQueryHits\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.persistedQueryHits = 0;\n\n    /**\n     * QueryLatencyStats persistedQueryMisses.\n     * @member {number} persistedQueryMisses\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.persistedQueryMisses = 0;\n\n    /**\n     * QueryLatencyStats cacheLatencyCount.\n     * @member {Array.<number>} cacheLatencyCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.cacheLatencyCount = $util.emptyArray;\n\n    /**\n     * QueryLatencyStats rootErrorStats.\n     * @member {IPathErrorStats|null|undefined} rootErrorStats\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.rootErrorStats = null;\n\n    /**\n     * QueryLatencyStats requestsWithErrorsCount.\n     * @member {number} requestsWithErrorsCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.requestsWithErrorsCount = 0;\n\n    /**\n     * QueryLatencyStats publicCacheTtlCount.\n     * @member {Array.<number>} publicCacheTtlCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.publicCacheTtlCount = $util.emptyArray;\n\n    /**\n     * QueryLatencyStats privateCacheTtlCount.\n     * @member {Array.<number>} privateCacheTtlCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.privateCacheTtlCount = $util.emptyArray;\n\n    /**\n     * QueryLatencyStats registeredOperationCount.\n     * @member {number} registeredOperationCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.registeredOperationCount = 0;\n\n    /**\n     * QueryLatencyStats forbiddenOperationCount.\n     * @member {number} forbiddenOperationCount\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.forbiddenOperationCount = 0;\n\n    /**\n     * QueryLatencyStats requestsWithoutFieldInstrumentation.\n     * @member {number} requestsWithoutFieldInstrumentation\n     * @memberof QueryLatencyStats\n     * @instance\n     */\n    QueryLatencyStats.prototype.requestsWithoutFieldInstrumentation = 0;\n\n    /**\n     * Creates a new QueryLatencyStats instance using the specified properties.\n     * @function create\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {IQueryLatencyStats=} [properties] Properties to set\n     * @returns {QueryLatencyStats} QueryLatencyStats instance\n     */\n    QueryLatencyStats.create = function create(properties) {\n        return new QueryLatencyStats(properties);\n    };\n\n    /**\n     * Encodes the specified QueryLatencyStats message. Does not implicitly {@link QueryLatencyStats.verify|verify} messages.\n     * @function encode\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {IQueryLatencyStats} message QueryLatencyStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    QueryLatencyStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.requestCount != null && Object.hasOwnProperty.call(message, \"requestCount\"))\n            writer.uint32(/* id 2, wireType 0 =*/16).uint64(message.requestCount);\n        if (message.cacheHits != null && Object.hasOwnProperty.call(message, \"cacheHits\"))\n            writer.uint32(/* id 3, wireType 0 =*/24).uint64(message.cacheHits);\n        if (message.persistedQueryHits != null && Object.hasOwnProperty.call(message, \"persistedQueryHits\"))\n            writer.uint32(/* id 4, wireType 0 =*/32).uint64(message.persistedQueryHits);\n        if (message.persistedQueryMisses != null && Object.hasOwnProperty.call(message, \"persistedQueryMisses\"))\n            writer.uint32(/* id 5, wireType 0 =*/40).uint64(message.persistedQueryMisses);\n        if (message.rootErrorStats != null && Object.hasOwnProperty.call(message, \"rootErrorStats\"))\n            $root.PathErrorStats.encode(message.rootErrorStats, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();\n        if (message.requestsWithErrorsCount != null && Object.hasOwnProperty.call(message, \"requestsWithErrorsCount\"))\n            writer.uint32(/* id 8, wireType 0 =*/64).uint64(message.requestsWithErrorsCount);\n        if (message.registeredOperationCount != null && Object.hasOwnProperty.call(message, \"registeredOperationCount\"))\n            writer.uint32(/* id 11, wireType 0 =*/88).uint64(message.registeredOperationCount);\n        if (message.forbiddenOperationCount != null && Object.hasOwnProperty.call(message, \"forbiddenOperationCount\"))\n            writer.uint32(/* id 12, wireType 0 =*/96).uint64(message.forbiddenOperationCount);\n        let array13;\n        if (message.latencyCount != null && message.latencyCount.toArray)\n            array13 = message.latencyCount.toArray();\n        else\n            array13 = message.latencyCount;\n        if (array13 != null && array13.length) {\n            writer.uint32(/* id 13, wireType 2 =*/106).fork();\n            for (let i = 0; i < array13.length; ++i)\n                writer.sint64(array13[i]);\n            writer.ldelim();\n        }\n        let array14;\n        if (message.cacheLatencyCount != null && message.cacheLatencyCount.toArray)\n            array14 = message.cacheLatencyCount.toArray();\n        else\n            array14 = message.cacheLatencyCount;\n        if (array14 != null && array14.length) {\n            writer.uint32(/* id 14, wireType 2 =*/114).fork();\n            for (let i = 0; i < array14.length; ++i)\n                writer.sint64(array14[i]);\n            writer.ldelim();\n        }\n        let array15;\n        if (message.publicCacheTtlCount != null && message.publicCacheTtlCount.toArray)\n            array15 = message.publicCacheTtlCount.toArray();\n        else\n            array15 = message.publicCacheTtlCount;\n        if (array15 != null && array15.length) {\n            writer.uint32(/* id 15, wireType 2 =*/122).fork();\n            for (let i = 0; i < array15.length; ++i)\n                writer.sint64(array15[i]);\n            writer.ldelim();\n        }\n        let array16;\n        if (message.privateCacheTtlCount != null && message.privateCacheTtlCount.toArray)\n            array16 = message.privateCacheTtlCount.toArray();\n        else\n            array16 = message.privateCacheTtlCount;\n        if (array16 != null && array16.length) {\n            writer.uint32(/* id 16, wireType 2 =*/130).fork();\n            for (let i = 0; i < array16.length; ++i)\n                writer.sint64(array16[i]);\n            writer.ldelim();\n        }\n        if (message.requestsWithoutFieldInstrumentation != null && Object.hasOwnProperty.call(message, \"requestsWithoutFieldInstrumentation\"))\n            writer.uint32(/* id 17, wireType 0 =*/136).uint64(message.requestsWithoutFieldInstrumentation);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified QueryLatencyStats message, length delimited. Does not implicitly {@link QueryLatencyStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {IQueryLatencyStats} message QueryLatencyStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    QueryLatencyStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a QueryLatencyStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {QueryLatencyStats} QueryLatencyStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    QueryLatencyStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.QueryLatencyStats();\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 13:\n                if (!(message.latencyCount && message.latencyCount.length))\n                    message.latencyCount = [];\n                if ((tag & 7) === 2) {\n                    let end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.latencyCount.push(reader.sint64());\n                } else\n                    message.latencyCount.push(reader.sint64());\n                break;\n            case 2:\n                message.requestCount = reader.uint64();\n                break;\n            case 3:\n                message.cacheHits = reader.uint64();\n                break;\n            case 4:\n                message.persistedQueryHits = reader.uint64();\n                break;\n            case 5:\n                message.persistedQueryMisses = reader.uint64();\n                break;\n            case 14:\n                if (!(message.cacheLatencyCount && message.cacheLatencyCount.length))\n                    message.cacheLatencyCount = [];\n                if ((tag & 7) === 2) {\n                    let end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.cacheLatencyCount.push(reader.sint64());\n                } else\n                    message.cacheLatencyCount.push(reader.sint64());\n                break;\n            case 7:\n                message.rootErrorStats = $root.PathErrorStats.decode(reader, reader.uint32());\n                break;\n            case 8:\n                message.requestsWithErrorsCount = reader.uint64();\n                break;\n            case 15:\n                if (!(message.publicCacheTtlCount && message.publicCacheTtlCount.length))\n                    message.publicCacheTtlCount = [];\n                if ((tag & 7) === 2) {\n                    let end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.publicCacheTtlCount.push(reader.sint64());\n                } else\n                    message.publicCacheTtlCount.push(reader.sint64());\n                break;\n            case 16:\n                if (!(message.privateCacheTtlCount && message.privateCacheTtlCount.length))\n                    message.privateCacheTtlCount = [];\n                if ((tag & 7) === 2) {\n                    let end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.privateCacheTtlCount.push(reader.sint64());\n                } else\n                    message.privateCacheTtlCount.push(reader.sint64());\n                break;\n            case 11:\n                message.registeredOperationCount = reader.uint64();\n                break;\n            case 12:\n                message.forbiddenOperationCount = reader.uint64();\n                break;\n            case 17:\n                message.requestsWithoutFieldInstrumentation = reader.uint64();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a QueryLatencyStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {QueryLatencyStats} QueryLatencyStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    QueryLatencyStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a QueryLatencyStats message.\n     * @function verify\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    QueryLatencyStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.latencyCount != null && message.hasOwnProperty(\"latencyCount\")) {\n            let array13;\n            if (message.latencyCount != null && message.latencyCount.toArray)\n                array13 = message.latencyCount.toArray();\n            else\n                array13 = message.latencyCount;\n            if (!Array.isArray(array13))\n                return \"latencyCount: array expected\";\n            for (let i = 0; i < array13.length; ++i)\n                if (!$util.isInteger(array13[i]) && !(array13[i] && $util.isInteger(array13[i].low) && $util.isInteger(array13[i].high)))\n                    return \"latencyCount: integer|Long[] expected\";\n        }\n        if (message.requestCount != null && message.hasOwnProperty(\"requestCount\"))\n            if (!$util.isInteger(message.requestCount) && !(message.requestCount && $util.isInteger(message.requestCount.low) && $util.isInteger(message.requestCount.high)))\n                return \"requestCount: integer|Long expected\";\n        if (message.cacheHits != null && message.hasOwnProperty(\"cacheHits\"))\n            if (!$util.isInteger(message.cacheHits) && !(message.cacheHits && $util.isInteger(message.cacheHits.low) && $util.isInteger(message.cacheHits.high)))\n                return \"cacheHits: integer|Long expected\";\n        if (message.persistedQueryHits != null && message.hasOwnProperty(\"persistedQueryHits\"))\n            if (!$util.isInteger(message.persistedQueryHits) && !(message.persistedQueryHits && $util.isInteger(message.persistedQueryHits.low) && $util.isInteger(message.persistedQueryHits.high)))\n                return \"persistedQueryHits: integer|Long expected\";\n        if (message.persistedQueryMisses != null && message.hasOwnProperty(\"persistedQueryMisses\"))\n            if (!$util.isInteger(message.persistedQueryMisses) && !(message.persistedQueryMisses && $util.isInteger(message.persistedQueryMisses.low) && $util.isInteger(message.persistedQueryMisses.high)))\n                return \"persistedQueryMisses: integer|Long expected\";\n        if (message.cacheLatencyCount != null && message.hasOwnProperty(\"cacheLatencyCount\")) {\n            let array14;\n            if (message.cacheLatencyCount != null && message.cacheLatencyCount.toArray)\n                array14 = message.cacheLatencyCount.toArray();\n            else\n                array14 = message.cacheLatencyCount;\n            if (!Array.isArray(array14))\n                return \"cacheLatencyCount: array expected\";\n            for (let i = 0; i < array14.length; ++i)\n                if (!$util.isInteger(array14[i]) && !(array14[i] && $util.isInteger(array14[i].low) && $util.isInteger(array14[i].high)))\n                    return \"cacheLatencyCount: integer|Long[] expected\";\n        }\n        if (message.rootErrorStats != null && message.hasOwnProperty(\"rootErrorStats\")) {\n            let error = $root.PathErrorStats.verify(message.rootErrorStats);\n            if (error)\n                return \"rootErrorStats.\" + error;\n        }\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (!$util.isInteger(message.requestsWithErrorsCount) && !(message.requestsWithErrorsCount && $util.isInteger(message.requestsWithErrorsCount.low) && $util.isInteger(message.requestsWithErrorsCount.high)))\n                return \"requestsWithErrorsCount: integer|Long expected\";\n        if (message.publicCacheTtlCount != null && message.hasOwnProperty(\"publicCacheTtlCount\")) {\n            let array15;\n            if (message.publicCacheTtlCount != null && message.publicCacheTtlCount.toArray)\n                array15 = message.publicCacheTtlCount.toArray();\n            else\n                array15 = message.publicCacheTtlCount;\n            if (!Array.isArray(array15))\n                return \"publicCacheTtlCount: array expected\";\n            for (let i = 0; i < array15.length; ++i)\n                if (!$util.isInteger(array15[i]) && !(array15[i] && $util.isInteger(array15[i].low) && $util.isInteger(array15[i].high)))\n                    return \"publicCacheTtlCount: integer|Long[] expected\";\n        }\n        if (message.privateCacheTtlCount != null && message.hasOwnProperty(\"privateCacheTtlCount\")) {\n            let array16;\n            if (message.privateCacheTtlCount != null && message.privateCacheTtlCount.toArray)\n                array16 = message.privateCacheTtlCount.toArray();\n            else\n                array16 = message.privateCacheTtlCount;\n            if (!Array.isArray(array16))\n                return \"privateCacheTtlCount: array expected\";\n            for (let i = 0; i < array16.length; ++i)\n                if (!$util.isInteger(array16[i]) && !(array16[i] && $util.isInteger(array16[i].low) && $util.isInteger(array16[i].high)))\n                    return \"privateCacheTtlCount: integer|Long[] expected\";\n        }\n        if (message.registeredOperationCount != null && message.hasOwnProperty(\"registeredOperationCount\"))\n            if (!$util.isInteger(message.registeredOperationCount) && !(message.registeredOperationCount && $util.isInteger(message.registeredOperationCount.low) && $util.isInteger(message.registeredOperationCount.high)))\n                return \"registeredOperationCount: integer|Long expected\";\n        if (message.forbiddenOperationCount != null && message.hasOwnProperty(\"forbiddenOperationCount\"))\n            if (!$util.isInteger(message.forbiddenOperationCount) && !(message.forbiddenOperationCount && $util.isInteger(message.forbiddenOperationCount.low) && $util.isInteger(message.forbiddenOperationCount.high)))\n                return \"forbiddenOperationCount: integer|Long expected\";\n        if (message.requestsWithoutFieldInstrumentation != null && message.hasOwnProperty(\"requestsWithoutFieldInstrumentation\"))\n            if (!$util.isInteger(message.requestsWithoutFieldInstrumentation) && !(message.requestsWithoutFieldInstrumentation && $util.isInteger(message.requestsWithoutFieldInstrumentation.low) && $util.isInteger(message.requestsWithoutFieldInstrumentation.high)))\n                return \"requestsWithoutFieldInstrumentation: integer|Long expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a QueryLatencyStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof QueryLatencyStats\n     * @static\n     * @param {QueryLatencyStats} message QueryLatencyStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    QueryLatencyStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.arrays || options.defaults) {\n            object.latencyCount = [];\n            object.cacheLatencyCount = [];\n            object.publicCacheTtlCount = [];\n            object.privateCacheTtlCount = [];\n        }\n        if (options.defaults) {\n            object.requestCount = 0;\n            object.cacheHits = 0;\n            object.persistedQueryHits = 0;\n            object.persistedQueryMisses = 0;\n            object.rootErrorStats = null;\n            object.requestsWithErrorsCount = 0;\n            object.registeredOperationCount = 0;\n            object.forbiddenOperationCount = 0;\n            object.requestsWithoutFieldInstrumentation = 0;\n        }\n        if (message.requestCount != null && message.hasOwnProperty(\"requestCount\"))\n            if (typeof message.requestCount === \"number\")\n                object.requestCount = options.longs === String ? String(message.requestCount) : message.requestCount;\n            else\n                object.requestCount = options.longs === String ? $util.Long.prototype.toString.call(message.requestCount) : options.longs === Number ? new $util.LongBits(message.requestCount.low >>> 0, message.requestCount.high >>> 0).toNumber(true) : message.requestCount;\n        if (message.cacheHits != null && message.hasOwnProperty(\"cacheHits\"))\n            if (typeof message.cacheHits === \"number\")\n                object.cacheHits = options.longs === String ? String(message.cacheHits) : message.cacheHits;\n            else\n                object.cacheHits = options.longs === String ? $util.Long.prototype.toString.call(message.cacheHits) : options.longs === Number ? new $util.LongBits(message.cacheHits.low >>> 0, message.cacheHits.high >>> 0).toNumber(true) : message.cacheHits;\n        if (message.persistedQueryHits != null && message.hasOwnProperty(\"persistedQueryHits\"))\n            if (typeof message.persistedQueryHits === \"number\")\n                object.persistedQueryHits = options.longs === String ? String(message.persistedQueryHits) : message.persistedQueryHits;\n            else\n                object.persistedQueryHits = options.longs === String ? $util.Long.prototype.toString.call(message.persistedQueryHits) : options.longs === Number ? new $util.LongBits(message.persistedQueryHits.low >>> 0, message.persistedQueryHits.high >>> 0).toNumber(true) : message.persistedQueryHits;\n        if (message.persistedQueryMisses != null && message.hasOwnProperty(\"persistedQueryMisses\"))\n            if (typeof message.persistedQueryMisses === \"number\")\n                object.persistedQueryMisses = options.longs === String ? String(message.persistedQueryMisses) : message.persistedQueryMisses;\n            else\n                object.persistedQueryMisses = options.longs === String ? $util.Long.prototype.toString.call(message.persistedQueryMisses) : options.longs === Number ? new $util.LongBits(message.persistedQueryMisses.low >>> 0, message.persistedQueryMisses.high >>> 0).toNumber(true) : message.persistedQueryMisses;\n        if (message.rootErrorStats != null && message.hasOwnProperty(\"rootErrorStats\"))\n            object.rootErrorStats = $root.PathErrorStats.toObject(message.rootErrorStats, options);\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (typeof message.requestsWithErrorsCount === \"number\")\n                object.requestsWithErrorsCount = options.longs === String ? String(message.requestsWithErrorsCount) : message.requestsWithErrorsCount;\n            else\n                object.requestsWithErrorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.requestsWithErrorsCount) : options.longs === Number ? new $util.LongBits(message.requestsWithErrorsCount.low >>> 0, message.requestsWithErrorsCount.high >>> 0).toNumber(true) : message.requestsWithErrorsCount;\n        if (message.registeredOperationCount != null && message.hasOwnProperty(\"registeredOperationCount\"))\n            if (typeof message.registeredOperationCount === \"number\")\n                object.registeredOperationCount = options.longs === String ? String(message.registeredOperationCount) : message.registeredOperationCount;\n            else\n                object.registeredOperationCount = options.longs === String ? $util.Long.prototype.toString.call(message.registeredOperationCount) : options.longs === Number ? new $util.LongBits(message.registeredOperationCount.low >>> 0, message.registeredOperationCount.high >>> 0).toNumber(true) : message.registeredOperationCount;\n        if (message.forbiddenOperationCount != null && message.hasOwnProperty(\"forbiddenOperationCount\"))\n            if (typeof message.forbiddenOperationCount === \"number\")\n                object.forbiddenOperationCount = options.longs === String ? String(message.forbiddenOperationCount) : message.forbiddenOperationCount;\n            else\n                object.forbiddenOperationCount = options.longs === String ? $util.Long.prototype.toString.call(message.forbiddenOperationCount) : options.longs === Number ? new $util.LongBits(message.forbiddenOperationCount.low >>> 0, message.forbiddenOperationCount.high >>> 0).toNumber(true) : message.forbiddenOperationCount;\n        if (message.latencyCount && message.latencyCount.length) {\n            object.latencyCount = [];\n            for (let j = 0; j < message.latencyCount.length; ++j)\n                if (typeof message.latencyCount[j] === \"number\")\n                    object.latencyCount[j] = options.longs === String ? String(message.latencyCount[j]) : message.latencyCount[j];\n                else\n                    object.latencyCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.latencyCount[j]) : options.longs === Number ? new $util.LongBits(message.latencyCount[j].low >>> 0, message.latencyCount[j].high >>> 0).toNumber() : message.latencyCount[j];\n        }\n        if (message.cacheLatencyCount && message.cacheLatencyCount.length) {\n            object.cacheLatencyCount = [];\n            for (let j = 0; j < message.cacheLatencyCount.length; ++j)\n                if (typeof message.cacheLatencyCount[j] === \"number\")\n                    object.cacheLatencyCount[j] = options.longs === String ? String(message.cacheLatencyCount[j]) : message.cacheLatencyCount[j];\n                else\n                    object.cacheLatencyCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.cacheLatencyCount[j]) : options.longs === Number ? new $util.LongBits(message.cacheLatencyCount[j].low >>> 0, message.cacheLatencyCount[j].high >>> 0).toNumber() : message.cacheLatencyCount[j];\n        }\n        if (message.publicCacheTtlCount && message.publicCacheTtlCount.length) {\n            object.publicCacheTtlCount = [];\n            for (let j = 0; j < message.publicCacheTtlCount.length; ++j)\n                if (typeof message.publicCacheTtlCount[j] === \"number\")\n                    object.publicCacheTtlCount[j] = options.longs === String ? String(message.publicCacheTtlCount[j]) : message.publicCacheTtlCount[j];\n                else\n                    object.publicCacheTtlCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.publicCacheTtlCount[j]) : options.longs === Number ? new $util.LongBits(message.publicCacheTtlCount[j].low >>> 0, message.publicCacheTtlCount[j].high >>> 0).toNumber() : message.publicCacheTtlCount[j];\n        }\n        if (message.privateCacheTtlCount && message.privateCacheTtlCount.length) {\n            object.privateCacheTtlCount = [];\n            for (let j = 0; j < message.privateCacheTtlCount.length; ++j)\n                if (typeof message.privateCacheTtlCount[j] === \"number\")\n                    object.privateCacheTtlCount[j] = options.longs === String ? String(message.privateCacheTtlCount[j]) : message.privateCacheTtlCount[j];\n                else\n                    object.privateCacheTtlCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.privateCacheTtlCount[j]) : options.longs === Number ? new $util.LongBits(message.privateCacheTtlCount[j].low >>> 0, message.privateCacheTtlCount[j].high >>> 0).toNumber() : message.privateCacheTtlCount[j];\n        }\n        if (message.requestsWithoutFieldInstrumentation != null && message.hasOwnProperty(\"requestsWithoutFieldInstrumentation\"))\n            if (typeof message.requestsWithoutFieldInstrumentation === \"number\")\n                object.requestsWithoutFieldInstrumentation = options.longs === String ? String(message.requestsWithoutFieldInstrumentation) : message.requestsWithoutFieldInstrumentation;\n            else\n                object.requestsWithoutFieldInstrumentation = options.longs === String ? $util.Long.prototype.toString.call(message.requestsWithoutFieldInstrumentation) : options.longs === Number ? new $util.LongBits(message.requestsWithoutFieldInstrumentation.low >>> 0, message.requestsWithoutFieldInstrumentation.high >>> 0).toNumber(true) : message.requestsWithoutFieldInstrumentation;\n        return object;\n    };\n\n    /**\n     * Converts this QueryLatencyStats to JSON.\n     * @function toJSON\n     * @memberof QueryLatencyStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    QueryLatencyStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return QueryLatencyStats;\n})();\n\nconst StatsContext = $root.StatsContext = (() => {\n\n    /**\n     * Properties of a StatsContext.\n     * @exports IStatsContext\n     * @interface IStatsContext\n     * @property {string|null} [clientName] StatsContext clientName\n     * @property {string|null} [clientVersion] StatsContext clientVersion\n     */\n\n    /**\n     * Constructs a new StatsContext.\n     * @exports StatsContext\n     * @classdesc Represents a StatsContext.\n     * @implements IStatsContext\n     * @constructor\n     * @param {IStatsContext=} [properties] Properties to set\n     */\n    function StatsContext(properties) {\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * StatsContext clientName.\n     * @member {string} clientName\n     * @memberof StatsContext\n     * @instance\n     */\n    StatsContext.prototype.clientName = \"\";\n\n    /**\n     * StatsContext clientVersion.\n     * @member {string} clientVersion\n     * @memberof StatsContext\n     * @instance\n     */\n    StatsContext.prototype.clientVersion = \"\";\n\n    /**\n     * Creates a new StatsContext instance using the specified properties.\n     * @function create\n     * @memberof StatsContext\n     * @static\n     * @param {IStatsContext=} [properties] Properties to set\n     * @returns {StatsContext} StatsContext instance\n     */\n    StatsContext.create = function create(properties) {\n        return new StatsContext(properties);\n    };\n\n    /**\n     * Encodes the specified StatsContext message. Does not implicitly {@link StatsContext.verify|verify} messages.\n     * @function encode\n     * @memberof StatsContext\n     * @static\n     * @param {IStatsContext} message StatsContext message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    StatsContext.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.clientName != null && Object.hasOwnProperty.call(message, \"clientName\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.clientName);\n        if (message.clientVersion != null && Object.hasOwnProperty.call(message, \"clientVersion\"))\n            writer.uint32(/* id 3, wireType 2 =*/26).string(message.clientVersion);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified StatsContext message, length delimited. Does not implicitly {@link StatsContext.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof StatsContext\n     * @static\n     * @param {IStatsContext} message StatsContext message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    StatsContext.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a StatsContext message from the specified reader or buffer.\n     * @function decode\n     * @memberof StatsContext\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {StatsContext} StatsContext\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    StatsContext.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.StatsContext();\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 2:\n                message.clientName = reader.string();\n                break;\n            case 3:\n                message.clientVersion = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a StatsContext message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof StatsContext\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {StatsContext} StatsContext\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    StatsContext.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a StatsContext message.\n     * @function verify\n     * @memberof StatsContext\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    StatsContext.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.clientName != null && message.hasOwnProperty(\"clientName\"))\n            if (!$util.isString(message.clientName))\n                return \"clientName: string expected\";\n        if (message.clientVersion != null && message.hasOwnProperty(\"clientVersion\"))\n            if (!$util.isString(message.clientVersion))\n                return \"clientVersion: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a StatsContext message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof StatsContext\n     * @static\n     * @param {StatsContext} message StatsContext\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    StatsContext.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.defaults) {\n            object.clientName = \"\";\n            object.clientVersion = \"\";\n        }\n        if (message.clientName != null && message.hasOwnProperty(\"clientName\"))\n            object.clientName = message.clientName;\n        if (message.clientVersion != null && message.hasOwnProperty(\"clientVersion\"))\n            object.clientVersion = message.clientVersion;\n        return object;\n    };\n\n    /**\n     * Converts this StatsContext to JSON.\n     * @function toJSON\n     * @memberof StatsContext\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    StatsContext.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return StatsContext;\n})();\n\nconst ContextualizedQueryLatencyStats = $root.ContextualizedQueryLatencyStats = (() => {\n\n    /**\n     * Properties of a ContextualizedQueryLatencyStats.\n     * @exports IContextualizedQueryLatencyStats\n     * @interface IContextualizedQueryLatencyStats\n     * @property {IQueryLatencyStats|null} [queryLatencyStats] ContextualizedQueryLatencyStats queryLatencyStats\n     * @property {IStatsContext|null} [context] ContextualizedQueryLatencyStats context\n     */\n\n    /**\n     * Constructs a new ContextualizedQueryLatencyStats.\n     * @exports ContextualizedQueryLatencyStats\n     * @classdesc Represents a ContextualizedQueryLatencyStats.\n     * @implements IContextualizedQueryLatencyStats\n     * @constructor\n     * @param {IContextualizedQueryLatencyStats=} [properties] Properties to set\n     */\n    function ContextualizedQueryLatencyStats(properties) {\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ContextualizedQueryLatencyStats queryLatencyStats.\n     * @member {IQueryLatencyStats|null|undefined} queryLatencyStats\n     * @memberof ContextualizedQueryLatencyStats\n     * @instance\n     */\n    ContextualizedQueryLatencyStats.prototype.queryLatencyStats = null;\n\n    /**\n     * ContextualizedQueryLatencyStats context.\n     * @member {IStatsContext|null|undefined} context\n     * @memberof ContextualizedQueryLatencyStats\n     * @instance\n     */\n    ContextualizedQueryLatencyStats.prototype.context = null;\n\n    /**\n     * Creates a new ContextualizedQueryLatencyStats instance using the specified properties.\n     * @function create\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {IContextualizedQueryLatencyStats=} [properties] Properties to set\n     * @returns {ContextualizedQueryLatencyStats} ContextualizedQueryLatencyStats instance\n     */\n    ContextualizedQueryLatencyStats.create = function create(properties) {\n        return new ContextualizedQueryLatencyStats(properties);\n    };\n\n    /**\n     * Encodes the specified ContextualizedQueryLatencyStats message. Does not implicitly {@link ContextualizedQueryLatencyStats.verify|verify} messages.\n     * @function encode\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {IContextualizedQueryLatencyStats} message ContextualizedQueryLatencyStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedQueryLatencyStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.queryLatencyStats != null && Object.hasOwnProperty.call(message, \"queryLatencyStats\"))\n            $root.QueryLatencyStats.encode(message.queryLatencyStats, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.context != null && Object.hasOwnProperty.call(message, \"context\"))\n            $root.StatsContext.encode(message.context, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ContextualizedQueryLatencyStats message, length delimited. Does not implicitly {@link ContextualizedQueryLatencyStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {IContextualizedQueryLatencyStats} message ContextualizedQueryLatencyStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedQueryLatencyStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ContextualizedQueryLatencyStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ContextualizedQueryLatencyStats} ContextualizedQueryLatencyStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedQueryLatencyStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.ContextualizedQueryLatencyStats();\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.queryLatencyStats = $root.QueryLatencyStats.decode(reader, reader.uint32());\n                break;\n            case 2:\n                message.context = $root.StatsContext.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ContextualizedQueryLatencyStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ContextualizedQueryLatencyStats} ContextualizedQueryLatencyStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedQueryLatencyStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ContextualizedQueryLatencyStats message.\n     * @function verify\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ContextualizedQueryLatencyStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.queryLatencyStats != null && message.hasOwnProperty(\"queryLatencyStats\")) {\n            let error = $root.QueryLatencyStats.verify(message.queryLatencyStats);\n            if (error)\n                return \"queryLatencyStats.\" + error;\n        }\n        if (message.context != null && message.hasOwnProperty(\"context\")) {\n            let error = $root.StatsContext.verify(message.context);\n            if (error)\n                return \"context.\" + error;\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ContextualizedQueryLatencyStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ContextualizedQueryLatencyStats\n     * @static\n     * @param {ContextualizedQueryLatencyStats} message ContextualizedQueryLatencyStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ContextualizedQueryLatencyStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.defaults) {\n            object.queryLatencyStats = null;\n            object.context = null;\n        }\n        if (message.queryLatencyStats != null && message.hasOwnProperty(\"queryLatencyStats\"))\n            object.queryLatencyStats = $root.QueryLatencyStats.toObject(message.queryLatencyStats, options);\n        if (message.context != null && message.hasOwnProperty(\"context\"))\n            object.context = $root.StatsContext.toObject(message.context, options);\n        return object;\n    };\n\n    /**\n     * Converts this ContextualizedQueryLatencyStats to JSON.\n     * @function toJSON\n     * @memberof ContextualizedQueryLatencyStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ContextualizedQueryLatencyStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return ContextualizedQueryLatencyStats;\n})();\n\nconst ContextualizedTypeStats = $root.ContextualizedTypeStats = (() => {\n\n    /**\n     * Properties of a ContextualizedTypeStats.\n     * @exports IContextualizedTypeStats\n     * @interface IContextualizedTypeStats\n     * @property {IStatsContext|null} [context] ContextualizedTypeStats context\n     * @property {Object.<string,ITypeStat>|null} [perTypeStat] ContextualizedTypeStats perTypeStat\n     */\n\n    /**\n     * Constructs a new ContextualizedTypeStats.\n     * @exports ContextualizedTypeStats\n     * @classdesc Represents a ContextualizedTypeStats.\n     * @implements IContextualizedTypeStats\n     * @constructor\n     * @param {IContextualizedTypeStats=} [properties] Properties to set\n     */\n    function ContextualizedTypeStats(properties) {\n        this.perTypeStat = {};\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ContextualizedTypeStats context.\n     * @member {IStatsContext|null|undefined} context\n     * @memberof ContextualizedTypeStats\n     * @instance\n     */\n    ContextualizedTypeStats.prototype.context = null;\n\n    /**\n     * ContextualizedTypeStats perTypeStat.\n     * @member {Object.<string,ITypeStat>} perTypeStat\n     * @memberof ContextualizedTypeStats\n     * @instance\n     */\n    ContextualizedTypeStats.prototype.perTypeStat = $util.emptyObject;\n\n    /**\n     * Creates a new ContextualizedTypeStats instance using the specified properties.\n     * @function create\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {IContextualizedTypeStats=} [properties] Properties to set\n     * @returns {ContextualizedTypeStats} ContextualizedTypeStats instance\n     */\n    ContextualizedTypeStats.create = function create(properties) {\n        return new ContextualizedTypeStats(properties);\n    };\n\n    /**\n     * Encodes the specified ContextualizedTypeStats message. Does not implicitly {@link ContextualizedTypeStats.verify|verify} messages.\n     * @function encode\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {IContextualizedTypeStats} message ContextualizedTypeStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedTypeStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.context != null && Object.hasOwnProperty.call(message, \"context\"))\n            $root.StatsContext.encode(message.context, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.perTypeStat != null && Object.hasOwnProperty.call(message, \"perTypeStat\"))\n            for (let keys = Object.keys(message.perTypeStat), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 2, wireType 2 =*/18).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.TypeStat.encode(message.perTypeStat[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ContextualizedTypeStats message, length delimited. Does not implicitly {@link ContextualizedTypeStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {IContextualizedTypeStats} message ContextualizedTypeStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedTypeStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ContextualizedTypeStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ContextualizedTypeStats} ContextualizedTypeStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedTypeStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.ContextualizedTypeStats(), key;\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.context = $root.StatsContext.decode(reader, reader.uint32());\n                break;\n            case 2:\n                reader.skip().pos++;\n                if (message.perTypeStat === $util.emptyObject)\n                    message.perTypeStat = {};\n                key = reader.string();\n                reader.pos++;\n                message.perTypeStat[key] = $root.TypeStat.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ContextualizedTypeStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ContextualizedTypeStats} ContextualizedTypeStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedTypeStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ContextualizedTypeStats message.\n     * @function verify\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ContextualizedTypeStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.context != null && message.hasOwnProperty(\"context\")) {\n            let error = $root.StatsContext.verify(message.context);\n            if (error)\n                return \"context.\" + error;\n        }\n        if (message.perTypeStat != null && message.hasOwnProperty(\"perTypeStat\")) {\n            if (!$util.isObject(message.perTypeStat))\n                return \"perTypeStat: object expected\";\n            let key = Object.keys(message.perTypeStat);\n            for (let i = 0; i < key.length; ++i) {\n                let error = $root.TypeStat.verify(message.perTypeStat[key[i]]);\n                if (error)\n                    return \"perTypeStat.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ContextualizedTypeStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ContextualizedTypeStats\n     * @static\n     * @param {ContextualizedTypeStats} message ContextualizedTypeStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ContextualizedTypeStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.objects || options.defaults)\n            object.perTypeStat = {};\n        if (options.defaults)\n            object.context = null;\n        if (message.context != null && message.hasOwnProperty(\"context\"))\n            object.context = $root.StatsContext.toObject(message.context, options);\n        let keys2;\n        if (message.perTypeStat && (keys2 = Object.keys(message.perTypeStat)).length) {\n            object.perTypeStat = {};\n            for (let j = 0; j < keys2.length; ++j)\n                object.perTypeStat[keys2[j]] = $root.TypeStat.toObject(message.perTypeStat[keys2[j]], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this ContextualizedTypeStats to JSON.\n     * @function toJSON\n     * @memberof ContextualizedTypeStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ContextualizedTypeStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return ContextualizedTypeStats;\n})();\n\nconst FieldStat = $root.FieldStat = (() => {\n\n    /**\n     * Properties of a FieldStat.\n     * @exports IFieldStat\n     * @interface IFieldStat\n     * @property {string|null} [returnType] FieldStat returnType\n     * @property {number|null} [errorsCount] FieldStat errorsCount\n     * @property {number|null} [observedExecutionCount] FieldStat observedExecutionCount\n     * @property {number|null} [estimatedExecutionCount] FieldStat estimatedExecutionCount\n     * @property {number|null} [requestsWithErrorsCount] FieldStat requestsWithErrorsCount\n     * @property {$protobuf.ToArray.<number>|Array.<number>|null} [latencyCount] FieldStat latencyCount\n     */\n\n    /**\n     * Constructs a new FieldStat.\n     * @exports FieldStat\n     * @classdesc Represents a FieldStat.\n     * @implements IFieldStat\n     * @constructor\n     * @param {IFieldStat=} [properties] Properties to set\n     */\n    function FieldStat(properties) {\n        this.latencyCount = [];\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * FieldStat returnType.\n     * @member {string} returnType\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.returnType = \"\";\n\n    /**\n     * FieldStat errorsCount.\n     * @member {number} errorsCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.errorsCount = 0;\n\n    /**\n     * FieldStat observedExecutionCount.\n     * @member {number} observedExecutionCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.observedExecutionCount = 0;\n\n    /**\n     * FieldStat estimatedExecutionCount.\n     * @member {number} estimatedExecutionCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.estimatedExecutionCount = 0;\n\n    /**\n     * FieldStat requestsWithErrorsCount.\n     * @member {number} requestsWithErrorsCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.requestsWithErrorsCount = 0;\n\n    /**\n     * FieldStat latencyCount.\n     * @member {Array.<number>} latencyCount\n     * @memberof FieldStat\n     * @instance\n     */\n    FieldStat.prototype.latencyCount = $util.emptyArray;\n\n    /**\n     * Creates a new FieldStat instance using the specified properties.\n     * @function create\n     * @memberof FieldStat\n     * @static\n     * @param {IFieldStat=} [properties] Properties to set\n     * @returns {FieldStat} FieldStat instance\n     */\n    FieldStat.create = function create(properties) {\n        return new FieldStat(properties);\n    };\n\n    /**\n     * Encodes the specified FieldStat message. Does not implicitly {@link FieldStat.verify|verify} messages.\n     * @function encode\n     * @memberof FieldStat\n     * @static\n     * @param {IFieldStat} message FieldStat message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    FieldStat.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.returnType != null && Object.hasOwnProperty.call(message, \"returnType\"))\n            writer.uint32(/* id 3, wireType 2 =*/26).string(message.returnType);\n        if (message.errorsCount != null && Object.hasOwnProperty.call(message, \"errorsCount\"))\n            writer.uint32(/* id 4, wireType 0 =*/32).uint64(message.errorsCount);\n        if (message.observedExecutionCount != null && Object.hasOwnProperty.call(message, \"observedExecutionCount\"))\n            writer.uint32(/* id 5, wireType 0 =*/40).uint64(message.observedExecutionCount);\n        if (message.requestsWithErrorsCount != null && Object.hasOwnProperty.call(message, \"requestsWithErrorsCount\"))\n            writer.uint32(/* id 6, wireType 0 =*/48).uint64(message.requestsWithErrorsCount);\n        let array9;\n        if (message.latencyCount != null && message.latencyCount.toArray)\n            array9 = message.latencyCount.toArray();\n        else\n            array9 = message.latencyCount;\n        if (array9 != null && array9.length) {\n            writer.uint32(/* id 9, wireType 2 =*/74).fork();\n            for (let i = 0; i < array9.length; ++i)\n                writer.sint64(array9[i]);\n            writer.ldelim();\n        }\n        if (message.estimatedExecutionCount != null && Object.hasOwnProperty.call(message, \"estimatedExecutionCount\"))\n            writer.uint32(/* id 10, wireType 0 =*/80).uint64(message.estimatedExecutionCount);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified FieldStat message, length delimited. Does not implicitly {@link FieldStat.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof FieldStat\n     * @static\n     * @param {IFieldStat} message FieldStat message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    FieldStat.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a FieldStat message from the specified reader or buffer.\n     * @function decode\n     * @memberof FieldStat\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {FieldStat} FieldStat\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    FieldStat.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.FieldStat();\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 3:\n                message.returnType = reader.string();\n                break;\n            case 4:\n                message.errorsCount = reader.uint64();\n                break;\n            case 5:\n                message.observedExecutionCount = reader.uint64();\n                break;\n            case 10:\n                message.estimatedExecutionCount = reader.uint64();\n                break;\n            case 6:\n                message.requestsWithErrorsCount = reader.uint64();\n                break;\n            case 9:\n                if (!(message.latencyCount && message.latencyCount.length))\n                    message.latencyCount = [];\n                if ((tag & 7) === 2) {\n                    let end2 = reader.uint32() + reader.pos;\n                    while (reader.pos < end2)\n                        message.latencyCount.push(reader.sint64());\n                } else\n                    message.latencyCount.push(reader.sint64());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a FieldStat message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof FieldStat\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {FieldStat} FieldStat\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    FieldStat.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a FieldStat message.\n     * @function verify\n     * @memberof FieldStat\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    FieldStat.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.returnType != null && message.hasOwnProperty(\"returnType\"))\n            if (!$util.isString(message.returnType))\n                return \"returnType: string expected\";\n        if (message.errorsCount != null && message.hasOwnProperty(\"errorsCount\"))\n            if (!$util.isInteger(message.errorsCount) && !(message.errorsCount && $util.isInteger(message.errorsCount.low) && $util.isInteger(message.errorsCount.high)))\n                return \"errorsCount: integer|Long expected\";\n        if (message.observedExecutionCount != null && message.hasOwnProperty(\"observedExecutionCount\"))\n            if (!$util.isInteger(message.observedExecutionCount) && !(message.observedExecutionCount && $util.isInteger(message.observedExecutionCount.low) && $util.isInteger(message.observedExecutionCount.high)))\n                return \"observedExecutionCount: integer|Long expected\";\n        if (message.estimatedExecutionCount != null && message.hasOwnProperty(\"estimatedExecutionCount\"))\n            if (!$util.isInteger(message.estimatedExecutionCount) && !(message.estimatedExecutionCount && $util.isInteger(message.estimatedExecutionCount.low) && $util.isInteger(message.estimatedExecutionCount.high)))\n                return \"estimatedExecutionCount: integer|Long expected\";\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (!$util.isInteger(message.requestsWithErrorsCount) && !(message.requestsWithErrorsCount && $util.isInteger(message.requestsWithErrorsCount.low) && $util.isInteger(message.requestsWithErrorsCount.high)))\n                return \"requestsWithErrorsCount: integer|Long expected\";\n        if (message.latencyCount != null && message.hasOwnProperty(\"latencyCount\")) {\n            let array9;\n            if (message.latencyCount != null && message.latencyCount.toArray)\n                array9 = message.latencyCount.toArray();\n            else\n                array9 = message.latencyCount;\n            if (!Array.isArray(array9))\n                return \"latencyCount: array expected\";\n            for (let i = 0; i < array9.length; ++i)\n                if (!$util.isInteger(array9[i]) && !(array9[i] && $util.isInteger(array9[i].low) && $util.isInteger(array9[i].high)))\n                    return \"latencyCount: integer|Long[] expected\";\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a FieldStat message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof FieldStat\n     * @static\n     * @param {FieldStat} message FieldStat\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    FieldStat.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.arrays || options.defaults)\n            object.latencyCount = [];\n        if (options.defaults) {\n            object.returnType = \"\";\n            object.errorsCount = 0;\n            object.observedExecutionCount = 0;\n            object.requestsWithErrorsCount = 0;\n            object.estimatedExecutionCount = 0;\n        }\n        if (message.returnType != null && message.hasOwnProperty(\"returnType\"))\n            object.returnType = message.returnType;\n        if (message.errorsCount != null && message.hasOwnProperty(\"errorsCount\"))\n            if (typeof message.errorsCount === \"number\")\n                object.errorsCount = options.longs === String ? String(message.errorsCount) : message.errorsCount;\n            else\n                object.errorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.errorsCount) : options.longs === Number ? new $util.LongBits(message.errorsCount.low >>> 0, message.errorsCount.high >>> 0).toNumber(true) : message.errorsCount;\n        if (message.observedExecutionCount != null && message.hasOwnProperty(\"observedExecutionCount\"))\n            if (typeof message.observedExecutionCount === \"number\")\n                object.observedExecutionCount = options.longs === String ? String(message.observedExecutionCount) : message.observedExecutionCount;\n            else\n                object.observedExecutionCount = options.longs === String ? $util.Long.prototype.toString.call(message.observedExecutionCount) : options.longs === Number ? new $util.LongBits(message.observedExecutionCount.low >>> 0, message.observedExecutionCount.high >>> 0).toNumber(true) : message.observedExecutionCount;\n        if (message.requestsWithErrorsCount != null && message.hasOwnProperty(\"requestsWithErrorsCount\"))\n            if (typeof message.requestsWithErrorsCount === \"number\")\n                object.requestsWithErrorsCount = options.longs === String ? String(message.requestsWithErrorsCount) : message.requestsWithErrorsCount;\n            else\n                object.requestsWithErrorsCount = options.longs === String ? $util.Long.prototype.toString.call(message.requestsWithErrorsCount) : options.longs === Number ? new $util.LongBits(message.requestsWithErrorsCount.low >>> 0, message.requestsWithErrorsCount.high >>> 0).toNumber(true) : message.requestsWithErrorsCount;\n        if (message.latencyCount && message.latencyCount.length) {\n            object.latencyCount = [];\n            for (let j = 0; j < message.latencyCount.length; ++j)\n                if (typeof message.latencyCount[j] === \"number\")\n                    object.latencyCount[j] = options.longs === String ? String(message.latencyCount[j]) : message.latencyCount[j];\n                else\n                    object.latencyCount[j] = options.longs === String ? $util.Long.prototype.toString.call(message.latencyCount[j]) : options.longs === Number ? new $util.LongBits(message.latencyCount[j].low >>> 0, message.latencyCount[j].high >>> 0).toNumber() : message.latencyCount[j];\n        }\n        if (message.estimatedExecutionCount != null && message.hasOwnProperty(\"estimatedExecutionCount\"))\n            if (typeof message.estimatedExecutionCount === \"number\")\n                object.estimatedExecutionCount = options.longs === String ? String(message.estimatedExecutionCount) : message.estimatedExecutionCount;\n            else\n                object.estimatedExecutionCount = options.longs === String ? $util.Long.prototype.toString.call(message.estimatedExecutionCount) : options.longs === Number ? new $util.LongBits(message.estimatedExecutionCount.low >>> 0, message.estimatedExecutionCount.high >>> 0).toNumber(true) : message.estimatedExecutionCount;\n        return object;\n    };\n\n    /**\n     * Converts this FieldStat to JSON.\n     * @function toJSON\n     * @memberof FieldStat\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    FieldStat.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return FieldStat;\n})();\n\nconst TypeStat = $root.TypeStat = (() => {\n\n    /**\n     * Properties of a TypeStat.\n     * @exports ITypeStat\n     * @interface ITypeStat\n     * @property {Object.<string,IFieldStat>|null} [perFieldStat] TypeStat perFieldStat\n     */\n\n    /**\n     * Constructs a new TypeStat.\n     * @exports TypeStat\n     * @classdesc Represents a TypeStat.\n     * @implements ITypeStat\n     * @constructor\n     * @param {ITypeStat=} [properties] Properties to set\n     */\n    function TypeStat(properties) {\n        this.perFieldStat = {};\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * TypeStat perFieldStat.\n     * @member {Object.<string,IFieldStat>} perFieldStat\n     * @memberof TypeStat\n     * @instance\n     */\n    TypeStat.prototype.perFieldStat = $util.emptyObject;\n\n    /**\n     * Creates a new TypeStat instance using the specified properties.\n     * @function create\n     * @memberof TypeStat\n     * @static\n     * @param {ITypeStat=} [properties] Properties to set\n     * @returns {TypeStat} TypeStat instance\n     */\n    TypeStat.create = function create(properties) {\n        return new TypeStat(properties);\n    };\n\n    /**\n     * Encodes the specified TypeStat message. Does not implicitly {@link TypeStat.verify|verify} messages.\n     * @function encode\n     * @memberof TypeStat\n     * @static\n     * @param {ITypeStat} message TypeStat message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TypeStat.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.perFieldStat != null && Object.hasOwnProperty.call(message, \"perFieldStat\"))\n            for (let keys = Object.keys(message.perFieldStat), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 3, wireType 2 =*/26).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.FieldStat.encode(message.perFieldStat[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        return writer;\n    };\n\n    /**\n     * Encodes the specified TypeStat message, length delimited. Does not implicitly {@link TypeStat.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof TypeStat\n     * @static\n     * @param {ITypeStat} message TypeStat message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TypeStat.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a TypeStat message from the specified reader or buffer.\n     * @function decode\n     * @memberof TypeStat\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {TypeStat} TypeStat\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TypeStat.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.TypeStat(), key;\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 3:\n                reader.skip().pos++;\n                if (message.perFieldStat === $util.emptyObject)\n                    message.perFieldStat = {};\n                key = reader.string();\n                reader.pos++;\n                message.perFieldStat[key] = $root.FieldStat.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a TypeStat message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof TypeStat\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {TypeStat} TypeStat\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TypeStat.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a TypeStat message.\n     * @function verify\n     * @memberof TypeStat\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    TypeStat.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.perFieldStat != null && message.hasOwnProperty(\"perFieldStat\")) {\n            if (!$util.isObject(message.perFieldStat))\n                return \"perFieldStat: object expected\";\n            let key = Object.keys(message.perFieldStat);\n            for (let i = 0; i < key.length; ++i) {\n                let error = $root.FieldStat.verify(message.perFieldStat[key[i]]);\n                if (error)\n                    return \"perFieldStat.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a TypeStat message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof TypeStat\n     * @static\n     * @param {TypeStat} message TypeStat\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    TypeStat.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.objects || options.defaults)\n            object.perFieldStat = {};\n        let keys2;\n        if (message.perFieldStat && (keys2 = Object.keys(message.perFieldStat)).length) {\n            object.perFieldStat = {};\n            for (let j = 0; j < keys2.length; ++j)\n                object.perFieldStat[keys2[j]] = $root.FieldStat.toObject(message.perFieldStat[keys2[j]], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this TypeStat to JSON.\n     * @function toJSON\n     * @memberof TypeStat\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    TypeStat.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return TypeStat;\n})();\n\nconst ReferencedFieldsForType = $root.ReferencedFieldsForType = (() => {\n\n    /**\n     * Properties of a ReferencedFieldsForType.\n     * @exports IReferencedFieldsForType\n     * @interface IReferencedFieldsForType\n     * @property {Array.<string>|null} [fieldNames] ReferencedFieldsForType fieldNames\n     * @property {boolean|null} [isInterface] ReferencedFieldsForType isInterface\n     */\n\n    /**\n     * Constructs a new ReferencedFieldsForType.\n     * @exports ReferencedFieldsForType\n     * @classdesc Represents a ReferencedFieldsForType.\n     * @implements IReferencedFieldsForType\n     * @constructor\n     * @param {IReferencedFieldsForType=} [properties] Properties to set\n     */\n    function ReferencedFieldsForType(properties) {\n        this.fieldNames = [];\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ReferencedFieldsForType fieldNames.\n     * @member {Array.<string>} fieldNames\n     * @memberof ReferencedFieldsForType\n     * @instance\n     */\n    ReferencedFieldsForType.prototype.fieldNames = $util.emptyArray;\n\n    /**\n     * ReferencedFieldsForType isInterface.\n     * @member {boolean} isInterface\n     * @memberof ReferencedFieldsForType\n     * @instance\n     */\n    ReferencedFieldsForType.prototype.isInterface = false;\n\n    /**\n     * Creates a new ReferencedFieldsForType instance using the specified properties.\n     * @function create\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {IReferencedFieldsForType=} [properties] Properties to set\n     * @returns {ReferencedFieldsForType} ReferencedFieldsForType instance\n     */\n    ReferencedFieldsForType.create = function create(properties) {\n        return new ReferencedFieldsForType(properties);\n    };\n\n    /**\n     * Encodes the specified ReferencedFieldsForType message. Does not implicitly {@link ReferencedFieldsForType.verify|verify} messages.\n     * @function encode\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {IReferencedFieldsForType} message ReferencedFieldsForType message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ReferencedFieldsForType.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.fieldNames != null && message.fieldNames.length)\n            for (let i = 0; i < message.fieldNames.length; ++i)\n                writer.uint32(/* id 1, wireType 2 =*/10).string(message.fieldNames[i]);\n        if (message.isInterface != null && Object.hasOwnProperty.call(message, \"isInterface\"))\n            writer.uint32(/* id 2, wireType 0 =*/16).bool(message.isInterface);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ReferencedFieldsForType message, length delimited. Does not implicitly {@link ReferencedFieldsForType.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {IReferencedFieldsForType} message ReferencedFieldsForType message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ReferencedFieldsForType.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ReferencedFieldsForType message from the specified reader or buffer.\n     * @function decode\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ReferencedFieldsForType} ReferencedFieldsForType\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ReferencedFieldsForType.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.ReferencedFieldsForType();\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                if (!(message.fieldNames && message.fieldNames.length))\n                    message.fieldNames = [];\n                message.fieldNames.push(reader.string());\n                break;\n            case 2:\n                message.isInterface = reader.bool();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ReferencedFieldsForType message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ReferencedFieldsForType} ReferencedFieldsForType\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ReferencedFieldsForType.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ReferencedFieldsForType message.\n     * @function verify\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ReferencedFieldsForType.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.fieldNames != null && message.hasOwnProperty(\"fieldNames\")) {\n            if (!Array.isArray(message.fieldNames))\n                return \"fieldNames: array expected\";\n            for (let i = 0; i < message.fieldNames.length; ++i)\n                if (!$util.isString(message.fieldNames[i]))\n                    return \"fieldNames: string[] expected\";\n        }\n        if (message.isInterface != null && message.hasOwnProperty(\"isInterface\"))\n            if (typeof message.isInterface !== \"boolean\")\n                return \"isInterface: boolean expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ReferencedFieldsForType message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ReferencedFieldsForType\n     * @static\n     * @param {ReferencedFieldsForType} message ReferencedFieldsForType\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ReferencedFieldsForType.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.arrays || options.defaults)\n            object.fieldNames = [];\n        if (options.defaults)\n            object.isInterface = false;\n        if (message.fieldNames && message.fieldNames.length) {\n            object.fieldNames = [];\n            for (let j = 0; j < message.fieldNames.length; ++j)\n                object.fieldNames[j] = message.fieldNames[j];\n        }\n        if (message.isInterface != null && message.hasOwnProperty(\"isInterface\"))\n            object.isInterface = message.isInterface;\n        return object;\n    };\n\n    /**\n     * Converts this ReferencedFieldsForType to JSON.\n     * @function toJSON\n     * @memberof ReferencedFieldsForType\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ReferencedFieldsForType.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return ReferencedFieldsForType;\n})();\n\nconst Report = $root.Report = (() => {\n\n    /**\n     * Properties of a Report.\n     * @exports IReport\n     * @interface IReport\n     * @property {IReportHeader|null} [header] Report header\n     * @property {Object.<string,ITracesAndStats>|null} [tracesPerQuery] Report tracesPerQuery\n     * @property {google.protobuf.ITimestamp|null} [endTime] Report endTime\n     * @property {number|null} [operationCount] Report operationCount\n     * @property {boolean|null} [tracesPreAggregated] Report tracesPreAggregated\n     */\n\n    /**\n     * Constructs a new Report.\n     * @exports Report\n     * @classdesc Represents a Report.\n     * @implements IReport\n     * @constructor\n     * @param {IReport=} [properties] Properties to set\n     */\n    function Report(properties) {\n        this.tracesPerQuery = {};\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * Report header.\n     * @member {IReportHeader|null|undefined} header\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.header = null;\n\n    /**\n     * Report tracesPerQuery.\n     * @member {Object.<string,ITracesAndStats>} tracesPerQuery\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.tracesPerQuery = $util.emptyObject;\n\n    /**\n     * Report endTime.\n     * @member {google.protobuf.ITimestamp|null|undefined} endTime\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.endTime = null;\n\n    /**\n     * Report operationCount.\n     * @member {number} operationCount\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.operationCount = 0;\n\n    /**\n     * Report tracesPreAggregated.\n     * @member {boolean} tracesPreAggregated\n     * @memberof Report\n     * @instance\n     */\n    Report.prototype.tracesPreAggregated = false;\n\n    /**\n     * Creates a new Report instance using the specified properties.\n     * @function create\n     * @memberof Report\n     * @static\n     * @param {IReport=} [properties] Properties to set\n     * @returns {Report} Report instance\n     */\n    Report.create = function create(properties) {\n        return new Report(properties);\n    };\n\n    /**\n     * Encodes the specified Report message. Does not implicitly {@link Report.verify|verify} messages.\n     * @function encode\n     * @memberof Report\n     * @static\n     * @param {IReport} message Report message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Report.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.header != null && Object.hasOwnProperty.call(message, \"header\"))\n            $root.ReportHeader.encode(message.header, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.endTime != null && Object.hasOwnProperty.call(message, \"endTime\"))\n            $root.google.protobuf.Timestamp.encode(message.endTime, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n        if (message.tracesPerQuery != null && Object.hasOwnProperty.call(message, \"tracesPerQuery\"))\n            for (let keys = Object.keys(message.tracesPerQuery), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 5, wireType 2 =*/42).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.TracesAndStats.encode(message.tracesPerQuery[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        if (message.operationCount != null && Object.hasOwnProperty.call(message, \"operationCount\"))\n            writer.uint32(/* id 6, wireType 0 =*/48).uint64(message.operationCount);\n        if (message.tracesPreAggregated != null && Object.hasOwnProperty.call(message, \"tracesPreAggregated\"))\n            writer.uint32(/* id 7, wireType 0 =*/56).bool(message.tracesPreAggregated);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified Report message, length delimited. Does not implicitly {@link Report.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof Report\n     * @static\n     * @param {IReport} message Report message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Report.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a Report message from the specified reader or buffer.\n     * @function decode\n     * @memberof Report\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {Report} Report\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Report.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.Report(), key;\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.header = $root.ReportHeader.decode(reader, reader.uint32());\n                break;\n            case 5:\n                reader.skip().pos++;\n                if (message.tracesPerQuery === $util.emptyObject)\n                    message.tracesPerQuery = {};\n                key = reader.string();\n                reader.pos++;\n                message.tracesPerQuery[key] = $root.TracesAndStats.decode(reader, reader.uint32());\n                break;\n            case 2:\n                message.endTime = $root.google.protobuf.Timestamp.decode(reader, reader.uint32());\n                break;\n            case 6:\n                message.operationCount = reader.uint64();\n                break;\n            case 7:\n                message.tracesPreAggregated = reader.bool();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a Report message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof Report\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {Report} Report\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Report.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a Report message.\n     * @function verify\n     * @memberof Report\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    Report.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.header != null && message.hasOwnProperty(\"header\")) {\n            let error = $root.ReportHeader.verify(message.header);\n            if (error)\n                return \"header.\" + error;\n        }\n        if (message.tracesPerQuery != null && message.hasOwnProperty(\"tracesPerQuery\")) {\n            if (!$util.isObject(message.tracesPerQuery))\n                return \"tracesPerQuery: object expected\";\n            let key = Object.keys(message.tracesPerQuery);\n            for (let i = 0; i < key.length; ++i) {\n                let error = $root.TracesAndStats.verify(message.tracesPerQuery[key[i]]);\n                if (error)\n                    return \"tracesPerQuery.\" + error;\n            }\n        }\n        if (message.endTime != null && message.hasOwnProperty(\"endTime\")) {\n            let error = $root.google.protobuf.Timestamp.verify(message.endTime);\n            if (error)\n                return \"endTime.\" + error;\n        }\n        if (message.operationCount != null && message.hasOwnProperty(\"operationCount\"))\n            if (!$util.isInteger(message.operationCount) && !(message.operationCount && $util.isInteger(message.operationCount.low) && $util.isInteger(message.operationCount.high)))\n                return \"operationCount: integer|Long expected\";\n        if (message.tracesPreAggregated != null && message.hasOwnProperty(\"tracesPreAggregated\"))\n            if (typeof message.tracesPreAggregated !== \"boolean\")\n                return \"tracesPreAggregated: boolean expected\";\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a Report message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Report\n     * @static\n     * @param {Report} message Report\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Report.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.objects || options.defaults)\n            object.tracesPerQuery = {};\n        if (options.defaults) {\n            object.header = null;\n            object.endTime = null;\n            object.operationCount = 0;\n            object.tracesPreAggregated = false;\n        }\n        if (message.header != null && message.hasOwnProperty(\"header\"))\n            object.header = $root.ReportHeader.toObject(message.header, options);\n        if (message.endTime != null && message.hasOwnProperty(\"endTime\"))\n            object.endTime = $root.google.protobuf.Timestamp.toObject(message.endTime, options);\n        let keys2;\n        if (message.tracesPerQuery && (keys2 = Object.keys(message.tracesPerQuery)).length) {\n            object.tracesPerQuery = {};\n            for (let j = 0; j < keys2.length; ++j)\n                object.tracesPerQuery[keys2[j]] = $root.TracesAndStats.toObject(message.tracesPerQuery[keys2[j]], options);\n        }\n        if (message.operationCount != null && message.hasOwnProperty(\"operationCount\"))\n            if (typeof message.operationCount === \"number\")\n                object.operationCount = options.longs === String ? String(message.operationCount) : message.operationCount;\n            else\n                object.operationCount = options.longs === String ? $util.Long.prototype.toString.call(message.operationCount) : options.longs === Number ? new $util.LongBits(message.operationCount.low >>> 0, message.operationCount.high >>> 0).toNumber(true) : message.operationCount;\n        if (message.tracesPreAggregated != null && message.hasOwnProperty(\"tracesPreAggregated\"))\n            object.tracesPreAggregated = message.tracesPreAggregated;\n        return object;\n    };\n\n    /**\n     * Converts this Report to JSON.\n     * @function toJSON\n     * @memberof Report\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Report.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return Report;\n})();\n\nconst ContextualizedStats = $root.ContextualizedStats = (() => {\n\n    /**\n     * Properties of a ContextualizedStats.\n     * @exports IContextualizedStats\n     * @interface IContextualizedStats\n     * @property {IStatsContext|null} [context] ContextualizedStats context\n     * @property {IQueryLatencyStats|null} [queryLatencyStats] ContextualizedStats queryLatencyStats\n     * @property {Object.<string,ITypeStat>|null} [perTypeStat] ContextualizedStats perTypeStat\n     */\n\n    /**\n     * Constructs a new ContextualizedStats.\n     * @exports ContextualizedStats\n     * @classdesc Represents a ContextualizedStats.\n     * @implements IContextualizedStats\n     * @constructor\n     * @param {IContextualizedStats=} [properties] Properties to set\n     */\n    function ContextualizedStats(properties) {\n        this.perTypeStat = {};\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ContextualizedStats context.\n     * @member {IStatsContext|null|undefined} context\n     * @memberof ContextualizedStats\n     * @instance\n     */\n    ContextualizedStats.prototype.context = null;\n\n    /**\n     * ContextualizedStats queryLatencyStats.\n     * @member {IQueryLatencyStats|null|undefined} queryLatencyStats\n     * @memberof ContextualizedStats\n     * @instance\n     */\n    ContextualizedStats.prototype.queryLatencyStats = null;\n\n    /**\n     * ContextualizedStats perTypeStat.\n     * @member {Object.<string,ITypeStat>} perTypeStat\n     * @memberof ContextualizedStats\n     * @instance\n     */\n    ContextualizedStats.prototype.perTypeStat = $util.emptyObject;\n\n    /**\n     * Creates a new ContextualizedStats instance using the specified properties.\n     * @function create\n     * @memberof ContextualizedStats\n     * @static\n     * @param {IContextualizedStats=} [properties] Properties to set\n     * @returns {ContextualizedStats} ContextualizedStats instance\n     */\n    ContextualizedStats.create = function create(properties) {\n        return new ContextualizedStats(properties);\n    };\n\n    /**\n     * Encodes the specified ContextualizedStats message. Does not implicitly {@link ContextualizedStats.verify|verify} messages.\n     * @function encode\n     * @memberof ContextualizedStats\n     * @static\n     * @param {IContextualizedStats} message ContextualizedStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.context != null && Object.hasOwnProperty.call(message, \"context\"))\n            $root.StatsContext.encode(message.context, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.queryLatencyStats != null && Object.hasOwnProperty.call(message, \"queryLatencyStats\"))\n            $root.QueryLatencyStats.encode(message.queryLatencyStats, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n        if (message.perTypeStat != null && Object.hasOwnProperty.call(message, \"perTypeStat\"))\n            for (let keys = Object.keys(message.perTypeStat), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 3, wireType 2 =*/26).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.TypeStat.encode(message.perTypeStat[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ContextualizedStats message, length delimited. Does not implicitly {@link ContextualizedStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ContextualizedStats\n     * @static\n     * @param {IContextualizedStats} message ContextualizedStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContextualizedStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ContextualizedStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof ContextualizedStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ContextualizedStats} ContextualizedStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.ContextualizedStats(), key;\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.context = $root.StatsContext.decode(reader, reader.uint32());\n                break;\n            case 2:\n                message.queryLatencyStats = $root.QueryLatencyStats.decode(reader, reader.uint32());\n                break;\n            case 3:\n                reader.skip().pos++;\n                if (message.perTypeStat === $util.emptyObject)\n                    message.perTypeStat = {};\n                key = reader.string();\n                reader.pos++;\n                message.perTypeStat[key] = $root.TypeStat.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ContextualizedStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ContextualizedStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ContextualizedStats} ContextualizedStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContextualizedStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ContextualizedStats message.\n     * @function verify\n     * @memberof ContextualizedStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ContextualizedStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.context != null && message.hasOwnProperty(\"context\")) {\n            let error = $root.StatsContext.verify(message.context);\n            if (error)\n                return \"context.\" + error;\n        }\n        if (message.queryLatencyStats != null && message.hasOwnProperty(\"queryLatencyStats\")) {\n            let error = $root.QueryLatencyStats.verify(message.queryLatencyStats);\n            if (error)\n                return \"queryLatencyStats.\" + error;\n        }\n        if (message.perTypeStat != null && message.hasOwnProperty(\"perTypeStat\")) {\n            if (!$util.isObject(message.perTypeStat))\n                return \"perTypeStat: object expected\";\n            let key = Object.keys(message.perTypeStat);\n            for (let i = 0; i < key.length; ++i) {\n                let error = $root.TypeStat.verify(message.perTypeStat[key[i]]);\n                if (error)\n                    return \"perTypeStat.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a ContextualizedStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ContextualizedStats\n     * @static\n     * @param {ContextualizedStats} message ContextualizedStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ContextualizedStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.objects || options.defaults)\n            object.perTypeStat = {};\n        if (options.defaults) {\n            object.context = null;\n            object.queryLatencyStats = null;\n        }\n        if (message.context != null && message.hasOwnProperty(\"context\"))\n            object.context = $root.StatsContext.toObject(message.context, options);\n        if (message.queryLatencyStats != null && message.hasOwnProperty(\"queryLatencyStats\"))\n            object.queryLatencyStats = $root.QueryLatencyStats.toObject(message.queryLatencyStats, options);\n        let keys2;\n        if (message.perTypeStat && (keys2 = Object.keys(message.perTypeStat)).length) {\n            object.perTypeStat = {};\n            for (let j = 0; j < keys2.length; ++j)\n                object.perTypeStat[keys2[j]] = $root.TypeStat.toObject(message.perTypeStat[keys2[j]], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this ContextualizedStats to JSON.\n     * @function toJSON\n     * @memberof ContextualizedStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ContextualizedStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return ContextualizedStats;\n})();\n\nconst TracesAndStats = $root.TracesAndStats = (() => {\n\n    /**\n     * Properties of a TracesAndStats.\n     * @exports ITracesAndStats\n     * @interface ITracesAndStats\n     * @property {Array.<ITrace|Uint8Array>|null} [trace] TracesAndStats trace\n     * @property {$protobuf.ToArray.<IContextualizedStats>|Array.<IContextualizedStats>|null} [statsWithContext] TracesAndStats statsWithContext\n     * @property {Object.<string,IReferencedFieldsForType>|null} [referencedFieldsByType] TracesAndStats referencedFieldsByType\n     * @property {Array.<ITrace|Uint8Array>|null} [internalTracesContributingToStats] TracesAndStats internalTracesContributingToStats\n     */\n\n    /**\n     * Constructs a new TracesAndStats.\n     * @exports TracesAndStats\n     * @classdesc Represents a TracesAndStats.\n     * @implements ITracesAndStats\n     * @constructor\n     * @param {ITracesAndStats=} [properties] Properties to set\n     */\n    function TracesAndStats(properties) {\n        this.trace = [];\n        this.statsWithContext = [];\n        this.referencedFieldsByType = {};\n        this.internalTracesContributingToStats = [];\n        if (properties)\n            for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * TracesAndStats trace.\n     * @member {Array.<ITrace|Uint8Array>} trace\n     * @memberof TracesAndStats\n     * @instance\n     */\n    TracesAndStats.prototype.trace = $util.emptyArray;\n\n    /**\n     * TracesAndStats statsWithContext.\n     * @member {Array.<IContextualizedStats>} statsWithContext\n     * @memberof TracesAndStats\n     * @instance\n     */\n    TracesAndStats.prototype.statsWithContext = $util.emptyArray;\n\n    /**\n     * TracesAndStats referencedFieldsByType.\n     * @member {Object.<string,IReferencedFieldsForType>} referencedFieldsByType\n     * @memberof TracesAndStats\n     * @instance\n     */\n    TracesAndStats.prototype.referencedFieldsByType = $util.emptyObject;\n\n    /**\n     * TracesAndStats internalTracesContributingToStats.\n     * @member {Array.<ITrace|Uint8Array>} internalTracesContributingToStats\n     * @memberof TracesAndStats\n     * @instance\n     */\n    TracesAndStats.prototype.internalTracesContributingToStats = $util.emptyArray;\n\n    /**\n     * Creates a new TracesAndStats instance using the specified properties.\n     * @function create\n     * @memberof TracesAndStats\n     * @static\n     * @param {ITracesAndStats=} [properties] Properties to set\n     * @returns {TracesAndStats} TracesAndStats instance\n     */\n    TracesAndStats.create = function create(properties) {\n        return new TracesAndStats(properties);\n    };\n\n    /**\n     * Encodes the specified TracesAndStats message. Does not implicitly {@link TracesAndStats.verify|verify} messages.\n     * @function encode\n     * @memberof TracesAndStats\n     * @static\n     * @param {ITracesAndStats} message TracesAndStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TracesAndStats.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.trace != null && message.trace.length)\n            for (let i = 0; i < message.trace.length; ++i)\n                if (message.trace[i] instanceof Uint8Array) {\n                    writer.uint32(/* id 1, wireType 2 =*/10);\n                    writer.bytes(message.trace[i]);\n                } else\n                    $root.Trace.encode(message.trace[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        let array2;\n        if (message.statsWithContext != null && message.statsWithContext.toArray)\n            array2 = message.statsWithContext.toArray();\n        else\n            array2 = message.statsWithContext;\n        if (array2 != null && array2.length)\n            for (let i = 0; i < array2.length; ++i)\n                $root.ContextualizedStats.encode(array2[i], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();\n        if (message.internalTracesContributingToStats != null && message.internalTracesContributingToStats.length)\n            for (let i = 0; i < message.internalTracesContributingToStats.length; ++i)\n                if (message.internalTracesContributingToStats[i] instanceof Uint8Array) {\n                    writer.uint32(/* id 3, wireType 2 =*/26);\n                    writer.bytes(message.internalTracesContributingToStats[i]);\n                } else\n                    $root.Trace.encode(message.internalTracesContributingToStats[i], writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n        if (message.referencedFieldsByType != null && Object.hasOwnProperty.call(message, \"referencedFieldsByType\"))\n            for (let keys = Object.keys(message.referencedFieldsByType), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 4, wireType 2 =*/34).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.ReferencedFieldsForType.encode(message.referencedFieldsByType[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        return writer;\n    };\n\n    /**\n     * Encodes the specified TracesAndStats message, length delimited. Does not implicitly {@link TracesAndStats.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof TracesAndStats\n     * @static\n     * @param {ITracesAndStats} message TracesAndStats message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TracesAndStats.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a TracesAndStats message from the specified reader or buffer.\n     * @function decode\n     * @memberof TracesAndStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {TracesAndStats} TracesAndStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TracesAndStats.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        let end = length === undefined ? reader.len : reader.pos + length, message = new $root.TracesAndStats(), key;\n        while (reader.pos < end) {\n            let tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                if (!(message.trace && message.trace.length))\n                    message.trace = [];\n                message.trace.push($root.Trace.decode(reader, reader.uint32()));\n                break;\n            case 2:\n                if (!(message.statsWithContext && message.statsWithContext.length))\n                    message.statsWithContext = [];\n                message.statsWithContext.push($root.ContextualizedStats.decode(reader, reader.uint32()));\n                break;\n            case 4:\n                reader.skip().pos++;\n                if (message.referencedFieldsByType === $util.emptyObject)\n                    message.referencedFieldsByType = {};\n                key = reader.string();\n                reader.pos++;\n                message.referencedFieldsByType[key] = $root.ReferencedFieldsForType.decode(reader, reader.uint32());\n                break;\n            case 3:\n                if (!(message.internalTracesContributingToStats && message.internalTracesContributingToStats.length))\n                    message.internalTracesContributingToStats = [];\n                message.internalTracesContributingToStats.push($root.Trace.decode(reader, reader.uint32()));\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a TracesAndStats message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof TracesAndStats\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {TracesAndStats} TracesAndStats\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TracesAndStats.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a TracesAndStats message.\n     * @function verify\n     * @memberof TracesAndStats\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    TracesAndStats.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.trace != null && message.hasOwnProperty(\"trace\")) {\n            if (!Array.isArray(message.trace))\n                return \"trace: array expected\";\n            for (let i = 0; i < message.trace.length; ++i)\n                if (!(message.trace[i] instanceof Uint8Array)) {\n                    let error = $root.Trace.verify(message.trace[i]);\n                    if (error)\n                        return \"trace.\" + error;\n                }\n        }\n        if (message.statsWithContext != null && message.hasOwnProperty(\"statsWithContext\")) {\n            let array2;\n            if (message.statsWithContext != null && message.statsWithContext.toArray)\n                array2 = message.statsWithContext.toArray();\n            else\n                array2 = message.statsWithContext;\n            if (!Array.isArray(array2))\n                return \"statsWithContext: array expected\";\n            for (let i = 0; i < array2.length; ++i) {\n                let error = $root.ContextualizedStats.verify(array2[i]);\n                if (error)\n                    return \"statsWithContext.\" + error;\n            }\n        }\n        if (message.referencedFieldsByType != null && message.hasOwnProperty(\"referencedFieldsByType\")) {\n            if (!$util.isObject(message.referencedFieldsByType))\n                return \"referencedFieldsByType: object expected\";\n            let key = Object.keys(message.referencedFieldsByType);\n            for (let i = 0; i < key.length; ++i) {\n                let error = $root.ReferencedFieldsForType.verify(message.referencedFieldsByType[key[i]]);\n                if (error)\n                    return \"referencedFieldsByType.\" + error;\n            }\n        }\n        if (message.internalTracesContributingToStats != null && message.hasOwnProperty(\"internalTracesContributingToStats\")) {\n            if (!Array.isArray(message.internalTracesContributingToStats))\n                return \"internalTracesContributingToStats: array expected\";\n            for (let i = 0; i < message.internalTracesContributingToStats.length; ++i)\n                if (!(message.internalTracesContributingToStats[i] instanceof Uint8Array)) {\n                    let error = $root.Trace.verify(message.internalTracesContributingToStats[i]);\n                    if (error)\n                        return \"internalTracesContributingToStats.\" + error;\n                }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a plain object from a TracesAndStats message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof TracesAndStats\n     * @static\n     * @param {TracesAndStats} message TracesAndStats\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    TracesAndStats.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        let object = {};\n        if (options.arrays || options.defaults) {\n            object.trace = [];\n            object.statsWithContext = [];\n            object.internalTracesContributingToStats = [];\n        }\n        if (options.objects || options.defaults)\n            object.referencedFieldsByType = {};\n        if (message.trace && message.trace.length) {\n            object.trace = [];\n            for (let j = 0; j < message.trace.length; ++j)\n                object.trace[j] = $root.Trace.toObject(message.trace[j], options);\n        }\n        if (message.statsWithContext && message.statsWithContext.length) {\n            object.statsWithContext = [];\n            for (let j = 0; j < message.statsWithContext.length; ++j)\n                object.statsWithContext[j] = $root.ContextualizedStats.toObject(message.statsWithContext[j], options);\n        }\n        if (message.internalTracesContributingToStats && message.internalTracesContributingToStats.length) {\n            object.internalTracesContributingToStats = [];\n            for (let j = 0; j < message.internalTracesContributingToStats.length; ++j)\n                object.internalTracesContributingToStats[j] = $root.Trace.toObject(message.internalTracesContributingToStats[j], options);\n        }\n        let keys2;\n        if (message.referencedFieldsByType && (keys2 = Object.keys(message.referencedFieldsByType)).length) {\n            object.referencedFieldsByType = {};\n            for (let j = 0; j < keys2.length; ++j)\n                object.referencedFieldsByType[keys2[j]] = $root.ReferencedFieldsForType.toObject(message.referencedFieldsByType[keys2[j]], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this TracesAndStats to JSON.\n     * @function toJSON\n     * @memberof TracesAndStats\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    TracesAndStats.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n    };\n\n    return TracesAndStats;\n})();\n\nconst google = $root.google = (() => {\n\n    /**\n     * Namespace google.\n     * @exports google\n     * @namespace\n     */\n    const google = {};\n\n    google.protobuf = (function() {\n\n        /**\n         * Namespace protobuf.\n         * @memberof google\n         * @namespace\n         */\n        const protobuf = {};\n\n        protobuf.Timestamp = (function() {\n\n            /**\n             * Properties of a Timestamp.\n             * @memberof google.protobuf\n             * @interface ITimestamp\n             * @property {number|null} [seconds] Timestamp seconds\n             * @property {number|null} [nanos] Timestamp nanos\n             */\n\n            /**\n             * Constructs a new Timestamp.\n             * @memberof google.protobuf\n             * @classdesc Represents a Timestamp.\n             * @implements ITimestamp\n             * @constructor\n             * @param {google.protobuf.ITimestamp=} [properties] Properties to set\n             */\n            function Timestamp(properties) {\n                if (properties)\n                    for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                        if (properties[keys[i]] != null)\n                            this[keys[i]] = properties[keys[i]];\n            }\n\n            /**\n             * Timestamp seconds.\n             * @member {number} seconds\n             * @memberof google.protobuf.Timestamp\n             * @instance\n             */\n            Timestamp.prototype.seconds = 0;\n\n            /**\n             * Timestamp nanos.\n             * @member {number} nanos\n             * @memberof google.protobuf.Timestamp\n             * @instance\n             */\n            Timestamp.prototype.nanos = 0;\n\n            /**\n             * Creates a new Timestamp instance using the specified properties.\n             * @function create\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {google.protobuf.ITimestamp=} [properties] Properties to set\n             * @returns {google.protobuf.Timestamp} Timestamp instance\n             */\n            Timestamp.create = function create(properties) {\n                return new Timestamp(properties);\n            };\n\n            /**\n             * Encodes the specified Timestamp message. Does not implicitly {@link google.protobuf.Timestamp.verify|verify} messages.\n             * @function encode\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {google.protobuf.ITimestamp} message Timestamp message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Timestamp.encode = function encode(message, writer) {\n                if (!writer)\n                    writer = $Writer.create();\n                if (message.seconds != null && Object.hasOwnProperty.call(message, \"seconds\"))\n                    writer.uint32(/* id 1, wireType 0 =*/8).int64(message.seconds);\n                if (message.nanos != null && Object.hasOwnProperty.call(message, \"nanos\"))\n                    writer.uint32(/* id 2, wireType 0 =*/16).int32(message.nanos);\n                return writer;\n            };\n\n            /**\n             * Encodes the specified Timestamp message, length delimited. Does not implicitly {@link google.protobuf.Timestamp.verify|verify} messages.\n             * @function encodeDelimited\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {google.protobuf.ITimestamp} message Timestamp message or plain object to encode\n             * @param {$protobuf.Writer} [writer] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Timestamp.encodeDelimited = function encodeDelimited(message, writer) {\n                return this.encode(message, writer).ldelim();\n            };\n\n            /**\n             * Decodes a Timestamp message from the specified reader or buffer.\n             * @function decode\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @param {number} [length] Message length if known beforehand\n             * @returns {google.protobuf.Timestamp} Timestamp\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Timestamp.decode = function decode(reader, length) {\n                if (!(reader instanceof $Reader))\n                    reader = $Reader.create(reader);\n                let end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.Timestamp();\n                while (reader.pos < end) {\n                    let tag = reader.uint32();\n                    switch (tag >>> 3) {\n                    case 1:\n                        message.seconds = reader.int64();\n                        break;\n                    case 2:\n                        message.nanos = reader.int32();\n                        break;\n                    default:\n                        reader.skipType(tag & 7);\n                        break;\n                    }\n                }\n                return message;\n            };\n\n            /**\n             * Decodes a Timestamp message from the specified reader or buffer, length delimited.\n             * @function decodeDelimited\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n             * @returns {google.protobuf.Timestamp} Timestamp\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Timestamp.decodeDelimited = function decodeDelimited(reader) {\n                if (!(reader instanceof $Reader))\n                    reader = new $Reader(reader);\n                return this.decode(reader, reader.uint32());\n            };\n\n            /**\n             * Verifies a Timestamp message.\n             * @function verify\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {Object.<string,*>} message Plain object to verify\n             * @returns {string|null} `null` if valid, otherwise the reason why it is not\n             */\n            Timestamp.verify = function verify(message) {\n                if (typeof message !== \"object\" || message === null)\n                    return \"object expected\";\n                if (message.seconds != null && message.hasOwnProperty(\"seconds\"))\n                    if (!$util.isInteger(message.seconds) && !(message.seconds && $util.isInteger(message.seconds.low) && $util.isInteger(message.seconds.high)))\n                        return \"seconds: integer|Long expected\";\n                if (message.nanos != null && message.hasOwnProperty(\"nanos\"))\n                    if (!$util.isInteger(message.nanos))\n                        return \"nanos: integer expected\";\n                return null;\n            };\n\n            /**\n             * Creates a plain object from a Timestamp message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof google.protobuf.Timestamp\n             * @static\n             * @param {google.protobuf.Timestamp} message Timestamp\n             * @param {$protobuf.IConversionOptions} [options] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            Timestamp.toObject = function toObject(message, options) {\n                if (!options)\n                    options = {};\n                let object = {};\n                if (options.defaults) {\n                    object.seconds = 0;\n                    object.nanos = 0;\n                }\n                if (message.seconds != null && message.hasOwnProperty(\"seconds\"))\n                    if (typeof message.seconds === \"number\")\n                        object.seconds = options.longs === String ? String(message.seconds) : message.seconds;\n                    else\n                        object.seconds = options.longs === String ? $util.Long.prototype.toString.call(message.seconds) : options.longs === Number ? new $util.LongBits(message.seconds.low >>> 0, message.seconds.high >>> 0).toNumber() : message.seconds;\n                if (message.nanos != null && message.hasOwnProperty(\"nanos\"))\n                    object.nanos = message.nanos;\n                return object;\n            };\n\n            /**\n             * Converts this Timestamp to JSON.\n             * @function toJSON\n             * @memberof google.protobuf.Timestamp\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            Timestamp.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, _apollo_protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__.util.toJSONOptions);\n            };\n\n            return Timestamp;\n        })();\n\n        return protobuf;\n    })();\n\n    return google;\n})();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFwb2xsby91c2FnZS1yZXBvcnRpbmctcHJvdG9idWYvZ2VuZXJhdGVkL2VzbS9wcm90b2J1Zi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDbUQ7O0FBRW5EO0FBQ0EsZ0JBQWdCLDhEQUFnQixZQUFZLDhEQUFnQixVQUFVLDREQUFjOztBQUVwRjtBQUNBLGNBQWMsNkRBQWUsZ0JBQWdCLDZEQUFlLGdCQUFnQjs7QUFFckU7O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUNBQWlDO0FBQ25ELGtCQUFrQixpQ0FBaUM7QUFDbkQsa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGtCQUFrQjtBQUNwQyxrQkFBa0IsY0FBYztBQUNoQyxrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IscUJBQXFCO0FBQ3ZDLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixrQkFBa0I7QUFDcEMsa0JBQWtCLHlCQUF5QjtBQUMzQyxrQkFBa0IsMkJBQTJCO0FBQzdDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDLGtCQUFrQixhQUFhO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaUJBQWlCO0FBQzdFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDJDQUEyQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDJDQUEyQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiw0QkFBNEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsK0JBQStCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiw0QkFBNEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixtQ0FBbUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixxQ0FBcUM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlFQUFpRSwyQkFBMkI7QUFDNUY7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtRkFBbUYsMkJBQTJCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QyxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLE9BQU87QUFDeEIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGlCQUFpQixPQUFPO0FBQ3hCLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQyxpQkFBaUIsYUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSw4QkFBOEI7QUFDN0MsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBLCtDQUErQyw0REFBYztBQUM3RDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4QkFBOEI7QUFDcEQsc0JBQXNCLGFBQWE7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsaUJBQWlCO0FBQ2pGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxQkFBcUI7QUFDeEMscUJBQXFCLG1CQUFtQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJFQUEyRSx1Q0FBdUM7QUFDbEg7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9CQUFvQjtBQUN2QyxtQkFBbUIsa0JBQWtCO0FBQ3JDLHFCQUFxQixrQkFBa0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2RkFBNkYsdUNBQXVDO0FBQ3BJO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixvQkFBb0I7QUFDdkMsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkJBQTZCO0FBQ2hELG1CQUFtQixRQUFRO0FBQzNCLHFCQUFxQixtQkFBbUI7QUFDeEMsb0JBQW9CLE9BQU87QUFDM0Isb0JBQW9CLDhCQUE4QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2QkFBNkI7QUFDaEQscUJBQXFCLG1CQUFtQjtBQUN4QyxvQkFBb0IsT0FBTztBQUMzQixvQkFBb0IsOEJBQThCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1CQUFtQjtBQUN0QyxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtQkFBbUI7QUFDdEMsbUJBQW1CLDhCQUE4QjtBQUNqRCxxQkFBcUIsbUJBQW1CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1CQUFtQjtBQUN4QztBQUNBO0FBQ0EsbURBQW1ELDREQUFjO0FBQ2pFOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixzQkFBc0IsUUFBUTtBQUM5QixzQkFBc0IsUUFBUTtBQUM5QixzQkFBc0IsUUFBUTtBQUM5QjtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkJBQTZCO0FBQ25ELHNCQUFzQixhQUFhO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsaUJBQWlCO0FBQ2pGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLHdCQUF3QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEMscUJBQXFCLGVBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1RUFBdUUsbUNBQW1DO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkMsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGlCQUFpQjtBQUM1RjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5RkFBeUYsbUNBQW1DO0FBQzVIO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkMsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkJBQTZCO0FBQ2hELG1CQUFtQixRQUFRO0FBQzNCLHFCQUFxQixlQUFlO0FBQ3BDLG9CQUFvQixPQUFPO0FBQzNCLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZCQUE2QjtBQUNoRCxxQkFBcUIsZUFBZTtBQUNwQyxvQkFBb0IsT0FBTztBQUMzQixvQkFBb0IsOEJBQThCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1CQUFtQjtBQUN0QyxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBLHNEQUFzRCxVQUFVO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGVBQWU7QUFDbEMsbUJBQW1CLDhCQUE4QjtBQUNqRCxxQkFBcUIsbUJBQW1CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msa0JBQWtCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbUJBQW1CO0FBQ3hDO0FBQ0E7QUFDQSxtREFBbUQsNERBQWM7QUFDakU7O0FBRUE7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGFBQWE7QUFDbkMsc0JBQXNCLDhCQUE4QjtBQUNwRCxzQkFBc0IsYUFBYTtBQUNuQyxzQkFBc0IsYUFBYTtBQUNuQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZUFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxpQkFBaUI7QUFDakY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZUFBZTtBQUNsQyxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFFQUFxRSxpQ0FBaUM7QUFDdEc7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDZCQUE2QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVGQUF1RixpQ0FBaUM7QUFDeEg7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkJBQTZCO0FBQ2hELG1CQUFtQixRQUFRO0FBQzNCLHFCQUFxQixhQUFhO0FBQ2xDLG9CQUFvQixPQUFPO0FBQzNCLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZCQUE2QjtBQUNoRCxxQkFBcUIsYUFBYTtBQUNsQyxvQkFBb0IsT0FBTztBQUMzQixvQkFBb0IsOEJBQThCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1CQUFtQjtBQUN0QyxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2QkFBNkI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDLG1CQUFtQiw4QkFBOEI7QUFDakQscUJBQXFCLG1CQUFtQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2QkFBNkI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1CQUFtQjtBQUN4QztBQUNBO0FBQ0EsbURBQW1ELDREQUFjO0FBQ2pFOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3QkFBd0I7QUFDOUMsc0JBQXNCLHlDQUF5QztBQUMvRCxzQkFBc0IseUNBQXlDO0FBQy9ELHNCQUFzQixhQUFhO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsaUJBQWlCO0FBQ2pGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLG9DQUFvQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLG9DQUFvQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLHFCQUFxQixZQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0VBQW9FLGdDQUFnQztBQUNwRztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsYUFBYTtBQUNoQyxtQkFBbUIsa0JBQWtCO0FBQ3JDLHFCQUFxQixrQkFBa0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsaUJBQWlCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLGlCQUFpQjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNGQUFzRixnQ0FBZ0M7QUFDdEg7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGFBQWE7QUFDaEMsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkJBQTZCO0FBQ2hELG1CQUFtQixRQUFRO0FBQzNCLHFCQUFxQixZQUFZO0FBQ2pDLG9CQUFvQixPQUFPO0FBQzNCLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2QkFBNkI7QUFDaEQscUJBQXFCLFlBQVk7QUFDakMsb0JBQW9CLE9BQU87QUFDM0Isb0JBQW9CLDhCQUE4QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtQkFBbUI7QUFDdEMscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsWUFBWTtBQUMvQixtQkFBbUIsOEJBQThCO0FBQ2pELHFCQUFxQixtQkFBbUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGtCQUFrQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrQkFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbUJBQW1CO0FBQ3hDO0FBQ0E7QUFDQSxtREFBbUQsNERBQWM7QUFDakU7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIscUJBQXFCO0FBQy9DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixxQkFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsaUJBQWlCO0FBQ3JGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFCQUFxQjtBQUM1Qyx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEVBQTBFLHVDQUF1QztBQUNqSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0JBQW9CO0FBQzNDLHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDBCQUEwQjtBQUM5RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0RkFBNEYsdUNBQXVDO0FBQ25JO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvQkFBb0I7QUFDM0MsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHVCQUF1QixRQUFRO0FBQy9CLHlCQUF5QixtQkFBbUI7QUFDNUMsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHlCQUF5QixtQkFBbUI7QUFDNUMsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUMseUJBQXlCLGFBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMEJBQTBCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUMsdUJBQXVCLDhCQUE4QjtBQUNyRCx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywwQkFBMEI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBLHVEQUF1RCw0REFBYztBQUNyRTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCLHNCQUFzQixRQUFRO0FBQzlCO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGFBQWE7QUFDbkMsc0JBQXNCLGFBQWE7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsaUJBQWlCO0FBQ2pGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0JBQWtCO0FBQ3JDLHFCQUFxQixnQkFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3RUFBd0Usb0NBQW9DO0FBQzVHO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEMsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEZBQTBGLG9DQUFvQztBQUM5SDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCO0FBQ3BDLG1CQUFtQixrQkFBa0I7QUFDckMscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZCQUE2QjtBQUNoRCxtQkFBbUIsUUFBUTtBQUMzQixxQkFBcUIsZ0JBQWdCO0FBQ3JDLG9CQUFvQixPQUFPO0FBQzNCLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkJBQTZCO0FBQ2hELHFCQUFxQixnQkFBZ0I7QUFDckMsb0JBQW9CLE9BQU87QUFDM0Isb0JBQW9CLDhCQUE4QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtQkFBbUI7QUFDdEMscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0JBQWdCO0FBQ25DLG1CQUFtQiw4QkFBOEI7QUFDakQscUJBQXFCLG1CQUFtQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixtQkFBbUI7QUFDeEM7QUFDQTtBQUNBLG1EQUFtRCw0REFBYztBQUNqRTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsYUFBYTtBQUNuQyxzQkFBc0IsYUFBYTtBQUNuQyxzQkFBc0IsYUFBYTtBQUNuQyxzQkFBc0IsYUFBYTtBQUNuQyxzQkFBc0IsYUFBYTtBQUNuQyxzQkFBc0IseUJBQXlCO0FBQy9DLHNCQUFzQixhQUFhO0FBQ25DLHNCQUFzQixhQUFhO0FBQ25DLHNCQUFzQiwyQkFBMkI7QUFDakQsc0JBQXNCLDBCQUEwQjtBQUNoRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLGlCQUFpQjtBQUNqRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLG1DQUFtQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixrQ0FBa0M7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMscUJBQXFCLFlBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvRUFBb0UsZ0NBQWdDO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDLG1CQUFtQixrQkFBa0I7QUFDckMscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDBCQUEwQjtBQUMxRDtBQUNBO0FBQ0EsZ0NBQWdDLDBCQUEwQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNGQUFzRixnQ0FBZ0M7QUFDdEg7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGFBQWE7QUFDaEMsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkJBQTZCO0FBQ2hELG1CQUFtQixRQUFRO0FBQzNCLHFCQUFxQixZQUFZO0FBQ2pDLG9CQUFvQixPQUFPO0FBQzNCLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2QkFBNkI7QUFDaEQscUJBQXFCLFlBQVk7QUFDakMsb0JBQW9CLE9BQU87QUFDM0Isb0JBQW9CLDhCQUE4QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtQkFBbUI7QUFDdEMscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMEJBQTBCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMEJBQTBCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsWUFBWTtBQUMvQixtQkFBbUIsOEJBQThCO0FBQ2pELHFCQUFxQixtQkFBbUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMEJBQTBCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDBCQUEwQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbUJBQW1CO0FBQ3hDO0FBQ0E7QUFDQSxtREFBbUQsNERBQWM7QUFDakU7O0FBRUE7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdDQUF3QztBQUM5RCxzQkFBc0Isd0NBQXdDO0FBQzlELHNCQUFzQixxQ0FBcUM7QUFDM0Qsc0JBQXNCLHVDQUF1QztBQUM3RCxzQkFBc0IscUNBQXFDO0FBQzNELHNCQUFzQix5Q0FBeUM7QUFDL0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsaUJBQWlCO0FBQ2pGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFrRDtBQUN0RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFrRDtBQUN0RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLCtDQUErQztBQUNuRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLGlEQUFpRDtBQUNyRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLCtDQUErQztBQUNuRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFtRDtBQUN2RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IsdUVBQXVFO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1QkFBdUI7QUFDMUMscUJBQXFCLHFCQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZFQUE2RSx5Q0FBeUM7QUFDdEg7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QyxtQkFBbUIsa0JBQWtCO0FBQ3JDLHFCQUFxQixrQkFBa0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0ZBQStGLHlDQUF5QztBQUN4STtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0JBQXNCO0FBQ3pDLG1CQUFtQixrQkFBa0I7QUFDckMscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZCQUE2QjtBQUNoRCxtQkFBbUIsUUFBUTtBQUMzQixxQkFBcUIscUJBQXFCO0FBQzFDLG9CQUFvQixPQUFPO0FBQzNCLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkJBQTZCO0FBQ2hELHFCQUFxQixxQkFBcUI7QUFDMUMsb0JBQW9CLE9BQU87QUFDM0Isb0JBQW9CLDhCQUE4QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtQkFBbUI7QUFDdEMscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4QyxtQkFBbUIsOEJBQThCO0FBQ2pELHFCQUFxQixtQkFBbUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixtQkFBbUI7QUFDeEM7QUFDQTtBQUNBLG1EQUFtRCw0REFBYztBQUNqRTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtQ0FBbUM7QUFDN0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9DQUFvQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxpQkFBaUI7QUFDckY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsOEJBQThCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0NBQW9DO0FBQzNELHlCQUF5QixrQ0FBa0M7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnRkFBZ0Ysc0RBQXNEO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQ0FBbUM7QUFDMUQsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMEJBQTBCO0FBQzlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtHQUFrRyxzREFBc0Q7QUFDeEo7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1DQUFtQztBQUMxRCx1QkFBdUIsa0JBQWtCO0FBQ3pDLHlCQUF5QixrQkFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQsdUJBQXVCLFFBQVE7QUFDL0IseUJBQXlCLGtDQUFrQztBQUMzRCx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsOEJBQThCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQseUJBQXlCLGtDQUFrQztBQUMzRCx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsOEJBQThCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQyx5QkFBeUIsYUFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywwQkFBMEI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrQ0FBa0M7QUFDekQsdUJBQXVCLDhCQUE4QjtBQUNyRCx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywwQkFBMEI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBLHVEQUF1RCw0REFBYztBQUNyRTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbUNBQW1DO0FBQzdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvQ0FBb0M7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsaUJBQWlCO0FBQ3JGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9DQUFvQztBQUMzRCx5QkFBeUIsa0NBQWtDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0ZBQWdGLHNEQUFzRDtBQUN0STtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUNBQW1DO0FBQzFELHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDBCQUEwQjtBQUM5RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrR0FBa0csc0RBQXNEO0FBQ3hKO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQ0FBbUM7QUFDMUQsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHVCQUF1QixRQUFRO0FBQy9CLHlCQUF5QixrQ0FBa0M7QUFDM0Qsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHlCQUF5QixrQ0FBa0M7QUFDM0Qsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUMseUJBQXlCLGFBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMEJBQTBCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0NBQWtDO0FBQ3pELHVCQUF1Qiw4QkFBOEI7QUFDckQseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMEJBQTBCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQSx1REFBdUQsNERBQWM7QUFDckU7O0FBRUE7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGFBQWE7QUFDdkMsMEJBQTBCLGNBQWM7QUFDeEMsMEJBQTBCLGFBQWE7QUFDdkMsMEJBQTBCLGFBQWE7QUFDdkMsMEJBQTBCLGlDQUFpQztBQUMzRCwwQkFBMEIsaUNBQWlDO0FBQzNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpQ0FBaUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLGlCQUFpQjtBQUNyRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QiwyQ0FBMkM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QiwyQ0FBMkM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpQ0FBaUM7QUFDeEQseUJBQXlCLCtCQUErQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZFQUE2RSxtREFBbUQ7QUFDaEk7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdDQUFnQztBQUN2RCx1QkFBdUIsa0JBQWtCO0FBQ3pDLHlCQUF5QixrQkFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0ZBQStGLG1EQUFtRDtBQUNsSjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0NBQWdDO0FBQ3ZELHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZCQUE2QjtBQUNwRCx1QkFBdUIsUUFBUTtBQUMvQix5QkFBeUIsK0JBQStCO0FBQ3hELHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3Qiw4QkFBOEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHlCQUF5QiwrQkFBK0I7QUFDeEQsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUMseUJBQXlCLGFBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0JBQStCO0FBQ3RELHVCQUF1Qiw4QkFBOEI7QUFDckQseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBLHVEQUF1RCw0REFBYztBQUNyRTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdURBQXVEO0FBQ2pGLDBCQUEwQiwyQkFBMkI7QUFDckQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1DQUFtQztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxpQkFBaUI7QUFDckY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQWtEO0FBQzFFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IscUNBQXFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUNBQW1DO0FBQzFELHlCQUF5QixpQ0FBaUM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrRUFBK0UscURBQXFEO0FBQ3BJO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrQ0FBa0M7QUFDekQsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsaUNBQWlDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpR0FBaUcscURBQXFEO0FBQ3RKO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrQ0FBa0M7QUFDekQsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHVCQUF1QixRQUFRO0FBQy9CLHlCQUF5QixpQ0FBaUM7QUFDMUQsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHlCQUF5QixpQ0FBaUM7QUFDMUQsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUMseUJBQXlCLGFBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsaUNBQWlDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlDQUFpQztBQUN4RCx1QkFBdUIsOEJBQThCO0FBQ3JELHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpQ0FBaUM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQSx1REFBdUQsNERBQWM7QUFDckU7O0FBRUE7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDRDQUE0QztBQUN0RSwwQkFBMEIsZ0RBQWdEO0FBQzFFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpQ0FBaUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsaUJBQWlCO0FBQ3JGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFzRDtBQUM5RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLDJDQUEyQztBQUNuRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlDQUFpQztBQUN4RCx5QkFBeUIsK0JBQStCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkVBQTZFLG1EQUFtRDtBQUNoSTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0NBQWdDO0FBQ3ZELHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw2QkFBNkI7QUFDakU7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0ZBQStGLG1EQUFtRDtBQUNsSjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0NBQWdDO0FBQ3ZELHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZCQUE2QjtBQUNwRCx1QkFBdUIsUUFBUTtBQUMvQix5QkFBeUIsK0JBQStCO0FBQ3hELHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3Qiw4QkFBOEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZCQUE2QjtBQUNwRCx5QkFBeUIsK0JBQStCO0FBQ3hELHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3Qiw4QkFBOEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUJBQW1CO0FBQzFDLHlCQUF5QixhQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw2QkFBNkI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQkFBK0I7QUFDdEQsdUJBQXVCLDhCQUE4QjtBQUNyRCx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDZCQUE2QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0EsdURBQXVELDREQUFjO0FBQ3JFOztBQUVBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixhQUFhO0FBQ3ZDLDBCQUEwQiwyQkFBMkI7QUFDckQsMEJBQTBCLDJCQUEyQjtBQUNyRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUNBQXFDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxpQkFBaUI7QUFDckY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHFDQUFxQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHFDQUFxQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFDQUFxQztBQUM1RCx5QkFBeUIsbUNBQW1DO0FBQzVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUZBQWlGLHVEQUF1RDtBQUN4STtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0NBQW9DO0FBQzNELHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtR0FBbUcsdURBQXVEO0FBQzFKO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvQ0FBb0M7QUFDM0QsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHVCQUF1QixRQUFRO0FBQy9CLHlCQUF5QixtQ0FBbUM7QUFDNUQsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQseUJBQXlCLG1DQUFtQztBQUM1RCx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsOEJBQThCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQyx5QkFBeUIsYUFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1DQUFtQztBQUMxRCx1QkFBdUIsOEJBQThCO0FBQ3JELHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQSx1REFBdUQsNERBQWM7QUFDckU7O0FBRUE7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJCQUEyQjtBQUNyRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0NBQXdDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxpQkFBaUI7QUFDckY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IscUNBQXFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0NBQXdDO0FBQy9ELHlCQUF5QixzQ0FBc0M7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvRkFBb0YsMERBQTBEO0FBQzlJO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1Q0FBdUM7QUFDOUQsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzR0FBc0csMERBQTBEO0FBQ2hLO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1Q0FBdUM7QUFDOUQsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHVCQUF1QixRQUFRO0FBQy9CLHlCQUF5QixzQ0FBc0M7QUFDL0Qsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQseUJBQXlCLHNDQUFzQztBQUMvRCx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsOEJBQThCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQyx5QkFBeUIsYUFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0NBQXNDO0FBQzdELHVCQUF1Qiw4QkFBOEI7QUFDckQseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQSx1REFBdUQsNERBQWM7QUFDckU7O0FBRUE7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHVEQUF1RDtBQUNqRiwwQkFBMEIsYUFBYTtBQUN2QywwQkFBMEIsdURBQXVEO0FBQ2pGLDBCQUEwQiwyQkFBMkI7QUFDckQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9DQUFvQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLGlCQUFpQjtBQUNyRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QixrREFBa0Q7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQWtEO0FBQzFFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IscUNBQXFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0NBQW9DO0FBQzNELHlCQUF5QixrQ0FBa0M7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnRkFBZ0Ysc0RBQXNEO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQ0FBbUM7QUFDMUQsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsNEJBQTRCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHlCQUF5QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0dBQWtHLHNEQUFzRDtBQUN4SjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUNBQW1DO0FBQzFELHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZCQUE2QjtBQUNwRCx1QkFBdUIsUUFBUTtBQUMvQix5QkFBeUIsa0NBQWtDO0FBQzNELHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3Qiw4QkFBOEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQseUJBQXlCLGtDQUFrQztBQUMzRCx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsOEJBQThCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQyx5QkFBeUIsYUFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw0QkFBNEI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx5QkFBeUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0NBQWtDO0FBQ3pELHVCQUF1Qiw4QkFBOEI7QUFDckQseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsNEJBQTRCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx5QkFBeUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQSx1REFBdUQsNERBQWM7QUFDckU7O0FBRUE7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGFBQWE7QUFDdkMsMEJBQTBCLGFBQWE7QUFDdkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJDQUEyQztBQUNsRTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsaUJBQWlCO0FBQ3JGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkNBQTJDO0FBQ2xFLHlCQUF5Qix5Q0FBeUM7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1RkFBdUYsNkRBQTZEO0FBQ3BKO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwQ0FBMEM7QUFDakUsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUdBQXlHLDZEQUE2RDtBQUN0SztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMENBQTBDO0FBQ2pFLHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZCQUE2QjtBQUNwRCx1QkFBdUIsUUFBUTtBQUMvQix5QkFBeUIseUNBQXlDO0FBQ2xFLHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3Qiw4QkFBOEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHlCQUF5Qix5Q0FBeUM7QUFDbEUsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUMseUJBQXlCLGFBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIseUNBQXlDO0FBQ2hFLHVCQUF1Qiw4QkFBOEI7QUFDckQseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBLHVEQUF1RCw0REFBYztBQUNyRTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsYUFBYTtBQUN2QywwQkFBMEIsYUFBYTtBQUN2Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkNBQTJDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxpQkFBaUI7QUFDckY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLCtCQUErQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkNBQTJDO0FBQ2xFLHlCQUF5Qix5Q0FBeUM7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1RkFBdUYsNkRBQTZEO0FBQ3BKO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwQ0FBMEM7QUFDakUsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUdBQXlHLDZEQUE2RDtBQUN0SztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMENBQTBDO0FBQ2pFLHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZCQUE2QjtBQUNwRCx1QkFBdUIsUUFBUTtBQUMvQix5QkFBeUIseUNBQXlDO0FBQ2xFLHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3Qiw4QkFBOEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHlCQUF5Qix5Q0FBeUM7QUFDbEUsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUMseUJBQXlCLGFBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5Q0FBeUM7QUFDaEUsdUJBQXVCLDhCQUE4QjtBQUNyRCx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixtQkFBbUI7QUFDNUM7QUFDQTtBQUNBLHVEQUF1RCw0REFBYztBQUNyRTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxLQUFLOztBQUVMO0FBQ0EsQ0FBQzs7QUFFTTs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxpQkFBaUI7QUFDN0U7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0IsaUJBQWlCLGNBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3RUFBd0Usa0NBQWtDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QixlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwRkFBMEYsa0NBQWtDO0FBQzVIO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QixlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QyxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLGNBQWM7QUFDL0IsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGlCQUFpQixjQUFjO0FBQy9CLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQyxpQkFBaUIsYUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsY0FBYztBQUM3QixlQUFlLDhCQUE4QjtBQUM3QyxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0EsK0NBQStDLDREQUFjO0FBQzdEOztBQUVBO0FBQ0EsQ0FBQzs7QUFFTTs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQ0FBc0M7QUFDeEQsa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGFBQWE7QUFDL0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaUJBQWlCO0FBQzdFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGlDQUFpQztBQUNqRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEVBQTBFLG9DQUFvQztBQUM5RztBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQyxlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsaUJBQWlCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRGQUE0RixvQ0FBb0M7QUFDaEk7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEMsZUFBZSxrQkFBa0I7QUFDakMsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixnQkFBZ0I7QUFDakMsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QyxpQkFBaUIsZ0JBQWdCO0FBQ2pDLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQyxpQkFBaUIsYUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0IsZUFBZSw4QkFBOEI7QUFDN0MsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdEQUFnRDtBQUNsRSxrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IsYUFBYTtBQUMvQixrQkFBa0IsZ0RBQWdEO0FBQ2xFLGtCQUFrQixzQkFBc0I7QUFDeEMsa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGdEQUFnRDtBQUNsRSxrQkFBa0IsZ0RBQWdEO0FBQ2xFLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUscUJBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGlCQUFpQjtBQUM3RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixnQkFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0NBQWdDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxxQkFBcUI7QUFDcEMsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZFQUE2RSx1Q0FBdUM7QUFDcEg7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsZUFBZSxrQkFBa0I7QUFDakMsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0JBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9CQUFvQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixvQkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0JBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0ZBQStGLHVDQUF1QztBQUN0STtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QyxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLG1CQUFtQjtBQUNwQyxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGlCQUFpQixtQkFBbUI7QUFDcEMsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixvQkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixvQkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0JBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0JBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDLGVBQWUsOEJBQThCO0FBQzdDLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaUNBQWlDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNDQUFzQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3Q0FBd0M7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUNBQXlDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0EsK0NBQStDLDREQUFjO0FBQzdEOztBQUVBO0FBQ0EsQ0FBQzs7QUFFTTs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFhO0FBQy9CLGtCQUFrQixhQUFhO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxpQkFBaUI7QUFDN0U7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0VBQXdFLGtDQUFrQztBQUMxRztBQUNBO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUIsZUFBZSxrQkFBa0I7QUFDakMsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBGQUEwRixrQ0FBa0M7QUFDNUg7QUFDQTtBQUNBO0FBQ0EsZUFBZSxlQUFlO0FBQzlCLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsY0FBYztBQUMvQixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsaUJBQWlCLGNBQWM7QUFDL0IsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGVBQWUsOEJBQThCO0FBQzdDLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQyxrQkFBa0Isb0JBQW9CO0FBQ3RDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUNBQW1DO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxpQkFBaUI7QUFDN0U7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsbUNBQW1DO0FBQ25EO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1DQUFtQztBQUNsRCxpQkFBaUIsaUNBQWlDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkZBQTJGLHFEQUFxRDtBQUNoSjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtDQUFrQztBQUNqRCxlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkdBQTZHLHFEQUFxRDtBQUNsSztBQUNBO0FBQ0E7QUFDQSxlQUFlLGtDQUFrQztBQUNqRCxlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QyxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLGlDQUFpQztBQUNsRCxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsaUJBQWlCLGlDQUFpQztBQUNsRCxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEMsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUNBQWlDO0FBQ2hELGVBQWUsOEJBQThCO0FBQzdDLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9CQUFvQjtBQUN0QyxrQkFBa0IsZ0NBQWdDO0FBQ2xEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGlCQUFpQjtBQUM3RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiwyQkFBMkI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkJBQTJCO0FBQzFDLGlCQUFpQix5QkFBeUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtRkFBbUYsNkNBQTZDO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMEJBQTBCO0FBQ3pDLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsaUJBQWlCO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxR0FBcUcsNkNBQTZDO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMEJBQTBCO0FBQ3pDLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIseUJBQXlCO0FBQzFDLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsaUJBQWlCLHlCQUF5QjtBQUMxQyxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEMsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0JBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlCQUF5QjtBQUN4QyxlQUFlLDhCQUE4QjtBQUM3QyxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0JBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGdEQUFnRDtBQUNsRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaUJBQWlCO0FBQzdFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsaUJBQWlCLFdBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxRUFBcUUsK0JBQStCO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLGVBQWUsWUFBWTtBQUMzQixlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVGQUF1RiwrQkFBK0I7QUFDdEg7QUFDQTtBQUNBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsV0FBVztBQUM1QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGlCQUFpQixXQUFXO0FBQzVCLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQyxpQkFBaUIsYUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbUJBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsV0FBVztBQUMxQixlQUFlLDhCQUE4QjtBQUM3QyxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpQ0FBaUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlDQUFpQztBQUNuRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFlBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaUJBQWlCO0FBQzdFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDRCQUE0QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCLGlCQUFpQixVQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0VBQW9FLDhCQUE4QjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUIsZUFBZSxrQkFBa0I7QUFDakMsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLGlCQUFpQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0ZBQXNGLDhCQUE4QjtBQUNwSDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUIsZUFBZSxrQkFBa0I7QUFDakMsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixVQUFVO0FBQzNCLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsaUJBQWlCLFVBQVU7QUFDM0IsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0JBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFVBQVU7QUFDekIsZUFBZSw4QkFBOEI7QUFDN0MsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBLCtDQUErQyw0REFBYztBQUM3RDs7QUFFQTtBQUNBLENBQUM7O0FBRU07O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDLGtCQUFrQixjQUFjO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGlCQUFpQjtBQUM3RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixnQkFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQyxpQkFBaUIseUJBQXlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUZBQW1GLDZDQUE2QztBQUNoSTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBCQUEwQjtBQUN6QyxlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxR0FBcUcsNkNBQTZDO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMEJBQTBCO0FBQ3pDLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIseUJBQXlCO0FBQzFDLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsaUJBQWlCLHlCQUF5QjtBQUMxQyxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEMsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUJBQXlCO0FBQ3hDLGVBQWUsOEJBQThCO0FBQzdDLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrQkFBK0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9CQUFvQjtBQUN0QyxrQkFBa0Isc0NBQXNDO0FBQ3hELGtCQUFrQixpQ0FBaUM7QUFDbkQsa0JBQWtCLGFBQWE7QUFDL0Isa0JBQWtCLGNBQWM7QUFDaEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGlCQUFpQjtBQUM3RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixpQ0FBaUM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiwyQ0FBMkM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxVQUFVO0FBQ3pCLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0VBQWtFLDRCQUE0QjtBQUM5RjtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsZUFBZSxrQkFBa0I7QUFDakMsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsaUJBQWlCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9GQUFvRiw0QkFBNEI7QUFDaEg7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUTtBQUN6QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGlCQUFpQixRQUFRO0FBQ3pCLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQyxpQkFBaUIsYUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnQkFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSw4QkFBOEI7QUFDN0MsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9CQUFvQjtBQUN0QyxrQkFBa0IseUJBQXlCO0FBQzNDLGtCQUFrQixnQ0FBZ0M7QUFDbEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaUJBQWlCO0FBQzdFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLG1DQUFtQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDJCQUEyQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUI7QUFDdEMsaUJBQWlCLHFCQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtFQUErRSx5Q0FBeUM7QUFDeEg7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckMsZUFBZSxrQkFBa0I7QUFDakMsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsaUJBQWlCO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpR0FBaUcseUNBQXlDO0FBQzFJO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIscUJBQXFCO0FBQ3RDLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsaUJBQWlCLHFCQUFxQjtBQUN0QyxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEMsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxxQkFBcUI7QUFDcEMsZUFBZSw4QkFBOEI7QUFDN0MsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0JBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdDQUFnQztBQUNsRCxrQkFBa0IsNEVBQTRFO0FBQzlGLGtCQUFrQiwrQ0FBK0M7QUFDakUsa0JBQWtCLGdDQUFnQztBQUNsRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtCQUFrQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxpQkFBaUI7QUFDN0U7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsMkJBQTJCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQTBDO0FBQzFEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsMkJBQTJCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEVBQTBFLG9DQUFvQztBQUM5RztBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQyxlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMEJBQTBCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixtQkFBbUI7QUFDL0M7QUFDQTtBQUNBLDRCQUE0QixzREFBc0Q7QUFDbEY7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxnRkFBZ0YsaUJBQWlCO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0RkFBNEYsb0NBQW9DO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsZ0JBQWdCO0FBQ2pDLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUMsaUJBQWlCLGdCQUFnQjtBQUNqQyxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEMsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMEJBQTBCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbUJBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnQkFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzREFBc0Q7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0IsZUFBZSw4QkFBOEI7QUFDN0MsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBCQUEwQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixxQ0FBcUM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0RBQXNEO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0JBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWM7QUFDN0Q7O0FBRUE7QUFDQSxDQUFDOztBQUVNOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsYUFBYTtBQUN2QywwQkFBMEIsYUFBYTtBQUN2Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxpQkFBaUI7QUFDckY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQseUJBQXlCLDJCQUEyQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZFQUE2RSwrQ0FBK0M7QUFDNUg7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDRCQUE0QjtBQUNuRCx1QkFBdUIsa0JBQWtCO0FBQ3pDLHlCQUF5QixrQkFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrRkFBK0YsK0NBQStDO0FBQzlJO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw0QkFBNEI7QUFDbkQsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BELHVCQUF1QixRQUFRO0FBQy9CLHlCQUF5QiwyQkFBMkI7QUFDcEQsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQseUJBQXlCLDJCQUEyQjtBQUNwRCx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsOEJBQThCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQyx5QkFBeUIsYUFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyQkFBMkI7QUFDbEQsdUJBQXVCLDhCQUE4QjtBQUNyRCx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0EsdURBQXVELDREQUFjO0FBQ3JFOztBQUVBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLEtBQUs7O0FBRUw7QUFDQSxDQUFDOztBQUUyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhci1yZW50YWwtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvQGFwb2xsby91c2FnZS1yZXBvcnRpbmctcHJvdG9idWYvZ2VuZXJhdGVkL2VzbS9wcm90b2J1Zi5qcz83NTQyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qZXNsaW50LWRpc2FibGUgYmxvY2stc2NvcGVkLXZhciwgaWQtbGVuZ3RoLCBuby1jb250cm9sLXJlZ2V4LCBuby1tYWdpYy1udW1iZXJzLCBuby1wcm90b3R5cGUtYnVpbHRpbnMsIG5vLXJlZGVjbGFyZSwgbm8tc2hhZG93LCBuby12YXIsIHNvcnQtdmFycyovXG5pbXBvcnQgJHByb3RvYnVmIGZyb20gXCJAYXBvbGxvL3Byb3RvYnVmanMvbWluaW1hbFwiO1xuXG4vLyBDb21tb24gYWxpYXNlc1xuY29uc3QgJFJlYWRlciA9ICRwcm90b2J1Zi5SZWFkZXIsICRXcml0ZXIgPSAkcHJvdG9idWYuV3JpdGVyLCAkdXRpbCA9ICRwcm90b2J1Zi51dGlsO1xuXG4vLyBFeHBvcnRlZCByb290IG5hbWVzcGFjZVxuY29uc3QgJHJvb3QgPSAkcHJvdG9idWYucm9vdHNbXCJkZWZhdWx0XCJdIHx8ICgkcHJvdG9idWYucm9vdHNbXCJkZWZhdWx0XCJdID0ge30pO1xuXG5leHBvcnQgY29uc3QgVHJhY2UgPSAkcm9vdC5UcmFjZSA9ICgoKSA9PiB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVHJhY2UuXG4gICAgICogQGV4cG9ydHMgSVRyYWNlXG4gICAgICogQGludGVyZmFjZSBJVHJhY2VcbiAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfG51bGx9IFtzdGFydFRpbWVdIFRyYWNlIHN0YXJ0VGltZVxuICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB8bnVsbH0gW2VuZFRpbWVdIFRyYWNlIGVuZFRpbWVcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZHVyYXRpb25Oc10gVHJhY2UgZHVyYXRpb25Oc1xuICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSU5vZGV8bnVsbH0gW3Jvb3RdIFRyYWNlIHJvb3RcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2lzSW5jb21wbGV0ZV0gVHJhY2UgaXNJbmNvbXBsZXRlXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3NpZ25hdHVyZV0gVHJhY2Ugc2lnbmF0dXJlXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5XSBUcmFjZSB1bmV4ZWN1dGVkT3BlcmF0aW9uQm9keVxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt1bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZV0gVHJhY2UgdW5leGVjdXRlZE9wZXJhdGlvbk5hbWVcbiAgICAgKiBAcHJvcGVydHkge1RyYWNlLklEZXRhaWxzfG51bGx9IFtkZXRhaWxzXSBUcmFjZSBkZXRhaWxzXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2NsaWVudE5hbWVdIFRyYWNlIGNsaWVudE5hbWVcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbY2xpZW50VmVyc2lvbl0gVHJhY2UgY2xpZW50VmVyc2lvblxuICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSUhUVFB8bnVsbH0gW2h0dHBdIFRyYWNlIGh0dHBcbiAgICAgKiBAcHJvcGVydHkge1RyYWNlLklDYWNoZVBvbGljeXxudWxsfSBbY2FjaGVQb2xpY3ldIFRyYWNlIGNhY2hlUG9saWN5XG4gICAgICogQHByb3BlcnR5IHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfSBbcXVlcnlQbGFuXSBUcmFjZSBxdWVyeVBsYW5cbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2Z1bGxRdWVyeUNhY2hlSGl0XSBUcmFjZSBmdWxsUXVlcnlDYWNoZUhpdFxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxudWxsfSBbcGVyc2lzdGVkUXVlcnlIaXRdIFRyYWNlIHBlcnNpc3RlZFF1ZXJ5SGl0XG4gICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFtwZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyXSBUcmFjZSBwZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFtyZWdpc3RlcmVkT3BlcmF0aW9uXSBUcmFjZSByZWdpc3RlcmVkT3BlcmF0aW9uXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFtmb3JiaWRkZW5PcGVyYXRpb25dIFRyYWNlIGZvcmJpZGRlbk9wZXJhdGlvblxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtmaWVsZEV4ZWN1dGlvbldlaWdodF0gVHJhY2UgZmllbGRFeGVjdXRpb25XZWlnaHRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVHJhY2UuXG4gICAgICogQGV4cG9ydHMgVHJhY2VcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUcmFjZS5cbiAgICAgKiBAaW1wbGVtZW50cyBJVHJhY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lUcmFjZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyYWNlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBzdGFydFRpbWUuXG4gICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB8bnVsbHx1bmRlZmluZWR9IHN0YXJ0VGltZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5zdGFydFRpbWUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgZW5kVGltZS5cbiAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVRpbWVzdGFtcHxudWxsfHVuZGVmaW5lZH0gZW5kVGltZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5lbmRUaW1lID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIGR1cmF0aW9uTnMuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBkdXJhdGlvbk5zXG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLmR1cmF0aW9uTnMgPSAwO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2Ugcm9vdC5cbiAgICAgKiBAbWVtYmVyIHtUcmFjZS5JTm9kZXxudWxsfHVuZGVmaW5lZH0gcm9vdFxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5yb290ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIGlzSW5jb21wbGV0ZS5cbiAgICAgKiBAbWVtYmVyIHtib29sZWFufSBpc0luY29tcGxldGVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuaXNJbmNvbXBsZXRlID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBzaWduYXR1cmUuXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBzaWduYXR1cmVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuc2lnbmF0dXJlID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIHVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5LlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gdW5leGVjdXRlZE9wZXJhdGlvbkJvZHlcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkgPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgdW5leGVjdXRlZE9wZXJhdGlvbk5hbWUuXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSB1bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS51bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZSA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBkZXRhaWxzLlxuICAgICAqIEBtZW1iZXIge1RyYWNlLklEZXRhaWxzfG51bGx8dW5kZWZpbmVkfSBkZXRhaWxzXG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLmRldGFpbHMgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgY2xpZW50TmFtZS5cbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGNsaWVudE5hbWVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuY2xpZW50TmFtZSA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBjbGllbnRWZXJzaW9uLlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gY2xpZW50VmVyc2lvblxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5jbGllbnRWZXJzaW9uID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIGh0dHAuXG4gICAgICogQG1lbWJlciB7VHJhY2UuSUhUVFB8bnVsbHx1bmRlZmluZWR9IGh0dHBcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuaHR0cCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBjYWNoZVBvbGljeS5cbiAgICAgKiBAbWVtYmVyIHtUcmFjZS5JQ2FjaGVQb2xpY3l8bnVsbHx1bmRlZmluZWR9IGNhY2hlUG9saWN5XG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLmNhY2hlUG9saWN5ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIHF1ZXJ5UGxhbi5cbiAgICAgKiBAbWVtYmVyIHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfHVuZGVmaW5lZH0gcXVlcnlQbGFuXG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLnF1ZXJ5UGxhbiA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSBmdWxsUXVlcnlDYWNoZUhpdC5cbiAgICAgKiBAbWVtYmVyIHtib29sZWFufSBmdWxsUXVlcnlDYWNoZUhpdFxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5mdWxsUXVlcnlDYWNoZUhpdCA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgcGVyc2lzdGVkUXVlcnlIaXQuXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn0gcGVyc2lzdGVkUXVlcnlIaXRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUucGVyc2lzdGVkUXVlcnlIaXQgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIHBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIuXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn0gcGVyc2lzdGVkUXVlcnlSZWdpc3RlclxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZSByZWdpc3RlcmVkT3BlcmF0aW9uLlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IHJlZ2lzdGVyZWRPcGVyYXRpb25cbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUucmVnaXN0ZXJlZE9wZXJhdGlvbiA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2UgZm9yYmlkZGVuT3BlcmF0aW9uLlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IGZvcmJpZGRlbk9wZXJhdGlvblxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5mb3JiaWRkZW5PcGVyYXRpb24gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlIGZpZWxkRXhlY3V0aW9uV2VpZ2h0LlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gZmllbGRFeGVjdXRpb25XZWlnaHRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuZmllbGRFeGVjdXRpb25XZWlnaHQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBUcmFjZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lUcmFjZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqIEByZXR1cm5zIHtUcmFjZX0gVHJhY2UgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBUcmFjZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHJhY2UgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lUcmFjZX0gbWVzc2FnZSBUcmFjZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgVHJhY2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVuZFRpbWVcIikpXG4gICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmVuY29kZShtZXNzYWdlLmVuZFRpbWUsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRUaW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydFRpbWVcIikpXG4gICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmVuY29kZShtZXNzYWdlLnN0YXJ0VGltZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5kZXRhaWxzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZXRhaWxzXCIpKVxuICAgICAgICAgICAgJHJvb3QuVHJhY2UuRGV0YWlscy5lbmNvZGUobWVzc2FnZS5kZXRhaWxzLCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNsaWVudE5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNsaWVudE5hbWVcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDIgPSovNTgpLnN0cmluZyhtZXNzYWdlLmNsaWVudE5hbWUpO1xuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnRWZXJzaW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjbGllbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAyID0qLzY2KS5zdHJpbmcobWVzc2FnZS5jbGllbnRWZXJzaW9uKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaHR0cCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaHR0cFwiKSlcbiAgICAgICAgICAgICRyb290LlRyYWNlLkhUVFAuZW5jb2RlKG1lc3NhZ2UuaHR0cCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMCwgd2lyZVR5cGUgMiA9Ki84MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb25OcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZHVyYXRpb25Oc1wiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTEsIHdpcmVUeXBlIDAgPSovODgpLnVpbnQ2NChtZXNzYWdlLmR1cmF0aW9uTnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5yb290ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyb290XCIpKVxuICAgICAgICAgICAgJHJvb3QuVHJhY2UuTm9kZS5lbmNvZGUobWVzc2FnZS5yb290LCB3cml0ZXIudWludDMyKC8qIGlkIDE0LCB3aXJlVHlwZSAyID0qLzExNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVQb2xpY3kgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNhY2hlUG9saWN5XCIpKVxuICAgICAgICAgICAgJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kuZW5jb2RlKG1lc3NhZ2UuY2FjaGVQb2xpY3ksIHdyaXRlci51aW50MzIoLyogaWQgMTgsIHdpcmVUeXBlIDIgPSovMTQ2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5zaWduYXR1cmUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNpZ25hdHVyZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTksIHdpcmVUeXBlIDIgPSovMTU0KS5zdHJpbmcobWVzc2FnZS5zaWduYXR1cmUpO1xuICAgICAgICBpZiAobWVzc2FnZS5mdWxsUXVlcnlDYWNoZUhpdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZnVsbFF1ZXJ5Q2FjaGVIaXRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIwLCB3aXJlVHlwZSAwID0qLzE2MCkuYm9vbChtZXNzYWdlLmZ1bGxRdWVyeUNhY2hlSGl0KTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlcnNpc3RlZFF1ZXJ5SGl0XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyMSwgd2lyZVR5cGUgMCA9Ki8xNjgpLmJvb2wobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXJcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIyLCB3aXJlVHlwZSAwID0qLzE3NikuYm9vbChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIpO1xuICAgICAgICBpZiAobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZWdpc3RlcmVkT3BlcmF0aW9uXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyNCwgd2lyZVR5cGUgMCA9Ki8xOTIpLmJvb2wobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJmb3JiaWRkZW5PcGVyYXRpb25cIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDI1LCB3aXJlVHlwZSAwID0qLzIwMCkuYm9vbChtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbik7XG4gICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5UGxhbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlQbGFuXCIpKVxuICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5lbmNvZGUobWVzc2FnZS5xdWVyeVBsYW4sIHdyaXRlci51aW50MzIoLyogaWQgMjYsIHdpcmVUeXBlIDIgPSovMjEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uQm9keSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidW5leGVjdXRlZE9wZXJhdGlvbkJvZHlcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDI3LCB3aXJlVHlwZSAyID0qLzIxOCkuc3RyaW5nKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkpO1xuICAgICAgICBpZiAobWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidW5leGVjdXRlZE9wZXJhdGlvbk5hbWVcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDI4LCB3aXJlVHlwZSAyID0qLzIyNikuc3RyaW5nKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUpO1xuICAgICAgICBpZiAobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZmllbGRFeGVjdXRpb25XZWlnaHRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMxLCB3aXJlVHlwZSAxID0qLzI0OSkuZG91YmxlKG1lc3NhZ2UuZmllbGRFeGVjdXRpb25XZWlnaHQpO1xuICAgICAgICBpZiAobWVzc2FnZS5pc0luY29tcGxldGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlzSW5jb21wbGV0ZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMzMsIHdpcmVUeXBlIDAgPSovMjY0KS5ib29sKG1lc3NhZ2UuaXNJbmNvbXBsZXRlKTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRyYWNlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJVHJhY2V9IG1lc3NhZ2UgVHJhY2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFRyYWNlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUcmFjZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7VHJhY2V9IFRyYWNlXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBUcmFjZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmR1cmF0aW9uTnMgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vdCA9ICRyb290LlRyYWNlLk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzM6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5pc0luY29tcGxldGUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNpZ25hdHVyZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uQm9keSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjg6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRldGFpbHMgPSAkcm9vdC5UcmFjZS5EZXRhaWxzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jbGllbnROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2xpZW50VmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5odHRwID0gJHJvb3QuVHJhY2UuSFRUUC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhY2hlUG9saWN5ID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjY6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeVBsYW4gPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZnVsbFF1ZXJ5Q2FjaGVIaXQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjU6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb24gPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmZpZWxkRXhlY3V0aW9uV2VpZ2h0ID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUcmFjZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1RyYWNlfSBUcmFjZVxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgVHJhY2UuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgVHJhY2UgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgVHJhY2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0VGltZVwiKSkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC52ZXJpZnkobWVzc2FnZS5zdGFydFRpbWUpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInN0YXJ0VGltZS5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5kVGltZVwiKSkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC52ZXJpZnkobWVzc2FnZS5lbmRUaW1lKTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmRUaW1lLlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb25OcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkdXJhdGlvbk5zXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5kdXJhdGlvbk5zKSAmJiAhKG1lc3NhZ2UuZHVyYXRpb25OcyAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5kdXJhdGlvbk5zLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZHVyYXRpb25Ocy5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZHVyYXRpb25OczogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb3QgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicm9vdFwiKSkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UuTm9kZS52ZXJpZnkobWVzc2FnZS5yb290KTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyb290LlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaXNJbmNvbXBsZXRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlzSW5jb21wbGV0ZVwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5pc0luY29tcGxldGUgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImlzSW5jb21wbGV0ZTogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5zaWduYXR1cmUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2lnbmF0dXJlXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnNpZ25hdHVyZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2lnbmF0dXJlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidW5leGVjdXRlZE9wZXJhdGlvbkJvZHlcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5OiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidW5leGVjdXRlZE9wZXJhdGlvbk5hbWVcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInVuZXhlY3V0ZWRPcGVyYXRpb25OYW1lOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZGV0YWlscyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXRhaWxzXCIpKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5EZXRhaWxzLnZlcmlmeShtZXNzYWdlLmRldGFpbHMpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImRldGFpbHMuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnROYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudE5hbWVcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuY2xpZW50TmFtZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2xpZW50TmFtZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLmNsaWVudFZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2xpZW50VmVyc2lvblwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5jbGllbnRWZXJzaW9uKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjbGllbnRWZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaHR0cCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJodHRwXCIpKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5IVFRQLnZlcmlmeShtZXNzYWdlLmh0dHApO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImh0dHAuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jYWNoZVBvbGljeSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjYWNoZVBvbGljeVwiKSkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kudmVyaWZ5KG1lc3NhZ2UuY2FjaGVQb2xpY3kpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImNhY2hlUG9saWN5LlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlQbGFuICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInF1ZXJ5UGxhblwiKSkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS52ZXJpZnkobWVzc2FnZS5xdWVyeVBsYW4pO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInF1ZXJ5UGxhbi5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZ1bGxRdWVyeUNhY2hlSGl0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZ1bGxRdWVyeUNhY2hlSGl0XCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmZ1bGxRdWVyeUNhY2hlSGl0ICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmdWxsUXVlcnlDYWNoZUhpdDogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwZXJzaXN0ZWRRdWVyeUhpdFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdCAhPT0gXCJib29sZWFuXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicGVyc2lzdGVkUXVlcnlIaXQ6IGJvb2xlYW4gZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlSZWdpc3RlciAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXIgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXI6IGJvb2xlYW4gZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZWdpc3RlcmVkT3BlcmF0aW9uXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb24gIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJlZ2lzdGVyZWRPcGVyYXRpb246IGJvb2xlYW4gZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZvcmJpZGRlbk9wZXJhdGlvblwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb24gIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImZvcmJpZGRlbk9wZXJhdGlvbjogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmaWVsZEV4ZWN1dGlvbldlaWdodFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCAhPT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWVsZEV4ZWN1dGlvbldlaWdodDogbnVtYmVyIGV4cGVjdGVkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUcmFjZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7VHJhY2V9IG1lc3NhZ2UgVHJhY2VcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIFRyYWNlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC5lbmRUaW1lID0gbnVsbDtcbiAgICAgICAgICAgIG9iamVjdC5zdGFydFRpbWUgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmRldGFpbHMgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmNsaWVudE5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LmNsaWVudFZlcnNpb24gPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0Lmh0dHAgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmR1cmF0aW9uTnMgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LnJvb3QgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LmNhY2hlUG9saWN5ID0gbnVsbDtcbiAgICAgICAgICAgIG9iamVjdC5zaWduYXR1cmUgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LmZ1bGxRdWVyeUNhY2hlSGl0ID0gZmFsc2U7XG4gICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlIaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIG9iamVjdC5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyID0gZmFsc2U7XG4gICAgICAgICAgICBvYmplY3QucmVnaXN0ZXJlZE9wZXJhdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgb2JqZWN0LmZvcmJpZGRlbk9wZXJhdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgb2JqZWN0LnF1ZXJ5UGxhbiA9IG51bGw7XG4gICAgICAgICAgICBvYmplY3QudW5leGVjdXRlZE9wZXJhdGlvbkJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LnVuZXhlY3V0ZWRPcGVyYXRpb25OYW1lID0gXCJcIjtcbiAgICAgICAgICAgIG9iamVjdC5maWVsZEV4ZWN1dGlvbldlaWdodCA9IDA7XG4gICAgICAgICAgICBvYmplY3QuaXNJbmNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRUaW1lXCIpKVxuICAgICAgICAgICAgb2JqZWN0LmVuZFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KG1lc3NhZ2UuZW5kVGltZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGFydFRpbWVcIikpXG4gICAgICAgICAgICBvYmplY3Quc3RhcnRUaW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChtZXNzYWdlLnN0YXJ0VGltZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLmRldGFpbHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGV0YWlsc1wiKSlcbiAgICAgICAgICAgIG9iamVjdC5kZXRhaWxzID0gJHJvb3QuVHJhY2UuRGV0YWlscy50b09iamVjdChtZXNzYWdlLmRldGFpbHMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnROYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudE5hbWVcIikpXG4gICAgICAgICAgICBvYmplY3QuY2xpZW50TmFtZSA9IG1lc3NhZ2UuY2xpZW50TmFtZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2xpZW50VmVyc2lvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjbGllbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgb2JqZWN0LmNsaWVudFZlcnNpb24gPSBtZXNzYWdlLmNsaWVudFZlcnNpb247XG4gICAgICAgIGlmIChtZXNzYWdlLmh0dHAgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaHR0cFwiKSlcbiAgICAgICAgICAgIG9iamVjdC5odHRwID0gJHJvb3QuVHJhY2UuSFRUUC50b09iamVjdChtZXNzYWdlLmh0dHAsIG9wdGlvbnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5kdXJhdGlvbk5zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImR1cmF0aW9uTnNcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuZHVyYXRpb25OcyA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3QuZHVyYXRpb25OcyA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLmR1cmF0aW9uTnMpIDogbWVzc2FnZS5kdXJhdGlvbk5zO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5kdXJhdGlvbk5zID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmR1cmF0aW9uTnMpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UuZHVyYXRpb25Ocy5sb3cgPj4+IDAsIG1lc3NhZ2UuZHVyYXRpb25Ocy5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UuZHVyYXRpb25OcztcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb290XCIpKVxuICAgICAgICAgICAgb2JqZWN0LnJvb3QgPSAkcm9vdC5UcmFjZS5Ob2RlLnRvT2JqZWN0KG1lc3NhZ2Uucm9vdCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNhY2hlUG9saWN5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNhY2hlUG9saWN5XCIpKVxuICAgICAgICAgICAgb2JqZWN0LmNhY2hlUG9saWN5ID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kudG9PYmplY3QobWVzc2FnZS5jYWNoZVBvbGljeSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnNpZ25hdHVyZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzaWduYXR1cmVcIikpXG4gICAgICAgICAgICBvYmplY3Quc2lnbmF0dXJlID0gbWVzc2FnZS5zaWduYXR1cmU7XG4gICAgICAgIGlmIChtZXNzYWdlLmZ1bGxRdWVyeUNhY2hlSGl0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZ1bGxRdWVyeUNhY2hlSGl0XCIpKVxuICAgICAgICAgICAgb2JqZWN0LmZ1bGxRdWVyeUNhY2hlSGl0ID0gbWVzc2FnZS5mdWxsUXVlcnlDYWNoZUhpdDtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGVyc2lzdGVkUXVlcnlIaXRcIikpXG4gICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlIaXQgPSBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0O1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeVJlZ2lzdGVyICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBlcnNpc3RlZFF1ZXJ5UmVnaXN0ZXJcIikpXG4gICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlSZWdpc3RlciA9IG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlSZWdpc3RlcjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZWdpc3RlcmVkT3BlcmF0aW9uXCIpKVxuICAgICAgICAgICAgb2JqZWN0LnJlZ2lzdGVyZWRPcGVyYXRpb24gPSBtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb247XG4gICAgICAgIGlmIChtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmb3JiaWRkZW5PcGVyYXRpb25cIikpXG4gICAgICAgICAgICBvYmplY3QuZm9yYmlkZGVuT3BlcmF0aW9uID0gbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb247XG4gICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5UGxhbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJxdWVyeVBsYW5cIikpXG4gICAgICAgICAgICBvYmplY3QucXVlcnlQbGFuID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS50b09iamVjdChtZXNzYWdlLnF1ZXJ5UGxhbiwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5XCIpKVxuICAgICAgICAgICAgb2JqZWN0LnVuZXhlY3V0ZWRPcGVyYXRpb25Cb2R5ID0gbWVzc2FnZS51bmV4ZWN1dGVkT3BlcmF0aW9uQm9keTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidW5leGVjdXRlZE9wZXJhdGlvbk5hbWVcIikpXG4gICAgICAgICAgICBvYmplY3QudW5leGVjdXRlZE9wZXJhdGlvbk5hbWUgPSBtZXNzYWdlLnVuZXhlY3V0ZWRPcGVyYXRpb25OYW1lO1xuICAgICAgICBpZiAobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmaWVsZEV4ZWN1dGlvbldlaWdodFwiKSlcbiAgICAgICAgICAgIG9iamVjdC5maWVsZEV4ZWN1dGlvbldlaWdodCA9IG9wdGlvbnMuanNvbiAmJiAhaXNGaW5pdGUobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCkgPyBTdHJpbmcobWVzc2FnZS5maWVsZEV4ZWN1dGlvbldlaWdodCkgOiBtZXNzYWdlLmZpZWxkRXhlY3V0aW9uV2VpZ2h0O1xuICAgICAgICBpZiAobWVzc2FnZS5pc0luY29tcGxldGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaXNJbmNvbXBsZXRlXCIpKVxuICAgICAgICAgICAgb2JqZWN0LmlzSW5jb21wbGV0ZSA9IG1lc3NhZ2UuaXNJbmNvbXBsZXRlO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIFRyYWNlIHRvIEpTT04uXG4gICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgVHJhY2UuQ2FjaGVQb2xpY3kgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBDYWNoZVBvbGljeS5cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSUNhY2hlUG9saWN5XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGV8bnVsbH0gW3Njb3BlXSBDYWNoZVBvbGljeSBzY29wZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbbWF4QWdlTnNdIENhY2hlUG9saWN5IG1heEFnZU5zXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENhY2hlUG9saWN5LlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ2FjaGVQb2xpY3kuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElDYWNoZVBvbGljeVxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JQ2FjaGVQb2xpY3k9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIENhY2hlUG9saWN5KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGVQb2xpY3kgc2NvcGUuXG4gICAgICAgICAqIEBtZW1iZXIge1RyYWNlLkNhY2hlUG9saWN5LlNjb3BlfSBzY29wZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS5wcm90b3R5cGUuc2NvcGUgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZVBvbGljeSBtYXhBZ2VOcy5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBtYXhBZ2VOc1xuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS5wcm90b3R5cGUubWF4QWdlTnMgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IENhY2hlUG9saWN5IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklDYWNoZVBvbGljeT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuQ2FjaGVQb2xpY3l9IENhY2hlUG9saWN5IGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWNoZVBvbGljeShwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENhY2hlUG9saWN5IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkNhY2hlUG9saWN5LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5DYWNoZVBvbGljeVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUNhY2hlUG9saWN5fSBtZXNzYWdlIENhY2hlUG9saWN5IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgQ2FjaGVQb2xpY3kuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNjb3BlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzY29wZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS5zY29wZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tYXhBZ2VOcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWF4QWdlTnNcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5pbnQ2NChtZXNzYWdlLm1heEFnZU5zKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDYWNoZVBvbGljeSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5DYWNoZVBvbGljeS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklDYWNoZVBvbGljeX0gbWVzc2FnZSBDYWNoZVBvbGljeSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIENhY2hlUG9saWN5LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgQ2FjaGVQb2xpY3kgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkNhY2hlUG9saWN5fSBDYWNoZVBvbGljeVxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIENhY2hlUG9saWN5LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLkNhY2hlUG9saWN5KCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NvcGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1heEFnZU5zID0gcmVhZGVyLmludDY0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBDYWNoZVBvbGljeSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5DYWNoZVBvbGljeVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuQ2FjaGVQb2xpY3l9IENhY2hlUG9saWN5XG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgQ2FjaGVQb2xpY3kuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgQ2FjaGVQb2xpY3kgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIENhY2hlUG9saWN5LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNjb3BlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNjb3BlXCIpKVxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5zY29wZSkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNjb3BlOiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1heEFnZU5zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1heEFnZU5zXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UubWF4QWdlTnMpICYmICEobWVzc2FnZS5tYXhBZ2VOcyAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5tYXhBZ2VOcy5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLm1heEFnZU5zLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibWF4QWdlTnM6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIENhY2hlUG9saWN5IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5DYWNoZVBvbGljeVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuQ2FjaGVQb2xpY3l9IG1lc3NhZ2UgQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5zY29wZSA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiVU5LTk9XTlwiIDogMDtcbiAgICAgICAgICAgICAgICBvYmplY3QubWF4QWdlTnMgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2NvcGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2NvcGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnNjb3BlID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGVbbWVzc2FnZS5zY29wZV0gOiBtZXNzYWdlLnNjb3BlO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWF4QWdlTnMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWF4QWdlTnNcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLm1heEFnZU5zID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF4QWdlTnMgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5tYXhBZ2VOcykgOiBtZXNzYWdlLm1heEFnZU5zO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1heEFnZU5zID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLm1heEFnZU5zKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLm1heEFnZU5zLmxvdyA+Pj4gMCwgbWVzc2FnZS5tYXhBZ2VOcy5oaWdoID4+PiAwKS50b051bWJlcigpIDogbWVzc2FnZS5tYXhBZ2VOcztcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgQ2FjaGVQb2xpY3kgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuQ2FjaGVQb2xpY3lcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIENhY2hlUG9saWN5LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2NvcGUgZW51bS5cbiAgICAgICAgICogQG5hbWUgVHJhY2UuQ2FjaGVQb2xpY3kuU2NvcGVcbiAgICAgICAgICogQGVudW0ge3N0cmluZ31cbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFVOS05PV049MCBVTktOT1dOIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBQVUJMSUM9MSBQVUJMSUMgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFBSSVZBVEU9MiBQUklWQVRFIHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBDYWNoZVBvbGljeS5TY29wZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzBdID0gXCJVTktOT1dOXCJdID0gMDtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJQVUJMSUNcIl0gPSAxO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIlBSSVZBVEVcIl0gPSAyO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gQ2FjaGVQb2xpY3k7XG4gICAgfSkoKTtcblxuICAgIFRyYWNlLkRldGFpbHMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZXRhaWxzLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGludGVyZmFjZSBJRGV0YWlsc1xuICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLHN0cmluZz58bnVsbH0gW3ZhcmlhYmxlc0pzb25dIERldGFpbHMgdmFyaWFibGVzSnNvblxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbb3BlcmF0aW9uTmFtZV0gRGV0YWlscyBvcGVyYXRpb25OYW1lXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERldGFpbHMuXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBEZXRhaWxzLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGV0YWlsc1xuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JRGV0YWlscz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gRGV0YWlscyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLnZhcmlhYmxlc0pzb24gPSB7fTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRGV0YWlscyB2YXJpYWJsZXNKc29uLlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3QuPHN0cmluZyxzdHJpbmc+fSB2YXJpYWJsZXNKc29uXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5EZXRhaWxzXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRGV0YWlscy5wcm90b3R5cGUudmFyaWFibGVzSnNvbiA9ICR1dGlsLmVtcHR5T2JqZWN0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRhaWxzIG9wZXJhdGlvbk5hbWUuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gb3BlcmF0aW9uTmFtZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRGV0YWlsc1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIERldGFpbHMucHJvdG90eXBlLm9wZXJhdGlvbk5hbWUgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IERldGFpbHMgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5EZXRhaWxzXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JRGV0YWlscz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuRGV0YWlsc30gRGV0YWlscyBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRGV0YWlscy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXRhaWxzKHByb3BlcnRpZXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGV0YWlscyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5EZXRhaWxzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5EZXRhaWxzXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JRGV0YWlsc30gbWVzc2FnZSBEZXRhaWxzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgRGV0YWlscy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub3BlcmF0aW9uTmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwib3BlcmF0aW9uTmFtZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLnN0cmluZyhtZXNzYWdlLm9wZXJhdGlvbk5hbWUpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFyaWFibGVzSnNvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidmFyaWFibGVzSnNvblwiKSlcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMobWVzc2FnZS52YXJpYWJsZXNKc29uKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKS51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKGtleXNbaV0pLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS52YXJpYWJsZXNKc29uW2tleXNbaV1dKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZXRhaWxzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkRldGFpbHMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkRldGFpbHNcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklEZXRhaWxzfSBtZXNzYWdlIERldGFpbHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBEZXRhaWxzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgRGV0YWlscyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5EZXRhaWxzXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5EZXRhaWxzfSBEZXRhaWxzXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgRGV0YWlscy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5EZXRhaWxzKCksIGtleTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFyaWFibGVzSnNvbiA9PT0gJHV0aWwuZW1wdHlPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhcmlhYmxlc0pzb24gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIucG9zKys7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmFyaWFibGVzSnNvbltrZXldID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub3BlcmF0aW9uTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIERldGFpbHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRGV0YWlsc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuRGV0YWlsc30gRGV0YWlsc1xuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIERldGFpbHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgRGV0YWlscyBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5EZXRhaWxzXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAqL1xuICAgICAgICBEZXRhaWxzLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnZhcmlhYmxlc0pzb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidmFyaWFibGVzSnNvblwiKSkge1xuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNPYmplY3QobWVzc2FnZS52YXJpYWJsZXNKc29uKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidmFyaWFibGVzSnNvbjogb2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IE9iamVjdC5rZXlzKG1lc3NhZ2UudmFyaWFibGVzSnNvbik7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS52YXJpYWJsZXNKc29uW2tleVtpXV0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidmFyaWFibGVzSnNvbjogc3RyaW5ne2s6c3RyaW5nfSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub3BlcmF0aW9uTmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJvcGVyYXRpb25OYW1lXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5vcGVyYXRpb25OYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib3BlcmF0aW9uTmFtZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGV0YWlscyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRGV0YWlsc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuRGV0YWlsc30gbWVzc2FnZSBEZXRhaWxzXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgRGV0YWlscy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnZhcmlhYmxlc0pzb24gPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgIG9iamVjdC5vcGVyYXRpb25OYW1lID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9wZXJhdGlvbk5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib3BlcmF0aW9uTmFtZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Qub3BlcmF0aW9uTmFtZSA9IG1lc3NhZ2Uub3BlcmF0aW9uTmFtZTtcbiAgICAgICAgICAgIGxldCBrZXlzMjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnZhcmlhYmxlc0pzb24gJiYgKGtleXMyID0gT2JqZWN0LmtleXMobWVzc2FnZS52YXJpYWJsZXNKc29uKSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnZhcmlhYmxlc0pzb24gPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGtleXMyLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudmFyaWFibGVzSnNvbltrZXlzMltqXV0gPSBtZXNzYWdlLnZhcmlhYmxlc0pzb25ba2V5czJbal1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydHMgdGhpcyBEZXRhaWxzIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkRldGFpbHNcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIERldGFpbHMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBEZXRhaWxzO1xuICAgIH0pKCk7XG5cbiAgICBUcmFjZS5FcnJvciA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhbiBFcnJvci5cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSUVycm9yXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFttZXNzYWdlXSBFcnJvciBtZXNzYWdlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPFRyYWNlLklMb2NhdGlvbj58bnVsbH0gW2xvY2F0aW9uXSBFcnJvciBsb2NhdGlvblxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbdGltZU5zXSBFcnJvciB0aW1lTnNcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2pzb25dIEVycm9yIGpzb25cbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRXJyb3IuXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gRXJyb3IuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElFcnJvclxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JRXJyb3I9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIEVycm9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBbXTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBtZXNzYWdlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5FcnJvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLnByb3RvdHlwZS5tZXNzYWdlID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRXJyb3IgbG9jYXRpb24uXG4gICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxUcmFjZS5JTG9jYXRpb24+fSBsb2NhdGlvblxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBFcnJvci5wcm90b3R5cGUubG9jYXRpb24gPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFcnJvciB0aW1lTnMuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gdGltZU5zXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5FcnJvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLnByb3RvdHlwZS50aW1lTnMgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFcnJvciBqc29uLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGpzb25cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkVycm9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IucHJvdG90eXBlLmpzb24gPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEVycm9yIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklFcnJvcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuRXJyb3J9IEVycm9yIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBFcnJvci5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEVycm9yIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkVycm9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5FcnJvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUVycm9yfSBtZXNzYWdlIEVycm9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm1lc3NhZ2VcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxvY2F0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5sb2NhdGlvbi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmxvY2F0aW9uLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5Mb2NhdGlvbi5lbmNvZGUobWVzc2FnZS5sb2NhdGlvbltpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGltZU5zICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0aW1lTnNcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS51aW50NjQobWVzc2FnZS50aW1lTnMpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuanNvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwianNvblwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLnN0cmluZyhtZXNzYWdlLmpzb24pO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEVycm9yIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkVycm9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5FcnJvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUVycm9yfSBtZXNzYWdlIEVycm9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYW4gRXJyb3IgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkVycm9yfSBFcnJvclxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIEVycm9yLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLkVycm9yKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmxvY2F0aW9uICYmIG1lc3NhZ2UubG9jYXRpb24ubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubG9jYXRpb24gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sb2NhdGlvbi5wdXNoKCRyb290LlRyYWNlLkxvY2F0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGltZU5zID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuanNvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhbiBFcnJvciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5FcnJvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuRXJyb3J9IEVycm9yXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGFuIEVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkVycm9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAqL1xuICAgICAgICBFcnJvci52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLm1lc3NhZ2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtZXNzYWdlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxvY2F0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxvY2F0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UubG9jYXRpb24pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsb2NhdGlvbjogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UubG9jYXRpb24ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UuTG9jYXRpb24udmVyaWZ5KG1lc3NhZ2UubG9jYXRpb25baV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsb2NhdGlvbi5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRpbWVOcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0aW1lTnNcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS50aW1lTnMpICYmICEobWVzc2FnZS50aW1lTnMgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UudGltZU5zLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UudGltZU5zLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidGltZU5zOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmpzb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwianNvblwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuanNvbikpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImpzb246IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhbiBFcnJvciBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuRXJyb3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLkVycm9yfSBtZXNzYWdlIEVycm9yXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmxvY2F0aW9uID0gW107XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5tZXNzYWdlID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3QudGltZU5zID0gMDtcbiAgICAgICAgICAgICAgICBvYmplY3QuanNvbiA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2UgPSBtZXNzYWdlLm1lc3NhZ2U7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sb2NhdGlvbiAmJiBtZXNzYWdlLmxvY2F0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5sb2NhdGlvbiA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbWVzc2FnZS5sb2NhdGlvbi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmxvY2F0aW9uW2pdID0gJHJvb3QuVHJhY2UuTG9jYXRpb24udG9PYmplY3QobWVzc2FnZS5sb2NhdGlvbltqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50aW1lTnMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidGltZU5zXCIpKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS50aW1lTnMgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50aW1lTnMgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS50aW1lTnMpIDogbWVzc2FnZS50aW1lTnM7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZU5zID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnRpbWVOcykgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS50aW1lTnMubG93ID4+PiAwLCBtZXNzYWdlLnRpbWVOcy5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UudGltZU5zO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuanNvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJqc29uXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5qc29uID0gbWVzc2FnZS5qc29uO1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydHMgdGhpcyBFcnJvciB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5FcnJvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgRXJyb3IucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBFcnJvcjtcbiAgICB9KSgpO1xuXG4gICAgVHJhY2UuSFRUUCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEhUVFAuXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAgICAgKiBAaW50ZXJmYWNlIElIVFRQXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSFRUUC5NZXRob2R8bnVsbH0gW21ldGhvZF0gSFRUUCBtZXRob2RcbiAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZyxUcmFjZS5IVFRQLklWYWx1ZXM+fG51bGx9IFtyZXF1ZXN0SGVhZGVyc10gSFRUUCByZXF1ZXN0SGVhZGVyc1xuICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLFRyYWNlLkhUVFAuSVZhbHVlcz58bnVsbH0gW3Jlc3BvbnNlSGVhZGVyc10gSFRUUCByZXNwb25zZUhlYWRlcnNcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3N0YXR1c0NvZGVdIEhUVFAgc3RhdHVzQ29kZVxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBIVFRQLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgSFRUUC5cbiAgICAgICAgICogQGltcGxlbWVudHMgSUhUVFBcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUhUVFA9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIEhUVFAocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0SGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSFRUUCBtZXRob2QuXG4gICAgICAgICAqIEBtZW1iZXIge1RyYWNlLkhUVFAuTWV0aG9kfSBtZXRob2RcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLnByb3RvdHlwZS5tZXRob2QgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIVFRQIHJlcXVlc3RIZWFkZXJzLlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3QuPHN0cmluZyxUcmFjZS5IVFRQLklWYWx1ZXM+fSByZXF1ZXN0SGVhZGVyc1xuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEhUVFAucHJvdG90eXBlLnJlcXVlc3RIZWFkZXJzID0gJHV0aWwuZW1wdHlPYmplY3Q7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhUVFAgcmVzcG9uc2VIZWFkZXJzLlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3QuPHN0cmluZyxUcmFjZS5IVFRQLklWYWx1ZXM+fSByZXNwb25zZUhlYWRlcnNcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLnByb3RvdHlwZS5yZXNwb25zZUhlYWRlcnMgPSAkdXRpbC5lbXB0eU9iamVjdDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSFRUUCBzdGF0dXNDb2RlLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHN0YXR1c0NvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLnByb3RvdHlwZS5zdGF0dXNDb2RlID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBIVFRQIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUhUVFA9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkhUVFB9IEhUVFAgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEhUVFAuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSFRUUChwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEhUVFAgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuSFRUUC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUhUVFB9IG1lc3NhZ2UgSFRUUCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIEhUVFAuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1ldGhvZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWV0aG9kXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQzMihtZXNzYWdlLm1ldGhvZCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0SGVhZGVycyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVxdWVzdEhlYWRlcnNcIikpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucmVxdWVzdEhlYWRlcnMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuSFRUUC5WYWx1ZXMuZW5jb2RlKG1lc3NhZ2UucmVxdWVzdEhlYWRlcnNba2V5c1tpXV0sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZUhlYWRlcnMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlc3BvbnNlSGVhZGVyc1wiKSlcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMobWVzc2FnZS5yZXNwb25zZUhlYWRlcnMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuSFRUUC5WYWx1ZXMuZW5jb2RlKG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzW2tleXNbaV1dLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzQ29kZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RhdHVzQ29kZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDAgPSovNDgpLnVpbnQzMihtZXNzYWdlLnN0YXR1c0NvZGUpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEhUVFAgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuSFRUUC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSUhUVFB9IG1lc3NhZ2UgSFRUUCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIEhUVFAuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBIVFRQIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkhUVFB9IEhUVFBcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLkhUVFAoKSwga2V5O1xuICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1ldGhvZCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwKCkucG9zKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RIZWFkZXJzID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdEhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIucG9zKys7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdEhlYWRlcnNba2V5XSA9ICRyb290LlRyYWNlLkhUVFAuVmFsdWVzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzID0ge307XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3BvbnNlSGVhZGVyc1trZXldID0gJHJvb3QuVHJhY2UuSFRUUC5WYWx1ZXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXR1c0NvZGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBIVFRQIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkhUVFB9IEhUVFBcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBIVFRQLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhIEhUVFAgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgSFRUUC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWV0aG9kXCIpKVxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5tZXRob2QpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtZXRob2Q6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RIZWFkZXJzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RIZWFkZXJzXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc09iamVjdChtZXNzYWdlLnJlcXVlc3RIZWFkZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVxdWVzdEhlYWRlcnM6IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGxldCBrZXkgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlcXVlc3RIZWFkZXJzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5IVFRQLlZhbHVlcy52ZXJpZnkobWVzc2FnZS5yZXF1ZXN0SGVhZGVyc1trZXlbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVxdWVzdEhlYWRlcnMuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZUhlYWRlcnMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVzcG9uc2VIZWFkZXJzXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc09iamVjdChtZXNzYWdlLnJlc3BvbnNlSGVhZGVycykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlc3BvbnNlSGVhZGVyczogb2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5IVFRQLlZhbHVlcy52ZXJpZnkobWVzc2FnZS5yZXNwb25zZUhlYWRlcnNba2V5W2ldXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlc3BvbnNlSGVhZGVycy5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXR1c0NvZGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhdHVzQ29kZVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnN0YXR1c0NvZGUpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGF0dXNDb2RlOiBpbnRlZ2VyIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgSFRUUCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuSFRUUH0gbWVzc2FnZSBIVFRQXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgSFRUUC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QucmVxdWVzdEhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBvYmplY3QucmVzcG9uc2VIZWFkZXJzID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5tZXRob2QgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyBcIlVOS05PV05cIiA6IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXR1c0NvZGUgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWV0aG9kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1ldGhvZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QubWV0aG9kID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QuVHJhY2UuSFRUUC5NZXRob2RbbWVzc2FnZS5tZXRob2RdIDogbWVzc2FnZS5tZXRob2Q7XG4gICAgICAgICAgICBsZXQga2V5czI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0SGVhZGVycyAmJiAoa2V5czIgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlcXVlc3RIZWFkZXJzKSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RIZWFkZXJzID0ge307XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBrZXlzMi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RIZWFkZXJzW2tleXMyW2pdXSA9ICRyb290LlRyYWNlLkhUVFAuVmFsdWVzLnRvT2JqZWN0KG1lc3NhZ2UucmVxdWVzdEhlYWRlcnNba2V5czJbal1dLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlc3BvbnNlSGVhZGVycyAmJiAoa2V5czIgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlc3BvbnNlSGVhZGVycykpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5yZXNwb25zZUhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGtleXMyLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVzcG9uc2VIZWFkZXJzW2tleXMyW2pdXSA9ICRyb290LlRyYWNlLkhUVFAuVmFsdWVzLnRvT2JqZWN0KG1lc3NhZ2UucmVzcG9uc2VIZWFkZXJzW2tleXMyW2pdXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXNDb2RlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXR1c0NvZGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXR1c0NvZGUgPSBtZXNzYWdlLnN0YXR1c0NvZGU7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEhUVFAgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgSFRUUC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgSFRUUC5WYWx1ZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFZhbHVlcy5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElWYWx1ZXNcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW3ZhbHVlXSBWYWx1ZXMgdmFsdWVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVmFsdWVzLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFBcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFZhbHVlcy5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElWYWx1ZXNcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5IVFRQLklWYWx1ZXM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gVmFsdWVzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWYWx1ZXMgdmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48c3RyaW5nPn0gdmFsdWVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQLlZhbHVlc1xuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFZhbHVlcy5wcm90b3R5cGUudmFsdWUgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVmFsdWVzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQLlZhbHVlc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5IVFRQLklWYWx1ZXM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5IVFRQLlZhbHVlc30gVmFsdWVzIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFZhbHVlcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmFsdWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVmFsdWVzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkhUVFAuVmFsdWVzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFAuVmFsdWVzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLkhUVFAuSVZhbHVlc30gbWVzc2FnZSBWYWx1ZXMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVmFsdWVzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS52YWx1ZSAhPSBudWxsICYmIG1lc3NhZ2UudmFsdWUubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UudmFsdWUubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLnZhbHVlW2ldKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVmFsdWVzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLkhUVFAuVmFsdWVzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFAuVmFsdWVzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLkhUVFAuSVZhbHVlc30gbWVzc2FnZSBWYWx1ZXMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVmFsdWVzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFZhbHVlcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFAuVmFsdWVzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuSFRUUC5WYWx1ZXN9IFZhbHVlc1xuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBWYWx1ZXMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuSFRUUC5WYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnZhbHVlICYmIG1lc3NhZ2UudmFsdWUubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhbHVlLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBWYWx1ZXMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQLlZhbHVlc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuSFRUUC5WYWx1ZXN9IFZhbHVlc1xuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBWYWx1ZXMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgVmFsdWVzIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuSFRUUC5WYWx1ZXNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVmFsdWVzLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnZhbHVlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnZhbHVlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInZhbHVlOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UudmFsdWUubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudmFsdWVbaV0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInZhbHVlOiBzdHJpbmdbXSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVmFsdWVzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkhUVFAuVmFsdWVzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLkhUVFAuVmFsdWVzfSBtZXNzYWdlIFZhbHVlc1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBWYWx1ZXMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS52YWx1ZSAmJiBtZXNzYWdlLnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QudmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLnZhbHVlLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnZhbHVlW2pdID0gbWVzc2FnZS52YWx1ZVtqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBWYWx1ZXMgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5IVFRQLlZhbHVlc1xuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFZhbHVlcy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFZhbHVlcztcbiAgICAgICAgfSkoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWV0aG9kIGVudW0uXG4gICAgICAgICAqIEBuYW1lIFRyYWNlLkhUVFAuTWV0aG9kXG4gICAgICAgICAqIEBlbnVtIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTktOT1dOPTAgVU5LTk9XTiB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gT1BUSU9OUz0xIE9QVElPTlMgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdFVD0yIEdFVCB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gSEVBRD0zIEhFQUQgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFBPU1Q9NCBQT1NUIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBQVVQ9NSBQVVQgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IERFTEVURT02IERFTEVURSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gVFJBQ0U9NyBUUkFDRSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQ09OTkVDVD04IENPTk5FQ1QgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFBBVENIPTkgUEFUQ0ggdmFsdWVcbiAgICAgICAgICovXG4gICAgICAgIEhUVFAuTWV0aG9kID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIlVOS05PV05cIl0gPSAwO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMV0gPSBcIk9QVElPTlNcIl0gPSAxO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIkdFVFwiXSA9IDI7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiSEVBRFwiXSA9IDM7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs0XSA9IFwiUE9TVFwiXSA9IDQ7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs1XSA9IFwiUFVUXCJdID0gNTtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzZdID0gXCJERUxFVEVcIl0gPSA2O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbN10gPSBcIlRSQUNFXCJdID0gNztcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzhdID0gXCJDT05ORUNUXCJdID0gODtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzldID0gXCJQQVRDSFwiXSA9IDk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHJldHVybiBIVFRQO1xuICAgIH0pKCk7XG5cbiAgICBUcmFjZS5Mb2NhdGlvbiA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhIExvY2F0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGludGVyZmFjZSBJTG9jYXRpb25cbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2xpbmVdIExvY2F0aW9uIGxpbmVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2NvbHVtbl0gTG9jYXRpb24gY29sdW1uXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IExvY2F0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgTG9jYXRpb24uXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElMb2NhdGlvblxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JTG9jYXRpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIExvY2F0aW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9jYXRpb24gbGluZS5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBsaW5lXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Mb2NhdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIExvY2F0aW9uLnByb3RvdHlwZS5saW5lID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9jYXRpb24gY29sdW1uLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGNvbHVtblxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTG9jYXRpb25cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBMb2NhdGlvbi5wcm90b3R5cGUuY29sdW1uID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBMb2NhdGlvbiBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkxvY2F0aW9uXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JTG9jYXRpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkxvY2F0aW9ufSBMb2NhdGlvbiBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgTG9jYXRpb24uY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYXRpb24ocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBMb2NhdGlvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5Mb2NhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTG9jYXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklMb2NhdGlvbn0gbWVzc2FnZSBMb2NhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIExvY2F0aW9uLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5saW5lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsaW5lXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS51aW50MzIobWVzc2FnZS5saW5lKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbHVtbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY29sdW1uXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikudWludDMyKG1lc3NhZ2UuY29sdW1uKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBMb2NhdGlvbiBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5Mb2NhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTG9jYXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklMb2NhdGlvbn0gbWVzc2FnZSBMb2NhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIExvY2F0aW9uLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgTG9jYXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTG9jYXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLkxvY2F0aW9ufSBMb2NhdGlvblxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIExvY2F0aW9uLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLkxvY2F0aW9uKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGluZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbHVtbiA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIExvY2F0aW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLkxvY2F0aW9uXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5Mb2NhdGlvbn0gTG9jYXRpb25cbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBMb2NhdGlvbi5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBMb2NhdGlvbiBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Mb2NhdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgTG9jYXRpb24udmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGluZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsaW5lXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UubGluZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxpbmU6IGludGVnZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbHVtbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb2x1bW5cIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5jb2x1bW4pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb2x1bW46IGludGVnZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBMb2NhdGlvbiBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTG9jYXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLkxvY2F0aW9ufSBtZXNzYWdlIExvY2F0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgTG9jYXRpb24udG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QubGluZSA9IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmNvbHVtbiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5saW5lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxpbmVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmxpbmUgPSBtZXNzYWdlLmxpbmU7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb2x1bW4gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY29sdW1uXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5jb2x1bW4gPSBtZXNzYWdlLmNvbHVtbjtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgTG9jYXRpb24gdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTG9jYXRpb25cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIExvY2F0aW9uLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gTG9jYXRpb247XG4gICAgfSkoKTtcblxuICAgIFRyYWNlLk5vZGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBOb2RlLlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2VcbiAgICAgICAgICogQGludGVyZmFjZSBJTm9kZVxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbcmVzcG9uc2VOYW1lXSBOb2RlIHJlc3BvbnNlTmFtZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaW5kZXhdIE5vZGUgaW5kZXhcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW29yaWdpbmFsRmllbGROYW1lXSBOb2RlIG9yaWdpbmFsRmllbGROYW1lXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt0eXBlXSBOb2RlIHR5cGVcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3BhcmVudFR5cGVdIE5vZGUgcGFyZW50VHlwZVxuICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLklDYWNoZVBvbGljeXxudWxsfSBbY2FjaGVQb2xpY3ldIE5vZGUgY2FjaGVQb2xpY3lcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3N0YXJ0VGltZV0gTm9kZSBzdGFydFRpbWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2VuZFRpbWVdIE5vZGUgZW5kVGltZVxuICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxUcmFjZS5JRXJyb3I+fG51bGx9IFtlcnJvcl0gTm9kZSBlcnJvclxuICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxUcmFjZS5JTm9kZT58bnVsbH0gW2NoaWxkXSBOb2RlIGNoaWxkXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IE5vZGUuXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBOb2RlLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJTm9kZVxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gTm9kZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gW107XG4gICAgICAgICAgICB0aGlzLmNoaWxkID0gW107XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgcmVzcG9uc2VOYW1lLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHJlc3BvbnNlTmFtZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUucHJvdG90eXBlLnJlc3BvbnNlTmFtZSA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgaW5kZXguXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gaW5kZXhcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnByb3RvdHlwZS5pbmRleCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgb3JpZ2luYWxGaWVsZE5hbWUuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gb3JpZ2luYWxGaWVsZE5hbWVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnByb3RvdHlwZS5vcmlnaW5hbEZpZWxkTmFtZSA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgdHlwZS5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSB0eXBlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS5wcm90b3R5cGUudHlwZSA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgcGFyZW50VHlwZS5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBwYXJlbnRUeXBlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS5wcm90b3R5cGUucGFyZW50VHlwZSA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgY2FjaGVQb2xpY3kuXG4gICAgICAgICAqIEBtZW1iZXIge1RyYWNlLklDYWNoZVBvbGljeXxudWxsfHVuZGVmaW5lZH0gY2FjaGVQb2xpY3lcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnByb3RvdHlwZS5jYWNoZVBvbGljeSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgc3RhcnRUaW1lLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHN0YXJ0VGltZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUucHJvdG90eXBlLnN0YXJ0VGltZSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgZW5kVGltZS5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBlbmRUaW1lXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS5wcm90b3R5cGUuZW5kVGltZSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgZXJyb3IuXG4gICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxUcmFjZS5JRXJyb3I+fSBlcnJvclxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUucHJvdG90eXBlLmVycm9yID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTm9kZSBjaGlsZC5cbiAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPFRyYWNlLklOb2RlPn0gY2hpbGRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnByb3RvdHlwZS5jaGlsZCA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgLy8gT25lT2YgZmllbGQgbmFtZXMgYm91bmQgdG8gdmlydHVhbCBnZXR0ZXJzIGFuZCBzZXR0ZXJzXG4gICAgICAgIGxldCAkb25lT2ZGaWVsZHM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vZGUgaWQuXG4gICAgICAgICAqIEBtZW1iZXIge1wicmVzcG9uc2VOYW1lXCJ8XCJpbmRleFwifHVuZGVmaW5lZH0gaWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsIFwiaWRcIiwge1xuICAgICAgICAgICAgZ2V0OiAkdXRpbC5vbmVPZkdldHRlcigkb25lT2ZGaWVsZHMgPSBbXCJyZXNwb25zZU5hbWVcIiwgXCJpbmRleFwiXSksXG4gICAgICAgICAgICBzZXQ6ICR1dGlsLm9uZU9mU2V0dGVyKCRvbmVPZkZpZWxkcylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgTm9kZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklOb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5Ob2RlfSBOb2RlIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vZGUocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBOb2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLk5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklOb2RlfSBtZXNzYWdlIE5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZU5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlc3BvbnNlTmFtZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLnJlc3BvbnNlTmFtZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaW5kZXhcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS51aW50MzIobWVzc2FnZS5pbmRleCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0eXBlXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuc3RyaW5nKG1lc3NhZ2UudHlwZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jYWNoZVBvbGljeSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY2FjaGVQb2xpY3lcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kuZW5jb2RlKG1lc3NhZ2UuY2FjaGVQb2xpY3ksIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RhcnRUaW1lXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMCA9Ki82NCkudWludDY0KG1lc3NhZ2Uuc3RhcnRUaW1lKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVuZFRpbWVcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA5LCB3aXJlVHlwZSAwID0qLzcyKS51aW50NjQobWVzc2FnZS5lbmRUaW1lKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVycm9yICE9IG51bGwgJiYgbWVzc2FnZS5lcnJvci5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmVycm9yLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5FcnJvci5lbmNvZGUobWVzc2FnZS5lcnJvcltpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMSwgd2lyZVR5cGUgMiA9Ki85MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNoaWxkICE9IG51bGwgJiYgbWVzc2FnZS5jaGlsZC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmNoaWxkLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5Ob2RlLmVuY29kZShtZXNzYWdlLmNoaWxkW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEyLCB3aXJlVHlwZSAyID0qLzk4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGFyZW50VHlwZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicGFyZW50VHlwZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEzLCB3aXJlVHlwZSAyID0qLzEwNikuc3RyaW5nKG1lc3NhZ2UucGFyZW50VHlwZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5vcmlnaW5hbEZpZWxkTmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwib3JpZ2luYWxGaWVsZE5hbWVcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxNCwgd2lyZVR5cGUgMiA9Ki8xMTQpLnN0cmluZyhtZXNzYWdlLm9yaWdpbmFsRmllbGROYW1lKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBOb2RlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLk5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklOb2RlfSBtZXNzYWdlIE5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5Ob2RlfSBOb2RlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5Ob2RlKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVzcG9uc2VOYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub3JpZ2luYWxGaWVsZE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50eXBlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcmVudFR5cGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYWNoZVBvbGljeSA9ICRyb290LlRyYWNlLkNhY2hlUG9saWN5LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydFRpbWUgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmVycm9yICYmIG1lc3NhZ2UuZXJyb3IubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvci5wdXNoKCRyb290LlRyYWNlLkVycm9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmNoaWxkICYmIG1lc3NhZ2UuY2hpbGQubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2hpbGQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jaGlsZC5wdXNoKCRyb290LlRyYWNlLk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBOb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge1RyYWNlLk5vZGV9IE5vZGVcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhIE5vZGUgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBsZXQgcHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVzcG9uc2VOYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlc3BvbnNlTmFtZVwiKSkge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuaWQgPSAxO1xuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5yZXNwb25zZU5hbWUpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXNwb25zZU5hbWU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5pZCA9PT0gMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaWQ6IG11bHRpcGxlIHZhbHVlc1wiO1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuaWQgPSAxO1xuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuaW5kZXgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpbmRleDogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub3JpZ2luYWxGaWVsZE5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib3JpZ2luYWxGaWVsZE5hbWVcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLm9yaWdpbmFsRmllbGROYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib3JpZ2luYWxGaWVsZE5hbWU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS50eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHlwZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wYXJlbnRUeXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudFR5cGVcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnBhcmVudFR5cGUpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwYXJlbnRUeXBlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNhY2hlUG9saWN5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNhY2hlUG9saWN5XCIpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kudmVyaWZ5KG1lc3NhZ2UuY2FjaGVQb2xpY3kpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2FjaGVQb2xpY3kuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGFydFRpbWVcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zdGFydFRpbWUpICYmICEobWVzc2FnZS5zdGFydFRpbWUgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uuc3RhcnRUaW1lLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uuc3RhcnRUaW1lLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RhcnRUaW1lOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5kVGltZVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVuZFRpbWUpICYmICEobWVzc2FnZS5lbmRUaW1lICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVuZFRpbWUubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lbmRUaW1lLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZW5kVGltZTogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5lcnJvciAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlcnJvclwiKSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLmVycm9yKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3I6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmVycm9yLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLkVycm9yLnZlcmlmeShtZXNzYWdlLmVycm9yW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3IuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jaGlsZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjaGlsZFwiKSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLmNoaWxkKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2hpbGQ6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmNoaWxkLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLk5vZGUudmVyaWZ5KG1lc3NhZ2UuY2hpbGRbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjaGlsZC5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBOb2RlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5Ob2RlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5Ob2RlfSBtZXNzYWdlIE5vZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBOb2RlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmVycm9yID0gW107XG4gICAgICAgICAgICAgICAgb2JqZWN0LmNoaWxkID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC50eXBlID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3QuY2FjaGVQb2xpY3kgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdGFydFRpbWUgPSAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5lbmRUaW1lID0gMDtcbiAgICAgICAgICAgICAgICBvYmplY3QucGFyZW50VHlwZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgb2JqZWN0Lm9yaWdpbmFsRmllbGROYW1lID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlc3BvbnNlTmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXNwb25zZU5hbWVcIikpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QucmVzcG9uc2VOYW1lID0gbWVzc2FnZS5yZXNwb25zZU5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaWQgPSBcInJlc3BvbnNlTmFtZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSBtZXNzYWdlLmluZGV4O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gXCJpbmRleFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC50eXBlID0gbWVzc2FnZS50eXBlO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVQb2xpY3kgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2FjaGVQb2xpY3lcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNhY2hlUG9saWN5ID0gJHJvb3QuVHJhY2UuQ2FjaGVQb2xpY3kudG9PYmplY3QobWVzc2FnZS5jYWNoZVBvbGljeSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydFRpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRUaW1lXCIpKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5zdGFydFRpbWUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdGFydFRpbWUgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5zdGFydFRpbWUpIDogbWVzc2FnZS5zdGFydFRpbWU7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnRUaW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnN0YXJ0VGltZSkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5zdGFydFRpbWUubG93ID4+PiAwLCBtZXNzYWdlLnN0YXJ0VGltZS5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2Uuc3RhcnRUaW1lO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRUaW1lXCIpKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5lbmRUaW1lID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW5kVGltZSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLmVuZFRpbWUpIDogbWVzc2FnZS5lbmRUaW1lO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVuZFRpbWUgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UuZW5kVGltZSkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5lbmRUaW1lLmxvdyA+Pj4gMCwgbWVzc2FnZS5lbmRUaW1lLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5lbmRUaW1lO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3IgJiYgbWVzc2FnZS5lcnJvci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuZXJyb3IgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG1lc3NhZ2UuZXJyb3IubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lcnJvcltqXSA9ICRyb290LlRyYWNlLkVycm9yLnRvT2JqZWN0KG1lc3NhZ2UuZXJyb3Jbal0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2hpbGQgJiYgbWVzc2FnZS5jaGlsZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuY2hpbGQgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG1lc3NhZ2UuY2hpbGQubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jaGlsZFtqXSA9ICRyb290LlRyYWNlLk5vZGUudG9PYmplY3QobWVzc2FnZS5jaGlsZFtqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wYXJlbnRUeXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudFR5cGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnBhcmVudFR5cGUgPSBtZXNzYWdlLnBhcmVudFR5cGU7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5vcmlnaW5hbEZpZWxkTmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJvcmlnaW5hbEZpZWxkTmFtZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Qub3JpZ2luYWxGaWVsZE5hbWUgPSBtZXNzYWdlLm9yaWdpbmFsRmllbGROYW1lO1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydHMgdGhpcyBOb2RlIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIE5vZGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBOb2RlO1xuICAgIH0pKCk7XG5cbiAgICBUcmFjZS5RdWVyeVBsYW5Ob2RlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlQbGFuTm9kZS5cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQHByb3BlcnR5IHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklTZXF1ZW5jZU5vZGV8bnVsbH0gW3NlcXVlbmNlXSBRdWVyeVBsYW5Ob2RlIHNlcXVlbmNlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JUGFyYWxsZWxOb2RlfG51bGx9IFtwYXJhbGxlbF0gUXVlcnlQbGFuTm9kZSBwYXJhbGxlbFxuICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUZldGNoTm9kZXxudWxsfSBbZmV0Y2hdIFF1ZXJ5UGxhbk5vZGUgZmV0Y2hcbiAgICAgICAgICogQHByb3BlcnR5IHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGbGF0dGVuTm9kZXxudWxsfSBbZmxhdHRlbl0gUXVlcnlQbGFuTm9kZSBmbGF0dGVuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJOb2RlfG51bGx9IFtkZWZlcl0gUXVlcnlQbGFuTm9kZSBkZWZlclxuICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUNvbmRpdGlvbk5vZGV8bnVsbH0gW2NvbmRpdGlvbl0gUXVlcnlQbGFuTm9kZSBjb25kaXRpb25cbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlQbGFuTm9kZS5cbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlXG4gICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5UGxhbk5vZGUuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElRdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklRdWVyeVBsYW5Ob2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBRdWVyeVBsYW5Ob2RlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUXVlcnlQbGFuTm9kZSBzZXF1ZW5jZS5cbiAgICAgICAgICogQG1lbWJlciB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JU2VxdWVuY2VOb2RlfG51bGx8dW5kZWZpbmVkfSBzZXF1ZW5jZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUucHJvdG90eXBlLnNlcXVlbmNlID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUXVlcnlQbGFuTm9kZSBwYXJhbGxlbC5cbiAgICAgICAgICogQG1lbWJlciB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JUGFyYWxsZWxOb2RlfG51bGx8dW5kZWZpbmVkfSBwYXJhbGxlbFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUucHJvdG90eXBlLnBhcmFsbGVsID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUXVlcnlQbGFuTm9kZSBmZXRjaC5cbiAgICAgICAgICogQG1lbWJlciB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRmV0Y2hOb2RlfG51bGx8dW5kZWZpbmVkfSBmZXRjaFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUucHJvdG90eXBlLmZldGNoID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUXVlcnlQbGFuTm9kZSBmbGF0dGVuLlxuICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGbGF0dGVuTm9kZXxudWxsfHVuZGVmaW5lZH0gZmxhdHRlblxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUucHJvdG90eXBlLmZsYXR0ZW4gPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBRdWVyeVBsYW5Ob2RlIGRlZmVyLlxuICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGV8bnVsbHx1bmRlZmluZWR9IGRlZmVyXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5wcm90b3R5cGUuZGVmZXIgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBRdWVyeVBsYW5Ob2RlIGNvbmRpdGlvbi5cbiAgICAgICAgICogQG1lbWJlciB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JQ29uZGl0aW9uTm9kZXxudWxsfHVuZGVmaW5lZH0gY29uZGl0aW9uXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5wcm90b3R5cGUuY29uZGl0aW9uID0gbnVsbDtcblxuICAgICAgICAvLyBPbmVPZiBmaWVsZCBuYW1lcyBib3VuZCB0byB2aXJ0dWFsIGdldHRlcnMgYW5kIHNldHRlcnNcbiAgICAgICAgbGV0ICRvbmVPZkZpZWxkcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogUXVlcnlQbGFuTm9kZSBub2RlLlxuICAgICAgICAgKiBAbWVtYmVyIHtcInNlcXVlbmNlXCJ8XCJwYXJhbGxlbFwifFwiZmV0Y2hcInxcImZsYXR0ZW5cInxcImRlZmVyXCJ8XCJjb25kaXRpb25cInx1bmRlZmluZWR9IG5vZGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlQbGFuTm9kZS5wcm90b3R5cGUsIFwibm9kZVwiLCB7XG4gICAgICAgICAgICBnZXQ6ICR1dGlsLm9uZU9mR2V0dGVyKCRvbmVPZkZpZWxkcyA9IFtcInNlcXVlbmNlXCIsIFwicGFyYWxsZWxcIiwgXCJmZXRjaFwiLCBcImZsYXR0ZW5cIiwgXCJkZWZlclwiLCBcImNvbmRpdGlvblwiXSksXG4gICAgICAgICAgICBzZXQ6ICR1dGlsLm9uZU9mU2V0dGVyKCRvbmVPZkZpZWxkcylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUXVlcnlQbGFuTm9kZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklRdWVyeVBsYW5Ob2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlfSBRdWVyeVBsYW5Ob2RlIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBRdWVyeVBsYW5Ob2RlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5UGxhbk5vZGUocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeVBsYW5Ob2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLklRdWVyeVBsYW5Ob2RlfSBtZXNzYWdlIFF1ZXJ5UGxhbk5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBRdWVyeVBsYW5Ob2RlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zZXF1ZW5jZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2VxdWVuY2VcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGUuZW5jb2RlKG1lc3NhZ2Uuc2VxdWVuY2UsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhcmFsbGVsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwYXJhbGxlbFwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZS5lbmNvZGUobWVzc2FnZS5wYXJhbGxlbCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZmV0Y2ggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImZldGNoXCIpKVxuICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlLmVuY29kZShtZXNzYWdlLmZldGNoLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5mbGF0dGVuICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJmbGF0dGVuXCIpKVxuICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGUuZW5jb2RlKG1lc3NhZ2UuZmxhdHRlbiwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVmZXIgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlZmVyXCIpKVxuICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlLmVuY29kZShtZXNzYWdlLmRlZmVyLCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb25kaXRpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNvbmRpdGlvblwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGUuZW5jb2RlKG1lc3NhZ2UuY29uZGl0aW9uLCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUXVlcnlQbGFuTm9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtUcmFjZS5JUXVlcnlQbGFuTm9kZX0gbWVzc2FnZSBRdWVyeVBsYW5Ob2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5UGxhbk5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZX0gUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZSgpO1xuICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlcXVlbmNlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcmFsbGVsID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZldGNoID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZsYXR0ZW4gPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWZlciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb25kaXRpb24gPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5UGxhbk5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZX0gUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgUXVlcnlQbGFuTm9kZSBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAqL1xuICAgICAgICBRdWVyeVBsYW5Ob2RlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGxldCBwcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zZXF1ZW5jZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZXF1ZW5jZVwiKSkge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubm9kZSA9IDE7XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZS52ZXJpZnkobWVzc2FnZS5zZXF1ZW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlcXVlbmNlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGFyYWxsZWwgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGFyYWxsZWxcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5ub2RlID09PSAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlOiBtdWx0aXBsZSB2YWx1ZXNcIjtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm5vZGUgPSAxO1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGUudmVyaWZ5KG1lc3NhZ2UucGFyYWxsZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwYXJhbGxlbC5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmZldGNoICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZldGNoXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubm9kZSA9PT0gMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZTogbXVsdGlwbGUgdmFsdWVzXCI7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5ub2RlID0gMTtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlLnZlcmlmeShtZXNzYWdlLmZldGNoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZmV0Y2guXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5mbGF0dGVuICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZsYXR0ZW5cIikpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5ub2RlID09PSAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlOiBtdWx0aXBsZSB2YWx1ZXNcIjtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm5vZGUgPSAxO1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZS52ZXJpZnkobWVzc2FnZS5mbGF0dGVuKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZmxhdHRlbi5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlZmVyICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlZmVyXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubm9kZSA9PT0gMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZTogbXVsdGlwbGUgdmFsdWVzXCI7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5ub2RlID0gMTtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlLnZlcmlmeShtZXNzYWdlLmRlZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVmZXIuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb25kaXRpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY29uZGl0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubm9kZSA9PT0gMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZTogbXVsdGlwbGUgdmFsdWVzXCI7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5ub2RlID0gMTtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZS52ZXJpZnkobWVzc2FnZS5jb25kaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb25kaXRpb24uXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUXVlcnlQbGFuTm9kZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZX0gbWVzc2FnZSBRdWVyeVBsYW5Ob2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zZXF1ZW5jZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZXF1ZW5jZVwiKSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5zZXF1ZW5jZSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlLnRvT2JqZWN0KG1lc3NhZ2Uuc2VxdWVuY2UsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSBcInNlcXVlbmNlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wYXJhbGxlbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwYXJhbGxlbFwiKSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5wYXJhbGxlbCA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlLnRvT2JqZWN0KG1lc3NhZ2UucGFyYWxsZWwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSBcInBhcmFsbGVsXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5mZXRjaCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmZXRjaFwiKSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5mZXRjaCA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlLnRvT2JqZWN0KG1lc3NhZ2UuZmV0Y2gsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSBcImZldGNoXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5mbGF0dGVuICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZsYXR0ZW5cIikpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuZmxhdHRlbiA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGUudG9PYmplY3QobWVzc2FnZS5mbGF0dGVuLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlID0gXCJmbGF0dGVuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kZWZlciAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZWZlclwiKSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5kZWZlciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlLnRvT2JqZWN0KG1lc3NhZ2UuZGVmZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSBcImRlZmVyXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb25kaXRpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY29uZGl0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmNvbmRpdGlvbiA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZS50b09iamVjdChtZXNzYWdlLmNvbmRpdGlvbiwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZSA9IFwiY29uZGl0aW9uXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFF1ZXJ5UGxhbk5vZGUgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFNlcXVlbmNlTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElTZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPFRyYWNlLklRdWVyeVBsYW5Ob2RlPnxudWxsfSBbbm9kZXNdIFNlcXVlbmNlTm9kZSBub2Rlc1xuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBTZXF1ZW5jZU5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgU2VxdWVuY2VOb2RlLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSVNlcXVlbmNlTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBTZXF1ZW5jZU5vZGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNlcXVlbmNlTm9kZSBub2Rlcy5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxUcmFjZS5JUXVlcnlQbGFuTm9kZT59IG5vZGVzXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTZXF1ZW5jZU5vZGUucHJvdG90eXBlLm5vZGVzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFNlcXVlbmNlTm9kZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JU2VxdWVuY2VOb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGV9IFNlcXVlbmNlTm9kZSBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTZXF1ZW5jZU5vZGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNlcXVlbmNlTm9kZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFNlcXVlbmNlTm9kZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklTZXF1ZW5jZU5vZGV9IG1lc3NhZ2UgU2VxdWVuY2VOb2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZXMgIT0gbnVsbCAmJiBtZXNzYWdlLm5vZGVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLm5vZGVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5lbmNvZGUobWVzc2FnZS5ub2Rlc1tpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTZXF1ZW5jZU5vZGUgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JU2VxdWVuY2VOb2RlfSBtZXNzYWdlIFNlcXVlbmNlTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTZXF1ZW5jZU5vZGUuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU2VxdWVuY2VOb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5TZXF1ZW5jZU5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZX0gU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZSgpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2Uubm9kZXMgJiYgbWVzc2FnZS5ub2Rlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uubm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uubm9kZXMucHVzaCgkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFNlcXVlbmNlTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZX0gU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBTZXF1ZW5jZU5vZGUgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTZXF1ZW5jZU5vZGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibm9kZXNcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2Uubm9kZXMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZXM6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5ub2Rlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS52ZXJpZnkobWVzc2FnZS5ub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZXMuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgU2VxdWVuY2VOb2RlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuU2VxdWVuY2VOb2RlfSBtZXNzYWdlIFNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTZXF1ZW5jZU5vZGUudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlcyAmJiBtZXNzYWdlLm5vZGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLm5vZGVzLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGVzW2pdID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS50b09iamVjdChtZXNzYWdlLm5vZGVzW2pdLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBTZXF1ZW5jZU5vZGUgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlNlcXVlbmNlTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlcXVlbmNlTm9kZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFNlcXVlbmNlTm9kZTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBRdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUGFyYWxsZWxOb2RlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48VHJhY2UuSVF1ZXJ5UGxhbk5vZGU+fG51bGx9IFtub2Rlc10gUGFyYWxsZWxOb2RlIG5vZGVzXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFBhcmFsbGVsTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBQYXJhbGxlbE5vZGUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JUGFyYWxsZWxOb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIFBhcmFsbGVsTm9kZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUGFyYWxsZWxOb2RlIG5vZGVzLlxuICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPFRyYWNlLklRdWVyeVBsYW5Ob2RlPn0gbm9kZXNcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFBhcmFsbGVsTm9kZS5wcm90b3R5cGUubm9kZXMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUGFyYWxsZWxOb2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklQYXJhbGxlbE5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZX0gUGFyYWxsZWxOb2RlIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFBhcmFsbGVsTm9kZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWxsZWxOb2RlKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUGFyYWxsZWxOb2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSVBhcmFsbGVsTm9kZX0gbWVzc2FnZSBQYXJhbGxlbE5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlcyAhPSBudWxsICYmIG1lc3NhZ2Uubm9kZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2Uubm9kZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmVuY29kZShtZXNzYWdlLm5vZGVzW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFBhcmFsbGVsTm9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklQYXJhbGxlbE5vZGV9IG1lc3NhZ2UgUGFyYWxsZWxOb2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFBhcmFsbGVsTm9kZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBQYXJhbGxlbE5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlBhcmFsbGVsTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlfSBQYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5ub2RlcyAmJiBtZXNzYWdlLm5vZGVzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2Rlcy5wdXNoKCRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgUGFyYWxsZWxOb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlfSBQYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFBhcmFsbGVsTm9kZSBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFBhcmFsbGVsTm9kZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJub2Rlc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5ub2RlcykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlczogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLm5vZGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnZlcmlmeShtZXNzYWdlLm5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2Rlcy5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBQYXJhbGxlbE5vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5QYXJhbGxlbE5vZGV9IG1lc3NhZ2UgUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFBhcmFsbGVsTm9kZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGVzICYmIG1lc3NhZ2Uubm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG1lc3NhZ2Uubm9kZXMubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZXNbal0gPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnRvT2JqZWN0KG1lc3NhZ2Uubm9kZXNbal0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFBhcmFsbGVsTm9kZSB0byBKU09OLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUGFyYWxsZWxOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUGFyYWxsZWxOb2RlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gUGFyYWxsZWxOb2RlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBGZXRjaE5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc2VydmljZU5hbWVdIEZldGNoTm9kZSBzZXJ2aWNlTmFtZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFt0cmFjZVBhcnNpbmdGYWlsZWRdIEZldGNoTm9kZSB0cmFjZVBhcnNpbmdGYWlsZWRcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7SVRyYWNlfG51bGx9IFt0cmFjZV0gRmV0Y2hOb2RlIHRyYWNlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbc2VudFRpbWVPZmZzZXRdIEZldGNoTm9kZSBzZW50VGltZU9mZnNldFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVRpbWVzdGFtcHxudWxsfSBbc2VudFRpbWVdIEZldGNoTm9kZSBzZW50VGltZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVRpbWVzdGFtcHxudWxsfSBbcmVjZWl2ZWRUaW1lXSBGZXRjaE5vZGUgcmVjZWl2ZWRUaW1lXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEZldGNoTm9kZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBGZXRjaE5vZGUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRmV0Y2hOb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIEZldGNoTm9kZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBGZXRjaE5vZGUgc2VydmljZU5hbWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHNlcnZpY2VOYW1lXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUucHJvdG90eXBlLnNlcnZpY2VOYW1lID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBGZXRjaE5vZGUgdHJhY2VQYXJzaW5nRmFpbGVkLlxuICAgICAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn0gdHJhY2VQYXJzaW5nRmFpbGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUucHJvdG90eXBlLnRyYWNlUGFyc2luZ0ZhaWxlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZldGNoTm9kZSB0cmFjZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge0lUcmFjZXxudWxsfHVuZGVmaW5lZH0gdHJhY2VcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS5wcm90b3R5cGUudHJhY2UgPSBudWxsO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZldGNoTm9kZSBzZW50VGltZU9mZnNldC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gc2VudFRpbWVPZmZzZXRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS5wcm90b3R5cGUuc2VudFRpbWVPZmZzZXQgPSAwO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZldGNoTm9kZSBzZW50VGltZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfG51bGx8dW5kZWZpbmVkfSBzZW50VGltZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLnByb3RvdHlwZS5zZW50VGltZSA9IG51bGw7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmV0Y2hOb2RlIHJlY2VpdmVkVGltZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfG51bGx8dW5kZWZpbmVkfSByZWNlaXZlZFRpbWVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS5wcm90b3R5cGUucmVjZWl2ZWRUaW1lID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEZldGNoTm9kZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRmV0Y2hOb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGV9IEZldGNoTm9kZSBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZldGNoTm9kZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZldGNoTm9kZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZldGNoTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGZXRjaE5vZGV9IG1lc3NhZ2UgRmV0Y2hOb2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZU5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNlcnZpY2VOYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLnNlcnZpY2VOYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmFjZVBhcnNpbmdGYWlsZWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRyYWNlUGFyc2luZ0ZhaWxlZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5ib29sKG1lc3NhZ2UudHJhY2VQYXJzaW5nRmFpbGVkKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmFjZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidHJhY2VcIikpXG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLmVuY29kZShtZXNzYWdlLnRyYWNlLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNlbnRUaW1lT2Zmc2V0XCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDAgPSovMzIpLnVpbnQ2NChtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZW50VGltZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2VudFRpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZW5jb2RlKG1lc3NhZ2Uuc2VudFRpbWUsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWNlaXZlZFRpbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlY2VpdmVkVGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5lbmNvZGUobWVzc2FnZS5yZWNlaXZlZFRpbWUsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmV0Y2hOb2RlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSUZldGNoTm9kZX0gbWVzc2FnZSBGZXRjaE5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIEZldGNoTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGV9IEZldGNoTm9kZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGUoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlcnZpY2VOYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2VQYXJzaW5nRmFpbGVkID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNlID0gJHJvb3QuVHJhY2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VudFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWNlaXZlZFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRmV0Y2hOb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlfSBGZXRjaE5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIEZldGNoTm9kZSBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZldGNoTm9kZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZXJ2aWNlTmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZXJ2aWNlTmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnNlcnZpY2VOYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlcnZpY2VOYW1lOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmFjZVBhcnNpbmdGYWlsZWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJhY2VQYXJzaW5nRmFpbGVkXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UudHJhY2VQYXJzaW5nRmFpbGVkICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYWNlUGFyc2luZ0ZhaWxlZDogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYWNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRyYWNlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLnZlcmlmeShtZXNzYWdlLnRyYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhY2UuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VudFRpbWVPZmZzZXRcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQpICYmICEobWVzc2FnZS5zZW50VGltZU9mZnNldCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zZW50VGltZU9mZnNldC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlbnRUaW1lT2Zmc2V0OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZW50VGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZW50VGltZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnZlcmlmeShtZXNzYWdlLnNlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2VudFRpbWUuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVjZWl2ZWRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlY2VpdmVkVGltZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnZlcmlmeShtZXNzYWdlLnJlY2VpdmVkVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlY2VpdmVkVGltZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRmV0Y2hOb2RlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlfSBtZXNzYWdlIEZldGNoTm9kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGZXRjaE5vZGUudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZXJ2aWNlTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50cmFjZVBhcnNpbmdGYWlsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRyYWNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNlbnRUaW1lT2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNlbnRUaW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlY2VpdmVkVGltZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcnZpY2VOYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNlcnZpY2VOYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2VydmljZU5hbWUgPSBtZXNzYWdlLnNlcnZpY2VOYW1lO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYWNlUGFyc2luZ0ZhaWxlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmFjZVBhcnNpbmdGYWlsZWRcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50cmFjZVBhcnNpbmdGYWlsZWQgPSBtZXNzYWdlLnRyYWNlUGFyc2luZ0ZhaWxlZDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmFjZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmFjZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRyYWNlID0gJHJvb3QuVHJhY2UudG9PYmplY3QobWVzc2FnZS50cmFjZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VudFRpbWVPZmZzZXRcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5zZW50VGltZU9mZnNldCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZW50VGltZU9mZnNldCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0KSA6IG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZW50VGltZU9mZnNldCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5zZW50VGltZU9mZnNldCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5zZW50VGltZU9mZnNldC5sb3cgPj4+IDAsIG1lc3NhZ2Uuc2VudFRpbWVPZmZzZXQuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLnNlbnRUaW1lT2Zmc2V0O1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlbnRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNlbnRUaW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2VudFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KG1lc3NhZ2Uuc2VudFRpbWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlY2VpdmVkVGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZWNlaXZlZFRpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZWNlaXZlZFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KG1lc3NhZ2UucmVjZWl2ZWRUaW1lLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEZldGNoTm9kZSB0byBKU09OLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmV0Y2hOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmV0Y2hOb2RlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gRmV0Y2hOb2RlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEZsYXR0ZW5Ob2RlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxUcmFjZS5RdWVyeVBsYW5Ob2RlLklSZXNwb25zZVBhdGhFbGVtZW50PnxudWxsfSBbcmVzcG9uc2VQYXRoXSBGbGF0dGVuTm9kZSByZXNwb25zZVBhdGhcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGV8bnVsbH0gW25vZGVdIEZsYXR0ZW5Ob2RlIG5vZGVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRmxhdHRlbk5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRmxhdHRlbk5vZGUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGbGF0dGVuTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBGbGF0dGVuTm9kZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZVBhdGggPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZsYXR0ZW5Ob2RlIHJlc3BvbnNlUGF0aC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxUcmFjZS5RdWVyeVBsYW5Ob2RlLklSZXNwb25zZVBhdGhFbGVtZW50Pn0gcmVzcG9uc2VQYXRoXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZsYXR0ZW5Ob2RlLnByb3RvdHlwZS5yZXNwb25zZVBhdGggPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZsYXR0ZW5Ob2RlIG5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfHVuZGVmaW5lZH0gbm9kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbGF0dGVuTm9kZS5wcm90b3R5cGUubm9kZSA9IG51bGw7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBGbGF0dGVuTm9kZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGbGF0dGVuTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGV9IEZsYXR0ZW5Ob2RlIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZsYXR0ZW5Ob2RlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbGF0dGVuTm9kZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZsYXR0ZW5Ob2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklGbGF0dGVuTm9kZX0gbWVzc2FnZSBGbGF0dGVuTm9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbGF0dGVuTm9kZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVzcG9uc2VQYXRoICE9IG51bGwgJiYgbWVzc2FnZS5yZXNwb25zZVBhdGgubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UucmVzcG9uc2VQYXRoLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50LmVuY29kZShtZXNzYWdlLnJlc3BvbnNlUGF0aFtpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm5vZGVcIikpXG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZW5jb2RlKG1lc3NhZ2Uubm9kZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBGbGF0dGVuTm9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRmxhdHRlbk5vZGV9IG1lc3NhZ2UgRmxhdHRlbk5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmxhdHRlbk5vZGUuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRmxhdHRlbk5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZX0gRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmxhdHRlbk5vZGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZSgpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UucmVzcG9uc2VQYXRoICYmIG1lc3NhZ2UucmVzcG9uc2VQYXRoLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXNwb25zZVBhdGggPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVzcG9uc2VQYXRoLnB1c2goJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uubm9kZSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBGbGF0dGVuTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGV9IEZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZsYXR0ZW5Ob2RlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIEZsYXR0ZW5Ob2RlIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5GbGF0dGVuTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbGF0dGVuTm9kZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZVBhdGggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVzcG9uc2VQYXRoXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnJlc3BvbnNlUGF0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXNwb25zZVBhdGg6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5yZXNwb25zZVBhdGgubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudC52ZXJpZnkobWVzc2FnZS5yZXNwb25zZVBhdGhbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlc3BvbnNlUGF0aC5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibm9kZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnZlcmlmeShtZXNzYWdlLm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBGbGF0dGVuTm9kZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRmxhdHRlbk5vZGV9IG1lc3NhZ2UgRmxhdHRlbk5vZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmxhdHRlbk5vZGUudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVzcG9uc2VQYXRoID0gW107XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZVBhdGggJiYgbWVzc2FnZS5yZXNwb25zZVBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZXNwb25zZVBhdGggPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLnJlc3BvbnNlUGF0aC5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZXNwb25zZVBhdGhbal0gPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnQudG9PYmplY3QobWVzc2FnZS5yZXNwb25zZVBhdGhbal0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm5vZGVcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS50b09iamVjdChtZXNzYWdlLm5vZGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRmxhdHRlbk5vZGUgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkZsYXR0ZW5Ob2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmxhdHRlbk5vZGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBGbGF0dGVuTm9kZTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBRdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRGVmZXJOb2RlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURlZmVyTm9kZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGVQcmltYXJ5fG51bGx9IFtwcmltYXJ5XSBEZWZlck5vZGUgcHJpbWFyeVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlPnxudWxsfSBbZGVmZXJyZWRdIERlZmVyTm9kZSBkZWZlcnJlZFxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEZWZlck5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGVmZXJOb2RlLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURlZmVyTm9kZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVyTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBEZWZlck5vZGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlZmVyTm9kZSBwcmltYXJ5LlxuICAgICAgICAgICAgICogQG1lbWJlciB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJOb2RlUHJpbWFyeXxudWxsfHVuZGVmaW5lZH0gcHJpbWFyeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlLnByb3RvdHlwZS5wcmltYXJ5ID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWZlck5vZGUgZGVmZXJyZWQuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlPn0gZGVmZXJyZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZS5wcm90b3R5cGUuZGVmZXJyZWQgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRGVmZXJOb2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZX0gRGVmZXJOb2RlIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGVmZXJOb2RlKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVmZXJOb2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVyTm9kZX0gbWVzc2FnZSBEZWZlck5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wcmltYXJ5ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwcmltYXJ5XCIpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnkuZW5jb2RlKG1lc3NhZ2UucHJpbWFyeSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlZmVycmVkICE9IG51bGwgJiYgbWVzc2FnZS5kZWZlcnJlZC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5kZWZlcnJlZC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlLmVuY29kZShtZXNzYWdlLmRlZmVycmVkW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlZmVyTm9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGV9IG1lc3NhZ2UgRGVmZXJOb2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWZlck5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlfSBEZWZlck5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcmltYXJ5ID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5kZWZlcnJlZCAmJiBtZXNzYWdlLmRlZmVycmVkLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWZlcnJlZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWZlcnJlZC5wdXNoKCRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIERlZmVyTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZX0gRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBEZWZlck5vZGUgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucHJpbWFyeSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwcmltYXJ5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeS52ZXJpZnkobWVzc2FnZS5wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicHJpbWFyeS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWZlcnJlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZWZlcnJlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5kZWZlcnJlZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZWZlcnJlZDogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmRlZmVycmVkLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZS52ZXJpZnkobWVzc2FnZS5kZWZlcnJlZFtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVmZXJyZWQuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGVmZXJOb2RlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlfSBtZXNzYWdlIERlZmVyTm9kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGUudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVmZXJyZWQgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnByaW1hcnkgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnByaW1hcnkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicHJpbWFyeVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnByaW1hcnkgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnkudG9PYmplY3QobWVzc2FnZS5wcmltYXJ5LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWZlcnJlZCAmJiBtZXNzYWdlLmRlZmVycmVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVmZXJyZWQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLmRlZmVycmVkLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlZmVycmVkW2pdID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGUudG9PYmplY3QobWVzc2FnZS5kZWZlcnJlZFtqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRGVmZXJOb2RlIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBEZWZlck5vZGU7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBDb25kaXRpb25Ob2RlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUNvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtjb25kaXRpb25dIENvbmRpdGlvbk5vZGUgY29uZGl0aW9uXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLklRdWVyeVBsYW5Ob2RlfG51bGx9IFtpZkNsYXVzZV0gQ29uZGl0aW9uTm9kZSBpZkNsYXVzZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfSBbZWxzZUNsYXVzZV0gQ29uZGl0aW9uTm9kZSBlbHNlQ2xhdXNlXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvbmRpdGlvbk5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ29uZGl0aW9uTm9kZS5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElDb25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JQ29uZGl0aW9uTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBDb25kaXRpb25Ob2RlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbmRpdGlvbk5vZGUgY29uZGl0aW9uLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBjb25kaXRpb25cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDb25kaXRpb25Ob2RlLnByb3RvdHlwZS5jb25kaXRpb24gPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbmRpdGlvbk5vZGUgaWZDbGF1c2UuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfHVuZGVmaW5lZH0gaWZDbGF1c2VcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDb25kaXRpb25Ob2RlLnByb3RvdHlwZS5pZkNsYXVzZSA9IG51bGw7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uZGl0aW9uTm9kZSBlbHNlQ2xhdXNlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGV8bnVsbHx1bmRlZmluZWR9IGVsc2VDbGF1c2VcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDb25kaXRpb25Ob2RlLnByb3RvdHlwZS5lbHNlQ2xhdXNlID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IENvbmRpdGlvbk5vZGUgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklDb25kaXRpb25Ob2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlfSBDb25kaXRpb25Ob2RlIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbmRpdGlvbk5vZGUocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb25kaXRpb25Ob2RlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkNvbmRpdGlvbk5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JQ29uZGl0aW9uTm9kZX0gbWVzc2FnZSBDb25kaXRpb25Ob2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbmRpdGlvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY29uZGl0aW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLmNvbmRpdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWZDbGF1c2UgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlmQ2xhdXNlXCIpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmVuY29kZShtZXNzYWdlLmlmQ2xhdXNlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZWxzZUNsYXVzZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZWxzZUNsYXVzZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5lbmNvZGUobWVzc2FnZS5lbHNlQ2xhdXNlLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbmRpdGlvbk5vZGUgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklDb25kaXRpb25Ob2RlfSBtZXNzYWdlIENvbmRpdGlvbk5vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ29uZGl0aW9uTm9kZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBDb25kaXRpb25Ob2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlfSBDb25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb25kaXRpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZkNsYXVzZSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVsc2VDbGF1c2UgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgQ29uZGl0aW9uTm9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlfSBDb25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgQ29uZGl0aW9uTm9kZSBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDb25kaXRpb25Ob2RlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbmRpdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb25kaXRpb25cIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5jb25kaXRpb24pKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29uZGl0aW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZkNsYXVzZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpZkNsYXVzZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnZlcmlmeShtZXNzYWdlLmlmQ2xhdXNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaWZDbGF1c2UuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZWxzZUNsYXVzZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbHNlQ2xhdXNlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUudmVyaWZ5KG1lc3NhZ2UuZWxzZUNsYXVzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVsc2VDbGF1c2UuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIENvbmRpdGlvbk5vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5Db25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZX0gbWVzc2FnZSBDb25kaXRpb25Ob2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jb25kaXRpb24gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaWZDbGF1c2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZWxzZUNsYXVzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbmRpdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb25kaXRpb25cIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jb25kaXRpb24gPSBtZXNzYWdlLmNvbmRpdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZkNsYXVzZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpZkNsYXVzZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmlmQ2xhdXNlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS50b09iamVjdChtZXNzYWdlLmlmQ2xhdXNlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbHNlQ2xhdXNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVsc2VDbGF1c2VcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbHNlQ2xhdXNlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS50b09iamVjdChtZXNzYWdlLmVsc2VDbGF1c2UsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgQ29uZGl0aW9uTm9kZSB0byBKU09OLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuQ29uZGl0aW9uTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENvbmRpdGlvbk5vZGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBDb25kaXRpb25Ob2RlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRGVmZXJOb2RlUHJpbWFyeS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEZWZlck5vZGVQcmltYXJ5XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLklRdWVyeVBsYW5Ob2RlfG51bGx9IFtub2RlXSBEZWZlck5vZGVQcmltYXJ5IG5vZGVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVmZXJOb2RlUHJpbWFyeS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBEZWZlck5vZGVQcmltYXJ5LlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGVQcmltYXJ5PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIERlZmVyTm9kZVByaW1hcnkocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVmZXJOb2RlUHJpbWFyeSBub2RlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7VHJhY2UuSVF1ZXJ5UGxhbk5vZGV8bnVsbHx1bmRlZmluZWR9IG5vZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGVQcmltYXJ5LnByb3RvdHlwZS5ub2RlID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IERlZmVyTm9kZVByaW1hcnkgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlck5vZGVQcmltYXJ5PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5fSBEZWZlck5vZGVQcmltYXJ5IGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZVByaW1hcnkuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERlZmVyTm9kZVByaW1hcnkocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWZlck5vZGVQcmltYXJ5IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJOb2RlUHJpbWFyeX0gbWVzc2FnZSBEZWZlck5vZGVQcmltYXJ5IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZVByaW1hcnkuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm5vZGVcIikpXG4gICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZW5jb2RlKG1lc3NhZ2Uubm9kZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWZlck5vZGVQcmltYXJ5IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJOb2RlUHJpbWFyeX0gbWVzc2FnZSBEZWZlck5vZGVQcmltYXJ5IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZVByaW1hcnkuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVmZXJOb2RlUHJpbWFyeSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeX0gRGVmZXJOb2RlUHJpbWFyeVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGVQcmltYXJ5LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeSgpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uubm9kZSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWZlck5vZGVQcmltYXJ5IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnl9IERlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJOb2RlUHJpbWFyeS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBEZWZlck5vZGVQcmltYXJ5IG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZVByaW1hcnkudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJub2RlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUudmVyaWZ5KG1lc3NhZ2Uubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGUuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIERlZmVyTm9kZVByaW1hcnkgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlck5vZGVQcmltYXJ5XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJOb2RlUHJpbWFyeX0gbWVzc2FnZSBEZWZlck5vZGVQcmltYXJ5XG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVyTm9kZVByaW1hcnkudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJub2RlXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9kZSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUudG9PYmplY3QobWVzc2FnZS5ub2RlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIERlZmVyTm9kZVByaW1hcnkgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVyTm9kZVByaW1hcnlcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlck5vZGVQcmltYXJ5LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gRGVmZXJOb2RlUHJpbWFyeTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBRdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRGVmZXJyZWROb2RlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlRGVwZW5kcz58bnVsbH0gW2RlcGVuZHNdIERlZmVycmVkTm9kZSBkZXBlbmRzXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbbGFiZWxdIERlZmVycmVkTm9kZSBsYWJlbFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48VHJhY2UuUXVlcnlQbGFuTm9kZS5JUmVzcG9uc2VQYXRoRWxlbWVudD58bnVsbH0gW3BhdGhdIERlZmVycmVkTm9kZSBwYXRoXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge1RyYWNlLklRdWVyeVBsYW5Ob2RlfG51bGx9IFtub2RlXSBEZWZlcnJlZE5vZGUgbm9kZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEZWZlcnJlZE5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGVmZXJyZWROb2RlLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVycmVkTm9kZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBEZWZlcnJlZE5vZGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVwZW5kcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMucGF0aCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVmZXJyZWROb2RlIGRlcGVuZHMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlRGVwZW5kcz59IGRlcGVuZHNcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZS5wcm90b3R5cGUuZGVwZW5kcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVmZXJyZWROb2RlIGxhYmVsLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBsYWJlbFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLnByb3RvdHlwZS5sYWJlbCA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVmZXJyZWROb2RlIHBhdGguXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48VHJhY2UuUXVlcnlQbGFuTm9kZS5JUmVzcG9uc2VQYXRoRWxlbWVudD59IHBhdGhcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZS5wcm90b3R5cGUucGF0aCA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVmZXJyZWROb2RlIG5vZGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtUcmFjZS5JUXVlcnlQbGFuTm9kZXxudWxsfHVuZGVmaW5lZH0gbm9kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLnByb3RvdHlwZS5ub2RlID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IERlZmVycmVkTm9kZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGV9IERlZmVycmVkTm9kZSBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERlZmVycmVkTm9kZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlZmVycmVkTm9kZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGV9IG1lc3NhZ2UgRGVmZXJyZWROb2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVwZW5kcyAhPSBudWxsICYmIG1lc3NhZ2UuZGVwZW5kcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5kZXBlbmRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzLmVuY29kZShtZXNzYWdlLmRlcGVuZHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYWJlbCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFiZWxcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuc3RyaW5nKG1lc3NhZ2UubGFiZWwpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhdGggIT0gbnVsbCAmJiBtZXNzYWdlLnBhdGgubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UucGF0aC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudC5lbmNvZGUobWVzc2FnZS5wYXRoW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibm9kZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5lbmNvZGUobWVzc2FnZS5ub2RlLCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlZmVycmVkTm9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGV9IG1lc3NhZ2UgRGVmZXJyZWROb2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWZlcnJlZE5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlfSBEZWZlcnJlZE5vZGVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5kZXBlbmRzICYmIG1lc3NhZ2UuZGVwZW5kcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVwZW5kcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXBlbmRzLnB1c2goJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFiZWwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5wYXRoICYmIG1lc3NhZ2UucGF0aC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGF0aCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXRoLnB1c2goJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uubm9kZSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWZlcnJlZE5vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGV9IERlZmVycmVkTm9kZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgRGVmZXJyZWROb2RlIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlcGVuZHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGVwZW5kc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5kZXBlbmRzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRlcGVuZHM6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5kZXBlbmRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHMudmVyaWZ5KG1lc3NhZ2UuZGVwZW5kc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVwZW5kcy5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhYmVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhYmVsXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UubGFiZWwpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibGFiZWw6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhdGggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGF0aFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5wYXRoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInBhdGg6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5wYXRoLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnQudmVyaWZ5KG1lc3NhZ2UucGF0aFtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicGF0aC5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5vZGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibm9kZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLnZlcmlmeShtZXNzYWdlLm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBEZWZlcnJlZE5vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGV9IG1lc3NhZ2UgRGVmZXJyZWROb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlcGVuZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnBhdGggPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmxhYmVsID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5vZGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXBlbmRzICYmIG1lc3NhZ2UuZGVwZW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlcGVuZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLmRlcGVuZHMubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVwZW5kc1tqXSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kcy50b09iamVjdChtZXNzYWdlLmRlcGVuZHNbal0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYWJlbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYWJlbFwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmxhYmVsID0gbWVzc2FnZS5sYWJlbDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wYXRoICYmIG1lc3NhZ2UucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnBhdGggPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLnBhdGgubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QucGF0aFtqXSA9ICRyb290LlRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudC50b09iamVjdChtZXNzYWdlLnBhdGhbal0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ub2RlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm5vZGVcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub2RlID0gJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS50b09iamVjdChtZXNzYWdlLm5vZGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRGVmZXJyZWROb2RlIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBEZWZlcnJlZE5vZGU7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZWZlcnJlZE5vZGVEZXBlbmRzLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtpZF0gRGVmZXJyZWROb2RlRGVwZW5kcyBpZFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2RlZmVyTGFiZWxdIERlZmVycmVkTm9kZURlcGVuZHMgZGVmZXJMYWJlbFxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEZWZlcnJlZE5vZGVEZXBlbmRzLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGVcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERlZmVycmVkTm9kZURlcGVuZHMuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVycmVkTm9kZURlcGVuZHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gRGVmZXJyZWROb2RlRGVwZW5kcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWZlcnJlZE5vZGVEZXBlbmRzIGlkLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBpZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZURlcGVuZHMucHJvdG90eXBlLmlkID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWZlcnJlZE5vZGVEZXBlbmRzIGRlZmVyTGFiZWwuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGRlZmVyTGFiZWxcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGVEZXBlbmRzLnByb3RvdHlwZS5kZWZlckxhYmVsID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IERlZmVycmVkTm9kZURlcGVuZHMgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklEZWZlcnJlZE5vZGVEZXBlbmRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzfSBEZWZlcnJlZE5vZGVEZXBlbmRzIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZURlcGVuZHMuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERlZmVycmVkTm9kZURlcGVuZHMocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWZlcnJlZE5vZGVEZXBlbmRzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JRGVmZXJyZWROb2RlRGVwZW5kc30gbWVzc2FnZSBEZWZlcnJlZE5vZGVEZXBlbmRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZURlcGVuZHMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVmZXJMYWJlbCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGVmZXJMYWJlbFwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5kZWZlckxhYmVsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVmZXJyZWROb2RlRGVwZW5kcyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSURlZmVycmVkTm9kZURlcGVuZHN9IG1lc3NhZ2UgRGVmZXJyZWROb2RlRGVwZW5kcyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEZWZlcnJlZE5vZGVEZXBlbmRzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIERlZmVycmVkTm9kZURlcGVuZHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHN9IERlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlRGVwZW5kcy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHMoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVmZXJMYWJlbCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWZlcnJlZE5vZGVEZXBlbmRzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHN9IERlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlRGVwZW5kcy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBEZWZlcnJlZE5vZGVEZXBlbmRzIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZURlcGVuZHMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5pZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVmZXJMYWJlbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZWZlckxhYmVsXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuZGVmZXJMYWJlbCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZWZlckxhYmVsOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGVmZXJyZWROb2RlRGVwZW5kcyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLkRlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5EZWZlcnJlZE5vZGVEZXBlbmRzfSBtZXNzYWdlIERlZmVycmVkTm9kZURlcGVuZHNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRGVmZXJyZWROb2RlRGVwZW5kcy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlZmVyTGFiZWwgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gbWVzc2FnZS5pZDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWZlckxhYmVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlZmVyTGFiZWxcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZWZlckxhYmVsID0gbWVzc2FnZS5kZWZlckxhYmVsO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRGVmZXJyZWROb2RlRGVwZW5kcyB0byBKU09OLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuRGVmZXJyZWROb2RlRGVwZW5kc1xuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERlZmVycmVkTm9kZURlcGVuZHMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBEZWZlcnJlZE5vZGVEZXBlbmRzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUmVzcG9uc2VQYXRoRWxlbWVudC5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElSZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZmllbGROYW1lXSBSZXNwb25zZVBhdGhFbGVtZW50IGZpZWxkTmFtZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2luZGV4XSBSZXNwb25zZVBhdGhFbGVtZW50IGluZGV4XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJlc3BvbnNlUGF0aEVsZW1lbnQuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZVxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUmVzcG9uc2VQYXRoRWxlbWVudC5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElSZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JUmVzcG9uc2VQYXRoRWxlbWVudD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBSZXNwb25zZVBhdGhFbGVtZW50KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlc3BvbnNlUGF0aEVsZW1lbnQgZmllbGROYW1lLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBmaWVsZE5hbWVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBSZXNwb25zZVBhdGhFbGVtZW50LnByb3RvdHlwZS5maWVsZE5hbWUgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlc3BvbnNlUGF0aEVsZW1lbnQgaW5kZXguXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGluZGV4XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUmVzcG9uc2VQYXRoRWxlbWVudC5wcm90b3R5cGUuaW5kZXggPSAwO1xuXG4gICAgICAgICAgICAvLyBPbmVPZiBmaWVsZCBuYW1lcyBib3VuZCB0byB2aXJ0dWFsIGdldHRlcnMgYW5kIHNldHRlcnNcbiAgICAgICAgICAgIGxldCAkb25lT2ZGaWVsZHM7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVzcG9uc2VQYXRoRWxlbWVudCBpZC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge1wiZmllbGROYW1lXCJ8XCJpbmRleFwifHVuZGVmaW5lZH0gaWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzcG9uc2VQYXRoRWxlbWVudC5wcm90b3R5cGUsIFwiaWRcIiwge1xuICAgICAgICAgICAgICAgIGdldDogJHV0aWwub25lT2ZHZXR0ZXIoJG9uZU9mRmllbGRzID0gW1wiZmllbGROYW1lXCIsIFwiaW5kZXhcIl0pLFxuICAgICAgICAgICAgICAgIHNldDogJHV0aWwub25lT2ZTZXR0ZXIoJG9uZU9mRmllbGRzKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBSZXNwb25zZVBhdGhFbGVtZW50IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5JUmVzcG9uc2VQYXRoRWxlbWVudD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudH0gUmVzcG9uc2VQYXRoRWxlbWVudCBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBSZXNwb25zZVBhdGhFbGVtZW50LmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZVBhdGhFbGVtZW50KHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUmVzcG9uc2VQYXRoRWxlbWVudCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1RyYWNlLlF1ZXJ5UGxhbk5vZGUuSVJlc3BvbnNlUGF0aEVsZW1lbnR9IG1lc3NhZ2UgUmVzcG9uc2VQYXRoRWxlbWVudCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBSZXNwb25zZVBhdGhFbGVtZW50LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5maWVsZE5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImZpZWxkTmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5maWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbmRleFwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS51aW50MzIobWVzc2FnZS5pbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJlc3BvbnNlUGF0aEVsZW1lbnQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRyYWNlLlF1ZXJ5UGxhbk5vZGUuUmVzcG9uc2VQYXRoRWxlbWVudFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLklSZXNwb25zZVBhdGhFbGVtZW50fSBtZXNzYWdlIFJlc3BvbnNlUGF0aEVsZW1lbnQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUmVzcG9uc2VQYXRoRWxlbWVudC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSZXNwb25zZVBhdGhFbGVtZW50IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50fSBSZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFJlc3BvbnNlUGF0aEVsZW1lbnQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWVsZE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSZXNwb25zZVBhdGhFbGVtZW50IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnR9IFJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUmVzcG9uc2VQYXRoRWxlbWVudC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBSZXNwb25zZVBhdGhFbGVtZW50IG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFJlc3BvbnNlUGF0aEVsZW1lbnQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgbGV0IHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5maWVsZE5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZmllbGROYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuaWQgPSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuZmllbGROYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImZpZWxkTmFtZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmlkID09PSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaWQ6IG11bHRpcGxlIHZhbHVlc1wiO1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLmlkID0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5pbmRleCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpbmRleDogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUmVzcG9uc2VQYXRoRWxlbWVudCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUcmFjZS5RdWVyeVBsYW5Ob2RlLlJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7VHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50fSBtZXNzYWdlIFJlc3BvbnNlUGF0aEVsZW1lbnRcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUmVzcG9uc2VQYXRoRWxlbWVudC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZmllbGROYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZpZWxkTmFtZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZmllbGROYW1lID0gbWVzc2FnZS5maWVsZE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5pZCA9IFwiZmllbGROYW1lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbmRleCA9IG1lc3NhZ2UuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5pZCA9IFwiaW5kZXhcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBSZXNwb25zZVBhdGhFbGVtZW50IHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVHJhY2UuUXVlcnlQbGFuTm9kZS5SZXNwb25zZVBhdGhFbGVtZW50XG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgUmVzcG9uc2VQYXRoRWxlbWVudC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlc3BvbnNlUGF0aEVsZW1lbnQ7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgcmV0dXJuIFF1ZXJ5UGxhbk5vZGU7XG4gICAgfSkoKTtcblxuICAgIHJldHVybiBUcmFjZTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBSZXBvcnRIZWFkZXIgPSAkcm9vdC5SZXBvcnRIZWFkZXIgPSAoKCkgPT4ge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIFJlcG9ydEhlYWRlci5cbiAgICAgKiBAZXhwb3J0cyBJUmVwb3J0SGVhZGVyXG4gICAgICogQGludGVyZmFjZSBJUmVwb3J0SGVhZGVyXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyYXBoUmVmXSBSZXBvcnRIZWFkZXIgZ3JhcGhSZWZcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbaG9zdG5hbWVdIFJlcG9ydEhlYWRlciBob3N0bmFtZVxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFthZ2VudFZlcnNpb25dIFJlcG9ydEhlYWRlciBhZ2VudFZlcnNpb25cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc2VydmljZVZlcnNpb25dIFJlcG9ydEhlYWRlciBzZXJ2aWNlVmVyc2lvblxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtydW50aW1lVmVyc2lvbl0gUmVwb3J0SGVhZGVyIHJ1bnRpbWVWZXJzaW9uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VuYW1lXSBSZXBvcnRIZWFkZXIgdW5hbWVcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZXhlY3V0YWJsZVNjaGVtYUlkXSBSZXBvcnRIZWFkZXIgZXhlY3V0YWJsZVNjaGVtYUlkXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJlcG9ydEhlYWRlci5cbiAgICAgKiBAZXhwb3J0cyBSZXBvcnRIZWFkZXJcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBSZXBvcnRIZWFkZXIuXG4gICAgICogQGltcGxlbWVudHMgSVJlcG9ydEhlYWRlclxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SVJlcG9ydEhlYWRlcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlcG9ydEhlYWRlcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwb3J0SGVhZGVyIGdyYXBoUmVmLlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3JhcGhSZWZcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0SGVhZGVyLnByb3RvdHlwZS5ncmFwaFJlZiA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBSZXBvcnRIZWFkZXIgaG9zdG5hbWUuXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBob3N0bmFtZVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIucHJvdG90eXBlLmhvc3RuYW1lID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFJlcG9ydEhlYWRlciBhZ2VudFZlcnNpb24uXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBhZ2VudFZlcnNpb25cbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0SGVhZGVyLnByb3RvdHlwZS5hZ2VudFZlcnNpb24gPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0SGVhZGVyIHNlcnZpY2VWZXJzaW9uLlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gc2VydmljZVZlcnNpb25cbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0SGVhZGVyLnByb3RvdHlwZS5zZXJ2aWNlVmVyc2lvbiA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBSZXBvcnRIZWFkZXIgcnVudGltZVZlcnNpb24uXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBydW50aW1lVmVyc2lvblxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIucHJvdG90eXBlLnJ1bnRpbWVWZXJzaW9uID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFJlcG9ydEhlYWRlciB1bmFtZS5cbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHVuYW1lXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydEhlYWRlclxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5wcm90b3R5cGUudW5hbWUgPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0SGVhZGVyIGV4ZWN1dGFibGVTY2hlbWFJZC5cbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGV4ZWN1dGFibGVTY2hlbWFJZFxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIucHJvdG90eXBlLmV4ZWN1dGFibGVTY2hlbWFJZCA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFJlcG9ydEhlYWRlciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVwb3J0SGVhZGVyPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1JlcG9ydEhlYWRlcn0gUmVwb3J0SGVhZGVyIGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0SGVhZGVyLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVwb3J0SGVhZGVyKHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUmVwb3J0SGVhZGVyIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFJlcG9ydEhlYWRlci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydEhlYWRlclxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lSZXBvcnRIZWFkZXJ9IG1lc3NhZ2UgUmVwb3J0SGVhZGVyIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmhvc3RuYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJob3N0bmFtZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80Mikuc3RyaW5nKG1lc3NhZ2UuaG9zdG5hbWUpO1xuICAgICAgICBpZiAobWVzc2FnZS5hZ2VudFZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFnZW50VmVyc2lvblwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuc3RyaW5nKG1lc3NhZ2UuYWdlbnRWZXJzaW9uKTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZVZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNlcnZpY2VWZXJzaW9uXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAyID0qLzU4KS5zdHJpbmcobWVzc2FnZS5zZXJ2aWNlVmVyc2lvbik7XG4gICAgICAgIGlmIChtZXNzYWdlLnJ1bnRpbWVWZXJzaW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJydW50aW1lVmVyc2lvblwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMiA9Ki82Nikuc3RyaW5nKG1lc3NhZ2UucnVudGltZVZlcnNpb24pO1xuICAgICAgICBpZiAobWVzc2FnZS51bmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidW5hbWVcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDksIHdpcmVUeXBlIDIgPSovNzQpLnN0cmluZyhtZXNzYWdlLnVuYW1lKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXhlY3V0YWJsZVNjaGVtYUlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJleGVjdXRhYmxlU2NoZW1hSWRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDExLCB3aXJlVHlwZSAyID0qLzkwKS5zdHJpbmcobWVzc2FnZS5leGVjdXRhYmxlU2NoZW1hSWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5ncmFwaFJlZiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JhcGhSZWZcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEyLCB3aXJlVHlwZSAyID0qLzk4KS5zdHJpbmcobWVzc2FnZS5ncmFwaFJlZik7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSZXBvcnRIZWFkZXIgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgUmVwb3J0SGVhZGVyLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVJlcG9ydEhlYWRlcn0gbWVzc2FnZSBSZXBvcnRIZWFkZXIgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgUmVwb3J0SGVhZGVyIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7UmVwb3J0SGVhZGVyfSBSZXBvcnRIZWFkZXJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5SZXBvcnRIZWFkZXIoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmdyYXBoUmVmID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaG9zdG5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VudFZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXJ2aWNlVmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJ1bnRpbWVWZXJzaW9uID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UudW5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXhlY3V0YWJsZVNjaGVtYUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBSZXBvcnRIZWFkZXIgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydEhlYWRlclxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcmV0dXJucyB7UmVwb3J0SGVhZGVyfSBSZXBvcnRIZWFkZXJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgYSBSZXBvcnRIZWFkZXIgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFJlcG9ydEhlYWRlclxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5ncmFwaFJlZiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJncmFwaFJlZlwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5ncmFwaFJlZikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZ3JhcGhSZWY6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5ob3N0bmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJob3N0bmFtZVwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5ob3N0bmFtZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaG9zdG5hbWU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5hZ2VudFZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiYWdlbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmFnZW50VmVyc2lvbikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYWdlbnRWZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZVZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VydmljZVZlcnNpb25cIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uuc2VydmljZVZlcnNpb24pKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInNlcnZpY2VWZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucnVudGltZVZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicnVudGltZVZlcnNpb25cIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UucnVudGltZVZlcnNpb24pKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJ1bnRpbWVWZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidW5hbWVcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudW5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInVuYW1lOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXhlY3V0YWJsZVNjaGVtYUlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImV4ZWN1dGFibGVTY2hlbWFJZFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5leGVjdXRhYmxlU2NoZW1hSWQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImV4ZWN1dGFibGVTY2hlbWFJZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBSZXBvcnRIZWFkZXIgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRIZWFkZXJcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtSZXBvcnRIZWFkZXJ9IG1lc3NhZ2UgUmVwb3J0SGVhZGVyXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgKi9cbiAgICBSZXBvcnRIZWFkZXIudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgb2JqZWN0Lmhvc3RuYW1lID0gXCJcIjtcbiAgICAgICAgICAgIG9iamVjdC5hZ2VudFZlcnNpb24gPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LnNlcnZpY2VWZXJzaW9uID0gXCJcIjtcbiAgICAgICAgICAgIG9iamVjdC5ydW50aW1lVmVyc2lvbiA9IFwiXCI7XG4gICAgICAgICAgICBvYmplY3QudW5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LmV4ZWN1dGFibGVTY2hlbWFJZCA9IFwiXCI7XG4gICAgICAgICAgICBvYmplY3QuZ3JhcGhSZWYgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmhvc3RuYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImhvc3RuYW1lXCIpKVxuICAgICAgICAgICAgb2JqZWN0Lmhvc3RuYW1lID0gbWVzc2FnZS5ob3N0bmFtZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuYWdlbnRWZXJzaW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImFnZW50VmVyc2lvblwiKSlcbiAgICAgICAgICAgIG9iamVjdC5hZ2VudFZlcnNpb24gPSBtZXNzYWdlLmFnZW50VmVyc2lvbjtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZVZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VydmljZVZlcnNpb25cIikpXG4gICAgICAgICAgICBvYmplY3Quc2VydmljZVZlcnNpb24gPSBtZXNzYWdlLnNlcnZpY2VWZXJzaW9uO1xuICAgICAgICBpZiAobWVzc2FnZS5ydW50aW1lVmVyc2lvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJydW50aW1lVmVyc2lvblwiKSlcbiAgICAgICAgICAgIG9iamVjdC5ydW50aW1lVmVyc2lvbiA9IG1lc3NhZ2UucnVudGltZVZlcnNpb247XG4gICAgICAgIGlmIChtZXNzYWdlLnVuYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInVuYW1lXCIpKVxuICAgICAgICAgICAgb2JqZWN0LnVuYW1lID0gbWVzc2FnZS51bmFtZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXhlY3V0YWJsZVNjaGVtYUlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImV4ZWN1dGFibGVTY2hlbWFJZFwiKSlcbiAgICAgICAgICAgIG9iamVjdC5leGVjdXRhYmxlU2NoZW1hSWQgPSBtZXNzYWdlLmV4ZWN1dGFibGVTY2hlbWFJZDtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZ3JhcGhSZWYgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZ3JhcGhSZWZcIikpXG4gICAgICAgICAgICBvYmplY3QuZ3JhcGhSZWYgPSBtZXNzYWdlLmdyYXBoUmVmO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIFJlcG9ydEhlYWRlciB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0SGVhZGVyXG4gICAgICogQGluc3RhbmNlXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAqL1xuICAgIFJlcG9ydEhlYWRlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcG9ydEhlYWRlcjtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBQYXRoRXJyb3JTdGF0cyA9ICRyb290LlBhdGhFcnJvclN0YXRzID0gKCgpID0+IHtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgYSBQYXRoRXJyb3JTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBJUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAaW50ZXJmYWNlIElQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsSVBhdGhFcnJvclN0YXRzPnxudWxsfSBbY2hpbGRyZW5dIFBhdGhFcnJvclN0YXRzIGNoaWxkcmVuXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2Vycm9yc0NvdW50XSBQYXRoRXJyb3JTdGF0cyBlcnJvcnNDb3VudFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudF0gUGF0aEVycm9yU3RhdHMgcmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUGF0aEVycm9yU3RhdHMuXG4gICAgICogQGV4cG9ydHMgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBQYXRoRXJyb3JTdGF0cy5cbiAgICAgKiBAaW1wbGVtZW50cyBJUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lQYXRoRXJyb3JTdGF0cz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBhdGhFcnJvclN0YXRzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IHt9O1xuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhdGhFcnJvclN0YXRzIGNoaWxkcmVuLlxuICAgICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLElQYXRoRXJyb3JTdGF0cz59IGNoaWxkcmVuXG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUGF0aEVycm9yU3RhdHMucHJvdG90eXBlLmNoaWxkcmVuID0gJHV0aWwuZW1wdHlPYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBQYXRoRXJyb3JTdGF0cyBlcnJvcnNDb3VudC5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGVycm9yc0NvdW50XG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUGF0aEVycm9yU3RhdHMucHJvdG90eXBlLmVycm9yc0NvdW50ID0gMDtcblxuICAgIC8qKlxuICAgICAqIFBhdGhFcnJvclN0YXRzIHJlcXVlc3RzV2l0aEVycm9yc0NvdW50LlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gcmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy5wcm90b3R5cGUucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBQYXRoRXJyb3JTdGF0cyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lQYXRoRXJyb3JTdGF0cz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqIEByZXR1cm5zIHtQYXRoRXJyb3JTdGF0c30gUGF0aEVycm9yU3RhdHMgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gbmV3IFBhdGhFcnJvclN0YXRzKHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUGF0aEVycm9yU3RhdHMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgUGF0aEVycm9yU3RhdHMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAqIEBtZW1iZXJvZiBQYXRoRXJyb3JTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lQYXRoRXJyb3JTdGF0c30gbWVzc2FnZSBQYXRoRXJyb3JTdGF0cyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgUGF0aEVycm9yU3RhdHMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNoaWxkcmVuICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjaGlsZHJlblwiKSlcbiAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlLmNoaWxkcmVuKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICAkcm9vdC5QYXRoRXJyb3JTdGF0cy5lbmNvZGUobWVzc2FnZS5jaGlsZHJlbltrZXlzW2ldXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lcnJvcnNDb3VudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDAgPSovMzIpLnVpbnQ2NChtZXNzYWdlLmVycm9yc0NvdW50KTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAwID0qLzQwKS51aW50NjQobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCk7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBQYXRoRXJyb3JTdGF0cyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBQYXRoRXJyb3JTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVBhdGhFcnJvclN0YXRzfSBtZXNzYWdlIFBhdGhFcnJvclN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBQYXRoRXJyb3JTdGF0cy5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgUGF0aEVycm9yU3RhdHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICogQHJldHVybnMge1BhdGhFcnJvclN0YXRzfSBQYXRoRXJyb3JTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgUGF0aEVycm9yU3RhdHMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuUGF0aEVycm9yU3RhdHMoKSwga2V5O1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jaGlsZHJlbiA9PT0gJHV0aWwuZW1wdHlPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2hpbGRyZW4gPSB7fTtcbiAgICAgICAgICAgICAgICBrZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2hpbGRyZW5ba2V5XSA9ICRyb290LlBhdGhFcnJvclN0YXRzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvcnNDb3VudCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBQYXRoRXJyb3JTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1BhdGhFcnJvclN0YXRzfSBQYXRoRXJyb3JTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgUGF0aEVycm9yU3RhdHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgUGF0aEVycm9yU3RhdHMgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgUGF0aEVycm9yU3RhdHMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2hpbGRyZW4gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2hpbGRyZW5cIikpIHtcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNPYmplY3QobWVzc2FnZS5jaGlsZHJlbikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2hpbGRyZW46IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgbGV0IGtleSA9IE9iamVjdC5rZXlzKG1lc3NhZ2UuY2hpbGRyZW4pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5QYXRoRXJyb3JTdGF0cy52ZXJpZnkobWVzc2FnZS5jaGlsZHJlbltrZXlbaV1dKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNoaWxkcmVuLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3JzQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVycm9yc0NvdW50KSAmJiAhKG1lc3NhZ2UuZXJyb3JzQ291bnQgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZXJyb3JzQ291bnQubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lcnJvcnNDb3VudC5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JzQ291bnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpICYmICEobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBQYXRoRXJyb3JTdGF0cyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7UGF0aEVycm9yU3RhdHN9IG1lc3NhZ2UgUGF0aEVycm9yU3RhdHNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIFBhdGhFcnJvclN0YXRzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMub2JqZWN0cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgb2JqZWN0LmNoaWxkcmVuID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICBvYmplY3QuZXJyb3JzQ291bnQgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQga2V5czI7XG4gICAgICAgIGlmIChtZXNzYWdlLmNoaWxkcmVuICYmIChrZXlzMiA9IE9iamVjdC5rZXlzKG1lc3NhZ2UuY2hpbGRyZW4pKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iamVjdC5jaGlsZHJlbiA9IHt9O1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBrZXlzMi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBvYmplY3QuY2hpbGRyZW5ba2V5czJbal1dID0gJHJvb3QuUGF0aEVycm9yU3RhdHMudG9PYmplY3QobWVzc2FnZS5jaGlsZHJlbltrZXlzMltqXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVycm9yc0NvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmVycm9yc0NvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5lcnJvcnNDb3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLmVycm9yc0NvdW50KSA6IG1lc3NhZ2UuZXJyb3JzQ291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LmVycm9yc0NvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmVycm9yc0NvdW50KSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLmVycm9yc0NvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5lcnJvcnNDb3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UuZXJyb3JzQ291bnQ7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50KSA6IG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50KSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQ7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgUGF0aEVycm9yU3RhdHMgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIFBhdGhFcnJvclN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAqL1xuICAgIFBhdGhFcnJvclN0YXRzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUGF0aEVycm9yU3RhdHM7XG59KSgpO1xuXG5leHBvcnQgY29uc3QgUXVlcnlMYXRlbmN5U3RhdHMgPSAkcm9vdC5RdWVyeUxhdGVuY3lTdGF0cyA9ICgoKSA9PiB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlMYXRlbmN5U3RhdHMuXG4gICAgICogQGV4cG9ydHMgSVF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGludGVyZmFjZSBJUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAcHJvcGVydHkgeyRwcm90b2J1Zi5Ub0FycmF5LjxudW1iZXI+fEFycmF5LjxudW1iZXI+fG51bGx9IFtsYXRlbmN5Q291bnRdIFF1ZXJ5TGF0ZW5jeVN0YXRzIGxhdGVuY3lDb3VudFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtyZXF1ZXN0Q291bnRdIFF1ZXJ5TGF0ZW5jeVN0YXRzIHJlcXVlc3RDb3VudFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtjYWNoZUhpdHNdIFF1ZXJ5TGF0ZW5jeVN0YXRzIGNhY2hlSGl0c1xuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtwZXJzaXN0ZWRRdWVyeUhpdHNdIFF1ZXJ5TGF0ZW5jeVN0YXRzIHBlcnNpc3RlZFF1ZXJ5SGl0c1xuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtwZXJzaXN0ZWRRdWVyeU1pc3Nlc10gUXVlcnlMYXRlbmN5U3RhdHMgcGVyc2lzdGVkUXVlcnlNaXNzZXNcbiAgICAgKiBAcHJvcGVydHkgeyRwcm90b2J1Zi5Ub0FycmF5LjxudW1iZXI+fEFycmF5LjxudW1iZXI+fG51bGx9IFtjYWNoZUxhdGVuY3lDb3VudF0gUXVlcnlMYXRlbmN5U3RhdHMgY2FjaGVMYXRlbmN5Q291bnRcbiAgICAgKiBAcHJvcGVydHkge0lQYXRoRXJyb3JTdGF0c3xudWxsfSBbcm9vdEVycm9yU3RhdHNdIFF1ZXJ5TGF0ZW5jeVN0YXRzIHJvb3RFcnJvclN0YXRzXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3JlcXVlc3RzV2l0aEVycm9yc0NvdW50XSBRdWVyeUxhdGVuY3lTdGF0cyByZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFxuICAgICAqIEBwcm9wZXJ0eSB7JHByb3RvYnVmLlRvQXJyYXkuPG51bWJlcj58QXJyYXkuPG51bWJlcj58bnVsbH0gW3B1YmxpY0NhY2hlVHRsQ291bnRdIFF1ZXJ5TGF0ZW5jeVN0YXRzIHB1YmxpY0NhY2hlVHRsQ291bnRcbiAgICAgKiBAcHJvcGVydHkgeyRwcm90b2J1Zi5Ub0FycmF5LjxudW1iZXI+fEFycmF5LjxudW1iZXI+fG51bGx9IFtwcml2YXRlQ2FjaGVUdGxDb3VudF0gUXVlcnlMYXRlbmN5U3RhdHMgcHJpdmF0ZUNhY2hlVHRsQ291bnRcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbcmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50XSBRdWVyeUxhdGVuY3lTdGF0cyByZWdpc3RlcmVkT3BlcmF0aW9uQ291bnRcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZm9yYmlkZGVuT3BlcmF0aW9uQ291bnRdIFF1ZXJ5TGF0ZW5jeVN0YXRzIGZvcmJpZGRlbk9wZXJhdGlvbkNvdW50XG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3JlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uXSBRdWVyeUxhdGVuY3lTdGF0cyByZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvblxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBRdWVyeUxhdGVuY3lTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5TGF0ZW5jeVN0YXRzLlxuICAgICAqIEBpbXBsZW1lbnRzIElRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SVF1ZXJ5TGF0ZW5jeVN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gUXVlcnlMYXRlbmN5U3RhdHMocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLmxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICB0aGlzLmNhY2hlTGF0ZW5jeUNvdW50ID0gW107XG4gICAgICAgIHRoaXMucHVibGljQ2FjaGVUdGxDb3VudCA9IFtdO1xuICAgICAgICB0aGlzLnByaXZhdGVDYWNoZVR0bENvdW50ID0gW107XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgbGF0ZW5jeUNvdW50LlxuICAgICAqIEBtZW1iZXIge0FycmF5LjxudW1iZXI+fSBsYXRlbmN5Q291bnRcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUubGF0ZW5jeUNvdW50ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIHJlcXVlc3RDb3VudC5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHJlcXVlc3RDb3VudFxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5yZXF1ZXN0Q291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgY2FjaGVIaXRzLlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gY2FjaGVIaXRzXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLmNhY2hlSGl0cyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeUxhdGVuY3lTdGF0cyBwZXJzaXN0ZWRRdWVyeUhpdHMuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBwZXJzaXN0ZWRRdWVyeUhpdHNcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUucGVyc2lzdGVkUXVlcnlIaXRzID0gMDtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIHBlcnNpc3RlZFF1ZXJ5TWlzc2VzLlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gcGVyc2lzdGVkUXVlcnlNaXNzZXNcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUucGVyc2lzdGVkUXVlcnlNaXNzZXMgPSAwO1xuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgY2FjaGVMYXRlbmN5Q291bnQuXG4gICAgICogQG1lbWJlciB7QXJyYXkuPG51bWJlcj59IGNhY2hlTGF0ZW5jeUNvdW50XG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLmNhY2hlTGF0ZW5jeUNvdW50ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIHJvb3RFcnJvclN0YXRzLlxuICAgICAqIEBtZW1iZXIge0lQYXRoRXJyb3JTdGF0c3xudWxsfHVuZGVmaW5lZH0gcm9vdEVycm9yU3RhdHNcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUucm9vdEVycm9yU3RhdHMgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgcmVxdWVzdHNXaXRoRXJyb3JzQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSByZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeUxhdGVuY3lTdGF0cyBwdWJsaWNDYWNoZVR0bENvdW50LlxuICAgICAqIEBtZW1iZXIge0FycmF5LjxudW1iZXI+fSBwdWJsaWNDYWNoZVR0bENvdW50XG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLnB1YmxpY0NhY2hlVHRsQ291bnQgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgcHJpdmF0ZUNhY2hlVHRsQ291bnQuXG4gICAgICogQG1lbWJlciB7QXJyYXkuPG51bWJlcj59IHByaXZhdGVDYWNoZVR0bENvdW50XG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLnByaXZhdGVDYWNoZVR0bENvdW50ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5TGF0ZW5jeVN0YXRzIHJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudC5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudFxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogUXVlcnlMYXRlbmN5U3RhdHMgZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBmb3JiaWRkZW5PcGVyYXRpb25Db3VudFxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeUxhdGVuY3lTdGF0cyByZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbi5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uXG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMucHJvdG90eXBlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uID0gMDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgUXVlcnlMYXRlbmN5U3RhdHMgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUXVlcnlMYXRlbmN5U3RhdHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7UXVlcnlMYXRlbmN5U3RhdHN9IFF1ZXJ5TGF0ZW5jeVN0YXRzIGluc3RhbmNlXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUxhdGVuY3lTdGF0cyhwcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFF1ZXJ5TGF0ZW5jeVN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUXVlcnlMYXRlbmN5U3RhdHN9IG1lc3NhZ2UgUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0Q291bnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RDb3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikudWludDY0KG1lc3NhZ2UucmVxdWVzdENvdW50KTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVIaXRzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjYWNoZUhpdHNcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDAgPSovMjQpLnVpbnQ2NChtZXNzYWdlLmNhY2hlSGl0cyk7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicGVyc2lzdGVkUXVlcnlIaXRzXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAwID0qLzMyKS51aW50NjQobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMpO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3NlcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicGVyc2lzdGVkUXVlcnlNaXNzZXNcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDAgPSovNDApLnVpbnQ2NChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzKTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vdEVycm9yU3RhdHMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJvb3RFcnJvclN0YXRzXCIpKVxuICAgICAgICAgICAgJHJvb3QuUGF0aEVycm9yU3RhdHMuZW5jb2RlKG1lc3NhZ2Uucm9vdEVycm9yU3RhdHMsIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMiA9Ki81OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RzV2l0aEVycm9yc0NvdW50XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAwID0qLzY0KS51aW50NjQobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxMSwgd2lyZVR5cGUgMCA9Ki84OCkudWludDY0KG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50KTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImZvcmJpZGRlbk9wZXJhdGlvbkNvdW50XCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxMiwgd2lyZVR5cGUgMCA9Ki85NikudWludDY0KG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQpO1xuICAgICAgICBsZXQgYXJyYXkxMztcbiAgICAgICAgaWYgKG1lc3NhZ2UubGF0ZW5jeUNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5sYXRlbmN5Q291bnQudG9BcnJheSlcbiAgICAgICAgICAgIGFycmF5MTMgPSBtZXNzYWdlLmxhdGVuY3lDb3VudC50b0FycmF5KCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFycmF5MTMgPSBtZXNzYWdlLmxhdGVuY3lDb3VudDtcbiAgICAgICAgaWYgKGFycmF5MTMgIT0gbnVsbCAmJiBhcnJheTEzLmxlbmd0aCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxMywgd2lyZVR5cGUgMiA9Ki8xMDYpLmZvcmsoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkxMy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICB3cml0ZXIuc2ludDY0KGFycmF5MTNbaV0pO1xuICAgICAgICAgICAgd3JpdGVyLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBhcnJheTE0O1xuICAgICAgICBpZiAobWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQudG9BcnJheSlcbiAgICAgICAgICAgIGFycmF5MTQgPSBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50LnRvQXJyYXkoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgYXJyYXkxNCA9IG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQ7XG4gICAgICAgIGlmIChhcnJheTE0ICE9IG51bGwgJiYgYXJyYXkxNC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTQsIHdpcmVUeXBlIDIgPSovMTE0KS5mb3JrKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5MTQubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnNpbnQ2NChhcnJheTE0W2ldKTtcbiAgICAgICAgICAgIHdyaXRlci5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYXJyYXkxNTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudC50b0FycmF5KVxuICAgICAgICAgICAgYXJyYXkxNSA9IG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudC50b0FycmF5KCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFycmF5MTUgPSBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQ7XG4gICAgICAgIGlmIChhcnJheTE1ICE9IG51bGwgJiYgYXJyYXkxNS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTUsIHdpcmVUeXBlIDIgPSovMTIyKS5mb3JrKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5MTUubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnNpbnQ2NChhcnJheTE1W2ldKTtcbiAgICAgICAgICAgIHdyaXRlci5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYXJyYXkxNjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50LnRvQXJyYXkpXG4gICAgICAgICAgICBhcnJheTE2ID0gbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudC50b0FycmF5KCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFycmF5MTYgPSBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50O1xuICAgICAgICBpZiAoYXJyYXkxNiAhPSBudWxsICYmIGFycmF5MTYubGVuZ3RoKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDE2LCB3aXJlVHlwZSAyID0qLzEzMCkuZm9yaygpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheTE2Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIHdyaXRlci5zaW50NjQoYXJyYXkxNltpXSk7XG4gICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxNywgd2lyZVR5cGUgMCA9Ki8xMzYpLnVpbnQ2NChtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFF1ZXJ5TGF0ZW5jeVN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUXVlcnlMYXRlbmN5U3RhdHN9IG1lc3NhZ2UgUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFF1ZXJ5TGF0ZW5jeVN0YXRzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7UXVlcnlMYXRlbmN5U3RhdHN9IFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5RdWVyeUxhdGVuY3lTdGF0cygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UubGF0ZW5jeUNvdW50ICYmIG1lc3NhZ2UubGF0ZW5jeUNvdW50Lmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF0ZW5jeUNvdW50ID0gW107XG4gICAgICAgICAgICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kMilcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF0ZW5jeUNvdW50LnB1c2gocmVhZGVyLnNpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXRlbmN5Q291bnQucHVzaChyZWFkZXIuc2ludDY0KCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdENvdW50ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2FjaGVIaXRzID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQgJiYgbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50ID0gW107XG4gICAgICAgICAgICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kMilcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQucHVzaChyZWFkZXIuc2ludDY0KCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50LnB1c2gocmVhZGVyLnNpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb3RFcnJvclN0YXRzID0gJHJvb3QuUGF0aEVycm9yU3RhdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQgJiYgbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50Lmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQucHVzaChyZWFkZXIuc2ludDY0KCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQucHVzaChyZWFkZXIuc2ludDY0KCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50ICYmIG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50LnB1c2gocmVhZGVyLnNpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudC5wdXNoKHJlYWRlci5zaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1F1ZXJ5TGF0ZW5jeVN0YXRzfSBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UubGF0ZW5jeUNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhdGVuY3lDb3VudFwiKSkge1xuICAgICAgICAgICAgbGV0IGFycmF5MTM7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sYXRlbmN5Q291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmxhdGVuY3lDb3VudC50b0FycmF5KVxuICAgICAgICAgICAgICAgIGFycmF5MTMgPSBtZXNzYWdlLmxhdGVuY3lDb3VudC50b0FycmF5KCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYXJyYXkxMyA9IG1lc3NhZ2UubGF0ZW5jeUNvdW50O1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5MTMpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImxhdGVuY3lDb3VudDogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkxMy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihhcnJheTEzW2ldKSAmJiAhKGFycmF5MTNbaV0gJiYgJHV0aWwuaXNJbnRlZ2VyKGFycmF5MTNbaV0ubG93KSAmJiAkdXRpbC5pc0ludGVnZXIoYXJyYXkxM1tpXS5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxhdGVuY3lDb3VudDogaW50ZWdlcnxMb25nW10gZXhwZWN0ZWRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0Q291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVxdWVzdENvdW50XCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0Q291bnQpICYmICEobWVzc2FnZS5yZXF1ZXN0Q291bnQgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdENvdW50LmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdENvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXF1ZXN0Q291bnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5jYWNoZUhpdHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2FjaGVIaXRzXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5jYWNoZUhpdHMpICYmICEobWVzc2FnZS5jYWNoZUhpdHMgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuY2FjaGVIaXRzLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuY2FjaGVIaXRzLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjYWNoZUhpdHM6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGVyc2lzdGVkUXVlcnlIaXRzXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMpICYmICEobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwZXJzaXN0ZWRRdWVyeUhpdHM6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3NlcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwZXJzaXN0ZWRRdWVyeU1pc3Nlc1wiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMpICYmICEobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3NlcyAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3Nlcy5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwZXJzaXN0ZWRRdWVyeU1pc3NlczogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNhY2hlTGF0ZW5jeUNvdW50XCIpKSB7XG4gICAgICAgICAgICBsZXQgYXJyYXkxNDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudC50b0FycmF5KVxuICAgICAgICAgICAgICAgIGFycmF5MTQgPSBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50LnRvQXJyYXkoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhcnJheTE0ID0gbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudDtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheTE0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjYWNoZUxhdGVuY3lDb3VudDogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkxNC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihhcnJheTE0W2ldKSAmJiAhKGFycmF5MTRbaV0gJiYgJHV0aWwuaXNJbnRlZ2VyKGFycmF5MTRbaV0ubG93KSAmJiAkdXRpbC5pc0ludGVnZXIoYXJyYXkxNFtpXS5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNhY2hlTGF0ZW5jeUNvdW50OiBpbnRlZ2VyfExvbmdbXSBleHBlY3RlZFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb3RFcnJvclN0YXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJvb3RFcnJvclN0YXRzXCIpKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5QYXRoRXJyb3JTdGF0cy52ZXJpZnkobWVzc2FnZS5yb290RXJyb3JTdGF0cyk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicm9vdEVycm9yU3RhdHMuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpICYmICEobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicHVibGljQ2FjaGVUdGxDb3VudFwiKSkge1xuICAgICAgICAgICAgbGV0IGFycmF5MTU7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50LnRvQXJyYXkpXG4gICAgICAgICAgICAgICAgYXJyYXkxNSA9IG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudC50b0FycmF5KCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYXJyYXkxNSA9IG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudDtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheTE1KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwdWJsaWNDYWNoZVR0bENvdW50OiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheTE1Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKGFycmF5MTVbaV0pICYmICEoYXJyYXkxNVtpXSAmJiAkdXRpbC5pc0ludGVnZXIoYXJyYXkxNVtpXS5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihhcnJheTE1W2ldLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicHVibGljQ2FjaGVUdGxDb3VudDogaW50ZWdlcnxMb25nW10gZXhwZWN0ZWRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwcml2YXRlQ2FjaGVUdGxDb3VudFwiKSkge1xuICAgICAgICAgICAgbGV0IGFycmF5MTY7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQudG9BcnJheSlcbiAgICAgICAgICAgICAgICBhcnJheTE2ID0gbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudC50b0FycmF5KCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYXJyYXkxNiA9IG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQ7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkxNikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicHJpdmF0ZUNhY2hlVHRsQ291bnQ6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5MTYubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIoYXJyYXkxNltpXSkgJiYgIShhcnJheTE2W2ldICYmICR1dGlsLmlzSW50ZWdlcihhcnJheTE2W2ldLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKGFycmF5MTZbaV0uaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwcml2YXRlQ2FjaGVUdGxDb3VudDogaW50ZWdlcnxMb25nW10gZXhwZWN0ZWRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50XCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQpICYmICEobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50LmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmb3JiaWRkZW5PcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQpICYmICEobWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmb3JiaWRkZW5PcGVyYXRpb25Db3VudDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbikgJiYgIShtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24uaGlnaCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtRdWVyeUxhdGVuY3lTdGF0c30gbWVzc2FnZSBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICovXG4gICAgUXVlcnlMYXRlbmN5U3RhdHMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5hcnJheXMgfHwgb3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgb2JqZWN0LmxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICAgICAgb2JqZWN0LmNhY2hlTGF0ZW5jeUNvdW50ID0gW107XG4gICAgICAgICAgICBvYmplY3QucHVibGljQ2FjaGVUdGxDb3VudCA9IFtdO1xuICAgICAgICAgICAgb2JqZWN0LnByaXZhdGVDYWNoZVR0bENvdW50ID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0Q291bnQgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LmNhY2hlSGl0cyA9IDA7XG4gICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlIaXRzID0gMDtcbiAgICAgICAgICAgIG9iamVjdC5wZXJzaXN0ZWRRdWVyeU1pc3NlcyA9IDA7XG4gICAgICAgICAgICBvYmplY3Qucm9vdEVycm9yU3RhdHMgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gMDtcbiAgICAgICAgICAgIG9iamVjdC5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50ID0gMDtcbiAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdENvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5yZXF1ZXN0Q291bnQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RDb3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnJlcXVlc3RDb3VudCkgOiBtZXNzYWdlLnJlcXVlc3RDb3VudDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QucmVxdWVzdENvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnJlcXVlc3RDb3VudCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5yZXF1ZXN0Q291bnQubG93ID4+PiAwLCBtZXNzYWdlLnJlcXVlc3RDb3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UucmVxdWVzdENvdW50O1xuICAgICAgICBpZiAobWVzc2FnZS5jYWNoZUhpdHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2FjaGVIaXRzXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNhY2hlSGl0cyA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3QuY2FjaGVIaXRzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UuY2FjaGVIaXRzKSA6IG1lc3NhZ2UuY2FjaGVIaXRzO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5jYWNoZUhpdHMgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UuY2FjaGVIaXRzKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLmNhY2hlSGl0cy5sb3cgPj4+IDAsIG1lc3NhZ2UuY2FjaGVIaXRzLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5jYWNoZUhpdHM7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwZXJzaXN0ZWRRdWVyeUhpdHNcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5wZXJzaXN0ZWRRdWVyeUhpdHMgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMpIDogbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHM7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LnBlcnNpc3RlZFF1ZXJ5SGl0cyA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlIaXRzLmxvdyA+Pj4gMCwgbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeUhpdHMuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5SGl0cztcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGVyc2lzdGVkUXVlcnlNaXNzZXNcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnBlcnNpc3RlZFF1ZXJ5TWlzc2VzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMpIDogbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3NlcztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QucGVyc2lzdGVkUXVlcnlNaXNzZXMgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UucGVyc2lzdGVkUXVlcnlNaXNzZXMubG93ID4+PiAwLCBtZXNzYWdlLnBlcnNpc3RlZFF1ZXJ5TWlzc2VzLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5wZXJzaXN0ZWRRdWVyeU1pc3NlcztcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vdEVycm9yU3RhdHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicm9vdEVycm9yU3RhdHNcIikpXG4gICAgICAgICAgICBvYmplY3Qucm9vdEVycm9yU3RhdHMgPSAkcm9vdC5QYXRoRXJyb3JTdGF0cy50b09iamVjdChtZXNzYWdlLnJvb3RFcnJvclN0YXRzLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpIDogbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQubG93ID4+PiAwLCBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCkgOiBtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5yZWdpc3RlcmVkT3BlcmF0aW9uQ291bnQubG93ID4+PiAwLCBtZXNzYWdlLnJlZ2lzdGVyZWRPcGVyYXRpb25Db3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UucmVnaXN0ZXJlZE9wZXJhdGlvbkNvdW50O1xuICAgICAgICBpZiAobWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmb3JiaWRkZW5PcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3QuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCkgOiBtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5mb3JiaWRkZW5PcGVyYXRpb25Db3VudC5sb3cgPj4+IDAsIG1lc3NhZ2UuZm9yYmlkZGVuT3BlcmF0aW9uQ291bnQuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLmZvcmJpZGRlbk9wZXJhdGlvbkNvdW50O1xuICAgICAgICBpZiAobWVzc2FnZS5sYXRlbmN5Q291bnQgJiYgbWVzc2FnZS5sYXRlbmN5Q291bnQubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QubGF0ZW5jeUNvdW50ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG1lc3NhZ2UubGF0ZW5jeUNvdW50Lmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5sYXRlbmN5Q291bnRbal0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5sYXRlbmN5Q291bnRbal0gPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5sYXRlbmN5Q291bnRbal0pIDogbWVzc2FnZS5sYXRlbmN5Q291bnRbal07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGF0ZW5jeUNvdW50W2pdID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmxhdGVuY3lDb3VudFtqXSkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5sYXRlbmN5Q291bnRbal0ubG93ID4+PiAwLCBtZXNzYWdlLmxhdGVuY3lDb3VudFtqXS5oaWdoID4+PiAwKS50b051bWJlcigpIDogbWVzc2FnZS5sYXRlbmN5Q291bnRbal07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnQgJiYgbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iamVjdC5jYWNoZUxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLmNhY2hlTGF0ZW5jeUNvdW50Lmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudFtqXSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNhY2hlTGF0ZW5jeUNvdW50W2pdID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnRbal0pIDogbWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudFtqXTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jYWNoZUxhdGVuY3lDb3VudFtqXSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudFtqXSkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5jYWNoZUxhdGVuY3lDb3VudFtqXS5sb3cgPj4+IDAsIG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnRbal0uaGlnaCA+Pj4gMCkudG9OdW1iZXIoKSA6IG1lc3NhZ2UuY2FjaGVMYXRlbmN5Q291bnRbal07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudCAmJiBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QucHVibGljQ2FjaGVUdGxDb3VudCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnQubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnRbal0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wdWJsaWNDYWNoZVR0bENvdW50W2pdID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudFtqXSkgOiBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnRbal07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucHVibGljQ2FjaGVUdGxDb3VudFtqXSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5wdWJsaWNDYWNoZVR0bENvdW50W2pdKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnRbal0ubG93ID4+PiAwLCBtZXNzYWdlLnB1YmxpY0NhY2hlVHRsQ291bnRbal0uaGlnaCA+Pj4gMCkudG9OdW1iZXIoKSA6IG1lc3NhZ2UucHVibGljQ2FjaGVUdGxDb3VudFtqXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudCAmJiBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LnByaXZhdGVDYWNoZVR0bENvdW50ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG1lc3NhZ2UucHJpdmF0ZUNhY2hlVHRsQ291bnQubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50W2pdID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucHJpdmF0ZUNhY2hlVHRsQ291bnRbal0gPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudFtqXSkgOiBtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50W2pdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnByaXZhdGVDYWNoZVR0bENvdW50W2pdID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50W2pdKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnByaXZhdGVDYWNoZVR0bENvdW50W2pdLmxvdyA+Pj4gMCwgbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudFtqXS5oaWdoID4+PiAwKS50b051bWJlcigpIDogbWVzc2FnZS5wcml2YXRlQ2FjaGVUdGxDb3VudFtqXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvblwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3QucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24gPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbikgOiBtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbiA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbikgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5yZXF1ZXN0c1dpdGhvdXRGaWVsZEluc3RydW1lbnRhdGlvbi5sb3cgPj4+IDAsIG1lc3NhZ2UucmVxdWVzdHNXaXRob3V0RmllbGRJbnN0cnVtZW50YXRpb24uaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLnJlcXVlc3RzV2l0aG91dEZpZWxkSW5zdHJ1bWVudGF0aW9uO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIFF1ZXJ5TGF0ZW5jeVN0YXRzIHRvIEpTT04uXG4gICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAqIEBtZW1iZXJvZiBRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFF1ZXJ5TGF0ZW5jeVN0YXRzO1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IFN0YXRzQ29udGV4dCA9ICRyb290LlN0YXRzQ29udGV4dCA9ICgoKSA9PiB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU3RhdHNDb250ZXh0LlxuICAgICAqIEBleHBvcnRzIElTdGF0c0NvbnRleHRcbiAgICAgKiBAaW50ZXJmYWNlIElTdGF0c0NvbnRleHRcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbY2xpZW50TmFtZV0gU3RhdHNDb250ZXh0IGNsaWVudE5hbWVcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbY2xpZW50VmVyc2lvbl0gU3RhdHNDb250ZXh0IGNsaWVudFZlcnNpb25cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU3RhdHNDb250ZXh0LlxuICAgICAqIEBleHBvcnRzIFN0YXRzQ29udGV4dFxuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFN0YXRzQ29udGV4dC5cbiAgICAgKiBAaW1wbGVtZW50cyBJU3RhdHNDb250ZXh0XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtJU3RhdHNDb250ZXh0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gU3RhdHNDb250ZXh0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGF0c0NvbnRleHQgY2xpZW50TmFtZS5cbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGNsaWVudE5hbWVcbiAgICAgKiBAbWVtYmVyb2YgU3RhdHNDb250ZXh0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LnByb3RvdHlwZS5jbGllbnROYW1lID0gXCJcIjtcblxuICAgIC8qKlxuICAgICAqIFN0YXRzQ29udGV4dCBjbGllbnRWZXJzaW9uLlxuICAgICAqIEBtZW1iZXIge3N0cmluZ30gY2xpZW50VmVyc2lvblxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBTdGF0c0NvbnRleHQucHJvdG90eXBlLmNsaWVudFZlcnNpb24gPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTdGF0c0NvbnRleHQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgKiBAbWVtYmVyb2YgU3RhdHNDb250ZXh0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVN0YXRzQ29udGV4dD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqIEByZXR1cm5zIHtTdGF0c0NvbnRleHR9IFN0YXRzQ29udGV4dCBpbnN0YW5jZVxuICAgICAqL1xuICAgIFN0YXRzQ29udGV4dC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gbmV3IFN0YXRzQ29udGV4dChwcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFN0YXRzQ29udGV4dCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBTdGF0c0NvbnRleHQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJU3RhdHNDb250ZXh0fSBtZXNzYWdlIFN0YXRzQ29udGV4dCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnROYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjbGllbnROYW1lXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5jbGllbnROYW1lKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2xpZW50VmVyc2lvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY2xpZW50VmVyc2lvblwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuc3RyaW5nKG1lc3NhZ2UuY2xpZW50VmVyc2lvbik7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdGF0c0NvbnRleHQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgU3RhdHNDb250ZXh0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgU3RhdHNDb250ZXh0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVN0YXRzQ29udGV4dH0gbWVzc2FnZSBTdGF0c0NvbnRleHQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFN0YXRzQ29udGV4dC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgU3RhdHNDb250ZXh0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7U3RhdHNDb250ZXh0fSBTdGF0c0NvbnRleHRcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFN0YXRzQ29udGV4dC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5TdGF0c0NvbnRleHQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2xpZW50TmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNsaWVudFZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIFN0YXRzQ29udGV4dCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgU3RhdHNDb250ZXh0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEByZXR1cm5zIHtTdGF0c0NvbnRleHR9IFN0YXRzQ29udGV4dFxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyBhIFN0YXRzQ29udGV4dCBtZXNzYWdlLlxuICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgKiBAbWVtYmVyb2YgU3RhdHNDb250ZXh0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLmNsaWVudE5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2xpZW50TmFtZVwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5jbGllbnROYW1lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjbGllbnROYW1lOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2xpZW50VmVyc2lvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjbGllbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmNsaWVudFZlcnNpb24pKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImNsaWVudFZlcnNpb246IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgU3RhdHNDb250ZXh0IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgU3RhdHNDb250ZXh0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7U3RhdHNDb250ZXh0fSBtZXNzYWdlIFN0YXRzQ29udGV4dFxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC5jbGllbnROYW1lID0gXCJcIjtcbiAgICAgICAgICAgIG9iamVjdC5jbGllbnRWZXJzaW9uID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jbGllbnROYW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudE5hbWVcIikpXG4gICAgICAgICAgICBvYmplY3QuY2xpZW50TmFtZSA9IG1lc3NhZ2UuY2xpZW50TmFtZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2xpZW50VmVyc2lvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjbGllbnRWZXJzaW9uXCIpKVxuICAgICAgICAgICAgb2JqZWN0LmNsaWVudFZlcnNpb24gPSBtZXNzYWdlLmNsaWVudFZlcnNpb247XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgU3RhdHNDb250ZXh0IHRvIEpTT04uXG4gICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAqIEBtZW1iZXJvZiBTdGF0c0NvbnRleHRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICovXG4gICAgU3RhdHNDb250ZXh0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3RhdHNDb250ZXh0O1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgPSAkcm9vdC5Db250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzID0gKCgpID0+IHtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgYSBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLlxuICAgICAqIEBleHBvcnRzIElDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGludGVyZmFjZSBJQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBwcm9wZXJ0eSB7SVF1ZXJ5TGF0ZW5jeVN0YXRzfG51bGx9IFtxdWVyeUxhdGVuY3lTdGF0c10gQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBxdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBwcm9wZXJ0eSB7SVN0YXRzQ29udGV4dHxudWxsfSBbY29udGV4dF0gQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBjb250ZXh0XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMuXG4gICAgICogQGV4cG9ydHMgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMuXG4gICAgICogQGltcGxlbWVudHMgSUNvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBxdWVyeUxhdGVuY3lTdGF0cy5cbiAgICAgKiBAbWVtYmVyIHtJUXVlcnlMYXRlbmN5U3RhdHN8bnVsbHx1bmRlZmluZWR9IHF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLnByb3RvdHlwZS5xdWVyeUxhdGVuY3lTdGF0cyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIGNvbnRleHQuXG4gICAgICogQG1lbWJlciB7SVN0YXRzQ29udGV4dHxudWxsfHVuZGVmaW5lZH0gY29udGV4dFxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUuY29udGV4dCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHN9IENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyhwcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c30gbWVzc2FnZSBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlMYXRlbmN5U3RhdHNcIikpXG4gICAgICAgICAgICAkcm9vdC5RdWVyeUxhdGVuY3lTdGF0cy5lbmNvZGUobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cywgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5jb250ZXh0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjb250ZXh0XCIpKVxuICAgICAgICAgICAgJHJvb3QuU3RhdHNDb250ZXh0LmVuY29kZShtZXNzYWdlLmNvbnRleHQsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c30gbWVzc2FnZSBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHN9IENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cyA9ICRyb290LlF1ZXJ5TGF0ZW5jeVN0YXRzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZXh0ID0gJHJvb3QuU3RhdHNDb250ZXh0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHN9IENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlLlxuICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlMYXRlbmN5U3RhdHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicXVlcnlMYXRlbmN5U3RhdHNcIikpIHtcbiAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlF1ZXJ5TGF0ZW5jeVN0YXRzLnZlcmlmeShtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzKTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJxdWVyeUxhdGVuY3lTdGF0cy5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNvbnRleHQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY29udGV4dFwiKSkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuU3RhdHNDb250ZXh0LnZlcmlmeShtZXNzYWdlLmNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRleHQuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtDb250ZXh0dWFsaXplZFF1ZXJ5TGF0ZW5jeVN0YXRzfSBtZXNzYWdlIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgb2JqZWN0LnF1ZXJ5TGF0ZW5jeVN0YXRzID0gbnVsbDtcbiAgICAgICAgICAgIG9iamVjdC5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJxdWVyeUxhdGVuY3lTdGF0c1wiKSlcbiAgICAgICAgICAgIG9iamVjdC5xdWVyeUxhdGVuY3lTdGF0cyA9ICRyb290LlF1ZXJ5TGF0ZW5jeVN0YXRzLnRvT2JqZWN0KG1lc3NhZ2UucXVlcnlMYXRlbmN5U3RhdHMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5jb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbnRleHRcIikpXG4gICAgICAgICAgICBvYmplY3QuY29udGV4dCA9ICRyb290LlN0YXRzQ29udGV4dC50b09iamVjdChtZXNzYWdlLmNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHMgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRRdWVyeUxhdGVuY3lTdGF0cy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbnRleHR1YWxpemVkUXVlcnlMYXRlbmN5U3RhdHM7XG59KSgpO1xuXG5leHBvcnQgY29uc3QgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgPSAkcm9vdC5Db250ZXh0dWFsaXplZFR5cGVTdGF0cyA9ICgoKSA9PiB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMuXG4gICAgICogQGV4cG9ydHMgSUNvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQGludGVyZmFjZSBJQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAcHJvcGVydHkge0lTdGF0c0NvbnRleHR8bnVsbH0gW2NvbnRleHRdIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIGNvbnRleHRcbiAgICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLElUeXBlU3RhdD58bnVsbH0gW3BlclR5cGVTdGF0XSBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBwZXJUeXBlU3RhdFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLlxuICAgICAqIEBpbXBsZW1lbnRzIElDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkVHlwZVN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLnBlclR5cGVTdGF0ID0ge307XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgY29udGV4dC5cbiAgICAgKiBAbWVtYmVyIHtJU3RhdHNDb250ZXh0fG51bGx8dW5kZWZpbmVkfSBjb250ZXh0XG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMucHJvdG90eXBlLmNvbnRleHQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgcGVyVHlwZVN0YXQuXG4gICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsSVR5cGVTdGF0Pn0gcGVyVHlwZVN0YXRcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy5wcm90b3R5cGUucGVyVHlwZVN0YXQgPSAkdXRpbC5lbXB0eU9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7Q29udGV4dHVhbGl6ZWRUeXBlU3RhdHN9IENvbnRleHR1YWxpemVkVHlwZVN0YXRzIGluc3RhbmNlXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyhwcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHN9IG1lc3NhZ2UgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkVHlwZVN0YXRzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5jb250ZXh0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjb250ZXh0XCIpKVxuICAgICAgICAgICAgJHJvb3QuU3RhdHNDb250ZXh0LmVuY29kZShtZXNzYWdlLmNvbnRleHQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyVHlwZVN0YXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlclR5cGVTdGF0XCIpKVxuICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucGVyVHlwZVN0YXQpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKS51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICRyb290LlR5cGVTdGF0LmVuY29kZShtZXNzYWdlLnBlclR5cGVTdGF0W2tleXNbaV1dLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkVHlwZVN0YXRzfSBtZXNzYWdlIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkVHlwZVN0YXRzfSBDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMoKSwga2V5O1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZXh0ID0gJHJvb3QuU3RhdHNDb250ZXh0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wZXJUeXBlU3RhdCA9PT0gJHV0aWwuZW1wdHlPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVyVHlwZVN0YXQgPSB7fTtcbiAgICAgICAgICAgICAgICBrZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVyVHlwZVN0YXRba2V5XSA9ICRyb290LlR5cGVTdGF0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcmV0dXJucyB7Q29udGV4dHVhbGl6ZWRUeXBlU3RhdHN9IENvbnRleHR1YWxpemVkVHlwZVN0YXRzXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgYSBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyBtZXNzYWdlLlxuICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFR5cGVTdGF0cy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5jb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbnRleHRcIikpIHtcbiAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlN0YXRzQ29udGV4dC52ZXJpZnkobWVzc2FnZS5jb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250ZXh0LlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyVHlwZVN0YXQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGVyVHlwZVN0YXRcIikpIHtcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNPYmplY3QobWVzc2FnZS5wZXJUeXBlU3RhdCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicGVyVHlwZVN0YXQ6IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgbGV0IGtleSA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucGVyVHlwZVN0YXQpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5UeXBlU3RhdC52ZXJpZnkobWVzc2FnZS5wZXJUeXBlU3RhdFtrZXlbaV1dKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInBlclR5cGVTdGF0LlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIENvbnRleHR1YWxpemVkVHlwZVN0YXRzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtDb250ZXh0dWFsaXplZFR5cGVTdGF0c30gbWVzc2FnZSBDb250ZXh0dWFsaXplZFR5cGVTdGF0c1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QucGVyVHlwZVN0YXQgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QuY29udGV4dCA9IG51bGw7XG4gICAgICAgIGlmIChtZXNzYWdlLmNvbnRleHQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY29udGV4dFwiKSlcbiAgICAgICAgICAgIG9iamVjdC5jb250ZXh0ID0gJHJvb3QuU3RhdHNDb250ZXh0LnRvT2JqZWN0KG1lc3NhZ2UuY29udGV4dCwgb3B0aW9ucyk7XG4gICAgICAgIGxldCBrZXlzMjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyVHlwZVN0YXQgJiYgKGtleXMyID0gT2JqZWN0LmtleXMobWVzc2FnZS5wZXJUeXBlU3RhdCkpLmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LnBlclR5cGVTdGF0ID0ge307XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGtleXMyLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIG9iamVjdC5wZXJUeXBlU3RhdFtrZXlzMltqXV0gPSAkcm9vdC5UeXBlU3RhdC50b09iamVjdChtZXNzYWdlLnBlclR5cGVTdGF0W2tleXMyW2pdXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBDb250ZXh0dWFsaXplZFR5cGVTdGF0cyB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRUeXBlU3RhdHMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb250ZXh0dWFsaXplZFR5cGVTdGF0cztcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBGaWVsZFN0YXQgPSAkcm9vdC5GaWVsZFN0YXQgPSAoKCkgPT4ge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIEZpZWxkU3RhdC5cbiAgICAgKiBAZXhwb3J0cyBJRmllbGRTdGF0XG4gICAgICogQGludGVyZmFjZSBJRmllbGRTdGF0XG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3JldHVyblR5cGVdIEZpZWxkU3RhdCByZXR1cm5UeXBlXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2Vycm9yc0NvdW50XSBGaWVsZFN0YXQgZXJyb3JzQ291bnRcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbb2JzZXJ2ZWRFeGVjdXRpb25Db3VudF0gRmllbGRTdGF0IG9ic2VydmVkRXhlY3V0aW9uQ291bnRcbiAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZXN0aW1hdGVkRXhlY3V0aW9uQ291bnRdIEZpZWxkU3RhdCBlc3RpbWF0ZWRFeGVjdXRpb25Db3VudFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudF0gRmllbGRTdGF0IHJlcXVlc3RzV2l0aEVycm9yc0NvdW50XG4gICAgICogQHByb3BlcnR5IHskcHJvdG9idWYuVG9BcnJheS48bnVtYmVyPnxBcnJheS48bnVtYmVyPnxudWxsfSBbbGF0ZW5jeUNvdW50XSBGaWVsZFN0YXQgbGF0ZW5jeUNvdW50XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEZpZWxkU3RhdC5cbiAgICAgKiBAZXhwb3J0cyBGaWVsZFN0YXRcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBGaWVsZFN0YXQuXG4gICAgICogQGltcGxlbWVudHMgSUZpZWxkU3RhdFxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SUZpZWxkU3RhdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEZpZWxkU3RhdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMubGF0ZW5jeUNvdW50ID0gW107XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmllbGRTdGF0IHJldHVyblR5cGUuXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSByZXR1cm5UeXBlXG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIEZpZWxkU3RhdC5wcm90b3R5cGUucmV0dXJuVHlwZSA9IFwiXCI7XG5cbiAgICAvKipcbiAgICAgKiBGaWVsZFN0YXQgZXJyb3JzQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBlcnJvcnNDb3VudFxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQucHJvdG90eXBlLmVycm9yc0NvdW50ID0gMDtcblxuICAgIC8qKlxuICAgICAqIEZpZWxkU3RhdCBvYnNlcnZlZEV4ZWN1dGlvbkNvdW50LlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gb2JzZXJ2ZWRFeGVjdXRpb25Db3VudFxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQucHJvdG90eXBlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogRmllbGRTdGF0IGVzdGltYXRlZEV4ZWN1dGlvbkNvdW50LlxuICAgICAqIEBtZW1iZXIge251bWJlcn0gZXN0aW1hdGVkRXhlY3V0aW9uQ291bnRcbiAgICAgKiBAbWVtYmVyb2YgRmllbGRTdGF0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgRmllbGRTdGF0LnByb3RvdHlwZS5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBGaWVsZFN0YXQgcmVxdWVzdHNXaXRoRXJyb3JzQ291bnQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSByZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQucHJvdG90eXBlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gMDtcblxuICAgIC8qKlxuICAgICAqIEZpZWxkU3RhdCBsYXRlbmN5Q291bnQuXG4gICAgICogQG1lbWJlciB7QXJyYXkuPG51bWJlcj59IGxhdGVuY3lDb3VudFxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQucHJvdG90eXBlLmxhdGVuY3lDb3VudCA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEZpZWxkU3RhdCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJRmllbGRTdGF0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge0ZpZWxkU3RhdH0gRmllbGRTdGF0IGluc3RhbmNlXG4gICAgICovXG4gICAgRmllbGRTdGF0LmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRTdGF0KHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmllbGRTdGF0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEZpZWxkU3RhdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lGaWVsZFN0YXR9IG1lc3NhZ2UgRmllbGRTdGF0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBGaWVsZFN0YXQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnJldHVyblR5cGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJldHVyblR5cGVcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLnN0cmluZyhtZXNzYWdlLnJldHVyblR5cGUpO1xuICAgICAgICBpZiAobWVzc2FnZS5lcnJvcnNDb3VudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDAgPSovMzIpLnVpbnQ2NChtZXNzYWdlLmVycm9yc0NvdW50KTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwib2JzZXJ2ZWRFeGVjdXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMCA9Ki80MCkudWludDY0KG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMCA9Ki80OCkudWludDY0KG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpO1xuICAgICAgICBsZXQgYXJyYXk5O1xuICAgICAgICBpZiAobWVzc2FnZS5sYXRlbmN5Q291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmxhdGVuY3lDb3VudC50b0FycmF5KVxuICAgICAgICAgICAgYXJyYXk5ID0gbWVzc2FnZS5sYXRlbmN5Q291bnQudG9BcnJheSgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheTkgPSBtZXNzYWdlLmxhdGVuY3lDb3VudDtcbiAgICAgICAgaWYgKGFycmF5OSAhPSBudWxsICYmIGFycmF5OS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgOSwgd2lyZVR5cGUgMiA9Ki83NCkuZm9yaygpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheTkubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnNpbnQ2NChhcnJheTlbaV0pO1xuICAgICAgICAgICAgd3JpdGVyLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlc3RpbWF0ZWRFeGVjdXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTAsIHdpcmVUeXBlIDAgPSovODApLnVpbnQ2NChtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50KTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZpZWxkU3RhdCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBGaWVsZFN0YXQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJRmllbGRTdGF0fSBtZXNzYWdlIEZpZWxkU3RhdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgRmllbGRTdGF0LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBGaWVsZFN0YXQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAqIEByZXR1cm5zIHtGaWVsZFN0YXR9IEZpZWxkU3RhdFxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgRmllbGRTdGF0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkZpZWxkU3RhdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yZXR1cm5UeXBlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3JzQ291bnQgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5sYXRlbmN5Q291bnQgJiYgbWVzc2FnZS5sYXRlbmN5Q291bnQubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXRlbmN5Q291bnQgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXRlbmN5Q291bnQucHVzaChyZWFkZXIuc2ludDY0KCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhdGVuY3lDb3VudC5wdXNoKHJlYWRlci5zaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIEZpZWxkU3RhdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgRmllbGRTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEByZXR1cm5zIHtGaWVsZFN0YXR9IEZpZWxkU3RhdFxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgRmllbGRTdGF0LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyBhIEZpZWxkU3RhdCBtZXNzYWdlLlxuICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgKiBAbWVtYmVyb2YgRmllbGRTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgRmllbGRTdGF0LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnJldHVyblR5cGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmV0dXJuVHlwZVwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5yZXR1cm5UeXBlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXR1cm5UeXBlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3JzQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVycm9yc0NvdW50KSAmJiAhKG1lc3NhZ2UuZXJyb3JzQ291bnQgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZXJyb3JzQ291bnQubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lcnJvcnNDb3VudC5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JzQ291bnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9ic2VydmVkRXhlY3V0aW9uQ291bnRcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQpICYmICEobWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYnNlcnZlZEV4ZWN1dGlvbkNvdW50OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZXN0aW1hdGVkRXhlY3V0aW9uQ291bnRcIikpXG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50KSAmJiAhKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudC5oaWdoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpICYmICEobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLmxhdGVuY3lDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYXRlbmN5Q291bnRcIikpIHtcbiAgICAgICAgICAgIGxldCBhcnJheTk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sYXRlbmN5Q291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmxhdGVuY3lDb3VudC50b0FycmF5KVxuICAgICAgICAgICAgICAgIGFycmF5OSA9IG1lc3NhZ2UubGF0ZW5jeUNvdW50LnRvQXJyYXkoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhcnJheTkgPSBtZXNzYWdlLmxhdGVuY3lDb3VudDtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheTkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImxhdGVuY3lDb3VudDogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXk5Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKGFycmF5OVtpXSkgJiYgIShhcnJheTlbaV0gJiYgJHV0aWwuaXNJbnRlZ2VyKGFycmF5OVtpXS5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihhcnJheTlbaV0uaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsYXRlbmN5Q291bnQ6IGludGVnZXJ8TG9uZ1tdIGV4cGVjdGVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIEZpZWxkU3RhdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIEZpZWxkU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0ZpZWxkU3RhdH0gbWVzc2FnZSBGaWVsZFN0YXRcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIEZpZWxkU3RhdC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgb2JqZWN0LmxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgb2JqZWN0LnJldHVyblR5cGUgPSBcIlwiO1xuICAgICAgICAgICAgb2JqZWN0LmVycm9yc0NvdW50ID0gMDtcbiAgICAgICAgICAgIG9iamVjdC5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ID0gMDtcbiAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudCA9IDA7XG4gICAgICAgICAgICBvYmplY3QuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJldHVyblR5cGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmV0dXJuVHlwZVwiKSlcbiAgICAgICAgICAgIG9iamVjdC5yZXR1cm5UeXBlID0gbWVzc2FnZS5yZXR1cm5UeXBlO1xuICAgICAgICBpZiAobWVzc2FnZS5lcnJvcnNDb3VudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlcnJvcnNDb3VudFwiKSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5lcnJvcnNDb3VudCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3QuZXJyb3JzQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5lcnJvcnNDb3VudCkgOiBtZXNzYWdlLmVycm9yc0NvdW50O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5lcnJvcnNDb3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5lcnJvcnNDb3VudCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5lcnJvcnNDb3VudC5sb3cgPj4+IDAsIG1lc3NhZ2UuZXJyb3JzQ291bnQuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSkgOiBtZXNzYWdlLmVycm9yc0NvdW50O1xuICAgICAgICBpZiAobWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9ic2VydmVkRXhlY3V0aW9uQ291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBvYmplY3Qub2JzZXJ2ZWRFeGVjdXRpb25Db3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQpIDogbWVzc2FnZS5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iamVjdC5vYnNlcnZlZEV4ZWN1dGlvbkNvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLm9ic2VydmVkRXhlY3V0aW9uQ291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudC5sb3cgPj4+IDAsIG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2Uub2JzZXJ2ZWRFeGVjdXRpb25Db3VudDtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVxdWVzdHNXaXRoRXJyb3JzQ291bnRcIikpXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnJlcXVlc3RzV2l0aEVycm9yc0NvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpIDogbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmplY3QucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UucmVxdWVzdHNXaXRoRXJyb3JzQ291bnQubG93ID4+PiAwLCBtZXNzYWdlLnJlcXVlc3RzV2l0aEVycm9yc0NvdW50LmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS5yZXF1ZXN0c1dpdGhFcnJvcnNDb3VudDtcbiAgICAgICAgaWYgKG1lc3NhZ2UubGF0ZW5jeUNvdW50ICYmIG1lc3NhZ2UubGF0ZW5jeUNvdW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LmxhdGVuY3lDb3VudCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLmxhdGVuY3lDb3VudC5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGF0ZW5jeUNvdW50W2pdID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdKSA6IG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmxhdGVuY3lDb3VudFtqXSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS5sYXRlbmN5Q291bnRbal0pIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdLmxvdyA+Pj4gMCwgbWVzc2FnZS5sYXRlbmN5Q291bnRbal0uaGlnaCA+Pj4gMCkudG9OdW1iZXIoKSA6IG1lc3NhZ2UubGF0ZW5jeUNvdW50W2pdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVzdGltYXRlZEV4ZWN1dGlvbkNvdW50XCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50KSA6IG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0LmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50KSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLmVzdGltYXRlZEV4ZWN1dGlvbkNvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5lc3RpbWF0ZWRFeGVjdXRpb25Db3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UuZXN0aW1hdGVkRXhlY3V0aW9uQ291bnQ7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgRmllbGRTdGF0IHRvIEpTT04uXG4gICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAqIEBtZW1iZXJvZiBGaWVsZFN0YXRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICovXG4gICAgRmllbGRTdGF0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRmllbGRTdGF0O1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IFR5cGVTdGF0ID0gJHJvb3QuVHlwZVN0YXQgPSAoKCkgPT4ge1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiBhIFR5cGVTdGF0LlxuICAgICAqIEBleHBvcnRzIElUeXBlU3RhdFxuICAgICAqIEBpbnRlcmZhY2UgSVR5cGVTdGF0XG4gICAgICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZyxJRmllbGRTdGF0PnxudWxsfSBbcGVyRmllbGRTdGF0XSBUeXBlU3RhdCBwZXJGaWVsZFN0YXRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVHlwZVN0YXQuXG4gICAgICogQGV4cG9ydHMgVHlwZVN0YXRcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUeXBlU3RhdC5cbiAgICAgKiBAaW1wbGVtZW50cyBJVHlwZVN0YXRcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lUeXBlU3RhdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFR5cGVTdGF0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5wZXJGaWVsZFN0YXQgPSB7fTtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUeXBlU3RhdCBwZXJGaWVsZFN0YXQuXG4gICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsSUZpZWxkU3RhdD59IHBlckZpZWxkU3RhdFxuICAgICAqIEBtZW1iZXJvZiBUeXBlU3RhdFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFR5cGVTdGF0LnByb3RvdHlwZS5wZXJGaWVsZFN0YXQgPSAkdXRpbC5lbXB0eU9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgVHlwZVN0YXQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgKiBAbWVtYmVyb2YgVHlwZVN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJVHlwZVN0YXQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7VHlwZVN0YXR9IFR5cGVTdGF0IGluc3RhbmNlXG4gICAgICovXG4gICAgVHlwZVN0YXQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUeXBlU3RhdChwcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFR5cGVTdGF0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFR5cGVTdGF0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgVHlwZVN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJVHlwZVN0YXR9IG1lc3NhZ2UgVHlwZVN0YXQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFR5cGVTdGF0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJGaWVsZFN0YXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBlckZpZWxkU3RhdFwiKSlcbiAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnBlckZpZWxkU3RhdCksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcoa2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgJHJvb3QuRmllbGRTdGF0LmVuY29kZShtZXNzYWdlLnBlckZpZWxkU3RhdFtrZXlzW2ldXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHlwZVN0YXQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgVHlwZVN0YXQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAqIEBtZW1iZXJvZiBUeXBlU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lUeXBlU3RhdH0gbWVzc2FnZSBUeXBlU3RhdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICovXG4gICAgVHlwZVN0YXQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIFR5cGVTdGF0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAqIEBtZW1iZXJvZiBUeXBlU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAqIEByZXR1cm5zIHtUeXBlU3RhdH0gVHlwZVN0YXRcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFR5cGVTdGF0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LlR5cGVTdGF0KCksIGtleTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJlYWRlci5za2lwKCkucG9zKys7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGVyRmllbGRTdGF0ID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wZXJGaWVsZFN0YXQgPSB7fTtcbiAgICAgICAgICAgICAgICBrZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVyRmllbGRTdGF0W2tleV0gPSAkcm9vdC5GaWVsZFN0YXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgVHlwZVN0YXQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIFR5cGVTdGF0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEByZXR1cm5zIHtUeXBlU3RhdH0gVHlwZVN0YXRcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFR5cGVTdGF0LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyBhIFR5cGVTdGF0IG1lc3NhZ2UuXG4gICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAqIEBtZW1iZXJvZiBUeXBlU3RhdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAqL1xuICAgIFR5cGVTdGF0LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlckZpZWxkU3RhdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwZXJGaWVsZFN0YXRcIikpIHtcbiAgICAgICAgICAgIGlmICghJHV0aWwuaXNPYmplY3QobWVzc2FnZS5wZXJGaWVsZFN0YXQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInBlckZpZWxkU3RhdDogb2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBsZXQga2V5ID0gT2JqZWN0LmtleXMobWVzc2FnZS5wZXJGaWVsZFN0YXQpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5GaWVsZFN0YXQudmVyaWZ5KG1lc3NhZ2UucGVyRmllbGRTdGF0W2tleVtpXV0pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicGVyRmllbGRTdGF0LlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFR5cGVTdGF0IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgVHlwZVN0YXRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtUeXBlU3RhdH0gbWVzc2FnZSBUeXBlU3RhdFxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICovXG4gICAgVHlwZVN0YXQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QucGVyRmllbGRTdGF0ID0ge307XG4gICAgICAgIGxldCBrZXlzMjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGVyRmllbGRTdGF0ICYmIChrZXlzMiA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucGVyRmllbGRTdGF0KSkubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QucGVyRmllbGRTdGF0ID0ge307XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGtleXMyLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIG9iamVjdC5wZXJGaWVsZFN0YXRba2V5czJbal1dID0gJHJvb3QuRmllbGRTdGF0LnRvT2JqZWN0KG1lc3NhZ2UucGVyRmllbGRTdGF0W2tleXMyW2pdXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBUeXBlU3RhdCB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgVHlwZVN0YXRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICovXG4gICAgVHlwZVN0YXQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBUeXBlU3RhdDtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSA9ICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlID0gKCgpID0+IHtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgYSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5cbiAgICAgKiBAZXhwb3J0cyBJUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAaW50ZXJmYWNlIElSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW2ZpZWxkTmFtZXNdIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIGZpZWxkTmFtZXNcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2lzSW50ZXJmYWNlXSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSBpc0ludGVyZmFjZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5cbiAgICAgKiBAZXhwb3J0cyBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLlxuICAgICAqIEBpbXBsZW1lbnRzIElSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SVJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLmZpZWxkTmFtZXMgPSBbXTtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSBmaWVsZE5hbWVzLlxuICAgICAqIEBtZW1iZXIge0FycmF5LjxzdHJpbmc+fSBmaWVsZE5hbWVzXG4gICAgICogQG1lbWJlcm9mIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUucHJvdG90eXBlLmZpZWxkTmFtZXMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgLyoqXG4gICAgICogUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgaXNJbnRlcmZhY2UuXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn0gaXNJbnRlcmZhY2VcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5wcm90b3R5cGUuaXNJbnRlcmZhY2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7UmVmZXJlbmNlZEZpZWxkc0ZvclR5cGV9IFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIGluc3RhbmNlXG4gICAgICovXG4gICAgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZShwcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGV9IG1lc3NhZ2UgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5maWVsZE5hbWVzICE9IG51bGwgJiYgbWVzc2FnZS5maWVsZE5hbWVzLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5maWVsZE5hbWVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UuZmllbGROYW1lc1tpXSk7XG4gICAgICAgIGlmIChtZXNzYWdlLmlzSW50ZXJmYWNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpc0ludGVyZmFjZVwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuYm9vbChtZXNzYWdlLmlzSW50ZXJmYWNlKTtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGV9IG1lc3NhZ2UgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7UmVmZXJlbmNlZEZpZWxkc0ZvclR5cGV9IFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5SZWZlcmVuY2VkRmllbGRzRm9yVHlwZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5maWVsZE5hbWVzICYmIG1lc3NhZ2UuZmllbGROYW1lcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpZWxkTmFtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmZpZWxkTmFtZXMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNJbnRlcmZhY2UgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1JlZmVyZW5jZWRGaWVsZHNGb3JUeXBlfSBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmllbGROYW1lcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJmaWVsZE5hbWVzXCIpKSB7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5maWVsZE5hbWVzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWVsZE5hbWVzOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmZpZWxkTmFtZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmZpZWxkTmFtZXNbaV0pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWVsZE5hbWVzOiBzdHJpbmdbXSBleHBlY3RlZFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmlzSW50ZXJmYWNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlzSW50ZXJmYWNlXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmlzSW50ZXJmYWNlICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpc0ludGVyZmFjZTogYm9vbGVhbiBleHBlY3RlZFwiO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUmVmZXJlbmNlZEZpZWxkc0ZvclR5cGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAqIEBtZW1iZXJvZiBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge1JlZmVyZW5jZWRGaWVsZHNGb3JUeXBlfSBtZXNzYWdlIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgKi9cbiAgICBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgb2JqZWN0LmZpZWxkTmFtZXMgPSBbXTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QuaXNJbnRlcmZhY2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmllbGROYW1lcyAmJiBtZXNzYWdlLmZpZWxkTmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3QuZmllbGROYW1lcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLmZpZWxkTmFtZXMubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgb2JqZWN0LmZpZWxkTmFtZXNbal0gPSBtZXNzYWdlLmZpZWxkTmFtZXNbal07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaXNJbnRlcmZhY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaXNJbnRlcmZhY2VcIikpXG4gICAgICAgICAgICBvYmplY3QuaXNJbnRlcmZhY2UgPSBtZXNzYWdlLmlzSW50ZXJmYWNlO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlIHRvIEpTT04uXG4gICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAqIEBtZW1iZXJvZiBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBSZWZlcmVuY2VkRmllbGRzRm9yVHlwZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlO1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IFJlcG9ydCA9ICRyb290LlJlcG9ydCA9ICgoKSA9PiB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUmVwb3J0LlxuICAgICAqIEBleHBvcnRzIElSZXBvcnRcbiAgICAgKiBAaW50ZXJmYWNlIElSZXBvcnRcbiAgICAgKiBAcHJvcGVydHkge0lSZXBvcnRIZWFkZXJ8bnVsbH0gW2hlYWRlcl0gUmVwb3J0IGhlYWRlclxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsSVRyYWNlc0FuZFN0YXRzPnxudWxsfSBbdHJhY2VzUGVyUXVlcnldIFJlcG9ydCB0cmFjZXNQZXJRdWVyeVxuICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB8bnVsbH0gW2VuZFRpbWVdIFJlcG9ydCBlbmRUaW1lXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW29wZXJhdGlvbkNvdW50XSBSZXBvcnQgb3BlcmF0aW9uQ291bnRcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW3RyYWNlc1ByZUFnZ3JlZ2F0ZWRdIFJlcG9ydCB0cmFjZXNQcmVBZ2dyZWdhdGVkXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJlcG9ydC5cbiAgICAgKiBAZXhwb3J0cyBSZXBvcnRcbiAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBSZXBvcnQuXG4gICAgICogQGltcGxlbWVudHMgSVJlcG9ydFxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SVJlcG9ydD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlcG9ydChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMudHJhY2VzUGVyUXVlcnkgPSB7fTtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBvcnQgaGVhZGVyLlxuICAgICAqIEBtZW1iZXIge0lSZXBvcnRIZWFkZXJ8bnVsbHx1bmRlZmluZWR9IGhlYWRlclxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnQucHJvdG90eXBlLmhlYWRlciA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBSZXBvcnQgdHJhY2VzUGVyUXVlcnkuXG4gICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsSVRyYWNlc0FuZFN0YXRzPn0gdHJhY2VzUGVyUXVlcnlcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0LnByb3RvdHlwZS50cmFjZXNQZXJRdWVyeSA9ICR1dGlsLmVtcHR5T2JqZWN0O1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0IGVuZFRpbWUuXG4gICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB8bnVsbHx1bmRlZmluZWR9IGVuZFRpbWVcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgUmVwb3J0LnByb3RvdHlwZS5lbmRUaW1lID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFJlcG9ydCBvcGVyYXRpb25Db3VudC5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IG9wZXJhdGlvbkNvdW50XG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFJlcG9ydC5wcm90b3R5cGUub3BlcmF0aW9uQ291bnQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0IHRyYWNlc1ByZUFnZ3JlZ2F0ZWQuXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn0gdHJhY2VzUHJlQWdncmVnYXRlZFxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnQucHJvdG90eXBlLnRyYWNlc1ByZUFnZ3JlZ2F0ZWQgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgUmVwb3J0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lSZXBvcnQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7UmVwb3J0fSBSZXBvcnQgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBSZXBvcnQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXBvcnQocHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSZXBvcnQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgUmVwb3J0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVJlcG9ydH0gbWVzc2FnZSBSZXBvcnQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFJlcG9ydC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVhZGVyICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJoZWFkZXJcIikpXG4gICAgICAgICAgICAkcm9vdC5SZXBvcnRIZWFkZXIuZW5jb2RlKG1lc3NhZ2UuaGVhZGVyLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVuZFRpbWVcIikpXG4gICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmVuY29kZShtZXNzYWdlLmVuZFRpbWUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2VzUGVyUXVlcnkgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRyYWNlc1BlclF1ZXJ5XCIpKVxuICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2UudHJhY2VzUGVyUXVlcnkpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKS51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICRyb290LlRyYWNlc0FuZFN0YXRzLmVuY29kZShtZXNzYWdlLnRyYWNlc1BlclF1ZXJ5W2tleXNbaV1dLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm9wZXJhdGlvbkNvdW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJvcGVyYXRpb25Db3VudFwiKSlcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMCA9Ki80OCkudWludDY0KG1lc3NhZ2Uub3BlcmF0aW9uQ291bnQpO1xuICAgICAgICBpZiAobWVzc2FnZS50cmFjZXNQcmVBZ2dyZWdhdGVkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmFjZXNQcmVBZ2dyZWdhdGVkXCIpKVxuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAwID0qLzU2KS5ib29sKG1lc3NhZ2UudHJhY2VzUHJlQWdncmVnYXRlZCk7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSZXBvcnQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgUmVwb3J0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVJlcG9ydH0gbWVzc2FnZSBSZXBvcnQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFJlcG9ydC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgUmVwb3J0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAqIEBtZW1iZXJvZiBSZXBvcnRcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7UmVwb3J0fSBSZXBvcnRcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFJlcG9ydC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5SZXBvcnQoKSwga2V5O1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5oZWFkZXIgPSAkcm9vdC5SZXBvcnRIZWFkZXIuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcCgpLnBvcysrO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYWNlc1BlclF1ZXJ5ID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjZXNQZXJRdWVyeSA9IHt9O1xuICAgICAgICAgICAgICAgIGtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByZWFkZXIucG9zKys7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjZXNQZXJRdWVyeVtrZXldID0gJHJvb3QuVHJhY2VzQW5kU3RhdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZFRpbWUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5vcGVyYXRpb25Db3VudCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNlc1ByZUFnZ3JlZ2F0ZWQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBSZXBvcnQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcmV0dXJucyB7UmVwb3J0fSBSZXBvcnRcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIFJlcG9ydC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgYSBSZXBvcnQgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAqL1xuICAgIFJlcG9ydC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXIgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaGVhZGVyXCIpKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5SZXBvcnRIZWFkZXIudmVyaWZ5KG1lc3NhZ2UuaGVhZGVyKTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJoZWFkZXIuXCIgKyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50cmFjZXNQZXJRdWVyeSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmFjZXNQZXJRdWVyeVwiKSkge1xuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc09iamVjdChtZXNzYWdlLnRyYWNlc1BlclF1ZXJ5KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFjZXNQZXJRdWVyeTogb2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBsZXQga2V5ID0gT2JqZWN0LmtleXMobWVzc2FnZS50cmFjZXNQZXJRdWVyeSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlRyYWNlc0FuZFN0YXRzLnZlcmlmeShtZXNzYWdlLnRyYWNlc1BlclF1ZXJ5W2tleVtpXV0pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhY2VzUGVyUXVlcnkuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbmRUaW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVuZFRpbWVcIikpIHtcbiAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudmVyaWZ5KG1lc3NhZ2UuZW5kVGltZSk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZW5kVGltZS5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm9wZXJhdGlvbkNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9wZXJhdGlvbkNvdW50XCIpKVxuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5vcGVyYXRpb25Db3VudCkgJiYgIShtZXNzYWdlLm9wZXJhdGlvbkNvdW50ICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLm9wZXJhdGlvbkNvdW50LmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uub3BlcmF0aW9uQ291bnQuaGlnaCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wZXJhdGlvbkNvdW50OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2VzUHJlQWdncmVnYXRlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmFjZXNQcmVBZ2dyZWdhdGVkXCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnRyYWNlc1ByZUFnZ3JlZ2F0ZWQgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInRyYWNlc1ByZUFnZ3JlZ2F0ZWQ6IGJvb2xlYW4gZXhwZWN0ZWRcIjtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFJlcG9ydCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIFJlcG9ydFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge1JlcG9ydH0gbWVzc2FnZSBSZXBvcnRcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIFJlcG9ydC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLm9iamVjdHMgfHwgb3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgIG9iamVjdC50cmFjZXNQZXJRdWVyeSA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgb2JqZWN0LmhlYWRlciA9IG51bGw7XG4gICAgICAgICAgICBvYmplY3QuZW5kVGltZSA9IG51bGw7XG4gICAgICAgICAgICBvYmplY3Qub3BlcmF0aW9uQ291bnQgPSAwO1xuICAgICAgICAgICAgb2JqZWN0LnRyYWNlc1ByZUFnZ3JlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXIgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaGVhZGVyXCIpKVxuICAgICAgICAgICAgb2JqZWN0LmhlYWRlciA9ICRyb290LlJlcG9ydEhlYWRlci50b09iamVjdChtZXNzYWdlLmhlYWRlciwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5kVGltZVwiKSlcbiAgICAgICAgICAgIG9iamVjdC5lbmRUaW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChtZXNzYWdlLmVuZFRpbWUsIG9wdGlvbnMpO1xuICAgICAgICBsZXQga2V5czI7XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNlc1BlclF1ZXJ5ICYmIChrZXlzMiA9IE9iamVjdC5rZXlzKG1lc3NhZ2UudHJhY2VzUGVyUXVlcnkpKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iamVjdC50cmFjZXNQZXJRdWVyeSA9IHt9O1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBrZXlzMi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBvYmplY3QudHJhY2VzUGVyUXVlcnlba2V5czJbal1dID0gJHJvb3QuVHJhY2VzQW5kU3RhdHMudG9PYmplY3QobWVzc2FnZS50cmFjZXNQZXJRdWVyeVtrZXlzMltqXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm9wZXJhdGlvbkNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9wZXJhdGlvbkNvdW50XCIpKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLm9wZXJhdGlvbkNvdW50ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG9iamVjdC5vcGVyYXRpb25Db3VudCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLm9wZXJhdGlvbkNvdW50KSA6IG1lc3NhZ2Uub3BlcmF0aW9uQ291bnQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm9wZXJhdGlvbkNvdW50ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLm9wZXJhdGlvbkNvdW50KSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLm9wZXJhdGlvbkNvdW50LmxvdyA+Pj4gMCwgbWVzc2FnZS5vcGVyYXRpb25Db3VudC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2Uub3BlcmF0aW9uQ291bnQ7XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNlc1ByZUFnZ3JlZ2F0ZWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJhY2VzUHJlQWdncmVnYXRlZFwiKSlcbiAgICAgICAgICAgIG9iamVjdC50cmFjZXNQcmVBZ2dyZWdhdGVkID0gbWVzc2FnZS50cmFjZXNQcmVBZ2dyZWdhdGVkO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIFJlcG9ydCB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgUmVwb3J0XG4gICAgICogQGluc3RhbmNlXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAqL1xuICAgIFJlcG9ydC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcG9ydDtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBDb250ZXh0dWFsaXplZFN0YXRzID0gJHJvb3QuQ29udGV4dHVhbGl6ZWRTdGF0cyA9ICgoKSA9PiB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQ29udGV4dHVhbGl6ZWRTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBJQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBpbnRlcmZhY2UgSUNvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAcHJvcGVydHkge0lTdGF0c0NvbnRleHR8bnVsbH0gW2NvbnRleHRdIENvbnRleHR1YWxpemVkU3RhdHMgY29udGV4dFxuICAgICAqIEBwcm9wZXJ0eSB7SVF1ZXJ5TGF0ZW5jeVN0YXRzfG51bGx9IFtxdWVyeUxhdGVuY3lTdGF0c10gQ29udGV4dHVhbGl6ZWRTdGF0cyBxdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsSVR5cGVTdGF0PnxudWxsfSBbcGVyVHlwZVN0YXRdIENvbnRleHR1YWxpemVkU3RhdHMgcGVyVHlwZVN0YXRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29udGV4dHVhbGl6ZWRTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ29udGV4dHVhbGl6ZWRTdGF0cy5cbiAgICAgKiBAaW1wbGVtZW50cyBJQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkU3RhdHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb250ZXh0dWFsaXplZFN0YXRzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5wZXJUeXBlU3RhdCA9IHt9O1xuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHR1YWxpemVkU3RhdHMgY29udGV4dC5cbiAgICAgKiBAbWVtYmVyIHtJU3RhdHNDb250ZXh0fG51bGx8dW5kZWZpbmVkfSBjb250ZXh0XG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFN0YXRzLnByb3RvdHlwZS5jb250ZXh0ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIENvbnRleHR1YWxpemVkU3RhdHMgcXVlcnlMYXRlbmN5U3RhdHMuXG4gICAgICogQG1lbWJlciB7SVF1ZXJ5TGF0ZW5jeVN0YXRzfG51bGx8dW5kZWZpbmVkfSBxdWVyeUxhdGVuY3lTdGF0c1xuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRTdGF0cy5wcm90b3R5cGUucXVlcnlMYXRlbmN5U3RhdHMgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQ29udGV4dHVhbGl6ZWRTdGF0cyBwZXJUeXBlU3RhdC5cbiAgICAgKiBAbWVtYmVyIHtPYmplY3QuPHN0cmluZyxJVHlwZVN0YXQ+fSBwZXJUeXBlU3RhdFxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRTdGF0cy5wcm90b3R5cGUucGVyVHlwZVN0YXQgPSAkdXRpbC5lbXB0eU9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgQ29udGV4dHVhbGl6ZWRTdGF0cyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SUNvbnRleHR1YWxpemVkU3RhdHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKiBAcmV0dXJucyB7Q29udGV4dHVhbGl6ZWRTdGF0c30gQ29udGV4dHVhbGl6ZWRTdGF0cyBpbnN0YW5jZVxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkU3RhdHMuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb250ZXh0dWFsaXplZFN0YXRzKHByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ29udGV4dHVhbGl6ZWRTdGF0cyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBDb250ZXh0dWFsaXplZFN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0lDb250ZXh0dWFsaXplZFN0YXRzfSBtZXNzYWdlIENvbnRleHR1YWxpemVkU3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkU3RhdHMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNvbnRleHQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNvbnRleHRcIikpXG4gICAgICAgICAgICAkcm9vdC5TdGF0c0NvbnRleHQuZW5jb2RlKG1lc3NhZ2UuY29udGV4dCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlMYXRlbmN5U3RhdHNcIikpXG4gICAgICAgICAgICAkcm9vdC5RdWVyeUxhdGVuY3lTdGF0cy5lbmNvZGUobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cywgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBpZiAobWVzc2FnZS5wZXJUeXBlU3RhdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicGVyVHlwZVN0YXRcIikpXG4gICAgICAgICAgICBmb3IgKGxldCBrZXlzID0gT2JqZWN0LmtleXMobWVzc2FnZS5wZXJUeXBlU3RhdCksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcoa2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgJHJvb3QuVHlwZVN0YXQuZW5jb2RlKG1lc3NhZ2UucGVyVHlwZVN0YXRba2V5c1tpXV0sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbnRleHR1YWxpemVkU3RhdHMgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQ29udGV4dHVhbGl6ZWRTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICogQG1lbWJlcm9mIENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJQ29udGV4dHVhbGl6ZWRTdGF0c30gbWVzc2FnZSBDb250ZXh0dWFsaXplZFN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFN0YXRzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBDb250ZXh0dWFsaXplZFN0YXRzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICogQHJldHVybnMge0NvbnRleHR1YWxpemVkU3RhdHN9IENvbnRleHR1YWxpemVkU3RhdHNcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAqL1xuICAgIENvbnRleHR1YWxpemVkU3RhdHMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQ29udGV4dHVhbGl6ZWRTdGF0cygpLCBrZXk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBsZXQgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRleHQgPSAkcm9vdC5TdGF0c0NvbnRleHQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzID0gJHJvb3QuUXVlcnlMYXRlbmN5U3RhdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcCgpLnBvcysrO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBlclR5cGVTdGF0ID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wZXJUeXBlU3RhdCA9IHt9O1xuICAgICAgICAgICAgICAgIGtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByZWFkZXIucG9zKys7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5wZXJUeXBlU3RhdFtrZXldID0gJHJvb3QuVHlwZVN0YXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgQ29udGV4dHVhbGl6ZWRTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgKiBAcmV0dXJucyB7Q29udGV4dHVhbGl6ZWRTdGF0c30gQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRTdGF0cy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgYSBDb250ZXh0dWFsaXplZFN0YXRzIG1lc3NhZ2UuXG4gICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAqIEBtZW1iZXJvZiBDb250ZXh0dWFsaXplZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRTdGF0cy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICBpZiAobWVzc2FnZS5jb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbnRleHRcIikpIHtcbiAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlN0YXRzQ29udGV4dC52ZXJpZnkobWVzc2FnZS5jb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250ZXh0LlwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlMYXRlbmN5U3RhdHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicXVlcnlMYXRlbmN5U3RhdHNcIikpIHtcbiAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlF1ZXJ5TGF0ZW5jeVN0YXRzLnZlcmlmeShtZXNzYWdlLnF1ZXJ5TGF0ZW5jeVN0YXRzKTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJxdWVyeUxhdGVuY3lTdGF0cy5cIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBlclR5cGVTdGF0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBlclR5cGVTdGF0XCIpKSB7XG4gICAgICAgICAgICBpZiAoISR1dGlsLmlzT2JqZWN0KG1lc3NhZ2UucGVyVHlwZVN0YXQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInBlclR5cGVTdGF0OiBvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGxldCBrZXkgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnBlclR5cGVTdGF0KTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHlwZVN0YXQudmVyaWZ5KG1lc3NhZ2UucGVyVHlwZVN0YXRba2V5W2ldXSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwZXJUeXBlU3RhdC5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBDb250ZXh0dWFsaXplZFN0YXRzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0NvbnRleHR1YWxpemVkU3RhdHN9IG1lc3NhZ2UgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICovXG4gICAgQ29udGV4dHVhbGl6ZWRTdGF0cy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLm9iamVjdHMgfHwgb3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgIG9iamVjdC5wZXJUeXBlU3RhdCA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgb2JqZWN0LmNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgb2JqZWN0LnF1ZXJ5TGF0ZW5jeVN0YXRzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbnRleHRcIikpXG4gICAgICAgICAgICBvYmplY3QuY29udGV4dCA9ICRyb290LlN0YXRzQ29udGV4dC50b09iamVjdChtZXNzYWdlLmNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgICBpZiAobWVzc2FnZS5xdWVyeUxhdGVuY3lTdGF0cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJxdWVyeUxhdGVuY3lTdGF0c1wiKSlcbiAgICAgICAgICAgIG9iamVjdC5xdWVyeUxhdGVuY3lTdGF0cyA9ICRyb290LlF1ZXJ5TGF0ZW5jeVN0YXRzLnRvT2JqZWN0KG1lc3NhZ2UucXVlcnlMYXRlbmN5U3RhdHMsIG9wdGlvbnMpO1xuICAgICAgICBsZXQga2V5czI7XG4gICAgICAgIGlmIChtZXNzYWdlLnBlclR5cGVTdGF0ICYmIChrZXlzMiA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucGVyVHlwZVN0YXQpKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iamVjdC5wZXJUeXBlU3RhdCA9IHt9O1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBrZXlzMi5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBvYmplY3QucGVyVHlwZVN0YXRba2V5czJbal1dID0gJHJvb3QuVHlwZVN0YXQudG9PYmplY3QobWVzc2FnZS5wZXJUeXBlU3RhdFtrZXlzMltqXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgQ29udGV4dHVhbGl6ZWRTdGF0cyB0byBKU09OLlxuICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgKiBAbWVtYmVyb2YgQ29udGV4dHVhbGl6ZWRTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgKi9cbiAgICBDb250ZXh0dWFsaXplZFN0YXRzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29udGV4dHVhbGl6ZWRTdGF0cztcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBUcmFjZXNBbmRTdGF0cyA9ICRyb290LlRyYWNlc0FuZFN0YXRzID0gKCgpID0+IHtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgYSBUcmFjZXNBbmRTdGF0cy5cbiAgICAgKiBAZXhwb3J0cyBJVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAaW50ZXJmYWNlIElUcmFjZXNBbmRTdGF0c1xuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPElUcmFjZXxVaW50OEFycmF5PnxudWxsfSBbdHJhY2VdIFRyYWNlc0FuZFN0YXRzIHRyYWNlXG4gICAgICogQHByb3BlcnR5IHskcHJvdG9idWYuVG9BcnJheS48SUNvbnRleHR1YWxpemVkU3RhdHM+fEFycmF5LjxJQ29udGV4dHVhbGl6ZWRTdGF0cz58bnVsbH0gW3N0YXRzV2l0aENvbnRleHRdIFRyYWNlc0FuZFN0YXRzIHN0YXRzV2l0aENvbnRleHRcbiAgICAgKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLElSZWZlcmVuY2VkRmllbGRzRm9yVHlwZT58bnVsbH0gW3JlZmVyZW5jZWRGaWVsZHNCeVR5cGVdIFRyYWNlc0FuZFN0YXRzIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGVcbiAgICAgKiBAcHJvcGVydHkge0FycmF5LjxJVHJhY2V8VWludDhBcnJheT58bnVsbH0gW2ludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0c10gVHJhY2VzQW5kU3RhdHMgaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRyYWNlc0FuZFN0YXRzLlxuICAgICAqIEBleHBvcnRzIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVHJhY2VzQW5kU3RhdHMuXG4gICAgICogQGltcGxlbWVudHMgSVRyYWNlc0FuZFN0YXRzXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtJVHJhY2VzQW5kU3RhdHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmFjZXNBbmRTdGF0cyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMudHJhY2UgPSBbXTtcbiAgICAgICAgdGhpcy5zdGF0c1dpdGhDb250ZXh0ID0gW107XG4gICAgICAgIHRoaXMucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IHt9O1xuICAgICAgICB0aGlzLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cyA9IFtdO1xuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYWNlc0FuZFN0YXRzIHRyYWNlLlxuICAgICAqIEBtZW1iZXIge0FycmF5LjxJVHJhY2V8VWludDhBcnJheT59IHRyYWNlXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2VzQW5kU3RhdHMucHJvdG90eXBlLnRyYWNlID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlc0FuZFN0YXRzIHN0YXRzV2l0aENvbnRleHQuXG4gICAgICogQG1lbWJlciB7QXJyYXkuPElDb250ZXh0dWFsaXplZFN0YXRzPn0gc3RhdHNXaXRoQ29udGV4dFxuICAgICAqIEBtZW1iZXJvZiBUcmFjZXNBbmRTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLnByb3RvdHlwZS5zdGF0c1dpdGhDb250ZXh0ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgIC8qKlxuICAgICAqIFRyYWNlc0FuZFN0YXRzIHJlZmVyZW5jZWRGaWVsZHNCeVR5cGUuXG4gICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsSVJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlPn0gcmVmZXJlbmNlZEZpZWxkc0J5VHlwZVxuICAgICAqIEBtZW1iZXJvZiBUcmFjZXNBbmRTdGF0c1xuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLnByb3RvdHlwZS5yZWZlcmVuY2VkRmllbGRzQnlUeXBlID0gJHV0aWwuZW1wdHlPYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZXNBbmRTdGF0cyBpbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMuXG4gICAgICogQG1lbWJlciB7QXJyYXkuPElUcmFjZXxVaW50OEFycmF5Pn0gaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgVHJhY2VzQW5kU3RhdHMucHJvdG90eXBlLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFRyYWNlc0FuZFN0YXRzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVRyYWNlc0FuZFN0YXRzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICogQHJldHVybnMge1RyYWNlc0FuZFN0YXRzfSBUcmFjZXNBbmRTdGF0cyBpbnN0YW5jZVxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2VzQW5kU3RhdHMocHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUcmFjZXNBbmRTdGF0cyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBUcmFjZXNBbmRTdGF0cy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVRyYWNlc0FuZFN0YXRzfSBtZXNzYWdlIFRyYWNlc0FuZFN0YXRzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgKi9cbiAgICBUcmFjZXNBbmRTdGF0cy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2UgIT0gbnVsbCAmJiBtZXNzYWdlLnRyYWNlLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS50cmFjZS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmFjZVtpXSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKTtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmJ5dGVzKG1lc3NhZ2UudHJhY2VbaV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5lbmNvZGUobWVzc2FnZS50cmFjZVtpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICBsZXQgYXJyYXkyO1xuICAgICAgICBpZiAobWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0LnRvQXJyYXkpXG4gICAgICAgICAgICBhcnJheTIgPSBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQudG9BcnJheSgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheTIgPSBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQ7XG4gICAgICAgIGlmIChhcnJheTIgIT0gbnVsbCAmJiBhcnJheTIubGVuZ3RoKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheTIubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgJHJvb3QuQ29udGV4dHVhbGl6ZWRTdGF0cy5lbmNvZGUoYXJyYXkyW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cyAhPSBudWxsICYmIG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzW2ldIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpO1xuICAgICAgICAgICAgICAgICAgICB3cml0ZXIuYnl0ZXMobWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHNbaV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5UcmFjZS5lbmNvZGUobWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVmZXJlbmNlZEZpZWxkc0J5VHlwZVwiKSlcbiAgICAgICAgICAgIGZvciAobGV0IGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGUpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKS51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmVuY29kZShtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGVba2V5c1tpXV0sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRyYWNlc0FuZFN0YXRzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIFRyYWNlc0FuZFN0YXRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJVHJhY2VzQW5kU3RhdHN9IG1lc3NhZ2UgVHJhY2VzQW5kU3RhdHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUcmFjZXNBbmRTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgKiBAcmV0dXJucyB7VHJhY2VzQW5kU3RhdHN9IFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgKi9cbiAgICBUcmFjZXNBbmRTdGF0cy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5UcmFjZXNBbmRTdGF0cygpLCBrZXk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBsZXQgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnRyYWNlICYmIG1lc3NhZ2UudHJhY2UubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjZSA9IFtdO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2UucHVzaCgkcm9vdC5UcmFjZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQgJiYgbWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0Lmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhdHNXaXRoQ29udGV4dCA9IFtdO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhdHNXaXRoQ29udGV4dC5wdXNoKCRyb290LkNvbnRleHR1YWxpemVkU3RhdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWZlcmVuY2VkRmllbGRzQnlUeXBlID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWZlcmVuY2VkRmllbGRzQnlUeXBlID0ge307XG4gICAgICAgICAgICAgICAga2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgIHJlYWRlci5wb3MrKztcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGVba2V5XSA9ICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMgJiYgbWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMgPSBbXTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cy5wdXNoKCRyb290LlRyYWNlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBUcmFjZXNBbmRTdGF0cyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICogQHJldHVybnMge1RyYWNlc0FuZFN0YXRzfSBUcmFjZXNBbmRTdGF0c1xuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICovXG4gICAgVHJhY2VzQW5kU3RhdHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIGEgVHJhY2VzQW5kU3RhdHMgbWVzc2FnZS5cbiAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICovXG4gICAgVHJhY2VzQW5kU3RhdHMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJhY2VcIikpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnRyYWNlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFjZTogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS50cmFjZS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnRyYWNlW2ldIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UudmVyaWZ5KG1lc3NhZ2UudHJhY2VbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFjZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXRzV2l0aENvbnRleHRcIikpIHtcbiAgICAgICAgICAgIGxldCBhcnJheTI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0LnRvQXJyYXkpXG4gICAgICAgICAgICAgICAgYXJyYXkyID0gbWVzc2FnZS5zdGF0c1dpdGhDb250ZXh0LnRvQXJyYXkoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhcnJheTIgPSBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQ7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkyKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGF0c1dpdGhDb250ZXh0OiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheTIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAkcm9vdC5Db250ZXh0dWFsaXplZFN0YXRzLnZlcmlmeShhcnJheTJbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RhdHNXaXRoQ29udGV4dC5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVmZXJlbmNlZEZpZWxkc0J5VHlwZVwiKSkge1xuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc09iamVjdChtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJlZmVyZW5jZWRGaWVsZHNCeVR5cGU6IG9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgbGV0IGtleSA9IE9iamVjdC5rZXlzKG1lc3NhZ2UucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLnZlcmlmeShtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGVba2V5W2ldXSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZWZlcmVuY2VkRmllbGRzQnlUeXBlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0c1wiKSkge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHM6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzW2ldIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gJHJvb3QuVHJhY2UudmVyaWZ5KG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUcmFjZXNBbmRTdGF0cyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7VHJhY2VzQW5kU3RhdHN9IG1lc3NhZ2UgVHJhY2VzQW5kU3RhdHNcbiAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9iamVjdC50cmFjZSA9IFtdO1xuICAgICAgICAgICAgb2JqZWN0LnN0YXRzV2l0aENvbnRleHQgPSBbXTtcbiAgICAgICAgICAgIG9iamVjdC5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5vYmplY3RzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICBvYmplY3QucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS50cmFjZSAmJiBtZXNzYWdlLnRyYWNlLmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LnRyYWNlID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG1lc3NhZ2UudHJhY2UubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyYWNlW2pdID0gJHJvb3QuVHJhY2UudG9PYmplY3QobWVzc2FnZS50cmFjZVtqXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHNXaXRoQ29udGV4dCAmJiBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICBvYmplY3Quc3RhdHNXaXRoQ29udGV4dCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLnN0YXRzV2l0aENvbnRleHQubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXRzV2l0aENvbnRleHRbal0gPSAkcm9vdC5Db250ZXh0dWFsaXplZFN0YXRzLnRvT2JqZWN0KG1lc3NhZ2Uuc3RhdHNXaXRoQ29udGV4dFtqXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzICYmIG1lc3NhZ2UuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqZWN0LmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNzYWdlLmludGVybmFsVHJhY2VzQ29udHJpYnV0aW5nVG9TdGF0cy5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICBvYmplY3QuaW50ZXJuYWxUcmFjZXNDb250cmlidXRpbmdUb1N0YXRzW2pdID0gJHJvb3QuVHJhY2UudG9PYmplY3QobWVzc2FnZS5pbnRlcm5hbFRyYWNlc0NvbnRyaWJ1dGluZ1RvU3RhdHNbal0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBrZXlzMjtcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVmZXJlbmNlZEZpZWxkc0J5VHlwZSAmJiAoa2V5czIgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnJlZmVyZW5jZWRGaWVsZHNCeVR5cGUpKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iamVjdC5yZWZlcmVuY2VkRmllbGRzQnlUeXBlID0ge307XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGtleXMyLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgIG9iamVjdC5yZWZlcmVuY2VkRmllbGRzQnlUeXBlW2tleXMyW2pdXSA9ICRyb290LlJlZmVyZW5jZWRGaWVsZHNGb3JUeXBlLnRvT2JqZWN0KG1lc3NhZ2UucmVmZXJlbmNlZEZpZWxkc0J5VHlwZVtrZXlzMltqXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgVHJhY2VzQW5kU3RhdHMgdG8gSlNPTi5cbiAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICogQG1lbWJlcm9mIFRyYWNlc0FuZFN0YXRzXG4gICAgICogQGluc3RhbmNlXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAqL1xuICAgIFRyYWNlc0FuZFN0YXRzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVHJhY2VzQW5kU3RhdHM7XG59KSgpO1xuXG5leHBvcnQgY29uc3QgZ29vZ2xlID0gJHJvb3QuZ29vZ2xlID0gKCgpID0+IHtcblxuICAgIC8qKlxuICAgICAqIE5hbWVzcGFjZSBnb29nbGUuXG4gICAgICogQGV4cG9ydHMgZ29vZ2xlXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqL1xuICAgIGNvbnN0IGdvb2dsZSA9IHt9O1xuXG4gICAgZ29vZ2xlLnByb3RvYnVmID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOYW1lc3BhY2UgcHJvdG9idWYuXG4gICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGVcbiAgICAgICAgICogQG5hbWVzcGFjZVxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcHJvdG9idWYgPSB7fTtcblxuICAgICAgICBwcm90b2J1Zi5UaW1lc3RhbXAgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFRpbWVzdGFtcC5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWZcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3NlY29uZHNdIFRpbWVzdGFtcCBzZWNvbmRzXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbbmFub3NdIFRpbWVzdGFtcCBuYW5vc1xuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUaW1lc3RhbXAuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUaW1lc3RhbXAuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVGltZXN0YW1wXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXA9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gVGltZXN0YW1wKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRpbWVzdGFtcCBzZWNvbmRzLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBzZWNvbmRzXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRpbWVzdGFtcC5wcm90b3R5cGUuc2Vjb25kcyA9IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGltZXN0YW1wIG5hbm9zLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBuYW5vc1xuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAucHJvdG90eXBlLm5hbm9zID0gMDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFRpbWVzdGFtcCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtnb29nbGUucHJvdG9idWYuSVRpbWVzdGFtcD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXB9IFRpbWVzdGFtcCBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcChwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRpbWVzdGFtcCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklUaW1lc3RhbXB9IG1lc3NhZ2UgVGltZXN0YW1wIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRpbWVzdGFtcC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2Vjb25kcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2Vjb25kc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2Uuc2Vjb25kcyk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFub3MgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm5hbm9zXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmludDMyKG1lc3NhZ2UubmFub3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUaW1lc3RhbXAgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5JVGltZXN0YW1wfSBtZXNzYWdlIFRpbWVzdGFtcCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgVGltZXN0YW1wIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXB9IFRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCgpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2Vjb25kcyA9IHJlYWRlci5pbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFub3MgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBUaW1lc3RhbXAgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtnb29nbGUucHJvdG9idWYuVGltZXN0YW1wfSBUaW1lc3RhbXBcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVGltZXN0YW1wLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFRpbWVzdGFtcCBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVGltZXN0YW1wLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlY29uZHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2Vjb25kc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zZWNvbmRzKSAmJiAhKG1lc3NhZ2Uuc2Vjb25kcyAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zZWNvbmRzLmxvdykgJiYgJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uuc2Vjb25kcy5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzZWNvbmRzOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5uYW5vcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJuYW5vc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5uYW5vcykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJuYW5vczogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUaW1lc3RhbXAgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtnb29nbGUucHJvdG9idWYuVGltZXN0YW1wfSBtZXNzYWdlIFRpbWVzdGFtcFxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUaW1lc3RhbXAudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZWNvbmRzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm5hbm9zID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2Vjb25kcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZWNvbmRzXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2Uuc2Vjb25kcyA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZWNvbmRzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2Uuc2Vjb25kcykgOiBtZXNzYWdlLnNlY29uZHM7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZWNvbmRzID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnNlY29uZHMpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbmV3ICR1dGlsLkxvbmdCaXRzKG1lc3NhZ2Uuc2Vjb25kcy5sb3cgPj4+IDAsIG1lc3NhZ2Uuc2Vjb25kcy5oaWdoID4+PiAwKS50b051bWJlcigpIDogbWVzc2FnZS5zZWNvbmRzO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5hbm9zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm5hbm9zXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubmFub3MgPSBtZXNzYWdlLm5hbm9zO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgVGltZXN0YW1wIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcFxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRpbWVzdGFtcC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFRpbWVzdGFtcDtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gcHJvdG9idWY7XG4gICAgfSkoKTtcblxuICAgIHJldHVybiBnb29nbGU7XG59KSgpO1xuXG5leHBvcnQgeyAkcm9vdCBhcyBkZWZhdWx0IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@apollo/usage-reporting-protobuf/generated/esm/protobuf.js\n");

/***/ })

};
;